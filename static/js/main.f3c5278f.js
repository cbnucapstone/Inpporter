/*! For license information please see main.f3c5278f.js.LICENSE.txt */
!function(){var e={6741:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=6741,e.exports=t},4321:function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}function a(e){if("string"!==typeof e)throw new Error(r(7));return e.charAt(0).toUpperCase()+e.slice(1)}function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),(function(){}))}n.r(t),n.d(t,{capitalize:function(){return a},createChainedFunction:function(){return i},createSvgIcon:function(){return Or},debounce:function(){return Mr},deprecatedPropType:function(){return Dr},isMuiElement:function(){return Fr},ownerDocument:function(){return Pr},ownerWindow:function(){return Lr},requirePropFactory:function(){return zr},setRef:function(){return Br},unstable_useId:function(){return Zr},unsupportedProp:function(){return Wr},useControlled:function(){return Vr},useEventCallback:function(){return Ur},useForkRef:function(){return Hr},useIsFocusVisible:function(){return na}});var o=n(7462),s=n(2791),u=n(5987);function c(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=c(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var l=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=c(e))&&(r&&(r+=" "),r+=t);return r},f=n(2110),h=n.n(f),p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d="object"===("undefined"===typeof window?"undefined":p(window))&&"object"===("undefined"===typeof document?"undefined":p(document))&&9===document.nodeType,m=n(3144),v=n(9611);function g(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,v.Z)(e,t)}var y=n(7326),b=n(3366),x={}.constructor;function w(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(w);if(e.constructor!==x)return e;var t={};for(var n in e)t[n]=w(e[n]);return t}function k(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,a=w(t),i=r.plugins.onCreateRule(e,a,n);return i||(e[0],null)}var S=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},_=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var n=0;n<e.length&&"!important"!==e[n];n++)t&&(t+=", "),t+=S(e[n]," ");else t=S(e,", ");return"!important"===e[e.length-1]&&(t+=" !important"),t};function T(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function I(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function N(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var a=n.indent,i=void 0===a?0:a,o=t.fallbacks;!1===n.format&&(i=-1/0);var s=T(n),u=s.linebreak,c=s.space;if(e&&i++,o)if(Array.isArray(o))for(var l=0;l<o.length;l++){var f=o[l];for(var h in f){var p=f[h];null!=p&&(r&&(r+=u),r+=I(h+":"+c+_(p)+";",i))}}else for(var d in o){var m=o[d];null!=m&&(r&&(r+=u),r+=I(d+":"+c+_(m)+";",i))}for(var v in t){var g=t[v];null!=g&&"fallbacks"!==v&&(r&&(r+=u),r+=I(v+":"+c+_(g)+";",i))}return(r||n.allowEmpty)&&e?(r&&(r=""+u+r+u),I(""+e+c+"{"+r,--i)+I("}",i)):r}var C=/([[\].#*$><+~=|^:(),"'`\s])/g,E="undefined"!==typeof CSS&&CSS.escape,A=function(e){return E?E(e):e.replace(C,"\\$1")},R=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var r=n.sheet,a=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:a&&(this.renderer=new a)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var a=t;n&&!1===n.process||(a=this.options.jss.plugins.onChangeValue(t,e,this));var i=null==a||!1===a,o=e in this.style;if(i&&!o&&!r)return this;var s=i&&o;if(s?delete this.style[e]:this.style[e]=a,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,a),this;var u=this.options.sheet;return u&&u.attached,this},e}(),O=function(e){function t(t,n,r){var a;a=e.call(this,t,n,r)||this;var i=r.selector,o=r.scoped,s=r.sheet,u=r.generateId;return i?a.selectorText=i:!1!==o&&(a.id=u((0,y.Z)((0,y.Z)(a)),s),a.selectorText="."+A(a.id)),a}g(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=_(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,o.Z)({},e,{allowEmpty:!0}):e;return N(this.selectorText,this.style,n)},(0,m.Z)(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(R),M={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new O(e,t,n)}},D={indent:1,children:!0},F=/@([\w-]+)/,P=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(F);for(var a in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new oe((0,o.Z)({},n,{parent:this})),t)this.rules.add(a,t[a]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.toString=function(e){void 0===e&&(e=D);var t=T(e).linebreak;if(null==e.indent&&(e.indent=D.indent),null==e.children&&(e.children=D.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),L=/@media|@supports\s+/,z={onCreateRule:function(e,t,n){return L.test(e)?new P(e,t,n):null}},B={indent:1,children:!0},W=/@keyframes\s+([\w-]+)/,V=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(W);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var a=n.scoped,i=n.sheet,s=n.generateId;for(var u in this.id=!1===a?this.name:A(s(this,i)),this.rules=new oe((0,o.Z)({},n,{parent:this})),t)this.rules.add(u,t[u],(0,o.Z)({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=B);var t=T(e).linebreak;if(null==e.indent&&(e.indent=B.indent),null==e.children&&(e.children=B.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),j=/@keyframes\s+/,U=/\$([\w-]+)/g,H=function(e,t){return"string"===typeof e?e.replace(U,(function(e,n){return n in t?t[n]:e})):e},Z=function(e,t,n){var r=e[t],a=H(r,n);a!==r&&(e[t]=a)},G={onCreateRule:function(e,t,n){return"string"===typeof e&&j.test(e)?new V(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&Z(e,"animation-name",n.keyframes),"animation"in e&&Z(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return H(e,r.keyframes);default:return e}}},q=function(e){function t(){return e.apply(this,arguments)||this}return g(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,o.Z)({},e,{allowEmpty:!0}):e;return N(this.key,this.style,n)},t}(R),K={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new q(e,t,n):null}},X=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=T(e).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=N(this.at,this.style[r]),this.style[r+1]&&(n+=t);return n}return N(this.at,this.style,e)},e}(),Y=/@font-face/,$={onCreateRule:function(e,t,n){return Y.test(e)?new X(e,t,n):null}},Q=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return N(this.key,this.style,e)},e}(),J={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new Q(e,t,n):null}},ee=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),te={"@charset":!0,"@import":!0,"@namespace":!0},ne={onCreateRule:function(e,t,n){return e in te?new ee(e,t,n):null}},re=[M,z,G,K,$,J,ne],ae={process:!0},ie={force:!0,process:!0},oe=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,a=r.parent,i=r.sheet,s=r.jss,u=r.Renderer,c=r.generateId,l=r.scoped,f=(0,o.Z)({classes:this.classes,parent:a,sheet:i,jss:s,Renderer:u,generateId:c,scoped:l,name:e,keyframes:this.keyframes,selector:void 0},n),h=e;e in this.raw&&(h=e+"-d"+this.counter++),this.raw[h]=t,h in this.classes&&(f.selector="."+A(this.classes[h]));var p=k(h,t,f);if(!p)return null;this.register(p);var d=void 0===f.index?this.index.length:f.index;return this.index.splice(d,0,p),p},t.replace=function(e,t,n){var r=this.get(e),a=this.index.indexOf(r);r&&this.remove(r);var i=n;return-1!==a&&(i=(0,o.Z)({},n,{index:a})),this.add(e,t,i)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof O?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof V&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof O?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof V&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=ae);var a=this.options,i=a.jss.plugins,o=a.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var s=t.style;if(i.onUpdate(n,t,o,r),r.process&&s&&s!==t.style){for(var u in i.onProcessStyle(t.style,t,o),t.style){var c=t.style[u];c!==s[u]&&t.prop(u,c,ie)}for(var l in s){var f=t.style[l],h=s[l];null==f&&f!==h&&t.prop(l,null,ie)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,a=T(e).linebreak,i=0;i<this.index.length;i++){var o=this.index[i].toString(e);(o||r)&&(t&&(t+=a),t+=o)}return t},e}(),se=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=(0,o.Z)({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new oe(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var a=this.rules.add(e,t,n);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?this.deployed?(r?r.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),a):a:(this.deployed=!1,a)):null},t.replaceRule=function(e,t,n){var r=this.rules.get(e);if(!r)return this.addRule(e,t,n);var a=this.rules.replace(e,t,n);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?this.deployed?(this.renderer&&(a?r.renderable&&this.renderer.replaceRule(r.renderable,a):this.renderer.deleteRule(r)),a):a:(this.deployed=!1,a)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var a=this.addRule(r,e[r],t);a&&n.push(a)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),ue=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var a=this.registry.onCreateRule[r](e,t,n);if(a)return a}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,a=0;a<this.registry.onChangeValue.length;a++)r=this.registry.onChangeValue[a](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),ce=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=(0,b.Z)(t,["attached"]),a=T(r).linebreak,i="",o=0;o<this.registry.length;o++){var s=this.registry[o];null!=n&&s.attached!==n||(i&&(i+=a),i+=s.toString(r))}return i},(0,m.Z)(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),le=new ce,fe="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),he="2f1acc6c3a606b082e5eef5e54414ffb";null==fe[he]&&(fe[he]=0);var pe=fe[he]++,de=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var a="",i="";return r&&(r.options.classNamePrefix&&(i=r.options.classNamePrefix),null!=r.options.jss.id&&(a=String(r.options.jss.id))),e.minify?""+(i||"c")+pe+a+t:i+n.key+"-"+pe+(a?"-"+a:"")+"-"+t}},me=function(e){var t;return function(){return t||(t=e()),t}},ve=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},ge=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=_(n)),e.attributeStyleMap)e.attributeStyleMap.set(t,r);else{var a=r?r.indexOf("!important"):-1,i=a>-1?r.substr(0,a-1):r;e.style.setProperty(t,i,a>-1?"important":"")}}catch(o){return!1}return!0},ye=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},be=function(e,t){return e.selectorText=t,e.selectorText===t},xe=me((function(){return document.querySelector("head")}));function we(e){var t=le.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var a=function(e){for(var t=xe(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(a)return{parent:a.parentNode,node:a.nextSibling}}return!1}var ke=me((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),Se=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(r){return!1}return e.cssRules[n]},_e=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},Te=function(){function e(e){this.getPropertyValue=ve,this.setProperty=ge,this.removeProperty=ye,this.setSelector=be,this.hasInsertedRules=!1,this.cssRules=[],e&&le.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,a=t.element;this.element=a||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var i=ke();i&&this.element.setAttribute("nonce",i)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=we(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var a=n,i=a.parentNode;i&&i.insertBefore(e,a.nextSibling)}else xe().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,a=n;if("conditional"===e.type||"keyframes"===e.type){var i=_e(n,t);if(!1===(a=Se(n,r.toString({children:!1}),i)))return!1;this.refCssRule(e,i,a)}return this.insertRules(r.rules,a),a}var o=e.toString();if(!o)return!1;var s=_e(n,t),u=Se(n,o,s);return!1!==u&&(this.hasInsertedRules=!0,this.refCssRule(e,s,u),u)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof se&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),Ie=0,Ne=function(){function e(e){this.id=Ie++,this.version="10.9.2",this.plugins=new ue,this.options={id:{minify:!1},createGenerateId:de,Renderer:d?Te:null,plugins:[]},this.generateId=de({minify:!1});for(var t=0;t<re.length;t++)this.plugins.use(re[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=(0,o.Z)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===le.index?0:le.index+1);var r=new se(e,(0,o.Z)({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),le.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var r=(0,o.Z)({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var a=k(e,t,r);return a&&this.plugins.onProcessRule(a),a},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),Ce=function(e){return new Ne(e)},Ee="object"===typeof CSS&&null!=CSS&&"number"in CSS;function Ae(e){var t=null;for(var n in e){var r=e[n],a=typeof r;if("function"===a)t||(t={}),t[n]=r;else if("object"===a&&null!==r&&!Array.isArray(r)){var i=Ae(r);i&&(t||(t={}),t[n]=i)}}return t}Ce();function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var r=(0,o.Z)({},t);return Object.keys(n).forEach((function(e){n[e]&&(r[e]="".concat(t[e]," ").concat(n[e]))})),r}var Oe={set:function(e,t,n,r){var a=e.get(t);a||(a=new Map,e.set(t,a)),a.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},Me=Oe;var De=s.createContext(null);function Fe(){return s.useContext(De)}var Pe="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",Le=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var ze=Date.now(),Be="fnValues"+ze,We="fnStyle"+ ++ze,Ve=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=k(e,{},n);return r[We]=t,r},onProcessStyle:function(e,t){if(Be in t||We in t)return e;var n={};for(var r in e){var a=e[r];"function"===typeof a&&(delete e[r],n[r]=a)}return t[Be]=n,e},onUpdate:function(e,t,n,r){var a=t,i=a[We];i&&(a.style=i(e)||{});var o=a[Be];if(o)for(var s in o)a.prop(s,o[s](e),r)}}},je="@global",Ue="@global ",He=function(){function e(e,t,n){for(var r in this.type="global",this.at=je,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new oe((0,o.Z)({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),Ze=function(){function e(e,t,n){this.type="global",this.at=je,this.isProcessed=!1,this.key=e,this.options=n;var r=e.substr(Ue.length);this.rule=n.jss.createRule(r,t,(0,o.Z)({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),Ge=/\s*,\s*/g;function qe(e,t){for(var n=e.split(Ge),r="",a=0;a<n.length;a++)r+=t+" "+n[a].trim(),n[a+1]&&(r+=", ");return r}var Ke=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===je)return new He(e,t,n);if("@"===e[0]&&e.substr(0,Ue.length)===Ue)return new Ze(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,r=e.style,a=r?r[je]:null;if(a){for(var i in a)t.addRule(i,a[i],(0,o.Z)({},n,{selector:qe(i,e.selector)}));delete r[je]}}(e,t),function(e,t){var n=e.options,r=e.style;for(var a in r)if("@"===a[0]&&a.substr(0,je.length)===je){var i=qe(a.substr(je.length),e.selector);t.addRule(i,r[a],(0,o.Z)({},n,{selector:i})),delete r[a]}}(e,t))}}},Xe=/\s*,\s*/g,Ye=/&/g,$e=/\$([\w-]+)/g;var Qe=function(){function e(e,t){return function(n,r){var a=e.getRule(r)||t&&t.getRule(r);return a?a.selector:r}}function t(e,t){for(var n=t.split(Xe),r=e.split(Xe),a="",i=0;i<n.length;i++)for(var o=n[i],s=0;s<r.length;s++){var u=r[s];a&&(a+=", "),a+=-1!==u.indexOf("&")?u.replace(Ye,o):o+" "+u}return a}function n(e,t,n){if(n)return(0,o.Z)({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var a=(0,o.Z)({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete a.name,a}return{onProcessStyle:function(r,a,i){if("style"!==a.type)return r;var s,u,c=a,l=c.options.parent;for(var f in r){var h=-1!==f.indexOf("&"),p="@"===f[0];if(h||p){if(s=n(c,l,s),h){var d=t(f,c.selector);u||(u=e(l,i)),d=d.replace($e,u);var m=c.key+"-"+f;"replaceRule"in l?l.replaceRule(m,r[f],(0,o.Z)({},s,{selector:d})):l.addRule(m,r[f],(0,o.Z)({},s,{selector:d}))}else p&&l.addRule(f,{},s).addRule(c.key,r[f],{selector:c.selector});delete r[f]}}return r}}},Je=/[A-Z]/g,et=/^ms-/,tt={};function nt(e){return"-"+e.toLowerCase()}var rt=function(e){if(tt.hasOwnProperty(e))return tt[e];var t=e.replace(Je,nt);return tt[e]=et.test(t)?"-"+t:t};function at(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:rt(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(at):t.fallbacks=at(e.fallbacks)),t}var it=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=at(e[t]);return e}return at(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=rt(t);return t===r?e:(n.prop(r,e),null)}}},ot=Ee&&CSS?CSS.px:"px",st=Ee&&CSS?CSS.ms:"ms",ut=Ee&&CSS?CSS.percent:"%";function ct(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var a in e)r[a]=e[a],r[a.replace(t,n)]=e[a];return r}var lt=ct({"animation-delay":st,"animation-duration":st,"background-position":ot,"background-position-x":ot,"background-position-y":ot,"background-size":ot,border:ot,"border-bottom":ot,"border-bottom-left-radius":ot,"border-bottom-right-radius":ot,"border-bottom-width":ot,"border-left":ot,"border-left-width":ot,"border-radius":ot,"border-right":ot,"border-right-width":ot,"border-top":ot,"border-top-left-radius":ot,"border-top-right-radius":ot,"border-top-width":ot,"border-width":ot,"border-block":ot,"border-block-end":ot,"border-block-end-width":ot,"border-block-start":ot,"border-block-start-width":ot,"border-block-width":ot,"border-inline":ot,"border-inline-end":ot,"border-inline-end-width":ot,"border-inline-start":ot,"border-inline-start-width":ot,"border-inline-width":ot,"border-start-start-radius":ot,"border-start-end-radius":ot,"border-end-start-radius":ot,"border-end-end-radius":ot,margin:ot,"margin-bottom":ot,"margin-left":ot,"margin-right":ot,"margin-top":ot,"margin-block":ot,"margin-block-end":ot,"margin-block-start":ot,"margin-inline":ot,"margin-inline-end":ot,"margin-inline-start":ot,padding:ot,"padding-bottom":ot,"padding-left":ot,"padding-right":ot,"padding-top":ot,"padding-block":ot,"padding-block-end":ot,"padding-block-start":ot,"padding-inline":ot,"padding-inline-end":ot,"padding-inline-start":ot,"mask-position-x":ot,"mask-position-y":ot,"mask-size":ot,height:ot,width:ot,"min-height":ot,"max-height":ot,"min-width":ot,"max-width":ot,bottom:ot,left:ot,top:ot,right:ot,inset:ot,"inset-block":ot,"inset-block-end":ot,"inset-block-start":ot,"inset-inline":ot,"inset-inline-end":ot,"inset-inline-start":ot,"box-shadow":ot,"text-shadow":ot,"column-gap":ot,"column-rule":ot,"column-rule-width":ot,"column-width":ot,"font-size":ot,"font-size-delta":ot,"letter-spacing":ot,"text-decoration-thickness":ot,"text-indent":ot,"text-stroke":ot,"text-stroke-width":ot,"word-spacing":ot,motion:ot,"motion-offset":ot,outline:ot,"outline-offset":ot,"outline-width":ot,perspective:ot,"perspective-origin-x":ut,"perspective-origin-y":ut,"transform-origin":ut,"transform-origin-x":ut,"transform-origin-y":ut,"transform-origin-z":ut,"transition-delay":st,"transition-duration":st,"vertical-align":ot,"flex-basis":ot,"shape-margin":ot,size:ot,gap:ot,grid:ot,"grid-gap":ot,"row-gap":ot,"grid-row-gap":ot,"grid-column-gap":ot,"grid-template-rows":ot,"grid-template-columns":ot,"grid-auto-rows":ot,"grid-auto-columns":ot,"box-shadow-x":ot,"box-shadow-y":ot,"box-shadow-blur":ot,"box-shadow-spread":ot,"font-line-height":ot,"text-shadow-x":ot,"text-shadow-y":ot,"text-shadow-blur":ot});function ft(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=ft(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var a in t)t[a]=ft(a,t[a],n);else for(var i in t)t[i]=ft(e+"-"+i,t[i],n);else if("number"===typeof t&&!1===isNaN(t)){var o=n[e]||lt[e];return!o||0===t&&o===ot?t.toString():"function"===typeof o?o(t).toString():""+t+o}return t}var ht=function(e){void 0===e&&(e={});var t=ct(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=ft(r,e[r],t);return e},onChangeValue:function(e,n){return ft(n,e,t)}}},pt=n(3433),dt="",mt="",vt="",gt="",yt=d&&"ontouchstart"in document.documentElement;if(d){var bt={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},xt=document.createElement("p").style;for(var wt in bt)if(wt+"Transform"in xt){dt=wt,mt=bt[wt];break}"Webkit"===dt&&"msHyphens"in xt&&(dt="ms",mt=bt.ms,gt="edge"),"Webkit"===dt&&"-apple-trailing-word"in xt&&(vt="apple")}var kt=dt,St=mt,_t=vt,Tt=gt,It=yt;var Nt={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===kt?"-webkit-"+e:St+e)}},Ct={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===kt?St+"print-"+e:e)}},Et=/[-\s]+(.)?/g;function At(e,t){return t?t.toUpperCase():""}function Rt(e){return e.replace(Et,At)}function Ot(e){return Rt("-"+e)}var Mt,Dt={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===kt){var n="mask-image";if(Rt(n)in t)return e;if(kt+Ot(n)in t)return St+e}return e}},Ft={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==_t||It?e:St+e)}},Pt={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:St+e)}},Lt={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:St+e)}},zt={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===kt||"ms"===kt&&"edge"!==Tt?St+e:e)}},Bt={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===kt||"ms"===kt||"apple"===_t?St+e:e)}},Wt={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===kt?"WebkitColumn"+Ot(e)in t&&St+"column-"+e:"Moz"===kt&&("page"+Ot(e)in t&&"page-"+e))}},Vt={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===kt)return e;var n=e.replace("-inline","");return kt+Ot(n)in t&&St+n}},jt={supportedProperty:function(e,t){return Rt(e)in t&&e}},Ut={supportedProperty:function(e,t){var n=Ot(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:kt+n in t?St+e:"Webkit"!==kt&&"Webkit"+n in t&&"-webkit-"+e}},Ht={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===kt?""+St+e:e)}},Zt={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===kt?St+"scroll-chaining":e)}},Gt={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},qt={supportedProperty:function(e,t){var n=Gt[e];return!!n&&(kt+Ot(n)in t&&St+n)}},Kt={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Xt=Object.keys(Kt),Yt=function(e){return St+e},$t={supportedProperty:function(e,t,n){var r=n.multiple;if(Xt.indexOf(e)>-1){var a=Kt[e];if(!Array.isArray(a))return kt+Ot(a)in t&&St+a;if(!r)return!1;for(var i=0;i<a.length;i++)if(!(kt+Ot(a[0])in t))return!1;return a.map(Yt)}return!1}},Qt=[Nt,Ct,Dt,Ft,Pt,Lt,zt,Bt,Wt,Vt,jt,Ut,Ht,Zt,qt,$t],Jt=Qt.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),en=Qt.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,(0,pt.Z)(t.noPrefill)),e}),[]),tn={};if(d){Mt=document.createElement("p");var nn=window.getComputedStyle(document.documentElement,"");for(var rn in nn)isNaN(rn)||(tn[nn[rn]]=nn[rn]);en.forEach((function(e){return delete tn[e]}))}function an(e,t){if(void 0===t&&(t={}),!Mt)return e;if(null!=tn[e])return tn[e];"transition"!==e&&"transform"!==e||(t[e]=e in Mt.style);for(var n=0;n<Jt.length&&(tn[e]=Jt[n](e,Mt.style,t),!tn[e]);n++);try{Mt.style[e]=""}catch(r){return!1}return tn[e]}var on,sn={},un={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},cn=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function ln(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?an(t):", "+an(n);return r||(t||n)}function fn(e,t){var n=t;if(!on||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=sn[r])return sn[r];try{on.style[e]=n}catch(a){return sn[r]=!1,!1}if(un[e])n=n.replace(cn,ln);else if(""===on.style[e]&&("-ms-flex"===(n=St+n)&&(on.style[e]="-ms-flexbox"),on.style[e]=n,""===on.style[e]))return sn[r]=!1,!1;return on.style[e]="",sn[r]=n,sn[r]}d&&(on=document.createElement("p"));var hn=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var a=!1,i=an(n);i&&i!==n&&(a=!0);var o=!1,s=fn(i,_(r));s&&s!==r&&(o=!0),(a||o)&&(a&&delete t[n],t[i||n]=s||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===kt?e:"@"+St+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return fn(t,_(e))||e}}};var pn=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},a=Object.keys(t).sort(e),i=0;i<a.length;i++)r[a[i]]=t[a[i]];return r}}};var dn=Ce({plugins:[Ve(),Ke(),Qe(),it(),ht(),"undefined"===typeof window?null:hn(),pn()]}),mn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,a=void 0===r?"jss":r,i=e.seed,o=void 0===i?"":i,s=""===o?"":"".concat(o,"-"),u=0,c=function(){return u+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==Le.indexOf(e.key))return"Mui-".concat(e.key);var i="".concat(s).concat(r,"-").concat(e.key);return t.options.theme[Pe]&&""===o?"".concat(i,"-").concat(c()):i}return"".concat(s).concat(a).concat(c())}}(),vn={disableGeneration:!1,generateClassName:mn,jss:dn,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},gn=s.createContext(vn);var yn=-1e9;function bn(){return yn+=1}var xn=n(1002);function wn(e){return e&&"object"===(0,xn.Z)(e)&&e.constructor===Object}function kn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?(0,o.Z)({},e):e;return wn(e)&&wn(t)&&Object.keys(t).forEach((function(a){"__proto__"!==a&&(wn(t[a])&&a in e?r[a]=kn(e[a],t[a],n):r[a]=t[a])})),r}function Sn(e){var t="function"===typeof e;return{create:function(n,r){var a;try{a=t?e(n):e}catch(u){throw u}if(!r||!n.overrides||!n.overrides[r])return a;var i=n.overrides[r],s=(0,o.Z)({},a);return Object.keys(i).forEach((function(e){s[e]=kn(s[e],i[e])})),s},options:{}}}var _n={};function Tn(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var a=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,a=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,a=!0),a&&(r.cacheClasses.value=Re({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}function In(e,t){var n=e.state,r=e.theme,a=e.stylesOptions,i=e.stylesCreator,s=e.name;if(!a.disableGeneration){var u=Me.get(a.sheetsManager,i,r);u||(u={refs:0,staticSheet:null,dynamicStyles:null},Me.set(a.sheetsManager,i,r,u));var c=(0,o.Z)({},i.options,a,{theme:r,flip:"boolean"===typeof a.flip?a.flip:"rtl"===r.direction});c.generateId=c.serverGenerateClassName||c.generateClassName;var l=a.sheetsRegistry;if(0===u.refs){var f;a.sheetsCache&&(f=Me.get(a.sheetsCache,i,r));var h=i.create(r,s);f||((f=a.jss.createStyleSheet(h,(0,o.Z)({link:!1},c))).attach(),a.sheetsCache&&Me.set(a.sheetsCache,i,r,f)),l&&l.add(f),u.staticSheet=f,u.dynamicStyles=Ae(h)}if(u.dynamicStyles){var p=a.jss.createStyleSheet(u.dynamicStyles,(0,o.Z)({link:!0},c));p.update(t),p.attach(),n.dynamicSheet=p,n.classes=Re({baseClasses:u.staticSheet.classes,newClasses:p.classes}),l&&l.add(p)}else n.classes=u.staticSheet.classes;u.refs+=1}}function Nn(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function Cn(e){var t=e.state,n=e.theme,r=e.stylesOptions,a=e.stylesCreator;if(!r.disableGeneration){var i=Me.get(r.sheetsManager,a,n);i.refs-=1;var o=r.sheetsRegistry;0===i.refs&&(Me.delete(r.sheetsManager,a,n),r.jss.removeStyleSheet(i.staticSheet),o&&o.remove(i.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}}function En(e,t){var n,r=s.useRef([]),a=s.useMemo((function(){return{}}),t);r.current!==a&&(r.current=a,n=e()),s.useEffect((function(){return function(){n&&n()}}),[a])}function An(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,r=t.classNamePrefix,a=t.Component,i=t.defaultTheme,c=void 0===i?_n:i,l=(0,u.Z)(t,["name","classNamePrefix","Component","defaultTheme"]),f=Sn(e),h=n||r||"makeStyles";f.options={index:bn(),name:n,meta:h,classNamePrefix:h};var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Fe()||c,r=(0,o.Z)({},s.useContext(gn),l),i=s.useRef(),u=s.useRef();En((function(){var a={name:n,state:{},stylesCreator:f,stylesOptions:r,theme:t};return In(a,e),u.current=!1,i.current=a,function(){Cn(a)}}),[t,f]),s.useEffect((function(){u.current&&Nn(i.current,e),u.current=!0}));var h=Tn(i.current,e.classes,a);return h};return p}function Rn(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var a,i=t.props[n];for(a in i)void 0===r[a]&&(r[a]=i[a]);return r}var On=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=t.defaultTheme,a=t.withTheme,i=void 0!==a&&a,c=t.name,l=(0,u.Z)(t,["defaultTheme","withTheme","name"]);var f=c,p=An(e,(0,o.Z)({defaultTheme:r,Component:n,name:c||n.displayName,classNamePrefix:f},l)),d=s.forwardRef((function(e,t){e.classes;var a,l=e.innerRef,f=(0,u.Z)(e,["classes","innerRef"]),h=p((0,o.Z)({},n.defaultProps,e)),d=f;return("string"===typeof c||i)&&(a=Fe()||r,c&&(d=Rn({theme:a,name:c,props:f})),i&&!d.theme&&(d.theme=a)),s.createElement(n,(0,o.Z)({ref:l||t,classes:h},d))}));return h()(d,n),d}},Mn=["xs","sm","md","lg","xl"];function Dn(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,r=e.unit,a=void 0===r?"px":r,i=e.step,s=void 0===i?5:i,c=(0,u.Z)(e,["values","unit","step"]);function l(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(a,")")}function f(e,t){var r=Mn.indexOf(t);return r===Mn.length-1?l(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(a,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[Mn[r+1]]?n[Mn[r+1]]:t)-s/100).concat(a,")")}return(0,o.Z)({keys:Mn,values:n,up:l,down:function(e){var t=Mn.indexOf(e)+1,r=n[Mn[t]];return t===Mn.length?l("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-s/100).concat(a,")")},between:f,only:function(e){return f(e,e)},width:function(e){return n[e]}},c)}var Fn=n(4942);function Pn(e,t,n){var r;return(0,o.Z)({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),(0,o.Z)({paddingLeft:t(2),paddingRight:t(2)},n,(0,Fn.Z)({},e.up("sm"),(0,o.Z)({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(r={minHeight:56},(0,Fn.Z)(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,Fn.Z)(r,e.up("sm"),{minHeight:64}),r)},n)}var Ln={black:"#000",white:"#fff"},zn={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},Bn={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},Wn={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},Vn={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},jn={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Un={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Hn={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function Zn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function Gn(e){if(e.type)return e;if("#"===e.charAt(0))return Gn(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(r(3,e));var a=e.substring(t+1,e.length-1).split(",");return{type:n,values:a=a.map((function(e){return parseFloat(e)}))}}function qn(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function Kn(e){var t="hsl"===(e=Gn(e)).type?Gn(function(e){var t=(e=Gn(e)).values,n=t[0],r=t[1]/100,a=t[2]/100,i=r*Math.min(a,1-a),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return a-i*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",u=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(s+="a",u.push(t[3])),qn({type:s,values:u})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Xn(e,t){if(e=Gn(e),t=Zn(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return qn(e)}function Yn(e,t){if(e=Gn(e),t=Zn(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return qn(e)}var $n={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Ln.white,default:zn[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Qn={text:{primary:Ln.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:zn[800],default:"#303030"},action:{active:Ln.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Jn(e,t,n,r){var a=r.light||r,i=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Yn(e.main,a):"dark"===t&&(e.dark=Xn(e.main,i)))}function er(e){var t=e.primary,n=void 0===t?{light:Bn[300],main:Bn[500],dark:Bn[700]}:t,a=e.secondary,i=void 0===a?{light:Wn.A200,main:Wn.A400,dark:Wn.A700}:a,s=e.error,c=void 0===s?{light:Vn[300],main:Vn[500],dark:Vn[700]}:s,l=e.warning,f=void 0===l?{light:jn[300],main:jn[500],dark:jn[700]}:l,h=e.info,p=void 0===h?{light:Un[300],main:Un[500],dark:Un[700]}:h,d=e.success,m=void 0===d?{light:Hn[300],main:Hn[500],dark:Hn[700]}:d,v=e.type,g=void 0===v?"light":v,y=e.contrastThreshold,b=void 0===y?3:y,x=e.tonalOffset,w=void 0===x?.2:x,k=(0,u.Z)(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function S(e){var t=function(e,t){var n=Kn(e),r=Kn(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,Qn.text.primary)>=b?Qn.text.primary:$n.text.primary;return t}var _=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=(0,o.Z)({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(r(4,t));if("string"!==typeof e.main)throw new Error(r(5,JSON.stringify(e.main)));return Jn(e,"light",n,w),Jn(e,"dark",a,w),e.contrastText||(e.contrastText=S(e.main)),e},T={dark:Qn,light:$n};return kn((0,o.Z)({common:Ln,type:g,primary:_(n),secondary:_(i,"A400","A200","A700"),error:_(c),warning:_(f),info:_(p),success:_(m),grey:zn,contrastThreshold:b,getContrastText:S,augmentColor:_,tonalOffset:w},T[g]),k)}function tr(e){return Math.round(1e5*e)/1e5}function nr(e){return tr(e)}var rr={textTransform:"uppercase"},ar='"Roboto", "Helvetica", "Arial", sans-serif';function ir(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,a=void 0===r?ar:r,i=n.fontSize,s=void 0===i?14:i,c=n.fontWeightLight,l=void 0===c?300:c,f=n.fontWeightRegular,h=void 0===f?400:f,p=n.fontWeightMedium,d=void 0===p?500:p,m=n.fontWeightBold,v=void 0===m?700:m,g=n.htmlFontSize,y=void 0===g?16:g,b=n.allVariants,x=n.pxToRem,w=(0,u.Z)(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var k=s/14,S=x||function(e){return"".concat(e/y*k,"rem")},_=function(e,t,n,r,i){return(0,o.Z)({fontFamily:a,fontWeight:e,fontSize:S(t),lineHeight:n},a===ar?{letterSpacing:"".concat(tr(r/t),"em")}:{},i,b)},T={h1:_(l,96,1.167,-1.5),h2:_(l,60,1.2,-.5),h3:_(h,48,1.167,0),h4:_(h,34,1.235,.25),h5:_(h,24,1.334,0),h6:_(d,20,1.6,.15),subtitle1:_(h,16,1.75,.15),subtitle2:_(d,14,1.57,.1),body1:_(h,16,1.5,.15),body2:_(h,14,1.43,.15),button:_(d,14,1.75,.4,rr),caption:_(h,12,1.66,.4),overline:_(h,12,2.66,1,rr)};return kn((0,o.Z)({htmlFontSize:y,pxToRem:S,round:nr,fontFamily:a,fontSize:s,fontWeightLight:l,fontWeightRegular:h,fontWeightMedium:d,fontWeightBold:v},T),w,{clone:!1})}function or(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var sr=["none",or(0,2,1,-1,0,1,1,0,0,1,3,0),or(0,3,1,-2,0,2,2,0,0,1,5,0),or(0,3,3,-2,0,3,4,0,0,1,8,0),or(0,2,4,-1,0,4,5,0,0,1,10,0),or(0,3,5,-1,0,5,8,0,0,1,14,0),or(0,3,5,-1,0,6,10,0,0,1,18,0),or(0,4,5,-2,0,7,10,1,0,2,16,1),or(0,5,5,-3,0,8,10,1,0,3,14,2),or(0,5,6,-3,0,9,12,1,0,3,16,2),or(0,6,6,-3,0,10,14,1,0,4,18,3),or(0,6,7,-4,0,11,15,1,0,4,20,3),or(0,7,8,-4,0,12,17,2,0,5,22,4),or(0,7,8,-4,0,13,19,2,0,5,24,4),or(0,7,9,-4,0,14,21,2,0,5,26,4),or(0,8,9,-5,0,15,22,2,0,6,28,5),or(0,8,10,-5,0,16,24,2,0,6,30,5),or(0,8,11,-5,0,17,26,2,0,6,32,5),or(0,9,11,-5,0,18,28,2,0,7,34,6),or(0,9,12,-6,0,19,29,2,0,7,36,6),or(0,10,13,-6,0,20,31,3,0,8,38,7),or(0,10,13,-6,0,21,33,3,0,8,40,7),or(0,10,14,-6,0,22,35,3,0,8,42,7),or(0,11,14,-7,0,23,36,3,0,9,44,8),or(0,11,15,-7,0,24,38,3,0,9,46,8)],ur={borderRadius:4},cr=n(9439),lr={xs:0,sm:600,md:960,lg:1280,xl:1920},fr={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(lr[e],"px)")}};var hr=function(e,t){return t?kn(e,t,{clone:!1}):e};var pr={m:"margin",p:"padding"},dr={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},mr={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},vr=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!mr[e])return[e];e=mr[e]}var t=e.split(""),n=(0,cr.Z)(t,2),r=n[0],a=n[1],i=pr[r],o=dr[a]||"";return Array.isArray(o)?o.map((function(e){return i+e})):[i+o]})),gr=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function yr(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function br(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function xr(e){var t=yr(e.theme);return Object.keys(e).map((function(n){if(-1===gr.indexOf(n))return null;var r=br(vr(n),t),a=e[n];return function(e,t,n){if(Array.isArray(t)){var r=e.theme.breakpoints||fr;return t.reduce((function(e,a,i){return e[r.up(r.keys[i])]=n(t[i]),e}),{})}if("object"===(0,xn.Z)(t)){var a=e.theme.breakpoints||fr;return Object.keys(t).reduce((function(e,r){return e[a.up(r)]=n(t[r]),e}),{})}return n(t)}(e,a,r)})).reduce(hr,{})}xr.propTypes={},xr.filterProps=gr;function wr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=yr({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}var kr={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Sr={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function _r(e){return"".concat(Math.round(e),"ms")}var Tr={easing:kr,duration:Sr,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?Sr.standard:n,a=t.easing,i=void 0===a?kr.easeInOut:a,o=t.delay,s=void 0===o?0:o;(0,u.Z)(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof r?r:_r(r)," ").concat(i," ").concat("string"===typeof s?s:_r(s))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}},Ir={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Nr(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,a=void 0===r?{}:r,i=e.palette,o=void 0===i?{}:i,s=e.spacing,c=e.typography,l=void 0===c?{}:c,f=(0,u.Z)(e,["breakpoints","mixins","palette","spacing","typography"]),h=er(o),p=Dn(n),d=wr(s),m=kn({breakpoints:p,direction:"ltr",mixins:Pn(p,d,a),overrides:{},palette:h,props:{},shadows:sr,typography:ir(h,l),spacing:d,shape:ur,transitions:Tr,zIndex:Ir},f),v=arguments.length,g=new Array(v>1?v-1:0),y=1;y<v;y++)g[y-1]=arguments[y];return m=g.reduce((function(e,t){return kn(e,t)}),m)}var Cr=Nr();var Er=function(e,t){return On(e,(0,o.Z)({defaultTheme:Cr},t))},Ar=s.forwardRef((function(e,t){var n=e.children,r=e.classes,i=e.className,c=e.color,f=void 0===c?"inherit":c,h=e.component,p=void 0===h?"svg":h,d=e.fontSize,m=void 0===d?"medium":d,v=e.htmlColor,g=e.titleAccess,y=e.viewBox,b=void 0===y?"0 0 24 24":y,x=(0,u.Z)(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return s.createElement(p,(0,o.Z)({className:l(r.root,i,"inherit"!==f&&r["color".concat(a(f))],"default"!==m&&"medium"!==m&&r["fontSize".concat(a(m))]),focusable:"false",viewBox:b,color:v,"aria-hidden":!g||void 0,role:g?"img":void 0,ref:t},x),n,g?s.createElement("title",null,g):null)}));Ar.muiName="SvgIcon";var Rr=Er((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(Ar);function Or(e,t){var n=function(t,n){return s.createElement(Rr,(0,o.Z)({ref:n},t),e)};return n.muiName=Rr.muiName,s.memo(s.forwardRef(n))}function Mr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o=this,s=function(){e.apply(o,a)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r}function Dr(e,t){return function(){return null}}function Fr(e,t){return s.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}function Pr(e){return e&&e.ownerDocument||document}function Lr(e){return Pr(e).defaultView||window}function zr(e){return function(){return null}}function Br(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Wr(e,t,n,r,a){return null}function Vr(e){var t=e.controlled,n=e.default,r=(e.name,e.state,s.useRef(void 0!==t).current),a=s.useState(n),i=a[0],o=a[1];return[r?t:i,s.useCallback((function(e){r||o(e)}),[])]}var jr="undefined"!==typeof window?s.useLayoutEffect:s.useEffect;function Ur(e){var t=s.useRef(e);return jr((function(){t.current=e})),s.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}function Hr(e,t){return s.useMemo((function(){return null==e&&null==t?null:function(n){Br(e,n),Br(t,n)}}),[e,t])}function Zr(e){var t=s.useState(e),n=t[0],r=t[1],a=e||n;return s.useEffect((function(){null==n&&r("mui-".concat(Math.round(1e5*Math.random())))}),[n]),a}var Gr=n(4164),qr=!0,Kr=!1,Xr=null,Yr={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function $r(e){e.metaKey||e.altKey||e.ctrlKey||(qr=!0)}function Qr(){qr=!1}function Jr(){"hidden"===this.visibilityState&&Kr&&(qr=!0)}function ea(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return qr||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!Yr[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function ta(){Kr=!0,window.clearTimeout(Xr),Xr=window.setTimeout((function(){Kr=!1}),100)}function na(){return{isFocusVisible:ea,onBlurVisible:ta,ref:s.useCallback((function(e){var t,n=Gr.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",$r,!0),t.addEventListener("mousedown",Qr,!0),t.addEventListener("pointerdown",Qr,!0),t.addEventListener("touchstart",Qr,!0),t.addEventListener("visibilitychange",Jr,!0))}),[])}}},9704:function(e,t,n){"use strict";var r=n(4836),a=n(5263);t.Z=void 0;var i=a(n(2791)),o=(0,r(n(4894)).default)(i.createElement("path",{d:"M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m13 2h-2.5A3.5 3.5 0 0 0 12 8.5V11h-2v3h2v7h3v-7h3v-3h-3V9a1 1 0 0 1 1-1h2V5z"}),"Facebook");t.Z=o},6785:function(e,t,n){"use strict";var r=n(4836),a=n(5263);t.Z=void 0;var i=a(n(2791)),o=(0,r(n(4894)).default)(i.createElement("path",{d:"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z"}),"Instagram");t.Z=o},8704:function(e,t,n){"use strict";var r=n(4836),a=n(5263);t.Z=void 0;var i=a(n(2791)),o=(0,r(n(4894)).default)(i.createElement("path",{d:"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"}),"LinkedIn");t.Z=o},8688:function(e,t,n){"use strict";var r=n(4836),a=n(5263);t.Z=void 0;var i=a(n(2791)),o=(0,r(n(4894)).default)(i.createElement("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"}),"Twitter");t.Z=o},4894:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(4321)},4525:function(e,t,n){(function(){"use strict";var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var a=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function i(e,t){if(t)e:{var n=a;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in n))break e;n=n[o]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}function o(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function s(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function u(e){if(!(e instanceof Array)){e=s(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}i("Symbol",(function(e){function t(e,t){this.g=e,r(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",a=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+a++,r)}})),i("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),i=0;i<n.length;i++){var s=a[n[i]];"function"===typeof s&&"function"!=typeof s.prototype[e]&&r(s.prototype,e,{configurable:!0,writable:!0,value:function(){return o(t(this))}})}return e}));var c,l="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var f;e:{var h={};try{h.__proto__={a:!0},f=h.a;break e}catch(Gt){}f=!1}c=f?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var p=c;function d(e,t){if(e.prototype=l(t.prototype),e.prototype.constructor=e,p)p(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.na=t.prototype}function m(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function v(e){if(e.l)throw new TypeError("Generator is already running");e.l=!0}function g(e,t){e.j={da:t,ea:!0},e.g=e.o||e.u}function y(e,t,n){return e.g=n,{value:t}}function b(e){this.g=new m,this.h=e}function x(e,t,n,r){try{var a=t.call(e.g.i,n);if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");if(!a.done)return e.g.l=!1,a;var i=a.value}catch(o){return e.g.i=null,g(e.g,o),w(e)}return e.g.i=null,r.call(e.g,i),w(e)}function w(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.l=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,g(e.g,n)}if(e.g.l=!1,e.g.j){if(t=e.g.j,e.g.j=null,t.ea)throw t.da;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function k(e){this.next=function(t){return v(e.g),e.g.i?t=x(e,e.g.i.next,t,e.g.s):(e.g.s(t),t=w(e)),t},this.throw=function(t){return v(e.g),e.g.i?t=x(e,e.g.i.throw,t,e.g.s):(g(e.g,t),t=w(e)),t},this.return=function(t){return function(e,t){v(e.g);var n=e.g.i;return n?x(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),w(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function S(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(r,a){!function e(i){i.done?r(i.value):Promise.resolve(i.value).then(t,n).then(e,a)}(e.next())}))}(new k(new b(e)))}m.prototype.s=function(e){this.h=e},m.prototype.return=function(e){this.j={return:e},this.g=this.u},i("Promise",(function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.s=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.g=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var i=a.setTimeout;n.prototype.i=function(e){i(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.j(r)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.D),reject:e(this.l)}},t.prototype.D=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.H(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.A(e):this.o(e)}},t.prototype.A=function(e){var t=void 0;try{t=e.then}catch(n){return void this.l(n)}"function"==typeof t?this.I(t,e):this.o(e)},t.prototype.l=function(e){this.u(2,e)},t.prototype.o=function(e){this.u(1,e)},t.prototype.u=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.G(),this.B()},t.prototype.G=function(){var e=this;i((function(){if(e.C()){var t=a.console;"undefined"!==typeof t&&t.error(e.i)}}),1)},t.prototype.C=function(){if(this.s)return!1;var e=a.CustomEvent,t=a.Event,n=a.dispatchEvent;return"undefined"===typeof n||("function"===typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"===typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=a.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.B=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)o.h(this.g[e]);this.g=null}};var o=new n;return t.prototype.H=function(e){var t=this.j();e.M(t.resolve,t.reject)},t.prototype.I=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{a(e(t))}catch(n){i(n)}}:t}var a,i,o=new t((function(e,t){a=e,i=t}));return this.M(r(e,a),r(n,i)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.M=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?o.h(n):this.g.push(n),this.s=!0},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var a=s(e),i=a.next();!i.done;i=a.next())r(i.value).M(t,n)}))},t.all=function(e){var n=s(e),a=n.next();return a.done?r([]):new t((function(e,t){function i(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,r(a.value).M(i(o.length-1),t),a=n.next()}while(!a.done)}))},t}));var _="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};i("Object.assign",(function(e){return e||_})),i("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}})),i("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var a=n[t];if(a===e||Object.is(a,e))return!0}return!1}})),i("String.prototype.includes",(function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}})),i("Array.prototype.keys",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,a={next:function(){if(!r&&n<e.length){var a=n++;return{value:t(a,e[a]),done:!1}}return r=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}(this,(function(e){return e}))}}));var T=this||self;function I(e,t){e=e.split(".");var n,r=T;e[0]in r||"undefined"==typeof r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function N(){throw Error("Invalid UTF8")}function C(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var E,A,R="undefined"!==typeof TextDecoder,O="undefined"!==typeof TextEncoder,M={},D=null;function F(e){var t;void 0===t&&(t=0),L(),t=M[t];for(var n=Array(Math.floor(e.length/3)),r=t[64]||"",a=0,i=0;a<e.length-2;a+=3){var o=e[a],s=e[a+1],u=e[a+2],c=t[o>>2];o=t[(3&o)<<4|s>>4],s=t[(15&s)<<2|u>>6],u=t[63&u],n[i++]=c+o+s+u}switch(c=0,u=r,e.length-a){case 2:u=t[(15&(c=e[a+1]))<<2]||r;case 1:e=e[a],n[i]=t[e>>2]+t[(3&e)<<4|c>>4]+u+r}return n.join("")}function P(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);var r=new Uint8Array(n),a=0;return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),a=D[n];if(null!=a)return a;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}L();for(var r=0;;){var a=n(-1),i=n(0),o=n(64),s=n(64);if(64===s&&-1===a)break;t(a<<2|i>>4),64!=o&&(t(i<<4&240|o>>2),64!=s&&t(o<<6&192|s))}}(e,(function(e){r[a++]=e})),a!==n?r.subarray(0,a):r}function L(){if(!D){D={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=e.concat(t[n].split(""));M[n]=r;for(var a=0;a<r.length;a++){var i=r[a];void 0===D[i]&&(D[i]=a)}}}}var z,B="function"===typeof Uint8Array;function W(e){return B&&null!=e&&e instanceof Uint8Array}function V(e){if(this.L=e,null!==e&&0===e.length)throw Error("ByteString should be constructed with non-empty values")}var j="function"===typeof Uint8Array.prototype.slice,U=0;function H(e,t){return Error("Invalid wire type: "+e+" (at position "+t+")")}function Z(){return Error("Failed to read varint, encoding is invalid.")}function G(e,t){t=void 0!==(t=void 0===t?{}:t).v&&t.v,this.h=null,this.g=this.i=this.j=0,this.v=t,e&&q(this,e)}function q(e,t){e.h=function(e,t){if(e.constructor===Uint8Array)return e;if(e.constructor===ArrayBuffer)return new Uint8Array(e);if(e.constructor===Array)return new Uint8Array(e);if(e.constructor===String)return P(e);if(e.constructor===V)return!t&&(t=e.L)&&t.constructor===Uint8Array?t:(t=null==(t=e.L)||W(t)?t:"string"===typeof t?P(t):null,(e=e.L=t)?new Uint8Array(e):z||(z=new Uint8Array(0)));if(e instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(t,e.v),e.j=0,e.i=e.h.length,e.g=e.j}function K(e){if(e.g>e.i)throw Error("Tried to read past the end of the data "+e.g+" > "+e.i)}function X(e){var t=e.h,n=t[e.g],r=127&n;if(128>n)return e.g+=1,K(e),r;if(r|=(127&(n=t[e.g+1]))<<7,128>n)return e.g+=2,K(e),r;if(r|=(127&(n=t[e.g+2]))<<14,128>n)return e.g+=3,K(e),r;if(r|=(127&(n=t[e.g+3]))<<21,128>n)return e.g+=4,K(e),r;if(n=t[e.g+4],e.g+=5,r|=(15&n)<<28,128>n)return K(e),r;if(128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++])throw Z();return K(e),r}G.prototype.reset=function(){this.g=this.j};var Y=[];function $(){this.g=[]}function Q(e,t){for(;127<t;)e.g.push(127&t|128),t>>>=7;e.g.push(t)}function J(e){var t={},n=void 0!==t.W&&t.W;this.l={v:void 0!==t.v&&t.v},this.W=n,t=this.l,Y.length?(n=Y.pop(),t&&(n.v=t.v),e&&q(n,e),e=n):e=new G(e,t),this.g=e,this.j=this.g.g,this.h=this.i=-1}function ee(e){var t=e.g;if(t.g==t.i)return!1;e.j=e.g.g;var n=X(e.g)>>>0;if(t=n>>>3,!(0<=(n&=7)&&5>=n))throw H(n,e.j);if(1>t)throw Error("Invalid field number: "+t+" (at position "+e.j+")");return e.i=t,e.h=n,!0}function te(e){switch(e.h){case 0:if(0!=e.h)te(e);else e:{for(var t=(e=e.g).g,n=t+10;t<n;)if(0===(128&e.h[t++])){e.g=t,K(e);break e}throw Z()}break;case 1:(e=e.g).g+=8,K(e);break;case 2:2!=e.h?te(e):(t=X(e.g)>>>0,(e=e.g).g+=t,K(e));break;case 5:(e=e.g).g+=4,K(e);break;case 3:for(t=e.i;;){if(!ee(e))throw Error("Unmatched start-group tag: stream EOF");if(4==e.h){if(e.i!=t)throw Error("Unmatched end-group tag");break}te(e)}break;default:throw H(e.h,e.j)}}$.prototype.length=function(){return this.g.length},$.prototype.end=function(){var e=this.g;return this.g=[],e},J.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};var ne=[];function re(){this.i=[],this.h=0,this.g=new $}function ae(e,t){0!==t.length&&(e.i.push(t),e.h+=t.length)}var ie="function"===typeof Symbol&&"symbol"===typeof Symbol()?Symbol(void 0):void 0;function oe(e,t){Object.isFrozen(e)||(ie?e[ie]|=t:void 0!==e.N?e.N|=t:Object.defineProperties(e,{N:{value:t,configurable:!0,writable:!0,enumerable:!1}}))}function se(e){var t;return null==(t=ie?e[ie]:e.N)?0:t}function ue(e){return oe(e,1),e}function ce(e){return!!Array.isArray(e)&&!!(2&se(e))}function le(e){if(!Array.isArray(e))throw Error("cannot mark non-array as immutable");oe(e,2)}function fe(e){return null!==e&&"object"===typeof e&&!Array.isArray(e)&&e.constructor===Object}var he=Object.freeze(ue([]));function pe(e){if(ce(e.m))throw Error("Cannot mutate an immutable Message")}var de,me="undefined"!=typeof Symbol&&"undefined"!=typeof Symbol.hasInstance;function ve(e){return{value:e,configurable:!1,writable:!1,enumerable:!1}}function ge(e,t,n){return-1===t?null:t>=e.i?e.g?e.g[t]:void 0:void 0!==n&&n&&e.g&&null!=(n=e.g[t])?n:e.m[t+e.h]}function ye(e,t,n,r){r=void 0!==r&&r,pe(e),t<e.i&&!r?e.m[t+e.h]=n:(e.g||(e.g=e.m[e.i+e.h]={}))[t]=n}function be(e,t,n,r){n=void 0===n||n;var a=ge(e,t,r=void 0!==r&&r);return null==a&&(a=he),ce(e.m)?n&&(le(a),Object.freeze(a)):(a===he||ce(a))&&ye(e,t,a=ue(a.slice()),r),a}function xe(e,t,n){return null==(e=null==(e=ge(e,t))?e:+e)?void 0===n?0:n:e}function we(e,t,n,r){e.j||(e.j={});var a=ce(e.m),i=e.j[n];if(!i){r=be(e,n,!0,void 0!==r&&r),i=[],a=a||ce(r);for(var o=0;o<r.length;o++)i[o]=new t(r[o]),a&&le(i[o].m);a&&(le(i),Object.freeze(i)),e.j[n]=i}return i}function ke(e,t,n,r,a){var i=void 0!==i&&i;return pe(e),i=we(e,n,t,i),n=r||new n,e=be(e,t),void 0!=a?(i.splice(a,0,n),e.splice(a,0,n.m)):(i.push(n),e.push(n.m)),n}function Se(e,t){return null==(e=ge(e,t))?0:e}function _e(e,t){return null==(e=ge(e,t))?"":e}function Te(e){var t=Ce;return Ne(e,t=void 0===t?Ee:t)}function Ie(e,t){if(null!=e){if(Array.isArray(e))e=Ne(e,t);else if(fe(e)){var n,r={};for(n in e)r[n]=Ie(e[n],t);e=r}else e=t(e);return e}}function Ne(e,t){for(var n=e.slice(),r=0;r<n.length;r++)n[r]=Ie(n[r],t);return Array.isArray(e)&&1&se(e)&&ue(n),n}function Ce(e){return e&&"object"==typeof e&&e.toJSON?e.toJSON():(e=function(e){switch(typeof e){case"number":return isFinite(e)?e:String(e);case"object":if(e&&!Array.isArray(e)){if(W(e))return F(e);if(e instanceof V){var t=e.L;return t=null==t||"string"===typeof t?t:B&&t instanceof Uint8Array?F(t):null,(e.L=t)||""}}}return e}(e),Array.isArray(e)?Te(e):e)}function Ee(e){return W(e)?new Uint8Array(e):e}function Ae(e,t,n){e||(e=de),de=null;var r=this.constructor.h;if(e||(e=r?[r]:[]),this.h=(r?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=e,e=(r=this.m.length)-1,r&&fe(r=this.m[e])?(this.i=e-this.h,this.g=r):void 0!==t&&-1<t?(this.i=Math.max(t,e+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE,n)for(t=0;t<n.length;t++)if((e=n[t])<this.i)e+=this.h,(r=this.m[e])?Array.isArray(r)&&ue(r):this.m[e]=he;else{var a=(r=this.g||(this.g=this.m[this.i+this.h]={}))[e];a?Array.isArray(a)&&ue(a):r[e]=he}}function Re(){Ae.apply(this,arguments)}if(Ae.prototype.toJSON=function(){return Te(this.m)},Ae.prototype.toString=function(){return this.m.toString()},d(Re,Ae),me){var Oe={};Object.defineProperties(Re,(Oe[Symbol.hasInstance]=ve((function(){throw Error("Cannot perform instanceof checks for MutableMessage")})),Oe))}function Me(e,t,n){if(n){var r,a={};for(r in n){var i=n[r],o=i.ha;o||(a.F=i.la||i.fa.P,i.aa?(a.U=We(i.aa),o=function(e){return function(t,n,r){return e.F(t,n,r,e.U)}}(a)):i.ca?(a.T=Ve(i.X.g,i.ca),o=function(e){return function(t,n,r){return e.F(t,n,r,e.T)}}(a)):o=a.F,i.ha=o),o(t,e,i.X),a={F:a.F,U:a.U,T:a.T}}}!function(e,t){if(t=t.ba){ae(e,e.g.end());for(var n=0;n<t.length;n++)ae(e,t[n])}}(t,e)}var De=Symbol();function Fe(e,t,n){return e[De]||(e[De]=function(e,r){return t(e,r,n)})}function Pe(e){var t=e[De];if(!t){var n=Je(e);t=function(e,t){return et(e,t,n)},e[De]=t}return t}function Le(e){var t=function(e){var t=e.aa;return t?Pe(t):(t=e.ka)?Fe(e.X.g,t,e.ca):void 0}(e),n=e.X,r=e.fa.O;return t?function(e,a){return r(e,a,n,t)}:function(e,t){return r(e,t,n)}}function ze(e,t,n,r,a,i){var o=0;for((e=e()).length&&"number"!==typeof e[0]&&(n(t,e[0]),o++);o<e.length;){n=e[o++];for(var s=o+1;s<e.length&&"number"!==typeof e[s];)s++;var u=e[o++];switch(s-=o){case 0:r(t,n,u);break;case 1:r(t,n,u,e[o++]);break;case 2:a(t,n,u,e[o++],e[o++]);break;case 3:s=e[o++];var c=e[o++],l=e[o++];Array.isArray(l)?a(t,n,u,s,c,l):i(t,n,u,s,c,l);break;case 4:i(t,n,u,e[o++],e[o++],e[o++],e[o++]);break;default:throw Error("unexpected number of binary field arguments: "+s)}}return t}var Be=Symbol();function We(e){var t=e[Be];if(!t){var n=qe(e);t=function(e,t){return nt(e,t,n)},e[Be]=t}return t}function Ve(e,t){var n=e[Be];return n||(n=function(e,n){return Me(e,n,t)},e[Be]=n),n}var je=Symbol();function Ue(e,t){e.push(t)}function He(e,t,n){e.push(t,n.P)}function Ze(e,t,n,r,a){var i=We(a),o=n.P;e.push(t,(function(e,t,n){return o(e,t,n,r,i)}))}function Ge(e,t,n,r,a,i){var o=Ve(r,i),s=n.P;e.push(t,(function(e,t,n){return s(e,t,n,r,o)}))}function qe(e){var t=e[je];return t||ze(e,e[je]=[],Ue,He,Ze,Ge)}var Ke=Symbol();function Xe(e,t){e[0]=t}function Ye(e,t,n,r){var a=n.O;e[t]=r?function(e,t,n){return a(e,t,n,r)}:a}function $e(e,t,n,r,a,i){var o=n.O,s=Pe(a);e[t]=function(e,t,n){return o(e,t,n,r,s,i)}}function Qe(e,t,n,r,a,i,o){var s=n.O,u=Fe(r,a,i);e[t]=function(e,t,n){return s(e,t,n,r,u,o)}}function Je(e){var t=e[Ke];return t||ze(e,e[Ke]={},Xe,Ye,$e,Qe)}function et(e,t,n){for(;ee(t)&&4!=t.h;){var r=t.i,a=n[r];if(!a){var i=n[0];i&&(i=i[r])&&(a=n[r]=Le(i))}if((!a||!a(t,e,r))&&(r=e,i=(a=t).j,te(a),!a.W)){var o=a.g.h;a=i===(a=a.g.g)?z||(z=new Uint8Array(0)):j?o.slice(i,a):new Uint8Array(o.subarray(i,a)),(i=r.ba)?i.push(a):r.ba=[a]}}return e}function tt(e,t,n){if(ne.length){var r=ne.pop();e&&(q(r.g,e),r.i=-1,r.h=-1),e=r}else e=new J(e);try{return et(new t,e,Je(n))}finally{(t=e.g).h=null,t.j=0,t.i=0,t.g=0,t.v=!1,e.i=-1,e.h=-1,100>ne.length&&ne.push(e)}}function nt(e,t,n){for(var r=n.length,a=1==r%2,i=a?1:0;i<r;i+=2)(0,n[i+1])(t,e,n[i]);Me(e,t,a?n[0]:void 0)}function rt(e,t){var n=new re;nt(e,n,qe(t)),ae(n,n.g.end()),e=new Uint8Array(n.h);for(var r=(t=n.i).length,a=0,i=0;i<r;i++){var o=t[i];e.set(o,a),a+=o.length}return n.i=[e],e}function at(e,t){return{O:e,P:t}}var it=at((function(e,t,n){if(5!==e.h)return!1;var r=(e=e.g).h[e.g],a=e.h[e.g+1],i=e.h[e.g+2],o=e.h[e.g+3];return e.g+=4,K(e),e=2*((a=(r<<0|a<<8|i<<16|o<<24)>>>0)>>31)+1,r=a>>>23&255,a&=8388607,ye(t,n,255==r?a?NaN:1/0*e:0==r?e*Math.pow(2,-149)*a:e*Math.pow(2,r-150)*(a+Math.pow(2,23))),!0}),(function(e,t,n){if(null!=(t=ge(t,n))){Q(e.g,8*n+5),e=e.g;var r=t;0===(r=(n=0>r?1:0)?-r:r)?0<1/r?U=0:(0,U=2147483648):isNaN(r)?(0,U=2147483647):34028234663852886e22<r?(0,U=(n<<31|2139095040)>>>0):11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),0,U=(n<<31|r)>>>0):(t=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-t),16777216<=(r=Math.round(8388608*r))&&++t,0,U=(n<<31|t+127<<23|8388607&r)>>>0),n=U,e.g.push(n>>>0&255),e.g.push(n>>>8&255),e.g.push(n>>>16&255),e.g.push(n>>>24&255)}})),ot=at((function(e,t,n){if(0!==e.h)return!1;for(var r=e.g,a=128,i=0,o=e=0;4>o&&128<=a;o++)a=r.h[r.g++],K(r),i|=(127&a)<<7*o;if(128<=a&&(a=r.h[r.g++],K(r),i|=(127&a)<<28,e|=(127&a)>>4),128<=a)for(o=0;5>o&&128<=a;o++)a=r.h[r.g++],K(r),e|=(127&a)<<7*o+3;if(!(128>a))throw Z();return r=i>>>0,(e=2147483648&(a=e>>>0))&&(a=~a>>>0,0==(r=1+~r>>>0)&&(a=a+1>>>0)),r=4294967296*a+(r>>>0),ye(t,n,e?-r:r),!0}),(function(e,t,n){if(null!=(t=ge(t,n))&&null!=t){Q(e.g,8*n),e=e.g;var r=t;for(n=0>r,t=(r=Math.abs(r))>>>0,r=Math.floor((r-t)/4294967296),r>>>=0,n&&(r=~r>>>0,4294967295<(t=1+(~t>>>0))&&(t=0,4294967295<++r&&(r=0))),n=U=t,t=r;0<t||127<n;)e.g.push(127&n|128),n=(n>>>7|t<<25)>>>0,t>>>=7;e.g.push(n)}})),st=at((function(e,t,n){return 0===e.h&&(ye(t,n,X(e.g)),!0)}),(function(e,t,n){if(null!=(t=ge(t,n))&&null!=t)if(Q(e.g,8*n),e=e.g,0<=(n=t))Q(e,n);else{for(t=0;9>t;t++)e.g.push(127&n|128),n>>=7;e.g.push(1)}})),ut=at((function(e,t,n){if(2!==e.h)return!1;var r,a=X(e.g)>>>0,i=(e=e.g).g;if(e.g+=a,K(e),e=e.h,R)(r=E)||(r=E=new TextDecoder("utf-8",{fatal:!0})),r=r.decode(e.subarray(i,i+a));else{a=i+a;for(var o,s,u,c=[],l=null;i<a;)128>(o=e[i++])?c.push(o):224>o?i>=a?N():(s=e[i++],194>o||128!==(192&s)?(i--,N()):c.push((31&o)<<6|63&s)):240>o?i>=a-1?N():128!==(192&(s=e[i++]))||224===o&&160>s||237===o&&160<=s||128!==(192&(r=e[i++]))?(i--,N()):c.push((15&o)<<12|(63&s)<<6|63&r):244>=o?i>=a-2?N():128!==(192&(s=e[i++]))||0!==s-144+(o<<28)>>30||128!==(192&(r=e[i++]))||128!==(192&(u=e[i++]))?(i--,N()):(o=(7&o)<<18|(63&s)<<12|(63&r)<<6|63&u,o-=65536,c.push(55296+(o>>10&1023),56320+(1023&o))):N(),8192<=c.length&&(l=C(l,c),c.length=0);r=C(l,c)}return ye(t,n,r),!0}),(function(e,t,n){if(null!=(t=ge(t,n))){var r=!1;if(r=void 0!==r&&r,O){if(r&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(t))throw Error("Found an unpaired surrogate");t=(A||(A=new TextEncoder)).encode(t)}else{for(var a=0,i=new Uint8Array(3*t.length),o=0;o<t.length;o++){var s=t.charCodeAt(o);if(128>s)i[a++]=s;else{if(2048>s)i[a++]=s>>6|192;else{if(55296<=s&&57343>=s){if(56319>=s&&o<t.length){var u=t.charCodeAt(++o);if(56320<=u&&57343>=u){s=1024*(s-55296)+u-56320+65536,i[a++]=s>>18|240,i[a++]=s>>12&63|128,i[a++]=s>>6&63|128,i[a++]=63&s|128;continue}o--}if(r)throw Error("Found an unpaired surrogate");s=65533}i[a++]=s>>12|224,i[a++]=s>>6&63|128}i[a++]=63&s|128}}t=i.subarray(0,a)}Q(e.g,8*n+2),Q(e.g,t.length),ae(e,e.g.end()),ae(e,t)}})),ct=at((function(e,t,n,r,a){if(2!==e.h)return!1;t=ke(t,n,r),n=e.g.i,r=X(e.g)>>>0;var i=e.g.g+r,o=i-n;if(0>=o&&(e.g.i=i,a(t,e),o=i-e.g.g),o)throw Error("Message parsing ended unexpectedly. Expected to read "+r+" bytes, instead read "+(r-o)+" bytes, either the data ended unexpectedly or the message misreported its own length");return e.g.g=i,e.g.i=n,!0}),(function(e,t,n,r,a){if(null!=(t=we(t,r,n)))for(r=0;r<t.length;r++){var i=e;Q(i.g,8*n+2);var o=i.g.end();ae(i,o),o.push(i.h),i=o,a(t[r],e),o=e;var s=i.pop();for(s=o.h+o.g.length()-s;127<s;)i.push(127&s|128),s>>>=7,o.h++;i.push(s),o.h++}}));function lt(){Re.apply(this,arguments)}if(d(lt,Re),me){var ft={};Object.defineProperties(lt,(ft[Symbol.hasInstance]=ve(Object[Symbol.hasInstance]),ft))}function ht(e){lt.call(this,e)}function pt(){return[1,st,2,it,3,ut,4,ut]}function dt(e){lt.call(this,e,-1,vt)}function mt(){return[1,ct,ht,pt]}d(ht,lt),d(dt,lt),dt.prototype.addClassification=function(e,t){return ke(this,1,ht,e,t),this};var vt=[1];function gt(e){lt.call(this,e)}function yt(){return[1,it,2,it,3,it,4,it,5,it]}function bt(e){lt.call(this,e,-1,wt)}function xt(){return[1,ct,gt,yt]}d(gt,lt),d(bt,lt);var wt=[1];function kt(e){lt.call(this,e)}function St(){return[1,it,2,it,3,it,4,it,5,it,6,ot]}d(kt,lt);var _t=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],Tt=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],It=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],Nt=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],Ct=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],Et=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],At=[].concat(u(_t),u(Tt),u(It),u(Nt),u(Ct),u(Et));function Rt(e,t,n){if(n=e.createShader(0===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(n));return n}function Ot(e){return we(e,ht,1).map((function(e){return{index:Se(e,1),ga:xe(e,2),label:null!=ge(e,3)?_e(e,3):void 0,displayName:null!=ge(e,4)?_e(e,4):void 0}}))}function Mt(e){return{x:xe(e,1),y:xe(e,2),z:xe(e,3),visibility:null!=ge(e,4)?xe(e,4):void 0}}function Dt(e,t){this.h=e,this.g=t,this.l=0}function Ft(e,t,n){return function(e,t){var n=e.g;if(void 0===e.o){var r=Rt(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),a=Rt(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),i=n.createProgram();if(n.attachShader(i,r),n.attachShader(i,a),n.linkProgram(i),!n.getProgramParameter(i,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(i));r=e.o=i,n.useProgram(r),a=n.getUniformLocation(r,"sampler0"),e.j={K:n.getAttribLocation(r,"aVertex"),J:n.getAttribLocation(r,"aTex"),ma:a},e.u=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.u),n.enableVertexAttribArray(e.j.K),n.vertexAttribPointer(e.j.K,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.enableVertexAttribArray(e.j.J),n.vertexAttribPointer(e.j.J,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(a,0)}r=e.j,n.useProgram(e.o),n.canvas.width=t.width,n.canvas.height=t.height,n.viewport(0,0,t.width,t.height),n.activeTexture(n.TEXTURE0),e.h.bindTexture2d(t.glName),n.enableVertexAttribArray(r.K),n.bindBuffer(n.ARRAY_BUFFER,e.u),n.vertexAttribPointer(r.K,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.J),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.vertexAttribPointer(r.J,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.K),n.disableVertexAttribArray(r.J),n.bindBuffer(n.ARRAY_BUFFER,null),e.h.bindTexture2d(0)}(e,t),"function"===typeof e.g.canvas.transferToImageBitmap?Promise.resolve(e.g.canvas.transferToImageBitmap()):n?Promise.resolve(e.g.canvas):"function"===typeof createImageBitmap?createImageBitmap(e.g.canvas):(void 0===e.i&&(e.i=document.createElement("canvas")),new Promise((function(t){e.i.height=e.g.canvas.height,e.i.width=e.g.canvas.width,e.i.getContext("2d",{}).drawImage(e.g.canvas,0,0,e.g.canvas.width,e.g.canvas.height),t(e.i)})))}function Pt(e){this.g=e}var Lt=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function zt(e,t){return t+e}function Bt(e,t){window[e]=t}function Wt(e){if(this.g=e,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=Promise.resolve(),this.Y="",this.C={},this.locateFile=e&&e.locateFile||zt,"object"===typeof window)var t=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"===typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");t=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.$=t,e.options)for(var n=(t=s(Object.keys(e.options))).next();!n.done;n=t.next()){n=n.value;var r=e.options[n].default;void 0!==r&&(this.j[n]="function"===typeof r?r():r)}}function Vt(e){var t,n,r,a,i,o,s,c,l,f,h;return S((function(p){switch(p.g){case 1:return e.Z?(t=void 0===e.g.files?[]:"function"===typeof e.g.files?e.g.files(e.j):e.g.files,y(p,S((function(e){switch(e.g){case 1:return e.o=2,y(e,WebAssembly.instantiate(Lt),4);case 4:e.g=3,e.o=0;break;case 2:return e.o=0,e.j=null,e.return(!1);case 3:return e.return(!0)}})),2)):p.return();case 2:if(n=p.h,"object"===typeof window)return Bt("createMediapipeSolutionsWasm",{locateFile:e.locateFile}),Bt("createMediapipeSolutionsPackedAssets",{locateFile:e.locateFile}),o=t.filter((function(e){return void 0!==e.data})),s=t.filter((function(e){return void 0===e.data})),c=Promise.all(o.map((function(t){var n=jt(e,t.url);if(void 0!==t.path){var r=t.path;n=n.then((function(t){return e.overrideFile(r,t),Promise.resolve(t)}))}return n}))),l=Promise.all(s.map((function(t){return void 0===t.simd||t.simd&&n||!t.simd&&!n?function(e){var t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise((function(e){t.addEventListener("load",(function(){e()}),!1),t.addEventListener("error",(function(){e()}),!1),document.body.appendChild(t)}))}(e.locateFile(t.url,e.$)):Promise.resolve()}))).then((function(){var t,n,r;return S((function(a){if(1==a.g)return t=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,r=e,y(a,t(n),2);r.h=a.h,a.g=0}))})),f=S((function(t){return e.g.graph&&e.g.graph.url?t=y(t,jt(e,e.g.graph.url),0):(t.g=0,t=void 0),t})),y(p,Promise.all([l,c,f]),7);if("function"!==typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return r=t.filter((function(e){return void 0===e.simd||e.simd&&n||!e.simd&&!n})).map((function(t){return e.locateFile(t.url,e.$)})),importScripts.apply(null,u(r)),a=e,y(p,createMediapipeSolutionsWasm(Module),6);case 6:a.h=p.h,e.l=new OffscreenCanvas(1,1),e.h.canvas=e.l,i=e.h.GL.createContext(e.l,{antialias:!1,alpha:!1,ja:"undefined"!==typeof WebGL2RenderingContext?2:1}),e.h.GL.makeContextCurrent(i),p.g=4;break;case 7:if(e.l=document.createElement("canvas"),!(h=e.l.getContext("webgl2",{}))&&!(h=e.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),p.return();e.G=h,e.h.canvas=e.l,e.h.createContext(e.l,!0,!0,{});case 4:e.i=new e.h.SolutionWasm,e.Z=!1,p.g=0}}))}function jt(e,t){var n,r;return S((function(a){return t in e.H?a.return(e.H[t]):(n=e.locateFile(t,""),r=fetch(n).then((function(e){return e.arrayBuffer()})),e.H[t]=r,a.return(r))}))}function Ut(e,t,n){var r,a,i,o,u,c,l,f,h,p,d,m,v,g;return S((function(b){switch(b.g){case 1:if(!n)return b.return(t);for(r={},a=0,i=s(Object.keys(n)),o=i.next();!o.done;o=i.next())u=o.value,"string"!==typeof(c=n[u])&&"texture"===c.type&&void 0!==t[c.stream]&&++a;1<a&&(e.I=!1),l=s(Object.keys(n)),o=l.next();case 2:if(o.done){b.g=4;break}if(f=o.value,"string"===typeof(h=n[f]))return v=r,g=f,y(b,function(e,t,n){var r;return S((function(a){return"number"===typeof n||n instanceof Uint8Array||n instanceof e.h.Uint8BlobList?a.return(n):n instanceof e.h.Texture2dDataOut?((r=e.u[t])||(r=new Dt(e.h,e.G),e.u[t]=r),a.return(Ft(r,n,e.I))):a.return(void 0)}))}(e,f,t[h]),14);if(p=t[h.stream],"detection_list"===h.type){if(p){for(var x=p.getRectList(),w=p.getLandmarksList(),k=p.getClassificationsList(),_=[],T=0;T<x.size();++T){var I=tt(x.get(T),kt,St);I={boundingBox:{xCenter:xe(I,1),yCenter:xe(I,2),height:xe(I,3),width:xe(I,4),rotation:xe(I,5,0),rectId:Se(I,6)},landmarks:we(tt(w.get(T),bt,xt),gt,1).map(Mt),V:Ot(tt(k.get(T),dt,mt))},_.push(I)}x=_}else x=[];r[f]=x,b.g=7;break}if("proto_list"===h.type){if(p){for(x=Array(p.size()),w=0;w<p.size();w++)x[w]=p.get(w);p.delete()}else x=[];r[f]=x,b.g=7;break}if(void 0===p){b.g=3;break}if("float_list"===h.type){r[f]=p,b.g=7;break}if("proto"===h.type){r[f]=p,b.g=7;break}if("texture"!==h.type)throw Error("Unknown output config type: '"+h.type+"'");return(d=e.u[f])||(d=new Dt(e.h,e.G),e.u[f]=d),y(b,Ft(d,p,e.I),13);case 13:m=b.h,r[f]=m;case 7:h.transform&&r[f]&&(r[f]=h.transform(r[f])),b.g=3;break;case 14:v[g]=b.h;case 3:o=l.next(),b.g=2;break;case 4:return b.return(r)}}))}function Ht(e,t){for(var n=t.name||"$",r=[].concat(u(t.wants)),a=new e.h.StringList,i=s(t.wants),o=i.next();!o.done;o=i.next())a.push_back(o.value);i=e.h.PacketListener.implement({onResults:function(a){for(var i={},o=0;o<t.wants.length;++o)i[r[o]]=a.get(o);var s=e.listeners[n];s&&(e.D=Ut(e,i,t.outs).then((function(n){n=s(n);for(var a=0;a<t.wants.length;++a){var o=i[r[a]];"object"===typeof o&&o.hasOwnProperty&&o.hasOwnProperty("delete")&&o.delete()}n&&(e.D=n)})))}}),e.i.attachMultiListener(a,i),a.delete()}function Zt(e){var t=this;e=e||{};var n={url:"face_detection_short.binarypb"},r={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new Wt({locateFile:e.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:n,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"object"===typeof window&&void 0!==window.navigator&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(e){var a,i,o,u,c;return S((function(l){switch(l.g){case 1:a=s("short"===e?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"]),i=a.next();case 2:if(i.done){l.g=4;break}return o=i.value,u="third_party/mediapipe/modules/face_detection/"+o,y(l,jt(t.g,o),5);case 5:c=l.h,t.g.overrideFile(u,c),i=a.next(),l.g=2;break;case 4:return n.url="short"===e?"face_detection_short.binarypb":"face_detection_full.binarypb",r.graphOptionXref.calculatorName="short"===e?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",l.return(!0)}}))}},minDetectionConfidence:r}})}(e=Wt.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},e.reset=function(){var e=this;return S((function(t){e.i&&(e.i.reset(),e.o={},e.u={}),t.g=0}))},e.setOptions=function(e,t){var n=this;if(t=t||this.g.options){for(var r=[],a=[],i={},o=s(Object.keys(e)),u=o.next();!u.done;i={R:i.R,S:i.S},u=o.next()){var c=u.value;c in this.j&&this.j[c]===e[c]||(this.j[c]=e[c],void 0!==(u=t[c])&&(u.onChange&&(i.R=u.onChange,i.S=e[c],r.push(function(e){return function(){return S((function(t){if(1==t.g)return y(t,e.R(e.S),2);!0===t.h&&(n.s=!0),t.g=0}))}}(i))),u.graphOptionXref&&(c={valueNumber:1===u.type?e[c]:0,valueBoolean:0===u.type&&e[c],valueString:2===u.type?e[c]:""},u=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),u.graphOptionXref),c),a.push(u))))}0===r.length&&0===a.length||(this.s=!0,this.B=(void 0===this.B?[]:this.B).concat(a),this.A=(void 0===this.A?[]:this.A).concat(r))}},e.initialize=function(){var e=this;return S((function(t){return 1==t.g?y(t,Vt(e),2):3!=t.g?y(t,function(e){var t,n,r,a,i,o,u,c;return S((function(l){if(1==l.g)return e.g.graph&&e.g.graph.url&&e.Y===e.g.graph.url?l.return():(e.s=!0,e.g.graph&&e.g.graph.url?(e.Y=e.g.graph.url,y(l,jt(e,e.g.graph.url),3)):void(l.g=2));for(2!=l.g&&(t=l.h,e.i.loadGraph(t)),n=s(Object.keys(e.C)),r=n.next();!r.done;r=n.next())a=r.value,e.i.overrideFile(a,e.C[a]);if(e.C={},e.g.listeners)for(i=s(e.g.listeners),o=i.next();!o.done;o=i.next())u=o.value,Ht(e,u);c=e.j,e.j={},e.setOptions(c),l.g=0}))}(e),3):y(t,function(e){var t,n,r,a,i,o;return S((function(u){switch(u.g){case 1:if(!e.s)return u.return();if(!e.A){u.g=2;break}t=s(e.A),n=t.next();case 3:if(n.done){u.g=5;break}return y(u,(0,n.value)(),4);case 4:n=t.next(),u.g=3;break;case 5:e.A=void 0;case 2:if(e.B){for(r=new e.h.GraphOptionChangeRequestList,a=s(e.B),i=a.next();!i.done;i=a.next())o=i.value,r.push_back(o);e.i.changeOptions(r),r.delete(),e.B=void 0}e.s=!1,u.g=0}}))}(e),0)}))},e.overrideFile=function(e,t){this.i?this.i.overrideFile(e,t):this.C[e]=t},e.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},e.send=function(e,t){var n,r,a,i,o,u,c,l,f,h=this;return S((function(p){switch(p.g){case 1:return h.g.inputs?(n=1e3*(void 0===t||null===t?performance.now():t),y(p,h.D,2)):p.return();case 2:return y(p,h.initialize(),3);case 3:for(r=new h.h.PacketDataList,a=s(Object.keys(e)),i=a.next();!i.done;i=a.next())if(o=i.value,u=h.g.inputs[o]){e:{var d=e[o];switch(u.type){case"video":var m=h.o[u.stream];if(m||(m=new Dt(h.h,h.G),h.o[u.stream]=m),0===m.l&&(m.l=m.h.createTexture()),"undefined"!==typeof HTMLVideoElement&&d instanceof HTMLVideoElement)var v=d.videoWidth,g=d.videoHeight;else"undefined"!==typeof HTMLImageElement&&d instanceof HTMLImageElement?(v=d.naturalWidth,g=d.naturalHeight):(v=d.width,g=d.height);g={glName:m.l,width:v,height:g},(v=m.g).canvas.width=g.width,v.canvas.height=g.height,v.activeTexture(v.TEXTURE0),m.h.bindTexture2d(m.l),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,d),m.h.bindTexture2d(0),m=g;break e;case"detections":for((m=h.o[u.stream])||(m=new Pt(h.h),h.o[u.stream]=m),m.data||(m.data=new m.g.DetectionListData),m.data.reset(d.length),g=0;g<d.length;++g){v=d[g];var b=m.data,x=b.setBoundingBox,w=g,k=v.boundingBox,S=new kt;if(ye(S,1,k.xCenter),ye(S,2,k.yCenter),ye(S,3,k.height),ye(S,4,k.width),ye(S,5,k.rotation),ye(S,6,k.rectId),k=rt(S,St),x.call(b,w,k),v.landmarks)for(b=0;b<v.landmarks.length;++b){var _=!!(S=v.landmarks[b]).visibility;w=(x=m.data).addNormalizedLandmark,k=g,S=Object.assign(Object.assign({},S),{visibility:_?S.visibility:0}),ye(_=new gt,1,S.x),ye(_,2,S.y),ye(_,3,S.z),S.visibility&&ye(_,4,S.visibility),S=rt(_,yt),w.call(x,k,S)}if(v.V)for(b=0;b<v.V.length;++b)w=(x=m.data).addClassification,k=g,S=v.V[b],ye(_=new ht,2,S.ga),S.index&&ye(_,1,S.index),S.label&&ye(_,3,S.label),S.displayName&&ye(_,4,S.displayName),S=rt(_,pt),w.call(x,k,S)}m=m.data;break e;default:m={}}}switch(c=m,l=u.stream,u.type){case"video":r.pushTexture2d(Object.assign(Object.assign({},c),{stream:l,timestamp:n}));break;case"detections":(f=c).stream=l,f.timestamp=n,r.pushDetectionList(f);break;default:throw Error("Unknown input config type: '"+u.type+"'")}}return h.i.send(r),y(p,h.D,4);case 4:r.delete(),p.g=0}}))},e.onResults=function(e,t){this.listeners[t||"$"]=e},I("Solution",Wt),I("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(e=Zt.prototype).close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(e){this.g.onResults(e)},e.initialize=function(){var e=this;return S((function(t){return y(t,e.g.initialize(),0)}))},e.reset=function(){this.g.reset()},e.send=function(e){var t=this;return S((function(n){return y(n,t.g.send(e),0)}))},e.setOptions=function(e){this.g.setOptions(e)},I("FaceDetection",Zt),I("FACEDETECTION_LIPS",_t),I("FACEDETECTION_LEFT_EYE",Tt),I("FACEDETECTION_LEFT_EYEBROW",It),I("FACEDETECTION_RIGHT_EYE",Nt),I("FACEDETECTION_RIGHT_EYEBROW",Ct),I("FACEDETECTION_FACE_OVAL",Et),I("FACEDETECTION_CONTOURS",At),I("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),I("VERSION","0.4.1646425229")}).call(this)},4569:function(e,t,n){e.exports=n(8036)},3381:function(e,t,n){"use strict";var r=n(3589),a=n(7297),i=n(9301),o=n(9774),s=n(1804),u=n(9145),c=n(5411),l=n(6789),f=n(4531),h=n(6569),p=n(6261);e.exports=function(e){return new Promise((function(t,n){var d,m=e.data,v=e.headers,g=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(d),e.signal&&e.signal.removeEventListener("abort",d)}r.isFormData(m)&&r.isStandardBrowserEnv()&&delete v["Content-Type"];var b=new XMLHttpRequest;if(e.auth){var x=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";v.Authorization="Basic "+btoa(x+":"+w)}var k=s(e.baseURL,e.url);function S(){if(b){var r="getAllResponseHeaders"in b?u(b.getAllResponseHeaders()):null,i={data:g&&"text"!==g&&"json"!==g?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:r,config:e,request:b};a((function(e){t(e),y()}),(function(e){n(e),y()}),i),b=null}}if(b.open(e.method.toUpperCase(),o(k,e.params,e.paramsSerializer),!0),b.timeout=e.timeout,"onloadend"in b?b.onloadend=S:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(S)},b.onabort=function(){b&&(n(new f("Request aborted",f.ECONNABORTED,e,b)),b=null)},b.onerror=function(){n(new f("Network Error",f.ERR_NETWORK,e,b,b)),b=null},b.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||l;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new f(t,r.clarifyTimeoutError?f.ETIMEDOUT:f.ECONNABORTED,e,b)),b=null},r.isStandardBrowserEnv()){var _=(e.withCredentials||c(k))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;_&&(v[e.xsrfHeaderName]=_)}"setRequestHeader"in b&&r.forEach(v,(function(e,t){"undefined"===typeof m&&"content-type"===t.toLowerCase()?delete v[t]:b.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(b.withCredentials=!!e.withCredentials),g&&"json"!==g&&(b.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&b.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(d=function(e){b&&(n(!e||e&&e.type?new h:e),b.abort(),b=null)},e.cancelToken&&e.cancelToken.subscribe(d),e.signal&&(e.signal.aborted?d():e.signal.addEventListener("abort",d))),m||(m=null);var T=p(k);T&&-1===["http","https","file"].indexOf(T)?n(new f("Unsupported protocol "+T+":",f.ERR_BAD_REQUEST,e)):b.send(m)}))}},8036:function(e,t,n){"use strict";var r=n(3589),a=n(4049),i=n(3773),o=n(777);var s=function e(t){var n=new i(t),s=a(i.prototype.request,n);return r.extend(s,i.prototype,n),r.extend(s,n),s.create=function(n){return e(o(t,n))},s}(n(1709));s.Axios=i,s.CanceledError=n(6569),s.CancelToken=n(6857),s.isCancel=n(5517),s.VERSION=n(7600).version,s.toFormData=n(1397),s.AxiosError=n(4531),s.Cancel=s.CanceledError,s.all=function(e){return Promise.all(e)},s.spread=n(8089),s.isAxiosError=n(9580),e.exports=s,e.exports.default=s},6857:function(e,t,n){"use strict";var r=n(6569);function a(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},a.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},a.source=function(){var e;return{token:new a((function(t){e=t})),cancel:e}},e.exports=a},6569:function(e,t,n){"use strict";var r=n(4531);function a(e){r.call(this,null==e?"canceled":e,r.ERR_CANCELED),this.name="CanceledError"}n(3589).inherits(a,r,{__CANCEL__:!0}),e.exports=a},5517:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},3773:function(e,t,n){"use strict";var r=n(3589),a=n(9774),i=n(7470),o=n(2733),s=n(777),u=n(1804),c=n(7835),l=c.validators;function f(e){this.defaults=e,this.interceptors={request:new i,response:new i}}f.prototype.request=function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var r=[],a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var i,u=[];if(this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)})),!a){var f=[o,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(u),i=Promise.resolve(t);f.length;)i=i.then(f.shift(),f.shift());return i}for(var h=t;r.length;){var p=r.shift(),d=r.shift();try{h=p(h)}catch(m){d(m);break}}try{i=o(h)}catch(m){return Promise.reject(m)}for(;u.length;)i=i.then(u.shift(),u.shift());return i},f.prototype.getUri=function(e){e=s(this.defaults,e);var t=u(e.baseURL,e.url);return a(t,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(e){f.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,a){return this.request(s(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}f.prototype[e]=t(),f.prototype[e+"Form"]=t(!0)})),e.exports=f},4531:function(e,t,n){"use strict";var r=n(3589);function a(e,t,n,r,a){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a)}r.inherits(a,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var i=a.prototype,o={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){o[e]={value:e}})),Object.defineProperties(a,o),Object.defineProperty(i,"isAxiosError",{value:!0}),a.from=function(e,t,n,o,s,u){var c=Object.create(i);return r.toFlatObject(e,c,(function(e){return e!==Error.prototype})),a.call(c,e.message,t,n,o,s),c.name=e.name,u&&Object.assign(c,u),c},e.exports=a},7470:function(e,t,n){"use strict";var r=n(3589);function a(){this.handlers=[]}a.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=a},1804:function(e,t,n){"use strict";var r=n(4044),a=n(9549);e.exports=function(e,t){return e&&!r(t)?a(e,t):t}},2733:function(e,t,n){"use strict";var r=n(3589),a=n(2693),i=n(5517),o=n(1709),s=n(6569);function u(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s}e.exports=function(e){return u(e),e.headers=e.headers||{},e.data=a.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return u(e),t.data=a.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(u(e),t&&t.response&&(t.response.data=a.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},777:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){t=t||{};var n={};function a(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function i(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:a(void 0,e[n]):a(e[n],t[n])}function o(e){if(!r.isUndefined(t[e]))return a(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:a(void 0,e[n]):a(void 0,t[n])}function u(n){return n in t?a(e[n],t[n]):n in e?a(void 0,e[n]):void 0}var c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||i,a=t(e);r.isUndefined(a)&&t!==u||(n[e]=a)})),n}},7297:function(e,t,n){"use strict";var r=n(4531);e.exports=function(e,t,n){var a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},2693:function(e,t,n){"use strict";var r=n(3589),a=n(1709);e.exports=function(e,t,n){var i=this||a;return r.forEach(n,(function(n){e=n.call(i,e,t)})),e}},1709:function(e,t,n){"use strict";var r=n(3589),a=n(4341),i=n(4531),o=n(6789),s=n(1397),u={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l={transitional:o,adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(3381)),e}(),transformRequest:[function(e,t){if(a(t,"Accept"),a(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))return e;if(r.isArrayBufferView(e))return e.buffer;if(r.isURLSearchParams(e))return c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,i=r.isObject(e),o=t&&t["Content-Type"];if((n=r.isFileList(e))||i&&"multipart/form-data"===o){var u=this.env&&this.env.FormData;return s(n?{"files[]":e}:e,u&&new u)}return i||"application/json"===o?(c(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(a){if("SyntaxError"!==a.name)throw a}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,a=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||a&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o){if("SyntaxError"===s.name)throw i.from(s,i.ERR_BAD_RESPONSE,this,null,this.response);throw s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(3035)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(u)})),e.exports=l},6789:function(e){"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7600:function(e){e.exports={version:"0.27.2"}},4049:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},9774:function(e,t,n){"use strict";var r=n(3589);function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(a(t)+"="+a(e))})))})),i=o.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},9549:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},9301:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,a,i,o){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(a)&&s.push("path="+a),r.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4044:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},9580:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},5411:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=r.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},4341:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},3035:function(e){e.exports=null},9145:function(e,t,n){"use strict";var r=n(3589),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(o[t]&&a.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},6261:function(e){"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},8089:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},1397:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){t=t||new FormData;var n=[];function a(e){return null===e?"":r.isDate(e)?e.toISOString():r.isArrayBuffer(e)||r.isTypedArray(e)?"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(i,o){if(r.isPlainObject(i)||r.isArray(i)){if(-1!==n.indexOf(i))throw Error("Circular reference detected in "+o);n.push(i),r.forEach(i,(function(n,i){if(!r.isUndefined(n)){var s,u=o?o+"."+i:i;if(n&&!o&&"object"===typeof n)if(r.endsWith(i,"{}"))n=JSON.stringify(n);else if(r.endsWith(i,"[]")&&(s=r.toArray(n)))return void s.forEach((function(e){!r.isUndefined(e)&&t.append(u,a(e))}));e(n,u)}})),n.pop()}else t.append(o,a(i))}(e),t}},7835:function(e,t,n){"use strict";var r=n(7600).version,a=n(4531),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new a(i(r," has been removed"+(t?" in "+t:"")),a.ERR_DEPRECATED);return t&&!o[r]&&(o[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new a("options must be an object",a.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],s=t[o];if(s){var u=e[o],c=void 0===u||s(u,o,e);if(!0!==c)throw new a("option "+o+" must be "+c,a.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new a("Unknown option "+o,a.ERR_BAD_OPTION)}},validators:i}},3589:function(e,t,n){"use strict";var r,a=n(4049),i=Object.prototype.toString,o=(r=Object.create(null),function(e){var t=i.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function s(e){return e=e.toLowerCase(),function(t){return o(t)===e}}function u(e){return Array.isArray(e)}function c(e){return"undefined"===typeof e}var l=s("ArrayBuffer");function f(e){return null!==e&&"object"===typeof e}function h(e){if("object"!==o(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var p=s("Date"),d=s("File"),m=s("Blob"),v=s("FileList");function g(e){return"[object Function]"===i.call(e)}var y=s("URLSearchParams");function b(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),u(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}var x,w=(x="undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return x&&e instanceof x});e.exports={isArray:u,isArrayBuffer:l,isBuffer:function(e){return null!==e&&!c(e)&&null!==e.constructor&&!c(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||i.call(e)===t||g(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&l(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:f,isPlainObject:h,isUndefined:c,isDate:p,isFile:d,isBlob:m,isFunction:g,isStream:function(e){return f(e)&&g(e.pipe)},isURLSearchParams:y,isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:b,merge:function e(){var t={};function n(n,r){h(t[r])&&h(n)?t[r]=e(t[r],n):h(n)?t[r]=e({},n):u(n)?t[r]=n.slice():t[r]=n}for(var r=0,a=arguments.length;r<a;r++)b(arguments[r],n);return t},extend:function(e,t,n){return b(t,(function(t,r){e[r]=n&&"function"===typeof t?a(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,a,i,o={};t=t||{};do{for(a=(r=Object.getOwnPropertyNames(e)).length;a-- >0;)o[i=r[a]]||(t[i]=e[i],o[i]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:o,kindOfTest:s,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(c(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:w,isFileList:v}},1694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var o=a.apply(null,n);o&&e.push(o)}}else if("object"===i){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},9205:function(e,t,n){var r=n(3454).W,a=Math.PI/180,i=2048;function o(e){return e.text}function s(){return"serif"}function u(){return"normal"}function c(e){return Math.sqrt(e.value)}function l(){return 30*(~~(6*Math.random())-3)}function f(){return 1}function h(e,t,n,r){if(!t.sprite){var o=e.context,s=e.ratio;o.clearRect(0,0,2048/s,i/s);var u=0,c=0,l=0,f=n.length;for(--r;++r<f;){t=n[r],o.save(),o.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font;var h=o.measureText(t.text+"m").width*s,p=t.size<<1;if(t.rotate){var d=Math.sin(t.rotate*a),m=Math.cos(t.rotate*a),v=h*m,g=h*d,y=p*m,b=p*d;h=Math.max(Math.abs(v+b),Math.abs(v-b))+31>>5<<5,p=~~Math.max(Math.abs(g+y),Math.abs(g-y))}else h=h+31>>5<<5;if(p>l&&(l=p),u+h>=2048&&(u=0,c+=l,l=0),c+p>=i)break;o.translate((u+(h>>1))/s,(c+(p>>1))/s),t.rotate&&o.rotate(t.rotate*a),o.fillText(t.text,0,0),t.padding&&(o.lineWidth=2*t.padding,o.strokeText(t.text,0,0)),o.restore(),t.width=h,t.height=p,t.xoff=u,t.yoff=c,t.x1=h>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,u+=h}for(var x=o.getImageData(0,0,2048/s,i/s).data,w=[];--r>=0;)if((t=n[r]).hasText){for(var k=(h=t.width)>>5,S=(p=t.y1-t.y0,0);S<p*k;S++)w[S]=0;if(null==(u=t.xoff))return;c=t.yoff;for(var _=0,T=-1,I=0;I<p;I++){for(S=0;S<h;S++){var N=k*I+(S>>5),C=x[2048*(c+I)+(u+S)<<2]?1<<31-S%32:0;w[N]|=C,_|=C}_?T=I:(t.y0++,p--,I--,c++)}t.y1=t.y0+T,t.sprite=w.slice(0,(t.y1-t.y0)*k)}}}function p(e,t,n){n>>=5;for(var r,a=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=127&o,u=32-s,c=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),f=0;f<c;f++){r=0;for(var h=0;h<=i;h++)if((r<<u|(h<i?(r=a[f*i+h])>>>s:0))&t[l+h])return!0;l+=n}return!1}function d(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function m(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function v(){return document.createElement("canvas")}function g(e){return"function"===typeof e?e:function(){return e}}e.exports=function(){var e=[256,256],t=o,n=s,a=c,b=u,x=u,w=l,k=f,S=m,_=[],T=1/0,I=r("word","end"),N=null,C=Math.random,E={},A=v;function R(t,n,r){e[0],e[1];for(var a,i,o,s,u,c=n.x,l=n.y,f=Math.sqrt(e[0]*e[0]+e[1]*e[1]),h=S(e),d=C()<.5?1:-1,m=-d;(a=h(m+=d))&&(i=~~a[0],o=~~a[1],!(Math.min(Math.abs(i),Math.abs(o))>=f));)if(n.x=c+i,n.y=l+o,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>e[0]||n.y+n.y1>e[1])&&(!r||!p(n,t,e[0]))&&(!r||(u=r,(s=n).x+s.x1>u[0].x&&s.x+s.x0<u[1].x&&s.y+s.y1>u[0].y&&s.y+s.y0<u[1].y))){for(var v,g=n.sprite,y=n.width>>5,b=e[0]>>5,x=n.x-(y<<4),w=127&x,k=32-w,_=n.y1-n.y0,T=(n.y+n.y0)*b+(x>>5),I=0;I<_;I++){v=0;for(var N=0;N<=y;N++)t[T+N]|=v<<k|(N<y?(v=g[I*y+N])>>>w:0);T+=b}return delete n.sprite,!0}return!1}return E.canvas=function(e){return arguments.length?(A=g(e),E):A},E.start=function(){var r=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=2048/t,e.height=i/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(A()),o=function(e){var t=[],n=-1;for(;++n<e;)t[n]=0;return t}((e[0]>>5)*e[1]),s=null,u=_.length,c=-1,l=[],f=_.map((function(e,r){return e.text=t.call(this,e,r),e.font=n.call(this,e,r),e.style=b.call(this,e,r),e.weight=x.call(this,e,r),e.rotate=w.call(this,e,r),e.size=~~a.call(this,e,r),e.padding=k.call(this,e,r),e})).sort((function(e,t){return t.size-e.size}));return N&&clearInterval(N),N=setInterval(p,0),p(),E;function p(){for(var t=Date.now();Date.now()-t<T&&++c<u&&N;){var n=f[c];n.x=e[0]*(C()+.5)>>1,n.y=e[1]*(C()+.5)>>1,h(r,n,f,c),n.hasText&&R(o,n,s)&&(l.push(n),I.call("word",E,n),s?d(s,n):s=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=e[0]>>1,n.y-=e[1]>>1)}c>=u&&(E.stop(),I.call("end",E,l,s))}},E.stop=function(){return N&&(clearInterval(N),N=null),E},E.timeInterval=function(e){return arguments.length?(T=null==e?1/0:e,E):T},E.words=function(e){return arguments.length?(_=e,E):_},E.size=function(t){return arguments.length?(e=[+t[0],+t[1]],E):e},E.font=function(e){return arguments.length?(n=g(e),E):n},E.fontStyle=function(e){return arguments.length?(b=g(e),E):b},E.fontWeight=function(e){return arguments.length?(x=g(e),E):x},E.rotate=function(e){return arguments.length?(w=g(e),E):w},E.text=function(e){return arguments.length?(t=g(e),E):t},E.spiral=function(e){return arguments.length?(S=y[e]||e,E):S},E.fontSize=function(e){return arguments.length?(a=g(e),E):a},E.padding=function(e){return arguments.length?(k=g(e),E):k},E.random=function(e){return arguments.length?(C=e,E):C},E.on=function(){var e=I.on.apply(I,arguments);return e===I?E:e},E};var y={archimedean:m,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var a=e<0?-1:1;switch(Math.sqrt(1+4*a*e)-a&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}}},1930:function(e,t){"use strict";var n={value:function(){}};function r(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new a(r)}function a(e){this._=e}function i(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function o(e,t){for(var n,r=0,a=e.length;r<a;++r)if((n=e[r]).name===t)return n.value}function s(e,t,r){for(var a=0,i=e.length;a<i;++a)if(e[a].name===t){e[a]=n,e=e.slice(0,a).concat(e.slice(a+1));break}return null!=r&&e.push({name:t,value:r}),e}a.prototype=r.prototype={constructor:a,on:function(e,t){var n,r=this._,a=i(e+"",r),u=-1,c=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++u<c;)if(n=(e=a[u]).type)r[n]=s(r[n],e.name,t);else if(null==t)for(n in r)r[n]=s(r[n],e.name,null);return this}for(;++u<c;)if((n=(e=a[u]).type)&&(n=o(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new a(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,a=new Array(n),i=0;i<n;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,i=r.length;a<i;++a)r[a].value.apply(t,n)}},t.Z=r},3454:function(e,t,n){"use strict";n.d(t,{W:function(){return r.Z}});var r=n(1930)},9759:function(e,t,n){"use strict";var r=n(7957);t.Z=function(e){return o.apply(this,arguments)};var a=r(n(6780)),i=r(n(5877));function o(){return(o=(0,i.default)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.createElement("video"),r=new Promise((function(e,t){n.addEventListener("loadedmetadata",(function(){n.duration===1/0?(n.currentTime=Number.MAX_SAFE_INTEGER,n.ontimeupdate=function(){n.ontimeupdate=null,e(n.duration),n.currentTime=0}):e(n.duration)})),n.onerror=function(e){return t(e.target.error)}})),n.src="string"==typeof t||t instanceof String?t:window.URL.createObjectURL(t),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2110:function(e,t,n){"use strict";var r=n(8309),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,d=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(d){var a=p(n);a&&a!==d&&e(t,a,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var s=u(t),m=u(n),v=0;v<o.length;++v){var g=o[v];if(!i[g]&&(!r||!r[g])&&(!m||!m[g])&&(!s||!s[g])){var y=h(n,g);try{c(t,g,y)}catch(b){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case i:case s:case o:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case v:case m:case u:return e;default:return t}}case a:return t}}}function k(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=i,t.Lazy=v,t.Memo=m,t.Portal=a,t.Profiler=s,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return k(e)||w(e)===l},t.isConcurrentMode=k,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===i},t.isLazy=function(e){return w(e)===v},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===a},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===f||e===s||e===o||e===p||e===d||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===u||e.$$typeof===c||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===g)},t.typeOf=w},8309:function(e,t,n){"use strict";e.exports=n(746)},1016:function(e,t,n){e=n.nmd(e);var r="__lodash_hash_undefined__",a=9007199254740991,i="[object Arguments]",o="[object Boolean]",s="[object Date]",u="[object Function]",c="[object GeneratorFunction]",l="[object Map]",f="[object Number]",h="[object Object]",p="[object Promise]",d="[object RegExp]",m="[object Set]",v="[object String]",g="[object Symbol]",y="[object WeakMap]",b="[object ArrayBuffer]",x="[object DataView]",w="[object Float32Array]",k="[object Float64Array]",S="[object Int8Array]",_="[object Int16Array]",T="[object Int32Array]",I="[object Uint8Array]",N="[object Uint8ClampedArray]",C="[object Uint16Array]",E="[object Uint32Array]",A=/\w*$/,R=/^\[object .+?Constructor\]$/,O=/^(?:0|[1-9]\d*)$/,M={};M[i]=M["[object Array]"]=M[b]=M[x]=M[o]=M[s]=M[w]=M[k]=M[S]=M[_]=M[T]=M[l]=M[f]=M[h]=M[d]=M[m]=M[v]=M[g]=M[I]=M[N]=M[C]=M[E]=!0,M["[object Error]"]=M[u]=M[y]=!1;var D="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,F="object"==typeof self&&self&&self.Object===Object&&self,P=D||F||Function("return this")(),L=t&&!t.nodeType&&t,z=L&&e&&!e.nodeType&&e,B=z&&z.exports===L;function W(e,t){return e.set(t[0],t[1]),e}function V(e,t){return e.add(t),e}function j(e,t,n,r){var a=-1,i=e?e.length:0;for(r&&i&&(n=e[++a]);++a<i;)n=t(n,e[a],a,e);return n}function U(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}function H(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Z(e,t){return function(n){return e(t(n))}}function G(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var q=Array.prototype,K=Function.prototype,X=Object.prototype,Y=P["__core-js_shared__"],$=function(){var e=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Q=K.toString,J=X.hasOwnProperty,ee=X.toString,te=RegExp("^"+Q.call(J).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=B?P.Buffer:void 0,re=P.Symbol,ae=P.Uint8Array,ie=Z(Object.getPrototypeOf,Object),oe=Object.create,se=X.propertyIsEnumerable,ue=q.splice,ce=Object.getOwnPropertySymbols,le=ne?ne.isBuffer:void 0,fe=Z(Object.keys,Object),he=Le(P,"DataView"),pe=Le(P,"Map"),de=Le(P,"Promise"),me=Le(P,"Set"),ve=Le(P,"WeakMap"),ge=Le(Object,"create"),ye=je(he),be=je(pe),xe=je(de),we=je(me),ke=je(ve),Se=re?re.prototype:void 0,_e=Se?Se.valueOf:void 0;function Te(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ie(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ne(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ce(e){this.__data__=new Ie(e)}function Ee(e,t){var n=He(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Ze(e)}(e)&&J.call(e,"callee")&&(!se.call(e,"callee")||ee.call(e)==i)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,a=!!r;for(var o in e)!t&&!J.call(e,o)||a&&("length"==o||We(o,r))||n.push(o);return n}function Ae(e,t,n){var r=e[t];J.call(e,t)&&Ue(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function Re(e,t){for(var n=e.length;n--;)if(Ue(e[n][0],t))return n;return-1}function Oe(e,t,n,r,a,p,y){var R;if(r&&(R=p?r(e,a,p,y):r(e)),void 0!==R)return R;if(!Ke(e))return e;var O=He(e);if(O){if(R=function(e){var t=e.length,n=e.constructor(t);t&&"string"==typeof e[0]&&J.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!t)return function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(e,R)}else{var D=Be(e),F=D==u||D==c;if(Ge(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if(D==h||D==i||F&&!p){if(U(e))return p?e:{};if(R=function(e){return"function"!=typeof e.constructor||Ve(e)?{}:(t=ie(e),Ke(t)?oe(t):{});var t}(F?{}:e),!t)return function(e,t){return Fe(e,ze(e),t)}(e,function(e,t){return e&&Fe(t,Xe(t),e)}(R,e))}else{if(!M[D])return p?e:{};R=function(e,t,n,r){var a=e.constructor;switch(t){case b:return De(e);case o:case s:return new a(+e);case x:return function(e,t){var n=t?De(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,r);case w:case k:case S:case _:case T:case I:case N:case C:case E:return function(e,t){var n=t?De(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,r);case l:return function(e,t,n){return j(t?n(H(e),!0):H(e),W,new e.constructor)}(e,r,n);case f:case v:return new a(e);case d:return function(e){var t=new e.constructor(e.source,A.exec(e));return t.lastIndex=e.lastIndex,t}(e);case m:return function(e,t,n){return j(t?n(G(e),!0):G(e),V,new e.constructor)}(e,r,n);case g:return i=e,_e?Object(_e.call(i)):{}}var i}(e,D,Oe,t)}}y||(y=new Ce);var P=y.get(e);if(P)return P;if(y.set(e,R),!O)var L=n?function(e){return function(e,t,n){var r=t(e);return He(e)?r:function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}(r,n(e))}(e,Xe,ze)}(e):Xe(e);return function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););}(L||e,(function(a,i){L&&(a=e[i=a]),Ae(R,i,Oe(a,t,n,r,i,e,y))})),R}function Me(e){return!(!Ke(e)||(t=e,$&&$ in t))&&(qe(e)||U(e)?te:R).test(je(e));var t}function De(e){var t=new e.constructor(e.byteLength);return new ae(t).set(new ae(e)),t}function Fe(e,t,n,r){n||(n={});for(var a=-1,i=t.length;++a<i;){var o=t[a],s=r?r(n[o],e[o],o,n,e):void 0;Ae(n,o,void 0===s?e[o]:s)}return n}function Pe(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Le(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Me(n)?n:void 0}Te.prototype.clear=function(){this.__data__=ge?ge(null):{}},Te.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Te.prototype.get=function(e){var t=this.__data__;if(ge){var n=t[e];return n===r?void 0:n}return J.call(t,e)?t[e]:void 0},Te.prototype.has=function(e){var t=this.__data__;return ge?void 0!==t[e]:J.call(t,e)},Te.prototype.set=function(e,t){return this.__data__[e]=ge&&void 0===t?r:t,this},Ie.prototype.clear=function(){this.__data__=[]},Ie.prototype.delete=function(e){var t=this.__data__,n=Re(t,e);return!(n<0)&&(n==t.length-1?t.pop():ue.call(t,n,1),!0)},Ie.prototype.get=function(e){var t=this.__data__,n=Re(t,e);return n<0?void 0:t[n][1]},Ie.prototype.has=function(e){return Re(this.__data__,e)>-1},Ie.prototype.set=function(e,t){var n=this.__data__,r=Re(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},Ne.prototype.clear=function(){this.__data__={hash:new Te,map:new(pe||Ie),string:new Te}},Ne.prototype.delete=function(e){return Pe(this,e).delete(e)},Ne.prototype.get=function(e){return Pe(this,e).get(e)},Ne.prototype.has=function(e){return Pe(this,e).has(e)},Ne.prototype.set=function(e,t){return Pe(this,e).set(e,t),this},Ce.prototype.clear=function(){this.__data__=new Ie},Ce.prototype.delete=function(e){return this.__data__.delete(e)},Ce.prototype.get=function(e){return this.__data__.get(e)},Ce.prototype.has=function(e){return this.__data__.has(e)},Ce.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Ie){var r=n.__data__;if(!pe||r.length<199)return r.push([e,t]),this;n=this.__data__=new Ne(r)}return n.set(e,t),this};var ze=ce?Z(ce,Object):function(){return[]},Be=function(e){return ee.call(e)};function We(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||O.test(e))&&e>-1&&e%1==0&&e<t}function Ve(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||X)}function je(e){if(null!=e){try{return Q.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ue(e,t){return e===t||e!==e&&t!==t}(he&&Be(new he(new ArrayBuffer(1)))!=x||pe&&Be(new pe)!=l||de&&Be(de.resolve())!=p||me&&Be(new me)!=m||ve&&Be(new ve)!=y)&&(Be=function(e){var t=ee.call(e),n=t==h?e.constructor:void 0,r=n?je(n):void 0;if(r)switch(r){case ye:return x;case be:return l;case xe:return p;case we:return m;case ke:return y}return t});var He=Array.isArray;function Ze(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}(e.length)&&!qe(e)}var Ge=le||function(){return!1};function qe(e){var t=Ke(e)?ee.call(e):"";return t==u||t==c}function Ke(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Xe(e){return Ze(e)?Ee(e):function(e){if(!Ve(e))return fe(e);var t=[];for(var n in Object(e))J.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}e.exports=function(e){return Oe(e,!0,!0)}},5095:function(e,t,n){var r=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,l=u||c||Function("return this")(),f=Object.prototype.toString,h=Math.max,p=Math.min,d=function(){return l.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==f.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=i.test(e);return n||o.test(e)?s(e.slice(2),n?2:8):a.test(e)?NaN:+e}e.exports=function(e,t,n){var r,a,i,o,s,u,c=0,l=!1,f=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,i=a;return r=a=void 0,c=t,o=e.apply(i,n)}function b(e){return c=e,s=setTimeout(w,t),l?y(e):o}function x(e){var n=e-u;return void 0===u||n>=t||n<0||f&&e-c>=i}function w(){var e=d();if(x(e))return k(e);s=setTimeout(w,function(e){var n=t-(e-u);return f?p(n,i-(e-c)):n}(e))}function k(e){return s=void 0,g&&r?y(e):(r=a=void 0,o)}function S(){var e=d(),n=x(e);if(r=arguments,a=this,u=e,n){if(void 0===s)return b(u);if(f)return s=setTimeout(w,t),y(u)}return void 0===s&&(s=setTimeout(w,t)),o}return t=v(t)||0,m(n)&&(l=!!n.leading,i=(f="maxWait"in n)?h(v(n.maxWait)||0,t):i,g="trailing"in n?!!n.trailing:g),S.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=a=s=void 0},S.flush=function(){return void 0===s?o:k(d())},S}},763:function(e,t,n){var r;e=n.nmd(e),function(){var a,i="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",u=16,c=32,l=64,f=128,h=256,p=1/0,d=9007199254740991,m=NaN,v=4294967295,g=[["ary",f],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",c],["partialRight",l],["rearg",h]],y="[object Arguments]",b="[object Array]",x="[object Boolean]",w="[object Date]",k="[object Error]",S="[object Function]",_="[object GeneratorFunction]",T="[object Map]",I="[object Number]",N="[object Object]",C="[object Promise]",E="[object RegExp]",A="[object Set]",R="[object String]",O="[object Symbol]",M="[object WeakMap]",D="[object ArrayBuffer]",F="[object DataView]",P="[object Float32Array]",L="[object Float64Array]",z="[object Int8Array]",B="[object Int16Array]",W="[object Int32Array]",V="[object Uint8Array]",j="[object Uint8ClampedArray]",U="[object Uint16Array]",H="[object Uint32Array]",Z=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,K=/&(?:amp|lt|gt|quot|#39);/g,X=/[&<>"']/g,Y=RegExp(K.source),$=RegExp(X.source),Q=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ae=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(ae.source),oe=/^\s+/,se=/\s/,ue=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,le=/,? & /,fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,me=/\w*$/,ve=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,xe=/^(?:0|[1-9]\d*)$/,we=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ke=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,_e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Te="\\u2700-\\u27bf",Ie="a-z\\xdf-\\xf6\\xf8-\\xff",Ne="A-Z\\xc0-\\xd6\\xd8-\\xde",Ce="\\ufe0e\\ufe0f",Ee="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ae="['\u2019]",Re="[\\ud800-\\udfff]",Oe="["+Ee+"]",Me="["+_e+"]",De="\\d+",Fe="[\\u2700-\\u27bf]",Pe="["+Ie+"]",Le="[^\\ud800-\\udfff"+Ee+De+Te+Ie+Ne+"]",ze="\\ud83c[\\udffb-\\udfff]",Be="[^\\ud800-\\udfff]",We="(?:\\ud83c[\\udde6-\\uddff]){2}",Ve="[\\ud800-\\udbff][\\udc00-\\udfff]",je="["+Ne+"]",Ue="(?:"+Pe+"|"+Le+")",He="(?:"+je+"|"+Le+")",Ze="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ge="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",qe="(?:"+Me+"|"+ze+")"+"?",Ke="[\\ufe0e\\ufe0f]?",Xe=Ke+qe+("(?:\\u200d(?:"+[Be,We,Ve].join("|")+")"+Ke+qe+")*"),Ye="(?:"+[Fe,We,Ve].join("|")+")"+Xe,$e="(?:"+[Be+Me+"?",Me,We,Ve,Re].join("|")+")",Qe=RegExp(Ae,"g"),Je=RegExp(Me,"g"),et=RegExp(ze+"(?="+ze+")|"+$e+Xe,"g"),tt=RegExp([je+"?"+Pe+"+"+Ze+"(?="+[Oe,je,"$"].join("|")+")",He+"+"+Ge+"(?="+[Oe,je+Ue,"$"].join("|")+")",je+"?"+Ue+"+"+Ze,je+"+"+Ge,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",De,Ye].join("|"),"g"),nt=RegExp("[\\u200d\\ud800-\\udfff"+_e+Ce+"]"),rt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,at=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,ot={};ot[P]=ot[L]=ot[z]=ot[B]=ot[W]=ot[V]=ot[j]=ot[U]=ot[H]=!0,ot[y]=ot[b]=ot[D]=ot[x]=ot[F]=ot[w]=ot[k]=ot[S]=ot[T]=ot[I]=ot[N]=ot[E]=ot[A]=ot[R]=ot[M]=!1;var st={};st[y]=st[b]=st[D]=st[F]=st[x]=st[w]=st[P]=st[L]=st[z]=st[B]=st[W]=st[T]=st[I]=st[N]=st[E]=st[A]=st[R]=st[O]=st[V]=st[j]=st[U]=st[H]=!0,st[k]=st[S]=st[M]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,lt=parseInt,ft="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ht="object"==typeof self&&self&&self.Object===Object&&self,pt=ft||ht||Function("return this")(),dt=t&&!t.nodeType&&t,mt=dt&&e&&!e.nodeType&&e,vt=mt&&mt.exports===dt,gt=vt&&ft.process,yt=function(){try{var e=mt&&mt.require&&mt.require("util").types;return e||gt&&gt.binding&&gt.binding("util")}catch(t){}}(),bt=yt&&yt.isArrayBuffer,xt=yt&&yt.isDate,wt=yt&&yt.isMap,kt=yt&&yt.isRegExp,St=yt&&yt.isSet,_t=yt&&yt.isTypedArray;function Tt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function It(e,t,n,r){for(var a=-1,i=null==e?0:e.length;++a<i;){var o=e[a];t(r,o,n(o),e)}return r}function Nt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ct(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Et(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function At(e,t){for(var n=-1,r=null==e?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}function Rt(e,t){return!!(null==e?0:e.length)&&Vt(e,t,0)>-1}function Ot(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}function Mt(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}function Dt(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}function Ft(e,t,n,r){var a=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++a]);++a<i;)n=t(n,e[a],a,e);return n}function Pt(e,t,n,r){var a=null==e?0:e.length;for(r&&a&&(n=e[--a]);a--;)n=t(n,e[a],a,e);return n}function Lt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var zt=Zt("length");function Bt(e,t,n){var r;return n(e,(function(e,n,a){if(t(e,n,a))return r=n,!1})),r}function Wt(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}function Vt(e,t,n){return t===t?function(e,t,n){var r=n-1,a=e.length;for(;++r<a;)if(e[r]===t)return r;return-1}(e,t,n):Wt(e,Ut,n)}function jt(e,t,n,r){for(var a=n-1,i=e.length;++a<i;)if(r(e[a],t))return a;return-1}function Ut(e){return e!==e}function Ht(e,t){var n=null==e?0:e.length;return n?Kt(e,t)/n:m}function Zt(e){return function(t){return null==t?a:t[e]}}function Gt(e){return function(t){return null==e?a:e[t]}}function qt(e,t,n,r,a){return a(e,(function(e,a,i){n=r?(r=!1,e):t(n,e,a,i)})),n}function Kt(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==a&&(n=n===a?o:n+o)}return n}function Xt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Yt(e){return e?e.slice(0,mn(e)+1).replace(oe,""):e}function $t(e){return function(t){return e(t)}}function Qt(e,t){return Mt(t,(function(t){return e[t]}))}function Jt(e,t){return e.has(t)}function en(e,t){for(var n=-1,r=e.length;++n<r&&Vt(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length;n--&&Vt(t,e[n],0)>-1;);return n}function nn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var rn=Gt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=Gt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+ut[e]}function sn(e){return nt.test(e)}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function cn(e,t){return function(n){return e(t(n))}}function ln(e,t){for(var n=-1,r=e.length,a=0,i=[];++n<r;){var o=e[n];o!==t&&o!==s||(e[n]=s,i[a++]=n)}return i}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function pn(e){return sn(e)?function(e){var t=et.lastIndex=0;for(;et.test(e);)++t;return t}(e):zt(e)}function dn(e){return sn(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}function mn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var vn=Gt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var gn=function e(t){var n=(t=null==t?pt:gn.defaults(pt.Object(),t,gn.pick(pt,at))).Array,r=t.Date,se=t.Error,_e=t.Function,Te=t.Math,Ie=t.Object,Ne=t.RegExp,Ce=t.String,Ee=t.TypeError,Ae=n.prototype,Re=_e.prototype,Oe=Ie.prototype,Me=t["__core-js_shared__"],De=Re.toString,Fe=Oe.hasOwnProperty,Pe=0,Le=function(){var e=/[^.]+$/.exec(Me&&Me.keys&&Me.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ze=Oe.toString,Be=De.call(Ie),We=pt._,Ve=Ne("^"+De.call(Fe).replace(ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),je=vt?t.Buffer:a,Ue=t.Symbol,He=t.Uint8Array,Ze=je?je.allocUnsafe:a,Ge=cn(Ie.getPrototypeOf,Ie),qe=Ie.create,Ke=Oe.propertyIsEnumerable,Xe=Ae.splice,Ye=Ue?Ue.isConcatSpreadable:a,$e=Ue?Ue.iterator:a,et=Ue?Ue.toStringTag:a,nt=function(){try{var e=hi(Ie,"defineProperty");return e({},"",{}),e}catch(t){}}(),ut=t.clearTimeout!==pt.clearTimeout&&t.clearTimeout,ft=r&&r.now!==pt.Date.now&&r.now,ht=t.setTimeout!==pt.setTimeout&&t.setTimeout,dt=Te.ceil,mt=Te.floor,gt=Ie.getOwnPropertySymbols,yt=je?je.isBuffer:a,zt=t.isFinite,Gt=Ae.join,yn=cn(Ie.keys,Ie),bn=Te.max,xn=Te.min,wn=r.now,kn=t.parseInt,Sn=Te.random,_n=Ae.reverse,Tn=hi(t,"DataView"),In=hi(t,"Map"),Nn=hi(t,"Promise"),Cn=hi(t,"Set"),En=hi(t,"WeakMap"),An=hi(Ie,"create"),Rn=En&&new En,On={},Mn=Bi(Tn),Dn=Bi(In),Fn=Bi(Nn),Pn=Bi(Cn),Ln=Bi(En),zn=Ue?Ue.prototype:a,Bn=zn?zn.valueOf:a,Wn=zn?zn.toString:a;function Vn(e){if(rs(e)&&!Go(e)&&!(e instanceof Zn)){if(e instanceof Hn)return e;if(Fe.call(e,"__wrapped__"))return Wi(e)}return new Hn(e)}var jn=function(){function e(){}return function(t){if(!ns(t))return{};if(qe)return qe(t);e.prototype=t;var n=new e;return e.prototype=a,n}}();function Un(){}function Hn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}function Zn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Xn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Kn;++t<n;)this.add(e[t])}function Yn(e){var t=this.__data__=new qn(e);this.size=t.size}function $n(e,t){var n=Go(e),r=!n&&Zo(e),a=!n&&!r&&Yo(e),i=!n&&!r&&!a&&fs(e),o=n||r||a||i,s=o?Xt(e.length,Ce):[],u=s.length;for(var c in e)!t&&!Fe.call(e,c)||o&&("length"==c||a&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||bi(c,u))||s.push(c);return s}function Qn(e){var t=e.length;return t?e[Xr(0,t-1)]:a}function Jn(e,t){return Pi(Aa(e),ur(t,0,e.length))}function er(e){return Pi(Aa(e))}function tr(e,t,n){(n!==a&&!jo(e[t],n)||n===a&&!(t in e))&&or(e,t,n)}function nr(e,t,n){var r=e[t];Fe.call(e,t)&&jo(r,n)&&(n!==a||t in e)||or(e,t,n)}function rr(e,t){for(var n=e.length;n--;)if(jo(e[n][0],t))return n;return-1}function ar(e,t,n,r){return pr(e,(function(e,a,i){t(r,e,n(e),i)})),r}function ir(e,t){return e&&Ra(t,Ms(t),e)}function or(e,t,n){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var r=-1,i=t.length,o=n(i),s=null==e;++r<i;)o[r]=s?a:Cs(e,t[r]);return o}function ur(e,t,n){return e===e&&(n!==a&&(e=e<=n?e:n),t!==a&&(e=e>=t?e:t)),e}function cr(e,t,n,r,i,o){var s,u=1&t,c=2&t,l=4&t;if(n&&(s=i?n(e,r,i,o):n(e)),s!==a)return s;if(!ns(e))return e;var f=Go(e);if(f){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Fe.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!u)return Aa(e,s)}else{var h=mi(e),p=h==S||h==_;if(Yo(e))return _a(e,u);if(h==N||h==y||p&&!i){if(s=c||p?{}:gi(e),!u)return c?function(e,t){return Ra(e,di(e),t)}(e,function(e,t){return e&&Ra(t,Ds(t),e)}(s,e)):function(e,t){return Ra(e,pi(e),t)}(e,ir(s,e))}else{if(!st[h])return i?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case D:return Ta(e);case x:case w:return new r(+e);case F:return function(e,t){var n=t?Ta(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case P:case L:case z:case B:case W:case V:case j:case U:case H:return Ia(e,n);case T:return new r;case I:case R:return new r(e);case E:return function(e){var t=new e.constructor(e.source,me.exec(e));return t.lastIndex=e.lastIndex,t}(e);case A:return new r;case O:return a=e,Bn?Ie(Bn.call(a)):{}}var a}(e,h,u)}}o||(o=new Yn);var d=o.get(e);if(d)return d;o.set(e,s),us(e)?e.forEach((function(r){s.add(cr(r,t,n,r,e,o))})):as(e)&&e.forEach((function(r,a){s.set(a,cr(r,t,n,a,e,o))}));var m=f?a:(l?c?ii:ai:c?Ds:Ms)(e);return Nt(m||e,(function(r,a){m&&(r=e[a=r]),nr(s,a,cr(r,t,n,a,e,o))})),s}function lr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Ie(e);r--;){var i=n[r],o=t[i],s=e[i];if(s===a&&!(i in e)||!o(s))return!1}return!0}function fr(e,t,n){if("function"!=typeof e)throw new Ee(i);return Oi((function(){e.apply(a,n)}),t)}function hr(e,t,n,r){var a=-1,i=Rt,o=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=Mt(t,$t(n))),r?(i=Ot,o=!1):t.length>=200&&(i=Jt,o=!1,t=new Xn(t));e:for(;++a<s;){var l=e[a],f=null==n?l:n(l);if(l=r||0!==l?l:0,o&&f===f){for(var h=c;h--;)if(t[h]===f)continue e;u.push(l)}else i(t,f,r)||u.push(l)}return u}Vn.templateSettings={escape:Q,evaluate:J,interpolate:ee,variable:"",imports:{_:Vn}},Vn.prototype=Un.prototype,Vn.prototype.constructor=Vn,Hn.prototype=jn(Un.prototype),Hn.prototype.constructor=Hn,Zn.prototype=jn(Un.prototype),Zn.prototype.constructor=Zn,Gn.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},Gn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Gn.prototype.get=function(e){var t=this.__data__;if(An){var n=t[e];return n===o?a:n}return Fe.call(t,e)?t[e]:a},Gn.prototype.has=function(e){var t=this.__data__;return An?t[e]!==a:Fe.call(t,e)},Gn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=An&&t===a?o:t,this},qn.prototype.clear=function(){this.__data__=[],this.size=0},qn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Xe.call(t,n,1),--this.size,!0)},qn.prototype.get=function(e){var t=this.__data__,n=rr(t,e);return n<0?a:t[n][1]},qn.prototype.has=function(e){return rr(this.__data__,e)>-1},qn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Kn.prototype.clear=function(){this.size=0,this.__data__={hash:new Gn,map:new(In||qn),string:new Gn}},Kn.prototype.delete=function(e){var t=li(this,e).delete(e);return this.size-=t?1:0,t},Kn.prototype.get=function(e){return li(this,e).get(e)},Kn.prototype.has=function(e){return li(this,e).has(e)},Kn.prototype.set=function(e,t){var n=li(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Xn.prototype.add=Xn.prototype.push=function(e){return this.__data__.set(e,o),this},Xn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.clear=function(){this.__data__=new qn,this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Yn.prototype.get=function(e){return this.__data__.get(e)},Yn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof qn){var r=n.__data__;if(!In||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Kn(r)}return n.set(e,t),this.size=n.size,this};var pr=Da(wr),dr=Da(kr,!0);function mr(e,t){var n=!0;return pr(e,(function(e,r,a){return n=!!t(e,r,a)})),n}function vr(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],s=t(o);if(null!=s&&(u===a?s===s&&!ls(s):n(s,u)))var u=s,c=o}return c}function gr(e,t){var n=[];return pr(e,(function(e,r,a){t(e,r,a)&&n.push(e)})),n}function yr(e,t,n,r,a){var i=-1,o=e.length;for(n||(n=yi),a||(a=[]);++i<o;){var s=e[i];t>0&&n(s)?t>1?yr(s,t-1,n,r,a):Dt(a,s):r||(a[a.length]=s)}return a}var br=Fa(),xr=Fa(!0);function wr(e,t){return e&&br(e,t,Ms)}function kr(e,t){return e&&xr(e,t,Ms)}function Sr(e,t){return At(t,(function(t){return Jo(e[t])}))}function _r(e,t){for(var n=0,r=(t=xa(t,e)).length;null!=e&&n<r;)e=e[zi(t[n++])];return n&&n==r?e:a}function Tr(e,t,n){var r=t(e);return Go(e)?r:Dt(r,n(e))}function Ir(e){return null==e?e===a?"[object Undefined]":"[object Null]":et&&et in Ie(e)?function(e){var t=Fe.call(e,et),n=e[et];try{e[et]=a;var r=!0}catch(o){}var i=ze.call(e);r&&(t?e[et]=n:delete e[et]);return i}(e):function(e){return ze.call(e)}(e)}function Nr(e,t){return e>t}function Cr(e,t){return null!=e&&Fe.call(e,t)}function Er(e,t){return null!=e&&t in Ie(e)}function Ar(e,t,r){for(var i=r?Ot:Rt,o=e[0].length,s=e.length,u=s,c=n(s),l=1/0,f=[];u--;){var h=e[u];u&&t&&(h=Mt(h,$t(t))),l=xn(h.length,l),c[u]=!r&&(t||o>=120&&h.length>=120)?new Xn(u&&h):a}h=e[0];var p=-1,d=c[0];e:for(;++p<o&&f.length<l;){var m=h[p],v=t?t(m):m;if(m=r||0!==m?m:0,!(d?Jt(d,v):i(f,v,r))){for(u=s;--u;){var g=c[u];if(!(g?Jt(g,v):i(e[u],v,r)))continue e}d&&d.push(v),f.push(m)}}return f}function Rr(e,t,n){var r=null==(e=Ci(e,t=xa(t,e)))?e:e[zi($i(t))];return null==r?a:Tt(r,e,n)}function Or(e){return rs(e)&&Ir(e)==y}function Mr(e,t,n,r,i){return e===t||(null==e||null==t||!rs(e)&&!rs(t)?e!==e&&t!==t:function(e,t,n,r,i,o){var s=Go(e),u=Go(t),c=s?b:mi(e),l=u?b:mi(t),f=(c=c==y?N:c)==N,h=(l=l==y?N:l)==N,p=c==l;if(p&&Yo(e)){if(!Yo(t))return!1;s=!0,f=!1}if(p&&!f)return o||(o=new Yn),s||fs(e)?ni(e,t,n,r,i,o):function(e,t,n,r,a,i,o){switch(n){case F:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case D:return!(e.byteLength!=t.byteLength||!i(new He(e),new He(t)));case x:case w:case I:return jo(+e,+t);case k:return e.name==t.name&&e.message==t.message;case E:case R:return e==t+"";case T:var s=un;case A:var u=1&r;if(s||(s=fn),e.size!=t.size&&!u)return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var l=ni(s(e),s(t),r,a,i,o);return o.delete(e),l;case O:if(Bn)return Bn.call(e)==Bn.call(t)}return!1}(e,t,c,n,r,i,o);if(!(1&n)){var d=f&&Fe.call(e,"__wrapped__"),m=h&&Fe.call(t,"__wrapped__");if(d||m){var v=d?e.value():e,g=m?t.value():t;return o||(o=new Yn),i(v,g,n,r,o)}}if(!p)return!1;return o||(o=new Yn),function(e,t,n,r,i,o){var s=1&n,u=ai(e),c=u.length,l=ai(t).length;if(c!=l&&!s)return!1;var f=c;for(;f--;){var h=u[f];if(!(s?h in t:Fe.call(t,h)))return!1}var p=o.get(e),d=o.get(t);if(p&&d)return p==t&&d==e;var m=!0;o.set(e,t),o.set(t,e);var v=s;for(;++f<c;){var g=e[h=u[f]],y=t[h];if(r)var b=s?r(y,g,h,t,e,o):r(g,y,h,e,t,o);if(!(b===a?g===y||i(g,y,n,r,o):b)){m=!1;break}v||(v="constructor"==h)}if(m&&!v){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(m=!1)}return o.delete(e),o.delete(t),m}(e,t,n,r,i,o)}(e,t,n,r,Mr,i))}function Dr(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;for(e=Ie(e);i--;){var u=n[i];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<o;){var c=(u=n[i])[0],l=e[c],f=u[1];if(s&&u[2]){if(l===a&&!(c in e))return!1}else{var h=new Yn;if(r)var p=r(l,f,c,e,t,h);if(!(p===a?Mr(f,l,3,r,h):p))return!1}}return!0}function Fr(e){return!(!ns(e)||(t=e,Le&&Le in t))&&(Jo(e)?Ve:ye).test(Bi(e));var t}function Pr(e){return"function"==typeof e?e:null==e?iu:"object"==typeof e?Go(e)?jr(e[0],e[1]):Vr(e):du(e)}function Lr(e){if(!_i(e))return yn(e);var t=[];for(var n in Ie(e))Fe.call(e,n)&&"constructor"!=n&&t.push(n);return t}function zr(e){if(!ns(e))return function(e){var t=[];if(null!=e)for(var n in Ie(e))t.push(n);return t}(e);var t=_i(e),n=[];for(var r in e)("constructor"!=r||!t&&Fe.call(e,r))&&n.push(r);return n}function Br(e,t){return e<t}function Wr(e,t){var r=-1,a=Ko(e)?n(e.length):[];return pr(e,(function(e,n,i){a[++r]=t(e,n,i)})),a}function Vr(e){var t=fi(e);return 1==t.length&&t[0][2]?Ii(t[0][0],t[0][1]):function(n){return n===e||Dr(n,e,t)}}function jr(e,t){return wi(e)&&Ti(t)?Ii(zi(e),t):function(n){var r=Cs(n,e);return r===a&&r===t?Es(n,e):Mr(t,r,3)}}function Ur(e,t,n,r,i){e!==t&&br(t,(function(o,s){if(i||(i=new Yn),ns(o))!function(e,t,n,r,i,o,s){var u=Ai(e,n),c=Ai(t,n),l=s.get(c);if(l)return void tr(e,n,l);var f=o?o(u,c,n+"",e,t,s):a,h=f===a;if(h){var p=Go(c),d=!p&&Yo(c),m=!p&&!d&&fs(c);f=c,p||d||m?Go(u)?f=u:Xo(u)?f=Aa(u):d?(h=!1,f=_a(c,!0)):m?(h=!1,f=Ia(c,!0)):f=[]:os(c)||Zo(c)?(f=u,Zo(u)?f=bs(u):ns(u)&&!Jo(u)||(f=gi(c))):h=!1}h&&(s.set(c,f),i(f,c,r,o,s),s.delete(c));tr(e,n,f)}(e,t,s,n,Ur,r,i);else{var u=r?r(Ai(e,s),o,s+"",e,t,i):a;u===a&&(u=o),tr(e,s,u)}}),Ds)}function Hr(e,t){var n=e.length;if(n)return bi(t+=t<0?n:0,n)?e[t]:a}function Zr(e,t,n){t=t.length?Mt(t,(function(e){return Go(e)?function(t){return _r(t,1===e.length?e[0]:e)}:e})):[iu];var r=-1;t=Mt(t,$t(ci()));var a=Wr(e,(function(e,n,a){var i=Mt(t,(function(t){return t(e)}));return{criteria:i,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(a,(function(e,t){return function(e,t,n){var r=-1,a=e.criteria,i=t.criteria,o=a.length,s=n.length;for(;++r<o;){var u=Na(a[r],i[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Gr(e,t,n){for(var r=-1,a=t.length,i={};++r<a;){var o=t[r],s=_r(e,o);n(s,o)&&ea(i,xa(o,e),s)}return i}function qr(e,t,n,r){var a=r?jt:Vt,i=-1,o=t.length,s=e;for(e===t&&(t=Aa(t)),n&&(s=Mt(e,$t(n)));++i<o;)for(var u=0,c=t[i],l=n?n(c):c;(u=a(s,l,u,r))>-1;)s!==e&&Xe.call(s,u,1),Xe.call(e,u,1);return e}function Kr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var a=t[n];if(n==r||a!==i){var i=a;bi(a)?Xe.call(e,a,1):ha(e,a)}}return e}function Xr(e,t){return e+mt(Sn()*(t-e+1))}function Yr(e,t){var n="";if(!e||t<1||t>d)return n;do{t%2&&(n+=e),(t=mt(t/2))&&(e+=e)}while(t);return n}function $r(e,t){return Mi(Ni(e,t,iu),e+"")}function Qr(e){return Qn(js(e))}function Jr(e,t){var n=js(e);return Pi(n,ur(t,0,n.length))}function ea(e,t,n,r){if(!ns(e))return e;for(var i=-1,o=(t=xa(t,e)).length,s=o-1,u=e;null!=u&&++i<o;){var c=zi(t[i]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=s){var f=u[c];(l=r?r(f,c,u):a)===a&&(l=ns(f)?f:bi(t[i+1])?[]:{})}nr(u,c,l),u=u[c]}return e}var ta=Rn?function(e,t){return Rn.set(e,t),e}:iu,na=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:nu(t),writable:!0})}:iu;function ra(e){return Pi(js(e))}function aa(e,t,r){var a=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=n(i);++a<i;)o[a]=e[a+t];return o}function ia(e,t){var n;return pr(e,(function(e,r,a){return!(n=t(e,r,a))})),!!n}function oa(e,t,n){var r=0,a=null==e?r:e.length;if("number"==typeof t&&t===t&&a<=2147483647){for(;r<a;){var i=r+a>>>1,o=e[i];null!==o&&!ls(o)&&(n?o<=t:o<t)?r=i+1:a=i}return a}return sa(e,t,iu,n)}function sa(e,t,n,r){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!==t,u=null===t,c=ls(t),l=t===a;i<o;){var f=mt((i+o)/2),h=n(e[f]),p=h!==a,d=null===h,m=h===h,v=ls(h);if(s)var g=r||m;else g=l?m&&(r||p):u?m&&p&&(r||!d):c?m&&p&&!d&&(r||!v):!d&&!v&&(r?h<=t:h<t);g?i=f+1:o=f}return xn(o,4294967294)}function ua(e,t){for(var n=-1,r=e.length,a=0,i=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!jo(s,u)){var u=s;i[a++]=0===o?0:o}}return i}function ca(e){return"number"==typeof e?e:ls(e)?m:+e}function la(e){if("string"==typeof e)return e;if(Go(e))return Mt(e,la)+"";if(ls(e))return Wn?Wn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function fa(e,t,n){var r=-1,a=Rt,i=e.length,o=!0,s=[],u=s;if(n)o=!1,a=Ot;else if(i>=200){var c=t?null:Ya(e);if(c)return fn(c);o=!1,a=Jt,u=new Xn}else u=t?[]:s;e:for(;++r<i;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,o&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),s.push(l)}else a(u,f,n)||(u!==s&&u.push(f),s.push(l))}return s}function ha(e,t){return null==(e=Ci(e,t=xa(t,e)))||delete e[zi($i(t))]}function pa(e,t,n,r){return ea(e,t,n(_r(e,t)),r)}function da(e,t,n,r){for(var a=e.length,i=r?a:-1;(r?i--:++i<a)&&t(e[i],i,e););return n?aa(e,r?0:i,r?i+1:a):aa(e,r?i+1:0,r?a:i)}function ma(e,t){var n=e;return n instanceof Zn&&(n=n.value()),Ft(t,(function(e,t){return t.func.apply(t.thisArg,Dt([e],t.args))}),n)}function va(e,t,r){var a=e.length;if(a<2)return a?fa(e[0]):[];for(var i=-1,o=n(a);++i<a;)for(var s=e[i],u=-1;++u<a;)u!=i&&(o[i]=hr(o[i]||s,e[u],t,r));return fa(yr(o,1),t,r)}function ga(e,t,n){for(var r=-1,i=e.length,o=t.length,s={};++r<i;){var u=r<o?t[r]:a;n(s,e[r],u)}return s}function ya(e){return Xo(e)?e:[]}function ba(e){return"function"==typeof e?e:iu}function xa(e,t){return Go(e)?e:wi(e,t)?[e]:Li(xs(e))}var wa=$r;function ka(e,t,n){var r=e.length;return n=n===a?r:n,!t&&n>=r?e:aa(e,t,n)}var Sa=ut||function(e){return pt.clearTimeout(e)};function _a(e,t){if(t)return e.slice();var n=e.length,r=Ze?Ze(n):new e.constructor(n);return e.copy(r),r}function Ta(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function Ia(e,t){var n=t?Ta(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Na(e,t){if(e!==t){var n=e!==a,r=null===e,i=e===e,o=ls(e),s=t!==a,u=null===t,c=t===t,l=ls(t);if(!u&&!l&&!o&&e>t||o&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!i)return 1;if(!r&&!o&&!l&&e<t||l&&n&&i&&!r&&!o||u&&n&&i||!s&&i||!c)return-1}return 0}function Ca(e,t,r,a){for(var i=-1,o=e.length,s=r.length,u=-1,c=t.length,l=bn(o-s,0),f=n(c+l),h=!a;++u<c;)f[u]=t[u];for(;++i<s;)(h||i<o)&&(f[r[i]]=e[i]);for(;l--;)f[u++]=e[i++];return f}function Ea(e,t,r,a){for(var i=-1,o=e.length,s=-1,u=r.length,c=-1,l=t.length,f=bn(o-u,0),h=n(f+l),p=!a;++i<f;)h[i]=e[i];for(var d=i;++c<l;)h[d+c]=t[c];for(;++s<u;)(p||i<o)&&(h[d+r[s]]=e[i++]);return h}function Aa(e,t){var r=-1,a=e.length;for(t||(t=n(a));++r<a;)t[r]=e[r];return t}function Ra(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var u=t[o],c=r?r(n[u],e[u],u,n,e):a;c===a&&(c=e[u]),i?or(n,u,c):nr(n,u,c)}return n}function Oa(e,t){return function(n,r){var a=Go(n)?It:ar,i=t?t():{};return a(n,e,ci(r,2),i)}}function Ma(e){return $r((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:a,s=i>2?n[2]:a;for(o=e.length>3&&"function"==typeof o?(i--,o):a,s&&xi(n[0],n[1],s)&&(o=i<3?a:o,i=1),t=Ie(t);++r<i;){var u=n[r];u&&e(t,u,r,o)}return t}))}function Da(e,t){return function(n,r){if(null==n)return n;if(!Ko(n))return e(n,r);for(var a=n.length,i=t?a:-1,o=Ie(n);(t?i--:++i<a)&&!1!==r(o[i],i,o););return n}}function Fa(e){return function(t,n,r){for(var a=-1,i=Ie(t),o=r(t),s=o.length;s--;){var u=o[e?s:++a];if(!1===n(i[u],u,i))break}return t}}function Pa(e){return function(t){var n=sn(t=xs(t))?dn(t):a,r=n?n[0]:t.charAt(0),i=n?ka(n,1).join(""):t.slice(1);return r[e]()+i}}function La(e){return function(t){return Ft(Js(Zs(t).replace(Qe,"")),e,"")}}function za(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=jn(e.prototype),r=e.apply(n,t);return ns(r)?r:n}}function Ba(e){return function(t,n,r){var i=Ie(t);if(!Ko(t)){var o=ci(n,3);t=Ms(t),n=function(e){return o(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[o?t[s]:s]:a}}function Wa(e){return ri((function(t){var n=t.length,r=n,o=Hn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Ee(i);if(o&&!u&&"wrapper"==si(s))var u=new Hn([],!0)}for(r=u?r:n;++r<n;){var c=si(s=t[r]),l="wrapper"==c?oi(s):a;u=l&&ki(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[si(l[0])].apply(u,l[3]):1==s.length&&ki(s)?u[c]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Go(r))return u.plant(r).value();for(var a=0,i=n?t[a].apply(this,e):r;++a<n;)i=t[a].call(this,i);return i}}))}function Va(e,t,r,i,o,s,u,c,l,h){var p=t&f,d=1&t,m=2&t,v=24&t,g=512&t,y=m?a:za(e);return function a(){for(var f=arguments.length,b=n(f),x=f;x--;)b[x]=arguments[x];if(v)var w=ui(a),k=nn(b,w);if(i&&(b=Ca(b,i,o,v)),s&&(b=Ea(b,s,u,v)),f-=k,v&&f<h){var S=ln(b,w);return Ka(e,t,Va,a.placeholder,r,b,S,c,l,h-f)}var _=d?r:this,T=m?_[e]:e;return f=b.length,c?b=Ei(b,c):g&&f>1&&b.reverse(),p&&l<f&&(b.length=l),this&&this!==pt&&this instanceof a&&(T=y||za(T)),T.apply(_,b)}}function ja(e,t){return function(n,r){return function(e,t,n,r){return wr(e,(function(e,a,i){t(r,n(e),a,i)})),r}(n,e,t(r),{})}}function Ua(e,t){return function(n,r){var i;if(n===a&&r===a)return t;if(n!==a&&(i=n),r!==a){if(i===a)return r;"string"==typeof n||"string"==typeof r?(n=la(n),r=la(r)):(n=ca(n),r=ca(r)),i=e(n,r)}return i}}function Ha(e){return ri((function(t){return t=Mt(t,$t(ci())),$r((function(n){var r=this;return e(t,(function(e){return Tt(e,r,n)}))}))}))}function Za(e,t){var n=(t=t===a?" ":la(t)).length;if(n<2)return n?Yr(t,e):t;var r=Yr(t,dt(e/pn(t)));return sn(t)?ka(dn(r),0,e).join(""):r.slice(0,e)}function Ga(e){return function(t,r,i){return i&&"number"!=typeof i&&xi(t,r,i)&&(r=i=a),t=ms(t),r===a?(r=t,t=0):r=ms(r),function(e,t,r,a){for(var i=-1,o=bn(dt((t-e)/(r||1)),0),s=n(o);o--;)s[a?o:++i]=e,e+=r;return s}(t,r,i=i===a?t<r?1:-1:ms(i),e)}}function qa(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ys(t),n=ys(n)),e(t,n)}}function Ka(e,t,n,r,i,o,s,u,f,h){var p=8&t;t|=p?c:l,4&(t&=~(p?l:c))||(t&=-4);var d=[e,t,i,p?o:a,p?s:a,p?a:o,p?a:s,u,f,h],m=n.apply(a,d);return ki(e)&&Ri(m,d),m.placeholder=r,Di(m,e,t)}function Xa(e){var t=Te[e];return function(e,n){if(e=ys(e),(n=null==n?0:xn(vs(n),292))&&zt(e)){var r=(xs(e)+"e").split("e");return+((r=(xs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ya=Cn&&1/fn(new Cn([,-0]))[1]==p?function(e){return new Cn(e)}:lu;function $a(e){return function(t){var n=mi(t);return n==T?un(t):n==A?hn(t):function(e,t){return Mt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Qa(e,t,r,o,p,d,m,v){var g=2&t;if(!g&&"function"!=typeof e)throw new Ee(i);var y=o?o.length:0;if(y||(t&=-97,o=p=a),m=m===a?m:bn(vs(m),0),v=v===a?v:vs(v),y-=p?p.length:0,t&l){var b=o,x=p;o=p=a}var w=g?a:oi(e),k=[e,t,r,o,p,b,x,d,m,v];if(w&&function(e,t){var n=e[1],r=t[1],a=n|r,i=a<131,o=r==f&&8==n||r==f&&n==h&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!i&&!o)return e;1&r&&(e[2]=t[2],a|=1&n?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?Ca(c,u,t[4]):u,e[4]=c?ln(e[3],s):t[4]}(u=t[5])&&(c=e[5],e[5]=c?Ea(c,u,t[6]):u,e[6]=c?ln(e[5],s):t[6]);(u=t[7])&&(e[7]=u);r&f&&(e[8]=null==e[8]?t[8]:xn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=a}(k,w),e=k[0],t=k[1],r=k[2],o=k[3],p=k[4],!(v=k[9]=k[9]===a?g?0:e.length:bn(k[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)S=8==t||t==u?function(e,t,r){var i=za(e);return function o(){for(var s=arguments.length,u=n(s),c=s,l=ui(o);c--;)u[c]=arguments[c];var f=s<3&&u[0]!==l&&u[s-1]!==l?[]:ln(u,l);return(s-=f.length)<r?Ka(e,t,Va,o.placeholder,a,u,f,a,a,r-s):Tt(this&&this!==pt&&this instanceof o?i:e,this,u)}}(e,t,v):t!=c&&33!=t||p.length?Va.apply(a,k):function(e,t,r,a){var i=1&t,o=za(e);return function t(){for(var s=-1,u=arguments.length,c=-1,l=a.length,f=n(l+u),h=this&&this!==pt&&this instanceof t?o:e;++c<l;)f[c]=a[c];for(;u--;)f[c++]=arguments[++s];return Tt(h,i?r:this,f)}}(e,t,r,o);else var S=function(e,t,n){var r=1&t,a=za(e);return function t(){return(this&&this!==pt&&this instanceof t?a:e).apply(r?n:this,arguments)}}(e,t,r);return Di((w?ta:Ri)(S,k),e,t)}function Ja(e,t,n,r){return e===a||jo(e,Oe[n])&&!Fe.call(r,n)?t:e}function ei(e,t,n,r,i,o){return ns(e)&&ns(t)&&(o.set(t,e),Ur(e,t,a,ei,o),o.delete(t)),e}function ti(e){return os(e)?a:e}function ni(e,t,n,r,i,o){var s=1&n,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var l=o.get(e),f=o.get(t);if(l&&f)return l==t&&f==e;var h=-1,p=!0,d=2&n?new Xn:a;for(o.set(e,t),o.set(t,e);++h<u;){var m=e[h],v=t[h];if(r)var g=s?r(v,m,h,t,e,o):r(m,v,h,e,t,o);if(g!==a){if(g)continue;p=!1;break}if(d){if(!Lt(t,(function(e,t){if(!Jt(d,t)&&(m===e||i(m,e,n,r,o)))return d.push(t)}))){p=!1;break}}else if(m!==v&&!i(m,v,n,r,o)){p=!1;break}}return o.delete(e),o.delete(t),p}function ri(e){return Mi(Ni(e,a,Gi),e+"")}function ai(e){return Tr(e,Ms,pi)}function ii(e){return Tr(e,Ds,di)}var oi=Rn?function(e){return Rn.get(e)}:lu;function si(e){for(var t=e.name+"",n=On[t],r=Fe.call(On,t)?n.length:0;r--;){var a=n[r],i=a.func;if(null==i||i==e)return a.name}return t}function ui(e){return(Fe.call(Vn,"placeholder")?Vn:e).placeholder}function ci(){var e=Vn.iteratee||ou;return e=e===ou?Pr:e,arguments.length?e(arguments[0],arguments[1]):e}function li(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function fi(e){for(var t=Ms(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,Ti(a)]}return t}function hi(e,t){var n=function(e,t){return null==e?a:e[t]}(e,t);return Fr(n)?n:a}var pi=gt?function(e){return null==e?[]:(e=Ie(e),At(gt(e),(function(t){return Ke.call(e,t)})))}:gu,di=gt?function(e){for(var t=[];e;)Dt(t,pi(e)),e=Ge(e);return t}:gu,mi=Ir;function vi(e,t,n){for(var r=-1,a=(t=xa(t,e)).length,i=!1;++r<a;){var o=zi(t[r]);if(!(i=null!=e&&n(e,o)))break;e=e[o]}return i||++r!=a?i:!!(a=null==e?0:e.length)&&ts(a)&&bi(o,a)&&(Go(e)||Zo(e))}function gi(e){return"function"!=typeof e.constructor||_i(e)?{}:jn(Ge(e))}function yi(e){return Go(e)||Zo(e)||!!(Ye&&e&&e[Ye])}function bi(e,t){var n=typeof e;return!!(t=null==t?d:t)&&("number"==n||"symbol"!=n&&xe.test(e))&&e>-1&&e%1==0&&e<t}function xi(e,t,n){if(!ns(n))return!1;var r=typeof t;return!!("number"==r?Ko(n)&&bi(t,n.length):"string"==r&&t in n)&&jo(n[t],e)}function wi(e,t){if(Go(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ls(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Ie(t))}function ki(e){var t=si(e),n=Vn[t];if("function"!=typeof n||!(t in Zn.prototype))return!1;if(e===n)return!0;var r=oi(n);return!!r&&e===r[0]}(Tn&&mi(new Tn(new ArrayBuffer(1)))!=F||In&&mi(new In)!=T||Nn&&mi(Nn.resolve())!=C||Cn&&mi(new Cn)!=A||En&&mi(new En)!=M)&&(mi=function(e){var t=Ir(e),n=t==N?e.constructor:a,r=n?Bi(n):"";if(r)switch(r){case Mn:return F;case Dn:return T;case Fn:return C;case Pn:return A;case Ln:return M}return t});var Si=Me?Jo:yu;function _i(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Oe)}function Ti(e){return e===e&&!ns(e)}function Ii(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==a||e in Ie(n)))}}function Ni(e,t,r){return t=bn(t===a?e.length-1:t,0),function(){for(var a=arguments,i=-1,o=bn(a.length-t,0),s=n(o);++i<o;)s[i]=a[t+i];i=-1;for(var u=n(t+1);++i<t;)u[i]=a[i];return u[t]=r(s),Tt(e,this,u)}}function Ci(e,t){return t.length<2?e:_r(e,aa(t,0,-1))}function Ei(e,t){for(var n=e.length,r=xn(t.length,n),i=Aa(e);r--;){var o=t[r];e[r]=bi(o,n)?i[o]:a}return e}function Ai(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Ri=Fi(ta),Oi=ht||function(e,t){return pt.setTimeout(e,t)},Mi=Fi(na);function Di(e,t,n){var r=t+"";return Mi(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ue,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Nt(g,(function(n){var r="_."+n[0];t&n[1]&&!Rt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(le):[]}(r),n)))}function Fi(e){var t=0,n=0;return function(){var r=wn(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(a,arguments)}}function Pi(e,t){var n=-1,r=e.length,i=r-1;for(t=t===a?r:t;++n<t;){var o=Xr(n,i),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var Li=function(e){var t=Po(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,a){t.push(r?a.replace(pe,"$1"):n||e)})),t}));function zi(e){if("string"==typeof e||ls(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Bi(e){if(null!=e){try{return De.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Wi(e){if(e instanceof Zn)return e.clone();var t=new Hn(e.__wrapped__,e.__chain__);return t.__actions__=Aa(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Vi=$r((function(e,t){return Xo(e)?hr(e,yr(t,1,Xo,!0)):[]})),ji=$r((function(e,t){var n=$i(t);return Xo(n)&&(n=a),Xo(e)?hr(e,yr(t,1,Xo,!0),ci(n,2)):[]})),Ui=$r((function(e,t){var n=$i(t);return Xo(n)&&(n=a),Xo(e)?hr(e,yr(t,1,Xo,!0),a,n):[]}));function Hi(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:vs(n);return a<0&&(a=bn(r+a,0)),Wt(e,ci(t,3),a)}function Zi(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==a&&(i=vs(n),i=n<0?bn(r+i,0):xn(i,r-1)),Wt(e,ci(t,3),i,!0)}function Gi(e){return(null==e?0:e.length)?yr(e,1):[]}function qi(e){return e&&e.length?e[0]:a}var Ki=$r((function(e){var t=Mt(e,ya);return t.length&&t[0]===e[0]?Ar(t):[]})),Xi=$r((function(e){var t=$i(e),n=Mt(e,ya);return t===$i(n)?t=a:n.pop(),n.length&&n[0]===e[0]?Ar(n,ci(t,2)):[]})),Yi=$r((function(e){var t=$i(e),n=Mt(e,ya);return(t="function"==typeof t?t:a)&&n.pop(),n.length&&n[0]===e[0]?Ar(n,a,t):[]}));function $i(e){var t=null==e?0:e.length;return t?e[t-1]:a}var Qi=$r(Ji);function Ji(e,t){return e&&e.length&&t&&t.length?qr(e,t):e}var eo=ri((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return Kr(e,Mt(t,(function(e){return bi(e,n)?+e:e})).sort(Na)),r}));function to(e){return null==e?e:_n.call(e)}var no=$r((function(e){return fa(yr(e,1,Xo,!0))})),ro=$r((function(e){var t=$i(e);return Xo(t)&&(t=a),fa(yr(e,1,Xo,!0),ci(t,2))})),ao=$r((function(e){var t=$i(e);return t="function"==typeof t?t:a,fa(yr(e,1,Xo,!0),a,t)}));function io(e){if(!e||!e.length)return[];var t=0;return e=At(e,(function(e){if(Xo(e))return t=bn(e.length,t),!0})),Xt(t,(function(t){return Mt(e,Zt(t))}))}function oo(e,t){if(!e||!e.length)return[];var n=io(e);return null==t?n:Mt(n,(function(e){return Tt(t,a,e)}))}var so=$r((function(e,t){return Xo(e)?hr(e,t):[]})),uo=$r((function(e){return va(At(e,Xo))})),co=$r((function(e){var t=$i(e);return Xo(t)&&(t=a),va(At(e,Xo),ci(t,2))})),lo=$r((function(e){var t=$i(e);return t="function"==typeof t?t:a,va(At(e,Xo),a,t)})),fo=$r(io);var ho=$r((function(e){var t=e.length,n=t>1?e[t-1]:a;return n="function"==typeof n?(e.pop(),n):a,oo(e,n)}));function po(e){var t=Vn(e);return t.__chain__=!0,t}function mo(e,t){return t(e)}var vo=ri((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Zn&&bi(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:mo,args:[i],thisArg:a}),new Hn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(a),e}))):this.thru(i)}));var go=Oa((function(e,t,n){Fe.call(e,n)?++e[n]:or(e,n,1)}));var yo=Ba(Hi),bo=Ba(Zi);function xo(e,t){return(Go(e)?Nt:pr)(e,ci(t,3))}function wo(e,t){return(Go(e)?Ct:dr)(e,ci(t,3))}var ko=Oa((function(e,t,n){Fe.call(e,n)?e[n].push(t):or(e,n,[t])}));var So=$r((function(e,t,r){var a=-1,i="function"==typeof t,o=Ko(e)?n(e.length):[];return pr(e,(function(e){o[++a]=i?Tt(t,e,r):Rr(e,t,r)})),o})),_o=Oa((function(e,t,n){or(e,n,t)}));function To(e,t){return(Go(e)?Mt:Wr)(e,ci(t,3))}var Io=Oa((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var No=$r((function(e,t){if(null==e)return[];var n=t.length;return n>1&&xi(e,t[0],t[1])?t=[]:n>2&&xi(t[0],t[1],t[2])&&(t=[t[0]]),Zr(e,yr(t,1),[])})),Co=ft||function(){return pt.Date.now()};function Eo(e,t,n){return t=n?a:t,t=e&&null==t?e.length:t,Qa(e,f,a,a,a,a,t)}function Ao(e,t){var n;if("function"!=typeof t)throw new Ee(i);return e=vs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=a),n}}var Ro=$r((function(e,t,n){var r=1;if(n.length){var a=ln(n,ui(Ro));r|=c}return Qa(e,r,t,n,a)})),Oo=$r((function(e,t,n){var r=3;if(n.length){var a=ln(n,ui(Oo));r|=c}return Qa(t,r,e,n,a)}));function Mo(e,t,n){var r,o,s,u,c,l,f=0,h=!1,p=!1,d=!0;if("function"!=typeof e)throw new Ee(i);function m(t){var n=r,i=o;return r=o=a,f=t,u=e.apply(i,n)}function v(e){return f=e,c=Oi(y,t),h?m(e):u}function g(e){var n=e-l;return l===a||n>=t||n<0||p&&e-f>=s}function y(){var e=Co();if(g(e))return b(e);c=Oi(y,function(e){var n=t-(e-l);return p?xn(n,s-(e-f)):n}(e))}function b(e){return c=a,d&&r?m(e):(r=o=a,u)}function x(){var e=Co(),n=g(e);if(r=arguments,o=this,l=e,n){if(c===a)return v(l);if(p)return Sa(c),c=Oi(y,t),m(l)}return c===a&&(c=Oi(y,t)),u}return t=ys(t)||0,ns(n)&&(h=!!n.leading,s=(p="maxWait"in n)?bn(ys(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d),x.cancel=function(){c!==a&&Sa(c),f=0,r=l=o=c=a},x.flush=function(){return c===a?u:b(Co())},x}var Do=$r((function(e,t){return fr(e,1,t)})),Fo=$r((function(e,t,n){return fr(e,ys(t)||0,n)}));function Po(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ee(i);var n=function n(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(Po.Cache||Kn),n}function Lo(e){if("function"!=typeof e)throw new Ee(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Po.Cache=Kn;var zo=wa((function(e,t){var n=(t=1==t.length&&Go(t[0])?Mt(t[0],$t(ci())):Mt(yr(t,1),$t(ci()))).length;return $r((function(r){for(var a=-1,i=xn(r.length,n);++a<i;)r[a]=t[a].call(this,r[a]);return Tt(e,this,r)}))})),Bo=$r((function(e,t){var n=ln(t,ui(Bo));return Qa(e,c,a,t,n)})),Wo=$r((function(e,t){var n=ln(t,ui(Wo));return Qa(e,l,a,t,n)})),Vo=ri((function(e,t){return Qa(e,h,a,a,a,t)}));function jo(e,t){return e===t||e!==e&&t!==t}var Uo=qa(Nr),Ho=qa((function(e,t){return e>=t})),Zo=Or(function(){return arguments}())?Or:function(e){return rs(e)&&Fe.call(e,"callee")&&!Ke.call(e,"callee")},Go=n.isArray,qo=bt?$t(bt):function(e){return rs(e)&&Ir(e)==D};function Ko(e){return null!=e&&ts(e.length)&&!Jo(e)}function Xo(e){return rs(e)&&Ko(e)}var Yo=yt||yu,$o=xt?$t(xt):function(e){return rs(e)&&Ir(e)==w};function Qo(e){if(!rs(e))return!1;var t=Ir(e);return t==k||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!os(e)}function Jo(e){if(!ns(e))return!1;var t=Ir(e);return t==S||t==_||"[object AsyncFunction]"==t||"[object Proxy]"==t}function es(e){return"number"==typeof e&&e==vs(e)}function ts(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function ns(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function rs(e){return null!=e&&"object"==typeof e}var as=wt?$t(wt):function(e){return rs(e)&&mi(e)==T};function is(e){return"number"==typeof e||rs(e)&&Ir(e)==I}function os(e){if(!rs(e)||Ir(e)!=N)return!1;var t=Ge(e);if(null===t)return!0;var n=Fe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&De.call(n)==Be}var ss=kt?$t(kt):function(e){return rs(e)&&Ir(e)==E};var us=St?$t(St):function(e){return rs(e)&&mi(e)==A};function cs(e){return"string"==typeof e||!Go(e)&&rs(e)&&Ir(e)==R}function ls(e){return"symbol"==typeof e||rs(e)&&Ir(e)==O}var fs=_t?$t(_t):function(e){return rs(e)&&ts(e.length)&&!!ot[Ir(e)]};var hs=qa(Br),ps=qa((function(e,t){return e<=t}));function ds(e){if(!e)return[];if(Ko(e))return cs(e)?dn(e):Aa(e);if($e&&e[$e])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[$e]());var t=mi(e);return(t==T?un:t==A?fn:js)(e)}function ms(e){return e?(e=ys(e))===p||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function vs(e){var t=ms(e),n=t%1;return t===t?n?t-n:t:0}function gs(e){return e?ur(vs(e),0,v):0}function ys(e){if("number"==typeof e)return e;if(ls(e))return m;if(ns(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ns(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Yt(e);var n=ge.test(e);return n||be.test(e)?lt(e.slice(2),n?2:8):ve.test(e)?m:+e}function bs(e){return Ra(e,Ds(e))}function xs(e){return null==e?"":la(e)}var ws=Ma((function(e,t){if(_i(t)||Ko(t))Ra(t,Ms(t),e);else for(var n in t)Fe.call(t,n)&&nr(e,n,t[n])})),ks=Ma((function(e,t){Ra(t,Ds(t),e)})),Ss=Ma((function(e,t,n,r){Ra(t,Ds(t),e,r)})),_s=Ma((function(e,t,n,r){Ra(t,Ms(t),e,r)})),Ts=ri(sr);var Is=$r((function(e,t){e=Ie(e);var n=-1,r=t.length,i=r>2?t[2]:a;for(i&&xi(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],s=Ds(o),u=-1,c=s.length;++u<c;){var l=s[u],f=e[l];(f===a||jo(f,Oe[l])&&!Fe.call(e,l))&&(e[l]=o[l])}return e})),Ns=$r((function(e){return e.push(a,ei),Tt(Ps,a,e)}));function Cs(e,t,n){var r=null==e?a:_r(e,t);return r===a?n:r}function Es(e,t){return null!=e&&vi(e,t,Er)}var As=ja((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ze.call(t)),e[t]=n}),nu(iu)),Rs=ja((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ze.call(t)),Fe.call(e,t)?e[t].push(n):e[t]=[n]}),ci),Os=$r(Rr);function Ms(e){return Ko(e)?$n(e):Lr(e)}function Ds(e){return Ko(e)?$n(e,!0):zr(e)}var Fs=Ma((function(e,t,n){Ur(e,t,n)})),Ps=Ma((function(e,t,n,r){Ur(e,t,n,r)})),Ls=ri((function(e,t){var n={};if(null==e)return n;var r=!1;t=Mt(t,(function(t){return t=xa(t,e),r||(r=t.length>1),t})),Ra(e,ii(e),n),r&&(n=cr(n,7,ti));for(var a=t.length;a--;)ha(n,t[a]);return n}));var zs=ri((function(e,t){return null==e?{}:function(e,t){return Gr(e,t,(function(t,n){return Es(e,n)}))}(e,t)}));function Bs(e,t){if(null==e)return{};var n=Mt(ii(e),(function(e){return[e]}));return t=ci(t),Gr(e,n,(function(e,n){return t(e,n[0])}))}var Ws=$a(Ms),Vs=$a(Ds);function js(e){return null==e?[]:Qt(e,Ms(e))}var Us=La((function(e,t,n){return t=t.toLowerCase(),e+(n?Hs(t):t)}));function Hs(e){return Qs(xs(e).toLowerCase())}function Zs(e){return(e=xs(e))&&e.replace(we,rn).replace(Je,"")}var Gs=La((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),qs=La((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ks=Pa("toLowerCase");var Xs=La((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ys=La((function(e,t,n){return e+(n?" ":"")+Qs(t)}));var $s=La((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Qs=Pa("toUpperCase");function Js(e,t,n){return e=xs(e),(t=n?a:t)===a?function(e){return rt.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(fe)||[]}(e):e.match(t)||[]}var eu=$r((function(e,t){try{return Tt(e,a,t)}catch(n){return Qo(n)?n:new se(n)}})),tu=ri((function(e,t){return Nt(t,(function(t){t=zi(t),or(e,t,Ro(e[t],e))})),e}));function nu(e){return function(){return e}}var ru=Wa(),au=Wa(!0);function iu(e){return e}function ou(e){return Pr("function"==typeof e?e:cr(e,1))}var su=$r((function(e,t){return function(n){return Rr(n,e,t)}})),uu=$r((function(e,t){return function(n){return Rr(e,n,t)}}));function cu(e,t,n){var r=Ms(t),a=Sr(t,r);null!=n||ns(t)&&(a.length||!r.length)||(n=t,t=e,e=this,a=Sr(t,Ms(t)));var i=!(ns(n)&&"chain"in n)||!!n.chain,o=Jo(e);return Nt(a,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__),a=n.__actions__=Aa(this.__actions__);return a.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Dt([this.value()],arguments))})})),e}function lu(){}var fu=Ha(Mt),hu=Ha(Et),pu=Ha(Lt);function du(e){return wi(e)?Zt(zi(e)):function(e){return function(t){return _r(t,e)}}(e)}var mu=Ga(),vu=Ga(!0);function gu(){return[]}function yu(){return!1}var bu=Ua((function(e,t){return e+t}),0),xu=Xa("ceil"),wu=Ua((function(e,t){return e/t}),1),ku=Xa("floor");var Su=Ua((function(e,t){return e*t}),1),_u=Xa("round"),Tu=Ua((function(e,t){return e-t}),0);return Vn.after=function(e,t){if("function"!=typeof t)throw new Ee(i);return e=vs(e),function(){if(--e<1)return t.apply(this,arguments)}},Vn.ary=Eo,Vn.assign=ws,Vn.assignIn=ks,Vn.assignInWith=Ss,Vn.assignWith=_s,Vn.at=Ts,Vn.before=Ao,Vn.bind=Ro,Vn.bindAll=tu,Vn.bindKey=Oo,Vn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Go(e)?e:[e]},Vn.chain=po,Vn.chunk=function(e,t,r){t=(r?xi(e,t,r):t===a)?1:bn(vs(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,s=0,u=n(dt(i/t));o<i;)u[s++]=aa(e,o,o+=t);return u},Vn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,a=[];++t<n;){var i=e[t];i&&(a[r++]=i)}return a},Vn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Dt(Go(r)?Aa(r):[r],yr(t,1))},Vn.cond=function(e){var t=null==e?0:e.length,n=ci();return e=t?Mt(e,(function(e){if("function"!=typeof e[1])throw new Ee(i);return[n(e[0]),e[1]]})):[],$r((function(n){for(var r=-1;++r<t;){var a=e[r];if(Tt(a[0],this,n))return Tt(a[1],this,n)}}))},Vn.conforms=function(e){return function(e){var t=Ms(e);return function(n){return lr(n,e,t)}}(cr(e,1))},Vn.constant=nu,Vn.countBy=go,Vn.create=function(e,t){var n=jn(e);return null==t?n:ir(n,t)},Vn.curry=function e(t,n,r){var i=Qa(t,8,a,a,a,a,a,n=r?a:n);return i.placeholder=e.placeholder,i},Vn.curryRight=function e(t,n,r){var i=Qa(t,u,a,a,a,a,a,n=r?a:n);return i.placeholder=e.placeholder,i},Vn.debounce=Mo,Vn.defaults=Is,Vn.defaultsDeep=Ns,Vn.defer=Do,Vn.delay=Fo,Vn.difference=Vi,Vn.differenceBy=ji,Vn.differenceWith=Ui,Vn.drop=function(e,t,n){var r=null==e?0:e.length;return r?aa(e,(t=n||t===a?1:vs(t))<0?0:t,r):[]},Vn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?aa(e,0,(t=r-(t=n||t===a?1:vs(t)))<0?0:t):[]},Vn.dropRightWhile=function(e,t){return e&&e.length?da(e,ci(t,3),!0,!0):[]},Vn.dropWhile=function(e,t){return e&&e.length?da(e,ci(t,3),!0):[]},Vn.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&xi(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=vs(n))<0&&(n=-n>i?0:i+n),(r=r===a||r>i?i:vs(r))<0&&(r+=i),r=n>r?0:gs(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Vn.filter=function(e,t){return(Go(e)?At:gr)(e,ci(t,3))},Vn.flatMap=function(e,t){return yr(To(e,t),1)},Vn.flatMapDeep=function(e,t){return yr(To(e,t),p)},Vn.flatMapDepth=function(e,t,n){return n=n===a?1:vs(n),yr(To(e,t),n)},Vn.flatten=Gi,Vn.flattenDeep=function(e){return(null==e?0:e.length)?yr(e,p):[]},Vn.flattenDepth=function(e,t){return(null==e?0:e.length)?yr(e,t=t===a?1:vs(t)):[]},Vn.flip=function(e){return Qa(e,512)},Vn.flow=ru,Vn.flowRight=au,Vn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var a=e[t];r[a[0]]=a[1]}return r},Vn.functions=function(e){return null==e?[]:Sr(e,Ms(e))},Vn.functionsIn=function(e){return null==e?[]:Sr(e,Ds(e))},Vn.groupBy=ko,Vn.initial=function(e){return(null==e?0:e.length)?aa(e,0,-1):[]},Vn.intersection=Ki,Vn.intersectionBy=Xi,Vn.intersectionWith=Yi,Vn.invert=As,Vn.invertBy=Rs,Vn.invokeMap=So,Vn.iteratee=ou,Vn.keyBy=_o,Vn.keys=Ms,Vn.keysIn=Ds,Vn.map=To,Vn.mapKeys=function(e,t){var n={};return t=ci(t,3),wr(e,(function(e,r,a){or(n,t(e,r,a),e)})),n},Vn.mapValues=function(e,t){var n={};return t=ci(t,3),wr(e,(function(e,r,a){or(n,r,t(e,r,a))})),n},Vn.matches=function(e){return Vr(cr(e,1))},Vn.matchesProperty=function(e,t){return jr(e,cr(t,1))},Vn.memoize=Po,Vn.merge=Fs,Vn.mergeWith=Ps,Vn.method=su,Vn.methodOf=uu,Vn.mixin=cu,Vn.negate=Lo,Vn.nthArg=function(e){return e=vs(e),$r((function(t){return Hr(t,e)}))},Vn.omit=Ls,Vn.omitBy=function(e,t){return Bs(e,Lo(ci(t)))},Vn.once=function(e){return Ao(2,e)},Vn.orderBy=function(e,t,n,r){return null==e?[]:(Go(t)||(t=null==t?[]:[t]),Go(n=r?a:n)||(n=null==n?[]:[n]),Zr(e,t,n))},Vn.over=fu,Vn.overArgs=zo,Vn.overEvery=hu,Vn.overSome=pu,Vn.partial=Bo,Vn.partialRight=Wo,Vn.partition=Io,Vn.pick=zs,Vn.pickBy=Bs,Vn.property=du,Vn.propertyOf=function(e){return function(t){return null==e?a:_r(e,t)}},Vn.pull=Qi,Vn.pullAll=Ji,Vn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?qr(e,t,ci(n,2)):e},Vn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?qr(e,t,a,n):e},Vn.pullAt=eo,Vn.range=mu,Vn.rangeRight=vu,Vn.rearg=Vo,Vn.reject=function(e,t){return(Go(e)?At:gr)(e,Lo(ci(t,3)))},Vn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,a=[],i=e.length;for(t=ci(t,3);++r<i;){var o=e[r];t(o,r,e)&&(n.push(o),a.push(r))}return Kr(e,a),n},Vn.rest=function(e,t){if("function"!=typeof e)throw new Ee(i);return $r(e,t=t===a?t:vs(t))},Vn.reverse=to,Vn.sampleSize=function(e,t,n){return t=(n?xi(e,t,n):t===a)?1:vs(t),(Go(e)?Jn:Jr)(e,t)},Vn.set=function(e,t,n){return null==e?e:ea(e,t,n)},Vn.setWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:ea(e,t,n,r)},Vn.shuffle=function(e){return(Go(e)?er:ra)(e)},Vn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&xi(e,t,n)?(t=0,n=r):(t=null==t?0:vs(t),n=n===a?r:vs(n)),aa(e,t,n)):[]},Vn.sortBy=No,Vn.sortedUniq=function(e){return e&&e.length?ua(e):[]},Vn.sortedUniqBy=function(e,t){return e&&e.length?ua(e,ci(t,2)):[]},Vn.split=function(e,t,n){return n&&"number"!=typeof n&&xi(e,t,n)&&(t=n=a),(n=n===a?v:n>>>0)?(e=xs(e))&&("string"==typeof t||null!=t&&!ss(t))&&!(t=la(t))&&sn(e)?ka(dn(e),0,n):e.split(t,n):[]},Vn.spread=function(e,t){if("function"!=typeof e)throw new Ee(i);return t=null==t?0:bn(vs(t),0),$r((function(n){var r=n[t],a=ka(n,0,t);return r&&Dt(a,r),Tt(e,this,a)}))},Vn.tail=function(e){var t=null==e?0:e.length;return t?aa(e,1,t):[]},Vn.take=function(e,t,n){return e&&e.length?aa(e,0,(t=n||t===a?1:vs(t))<0?0:t):[]},Vn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?aa(e,(t=r-(t=n||t===a?1:vs(t)))<0?0:t,r):[]},Vn.takeRightWhile=function(e,t){return e&&e.length?da(e,ci(t,3),!1,!0):[]},Vn.takeWhile=function(e,t){return e&&e.length?da(e,ci(t,3)):[]},Vn.tap=function(e,t){return t(e),e},Vn.throttle=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new Ee(i);return ns(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Mo(e,t,{leading:r,maxWait:t,trailing:a})},Vn.thru=mo,Vn.toArray=ds,Vn.toPairs=Ws,Vn.toPairsIn=Vs,Vn.toPath=function(e){return Go(e)?Mt(e,zi):ls(e)?[e]:Aa(Li(xs(e)))},Vn.toPlainObject=bs,Vn.transform=function(e,t,n){var r=Go(e),a=r||Yo(e)||fs(e);if(t=ci(t,4),null==n){var i=e&&e.constructor;n=a?r?new i:[]:ns(e)&&Jo(i)?jn(Ge(e)):{}}return(a?Nt:wr)(e,(function(e,r,a){return t(n,e,r,a)})),n},Vn.unary=function(e){return Eo(e,1)},Vn.union=no,Vn.unionBy=ro,Vn.unionWith=ao,Vn.uniq=function(e){return e&&e.length?fa(e):[]},Vn.uniqBy=function(e,t){return e&&e.length?fa(e,ci(t,2)):[]},Vn.uniqWith=function(e,t){return t="function"==typeof t?t:a,e&&e.length?fa(e,a,t):[]},Vn.unset=function(e,t){return null==e||ha(e,t)},Vn.unzip=io,Vn.unzipWith=oo,Vn.update=function(e,t,n){return null==e?e:pa(e,t,ba(n))},Vn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:pa(e,t,ba(n),r)},Vn.values=js,Vn.valuesIn=function(e){return null==e?[]:Qt(e,Ds(e))},Vn.without=so,Vn.words=Js,Vn.wrap=function(e,t){return Bo(ba(t),e)},Vn.xor=uo,Vn.xorBy=co,Vn.xorWith=lo,Vn.zip=fo,Vn.zipObject=function(e,t){return ga(e||[],t||[],nr)},Vn.zipObjectDeep=function(e,t){return ga(e||[],t||[],ea)},Vn.zipWith=ho,Vn.entries=Ws,Vn.entriesIn=Vs,Vn.extend=ks,Vn.extendWith=Ss,cu(Vn,Vn),Vn.add=bu,Vn.attempt=eu,Vn.camelCase=Us,Vn.capitalize=Hs,Vn.ceil=xu,Vn.clamp=function(e,t,n){return n===a&&(n=t,t=a),n!==a&&(n=(n=ys(n))===n?n:0),t!==a&&(t=(t=ys(t))===t?t:0),ur(ys(e),t,n)},Vn.clone=function(e){return cr(e,4)},Vn.cloneDeep=function(e){return cr(e,5)},Vn.cloneDeepWith=function(e,t){return cr(e,5,t="function"==typeof t?t:a)},Vn.cloneWith=function(e,t){return cr(e,4,t="function"==typeof t?t:a)},Vn.conformsTo=function(e,t){return null==t||lr(e,t,Ms(t))},Vn.deburr=Zs,Vn.defaultTo=function(e,t){return null==e||e!==e?t:e},Vn.divide=wu,Vn.endsWith=function(e,t,n){e=xs(e),t=la(t);var r=e.length,i=n=n===a?r:ur(vs(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},Vn.eq=jo,Vn.escape=function(e){return(e=xs(e))&&$.test(e)?e.replace(X,an):e},Vn.escapeRegExp=function(e){return(e=xs(e))&&ie.test(e)?e.replace(ae,"\\$&"):e},Vn.every=function(e,t,n){var r=Go(e)?Et:mr;return n&&xi(e,t,n)&&(t=a),r(e,ci(t,3))},Vn.find=yo,Vn.findIndex=Hi,Vn.findKey=function(e,t){return Bt(e,ci(t,3),wr)},Vn.findLast=bo,Vn.findLastIndex=Zi,Vn.findLastKey=function(e,t){return Bt(e,ci(t,3),kr)},Vn.floor=ku,Vn.forEach=xo,Vn.forEachRight=wo,Vn.forIn=function(e,t){return null==e?e:br(e,ci(t,3),Ds)},Vn.forInRight=function(e,t){return null==e?e:xr(e,ci(t,3),Ds)},Vn.forOwn=function(e,t){return e&&wr(e,ci(t,3))},Vn.forOwnRight=function(e,t){return e&&kr(e,ci(t,3))},Vn.get=Cs,Vn.gt=Uo,Vn.gte=Ho,Vn.has=function(e,t){return null!=e&&vi(e,t,Cr)},Vn.hasIn=Es,Vn.head=qi,Vn.identity=iu,Vn.includes=function(e,t,n,r){e=Ko(e)?e:js(e),n=n&&!r?vs(n):0;var a=e.length;return n<0&&(n=bn(a+n,0)),cs(e)?n<=a&&e.indexOf(t,n)>-1:!!a&&Vt(e,t,n)>-1},Vn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:vs(n);return a<0&&(a=bn(r+a,0)),Vt(e,t,a)},Vn.inRange=function(e,t,n){return t=ms(t),n===a?(n=t,t=0):n=ms(n),function(e,t,n){return e>=xn(t,n)&&e<bn(t,n)}(e=ys(e),t,n)},Vn.invoke=Os,Vn.isArguments=Zo,Vn.isArray=Go,Vn.isArrayBuffer=qo,Vn.isArrayLike=Ko,Vn.isArrayLikeObject=Xo,Vn.isBoolean=function(e){return!0===e||!1===e||rs(e)&&Ir(e)==x},Vn.isBuffer=Yo,Vn.isDate=$o,Vn.isElement=function(e){return rs(e)&&1===e.nodeType&&!os(e)},Vn.isEmpty=function(e){if(null==e)return!0;if(Ko(e)&&(Go(e)||"string"==typeof e||"function"==typeof e.splice||Yo(e)||fs(e)||Zo(e)))return!e.length;var t=mi(e);if(t==T||t==A)return!e.size;if(_i(e))return!Lr(e).length;for(var n in e)if(Fe.call(e,n))return!1;return!0},Vn.isEqual=function(e,t){return Mr(e,t)},Vn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:a)?n(e,t):a;return r===a?Mr(e,t,a,n):!!r},Vn.isError=Qo,Vn.isFinite=function(e){return"number"==typeof e&&zt(e)},Vn.isFunction=Jo,Vn.isInteger=es,Vn.isLength=ts,Vn.isMap=as,Vn.isMatch=function(e,t){return e===t||Dr(e,t,fi(t))},Vn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:a,Dr(e,t,fi(t),n)},Vn.isNaN=function(e){return is(e)&&e!=+e},Vn.isNative=function(e){if(Si(e))throw new se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Fr(e)},Vn.isNil=function(e){return null==e},Vn.isNull=function(e){return null===e},Vn.isNumber=is,Vn.isObject=ns,Vn.isObjectLike=rs,Vn.isPlainObject=os,Vn.isRegExp=ss,Vn.isSafeInteger=function(e){return es(e)&&e>=-9007199254740991&&e<=d},Vn.isSet=us,Vn.isString=cs,Vn.isSymbol=ls,Vn.isTypedArray=fs,Vn.isUndefined=function(e){return e===a},Vn.isWeakMap=function(e){return rs(e)&&mi(e)==M},Vn.isWeakSet=function(e){return rs(e)&&"[object WeakSet]"==Ir(e)},Vn.join=function(e,t){return null==e?"":Gt.call(e,t)},Vn.kebabCase=Gs,Vn.last=$i,Vn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==a&&(i=(i=vs(n))<0?bn(r+i,0):xn(i,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):Wt(e,Ut,i,!0)},Vn.lowerCase=qs,Vn.lowerFirst=Ks,Vn.lt=hs,Vn.lte=ps,Vn.max=function(e){return e&&e.length?vr(e,iu,Nr):a},Vn.maxBy=function(e,t){return e&&e.length?vr(e,ci(t,2),Nr):a},Vn.mean=function(e){return Ht(e,iu)},Vn.meanBy=function(e,t){return Ht(e,ci(t,2))},Vn.min=function(e){return e&&e.length?vr(e,iu,Br):a},Vn.minBy=function(e,t){return e&&e.length?vr(e,ci(t,2),Br):a},Vn.stubArray=gu,Vn.stubFalse=yu,Vn.stubObject=function(){return{}},Vn.stubString=function(){return""},Vn.stubTrue=function(){return!0},Vn.multiply=Su,Vn.nth=function(e,t){return e&&e.length?Hr(e,vs(t)):a},Vn.noConflict=function(){return pt._===this&&(pt._=We),this},Vn.noop=lu,Vn.now=Co,Vn.pad=function(e,t,n){e=xs(e);var r=(t=vs(t))?pn(e):0;if(!t||r>=t)return e;var a=(t-r)/2;return Za(mt(a),n)+e+Za(dt(a),n)},Vn.padEnd=function(e,t,n){e=xs(e);var r=(t=vs(t))?pn(e):0;return t&&r<t?e+Za(t-r,n):e},Vn.padStart=function(e,t,n){e=xs(e);var r=(t=vs(t))?pn(e):0;return t&&r<t?Za(t-r,n)+e:e},Vn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),kn(xs(e).replace(oe,""),t||0)},Vn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&xi(e,t,n)&&(t=n=a),n===a&&("boolean"==typeof t?(n=t,t=a):"boolean"==typeof e&&(n=e,e=a)),e===a&&t===a?(e=0,t=1):(e=ms(e),t===a?(t=e,e=0):t=ms(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Sn();return xn(e+i*(t-e+ct("1e-"+((i+"").length-1))),t)}return Xr(e,t)},Vn.reduce=function(e,t,n){var r=Go(e)?Ft:qt,a=arguments.length<3;return r(e,ci(t,4),n,a,pr)},Vn.reduceRight=function(e,t,n){var r=Go(e)?Pt:qt,a=arguments.length<3;return r(e,ci(t,4),n,a,dr)},Vn.repeat=function(e,t,n){return t=(n?xi(e,t,n):t===a)?1:vs(t),Yr(xs(e),t)},Vn.replace=function(){var e=arguments,t=xs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Vn.result=function(e,t,n){var r=-1,i=(t=xa(t,e)).length;for(i||(i=1,e=a);++r<i;){var o=null==e?a:e[zi(t[r])];o===a&&(r=i,o=n),e=Jo(o)?o.call(e):o}return e},Vn.round=_u,Vn.runInContext=e,Vn.sample=function(e){return(Go(e)?Qn:Qr)(e)},Vn.size=function(e){if(null==e)return 0;if(Ko(e))return cs(e)?pn(e):e.length;var t=mi(e);return t==T||t==A?e.size:Lr(e).length},Vn.snakeCase=Xs,Vn.some=function(e,t,n){var r=Go(e)?Lt:ia;return n&&xi(e,t,n)&&(t=a),r(e,ci(t,3))},Vn.sortedIndex=function(e,t){return oa(e,t)},Vn.sortedIndexBy=function(e,t,n){return sa(e,t,ci(n,2))},Vn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=oa(e,t);if(r<n&&jo(e[r],t))return r}return-1},Vn.sortedLastIndex=function(e,t){return oa(e,t,!0)},Vn.sortedLastIndexBy=function(e,t,n){return sa(e,t,ci(n,2),!0)},Vn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=oa(e,t,!0)-1;if(jo(e[n],t))return n}return-1},Vn.startCase=Ys,Vn.startsWith=function(e,t,n){return e=xs(e),n=null==n?0:ur(vs(n),0,e.length),t=la(t),e.slice(n,n+t.length)==t},Vn.subtract=Tu,Vn.sum=function(e){return e&&e.length?Kt(e,iu):0},Vn.sumBy=function(e,t){return e&&e.length?Kt(e,ci(t,2)):0},Vn.template=function(e,t,n){var r=Vn.templateSettings;n&&xi(e,t,n)&&(t=a),e=xs(e),t=Ss({},t,r,Ja);var i,o,s=Ss({},t.imports,r.imports,Ja),u=Ms(s),c=Qt(s,u),l=0,f=t.interpolate||ke,h="__p += '",p=Ne((t.escape||ke).source+"|"+f.source+"|"+(f===ee?de:ke).source+"|"+(t.evaluate||ke).source+"|$","g"),d="//# sourceURL="+(Fe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++it+"]")+"\n";e.replace(p,(function(t,n,r,a,s,u){return r||(r=a),h+=e.slice(l,u).replace(Se,on),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),h+="';\n";var m=Fe.call(t,"variable")&&t.variable;if(m){if(he.test(m))throw new se("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(Z,""):h).replace(G,"$1").replace(q,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=eu((function(){return _e(u,d+"return "+h).apply(a,c)}));if(v.source=h,Qo(v))throw v;return v},Vn.times=function(e,t){if((e=vs(e))<1||e>d)return[];var n=v,r=xn(e,v);t=ci(t),e-=v;for(var a=Xt(r,t);++n<e;)t(n);return a},Vn.toFinite=ms,Vn.toInteger=vs,Vn.toLength=gs,Vn.toLower=function(e){return xs(e).toLowerCase()},Vn.toNumber=ys,Vn.toSafeInteger=function(e){return e?ur(vs(e),-9007199254740991,d):0===e?e:0},Vn.toString=xs,Vn.toUpper=function(e){return xs(e).toUpperCase()},Vn.trim=function(e,t,n){if((e=xs(e))&&(n||t===a))return Yt(e);if(!e||!(t=la(t)))return e;var r=dn(e),i=dn(t);return ka(r,en(r,i),tn(r,i)+1).join("")},Vn.trimEnd=function(e,t,n){if((e=xs(e))&&(n||t===a))return e.slice(0,mn(e)+1);if(!e||!(t=la(t)))return e;var r=dn(e);return ka(r,0,tn(r,dn(t))+1).join("")},Vn.trimStart=function(e,t,n){if((e=xs(e))&&(n||t===a))return e.replace(oe,"");if(!e||!(t=la(t)))return e;var r=dn(e);return ka(r,en(r,dn(t))).join("")},Vn.truncate=function(e,t){var n=30,r="...";if(ns(t)){var i="separator"in t?t.separator:i;n="length"in t?vs(t.length):n,r="omission"in t?la(t.omission):r}var o=(e=xs(e)).length;if(sn(e)){var s=dn(e);o=s.length}if(n>=o)return e;var u=n-pn(r);if(u<1)return r;var c=s?ka(s,0,u).join(""):e.slice(0,u);if(i===a)return c+r;if(s&&(u+=c.length-u),ss(i)){if(e.slice(u).search(i)){var l,f=c;for(i.global||(i=Ne(i.source,xs(me.exec(i))+"g")),i.lastIndex=0;l=i.exec(f);)var h=l.index;c=c.slice(0,h===a?u:h)}}else if(e.indexOf(la(i),u)!=u){var p=c.lastIndexOf(i);p>-1&&(c=c.slice(0,p))}return c+r},Vn.unescape=function(e){return(e=xs(e))&&Y.test(e)?e.replace(K,vn):e},Vn.uniqueId=function(e){var t=++Pe;return xs(e)+t},Vn.upperCase=$s,Vn.upperFirst=Qs,Vn.each=xo,Vn.eachRight=wo,Vn.first=qi,cu(Vn,function(){var e={};return wr(Vn,(function(t,n){Fe.call(Vn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Vn.VERSION="4.17.21",Nt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Vn[e].placeholder=Vn})),Nt(["drop","take"],(function(e,t){Zn.prototype[e]=function(n){n=n===a?1:bn(vs(n),0);var r=this.__filtered__&&!t?new Zn(this):this.clone();return r.__filtered__?r.__takeCount__=xn(n,r.__takeCount__):r.__views__.push({size:xn(n,v),type:e+(r.__dir__<0?"Right":"")}),r},Zn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Nt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Zn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ci(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Nt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Zn.prototype[e]=function(){return this[n](1).value()[0]}})),Nt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Zn.prototype[e]=function(){return this.__filtered__?new Zn(this):this[n](1)}})),Zn.prototype.compact=function(){return this.filter(iu)},Zn.prototype.find=function(e){return this.filter(e).head()},Zn.prototype.findLast=function(e){return this.reverse().find(e)},Zn.prototype.invokeMap=$r((function(e,t){return"function"==typeof e?new Zn(this):this.map((function(n){return Rr(n,e,t)}))})),Zn.prototype.reject=function(e){return this.filter(Lo(ci(e)))},Zn.prototype.slice=function(e,t){e=vs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Zn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==a&&(n=(t=vs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Zn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Zn.prototype.toArray=function(){return this.take(v)},wr(Zn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Vn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(Vn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof Zn,c=s[0],l=u||Go(t),f=function(e){var t=i.apply(Vn,Dt([e],s));return r&&h?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var h=this.__chain__,p=!!this.__actions__.length,d=o&&!h,m=u&&!p;if(!o&&l){t=m?t:new Zn(this);var v=e.apply(t,s);return v.__actions__.push({func:mo,args:[f],thisArg:a}),new Hn(v,h)}return d&&m?e.apply(this,s):(v=this.thru(f),d?r?v.value()[0]:v.value():v)})})),Nt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ae[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Vn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var a=this.value();return t.apply(Go(a)?a:[],e)}return this[n]((function(n){return t.apply(Go(n)?n:[],e)}))}})),wr(Zn.prototype,(function(e,t){var n=Vn[t];if(n){var r=n.name+"";Fe.call(On,r)||(On[r]=[]),On[r].push({name:t,func:n})}})),On[Va(a,2).name]=[{name:"wrapper",func:a}],Zn.prototype.clone=function(){var e=new Zn(this.__wrapped__);return e.__actions__=Aa(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Aa(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Aa(this.__views__),e},Zn.prototype.reverse=function(){if(this.__filtered__){var e=new Zn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Zn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Go(e),r=t<0,a=n?e.length:0,i=function(e,t,n){var r=-1,a=n.length;for(;++r<a;){var i=n[r],o=i.size;switch(i.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=xn(t,e+o);break;case"takeRight":e=bn(e,t-o)}}return{start:e,end:t}}(0,a,this.__views__),o=i.start,s=i.end,u=s-o,c=r?s:o-1,l=this.__iteratees__,f=l.length,h=0,p=xn(u,this.__takeCount__);if(!n||!r&&a==u&&p==u)return ma(e,this.__actions__);var d=[];e:for(;u--&&h<p;){for(var m=-1,v=e[c+=t];++m<f;){var g=l[m],y=g.iteratee,b=g.type,x=y(v);if(2==b)v=x;else if(!x){if(1==b)continue e;break e}}d[h++]=v}return d},Vn.prototype.at=vo,Vn.prototype.chain=function(){return po(this)},Vn.prototype.commit=function(){return new Hn(this.value(),this.__chain__)},Vn.prototype.next=function(){this.__values__===a&&(this.__values__=ds(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?a:this.__values__[this.__index__++]}},Vn.prototype.plant=function(e){for(var t,n=this;n instanceof Un;){var r=Wi(n);r.__index__=0,r.__values__=a,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},Vn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Zn){var t=e;return this.__actions__.length&&(t=new Zn(this)),(t=t.reverse()).__actions__.push({func:mo,args:[to],thisArg:a}),new Hn(t,this.__chain__)}return this.thru(to)},Vn.prototype.toJSON=Vn.prototype.valueOf=Vn.prototype.value=function(){return ma(this.__wrapped__,this.__actions__)},Vn.prototype.first=Vn.prototype.head,$e&&(Vn.prototype[$e]=function(){return this}),Vn}();pt._=gn,(r=function(){return gn}.call(t,n,t,e))===a||(e.exports=r)}.call(this)},8987:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(T){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=u(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=u(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?g:v;if(t){if(e<0)return g;if(e>=p)return k}else{if(e<=-d)return S;if(e+1>=d)return w}return e<0?s(-e,t).neg():u(e%h|0,e/h|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=s,n.fromBits=u;var c=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return v;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var a=s(c(n,8)),i=v,o=0;o<e.length;o+=8){var u=Math.min(8,e.length-o),f=parseInt(e.substring(o,o+u),n);if(u<8){var h=s(c(n,u));i=i.mul(h).add(s(f))}else i=(i=i.mul(a)).add(s(f))}return i.unsigned=t,i}function f(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?l(e,t):u(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=f;var h=4294967296,p=h*h,d=p/2,m=o(1<<24),v=o(0);n.ZERO=v;var g=o(0,!0);n.UZERO=g;var y=o(1);n.ONE=y;var b=o(1,!0);n.UONE=b;var x=o(-1);n.NEG_ONE=x;var w=u(-1,2147483647,!1);n.MAX_VALUE=w;var k=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var S=u(0,-2147483648,!1);n.MIN_VALUE=S;var _=n.prototype;_.toInt=function(){return this.unsigned?this.low>>>0:this.low},_.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},_.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(c(e,6),this.unsigned),i=this,o="";;){var u=i.div(a),l=(i.sub(u.mul(a)).toInt()>>>0).toString(e);if((i=u).isZero())return l+o;for(;l.length<6;)l="0"+l;o=""+l+o}},_.getHighBits=function(){return this.high},_.getHighBitsUnsigned=function(){return this.high>>>0},_.getLowBits=function(){return this.low},_.getLowBitsUnsigned=function(){return this.low>>>0},_.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},_.isZero=function(){return 0===this.high&&0===this.low},_.eqz=_.isZero,_.isNegative=function(){return!this.unsigned&&this.high<0},_.isPositive=function(){return this.unsigned||this.high>=0},_.isOdd=function(){return 1===(1&this.low)},_.isEven=function(){return 0===(1&this.low)},_.equals=function(e){return r(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},_.eq=_.equals,_.notEquals=function(e){return!this.eq(e)},_.neq=_.notEquals,_.ne=_.notEquals,_.lessThan=function(e){return this.comp(e)<0},_.lt=_.lessThan,_.lessThanOrEqual=function(e){return this.comp(e)<=0},_.lte=_.lessThanOrEqual,_.le=_.lessThanOrEqual,_.greaterThan=function(e){return this.comp(e)>0},_.gt=_.greaterThan,_.greaterThanOrEqual=function(e){return this.comp(e)>=0},_.gte=_.greaterThanOrEqual,_.ge=_.greaterThanOrEqual,_.compare=function(e){if(r(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},_.comp=_.compare,_.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},_.neg=_.negate,_.add=function(e){r(e)||(e=f(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,c=e.low>>>16,l=0,h=0,p=0,d=0;return p+=(d+=i+(65535&e.low))>>>16,h+=(p+=a+c)>>>16,l+=(h+=n+s)>>>16,l+=t+o,u((p&=65535)<<16|(d&=65535),(l&=65535)<<16|(h&=65535),this.unsigned)},_.subtract=function(e){return r(e)||(e=f(e)),this.add(e.neg())},_.sub=_.subtract,_.multiply=function(e){if(this.isZero())return v;if(r(e)||(e=f(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return v;if(this.eq(S))return e.isOdd()?S:v;if(e.eq(S))return this.isOdd()?S:v;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,i=this.low>>>16,o=65535&this.low,c=e.high>>>16,l=65535&e.high,h=e.low>>>16,p=65535&e.low,d=0,g=0,y=0,b=0;return y+=(b+=o*p)>>>16,g+=(y+=i*p)>>>16,y&=65535,g+=(y+=o*h)>>>16,d+=(g+=a*p)>>>16,g&=65535,d+=(g+=i*h)>>>16,g&=65535,d+=(g+=o*l)>>>16,d+=n*p+a*h+i*l+o*c,u((y&=65535)<<16|(b&=65535),(d&=65535)<<16|(g&=65535),this.unsigned)},_.mul=_.multiply,_.divide=function(e){if(r(e)||(e=f(e)),e.isZero())throw Error("division by zero");var n,a,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:v;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return b;i=g}else{if(this.eq(S))return e.eq(y)||e.eq(x)?S:e.eq(S)?y:(n=this.shr(1).div(e).shl(1)).eq(v)?e.isNegative()?y:x:(a=this.sub(e.mul(n)),i=n.add(a.div(e)));if(e.eq(S))return this.unsigned?g:v;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=v}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),l=o<=48?1:c(2,o-48),h=s(n),p=h.mul(e);p.isNegative()||p.gt(a);)p=(h=s(n-=l,this.unsigned)).mul(e);h.isZero()&&(h=y),i=i.add(h),a=a.sub(p)}return i},_.div=_.divide,_.modulo=function(e){return r(e)||(e=f(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},_.mod=_.modulo,_.rem=_.modulo,_.not=function(){return u(~this.low,~this.high,this.unsigned)},_.and=function(e){return r(e)||(e=f(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},_.or=function(e){return r(e)||(e=f(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},_.xor=function(e){return r(e)||(e=f(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},_.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},_.shl=_.shiftLeft,_.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},_.shr=_.shiftRight,_.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},_.shru=_.shiftRightUnsigned,_.shr_u=_.shiftRightUnsigned,_.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},_.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},_.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},_.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},_.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},1725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,i){for(var o,s,u=a(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(u[l]=o[l]);if(t){s=t(o);for(var f=0;f<s.length;f++)r.call(o,s[f])&&(u[s[f]]=o[s[f]])}}return u}},2450:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=s(n(2791)),i=s(n(4164)),o=n(763);function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.componentDidUpdate=function(e){e.width==n.props.width&&e.height==n.props.height&&e.color==n.props.color&&(0,o.isEqual)(e.peaks,n.props.peaks)||n.updateSize(n.props.width,n.props.height,n.props.peaks)},n.shouldComponentUpdate=function(e,t){return e.width!=n.props.width||e.height!=n.props.height||e.color!=n.props.color||!(0,o.isEqual)(e.peaks,n.props.peaks)},n.clearWave=function(e,t,n){e.clearRect(0,0,t,n)},n.drawBars=function(e,t,r){var a={fillParent:!0,height:n.props.height,normalize:!0,pixelRatio:n.props.pixelRatio,barWidth:n.props.barWidth,color:n.props.color,gradientColors:n.props.gradientColors};if([].some.call(r,(function(e){return e<0}))){var i=0;r[0]<0&&(i=1),r=[].filter.call(r,(function(e,t){return(t+i)%2==0}))}var o=.5/a.pixelRatio,s=(a.height,a.pixelRatio,a.height/2),u=r.length,c=a.barWidth*a.pixelRatio,l=c+Math.max(a.pixelRatio,2),f=1;a.normalize&&(f=n.absMax(r));var h=u/t;if(a.gradientColors){var p=e.createLinearGradient(0,0,t,0);a.gradientColors.forEach((function(e){p.addColorStop(e[0],e[1])})),e.fillStyle=p}else e.fillStyle=a.color;if(e)for(var d=0;d<t;d+=l){var m=Math.round(r[Math.floor(d*h)]/f*s);0===m&&(m=1),e.fillRect(d+o,s-m+0,c+o,2*m)}},n.drawWaves=function(e,t,r){var a={fillParent:!0,height:n.props.height,normalize:!0,pixelRatio:n.props.pixelRatio,color:n.props.color,gradientColors:n.props.gradientColors};if(![].some.call(r,(function(e){return e<0}))){for(var i=[],o=0,s=r.length;o<s;o++)i[2*o]=r[o],i[2*o+1]=-r[o];r=i}var u=.5/a.pixelRatio,c=(a.height,a.pixelRatio,a.height/2),l=~~(r.length/2),f=1;a.fillParent&&t!=l&&(f=t/l);var h=1;if(a.normalize){var p=n.max(r),d=n.min(r);h=-d>p?-d:p}if(a.gradientColors){var m=e.createLinearGradient(0,0,t,0);a.gradientColors.forEach((function(e){m.addColorStop(e[0],e[1])})),e.fillStyle=m}else e.fillStyle=a.color;if(e){e.beginPath(),e.moveTo(u,c+0);for(o=0;o<l;o++){var v=Math.round(r[2*o]/h*c);e.lineTo(o*f+u,c-v+0)}for(o=l-1;o>=0;o--){v=Math.round(r[2*o+1]/h*c);e.lineTo(o*f+u,c-v+0)}e.fill(),e.fillRect(0,c+0-u,t,u)}},n.absMax=function(e){var t=-1/0;for(var n in e){var r=Math.abs(e[n]);r>t&&(t=r)}return t},n.max=function(e){var t=-1/0;for(var n in e)e[n]>t&&(t=e[n]);return t},n.min=function(e){var t=1/0;for(var n in e)e[n]<t&&(t=e[n]);return t},n.updateSize=function(e,t,r){if(r){var a=i.default.findDOMNode(n.wave).getContext("2d"),o=Math.round(e/n.props.pixelRatio),s=Math.round(t/n.props.pixelRatio);a.canvas.width=e,a.canvas.height=t,a.canvas.style.width=o+"px",a.canvas.style.height=s+"px",n.clearWave(a,e,t),n.props.barWidth?n.drawBars(a,e,r):n.drawWaves(a,e,r)}},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"render",value:function(){var e=this;return this.props.peaks?a.default.createElement("canvas",{ref:function(t){e.wave=t}}):null}}]),t}(a.default.Component);u.defaultProps={color:"ccc",width:0,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI},t.default=u},3161:function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=u(n(2791)),i=u(n(4164)),o=n(763),s=u(n(2450));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.componentDidMount=function(){n.resize(),window.addEventListener("resize",n.resize)},n.shouldComponentUpdate=function(e,t){var r=!(0,o.isEqual)(n.state,t),a=!(0,o.isEqual)(n.props.peaks,e.peaks),i=n.props.pos!==e.pos,s=n.props.duration!==e.duration,u=n.props.color!==e.color,c=!(0,o.isEqual)(n.props.gradientColors,e.gradientColors),l=n.props.progressColor!==e.progressColor,f=!(0,o.isEqual)(n.props.progressGradientColors,e.progressGradientColors);return r||a||i||s||u||c||l||f},n.componentWillUnmount=function(){window.removeEventListener("resize",n.resize)},n.handleClick=function(e){var t=e.nativeEvent.offsetX/n.state.width;n.props.onClick(Math.round(t*n.props.duration))},n.max=function(e){var t=-1/0;return e.forEach((function(n){e[n]>t&&(t=e[n])})),t},n.min=function(e){var t=1/0;return e.forEach((function(n){e[n]<t&&(t=e[n])})),t},n.resize=function(){var e=i.default.findDOMNode(n.wrapper).clientWidth;n.setState({width:e,waveWidth:e*n.props.pixelRatio,waveHeight:n.props.height*n.props.pixelRatio})},n.progressWaveStyle=function(){return{position:"absolute",zIndex:2,left:0,top:0,bottom:0,overflow:"hidden",height:n.props.height+"px",width:n.progressWidth()+"px",display:"block",transition:"width "+n.props.transitionDuration+"ms ease-in-out",boxSizing:"border-box"}},n.progressWidth=function(){var e=n.props.pos/n.props.duration;return n.state.width*e},n.state={width:0,waveWidth:0,waveHeight:e.height},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"render",value:function(){var e=this;return a.default.createElement("div",{ref:function(t){e.wrapper=t},onClick:this.handleClick,style:{position:"relative",width:"100%",height:"100%",cursor:"pointer"}},a.default.createElement(s.default,{color:this.props.color,barWidth:this.props.barWidth,gradientColors:this.props.gradientColors,peaks:this.props.peaks,width:this.state.waveWidth,height:this.state.waveHeight}),a.default.createElement("div",{style:this.progressWaveStyle()},a.default.createElement(s.default,{ref:function(t){e.progress=t},className:"progress",barWidth:this.props.barWidth,color:this.props.progressColor,gradientColors:this.props.progressGradientColors,peaks:this.props.peaks,width:this.state.waveWidth,height:this.state.waveHeight})))}}]),t}(a.default.Component);c.defaultProps={height:30,onClick:function(){},pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,progressColor:"#555555",transitionDuration:200},t.Z=c},4463:function(e,t,n){"use strict";var r=n(2791),a=n(1725),i=n(5296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,d={},m={};function v(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function x(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!p.call(m,e)||!p.call(d,e)&&(h.test(e)?m[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);g[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=60103,S=60106,_=60107,T=60108,I=60114,N=60109,C=60110,E=60112,A=60113,R=60120,O=60115,M=60116,D=60121,F=60128,P=60129,L=60130,z=60131;if("function"===typeof Symbol&&Symbol.for){var B=Symbol.for;k=B("react.element"),S=B("react.portal"),_=B("react.fragment"),T=B("react.strict_mode"),I=B("react.profiler"),N=B("react.provider"),C=B("react.context"),E=B("react.forward_ref"),A=B("react.suspense"),R=B("react.suspense_list"),O=B("react.memo"),M=B("react.lazy"),D=B("react.block"),B("react.scope"),F=B("react.opaque.id"),P=B("react.debug_trace_mode"),L=B("react.offscreen"),z=B("react.legacy_hidden")}var W,V="function"===typeof Symbol&&Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=V&&e[V]||e["@@iterator"])?e:null}function U(e){if(void 0===W)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);W=t&&t[1]||""}return"\n"+W+e}var H=!1;function Z(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var a=u.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s])return"\n"+a[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function G(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=Z(e.type,!1);case 11:return e=Z(e.type.render,!1);case 22:return e=Z(e.type._render,!1);case 1:return e=Z(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case S:return"Portal";case I:return"Profiler";case T:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return q(e.type);case D:return q(e._render);case M:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function K(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function X(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=X(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=X(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ae(e,t.type,n):t.hasOwnProperty("defaultValue")&&ae(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ae(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ie(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ce(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function pe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function de(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?pe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ve,ge=(ve=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ve(e,t)}))}:ve);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xe=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function ke(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(be).forEach((function(e){xe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var Se=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Te(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ie(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,Ce=null,Ee=null;function Ae(e){if(e=ra(e)){if("function"!==typeof Ne)throw Error(o(280));var t=e.stateNode;t&&(t=ia(t),Ne(e.stateNode,e.type,t))}}function Re(e){Ce?Ee?Ee.push(e):Ee=[e]:Ce=e}function Oe(){if(Ce){var e=Ce,t=Ee;if(Ee=Ce=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Me(e,t){return e(t)}function De(e,t,n,r,a){return e(t,n,r,a)}function Fe(){}var Pe=Me,Le=!1,ze=!1;function Be(){null===Ce&&null===Ee||(Fe(),Oe())}function We(e,t){var n=e.stateNode;if(null===n)return null;var r=ia(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ve=!1;if(f)try{var je={};Object.defineProperty(je,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(ve){Ve=!1}function Ue(e,t,n,r,a,i,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var He=!1,Ze=null,Ge=!1,qe=null,Ke={onError:function(e){He=!0,Ze=e}};function Xe(e,t,n,r,a,i,o,s,u){He=!1,Ze=null,Ue.apply(Ke,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Qe(e){if(Ye(e)!==e)throw Error(o(188))}function Je(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Qe(a),e;if(i===r)return Qe(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,at,it=!1,ot=[],st=null,ut=null,ct=null,lt=new Map,ft=new Map,ht=[],pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dt(e,t,n,r,a){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:a,targetContainers:[r]}}function mt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function vt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e=dt(t,n,r,a,i),null!==t&&(null!==(t=ra(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function gt(e){var t=na(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void at(e.lanePriority,(function(){i.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ra(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function bt(e,t,n){yt(e)&&n.delete(t)}function xt(){for(it=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ra(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&yt(st)&&(st=null),null!==ut&&yt(ut)&&(ut=null),null!==ct&&yt(ct)&&(ct=null),lt.forEach(bt),ft.forEach(bt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,xt)))}function kt(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&wt(st,e),null!==ut&&wt(ut,e),null!==ct&&wt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)gt(n),null===n.blockedOn&&ht.shift()}function St(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _t={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionend:St("Transition","TransitionEnd")},Tt={},It={};function Nt(e){if(Tt[e])return Tt[e];if(!_t[e])return e;var t,n=_t[e];for(t in n)if(n.hasOwnProperty(t)&&t in It)return Tt[e]=n[t];return e}f&&(It=document.createElement("div").style,"AnimationEvent"in window||(delete _t.animationend.animation,delete _t.animationiteration.animation,delete _t.animationstart.animation),"TransitionEvent"in window||delete _t.transitionend.transition);var Ct=Nt("animationend"),Et=Nt("animationiteration"),At=Nt("animationstart"),Rt=Nt("transitionend"),Ot=new Map,Mt=new Map,Dt=["abort","abort",Ct,"animationEnd",Et,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rt,"transitionEnd","waiting","waiting"];function Ft(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Mt.set(r,t),Ot.set(r,a),c(a,[r])}}(0,i.unstable_now)();var Pt=8;function Lt(e){if(0!==(1&e))return Pt=15,1;if(0!==(2&e))return Pt=14,2;if(0!==(4&e))return Pt=13,4;var t=24&e;return 0!==t?(Pt=12,t):0!==(32&e)?(Pt=11,32):0!==(t=192&e)?(Pt=10,t):0!==(256&e)?(Pt=9,256):0!==(t=3584&e)?(Pt=8,t):0!==(4096&e)?(Pt=7,4096):0!==(t=4186112&e)?(Pt=6,t):0!==(t=62914560&e)?(Pt=5,t):67108864&e?(Pt=4,67108864):0!==(134217728&e)?(Pt=3,134217728):0!==(t=805306368&e)?(Pt=2,t):0!==(1073741824&e)?(Pt=1,1073741824):(Pt=8,e)}function zt(e,t){var n=e.pendingLanes;if(0===n)return Pt=0;var r=0,a=0,i=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==i)r=i,a=Pt=15;else if(0!==(i=134217727&n)){var u=i&~o;0!==u?(r=Lt(u),a=Pt):0!==(s&=i)&&(r=Lt(s),a=Pt)}else 0!==(i=n&~o)?(r=Lt(i),a=Pt):0!==s&&(r=Lt(s),a=Pt);if(0===r)return 0;if(r=n&((0>(r=31-Ht(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Lt(t),a<=Pt)return t;Pt=a}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-Ht(t)),r|=e[n],t&=~a;return r}function Bt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Wt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?Wt(10,t):e;case 10:return 0===(e=Vt(192&~t))?Wt(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&(0===(e=Vt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Vt(e){return e&-e}function jt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ut(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ht(t)]=n}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Zt(e)/Gt|0)|0},Zt=Math.log,Gt=Math.LN2;var qt=i.unstable_UserBlockingPriority,Kt=i.unstable_runWithPriority,Xt=!0;function Yt(e,t,n,r){Le||Fe();var a=Qt,i=Le;Le=!0;try{De(a,e,t,n,r)}finally{(Le=i)||Be()}}function $t(e,t,n,r){Kt(qt,Qt.bind(null,e,t,n,r))}function Qt(e,t,n,r){var a;if(Xt)if((a=0===(4&t))&&0<ot.length&&-1<pt.indexOf(e))e=dt(null,e,t,n,r),ot.push(e);else{var i=Jt(e,t,n,r);if(null===i)a&&mt(e,r);else{if(a){if(-1<pt.indexOf(e))return e=dt(i,e,t,n,r),void ot.push(e);if(function(e,t,n,r,a){switch(t){case"focusin":return st=vt(st,e,t,n,r,a),!0;case"dragenter":return ut=vt(ut,e,t,n,r,a),!0;case"mouseover":return ct=vt(ct,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return lt.set(i,vt(lt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,ft.set(i,vt(ft.get(i)||null,e,t,n,r,a)),!0}return!1}(i,e,t,n,r))return;mt(e,r)}Fr(e,t,r,null,n)}}}function Jt(e,t,n,r){var a=Ie(r);if(null!==(a=na(a))){var i=Ye(a);if(null===i)a=null;else{var o=i.tag;if(13===o){if(null!==(a=$e(i)))return a;a=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return Fr(e,t,r,a,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,a="value"in en?en.value:en.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return nn=a.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?on:sn,this.isPropagationStopped=sn,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=un(hn),dn=a({},hn,{view:0,detail:0}),mn=un(dn),vn=a({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),gn=un(vn),yn=un(a({},vn,{dataTransfer:0})),bn=un(a({},dn,{relatedTarget:0})),xn=un(a({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=a({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=un(wn),Sn=un(a({},hn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Cn(){return Nn}var En=a({},dn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Tn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=un(En),Rn=un(a({},vn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=un(a({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Mn=un(a({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=a({},vn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fn=un(Dn),Pn=[9,13,27,32],Ln=f&&"CompositionEvent"in window,zn=null;f&&"documentMode"in document&&(zn=document.documentMode);var Bn=f&&"TextEvent"in window&&!zn,Wn=f&&(!Ln||zn&&8<zn&&11>=zn),Vn=String.fromCharCode(32),jn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Zn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Kn(e,t,n,r){Re(r),0<(t=Lr(t,"onChange")).length&&(n=new pn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,Yn=null;function $n(e){Er(e,0)}function Qn(e){if($(aa(e)))return e}function Jn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ar(){Xn&&(Xn.detachEvent("onpropertychange",ir),Yn=Xn=null)}function ir(e){if("value"===e.propertyName&&Qn(Yn)){var t=[];if(Kn(t,Yn,e,Ie(e)),e=$n,Le)e(t);else{Le=!0;try{Me(e,t)}finally{Le=!1,Be()}}}}function or(e,t,n){"focusin"===e?(ar(),Yn=n,(Xn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&ar()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Yn)}function ur(e,t){if("click"===e)return Qn(t)}function cr(e,t){if("input"===e||"change"===e)return Qn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function pr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=pr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=pr(r)}}function mr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?mr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function vr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=f&&"documentMode"in document&&11>=document.documentMode,br=null,xr=null,wr=null,kr=!1;function Sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==br||br!==Q(r)||("selectionStart"in(r=br)&&gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&hr(wr,r)||(wr=r,0<(r=Lr(xr,"onSelect")).length&&(t=new pn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}Ft("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ft("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ft(Dt,2);for(var _r="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Tr=0;Tr<_r.length;Tr++)Mt.set(_r[Tr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,s,u,c){if(Xe.apply(this,arguments),He){if(!He)throw Error(o(198));var l=Ze;He=!1,Ze=null,Ge||(Ge=!0,qe=l)}}(r,t,void 0,e),e.currentTarget=null}function Er(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==i&&a.isPropagationStopped())break e;Cr(a,s,c),i=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==i&&a.isPropagationStopped())break e;Cr(a,s,c),i=u}}}if(Ge)throw e=qe,Ge=!1,qe=null,e}function Ar(e,t){var n=oa(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Or(e){e[Rr]||(e[Rr]=!0,s.forEach((function(t){Nr.has(t)||Mr(t,!1,e,null),Mr(t,!0,e,null)})))}function Mr(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=n;if("selectionchange"===e&&9!==n.nodeType&&(i=n.ownerDocument),null!==r&&!t&&Nr.has(e)){if("scroll"!==e)return;a|=2,i=r}var o=oa(i),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(a|=4),Dr(i,e,a,t),o.add(s))}function Dr(e,t,n,r){var a=Mt.get(t);switch(void 0===a?2:a){case 0:a=Yt;break;case 1:a=$t;break;default:a=Qt}n=a.bind(null,t,n,e),a=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Fr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=na(s)))return;if(5===(u=o.tag)||6===u){r=i=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(ze)return e(t,n);ze=!0;try{Pe(e,t,n)}finally{ze=!1,Be()}}((function(){var r=i,a=Ie(n),o=[];e:{var s=Ot.get(e);if(void 0!==s){var u=pn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=An;break;case"focusin":c="focus",u=bn;break;case"focusout":c="blur",u=bn;break;case"beforeblur":case"afterblur":u=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=On;break;case Ct:case Et:case At:u=xn;break;case Rt:u=Mn;break;case"scroll":u=mn;break;case"wheel":u=Fn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Rn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var p,d=r;null!==d;){var m=(p=d).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=We(d,h))&&l.push(Pr(d,m,p)))),f)break;d=d.return}0<l.length&&(s=new u(s,c,null,n,a),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!na(c)&&!c[ea])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?na(c):null)&&(c!==(f=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=gn,m="onMouseLeave",h="onMouseEnter",d="mouse","pointerout"!==e&&"pointerover"!==e||(l=Rn,m="onPointerLeave",h="onPointerEnter",d="pointer"),f=null==u?s:aa(u),p=null==c?s:aa(c),(s=new l(m,d+"leave",u,n,a)).target=f,s.relatedTarget=p,m=null,na(a)===r&&((l=new l(h,d+"enter",c,n,a)).target=p,l.relatedTarget=f,m=l),f=m,u&&c)e:{for(h=c,d=0,p=l=u;p;p=zr(p))d++;for(p=0,m=h;m;m=zr(m))p++;for(;0<d-p;)l=zr(l),d--;for(;0<p-d;)h=zr(h),p--;for(;d--;){if(l===h||null!==h&&l===h.alternate)break e;l=zr(l),h=zr(h)}l=null}else l=null;null!==u&&Br(o,s,u,l,!1),null!==c&&null!==f&&Br(o,f,c,l,!0)}if("select"===(u=(s=r?aa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=Jn;else if(qn(s))if(er)v=cr;else{v=sr;var g=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ur);switch(v&&(v=v(e,r))?Kn(o,v,n,a):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ae(s,"number",s.value)),g=r?aa(r):window,e){case"focusin":(qn(g)||"true"===g.contentEditable)&&(br=g,xr=r,wr=null);break;case"focusout":wr=xr=br=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,Sr(o,n,a);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Sr(o,n,a)}var y;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Zn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Wn&&"ko"!==n.locale&&(Zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Zn&&(y=rn()):(tn="value"in(en=a)?en.value:en.textContent,Zn=!0)),0<(g=Lr(r,b)).length&&(b=new Sn(b,e,null,n,a),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=Hn(n))&&(b.data=y))),(y=Bn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(jn=!0,Vn);case"textInput":return(e=t.data)===Vn&&jn?null:e;default:return null}}(e,n):function(e,t){if(Zn)return"compositionend"===e||!Ln&&Un(e,t)?(e=rn(),nn=tn=en=null,Zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Lr(r,"onBeforeInput")).length&&(a=new Sn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}Er(o,t)}))}function Pr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Lr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=We(e,n))&&r.unshift(Pr(e,i,a)),null!=(i=We(e,t))&&r.push(Pr(e,i,a))),e=e.return}return r}function zr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Br(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(u=We(n,i))&&o.unshift(Pr(n,u,s)):a||null!=(u=We(n,i))&&o.push(Pr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Wr(){}var Vr=null,jr=null;function Ur(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Hr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Zr="function"===typeof setTimeout?setTimeout:void 0,Gr="function"===typeof clearTimeout?clearTimeout:void 0;function qr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Kr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Xr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var $r=Math.random().toString(36).slice(2),Qr="__reactFiber$"+$r,Jr="__reactProps$"+$r,ea="__reactContainer$"+$r,ta="__reactEvents$"+$r;function na(e){var t=e[Qr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ea]||n[Qr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Xr(e);null!==e;){if(n=e[Qr])return n;e=Xr(e)}return t}n=(e=n).parentNode}return null}function ra(e){return!(e=e[Qr]||e[ea])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function aa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ia(e){return e[Jr]||null}function oa(e){var t=e[ta];return void 0===t&&(t=e[ta]=new Set),t}var sa=[],ua=-1;function ca(e){return{current:e}}function la(e){0>ua||(e.current=sa[ua],sa[ua]=null,ua--)}function fa(e,t){ua++,sa[ua]=e.current,e.current=t}var ha={},pa=ca(ha),da=ca(!1),ma=ha;function va(e,t){var n=e.type.contextTypes;if(!n)return ha;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ga(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ya(){la(da),la(pa)}function ba(e,t,n){if(pa.current!==ha)throw Error(o(168));fa(pa,t),fa(da,n)}function xa(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,q(t)||"Unknown",i));return a({},n,r)}function wa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ha,ma=pa.current,fa(pa,e),fa(da,da.current),!0}function ka(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=xa(e,t,ma),r.__reactInternalMemoizedMergedChildContext=e,la(da),la(pa),fa(pa,e)):la(da),fa(da,n)}var Sa=null,_a=null,Ta=i.unstable_runWithPriority,Ia=i.unstable_scheduleCallback,Na=i.unstable_cancelCallback,Ca=i.unstable_shouldYield,Ea=i.unstable_requestPaint,Aa=i.unstable_now,Ra=i.unstable_getCurrentPriorityLevel,Oa=i.unstable_ImmediatePriority,Ma=i.unstable_UserBlockingPriority,Da=i.unstable_NormalPriority,Fa=i.unstable_LowPriority,Pa=i.unstable_IdlePriority,La={},za=void 0!==Ea?Ea:function(){},Ba=null,Wa=null,Va=!1,ja=Aa(),Ua=1e4>ja?Aa:function(){return Aa()-ja};function Ha(){switch(Ra()){case Oa:return 99;case Ma:return 98;case Da:return 97;case Fa:return 96;case Pa:return 95;default:throw Error(o(332))}}function Za(e){switch(e){case 99:return Oa;case 98:return Ma;case 97:return Da;case 96:return Fa;case 95:return Pa;default:throw Error(o(332))}}function Ga(e,t){return e=Za(e),Ta(e,t)}function qa(e,t,n){return e=Za(e),Ia(e,t,n)}function Ka(){if(null!==Wa){var e=Wa;Wa=null,Na(e)}Xa()}function Xa(){if(!Va&&null!==Ba){Va=!0;var e=0;try{var t=Ba;Ga(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ba=null}catch(n){throw null!==Ba&&(Ba=Ba.slice(e+1)),Ia(Oa,Ka),n}finally{Va=!1}}}var Ya=w.ReactCurrentBatchConfig;function $a(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Qa=ca(null),Ja=null,ei=null,ti=null;function ni(){ti=ei=Ja=null}function ri(e){var t=Qa.current;la(Qa),e.type._context._currentValue=t}function ai(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ii(e,t){Ja=e,ti=ei=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Lo=!0),e.firstContext=null)}function oi(e,t){if(ti!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ti=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ei){if(null===Ja)throw Error(o(308));ei=t,Ja.dependencies={lanes:0,firstContext:t,responders:null}}else ei=ei.next=t;return e._currentValue}var si=!1;function ui(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ci(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function li(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fi(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function hi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function pi(e,t,n,r){var i=e.updateQueue;si=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==s&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=i.baseState,s=0,f=l=c=null;;){u=o.lane;var p=o.eventTime;if((r&u)===u){null!==f&&(f=f.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var d=e,m=o;switch(u=t,p=n,m.tag){case 1:if("function"===typeof(d=m.payload)){h=d.call(p,h,u);break e}h=d;break e;case 3:d.flags=-4097&d.flags|64;case 0:if(null===(u="function"===typeof(d=m.payload)?d.call(p,h,u):d)||void 0===u)break e;h=a({},h,u);break e;case 2:si=!0}}null!==o.callback&&(e.flags|=32,null===(u=i.effects)?i.effects=[o]:u.push(o))}else p={eventTime:p,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=p,c=h):f=f.next=p,s|=u;if(null===(o=o.next)){if(null===(u=i.shared.pending))break;o=u.next,u.next=null,i.lastBaseUpdate=u,i.shared.pending=null}}null===f&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=f,Vs|=s,e.lanes=s,e.memoizedState=h}}function di(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(o(191,a));a.call(r)}}}var mi=(new r.Component).refs;function vi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var gi={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hu(),a=pu(e),i=li(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),fi(e,i),du(e,a,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hu(),a=pu(e),i=li(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),fi(e,i),du(e,a,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hu(),r=pu(e),a=li(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),fi(e,a),du(e,r,n)}};function yi(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(a,i))}function bi(e,t,n){var r=!1,a=ha,i=t.contextType;return"object"===typeof i&&null!==i?i=oi(i):(a=ga(t)?ma:pa.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?va(e,a):ha),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=gi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function xi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gi.enqueueReplaceState(t,t.state,null)}function wi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=mi,ui(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=oi(i):(i=ga(t)?ma:pa.current,a.context=va(e,i)),pi(e,n,a,r),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(vi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&gi.enqueueReplaceState(a,a.state,null),pi(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4)}var ki=Array.isArray;function Si(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;t===mi&&(t=r.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function _i(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ti(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Gu(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Yu(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=Si(e,t,n),r.return=e,r):((r=qu(n.type,n.key,n.props,null,e.mode,r)).ref=Si(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$u(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=Ku(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Yu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(n=qu(t.type,t.key,t.props,null,e.mode,n)).ref=Si(e,null,t),n.return=e,n;case S:return(t=$u(t,e.mode,n)).return=e,t}if(ki(t)||j(t))return(t=Ku(t,e.mode,n,null)).return=e,t;_i(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return n.key===a?n.type===_?f(e,t,n.props.children,r,a):c(e,t,n,r):null;case S:return n.key===a?l(e,t,n,r):null}if(ki(n)||j(n))return null!==a?null:f(e,t,n,r,null);_i(e,n)}return null}function d(e,t,n,r,a){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case k:return e=e.get(null===r.key?n:r.key)||null,r.type===_?f(t,e,r.props.children,a,r.key):c(t,e,r,a);case S:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(ki(r)||j(r))return f(t,e=e.get(n)||null,r,a,null);_i(t,r)}return null}function m(a,o,s,u){for(var c=null,l=null,f=o,m=o=0,v=null;null!==f&&m<s.length;m++){f.index>m?(v=f,f=null):v=f.sibling;var g=p(a,f,s[m],u);if(null===g){null===f&&(f=v);break}e&&f&&null===g.alternate&&t(a,f),o=i(g,o,m),null===l?c=g:l.sibling=g,l=g,f=v}if(m===s.length)return n(a,f),c;if(null===f){for(;m<s.length;m++)null!==(f=h(a,s[m],u))&&(o=i(f,o,m),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(a,f);m<s.length;m++)null!==(v=d(f,a,m,s[m],u))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),o=i(v,o,m),null===l?c=v:l.sibling=v,l=v);return e&&f.forEach((function(e){return t(a,e)})),c}function v(a,s,u,c){var l=j(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var f=l=null,m=s,v=s=0,g=null,y=u.next();null!==m&&!y.done;v++,y=u.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=p(a,m,y.value,c);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(a,m),s=i(b,s,v),null===f?l=b:f.sibling=b,f=b,m=g}if(y.done)return n(a,m),l;if(null===m){for(;!y.done;v++,y=u.next())null!==(y=h(a,y.value,c))&&(s=i(y,s,v),null===f?l=y:f.sibling=y,f=y);return l}for(m=r(a,m);!y.done;v++,y=u.next())null!==(y=d(m,a,v,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=i(y,s,v),null===f?l=y:f.sibling=y,f=y);return e&&m.forEach((function(e){return t(a,e)})),l}return function(e,r,i,u){var c="object"===typeof i&&null!==i&&i.type===_&&null===i.key;c&&(i=i.props.children);var l="object"===typeof i&&null!==i;if(l)switch(i.$$typeof){case k:e:{for(l=i.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(i.type===_){n(e,c.sibling),(r=a(c,i.props.children)).return=e,e=r;break e}}else if(c.elementType===i.type){n(e,c.sibling),(r=a(c,i.props)).ref=Si(e,c,i),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}i.type===_?((r=Ku(i.props.children,e.mode,u,i.key)).return=e,e=r):((u=qu(i.type,i.key,i.props,null,e.mode,u)).ref=Si(e,r,i),u.return=e,e=u)}return s(e);case S:e:{for(c=i.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=a(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=$u(i,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof i||"number"===typeof i)return i=""+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,i)).return=e,e=r):(n(e,r),(r=Yu(i,e.mode,u)).return=e,e=r),s(e);if(ki(i))return m(e,r,i,u);if(j(i))return v(e,r,i,u);if(l&&_i(e,i),"undefined"===typeof i&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,q(e.type)||"Component"))}return n(e,r)}}var Ii=Ti(!0),Ni=Ti(!1),Ci={},Ei=ca(Ci),Ai=ca(Ci),Ri=ca(Ci);function Oi(e){if(e===Ci)throw Error(o(174));return e}function Mi(e,t){switch(fa(Ri,t),fa(Ai,e),fa(Ei,Ci),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:de(null,"");break;default:t=de(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}la(Ei),fa(Ei,t)}function Di(){la(Ei),la(Ai),la(Ri)}function Fi(e){Oi(Ri.current);var t=Oi(Ei.current),n=de(t,e.type);t!==n&&(fa(Ai,e),fa(Ei,n))}function Pi(e){Ai.current===e&&(la(Ei),la(Ai))}var Li=ca(0);function zi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bi=null,Wi=null,Vi=!1;function ji(e,t){var n=Hu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ui(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Hi(e){if(Vi){var t=Wi;if(t){var n=t;if(!Ui(e,t)){if(!(t=Kr(n.nextSibling))||!Ui(e,t))return e.flags=-1025&e.flags|2,Vi=!1,void(Bi=e);ji(Bi,n)}Bi=e,Wi=Kr(t.firstChild)}else e.flags=-1025&e.flags|2,Vi=!1,Bi=e}}function Zi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Bi=e}function Gi(e){if(e!==Bi)return!1;if(!Vi)return Zi(e),Vi=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Hr(t,e.memoizedProps))for(t=Wi;t;)ji(e,t),t=Kr(t.nextSibling);if(Zi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Wi=Kr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Wi=null}}else Wi=Bi?Kr(e.stateNode.nextSibling):null;return!0}function qi(){Wi=Bi=null,Vi=!1}var Ki=[];function Xi(){for(var e=0;e<Ki.length;e++)Ki[e]._workInProgressVersionPrimary=null;Ki.length=0}var Yi=w.ReactCurrentDispatcher,$i=w.ReactCurrentBatchConfig,Qi=0,Ji=null,eo=null,to=null,no=!1,ro=!1;function ao(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,a,i){if(Qi=i,Ji=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yi.current=null===e||null===e.memoizedState?Mo:Do,e=n(r,a),ro){i=0;do{if(ro=!1,!(25>i))throw Error(o(301));i+=1,to=eo=null,t.updateQueue=null,Yi.current=Fo,e=n(r,a)}while(ro)}if(Yi.current=Oo,t=null!==eo&&null!==eo.next,Qi=0,to=eo=Ji=null,no=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Ji.memoizedState=to=e:to=to.next=e,to}function uo(){if(null===eo){var e=Ji.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Ji.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Ji.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var u=s=i=null,c=a;do{var l=c.lane;if((Qi&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,i=r):u=u.next=f,Ji.lanes|=l,Vs|=l}c=c.next}while(null!==c&&c!==a);null===u?i=r:u.next=s,lr(r,t.memoizedState)||(Lo=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);lr(i,t.memoizedState)||(Lo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var a=t._workInProgressVersionPrimary;if(null!==a?e=a===r:(e=e.mutableReadLanes,(e=(Qi&e)===e)&&(t._workInProgressVersionPrimary=r,Ki.push(t))),e)return n(t._source);throw Ki.push(t),Error(o(350))}function po(e,t,n,r){var a=Ms;if(null===a)throw Error(o(349));var i=t._getVersion,s=i(t._source),u=Yi.current,c=u.useState((function(){return ho(a,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,p=h.refs,d=p.getSnapshot,m=h.source;h=h.subscribe;var v=Ji;return e.memoizedState={refs:p,source:t,subscribe:r},u.useEffect((function(){p.getSnapshot=n,p.setSnapshot=l;var e=i(t._source);if(!lr(s,e)){e=n(t._source),lr(f,e)||(l(e),e=pu(v),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,o=e;0<o;){var u=31-Ht(o),c=1<<u;r[u]|=e,o&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=pu(v);a.mutableReadLanes|=r&a.pendingLanes}catch(i){n((function(){throw i}))}}))}),[t,r]),lr(d,n)&&lr(m,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Ro.bind(null,Ji,e),c.queue=e,c.baseQueue=null,f=ho(a,t,n),c.memoizedState=c.baseState=f),f}function mo(e,t,n){return po(uo(),e,t,n)}function vo(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ro.bind(null,Ji,e),[t.memoizedState,e]}function go(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ji.updateQueue)?(t={lastEffect:null},Ji.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yo(e){return e={current:e},so().memoizedState=e}function bo(){return uo().memoizedState}function xo(e,t,n,r){var a=so();Ji.flags|=e,a.memoizedState=go(1|t,n,void 0,void 0===r?null:r)}function wo(e,t,n,r){var a=uo();r=void 0===r?null:r;var i=void 0;if(null!==eo){var o=eo.memoizedState;if(i=o.destroy,null!==r&&io(r,o.deps))return void go(t,n,i,r)}Ji.flags|=e,a.memoizedState=go(1|t,n,i,r)}function ko(e,t){return xo(516,4,e,t)}function So(e,t){return wo(516,4,e,t)}function _o(e,t){return wo(4,2,e,t)}function To(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Io(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,To.bind(null,t,e),n)}function No(){}function Co(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Eo(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=Ha();Ga(98>n?98:n,(function(){e(!0)})),Ga(97<n?97:n,(function(){var n=$i.transition;$i.transition=1;try{e(!1),t()}finally{$i.transition=n}}))}function Ro(e,t,n){var r=hu(),a=pu(e),i={lane:a,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===Ji||null!==o&&o===Ji)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(i.eagerReducer=o,i.eagerState=u,lr(u,s))return}catch(c){}du(e,a,r)}}var Oo={readContext:oi,useCallback:ao,useContext:ao,useEffect:ao,useImperativeHandle:ao,useLayoutEffect:ao,useMemo:ao,useReducer:ao,useRef:ao,useState:ao,useDebugValue:ao,useDeferredValue:ao,useTransition:ao,useMutableSource:ao,useOpaqueIdentifier:ao,unstable_isNewReconciler:!1},Mo={readContext:oi,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oi,useEffect:ko,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,xo(4,2,To.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xo(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ro.bind(null,Ji,e),[r.memoizedState,e]},useRef:yo,useState:vo,useDebugValue:No,useDeferredValue:function(e){var t=vo(e),n=t[0],r=t[1];return ko((function(){var t=$i.transition;$i.transition=1;try{r(e)}finally{$i.transition=t}}),[e]),n},useTransition:function(){var e=vo(!1),t=e[0];return yo(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Vi){var e=!1,t=function(e){return{$$typeof:F,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(o(355))})),n=vo(t)[1];return 0===(2&Ji.mode)&&(Ji.flags|=516,go(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return vo(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Do={readContext:oi,useCallback:Co,useContext:oi,useEffect:So,useImperativeHandle:Io,useLayoutEffect:_o,useMemo:Eo,useReducer:lo,useRef:bo,useState:function(){return lo(co)},useDebugValue:No,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return So((function(){var t=$i.transition;$i.transition=1;try{r(e)}finally{$i.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[bo().current,e]},useMutableSource:mo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Fo={readContext:oi,useCallback:Co,useContext:oi,useEffect:So,useImperativeHandle:Io,useLayoutEffect:_o,useMemo:Eo,useReducer:fo,useRef:bo,useState:function(){return fo(co)},useDebugValue:No,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return So((function(){var t=$i.transition;$i.transition=1;try{r(e)}finally{$i.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[bo().current,e]},useMutableSource:mo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Po=w.ReactCurrentOwner,Lo=!1;function zo(e,t,n,r){t.child=null===e?Ni(t,null,n,r):Ii(t,e.child,n,r)}function Bo(e,t,n,r,a){n=n.render;var i=t.ref;return ii(t,a),r=oo(e,t,n,r,i,a),null===e||Lo?(t.flags|=1,zo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,is(e,t,a))}function Wo(e,t,n,r,a,i){if(null===e){var o=n.type;return"function"!==typeof o||Zu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=qu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Vo(e,t,o,r,a,i))}return o=e.child,0===(a&i)&&(a=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(a,r)&&e.ref===t.ref)?is(e,t,i):(t.flags|=1,(e=Gu(o,r)).ref=t.ref,e.return=t,t.child=e)}function Vo(e,t,n,r,a,i){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Lo=!1,0===(i&a))return t.lanes=e.lanes,is(e,t,i);0!==(16384&e.flags)&&(Lo=!0)}return Ho(e,t,n,r,i)}function jo(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},ku(t,n);else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},ku(t,e),null;t.memoizedState={baseLanes:0},ku(t,null!==i?i.baseLanes:n)}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,ku(t,r);return zo(e,t,a,n),t.child}function Uo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ho(e,t,n,r,a){var i=ga(n)?ma:pa.current;return i=va(t,i),ii(t,a),n=oo(e,t,n,r,i,a),null===e||Lo?(t.flags|=1,zo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,is(e,t,a))}function Zo(e,t,n,r,a){if(ga(n)){var i=!0;wa(t)}else i=!1;if(ii(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),bi(t,n,r),wi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oi(c):c=va(t,c=ga(n)?ma:pa.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&xi(t,o,r,c),si=!1;var h=t.memoizedState;o.state=h,pi(t,r,o,a),u=t.memoizedState,s!==r||h!==u||da.current||si?("function"===typeof l&&(vi(t,n,l,r),u=t.memoizedState),(s=si||yi(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ci(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:$a(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=oi(u):u=va(t,u=ga(n)?ma:pa.current);var p=n.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&xi(t,o,r,u),si=!1,h=t.memoizedState,o.state=h,pi(t,r,o,a);var d=t.memoizedState;s!==f||h!==d||da.current||si?("function"===typeof p&&(vi(t,n,p,r),d=t.memoizedState),(c=si||yi(t,n,c,r,h,d,u))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,d,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,d,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Go(e,t,n,r,i,a)}function Go(e,t,n,r,a,i){Uo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return a&&ka(t,n,!1),is(e,t,i);r=t.stateNode,Po.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ii(t,e.child,null,i),t.child=Ii(t,null,s,i)):zo(e,t,s,i),t.memoizedState=r.state,a&&ka(t,n,!0),t.child}function qo(e){var t=e.stateNode;t.pendingContext?ba(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ba(0,t.context,!1),Mi(e,t.containerInfo)}var Ko,Xo,Yo,$o={dehydrated:null,retryLane:0};function Qo(e,t,n){var r,a=t.pendingProps,i=Li.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(i|=1),fa(Li,1&i),null===e?(void 0!==a.fallback&&Hi(t),e=a.children,i=a.fallback,o?(e=Jo(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$o,e):"number"===typeof a.unstable_expectedLoadTime?(e=Jo(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$o,t.lanes=33554432,e):((n=Xu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(a=ts(e,t,a.children,a.fallback,n),o=t.child,i=e.child.memoizedState,o.memoizedState=null===i?{baseLanes:n}:{baseLanes:i.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=$o,a):(n=es(e,t,a.children,n),t.memoizedState=null,n))}function Jo(e,t,n,r){var a=e.mode,i=e.child;return t={mode:"hidden",children:t},0===(2&a)&&null!==i?(i.childLanes=0,i.pendingProps=t):i=Xu(t,a,0,null),n=Ku(n,a,r,null),i.return=e,n.return=e,i.sibling=n,e.child=i,n}function es(e,t,n,r){var a=e.child;return e=a.sibling,n=Gu(a,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,a){var i=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&i)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Gu(o,s),null!==e?r=Gu(e,r):(r=Ku(r,i,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ai(e.return,t)}function rs(e,t,n,r,a,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,lastEffect:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a,o.lastEffect=i)}function as(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(zo(e,t,r.children,n),0!==(2&(r=Li.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fa(Li,r),0===(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===zi(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),rs(t,!1,a,n,i,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===zi(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}rs(t,!0,n,null,i,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function is(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Gu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!Vi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return ga(t.type)&&ya(),null;case 3:return Di(),la(da),la(pa),Xi(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Gi(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Pi(t);var i=Oi(Ri.current);if(n=t.type,null!==e&&null!=t.stateNode)Xo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Oi(Ei.current),Gi(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Qr]=t,r[Jr]=s,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Ir.length;e++)Ar(Ir[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,s),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ar("invalid",r);break;case"textarea":ue(r,s),Ar("invalid",r)}for(var c in _e(n,s),e=null,s)s.hasOwnProperty(c)&&(i=s[c],"children"===c?"string"===typeof i?r.textContent!==i&&(e=["children",i]):"number"===typeof i&&r.textContent!==""+i&&(e=["children",""+i]):u.hasOwnProperty(c)&&null!=i&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":Y(r),re(r,s,!0);break;case"textarea":Y(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Wr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===i.nodeType?i:i.ownerDocument,e===fe&&(e=pe(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Qr]=t,e[Jr]=r,Ko(e,t),t.stateNode=e,c=Te(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),i=r;break;case"iframe":case"object":case"embed":Ar("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ir.length;i++)Ar(Ir[i],e);i=r;break;case"source":Ar("error",e),i=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),i=r;break;case"details":Ar("toggle",e),i=r;break;case"input":ee(e,r),i=J(e,r),Ar("invalid",e);break;case"option":i=ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=a({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":ue(e,r),i=se(e,r),Ar("invalid",e);break;default:i=r}_e(n,i);var l=i;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?ke(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&ge(e,f):"children"===s?"string"===typeof f?("textarea"!==n||""!==f)&&ye(e,f):"number"===typeof f&&ye(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=f&&"onScroll"===s&&Ar("scroll",e):null!=f&&x(e,s,f,c))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Wr)}Ur(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Oi(Ri.current),Oi(Ei.current),Gi(t)?(r=t.stateNode,n=t.memoizedProps,r[Qr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Qr]=t,t.stateNode=r)}return null;case 13:return la(Li),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Gi(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Li.current)?0===zs&&(zs=3):(0!==zs&&3!==zs||(zs=4),null===Ms||0===(134217727&Vs)&&0===(134217727&js)||yu(Ms,Fs))),(r||n)&&(t.flags|=4),null);case 4:return Di(),null===e&&Or(t.stateNode.containerInfo),null;case 10:return ri(t),null;case 19:if(la(Li),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)os(r,!1);else{if(0!==zs||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=zi(e))){for(t.flags|=64,os(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fa(Li,1&Li.current|2),t.child}e=e.sibling}null!==r.tail&&Ua()>Gs&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=zi(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Vi)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ua()-r.renderingStartTime>Gs&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ua(),n.sibling=null,t=Li.current,fa(Li,s?1&t|2:1&t),n):null;case 23:case 24:return Su(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:ga(e.type)&&ya();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Di(),la(da),la(pa),Xi(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Pi(e),null;case 13:return la(Li),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return la(Li),null;case 4:return Di(),null;case 10:return ri(e),null;case 23:case 24:return Su(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Ko=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Xo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Oi(Ei.current);var o,s=null;switch(n){case"input":i=J(e,i),r=J(e,r),s=[];break;case"option":i=ie(e,i),r=ie(e,r),s=[];break;case"select":i=a({},i,{value:void 0}),r=a({},r,{value:void 0}),s=[];break;case"textarea":i=se(e,i),r=se(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Wr)}for(f in _e(n,r),n=null,i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&null!=i[f])if("style"===f){var c=i[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(u.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=i?i[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(u.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Ar("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===F?l.toString():(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}},Yo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fs="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=li(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ys||(Ys=!0,$s=r),ls(0,t)},n}function ps(e,t,n){(n=li(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return ls(0,t),r(a)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Qs?Qs=new Set([this]):Qs.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ds="function"===typeof WeakSet?WeakSet:Set;function ms(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Wu(e,n)}else t.current=null}function vs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:$a(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&qr(t.stateNode.containerInfo))}throw Error(o(163))}function gs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var a=e;r=a.next,0!==(4&(a=a.tag))&&0!==(1&a)&&(Lu(n,e),Pu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:$a(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&di(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}di(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Ur(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&kt(n)))))}throw Error(o(163))}function ys(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var a=n.memoizedProps.style;a=void 0!==a&&null!==a&&a.hasOwnProperty("display")?a.display:null,r.style.display=we("display",a)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function bs(e,t){if(_a&&"function"===typeof _a.onCommitFiberUnmount)try{_a.onCommitFiberUnmount(Sa,t)}catch(i){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,a=r.destroy;if(r=r.tag,void 0!==a)if(0!==(4&r))Lu(t,n);else{r=t;try{a()}catch(i){Wu(r,i)}}n=n.next}while(n!==e)}break;case 1:if(ms(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){Wu(t,i)}break;case 5:ms(t);break;case 4:Ts(e,t)}}function xs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ws(e){return 5===e.tag||3===e.tag||4===e.tag}function ks(e){e:{for(var t=e.return;null!==t;){if(ws(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ws(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Ss(e,n,t):_s(e,n,t)}function Ss(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Wr));else if(4!==r&&null!==(e=e.child))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function _s(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(_s(e,t,n),e=e.sibling;null!==e;)_s(e,t,n),e=e.sibling}function Ts(e,t){for(var n,r,a=t,i=!1;;){if(!i){i=a.return;e:for(;;){if(null===i)throw Error(o(160));switch(n=i.stateNode,i.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}i=i.return}i=!0}if(5===a.tag||6===a.tag){e:for(var s=e,u=a,c=u;;)if(bs(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=a.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){n=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(bs(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(i=!1)}a.sibling.return=a.return,a=a.sibling}}function Is(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var a=null!==e?e.memoizedProps:r;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(n[Jr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Te(e,a),t=Te(e,r),a=0;a<i.length;a+=2){var s=i[a],u=i[a+1];"style"===s?ke(n,u):"dangerouslySetInnerHTML"===s?ge(n,u):"children"===s?ye(n,u):x(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(i=r.value)?oe(n,!!r.multiple,i,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,kt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Zs=Ua(),ys(t.child,!0)),void Ns(t);case 19:return void Ns(t);case 23:case 24:return void ys(t,null!==t.memoizedState)}throw Error(o(163))}function Ns(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ds),t.forEach((function(t){var r=ju.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cs(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Es=Math.ceil,As=w.ReactCurrentDispatcher,Rs=w.ReactCurrentOwner,Os=0,Ms=null,Ds=null,Fs=0,Ps=0,Ls=ca(0),zs=0,Bs=null,Ws=0,Vs=0,js=0,Us=0,Hs=null,Zs=0,Gs=1/0;function qs(){Gs=Ua()+500}var Ks,Xs=null,Ys=!1,$s=null,Qs=null,Js=!1,eu=null,tu=90,nu=[],ru=[],au=null,iu=0,ou=null,su=-1,uu=0,cu=0,lu=null,fu=!1;function hu(){return 0!==(48&Os)?Ua():-1!==su?su:su=Ua()}function pu(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ha()?1:2;if(0===uu&&(uu=Ws),0!==Ya.transition){0!==cu&&(cu=null!==Hs?Hs.pendingLanes:0),e=uu;var t=4186112&~cu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ha(),0!==(4&Os)&&98===e?e=Wt(12,uu):e=Wt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function du(e,t,n){if(50<iu)throw iu=0,ou=null,Error(o(185));if(null===(e=mu(e,t)))return null;Ut(e,t,n),e===Ms&&(js|=t,4===zs&&yu(e,Fs));var r=Ha();1===t?0!==(8&Os)&&0===(48&Os)?bu(e):(vu(e,n),0===Os&&(qs(),Ka())):(0===(4&Os)||98!==r&&99!==r||(null===au?au=new Set([e]):au.add(e)),vu(e,n)),Hs=e}function mu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function vu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Ht(s),c=1<<u,l=i[u];if(-1===l){if(0===(c&r)||0!==(c&a)){l=t,Lt(c);var f=Pt;i[u]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=zt(e,e===Ms?Fs:0),t=Pt,0===r)null!==n&&(n!==La&&Na(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==La&&Na(n)}15===t?(n=bu.bind(null,e),null===Ba?(Ba=[n],Wa=Ia(Oa,Xa)):Ba.push(n),n=La):14===t?n=qa(99,bu.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=qa(n,gu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function gu(e){if(su=-1,cu=uu=0,0!==(48&Os))throw Error(o(327));var t=e.callbackNode;if(Fu()&&e.callbackNode!==t)return null;var n=zt(e,e===Ms?Fs:0);if(0===n)return null;var r=n,a=Os;Os|=16;var i=Iu();for(Ms===e&&Fs===r||(qs(),_u(e,r));;)try{Eu();break}catch(u){Tu(e,u)}if(ni(),As.current=i,Os=a,null!==Ds?r=0:(Ms=null,Fs=0,r=zs),0!==(Ws&js))_u(e,0);else if(0!==r){if(2===r&&(Os|=64,e.hydrate&&(e.hydrate=!1,qr(e.containerInfo)),0!==(n=Bt(e))&&(r=Nu(e,n))),1===r)throw t=Bs,_u(e,0),yu(e,n),vu(e,Ua()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ou(e);break;case 3:if(yu(e,n),(62914560&n)===n&&10<(r=Zs+500-Ua())){if(0!==zt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){hu(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Zr(Ou.bind(null,e),r);break}Ou(e);break;case 4:if(yu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,a=-1;0<n;){var s=31-Ht(n);i=1<<s,(s=r[s])>a&&(a=s),n&=~i}if(n=a,10<(n=(120>(n=Ua()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Es(n/1960))-n)){e.timeoutHandle=Zr(Ou.bind(null,e),n);break}Ou(e);break;default:throw Error(o(329))}}return vu(e,Ua()),e.callbackNode===t?gu.bind(null,e):null}function yu(e,t){for(t&=~Us,t&=~js,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function bu(e){if(0!==(48&Os))throw Error(o(327));if(Fu(),e===Ms&&0!==(e.expiredLanes&Fs)){var t=Fs,n=Nu(e,t);0!==(Ws&js)&&(n=Nu(e,t=zt(e,t)))}else n=Nu(e,t=zt(e,0));if(0!==e.tag&&2===n&&(Os|=64,e.hydrate&&(e.hydrate=!1,qr(e.containerInfo)),0!==(t=Bt(e))&&(n=Nu(e,t))),1===n)throw n=Bs,_u(e,0),yu(e,t),vu(e,Ua()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ou(e),vu(e,Ua()),null}function xu(e,t){var n=Os;Os|=1;try{return e(t)}finally{0===(Os=n)&&(qs(),Ka())}}function wu(e,t){var n=Os;Os&=-2,Os|=8;try{return e(t)}finally{0===(Os=n)&&(qs(),Ka())}}function ku(e,t){fa(Ls,Ps),Ps|=t,Ws|=t}function Su(){Ps=Ls.current,la(Ls)}function _u(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Gr(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ya();break;case 3:Di(),la(da),la(pa),Xi();break;case 5:Pi(r);break;case 4:Di();break;case 13:case 19:la(Li);break;case 10:ri(r);break;case 23:case 24:Su()}n=n.return}Ms=e,Ds=Gu(e.current,null),Fs=Ps=Ws=t,zs=0,Bs=null,Us=js=Vs=0}function Tu(e,t){for(;;){var n=Ds;try{if(ni(),Yi.current=Oo,no){for(var r=Ji.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}no=!1}if(Qi=0,to=eo=Ji=null,ro=!1,Rs.current=null,null===n||null===n.return){zs=1,Bs=t,Ds=null;break}e:{var i=e,o=n.return,s=n,u=t;if(t=Fs,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!==(1&Li.current),h=o;do{var p;if(p=13===h.tag){var d=h.memoizedState;if(null!==d)p=null!==d.dehydrated;else{var m=h.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!f)}}if(p){var v=h.updateQueue;if(null===v){var g=new Set;g.add(c),h.updateQueue=g}else v.add(c);if(0===(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=li(-1,1);y.tag=2,fi(s,y)}s.lanes|=1;break e}u=void 0,s=t;var b=i.pingCache;if(null===b?(b=i.pingCache=new fs,u=new Set,b.set(c,u)):void 0===(u=b.get(c))&&(u=new Set,b.set(c,u)),!u.has(s)){u.add(s);var x=Vu.bind(null,i,c,s);c.then(x,x)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);u=Error((q(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==zs&&(zs=2),u=cs(u,s),h=o;do{switch(h.tag){case 3:i=u,h.flags|=4096,t&=-t,h.lanes|=t,hi(h,hs(0,i,t));break e;case 1:i=u;var w=h.type,k=h.stateNode;if(0===(64&h.flags)&&("function"===typeof w.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Qs||!Qs.has(k)))){h.flags|=4096,t&=-t,h.lanes|=t,hi(h,ps(h,i,t));break e}}h=h.return}while(null!==h)}Ru(n)}catch(S){t=S,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function Iu(){var e=As.current;return As.current=Oo,null===e?Oo:e}function Nu(e,t){var n=Os;Os|=16;var r=Iu();for(Ms===e&&Fs===t||_u(e,t);;)try{Cu();break}catch(a){Tu(e,a)}if(ni(),Os=n,As.current=r,null!==Ds)throw Error(o(261));return Ms=null,Fs=0,zs}function Cu(){for(;null!==Ds;)Au(Ds)}function Eu(){for(;null!==Ds&&!Ca();)Au(Ds)}function Au(e){var t=Ks(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?Ru(e):Ds=t,Rs.current=null}function Ru(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ps)))return void(Ds=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ps)||0===(4&n.mode)){for(var r=0,a=n.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Ds=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===zs&&(zs=5)}function Ou(e){var t=Ha();return Ga(99,Mu.bind(null,e,t)),null}function Mu(e,t){do{Fu()}while(null!==eu);if(0!==(48&Os))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,a=r,i=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<i;){var c=31-Ht(i),l=1<<c;a[c]=0,s[c]=-1,u[c]=-1,i&=~l}if(null!==au&&0===(24&r)&&au.has(e)&&au.delete(e),e===Ms&&(Ds=Ms=null,Fs=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(a=Os,Os|=32,Rs.current=null,Vr=Xt,gr(s=vr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,i=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(I){u=null;break e}var f=0,h=-1,p=-1,d=0,m=0,v=s,g=null;t:for(;;){for(var y;v!==u||0!==i&&3!==v.nodeType||(h=f+i),v!==c||0!==l&&3!==v.nodeType||(p=f+l),3===v.nodeType&&(f+=v.nodeValue.length),null!==(y=v.firstChild);)g=v,v=y;for(;;){if(v===s)break t;if(g===u&&++d===i&&(h=f),g===c&&++m===l&&(p=f),null!==(y=v.nextSibling))break;g=(v=g).parentNode}v=y}u=-1===h||-1===p?null:{start:h,end:p}}else u=null;u=u||{start:0,end:0}}else u=null;jr={focusedElem:s,selectionRange:u},Xt=!1,lu=null,fu=!1,Xs=r;do{try{Du()}catch(I){if(null===Xs)throw Error(o(330));Wu(Xs,I),Xs=Xs.nextEffect}}while(null!==Xs);lu=null,Xs=r;do{try{for(s=e;null!==Xs;){var b=Xs.flags;if(16&b&&ye(Xs.stateNode,""),128&b){var x=Xs.alternate;if(null!==x){var w=x.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&b){case 2:ks(Xs),Xs.flags&=-3;break;case 6:ks(Xs),Xs.flags&=-3,Is(Xs.alternate,Xs);break;case 1024:Xs.flags&=-1025;break;case 1028:Xs.flags&=-1025,Is(Xs.alternate,Xs);break;case 4:Is(Xs.alternate,Xs);break;case 8:Ts(s,u=Xs);var k=u.alternate;xs(u),null!==k&&xs(k)}Xs=Xs.nextEffect}}catch(I){if(null===Xs)throw Error(o(330));Wu(Xs,I),Xs=Xs.nextEffect}}while(null!==Xs);if(w=jr,x=vr(),b=w.focusedElem,s=w.selectionRange,x!==b&&b&&b.ownerDocument&&mr(b.ownerDocument.documentElement,b)){null!==s&&gr(b)&&(x=s.start,void 0===(w=s.end)&&(w=x),"selectionStart"in b?(b.selectionStart=x,b.selectionEnd=Math.min(w,b.value.length)):(w=(x=b.ownerDocument||document)&&x.defaultView||window).getSelection&&(w=w.getSelection(),u=b.textContent.length,k=Math.min(s.start,u),s=void 0===s.end?k:Math.min(s.end,u),!w.extend&&k>s&&(u=s,s=k,k=u),u=dr(b,k),i=dr(b,s),u&&i&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==i.node||w.focusOffset!==i.offset)&&((x=x.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),k>s?(w.addRange(x),w.extend(i.node,i.offset)):(x.setEnd(i.node,i.offset),w.addRange(x))))),x=[];for(w=b;w=w.parentNode;)1===w.nodeType&&x.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<x.length;b++)(w=x[b]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Xt=!!Vr,jr=Vr=null,e.current=n,Xs=r;do{try{for(b=e;null!==Xs;){var S=Xs.flags;if(36&S&&gs(b,Xs.alternate,Xs),128&S){x=void 0;var _=Xs.ref;if(null!==_){var T=Xs.stateNode;Xs.tag,x=T,"function"===typeof _?_(x):_.current=x}}Xs=Xs.nextEffect}}catch(I){if(null===Xs)throw Error(o(330));Wu(Xs,I),Xs=Xs.nextEffect}}while(null!==Xs);Xs=null,za(),Os=a}else e.current=n;if(Js)Js=!1,eu=e,tu=t;else for(Xs=r;null!==Xs;)t=Xs.nextEffect,Xs.nextEffect=null,8&Xs.flags&&((S=Xs).sibling=null,S.stateNode=null),Xs=t;if(0===(r=e.pendingLanes)&&(Qs=null),1===r?e===ou?iu++:(iu=0,ou=e):iu=0,n=n.stateNode,_a&&"function"===typeof _a.onCommitFiberRoot)try{_a.onCommitFiberRoot(Sa,n,void 0,64===(64&n.current.flags))}catch(I){}if(vu(e,Ua()),Ys)throw Ys=!1,e=$s,$s=null,e;return 0!==(8&Os)||Ka(),null}function Du(){for(;null!==Xs;){var e=Xs.alternate;fu||null===lu||(0!==(8&Xs.flags)?et(Xs,lu)&&(fu=!0):13===Xs.tag&&Cs(e,Xs)&&et(Xs,lu)&&(fu=!0));var t=Xs.flags;0!==(256&t)&&vs(e,Xs),0===(512&t)||Js||(Js=!0,qa(97,(function(){return Fu(),null}))),Xs=Xs.nextEffect}}function Fu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Ga(e,zu)}return!1}function Pu(e,t){nu.push(t,e),Js||(Js=!0,qa(97,(function(){return Fu(),null})))}function Lu(e,t){ru.push(t,e),Js||(Js=!0,qa(97,(function(){return Fu(),null})))}function zu(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Os))throw Error(o(331));var t=Os;Os|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var a=n[r],i=n[r+1],s=a.destroy;if(a.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===i)throw Error(o(330));Wu(i,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){a=n[r],i=n[r+1];try{var u=a.create;a.destroy=u()}catch(c){if(null===i)throw Error(o(330));Wu(i,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Os=t,Ka(),!0}function Bu(e,t,n){fi(e,t=hs(0,t=cs(n,t),1)),t=hu(),null!==(e=mu(e,1))&&(Ut(e,1,t),vu(e,t))}function Wu(e,t){if(3===e.tag)Bu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Bu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Qs||!Qs.has(r))){var a=ps(n,e=cs(t,e),1);if(fi(n,a),a=hu(),null!==(n=mu(n,1)))Ut(n,1,a),vu(n,a);else if("function"===typeof r.componentDidCatch&&(null===Qs||!Qs.has(r)))try{r.componentDidCatch(t,e)}catch(i){}break}}n=n.return}}function Vu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hu(),e.pingedLanes|=e.suspendedLanes&n,Ms===e&&(Fs&n)===n&&(4===zs||3===zs&&(62914560&Fs)===Fs&&500>Ua()-Zs?_u(e,0):Us|=n),vu(e,t)}function ju(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ha()?1:2:(0===uu&&(uu=Ws),0===(t=Vt(62914560&~uu))&&(t=4194304))),n=hu(),null!==(e=mu(e,t))&&(Ut(e,t,n),vu(e,n))}function Uu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Hu(e,t,n,r){return new Uu(e,t,n,r)}function Zu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gu(e,t){var n=e.alternate;return null===n?((n=Hu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qu(e,t,n,r,a,i){var s=2;if(r=e,"function"===typeof e)Zu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Ku(n.children,a,i,t);case P:s=8,a|=16;break;case T:s=8,a|=1;break;case I:return(e=Hu(12,n,t,8|a)).elementType=I,e.type=I,e.lanes=i,e;case A:return(e=Hu(13,n,t,a)).type=A,e.elementType=A,e.lanes=i,e;case R:return(e=Hu(19,n,t,a)).elementType=R,e.lanes=i,e;case L:return Xu(n,a,i,t);case z:return(e=Hu(24,n,t,a)).elementType=z,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:s=10;break e;case C:s=9;break e;case E:s=11;break e;case O:s=14;break e;case M:s=16,r=null;break e;case D:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Hu(s,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Ku(e,t,n,r){return(e=Hu(7,e,r,t)).lanes=n,e}function Xu(e,t,n,r){return(e=Hu(23,e,r,t)).elementType=L,e.lanes=n,e}function Yu(e,t,n){return(e=Hu(6,e,null,t)).lanes=n,e}function $u(e,t,n){return(t=Hu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=jt(0),this.expirationTimes=jt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jt(0),this.mutableSourceEagerHydrationData=null}function Ju(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var a=t.current,i=hu(),s=pu(a);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(ga(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var c=n.type;if(ga(c)){n=xa(n,c,u);break e}}n=u}else n=ha;return null===t.context?t.context=n:t.pendingContext=n,(t=li(i,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fi(a,t),du(a,s,i),s}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ac(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Qu(e,t,null!=n&&!0===n.hydrate),t=Hu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ui(t),e[ea]=n.current,Or(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var a=(t=r[e])._getVersion;a=a(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a)}this._internalRoot=n}function ic(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i._internalRoot;if("function"===typeof a){var s=a;a=function(){var e=tc(o);s.call(e)}}ec(t,o,e,a)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ac(e,0,t?{hydrate:!0}:void 0)}(n,r),o=i._internalRoot,"function"===typeof a){var u=a;a=function(){var e=tc(o);u.call(e)}}wu((function(){ec(t,o,e,a)}))}return tc(o)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(t))throw Error(o(200));return Ju(e,t,null,n)}Ks=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||da.current)Lo=!0;else{if(0===(n&r)){switch(Lo=!1,t.tag){case 3:qo(t),qi();break;case 5:Fi(t);break;case 1:ga(t.type)&&wa(t);break;case 4:Mi(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var a=t.type._context;fa(Qa,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Qo(e,t,n):(fa(Li,1&Li.current),null!==(t=is(e,t,n))?t.sibling:null);fa(Li,1&Li.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return as(e,t,n);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),fa(Li,Li.current),r)break;return null;case 23:case 24:return t.lanes=0,jo(e,t,n)}return is(e,t,n)}Lo=0!==(16384&e.flags)}else Lo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=va(t,pa.current),ii(t,n),a=oo(null,t,r,e,a,n),t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ga(r)){var i=!0;wa(t)}else i=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ui(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&vi(t,r,s,e),a.updater=gi,t.stateNode=a,a._reactInternals=t,wi(t,r,e,n),t=Go(null,t,r,!0,i,n)}else t.tag=0,zo(null,t,a,n),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(i=a._init)(a._payload),t.type=a,i=t.tag=function(e){if("function"===typeof e)return Zu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===O)return 14}return 2}(a),e=$a(a,e),i){case 0:t=Ho(null,t,a,e,n);break e;case 1:t=Zo(null,t,a,e,n);break e;case 11:t=Bo(null,t,a,e,n);break e;case 14:t=Wo(null,t,a,$a(a.type,e),r,n);break e}throw Error(o(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ho(e,t,r,a=t.elementType===r?a:$a(r,a),n);case 1:return r=t.type,a=t.pendingProps,Zo(e,t,r,a=t.elementType===r?a:$a(r,a),n);case 3:if(qo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,ci(e,t),pi(t,r,null,n),(r=t.memoizedState.element)===a)qi(),t=is(e,t,n);else{if((i=(a=t.stateNode).hydrate)&&(Wi=Kr(t.stateNode.containerInfo.firstChild),Bi=t,i=Vi=!0),i){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(i=e[a])._workInProgressVersionPrimary=e[a+1],Ki.push(i);for(n=Ni(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else zo(e,t,r,n),qi();t=t.child}return t;case 5:return Fi(t),null===e&&Hi(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,s=a.children,Hr(r,a)?s=null:null!==i&&Hr(r,i)&&(t.flags|=16),Uo(e,t),zo(e,t,s,n),t.child;case 6:return null===e&&Hi(t),null;case 13:return Qo(e,t,n);case 4:return Mi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ii(t,null,r,n):zo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Bo(e,t,r,a=t.elementType===r?a:$a(r,a),n);case 7:return zo(e,t,t.pendingProps,n),t.child;case 8:case 12:return zo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,s=t.memoizedProps,i=a.value;var u=t.type._context;if(fa(Qa,u._currentValue),u._currentValue=i,null!==s)if(u=s.value,0===(i=lr(u,i)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,i):1073741823))){if(s.children===a.children&&!da.current){t=is(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&i)){1===u.tag&&((l=li(-1,n&-n)).tag=2,fi(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ai(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}zo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(i=t.pendingProps).children,ii(t,n),r=r(a=oi(a,i.unstable_observedBits)),t.flags|=1,zo(e,t,r,n),t.child;case 14:return i=$a(a=t.type,t.pendingProps),Wo(e,t,a,i=$a(a.type,i),r,n);case 15:return Vo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:$a(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ga(r)?(e=!0,wa(t)):e=!1,ii(t,n),bi(t,r,a),wi(t,r,a,n),Go(null,t,r,!0,e,n);case 19:return as(e,t,n);case 23:case 24:return jo(e,t,n)}throw Error(o(156,t.tag))},ac.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ac.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ea]=null}))},tt=function(e){13===e.tag&&(du(e,4,hu()),rc(e,4))},nt=function(e){13===e.tag&&(du(e,67108864,hu()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hu(),n=pu(e);du(e,n,t),rc(e,n)}},at=function(e,t){return t()},Ne=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ia(r);if(!a)throw Error(o(90));$(r),ne(r,a)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Me=xu,De=function(e,t,n,r,a){var i=Os;Os|=4;try{return Ga(98,e.bind(null,t,n,r,a))}finally{0===(Os=i)&&(qs(),Ka())}},Fe=function(){0===(49&Os)&&(function(){if(null!==au){var e=au;au=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,vu(e,Ua())}))}Ka()}(),Fu())},Pe=function(e,t){var n=Os;Os|=2;try{return e(t)}finally{0===(Os=n)&&(qs(),Ka())}};var uc={Events:[ra,aa,ia,Re,Oe,Fu,{current:!1}]},cc={findFiberByHostInstance:na,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{Sa=fc.inject(lc),_a=fc}catch(ve){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=sc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Je(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Os;if(0!==(48&n))return e(t);Os|=1;try{if(e)return Ga(99,e.bind(null,t))}finally{Os=n,Ka()}},t.hydrate=function(e,t,n){if(!ic(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ic(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ic(e))throw Error(o(40));return!!e._reactRootContainer&&(wu((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ea]=null}))})),!0)},t.unstable_batchedUpdates=xu,t.unstable_createPortal=function(e,t){return sc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ic(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n,r=Symbol.for("react.element"),a=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case i:case s:case o:case h:case p:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case m:case d:case u:return e;default:return t}}case a:return t}}}n=Symbol.for("react.module.reference"),t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===s||e===o||e===h||e===p||e===v||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===d||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===n||void 0!==e.getModuleId)},t.typeOf=g},7441:function(e,t,n){"use strict";e.exports=n(1372)},7211:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isNative=void 0;var n="undefined"!==typeof window&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition);t.isNative=function(e){return e===n};var r=n;t.default=r},4019:function(e,t,n){"use strict";var r=n(7061).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n(7833))&&a.__esModule?a:{default:a},o=n(1081),s=n(7211);function u(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){u(i,r,a,o,s,"next",e)}function s(e){u(i,r,a,o,s,"throw",e)}o(void 0)}))}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=function(){},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(t),(0,i.default)()&&(this.updateFinalTranscript=(0,o.debounce)(this.updateFinalTranscript,250,!0))}var t,n,a;return t=e,n=[{key:"setSpeechRecognition",value:function(e){var t=!!e&&((0,s.isNative)(e)||(0,o.browserSupportsPolyfills)());t&&(this.disableRecognition(),this.recognition=new e,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(t)}},{key:"subscribe",value:function(e,t){this.subscribers[e]=t}},{key:"unsubscribe",value:function(e){delete this.subscribers[e]}},{key:"emitListeningChange",value:function(e){var t=this;this.listening=e,Object.keys(this.subscribers).forEach((function(n){(0,t.subscribers[n].onListeningChange)(e)}))}},{key:"emitMicrophoneAvailabilityChange",value:function(e){var t=this;this.isMicrophoneAvailable=e,Object.keys(this.subscribers).forEach((function(n){(0,t.subscribers[n].onMicrophoneAvailabilityChange)(e)}))}},{key:"emitTranscriptChange",value:function(e,t){var n=this;Object.keys(this.subscribers).forEach((function(r){(0,n.subscribers[r].onTranscriptChange)(e,t)}))}},{key:"emitClearTranscript",value:function(){var e=this;Object.keys(this.subscribers).forEach((function(t){(0,e.subscribers[t].onClearTranscript)()}))}},{key:"emitBrowserSupportsSpeechRecognitionChange",value:function(e){var t=this;Object.keys(this.subscribers).forEach((function(n){var r=t.subscribers[n],a=r.onBrowserSupportsSpeechRecognitionChange,i=r.onBrowserSupportsContinuousListeningChange;a(e),i(e)}))}},{key:"disconnect",value:function(e){if(this.recognition&&this.listening)switch(e){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;default:this.pauseAfterDisconnect=!0,this.stop()}}},{key:"disableRecognition",value:function(){this.recognition&&(this.recognition.onresult=function(){},this.recognition.onend=function(){},this.recognition.onerror=function(){},this.listening&&this.stopListening())}},{key:"onError",value:function(e){e&&e.error&&"not-allowed"===e.error&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}},{key:"onRecognitionDisconnect",value:function(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}},{key:"updateTranscript",value:function(e){var t=e.results,n=e.resultIndex,r=void 0===n?t.length-1:n;this.interimTranscript="",this.finalTranscript="";for(var a=r;a<t.length;++a)t[a].isFinal&&(!(0,i.default)()||t[a][0].confidence>0)?this.updateFinalTranscript(t[a][0].transcript):this.interimTranscript=(0,o.concatTranscripts)(this.interimTranscript,t[a][0].transcript);var s=!1;""===this.interimTranscript&&""!==this.finalTranscript?(this.previousResultWasFinalOnly&&(s=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,s||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}},{key:"updateFinalTranscript",value:function(e){this.finalTranscript=(0,o.concatTranscripts)(this.finalTranscript,e)}},{key:"resetTranscript",value:function(){this.disconnect("RESET")}},{key:"startListening",value:function(){var e=c(r().mark((function e(){var t,n,a,i,o,s,u=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},n=t.continuous,a=void 0!==n&&n,i=t.language,this.recognition){e.next=3;break}return e.abrupt("return");case 3:if(o=a!==this.recognition.continuous,s=i&&i!==this.recognition.lang,!o&&!s){e.next=11;break}if(!this.listening){e.next=9;break}return e.next=9,this.stopListening();case 9:this.recognition.continuous=o?a:this.recognition.continuous,this.recognition.lang=s?i:this.recognition.lang;case 11:if(this.listening){e.next=22;break}return this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript()),e.prev=13,e.next=16,this.start();case 16:this.emitListeningChange(!0),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(13),e.t0 instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1);case 22:case"end":return e.stop()}}),e,this,[[13,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"abortListening",value:function(){var e=c(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.disconnect("ABORT"),this.emitListeningChange(!1),e.next=4,new Promise((function(e){t.onStopListening=e}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stopListening",value:function(){var e=c(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.disconnect("STOP"),this.emitListeningChange(!1),e.next=4,new Promise((function(e){t.onStopListening=e}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRecognition",value:function(){return this.recognition}},{key:"start",value:function(){var e=c(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.recognition||this.listening){e.next=4;break}return e.next=3,this.recognition.start();case 3:this.listening=!0;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}},{key:"abort",value:function(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}}],n&&l(t.prototype,n),a&&l(t,a),e}();t.default=f},6212:function(e,t,n){"use strict";var r=n(7061).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.useSpeechRecognition=void 0;var a=n(2791),i=n(1081),o=n(2550),s=n(5453),u=f(n(4019)),c=f(n(7833)),l=f(n(7211));function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){h(i,r,a,o,s,"next",e)}function s(e){h(i,r,a,o,s,"throw",e)}o(void 0)}))}}function d(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e){return m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b,x=!!l.default,w=x&&!(0,c.default)();t.useSpeechRecognition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.transcribing,n=void 0===t||t,r=e.clearTranscriptOnListen,u=void 0===r||r,c=e.commands,l=void 0===c?[]:c,f=(0,a.useState)(k.getRecognitionManager()),h=v(f,1),p=h[0],g=(0,a.useState)(x),y=v(g,2),b=y[0],S=y[1],_=(0,a.useState)(w),T=v(_,2),I=T[0],N=T[1],C=(0,a.useReducer)(s.transcriptReducer,{interimTranscript:p.interimTranscript,finalTranscript:""}),E=v(C,2),A=E[0],R=A.interimTranscript,O=A.finalTranscript,M=E[1],D=(0,a.useState)(p.listening),F=v(D,2),P=F[0],L=F[1],z=(0,a.useState)(p.isMicrophoneAvailable),B=v(z,2),W=B[0],V=B[1],j=(0,a.useRef)(l);j.current=l;var U=function(){M((0,o.clearTranscript)())},H=(0,a.useCallback)((function(){p.resetTranscript(),U()}),[p]),Z=function(e,t,n){var r=("object"===m(e)?e.toString():e).replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),a=(0,i.compareTwoStringsUsingDiceCoefficient)(r,t);return a>=n?{command:e,commandWithoutSpecials:r,howSimilar:a,isFuzzyMatch:!0}:null},G=function(e,t){var n=(0,i.commandToRegExp)(e).exec(t);return n?{command:e,parameters:n.slice(1)}:null},q=(0,a.useCallback)((function(e,t){j.current.forEach((function(n){var r=n.command,a=n.callback,i=n.matchInterim,o=void 0!==i&&i,s=n.isFuzzyMatch,u=void 0!==s&&s,c=n.fuzzyMatchingThreshold,l=void 0===c?.8:c,f=n.bestMatchOnly,h=void 0!==f&&f,p=!t&&o?e.trim():t.trim(),m=(Array.isArray(r)?r:[r]).map((function(e){return u?Z(e,p,l):G(e,p)})).filter((function(e){return e}));if(u&&h&&m.length>=2){m.sort((function(e,t){return t.howSimilar-e.howSimilar}));var v=m[0],g=v.command,y=v.commandWithoutSpecials,b=v.howSimilar;a(y,p,b,{command:g,resetTranscript:H})}else m.forEach((function(e){if(e.isFuzzyMatch){var t=e.command,n=e.commandWithoutSpecials,r=e.howSimilar;a(n,p,r,{command:t,resetTranscript:H})}else{var i=e.command,o=e.parameters;a.apply(void 0,d(o).concat([{command:i,resetTranscript:H}]))}}))}))}),[H]),K=(0,a.useCallback)((function(e,t){n&&M((0,o.appendTranscript)(e,t)),q(e,t)}),[q,n]),X=(0,a.useCallback)((function(){u&&U()}),[u]);(0,a.useEffect)((function(){var e=k.counter;k.counter+=1;var t={onListeningChange:L,onMicrophoneAvailabilityChange:V,onTranscriptChange:K,onClearTranscript:X,onBrowserSupportsSpeechRecognitionChange:S,onBrowserSupportsContinuousListeningChange:N};return p.subscribe(e,t),function(){p.unsubscribe(e)}}),[n,u,p,K,X]);var Y=(0,i.concatTranscripts)(O,R);return{transcript:Y,interimTranscript:R,finalTranscript:O,listening:P,isMicrophoneAvailable:W,resetTranscript:H,browserSupportsSpeechRecognition:b,browserSupportsContinuousListening:I}};var k={counter:0,applyPolyfill:function(e){b?b.setSpeechRecognition(e):b=new u.default(e);var t=!!e&&(0,i.browserSupportsPolyfills)();x=t,w=t},removePolyfill:function(){b?b.setSpeechRecognition(l.default):b=new u.default(l.default),x=!!l.default,w=x&&!(0,c.default)()},getRecognitionManager:function(){return b||(b=new u.default(l.default)),b},getRecognition:function(){return k.getRecognitionManager().getRecognition()},startListening:function(){var e=p(r().mark((function e(){var t,n,a,i,o=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=t.continuous,a=t.language,i=k.getRecognitionManager(),e.next=4,i.startListening({continuous:n,language:a});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),stopListening:function(){var e=p(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.getRecognitionManager(),e.next=3,t.stopListening();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),abortListening:function(){var e=p(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.getRecognitionManager(),e.next=3,t.abortListening();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),browserSupportsSpeechRecognition:function(){return x},browserSupportsContinuousListening:function(){return w}},S=k;t.default=S},2550:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appendTranscript=t.clearTranscript=void 0;var r=n(695);t.clearTranscript=function(){return{type:r.CLEAR_TRANSCRIPT}};t.appendTranscript=function(e,t){return{type:r.APPEND_TRANSCRIPT,payload:{interimTranscript:e,finalTranscript:t}}}},695:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APPEND_TRANSCRIPT=t.CLEAR_TRANSCRIPT=void 0;t.CLEAR_TRANSCRIPT="CLEAR_TRANSCRIPT";t.APPEND_TRANSCRIPT="APPEND_TRANSCRIPT"},5801:function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"x6",{enumerable:!0,get:function(){return a.useSpeechRecognition}}),t.ZP=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(6212));function i(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}var o=a.default;t.ZP=o},7833:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(){return/(android)/i.test("undefined"!==typeof navigator?navigator.userAgent:"")}},5453:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transcriptReducer=void 0;var r=n(695),a=n(1081);t.transcriptReducer=function(e,t){switch(t.type){case r.CLEAR_TRANSCRIPT:return{interimTranscript:"",finalTranscript:""};case r.APPEND_TRANSCRIPT:return{interimTranscript:t.payload.interimTranscript,finalTranscript:(0,a.concatTranscripts)(e.finalTranscript,t.payload.finalTranscript)};default:throw new Error}}},1081:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserSupportsPolyfills=t.compareTwoStringsUsingDiceCoefficient=t.commandToRegExp=t.concatTranscripts=t.debounce=void 0;t.debounce=function(e,t,n){var r;return function(){var a=this,i=arguments,o=function(){r=null,n||e.apply(a,i)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(a,i)}};t.concatTranscripts=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return e.trim()})).join(" ").trim()};var n=/\s*\((.*?)\)\s*/g,r=/(\(\?:[^)]+\))\?/g,a=/(\(\?)?:\w+/g,i=/\*/g,o=/[-{}[\]+?.,\\^$|#]/g;t.commandToRegExp=function(e){return e instanceof RegExp?new RegExp(e.source,"i"):(e=e.replace(o,"\\$&").replace(n,"(?:$1)?").replace(a,(function(e,t){return t?e:"([^\\s]+)"})).replace(i,"(.*?)").replace(r,"\\s*$1?\\s*"),new RegExp("^"+e+"$","i"))};t.compareTwoStringsUsingDiceCoefficient=function(e,t){if(e=e.replace(/\s+/g,"").toLowerCase(),t=t.replace(/\s+/g,"").toLowerCase(),!e.length&&!t.length)return 1;if(!e.length||!t.length)return 0;if(e===t)return 1;if(1===e.length&&1===t.length)return 0;if(e.length<2||t.length<2)return 0;for(var n=new Map,r=0;r<e.length-1;r++){var a=e.substring(r,r+2),i=n.has(a)?n.get(a)+1:1;n.set(a,i)}for(var o=0,s=0;s<t.length-1;s++){var u=t.substring(s,s+2),c=n.has(u)?n.get(u):0;c>0&&(n.set(u,c-1),o++)}return 2*o/(e.length+t.length-2)};t.browserSupportsPolyfills=function(){return"undefined"!==typeof window&&void 0!==window.navigator&&void 0!==window.navigator.mediaDevices&&void 0!==window.navigator.mediaDevices.getUserMedia&&(void 0!==window.AudioContext||void 0!==window.webkitAudioContext)}},1146:function(e,t,n){var r,a;"undefined"!=typeof self&&self,e.exports=(r=n(2791),a=n(4164),function(){"use strict";var e={655:function(e,t,n){n.r(t),n.d(t,{__extends:function(){return a},__assign:function(){return i},__rest:function(){return o},__decorate:function(){return s},__param:function(){return u},__metadata:function(){return c},__awaiter:function(){return l},__generator:function(){return f},__createBinding:function(){return h},__exportStar:function(){return p},__values:function(){return d},__read:function(){return m},__spread:function(){return v},__spreadArrays:function(){return g},__spreadArray:function(){return y},__await:function(){return b},__asyncGenerator:function(){return x},__asyncDelegator:function(){return w},__asyncValues:function(){return k},__makeTemplateObject:function(){return S},__importStar:function(){return T},__importDefault:function(){return I},__classPrivateFieldGet:function(){return N},__classPrivateFieldSet:function(){return C},__classPrivateFieldIn:function(){return E}});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function s(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function f(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}var h=Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function p(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||h(t,e,n)}function d(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function g(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,a++)r[a]=i[o];return r}function y(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function x(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,a=n.apply(e,t||[]),i=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){a[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=a[e](t)).value instanceof b?Promise.resolve(n.value.v).then(u,c):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,a){t[r]=e[r]?function(t){return(n=!n)?{value:b(e[r](t)),done:"return"===r}:a?a(t):t}:a}}function k(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=d(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,a){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,a,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var _=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&h(t,e,n);return _(t,e),t}function I(e){return e&&e.__esModule?e:{default:e}}function N(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function C(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n}function E(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}},156:function(e){e.exports=r},111:function(e){e.exports=a}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return function(){var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.useReactToPrint=e.PrintContextConsumer=void 0;var t=n(655),r=n(156),a=n(111),o=Object.prototype.hasOwnProperty.call(r,"createContext"),s=Object.prototype.hasOwnProperty.call(r,"useMemo")&&Object.prototype.hasOwnProperty.call(r,"useCallback"),u=o?r.createContext({}):null;e.PrintContextConsumer=u?u.Consumer:function(){return null};var c={copyStyles:!0,pageStyle:"@page { size: auto;  margin: 0mm; } @media print { body { -webkit-print-color-adjust: exact; } }",removeAfterPrint:!1,suppressErrors:!1},l=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.startPrint=function(e){var t=n.props,r=t.onAfterPrint,a=t.onPrintError,i=t.print,o=t.documentTitle;setTimeout((function(){var t,s;if(e.contentWindow){if(e.contentWindow.focus(),i)i(e).then(n.handleRemoveIframe).catch((function(e){a?a("print",e):n.logMessages(["An error was thrown by the specified `print` function"])}));else if(e.contentWindow.print){var u=null!==(s=null===(t=e.contentDocument)||void 0===t?void 0:t.title)&&void 0!==s?s:"",c=e.ownerDocument.title;o&&(e.ownerDocument.title=o,e.contentDocument&&(e.contentDocument.title=o)),e.contentWindow.print(),o&&(e.ownerDocument.title=c,e.contentDocument&&(e.contentDocument.title=u))}else n.logMessages(["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."]);r&&r(),n.handleRemoveIframe()}else n.logMessages(["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/gregnb/react-to-print/issues/"])}),500)},n.triggerPrint=function(e){var t=n.props,r=t.onBeforePrint,a=t.onPrintError;if(r){var i=r();i&&"function"==typeof i.then?i.then((function(){n.startPrint(e)})).catch((function(e){a&&a("onBeforePrint",e)})):n.startPrint(e)}else n.startPrint(e)},n.handleClick=function(){var e=n.props,t=e.onBeforeGetContent,r=e.onPrintError;if(t){var a=t();a&&"function"==typeof a.then?a.then(n.handlePrint).catch((function(e){r&&r("onBeforeGetContent",e)})):n.handlePrint()}else n.handlePrint()},n.handlePrint=function(){var e=n.props,r=e.bodyClass,i=e.content,o=e.copyStyles,s=e.fonts,u=e.pageStyle,c=e.nonce,l=i();if(void 0!==l)if(null!==l){var f=document.createElement("iframe");f.style.position="absolute",f.style.top="-1000px",f.style.left="-1000px",f.id="printWindow",f.srcdoc="<!DOCTYPE html>";var h=(0,a.findDOMNode)(l);if(h){var p=h.cloneNode(!0),d=p instanceof Text,m=document.querySelectorAll("link[rel='stylesheet']"),v=d?[]:p.querySelectorAll("img"),g=d?[]:p.querySelectorAll("video");n.linkTotal=m.length+v.length+g.length,n.linksLoaded=[],n.linksErrored=[],n.fontsLoaded=[],n.fontsErrored=[];var y=function(e,t){t?n.linksLoaded.push(e):(n.logMessages(['"react-to-print" was unable to load a linked node. It may be invalid. "react-to-print" will continue attempting to print the page. The linked node that errored was:',e]),n.linksErrored.push(e)),n.linksLoaded.length+n.linksErrored.length+n.fontsLoaded.length+n.fontsErrored.length===n.linkTotal&&n.triggerPrint(f)};f.onload=function(){var e,a,i,l;f.onload=null;var m=f.contentDocument||(null===(a=f.contentWindow)||void 0===a?void 0:a.document);if(m){m.body.appendChild(p),s&&((null===(i=f.contentDocument)||void 0===i?void 0:i.fonts)&&(null===(l=f.contentWindow)||void 0===l?void 0:l.FontFace)?s.forEach((function(e){var t=new FontFace(e.family,e.source);f.contentDocument.fonts.add(t),t.loaded.then((function(e){n.fontsLoaded.push(e)})).catch((function(e){n.fontsErrored.push(t),n.logMessages(['"react-to-print" was unable to load a font. "react-to-print" will continue attempting to print the page. The font that failed to load is:',t,"The error from loading the font is:",e])}))})):n.logMessages(['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API']));var b="function"==typeof u?u():u;if("string"!=typeof b)n.logMessages(['"react-to-print" expected a "string" from `pageStyle` but received "'.concat(typeof b,'". Styles from `pageStyle` will not be applied.')]);else{var x=m.createElement("style");c&&(x.setAttribute("nonce",c),m.head.setAttribute("nonce",c)),x.appendChild(m.createTextNode(b)),m.head.appendChild(x)}if(r&&(e=m.body.classList).add.apply(e,(0,t.__spreadArray)([],(0,t.__read)(r.split(" ")),!1)),!d){for(var w=d?[]:h.querySelectorAll("canvas"),k=m.querySelectorAll("canvas"),S=0;S<w.length;++S){var _=w[S],T=k[S].getContext("2d");T&&T.drawImage(_,0,0)}for(S=0;S<v.length;S++){var I=v[S],N=I.getAttribute("src");N?((E=new Image).onload=y.bind(null,I,!0),E.onerror=y.bind(null,I,!1),E.src=N):(n.logMessages(['"react-to-print" encountered an <img> tag with an empty "src" attribute. It will not attempt to pre-load it. The <img> is:',I],"warning"),y(I,!1))}for(S=0;S<g.length;S++){var C=g[S];C.preload="auto";var E,A=C.getAttribute("poster");A?((E=new Image).onload=y.bind(null,C,!0),E.onerror=y.bind(null,C,!1),E.src=A):C.readyState>=2?y(C,!0):(C.onloadeddata=y.bind(null,C,!0),C.onerror=y.bind(null,C,!1),C.onstalled=y.bind(null,C,!1))}var R="input",O=h.querySelectorAll(R),M=m.querySelectorAll(R);for(S=0;S<O.length;S++)M[S].value=O[S].value;var D="input[type=checkbox],input[type=radio]",F=h.querySelectorAll(D),P=m.querySelectorAll(D);for(S=0;S<F.length;S++)P[S].checked=F[S].checked;var L="select",z=h.querySelectorAll(L),B=m.querySelectorAll(L);for(S=0;S<z.length;S++)B[S].value=z[S].value}if(o)for(var W=document.querySelectorAll("style, link[rel='stylesheet']"),V=(S=0,W.length);S<V;++S){var j=W[S];if("style"===j.tagName.toLowerCase()){var U=m.createElement(j.tagName),H=j.sheet;if(H){var Z="";try{for(var G=H.cssRules.length,q=0;q<G;++q)"string"==typeof H.cssRules[q].cssText&&(Z+="".concat(H.cssRules[q].cssText,"\r\n"))}catch(e){n.logMessages(["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/gregnb/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",j],"warning")}U.setAttribute("id","react-to-print-".concat(S)),c&&U.setAttribute("nonce",c),U.appendChild(m.createTextNode(Z)),m.head.appendChild(U)}}else if(j.getAttribute("href"))if(j.hasAttribute("disabled"))n.logMessages(["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",j],"warning"),y(j,!0);else{U=m.createElement(j.tagName),q=0;for(var K=j.attributes.length;q<K;++q){var X=j.attributes[q];X&&U.setAttribute(X.nodeName,X.nodeValue||"")}U.onload=y.bind(null,U,!0),U.onerror=y.bind(null,U,!1),c&&U.setAttribute("nonce",c),m.head.appendChild(U)}else n.logMessages(["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",j],"warning"),y(j,!0)}}0!==n.linkTotal&&o||n.triggerPrint(f)},n.handleRemoveIframe(!0),document.body.appendChild(f)}else n.logMessages(['"react-to-print" could not locate the DOM node corresponding with the `content` prop'])}else n.logMessages(['There is nothing to print because the "content" prop returned "null". Please ensure "content" is renderable before allowing "react-to-print" to be called.']);else n.logMessages(["To print a functional component ensure it is wrapped with `React.forwardRef`, and ensure the forwarded ref is used. See the README for an example: https://github.com/gregnb/react-to-print#examples"])},n.handleRemoveIframe=function(e){var t=n.props.removeAfterPrint;if(e||t){var r=document.getElementById("printWindow");r&&document.body.removeChild(r)}},n.logMessages=function(e,t){void 0===t&&(t="error"),n.props.suppressErrors||("error"===t?console.error(e):"warning"===t?console.warn(e):"debug"===t&&console.debug(e))},n}return(0,t.__extends)(n,e),n.prototype.render=function(){var e=this.props,t=e.children,n=e.trigger;if(n)return r.cloneElement(n(),{onClick:this.handleClick});if(!u)return this.logMessages(['"react-to-print" requires React ^16.3.0 to be able to use "PrintContext"']),null;var a={handlePrint:this.handleClick};return r.createElement(u.Provider,{value:a},t)},n.defaultProps=c,n}(r.Component);e.default=l,e.useReactToPrint=function(e){if(!s)return e.suppressErrors||console.error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"'),function(){throw new Error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"')};var n=r.useMemo((function(){return new l((0,t.__assign)((0,t.__assign)({},c),e))}),[e]);return r.useCallback((function(){return n.handleClick()}),[n])}}(),i}())},6374:function(e,t,n){"use strict";n(1725);var r=n(2791),a=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var i=Symbol.for;a=i("react.element"),i("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:l,props:i,_owner:o.current}}t.jsx=c,t.jsxs=c},9117:function(e,t,n){"use strict";var r=n(1725),a=60103,i=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;a=f("react.element"),i=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),s=f("react.context"),u=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||d}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||d}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=v.prototype;var b=y.prototype=new g;b.constructor=y,r(b,v.prototype),b.isPureReactComponent=!0;var x={current:null},w=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!k.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:a,type:e,key:o,ref:s,props:i,_owner:x.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case a:case i:u=!0}}if(u)return o=o(u=e),e=""===r?"."+I(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(T,"$&/")+"/"),N(o,t,n,"",(function(e){return e}))):null!=o&&(_(o)&&(o=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+I(s=e[c],c);u+=N(s,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=N(s=s.value,t,n,l=r+I(s,c++),o);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function C(e,t,n){if(null==e)return e;var r=[],a=0;return N(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function E(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function R(){var e=A.current;if(null===e)throw Error(p(321));return e}var O={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error(p(143));return e}},t.Component=v,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(p(267,e));var i=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=x.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!k.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:a,type:e.type,key:o,ref:s,props:i,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:E}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},2791:function(e,t,n){"use strict";e.exports=n(9117)},3329:function(e,t,n){"use strict";e.exports=n(6374)},3315:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=(0,a.default)(e);return{getItem:function(e){return new Promise((function(n,r){n(t.getItem(e))}))},setItem:function(e,n){return new Promise((function(r,a){r(t.setItem(e,n))}))},removeItem:function(e){return new Promise((function(n,r){n(t.removeItem(e))}))}}};var r,a=(r=n(184))&&r.__esModule?r:{default:r}},184:function(e,t){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(){}t.__esModule=!0,t.default=function(e){var t="".concat(e,"Storage");return function(e){if("object"!==("undefined"===typeof self?"undefined":n(self))||!(e in self))return!1;try{var t=self[e],r="redux-persist ".concat(e," test");t.setItem(r,"test"),t.getItem(r),t.removeItem(r)}catch(a){return!1}return!0}(t)?self[t]:a};var a={getItem:r,setItem:r,removeItem:r}},5752:function(e,t,n){"use strict";var r;t.Z=void 0;var a=(0,((r=n(3315))&&r.__esModule?r:{default:r}).default)("local");t.Z=a},9727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(O){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),s=new E(r||[]);return a(o,"_invoke",{value:T(e,n,s)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(O){return{type:"throw",arg:O}}}e.wrap=l;var h="suspendedStart",p="executing",d="completed",m={};function v(){}function g(){}function y(){}var b={};c(b,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(A([])));w&&w!==n&&r.call(w,o)&&(b=w);var k=y.prototype=v.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(a,i,o,s){var u=f(e[a],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"===typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}})}function T(e,t,n){var r=h;return function(a,i){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===a)throw i;return R()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=I(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=f(e,t,n);if("normal"===u.type){if(r=n.done?d:"suspendedYield",u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}function I(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=f(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function A(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:R}}function R(){return{value:t,done:!0}}return g.prototype=y,a(k,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:g,configurable:!0}),g.displayName=c(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},S(_.prototype),c(_.prototype,s,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new _(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(k),c(k,u,"Generator"),c(k,o,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=A,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},6813:function(e,t){"use strict";var n,r,a,i;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},a=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var d=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof d&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,v=null,g=-1,y=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},i=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,w=x.port2;x.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();b=e+y;try{v(!0,e)?w.postMessage(null):(m=!1,v=null)}catch(n){throw w.postMessage(null),n}}else m=!1},n=function(e){v=e,m||(m=!0,w.postMessage(null))},r=function(e,n){g=h((function(){e(t.unstable_now())}),n)},a=function(){p(g),g=-1}}function k(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<T(a,t)))break e;e[r]=t,e[n]=a,n=r}}function S(e){return void 0===(e=e[0])?null:e}function _(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var i=2*(r+1)-1,o=e[i],s=i+1,u=e[s];if(void 0!==o&&0>T(o,n))void 0!==u&&0>T(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[i]=n,r=i);else{if(!(void 0!==u&&0>T(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var I=[],N=[],C=1,E=null,A=3,R=!1,O=!1,M=!1;function D(e){for(var t=S(N);null!==t;){if(null===t.callback)_(N);else{if(!(t.startTime<=e))break;_(N),t.sortIndex=t.expirationTime,k(I,t)}t=S(N)}}function F(e){if(M=!1,D(e),!O)if(null!==S(I))O=!0,n(P);else{var t=S(N);null!==t&&r(F,t.startTime-e)}}function P(e,n){O=!1,M&&(M=!1,a()),R=!0;var i=A;try{for(D(n),E=S(I);null!==E&&(!(E.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=E.callback;if("function"===typeof o){E.callback=null,A=E.priorityLevel;var s=o(E.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?E.callback=s:E===S(I)&&_(I),D(n)}else _(I);E=S(I)}if(null!==E)var u=!0;else{var c=S(N);null!==c&&r(F,c.startTime-n),u=!1}return u}finally{E=null,A=i,R=!1}}var L=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||R||(O=!0,n(P))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return S(I)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=L,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:C++,callback:i,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,k(N,e),null===S(I)&&e===S(N)&&(M?a():M=!0,r(F,o-s))):(e.sortIndex=u,k(I,e),O||R||(O=!0,n(P))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},6699:function(e,t,n){var r=n(2501),a=n(9112),i=n(2132),o=n(890),s=n(4113),u=n(1350),c=n(3411);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,e.exports=c},2501:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},1350:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},9112:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},4113:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},2132:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},3411:function(e,t,n){var r;!function(a,i,o){var s,u=256,c=o.pow(u,6),l=o.pow(2,52),f=2*l,h=255;function p(e,t,n){var r=[],h=g(v((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(i)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(u):(e=new Uint8Array(u),(a.crypto||a.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,y(i)]}}():e,3),r),p=new d(r),b=function(){for(var e=p.g(6),t=c,n=0;e<l;)e=(e+n)*u,t*=u,n=p.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|p.g(4)},b.quick=function(){return p.g(4)/4294967296},b.double=b,g(y(p.S),i),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,p),e.state=function(){return m(p,{})}),n?(o.random=e,t):e})(b,h,"global"in t?t.global:this==o,t.state)}function d(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<u;)o[a]=a++;for(a=0;a<u;a++)o[a]=o[i=h&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=h&a+1],n=n*u+o[h&(o[a]=o[i=h&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(u)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function v(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(v(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[h&a]=h&(n^=19*t[h&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(g(o.random(),i),e.exports){e.exports=p;try{s=n(5042)}catch(b){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},9613:function(e){e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<i.length;u++){var c=i[u];if(!s(c))return!1;var l=e[c],f=t[c];if(!1===(a=n?n.call(r,l,f,c):void 0)||void 0===a&&l!==f)return!1}return!0}},1561:function(e,t,n){"use strict";var r=n(2791);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=r.useState,o=r.useEffect,s=r.useLayoutEffect,u=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!a(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),a=r[0].inst,l=r[1];return s((function(){a.value=n,a.getSnapshot=t,c(a)&&l({inst:a})}),[e,n,t]),o((function(){return c(a)&&l({inst:a}),e((function(){c(a)&&l({inst:a})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},7595:function(e,t,n){"use strict";var r=n(2791),a=n(7248);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=a.useSyncExternalStore,s=r.useRef,u=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,a){var f=s(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!u){if(u=!0,o=e,e=r(e),void 0!==a&&h.hasValue){var t=h.value;if(a(t,e))return s=t}return s=e}if(t=s,i(o,e))return t;var n=r(e);return void 0!==a&&a(t,n)?t:(o=e,s=n)}var o,s,u=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,a]);var p=o(e,f[0],f[1]);return u((function(){h.hasValue=!0,h.value=p}),[p]),l(p),p}},7248:function(e,t,n){"use strict";e.exports=n(1561)},327:function(e,t,n){"use strict";e.exports=n(7595)},3110:function(e,t){var n;!function(t,n){"use strict";"object"===typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!==typeof window?window:this,(function(r,a){"use strict";var i=[],o=Object.getPrototypeOf,s=i.slice,u=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},c=i.push,l=i.indexOf,f={},h=f.toString,p=f.hasOwnProperty,d=p.toString,m=d.call(Object),v={},g=function(e){return"function"===typeof e&&"number"!==typeof e.nodeType&&"function"!==typeof e.item},y=function(e){return null!=e&&e===e.window},b=r.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,n){var r,a,i=(n=n||b).createElement("script");if(i.text=e,t)for(r in x)(a=t[r]||t.getAttribute&&t.getAttribute(r))&&i.setAttribute(r,a);n.head.appendChild(i).parentNode.removeChild(i)}function k(e){return null==e?e+"":"object"===typeof e||"function"===typeof e?f[h.call(e)]||"object":typeof e}var S="3.6.1",_=function e(t,n){return new e.fn.init(t,n)};function T(e){var t=!!e&&"length"in e&&e.length,n=k(e);return!g(e)&&!y(e)&&("array"===n||0===t||"number"===typeof t&&t>0&&t-1 in e)}_.fn=_.prototype={jquery:S,constructor:_,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=_.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return _.each(this,e)},map:function(e){return this.pushStack(_.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(_.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(_.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:i.sort,splice:i.splice},_.extend=_.fn.extend=function(){var e,t,n,r,a,i,o=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"===typeof o&&(c=o,o=arguments[s]||{},s++),"object"===typeof o||g(o)||(o={}),s===u&&(o=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(c&&r&&(_.isPlainObject(r)||(a=Array.isArray(r)))?(n=o[t],i=a&&!Array.isArray(n)?[]:a||_.isPlainObject(n)?n:{},a=!1,o[t]=_.extend(c,i,r)):void 0!==r&&(o[t]=r));return o},_.extend({expando:"jQuery"+(S+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==h.call(e))&&(!(t=o(e))||"function"===typeof(n=p.call(t,"constructor")&&t.constructor)&&d.call(n)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){w(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(T(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(T(Object(e))?_.merge(n,"string"===typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:l.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,a=e.length;r<n;r++)e[a++]=t[r];return e.length=a,e},grep:function(e,t,n){for(var r=[],a=0,i=e.length,o=!n;a<i;a++)!t(e[a],a)!==o&&r.push(e[a]);return r},map:function(e,t,n){var r,a,i=0,o=[];if(T(e))for(r=e.length;i<r;i++)null!=(a=t(e[i],i,n))&&o.push(a);else for(i in e)null!=(a=t(e[i],i,n))&&o.push(a);return u(o)},guid:1,support:v}),"function"===typeof Symbol&&(_.fn[Symbol.iterator]=i[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){f["[object "+t+"]"]=t.toLowerCase()}));var I=function(e){var t,n,r,a,i,o,s,u,c,l,f,h,p,d,m,v,g,y,b,x="sizzle"+1*new Date,w=e.document,k=0,S=0,_=ue(),T=ue(),I=ue(),N=ue(),C=function(e,t){return e===t&&(f=!0),0},E={}.hasOwnProperty,A=[],R=A.pop,O=A.push,M=A.push,D=A.slice,F=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",z="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",B="\\[[\\x20\\t\\r\\n\\f]*("+z+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+z+"))|)"+L+"*\\]",W=":("+z+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",V=new RegExp(L+"+","g"),j=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),U=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),H=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),Z=new RegExp(L+"|>"),G=new RegExp(W),q=new RegExp("^"+z+"$"),K={ID:new RegExp("^#("+z+")"),CLASS:new RegExp("^\\.("+z+")"),TAG:new RegExp("^("+z+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,Y=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ae=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ie=function(){h()},oe=xe((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{M.apply(A=D.call(w.childNodes),w.childNodes),A[w.childNodes.length].nodeType}catch(Te){M={apply:A.length?function(e,t){O.apply(e,D.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,a){var i,s,c,l,f,d,g,y=t&&t.ownerDocument,w=t?t.nodeType:9;if(r=r||[],"string"!==typeof e||!e||1!==w&&9!==w&&11!==w)return r;if(!a&&(h(t),t=t||p,m)){if(11!==w&&(f=J.exec(e)))if(i=f[1]){if(9===w){if(!(c=t.getElementById(i)))return r;if(c.id===i)return r.push(c),r}else if(y&&(c=y.getElementById(i))&&b(t,c)&&c.id===i)return r.push(c),r}else{if(f[2])return M.apply(r,t.getElementsByTagName(e)),r;if((i=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return M.apply(r,t.getElementsByClassName(i)),r}if(n.qsa&&!N[e+" "]&&(!v||!v.test(e))&&(1!==w||"object"!==t.nodeName.toLowerCase())){if(g=e,y=t,1===w&&(Z.test(e)||H.test(e))){for((y=ee.test(e)&&ge(t.parentNode)||t)===t&&n.scope||((l=t.getAttribute("id"))?l=l.replace(re,ae):t.setAttribute("id",l=x)),s=(d=o(e)).length;s--;)d[s]=(l?"#"+l:":scope")+" "+be(d[s]);g=d.join(",")}try{return M.apply(r,y.querySelectorAll(g)),r}catch(k){N(e,!0)}finally{l===x&&t.removeAttribute("id")}}}return u(e.replace(j,"$1"),t,r,a)}function ue(){var e=[];return function t(n,a){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=a}}function ce(e){return e[x]=!0,e}function le(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(Te){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){for(var n=e.split("|"),a=n.length;a--;)r.attrHandle[n[a]]=t}function he(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function de(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ve(e){return ce((function(t){return t=+t,ce((function(n,r){for(var a,i=e([],n.length,t),o=i.length;o--;)n[a=i[o]]&&(n[a]=!(r[a]=n[a]))}))}))}function ge(e){return e&&"undefined"!==typeof e.getElementsByTagName&&e}for(t in n=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!X.test(t||n&&n.nodeName||"HTML")},h=se.setDocument=function(e){var t,a,o=e?e.ownerDocument||e:w;return o!=p&&9===o.nodeType&&o.documentElement?(d=(p=o).documentElement,m=!i(p),w!=p&&(a=p.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",ie,!1):a.attachEvent&&a.attachEvent("onunload",ie)),n.scope=le((function(e){return d.appendChild(e).appendChild(p.createElement("div")),"undefined"!==typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=le((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=le((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Q.test(p.getElementsByClassName),n.getById=le((function(e){return d.appendChild(e).id=x,!p.getElementsByName||!p.getElementsByName(x).length})),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n="undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&m){var n,r,a,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(a=t.getElementsByName(e),r=0;i=a[r++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],a=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[a++];)1===n.nodeType&&r.push(n);return r}return i},r.find.CLASS=n.getElementsByClassName&&function(e,t){if("undefined"!==typeof t.getElementsByClassName&&m)return t.getElementsByClassName(e)},g=[],v=[],(n.qsa=Q.test(p.querySelectorAll))&&(le((function(e){var t;d.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+P+")"),e.querySelectorAll("[id~="+x+"-]").length||v.push("~="),(t=p.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")})),le((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),d.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")}))),(n.matchesSelector=Q.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&le((function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),g.push("!=",W)})),v=v.length&&new RegExp(v.join("|")),g=g.length&&new RegExp(g.join("|")),t=Q.test(d.compareDocumentPosition),b=t||Q.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},C=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==p||e.ownerDocument==w&&b(w,e)?-1:t==p||t.ownerDocument==w&&b(w,t)?1:l?F(l,e)-F(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,a=e.parentNode,i=t.parentNode,o=[e],s=[t];if(!a||!i)return e==p?-1:t==p?1:a?-1:i?1:l?F(l,e)-F(l,t):0;if(a===i)return he(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[r]===s[r];)r++;return r?he(o[r],s[r]):o[r]==w?-1:s[r]==w?1:0},p):p},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(h(e),n.matchesSelector&&m&&!N[t+" "]&&(!g||!g.test(t))&&(!v||!v.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(Te){N(t,!0)}return se(t,p,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=p&&h(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=p&&h(e);var a=r.attrHandle[t.toLowerCase()],i=a&&E.call(r.attrHandle,t.toLowerCase())?a(e,t,!m):void 0;return void 0!==i?i:n.attributes||!m?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},se.escape=function(e){return(e+"").replace(re,ae)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],a=0,i=0;if(f=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(C),f){for(;t=e[i++];)t===e[i]&&(a=r.push(i));for(;a--;)e.splice(r[a],1)}return l=null,e},a=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"===typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=a(t);return n},r=se.selectors={cacheLength:50,createPseudo:ce,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&G.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=_[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+L+"|$)"))&&_(e,(function(e){return t.test("string"===typeof e.className&&e.className||"undefined"!==typeof e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var a=se.attr(r,e);return null==a?"!="===t:!t||(a+="","="===t?a===n:"!="===t?a!==n:"^="===t?n&&0===a.indexOf(n):"*="===t?n&&a.indexOf(n)>-1:"$="===t?n&&a.slice(-n.length)===n:"~="===t?(" "+a.replace(V," ")+" ").indexOf(n)>-1:"|="===t&&(a===n||a.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,a){var i="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===a?function(e){return!!e.parentNode}:function(t,n,u){var c,l,f,h,p,d,m=i!==o?"nextSibling":"previousSibling",v=t.parentNode,g=s&&t.nodeName.toLowerCase(),y=!u&&!s,b=!1;if(v){if(i){for(;m;){for(h=t;h=h[m];)if(s?h.nodeName.toLowerCase()===g:1===h.nodeType)return!1;d=m="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?v.firstChild:v.lastChild],o&&y){for(b=(p=(c=(l=(f=(h=v)[x]||(h[x]={}))[h.uniqueID]||(f[h.uniqueID]={}))[e]||[])[0]===k&&c[1])&&c[2],h=p&&v.childNodes[p];h=++p&&h&&h[m]||(b=p=0)||d.pop();)if(1===h.nodeType&&++b&&h===t){l[e]=[k,p,b];break}}else if(y&&(b=p=(c=(l=(f=(h=t)[x]||(h[x]={}))[h.uniqueID]||(f[h.uniqueID]={}))[e]||[])[0]===k&&c[1]),!1===b)for(;(h=++p&&h&&h[m]||(b=p=0)||d.pop())&&((s?h.nodeName.toLowerCase()!==g:1!==h.nodeType)||!++b||(y&&((l=(f=h[x]||(h[x]={}))[h.uniqueID]||(f[h.uniqueID]={}))[e]=[k,b]),h!==t)););return(b-=a)===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,t){var n,a=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[x]?a(t):a.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,n){for(var r,i=a(e,t),o=i.length;o--;)e[r=F(e,i[o])]=!(n[r]=i[o])})):function(e){return a(e,0,n)}):a}},pseudos:{not:ce((function(e){var t=[],n=[],r=s(e.replace(j,"$1"));return r[x]?ce((function(e,t,n,a){for(var i,o=r(e,null,a,[]),s=e.length;s--;)(i=o[s])&&(e[s]=!(t[s]=i))})):function(e,a,i){return t[0]=e,r(t,null,i,n),t[0]=null,!n.pop()}})),has:ce((function(e){return function(t){return se(e,t).length>0}})),contains:ce((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||a(t)).indexOf(e)>-1}})),lang:ce((function(e){return q.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return $.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve((function(){return[0]})),last:ve((function(e,t){return[t-1]})),eq:ve((function(e,t,n){return[n<0?n+t:n]})),even:ve((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ve((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ve((function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:ve((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},r.pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=de(t);function ye(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function xe(e,t,n){var r=t.dir,a=t.next,i=a||r,o=n&&"parentNode"===i,s=S++;return t.first?function(t,n,a){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,a);return!1}:function(t,n,u){var c,l,f,h=[k,s];if(u){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(l=(f=t[x]||(t[x]={}))[t.uniqueID]||(f[t.uniqueID]={}),a&&a===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=l[i])&&c[0]===k&&c[1]===s)return h[2]=c[2];if(l[i]=h,h[2]=e(t,n,u))return!0}return!1}}function we(e){return e.length>1?function(t,n,r){for(var a=e.length;a--;)if(!e[a](t,n,r))return!1;return!0}:e[0]}function ke(e,t,n,r,a){for(var i,o=[],s=0,u=e.length,c=null!=t;s<u;s++)(i=e[s])&&(n&&!n(i,r,a)||(o.push(i),c&&t.push(s)));return o}function Se(e,t,n,r,a,i){return r&&!r[x]&&(r=Se(r)),a&&!a[x]&&(a=Se(a,i)),ce((function(i,o,s,u){var c,l,f,h=[],p=[],d=o.length,m=i||function(e,t,n){for(var r=0,a=t.length;r<a;r++)se(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),v=!e||!i&&t?m:ke(m,h,e,s,u),g=n?a||(i?e:d||r)?[]:o:v;if(n&&n(v,g,s,u),r)for(c=ke(g,p),r(c,[],s,u),l=c.length;l--;)(f=c[l])&&(g[p[l]]=!(v[p[l]]=f));if(i){if(a||e){if(a){for(c=[],l=g.length;l--;)(f=g[l])&&c.push(v[l]=f);a(null,g=[],c,u)}for(l=g.length;l--;)(f=g[l])&&(c=a?F(i,f):h[l])>-1&&(i[c]=!(o[c]=f))}}else g=ke(g===o?g.splice(d,g.length):g),a?a(null,o,g,u):M.apply(o,g)}))}function _e(e){for(var t,n,a,i=e.length,o=r.relative[e[0].type],s=o||r.relative[" "],u=o?1:0,l=xe((function(e){return e===t}),s,!0),f=xe((function(e){return F(t,e)>-1}),s,!0),h=[function(e,n,r){var a=!o&&(r||n!==c)||((t=n).nodeType?l(e,n,r):f(e,n,r));return t=null,a}];u<i;u++)if(n=r.relative[e[u].type])h=[xe(we(h),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[x]){for(a=++u;a<i&&!r.relative[e[a].type];a++);return Se(u>1&&we(h),u>1&&be(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(j,"$1"),n,u<a&&_e(e.slice(u,a)),a<i&&_e(e=e.slice(a)),a<i&&be(e))}h.push(n)}return we(h)}return ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,o=se.tokenize=function(e,t){var n,a,i,o,s,u,c,l=T[e+" "];if(l)return t?0:l.slice(0);for(s=e,u=[],c=r.preFilter;s;){for(o in n&&!(a=U.exec(s))||(a&&(s=s.slice(a[0].length)||s),u.push(i=[])),n=!1,(a=H.exec(s))&&(n=a.shift(),i.push({value:n,type:a[0].replace(j," ")}),s=s.slice(n.length)),r.filter)!(a=K[o].exec(s))||c[o]&&!(a=c[o](a))||(n=a.shift(),i.push({value:n,type:o,matches:a}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):T(e,u).slice(0)},s=se.compile=function(e,t){var n,a=[],i=[],s=I[e+" "];if(!s){for(t||(t=o(e)),n=t.length;n--;)(s=_e(t[n]))[x]?a.push(s):i.push(s);s=I(e,function(e,t){var n=t.length>0,a=e.length>0,i=function(i,o,s,u,l){var f,d,v,g=0,y="0",b=i&&[],x=[],w=c,S=i||a&&r.find.TAG("*",l),_=k+=null==w?1:Math.random()||.1,T=S.length;for(l&&(c=o==p||o||l);y!==T&&null!=(f=S[y]);y++){if(a&&f){for(d=0,o||f.ownerDocument==p||(h(f),s=!m);v=e[d++];)if(v(f,o||p,s)){u.push(f);break}l&&(k=_)}n&&((f=!v&&f)&&g--,i&&b.push(f))}if(g+=y,n&&y!==g){for(d=0;v=t[d++];)v(b,x,o,s);if(i){if(g>0)for(;y--;)b[y]||x[y]||(x[y]=R.call(u));x=ke(x)}M.apply(u,x),l&&!i&&x.length>0&&g+t.length>1&&se.uniqueSort(u)}return l&&(k=_,c=w),b};return n?ce(i):i}(i,a)),s.selector=e}return s},u=se.select=function(e,t,n,a){var i,u,c,l,f,h="function"===typeof e&&e,p=!a&&o(e=h.selector||e);if(n=n||[],1===p.length){if((u=p[0]=p[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&9===t.nodeType&&m&&r.relative[u[1].type]){if(!(t=(r.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return n;h&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(i=K.needsContext.test(e)?0:u.length;i--&&(c=u[i],!r.relative[l=c.type]);)if((f=r.find[l])&&(a=f(c.matches[0].replace(te,ne),ee.test(u[0].type)&&ge(t.parentNode)||t))){if(u.splice(i,1),!(e=a.length&&be(u)))return M.apply(n,a),n;break}}return(h||s(e,p))(a,t,!m,n,!t||ee.test(e)&&ge(t.parentNode)||t),n},n.sortStable=x.split("").sort(C).join("")===x,n.detectDuplicates=!!f,h(),n.sortDetached=le((function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))})),le((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||fe("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&le((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||fe("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),le((function(e){return null==e.getAttribute("disabled")}))||fe(P,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),se}(r);_.find=I,(_.expr=I.selectors)[":"]=_.expr.pseudos,_.uniqueSort=_.unique=I.uniqueSort,_.text=I.getText,_.isXMLDoc=I.isXML,_.contains=I.contains,_.escapeSelector=I.escape;var N=function(e,t,n){for(var r=[],a=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&_(e).is(n))break;r.push(e)}return r},C=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},E=_.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var R=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(e,t,n){return g(t)?_.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?_.grep(e,(function(e){return e===t!==n})):"string"!==typeof t?_.grep(e,(function(e){return l.call(t,e)>-1!==n})):_.filter(t,e,n)}_.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?_.find.matchesSelector(r,e)?[r]:[]:_.find.matches(e,_.grep(t,(function(e){return 1===e.nodeType})))},_.fn.extend({find:function(e){var t,n,r=this.length,a=this;if("string"!==typeof e)return this.pushStack(_(e).filter((function(){for(t=0;t<r;t++)if(_.contains(a[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)_.find(e,a[t],n);return r>1?_.uniqueSort(n):n},filter:function(e){return this.pushStack(O(this,e||[],!1))},not:function(e){return this.pushStack(O(this,e||[],!0))},is:function(e){return!!O(this,"string"===typeof e&&E.test(e)?_(e):e||[],!1).length}});var M,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(_.fn.init=function(e,t,n){var r,a;if(!e)return this;if(n=n||M,"string"===typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:D.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof _?t[0]:t,_.merge(this,_.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:b,!0)),R.test(r[1])&&_.isPlainObject(t))for(r in t)g(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(a=b.getElementById(r[2]))&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(_):_.makeArray(e,this)}).prototype=_.fn,M=_(b);var F=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function L(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}_.fn.extend({has:function(e){var t=_(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(_.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,a=this.length,i=[],o="string"!==typeof e&&_(e);if(!E.test(e))for(;r<a;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&_.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?_.uniqueSort(i):i)},index:function(e){return e?"string"===typeof e?l.call(_(e),this[0]):l.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),_.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return N(e,"parentNode")},parentsUntil:function(e,t,n){return N(e,"parentNode",n)},next:function(e){return L(e,"nextSibling")},prev:function(e){return L(e,"previousSibling")},nextAll:function(e){return N(e,"nextSibling")},prevAll:function(e){return N(e,"previousSibling")},nextUntil:function(e,t,n){return N(e,"nextSibling",n)},prevUntil:function(e,t,n){return N(e,"previousSibling",n)},siblings:function(e){return C((e.parentNode||{}).firstChild,e)},children:function(e){return C(e.firstChild)},contents:function(e){return null!=e.contentDocument&&o(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),_.merge([],e.childNodes))}},(function(e,t){_.fn[e]=function(n,r){var a=_.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"===typeof r&&(a=_.filter(r,a)),this.length>1&&(P[e]||_.uniqueSort(a),F.test(e)&&a.reverse()),this.pushStack(a)}}));var z=/[^\x20\t\r\n\f]+/g;function B(e){return e}function W(e){throw e}function V(e,t,n,r){var a;try{e&&g(a=e.promise)?a.call(e).done(t).fail(n):e&&g(a=e.then)?a.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}_.Callbacks=function(e){e="string"===typeof e?function(e){var t={};return _.each(e.match(z)||[],(function(e,n){t[n]=!0})),t}(e):_.extend({},e);var t,n,r,a,i=[],o=[],s=-1,u=function(){for(a=a||e.once,r=t=!0;o.length;s=-1)for(n=o.shift();++s<i.length;)!1===i[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=i.length,n=!1);e.memory||(n=!1),t=!1,a&&(i=n?[]:"")},c={add:function(){return i&&(n&&!t&&(s=i.length-1,o.push(n)),function t(n){_.each(n,(function(n,r){g(r)?e.unique&&c.has(r)||i.push(r):r&&r.length&&"string"!==k(r)&&t(r)}))}(arguments),n&&!t&&u()),this},remove:function(){return _.each(arguments,(function(e,t){for(var n;(n=_.inArray(t,i,n))>-1;)i.splice(n,1),n<=s&&s--})),this},has:function(e){return e?_.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return a=o=[],i=n="",this},disabled:function(){return!i},lock:function(){return a=o=[],n||t||(i=n=""),this},locked:function(){return!!a},fireWith:function(e,n){return a||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},_.extend({Deferred:function(e){var t=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],n="pending",a={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return _.Deferred((function(n){_.each(t,(function(t,r){var a=g(e[r[4]])&&e[r[4]];i[r[1]]((function(){var e=a&&a.apply(this,arguments);e&&g(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,a?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,a){var i=0;function o(e,t,n,a){return function(){var s=this,u=arguments,c=function(){var r,c;if(!(e<i)){if((r=n.apply(s,u))===t.promise())throw new TypeError("Thenable self-resolution");c=r&&("object"===typeof r||"function"===typeof r)&&r.then,g(c)?a?c.call(r,o(i,t,B,a),o(i,t,W,a)):(i++,c.call(r,o(i,t,B,a),o(i,t,W,a),o(i,t,B,t.notifyWith))):(n!==B&&(s=void 0,u=[r]),(a||t.resolveWith)(s,u))}},l=a?c:function(){try{c()}catch(r){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(r,l.stackTrace),e+1>=i&&(n!==W&&(s=void 0,u=[r]),t.rejectWith(s,u))}};e?l():(_.Deferred.getStackHook&&(l.stackTrace=_.Deferred.getStackHook()),r.setTimeout(l))}}return _.Deferred((function(r){t[0][3].add(o(0,r,g(a)?a:B,r.notifyWith)),t[1][3].add(o(0,r,g(e)?e:B)),t[2][3].add(o(0,r,g(n)?n:W))})).promise()},promise:function(e){return null!=e?_.extend(e,a):a}},i={};return _.each(t,(function(e,r){var o=r[2],s=r[5];a[r[1]]=o.add,s&&o.add((function(){n=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(r[3].fire),i[r[0]]=function(){return i[r[0]+"With"](this===i?void 0:this,arguments),this},i[r[0]+"With"]=o.fireWith})),a.promise(i),e&&e.call(i,i),i},when:function(e){var t=arguments.length,n=t,r=Array(n),a=s.call(arguments),i=_.Deferred(),o=function(e){return function(n){r[e]=this,a[e]=arguments.length>1?s.call(arguments):n,--t||i.resolveWith(r,a)}};if(t<=1&&(V(e,i.done(o(n)).resolve,i.reject,!t),"pending"===i.state()||g(a[n]&&a[n].then)))return i.then();for(;n--;)V(a[n],o(n),i.reject);return i.promise()}});var j=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&j.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},_.readyException=function(e){r.setTimeout((function(){throw e}))};var U=_.Deferred();function H(){b.removeEventListener("DOMContentLoaded",H),r.removeEventListener("load",H),_.ready()}_.fn.ready=function(e){return U.then(e).catch((function(e){_.readyException(e)})),this},_.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--_.readyWait:_.isReady)||(_.isReady=!0,!0!==e&&--_.readyWait>0||U.resolveWith(b,[_]))}}),_.ready.then=U.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?r.setTimeout(_.ready):(b.addEventListener("DOMContentLoaded",H),r.addEventListener("load",H));var Z=function e(t,n,r,a,i,o,s){var u=0,c=t.length,l=null==r;if("object"===k(r))for(u in i=!0,r)e(t,n,u,r[u],!0,o,s);else if(void 0!==a&&(i=!0,g(a)||(s=!0),l&&(s?(n.call(t,a),n=null):(l=n,n=function(e,t,n){return l.call(_(e),n)})),n))for(;u<c;u++)n(t[u],r,s?a:a.call(t[u],u,n(t[u],r)));return i?t:l?n.call(t):c?n(t[0],r):o},G=/^-ms-/,q=/-([a-z])/g;function K(e,t){return t.toUpperCase()}function X(e){return e.replace(G,"ms-").replace(q,K)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function $(){this.expando=_.expando+$.uid++}$.uid=1,$.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,a=this.cache(e);if("string"===typeof t)a[X(t)]=n;else for(r in t)a[X(r)]=t[r];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"===typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(z)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||_.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!_.isEmptyObject(t)}};var Q=new $,J=new $,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(te,"-$&").toLowerCase(),"string"===typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(a){}J.set(e,t,n)}else n=void 0;return n}_.extend({hasData:function(e){return J.hasData(e)||Q.hasData(e)},data:function(e,t,n){return J.access(e,t,n)},removeData:function(e,t){J.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),_.fn.extend({data:function(e,t){var n,r,a,i=this[0],o=i&&i.attributes;if(void 0===e){if(this.length&&(a=J.get(i),1===i.nodeType&&!Q.get(i,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=X(r.slice(5)),ne(i,r,a[r]));Q.set(i,"hasDataAttrs",!0)}return a}return"object"===typeof e?this.each((function(){J.set(this,e)})):Z(this,(function(t){var n;if(i&&void 0===t)return void 0!==(n=J.get(i,e))||void 0!==(n=ne(i,e))?n:void 0;this.each((function(){J.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){J.remove(this,e)}))}}),_.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Q.get(e,t),n&&(!r||Array.isArray(n)?r=Q.access(e,t,_.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){var n=_.queue(e,t=t||"fx"),r=n.length,a=n.shift(),i=_._queueHooks(e,t);"inprogress"===a&&(a=n.shift(),r--),a&&("fx"===t&&n.unshift("inprogress"),delete i.stop,a.call(e,(function(){_.dequeue(e,t)}),i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:_.Callbacks("once memory").add((function(){Q.remove(e,[t+"queue",n])}))})}}),_.fn.extend({queue:function(e,t){var n=2;return"string"!==typeof e&&(t=e,e="fx",n--),arguments.length<n?_.queue(this[0],e):void 0===t?this:this.each((function(){var n=_.queue(this,e,t);_._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&_.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){_.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,a=_.Deferred(),i=this,o=this.length,s=function(){--r||a.resolveWith(i,[i])};for("string"!==typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=Q.get(i[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),a.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ae=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),ie=["Top","Right","Bottom","Left"],oe=b.documentElement,se=function(e){return _.contains(e.ownerDocument,e)},ue={composed:!0};oe.getRootNode&&(se=function(e){return _.contains(e.ownerDocument,e)||e.getRootNode(ue)===e.ownerDocument});var ce=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&se(e)&&"none"===_.css(e,"display")};function le(e,t,n,r){var a,i,o=20,s=r?function(){return r.cur()}:function(){return _.css(e,t,"")},u=s(),c=n&&n[3]||(_.cssNumber[t]?"":"px"),l=e.nodeType&&(_.cssNumber[t]||"px"!==c&&+u)&&ae.exec(_.css(e,t));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;o--;)_.style(e,t,l+c),(1-i)*(1-(i=s()/u||.5))<=0&&(o=0),l/=i;_.style(e,t,(l*=2)+c),n=n||[]}return n&&(l=+l||+u||0,a=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=a)),a}var fe={};function he(e){var t,n=e.ownerDocument,r=e.nodeName,a=fe[r];return a||(t=n.body.appendChild(n.createElement(r)),a=_.css(t,"display"),t.parentNode.removeChild(t),"none"===a&&(a="block"),fe[r]=a,a)}function pe(e,t){for(var n,r,a=[],i=0,o=e.length;i<o;i++)(r=e[i]).style&&(n=r.style.display,t?("none"===n&&(a[i]=Q.get(r,"display")||null,a[i]||(r.style.display="")),""===r.style.display&&ce(r)&&(a[i]=he(r))):"none"!==n&&(a[i]="none",Q.set(r,"display",n)));for(i=0;i<o;i++)null!=a[i]&&(e[i].style.display=a[i]);return e}_.fn.extend({show:function(){return pe(this,!0)},hide:function(){return pe(this)},toggle:function(e){return"boolean"===typeof e?e?this.show():this.hide():this.each((function(){ce(this)?_(this).show():_(this).hide()}))}});var de=/^(?:checkbox|radio)$/i,me=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ve=/^$|^module$|\/(?:java|ecma)script/i;!function(){var e=b.createDocumentFragment().appendChild(b.createElement("div")),t=b.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),v.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",v.option=!!e.lastChild}();var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ye(e,t){var n;return n="undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!==typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?_.merge([e],n):n}function be(e,t){for(var n=0,r=e.length;n<r;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,v.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var xe=/<|&#?\w+;/;function we(e,t,n,r,a){for(var i,o,s,u,c,l,f=t.createDocumentFragment(),h=[],p=0,d=e.length;p<d;p++)if((i=e[p])||0===i)if("object"===k(i))_.merge(h,i.nodeType?[i]:i);else if(xe.test(i)){for(o=o||f.appendChild(t.createElement("div")),s=(me.exec(i)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,o.innerHTML=u[1]+_.htmlPrefilter(i)+u[2],l=u[0];l--;)o=o.lastChild;_.merge(h,o.childNodes),(o=f.firstChild).textContent=""}else h.push(t.createTextNode(i));for(f.textContent="",p=0;i=h[p++];)if(r&&_.inArray(i,r)>-1)a&&a.push(i);else if(c=se(i),o=ye(f.appendChild(i),"script"),c&&be(o),n)for(l=0;i=o[l++];)ve.test(i.type||"")&&n.push(i);return f}var ke=/^([^.]*)(?:\.(.+)|)/;function Se(){return!0}function _e(){return!1}function Te(e,t){return e===function(){try{return b.activeElement}catch(e){}}()===("focus"===t)}function Ie(e,t,n,r,a,i){var o,s;if("object"===typeof t){for(s in"string"!==typeof n&&(r=r||n,n=void 0),t)Ie(e,s,n,r,t[s],i);return e}if(null==r&&null==a?(a=n,r=n=void 0):null==a&&("string"===typeof n?(a=r,r=void 0):(a=r,r=n,n=void 0)),!1===a)a=_e;else if(!a)return e;return 1===i&&(o=a,a=function(e){return _().off(e),o.apply(this,arguments)},a.guid=o.guid||(o.guid=_.guid++)),e.each((function(){_.event.add(this,t,a,r,n)}))}function Ne(e,t,n){n?(Q.set(e,t,!1),_.event.add(e,t,{namespace:!1,handler:function(e){var r,a,i=Q.get(this,t);if(1&e.isTrigger&&this[t]){if(i.length)(_.event.special[t]||{}).delegateType&&e.stopPropagation();else if(i=s.call(arguments),Q.set(this,t,i),r=n(this,t),this[t](),i!==(a=Q.get(this,t))||r?Q.set(this,t,!1):a={},i!==a)return e.stopImmediatePropagation(),e.preventDefault(),a&&a.value}else i.length&&(Q.set(this,t,{value:_.event.trigger(_.extend(i[0],_.Event.prototype),i.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,t)&&_.event.add(e,t,Se)}_.event={global:{},add:function(e,t,n,r,a){var i,o,s,u,c,l,f,h,p,d,m,v=Q.get(e);if(Y(e))for(n.handler&&(n=(i=n).handler,a=i.selector),a&&_.find.matchesSelector(oe,a),n.guid||(n.guid=_.guid++),(u=v.events)||(u=v.events=Object.create(null)),(o=v.handle)||(o=v.handle=function(t){return _.event.triggered!==t.type?_.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(z)||[""]).length;c--;)p=m=(s=ke.exec(t[c])||[])[1],d=(s[2]||"").split(".").sort(),p&&(f=_.event.special[p]||{},p=(a?f.delegateType:f.bindType)||p,f=_.event.special[p]||{},l=_.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:a,needsContext:a&&_.expr.match.needsContext.test(a),namespace:d.join(".")},i),(h=u[p])||((h=u[p]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,d,o)||e.addEventListener&&e.addEventListener(p,o)),f.add&&(f.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),a?h.splice(h.delegateCount++,0,l):h.push(l),_.event.global[p]=!0)},remove:function(e,t,n,r,a){var i,o,s,u,c,l,f,h,p,d,m,v=Q.hasData(e)&&Q.get(e);if(v&&(u=v.events)){for(c=(t=(t||"").match(z)||[""]).length;c--;)if(p=m=(s=ke.exec(t[c])||[])[1],d=(s[2]||"").split(".").sort(),p){for(f=_.event.special[p]||{},h=u[p=(r?f.delegateType:f.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=i=h.length;i--;)l=h[i],!a&&m!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(h.splice(i,1),l.selector&&h.delegateCount--,f.remove&&f.remove.call(e,l));o&&!h.length&&(f.teardown&&!1!==f.teardown.call(e,d,v.handle)||_.removeEvent(e,p,v.handle),delete u[p])}else for(p in u)_.event.remove(e,p+t[c],n,r,!0);_.isEmptyObject(u)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,r,a,i,o,s=new Array(arguments.length),u=_.event.fix(e),c=(Q.get(this,"events")||Object.create(null))[u.type]||[],l=_.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,u)){for(o=_.event.handlers.call(this,u,c),t=0;(a=o[t++])&&!u.isPropagationStopped();)for(u.currentTarget=a.elem,n=0;(i=a.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==i.namespace&&!u.rnamespace.test(i.namespace)||(u.handleObj=i,u.data=i.data,void 0!==(r=((_.event.special[i.origType]||{}).handle||i.handler).apply(a.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,a,i,o,s=[],u=t.delegateCount,c=e.target;if(u&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(i=[],o={},n=0;n<u;n++)void 0===o[a=(r=t[n]).selector+" "]&&(o[a]=r.needsContext?_(a,this).index(c)>-1:_.find(a,this,null,[c]).length),o[a]&&i.push(r);i.length&&s.push({elem:c,handlers:i})}return c=this,u<t.length&&s.push({elem:c,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(_.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[_.expando]?e:new _.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return de.test(t.type)&&t.click&&A(t,"input")&&Ne(t,"click",Se),!1},trigger:function(e){var t=this||e;return de.test(t.type)&&t.click&&A(t,"input")&&Ne(t,"click"),!0},_default:function(e){var t=e.target;return de.test(t.type)&&t.click&&A(t,"input")&&Q.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},_.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},(_.Event=function(e,t){if(!(this instanceof _.Event))return new _.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Se:_e,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&_.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[_.expando]=!0}).prototype={constructor:_.Event,isDefaultPrevented:_e,isPropagationStopped:_e,isImmediatePropagationStopped:_e,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Se,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Se,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Se,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},_.event.addProp),_.each({focus:"focusin",blur:"focusout"},(function(e,t){_.event.special[e]={setup:function(){return Ne(this,e,Te),!1},trigger:function(){return Ne(this,e),!0},_default:function(t){return Q.get(t.target,e)},delegateType:t}})),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){_.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,a=e.relatedTarget,i=e.handleObj;return a&&(a===r||_.contains(r,a))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}})),_.fn.extend({on:function(e,t,n,r){return Ie(this,e,t,n,r)},one:function(e,t,n,r){return Ie(this,e,t,n,r,1)},off:function(e,t,n){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,_(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===typeof e){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!==typeof t||(n=t,t=void 0),!1===n&&(n=_e),this.each((function(){_.event.remove(this,e,n,t)}))}});var Ce=/<script|<style|<link/i,Ee=/checked\s*(?:[^=]|=\s*.checked.)/i,Ae=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Re(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&_(e).children("tbody")[0]||e}function Oe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Me(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function De(e,t){var n,r,a,i,o,s;if(1===t.nodeType){if(Q.hasData(e)&&(s=Q.get(e).events))for(a in Q.remove(t,"handle events"),s)for(n=0,r=s[a].length;n<r;n++)_.event.add(t,a,s[a][n]);J.hasData(e)&&(i=J.access(e),o=_.extend({},i),J.set(t,o))}}function Fe(e,t){var n=t.nodeName.toLowerCase();"input"===n&&de.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Pe(e,t,n,r){t=u(t);var a,i,o,s,c,l,f=0,h=e.length,p=h-1,d=t[0],m=g(d);if(m||h>1&&"string"===typeof d&&!v.checkClone&&Ee.test(d))return e.each((function(a){var i=e.eq(a);m&&(t[0]=d.call(this,a,i.html())),Pe(i,t,n,r)}));if(h&&(i=(a=we(t,e[0].ownerDocument,!1,e,r)).firstChild,1===a.childNodes.length&&(a=i),i||r)){for(s=(o=_.map(ye(a,"script"),Oe)).length;f<h;f++)c=a,f!==p&&(c=_.clone(c,!0,!0),s&&_.merge(o,ye(c,"script"))),n.call(e[f],c,f);if(s)for(l=o[o.length-1].ownerDocument,_.map(o,Me),f=0;f<s;f++)c=o[f],ve.test(c.type||"")&&!Q.access(c,"globalEval")&&_.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?_._evalUrl&&!c.noModule&&_._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},l):w(c.textContent.replace(Ae,""),c,l))}return e}function Le(e,t,n){for(var r,a=t?_.filter(t,e):e,i=0;null!=(r=a[i]);i++)n||1!==r.nodeType||_.cleanData(ye(r)),r.parentNode&&(n&&se(r)&&be(ye(r,"script")),r.parentNode.removeChild(r));return e}_.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,a,i,o,s=e.cloneNode(!0),u=se(e);if(!v.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!_.isXMLDoc(e))for(o=ye(s),r=0,a=(i=ye(e)).length;r<a;r++)Fe(i[r],o[r]);if(t)if(n)for(i=i||ye(e),o=o||ye(s),r=0,a=i.length;r<a;r++)De(i[r],o[r]);else De(e,s);return(o=ye(s,"script")).length>0&&be(o,!u&&ye(e,"script")),s},cleanData:function(e){for(var t,n,r,a=_.event.special,i=0;void 0!==(n=e[i]);i++)if(Y(n)){if(t=n[Q.expando]){if(t.events)for(r in t.events)a[r]?_.event.remove(n,r):_.removeEvent(n,r,t.handle);n[Q.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),_.fn.extend({detach:function(e){return Le(this,e,!0)},remove:function(e){return Le(this,e)},text:function(e){return Z(this,(function(e){return void 0===e?_.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Pe(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Re(this,e).appendChild(e)}))},prepend:function(){return Pe(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Re(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Pe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Pe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(_.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return _.clone(this,e,t)}))},html:function(e){return Z(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"===typeof e&&!Ce.test(e)&&!ge[(me.exec(e)||["",""])[1].toLowerCase()]){e=_.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(_.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(a){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Pe(this,arguments,(function(t){var n=this.parentNode;_.inArray(this,e)<0&&(_.cleanData(ye(this)),n&&n.replaceChild(t,this))}),e)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){_.fn[e]=function(e){for(var n,r=[],a=_(e),i=a.length-1,o=0;o<=i;o++)n=o===i?this:this.clone(!0),_(a[o])[t](n),c.apply(r,n.get());return this.pushStack(r)}}));var ze=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),Be=/^--/,We=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Ve=function(e,t,n){var r,a,i={};for(a in t)i[a]=e.style[a],e.style[a]=t[a];for(a in r=n.call(e),t)e.style[a]=i[a];return r},je=new RegExp(ie.join("|"),"i"),Ue=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g");function He(e,t,n){var r,a,i,o,s=Be.test(t),u=e.style;return(n=n||We(e))&&(o=n.getPropertyValue(t)||n[t],s&&(o=o.replace(Ue,"$1")),""!==o||se(e)||(o=_.style(e,t)),!v.pixelBoxStyles()&&ze.test(o)&&je.test(t)&&(r=u.width,a=u.minWidth,i=u.maxWidth,u.minWidth=u.maxWidth=u.width=o,o=n.width,u.width=r,u.minWidth=a,u.maxWidth=i)),void 0!==o?o+"":o}function Ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",oe.appendChild(c).appendChild(l);var e=r.getComputedStyle(l);n="1%"!==e.top,u=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),a=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),oe.removeChild(c),l=null}}function t(e){return Math.round(parseFloat(e))}var n,a,i,o,s,u,c=b.createElement("div"),l=b.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===l.style.backgroundClip,_.extend(v,{boxSizingReliable:function(){return e(),a},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,a;return null==s&&(e=b.createElement("table"),t=b.createElement("tr"),n=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",oe.appendChild(e).appendChild(t).appendChild(n),a=r.getComputedStyle(t),s=parseInt(a.height,10)+parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10)===t.offsetHeight,oe.removeChild(e)),s}}))}();var Ge=["Webkit","Moz","ms"],qe=b.createElement("div").style,Ke={};function Xe(e){var t=_.cssProps[e]||Ke[e];return t||(e in qe?e:Ke[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Ge.length;n--;)if((e=Ge[n]+t)in qe)return e}(e)||e)}var Ye=/^(none|table(?!-c[ea]).+)/,$e={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:"0",fontWeight:"400"};function Je(e,t,n){var r=ae.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function et(e,t,n,r,a,i){var o="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(u+=_.css(e,n+ie[o],!0,a)),r?("content"===n&&(u-=_.css(e,"padding"+ie[o],!0,a)),"margin"!==n&&(u-=_.css(e,"border"+ie[o]+"Width",!0,a))):(u+=_.css(e,"padding"+ie[o],!0,a),"padding"!==n?u+=_.css(e,"border"+ie[o]+"Width",!0,a):s+=_.css(e,"border"+ie[o]+"Width",!0,a));return!r&&i>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-u-s-.5))||0),u}function tt(e,t,n){var r=We(e),a=(!v.boxSizingReliable()||n)&&"border-box"===_.css(e,"boxSizing",!1,r),i=a,o=He(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(ze.test(o)){if(!n)return o;o="auto"}return(!v.boxSizingReliable()&&a||!v.reliableTrDimensions()&&A(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===_.css(e,"display",!1,r))&&e.getClientRects().length&&(a="border-box"===_.css(e,"boxSizing",!1,r),(i=s in e)&&(o=e[s])),(o=parseFloat(o)||0)+et(e,t,n||(a?"border":"content"),i,r,o)+"px"}function nt(e,t,n,r,a){return new nt.prototype.init(e,t,n,r,a)}_.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=He(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,i,o,s=X(t),u=Be.test(t),c=e.style;if(u||(t=Xe(s)),o=_.cssHooks[t]||_.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(a=o.get(e,!1,r))?a:c[t];"string"===(i=typeof n)&&(a=ae.exec(n))&&a[1]&&(n=le(e,t,a),i="number"),null!=n&&n===n&&("number"!==i||u||(n+=a&&a[3]||(_.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(u?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var a,i,o,s=X(t);return Be.test(t)||(t=Xe(s)),(o=_.cssHooks[t]||_.cssHooks[s])&&"get"in o&&(a=o.get(e,!0,n)),void 0===a&&(a=He(e,t,r)),"normal"===a&&t in Qe&&(a=Qe[t]),""===n||n?(i=parseFloat(a),!0===n||isFinite(i)?i||0:a):a}}),_.each(["height","width"],(function(e,t){_.cssHooks[t]={get:function(e,n,r){if(n)return!Ye.test(_.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,t,r):Ve(e,$e,(function(){return tt(e,t,r)}))},set:function(e,n,r){var a,i=We(e),o=!v.scrollboxSize()&&"absolute"===i.position,s=(o||r)&&"border-box"===_.css(e,"boxSizing",!1,i),u=r?et(e,t,r,s,i):0;return s&&o&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-et(e,t,"border",!1,i)-.5)),u&&(a=ae.exec(n))&&"px"!==(a[3]||"px")&&(e.style[t]=n,n=_.css(e,t)),Je(0,n,u)}}})),_.cssHooks.marginLeft=Ze(v.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(He(e,"marginLeft"))||e.getBoundingClientRect().left-Ve(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),_.each({margin:"",padding:"",border:"Width"},(function(e,t){_.cssHooks[e+t]={expand:function(n){for(var r=0,a={},i="string"===typeof n?n.split(" "):[n];r<4;r++)a[e+ie[r]+t]=i[r]||i[r-2]||i[0];return a}},"margin"!==e&&(_.cssHooks[e+t].set=Je)})),_.fn.extend({css:function(e,t){return Z(this,(function(e,t,n){var r,a,i={},o=0;if(Array.isArray(t)){for(r=We(e),a=t.length;o<a;o++)i[t[o]]=_.css(e,t[o],!1,r);return i}return void 0!==n?_.style(e,t,n):_.css(e,t)}),e,t,arguments.length>1)}}),_.Tween=nt,nt.prototype={constructor:nt,init:function(e,t,n,r,a,i){this.elem=e,this.prop=n,this.easing=a||_.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(_.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];return this.options.duration?this.pos=t=_.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}},nt.prototype.init.prototype=nt.prototype,nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=_.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){_.fx.step[e.prop]?_.fx.step[e.prop](e):1!==e.elem.nodeType||!_.cssHooks[e.prop]&&null==e.elem.style[Xe(e.prop)]?e.elem[e.prop]=e.now:_.style(e.elem,e.prop,e.now+e.unit)}}},nt.propHooks.scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},_.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},(_.fx=nt.prototype.init).step={};var rt,at,it=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function st(){at&&(!1===b.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(st):r.setTimeout(st,_.fx.interval),_.fx.tick())}function ut(){return r.setTimeout((function(){rt=void 0})),rt=Date.now()}function ct(e,t){var n,r=0,a={height:e};for(t=t?1:0;r<4;r+=2-t)a["margin"+(n=ie[r])]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function lt(e,t,n){for(var r,a=(ft.tweeners[t]||[]).concat(ft.tweeners["*"]),i=0,o=a.length;i<o;i++)if(r=a[i].call(n,t,e))return r}function ft(e,t,n){var r,a,i=0,o=ft.prefilters.length,s=_.Deferred().always((function(){delete u.elem})),u=function(){if(a)return!1;for(var t=rt||ut(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),i=0,o=c.tweens.length;i<o;i++)c.tweens[i].run(r);return s.notifyWith(e,[c,r,n]),r<1&&o?n:(o||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:_.extend({},t),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},n),originalProperties:t,originalOptions:n,startTime:rt||ut(),duration:n.duration,tweens:[],createTween:function(t,n){var r=_.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(a)return this;for(a=!0;n<r;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),l=c.props;for(!function(e,t){var n,r,a,i,o;for(n in e)if(a=t[r=X(n)],i=e[n],Array.isArray(i)&&(a=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(o=_.cssHooks[r])&&"expand"in o)for(n in i=o.expand(i),delete e[r],i)n in e||(e[n]=i[n],t[n]=a);else t[r]=a}(l,c.opts.specialEasing);i<o;i++)if(r=ft.prefilters[i].call(c,e,l,c.opts))return g(r.stop)&&(_._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return _.map(l,lt,c),g(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),_.fx.timer(_.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c}_.Animation=_.extend(ft,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return le(n.elem,e,ae.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(z);for(var n,r=0,a=e.length;r<a;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,a,i,o,s,u,c,l,f="width"in t||"height"in t,h=this,p={},d=e.style,m=e.nodeType&&ce(e),v=Q.get(e,"fxshow");for(r in n.queue||(null==(o=_._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,h.always((function(){h.always((function(){o.unqueued--,_.queue(e,"fx").length||o.empty.fire()}))}))),t)if(a=t[r],it.test(a)){if(delete t[r],i=i||"toggle"===a,a===(m?"hide":"show")){if("show"!==a||!v||void 0===v[r])continue;m=!0}p[r]=v&&v[r]||_.style(e,r)}if((u=!_.isEmptyObject(t))||!_.isEmptyObject(p))for(r in f&&1===e.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],null==(c=v&&v.display)&&(c=Q.get(e,"display")),"none"===(l=_.css(e,"display"))&&(c?l=c:(pe([e],!0),c=e.style.display||c,l=_.css(e,"display"),pe([e]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===_.css(e,"float")&&(u||(h.done((function(){d.display=c})),null==c&&(l=d.display,c="none"===l?"":l)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",h.always((function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}))),u=!1,p)u||(v?"hidden"in v&&(m=v.hidden):v=Q.access(e,"fxshow",{display:c}),i&&(v.hidden=!m),m&&pe([e],!0),h.done((function(){for(r in m||pe([e]),Q.remove(e,"fxshow"),p)_.style(e,r,p[r])}))),u=lt(m?v[r]:0,r,h),r in v||(v[r]=u.start,m&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),_.speed=function(e,t,n){var r=e&&"object"===typeof e?_.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return _.fx.off?r.duration=0:"number"!==typeof r.duration&&(r.duration in _.fx.speeds?r.duration=_.fx.speeds[r.duration]:r.duration=_.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&_.dequeue(this,r.queue)},r},_.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var a=_.isEmptyObject(e),i=_.speed(t,n,r),o=function(){var t=ft(this,_.extend({},e),i);(a||Q.get(this,"finish"))&&t.stop(!0)};return o.finish=o,a||!1===i.queue?this.each(o):this.queue(i.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!==typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,a=null!=e&&e+"queueHooks",i=_.timers,o=Q.get(this);if(a)o[a]&&o[a].stop&&r(o[a]);else for(a in o)o[a]&&o[a].stop&&ot.test(a)&&r(o[a]);for(a=i.length;a--;)i[a].elem!==this||null!=e&&i[a].queue!==e||(i[a].anim.stop(n),t=!1,i.splice(a,1));!t&&n||_.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=Q.get(this),r=n[e+"queue"],a=n[e+"queueHooks"],i=_.timers,o=r?r.length:0;for(n.finish=!0,_.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),_.each(["toggle","show","hide"],(function(e,t){var n=_.fn[t];_.fn[t]=function(e,r,a){return null==e||"boolean"===typeof e?n.apply(this,arguments):this.animate(ct(t,!0),e,r,a)}})),_.each({slideDown:ct("show"),slideUp:ct("hide"),slideToggle:ct("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){_.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),_.timers=[],_.fx.tick=function(){var e,t=0,n=_.timers;for(rt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||_.fx.stop(),rt=void 0},_.fx.timer=function(e){_.timers.push(e),_.fx.start()},_.fx.interval=13,_.fx.start=function(){at||(at=!0,st())},_.fx.stop=function(){at=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(e,t){return e=_.fx&&_.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var a=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(a)}}))},function(){var e=b.createElement("input"),t=b.createElement("select").appendChild(b.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=b.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var ht,pt=_.expr.attrHandle;_.fn.extend({attr:function(e,t){return Z(this,_.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){_.removeAttr(this,e)}))}}),_.extend({attr:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return"undefined"===typeof e.getAttribute?_.prop(e,t,n):(1===i&&_.isXMLDoc(e)||(a=_.attrHooks[t.toLowerCase()]||(_.expr.match.bool.test(t)?ht:void 0)),void 0!==n?null===n?void _.removeAttr(e,t):a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:(e.setAttribute(t,n+""),n):a&&"get"in a&&null!==(r=a.get(e,t))?r:null==(r=_.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,a=t&&t.match(z);if(a&&1===e.nodeType)for(;n=a[r++];)e.removeAttribute(n)}}),ht={set:function(e,t,n){return!1===t?_.removeAttr(e,n):e.setAttribute(n,n),n}},_.each(_.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=pt[t]||_.find.attr;pt[t]=function(e,t,r){var a,i,o=t.toLowerCase();return r||(i=pt[o],pt[o]=a,a=null!=n(e,t,r)?o:null,pt[o]=i),a}}));var dt=/^(?:input|select|textarea|button)$/i,mt=/^(?:a|area)$/i;function vt(e){return(e.match(z)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function yt(e){return Array.isArray(e)?e:"string"===typeof e&&e.match(z)||[]}_.fn.extend({prop:function(e,t){return Z(this,_.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[_.propFix[e]||e]}))}}),_.extend({prop:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&_.isXMLDoc(e)||(t=_.propFix[t]||t,a=_.propHooks[t]),void 0!==n?a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:e[t]=n:a&&"get"in a&&null!==(r=a.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=_.find.attr(e,"tabindex");return t?parseInt(t,10):dt.test(e.nodeName)||mt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(_.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){_.propFix[this.toLowerCase()]=this})),_.fn.extend({addClass:function(e){var t,n,r,a,i,o;return g(e)?this.each((function(t){_(this).addClass(e.call(this,t,gt(this)))})):(t=yt(e)).length?this.each((function(){if(r=gt(this),n=1===this.nodeType&&" "+vt(r)+" "){for(i=0;i<t.length;i++)a=t[i],n.indexOf(" "+a+" ")<0&&(n+=a+" ");o=vt(n),r!==o&&this.setAttribute("class",o)}})):this},removeClass:function(e){var t,n,r,a,i,o;return g(e)?this.each((function(t){_(this).removeClass(e.call(this,t,gt(this)))})):arguments.length?(t=yt(e)).length?this.each((function(){if(r=gt(this),n=1===this.nodeType&&" "+vt(r)+" "){for(i=0;i<t.length;i++)for(a=t[i];n.indexOf(" "+a+" ")>-1;)n=n.replace(" "+a+" "," ");o=vt(n),r!==o&&this.setAttribute("class",o)}})):this:this.attr("class","")},toggleClass:function(e,t){var n,r,a,i,o=typeof e,s="string"===o||Array.isArray(e);return g(e)?this.each((function(n){_(this).toggleClass(e.call(this,n,gt(this),t),t)})):"boolean"===typeof t&&s?t?this.addClass(e):this.removeClass(e):(n=yt(e),this.each((function(){if(s)for(i=_(this),a=0;a<n.length;a++)r=n[a],i.hasClass(r)?i.removeClass(r):i.addClass(r);else void 0!==e&&"boolean"!==o||((r=gt(this))&&Q.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":Q.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+vt(gt(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;_.fn.extend({val:function(e){var t,n,r,a=this[0];return arguments.length?(r=g(e),this.each((function(n){var a;1===this.nodeType&&(null==(a=r?e.call(this,n,_(this).val()):e)?a="":"number"===typeof a?a+="":Array.isArray(a)&&(a=_.map(a,(function(e){return null==e?"":e+""}))),(t=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))}))):a?(t=_.valHooks[a.type]||_.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(a,"value"))?n:"string"===typeof(n=a.value)?n.replace(bt,""):null==n?"":n:void 0}}),_.extend({valHooks:{option:{get:function(e){var t=_.find.attr(e,"value");return null!=t?t:vt(_.text(e))}},select:{get:function(e){var t,n,r,a=e.options,i=e.selectedIndex,o="select-one"===e.type,s=o?null:[],u=o?i+1:a.length;for(r=i<0?u:o?i:0;r<u;r++)if(((n=a[r]).selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=_(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,a=e.options,i=_.makeArray(t),o=a.length;o--;)((r=a[o]).selected=_.inArray(_.valHooks.option.get(r),i)>-1)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),_.each(["radio","checkbox"],(function(){_.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=_.inArray(_(e).val(),t)>-1}},v.checkOn||(_.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),v.focusin="onfocusin"in r;var xt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};_.extend(_.event,{trigger:function(e,t,n,a){var i,o,s,u,c,l,f,h,d=[n||b],m=p.call(e,"type")?e.type:e,v=p.call(e,"namespace")?e.namespace.split("."):[];if(o=h=s=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!xt.test(m+_.event.triggered)&&(m.indexOf(".")>-1&&(v=m.split("."),m=v.shift(),v.sort()),c=m.indexOf(":")<0&&"on"+m,(e=e[_.expando]?e:new _.Event(m,"object"===typeof e&&e)).isTrigger=a?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:_.makeArray(t,[e]),f=_.event.special[m]||{},a||!f.trigger||!1!==f.trigger.apply(n,t))){if(!a&&!f.noBubble&&!y(n)){for(u=f.delegateType||m,xt.test(u+m)||(o=o.parentNode);o;o=o.parentNode)d.push(o),s=o;s===(n.ownerDocument||b)&&d.push(s.defaultView||s.parentWindow||r)}for(i=0;(o=d[i++])&&!e.isPropagationStopped();)h=o,e.type=i>1?u:f.bindType||m,(l=(Q.get(o,"events")||Object.create(null))[e.type]&&Q.get(o,"handle"))&&l.apply(o,t),(l=c&&o[c])&&l.apply&&Y(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=m,a||e.isDefaultPrevented()||f._default&&!1!==f._default.apply(d.pop(),t)||!Y(n)||c&&g(n[m])&&!y(n)&&((s=n[c])&&(n[c]=null),_.event.triggered=m,e.isPropagationStopped()&&h.addEventListener(m,wt),n[m](),e.isPropagationStopped()&&h.removeEventListener(m,wt),_.event.triggered=void 0,s&&(n[c]=s)),e.result}},simulate:function(e,t,n){var r=_.extend(new _.Event,n,{type:e,isSimulated:!0});_.event.trigger(r,null,t)}}),_.fn.extend({trigger:function(e,t){return this.each((function(){_.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return _.event.trigger(e,t,n,!0)}}),v.focusin||_.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){_.event.simulate(t,e.target,_.event.fix(e))};_.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,a=Q.access(r,t);a||r.addEventListener(e,n,!0),Q.access(r,t,(a||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,a=Q.access(r,t)-1;a?Q.access(r,t,a):(r.removeEventListener(e,n,!0),Q.remove(r,t))}}}));var kt=r.location,St={guid:Date.now()},_t=/\?/;_.parseXML=function(e){var t,n;if(!e||"string"!==typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(a){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||_.error("Invalid XML: "+(n?_.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Tt=/\[\]$/,It=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,Ct=/^(?:input|select|textarea|keygen)/i;function Et(e,t,n,r){var a;if(Array.isArray(t))_.each(t,(function(t,a){n||Tt.test(e)?r(e,a):Et(e+"["+("object"===typeof a&&null!=a?t:"")+"]",a,n,r)}));else if(n||"object"!==k(t))r(e,t);else for(a in t)Et(e+"["+a+"]",t[a],n,r)}_.param=function(e,t){var n,r=[],a=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!_.isPlainObject(e))_.each(e,(function(){a(this.name,this.value)}));else for(n in e)Et(n,e[n],t,a);return r.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=_.prop(this,"elements");return e?_.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!_(this).is(":disabled")&&Ct.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!de.test(e))})).map((function(e,t){var n=_(this).val();return null==n?null:Array.isArray(n)?_.map(n,(function(e){return{name:t.name,value:e.replace(It,"\r\n")}})):{name:t.name,value:n.replace(It,"\r\n")}})).get()}});var At=/%20/g,Rt=/#.*$/,Ot=/([?&])_=[^&]*/,Mt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Dt=/^(?:GET|HEAD)$/,Ft=/^\/\//,Pt={},Lt={},zt="*/".concat("*"),Bt=b.createElement("a");function Wt(e){return function(t,n){"string"!==typeof t&&(n=t,t="*");var r,a=0,i=t.toLowerCase().match(z)||[];if(g(n))for(;r=i[a++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Vt(e,t,n,r){var a={},i=e===Lt;function o(s){var u;return a[s]=!0,_.each(e[s]||[],(function(e,s){var c=s(t,n,r);return"string"!==typeof c||i||a[c]?i?!(u=c):void 0:(t.dataTypes.unshift(c),o(c),!1)})),u}return o(t.dataTypes[0])||!a["*"]&&o("*")}function jt(e,t){var n,r,a=_.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((a[n]?e:r||(r={}))[n]=t[n]);return r&&_.extend(!0,e,r),e}Bt.href=kt.href,_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(kt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?jt(jt(e,_.ajaxSettings),t):jt(_.ajaxSettings,e)},ajaxPrefilter:Wt(Pt),ajaxTransport:Wt(Lt),ajax:function(e,t){"object"===typeof e&&(t=e,e=void 0);var n,a,i,o,s,u,c,l,f,h,p=_.ajaxSetup({},t=t||{}),d=p.context||p,m=p.context&&(d.nodeType||d.jquery)?_(d):_.event,v=_.Deferred(),g=_.Callbacks("once memory"),y=p.statusCode||{},x={},w={},k="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(c){if(!o)for(o={};t=Mt.exec(i);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?i:null},setRequestHeader:function(e,t){return null==c&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)S.always(e[S.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||k;return n&&n.abort(t),T(0,t),this}};if(v.promise(S),p.url=((e||p.url||kt.href)+"").replace(Ft,kt.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(z)||[""],null==p.crossDomain){u=b.createElement("a");try{u.href=p.url,u.href=u.href,p.crossDomain=Bt.protocol+"//"+Bt.host!==u.protocol+"//"+u.host}catch(I){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!==typeof p.data&&(p.data=_.param(p.data,p.traditional)),Vt(Pt,p,t,S),c)return S;for(f in(l=_.event&&p.global)&&0===_.active++&&_.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Dt.test(p.type),a=p.url.replace(Rt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(At,"+")):(h=p.url.slice(a.length),p.data&&(p.processData||"string"===typeof p.data)&&(a+=(_t.test(a)?"&":"?")+p.data,delete p.data),!1===p.cache&&(a=a.replace(Ot,"$1"),h=(_t.test(a)?"&":"?")+"_="+St.guid+++h),p.url=a+h),p.ifModified&&(_.lastModified[a]&&S.setRequestHeader("If-Modified-Since",_.lastModified[a]),_.etag[a]&&S.setRequestHeader("If-None-Match",_.etag[a])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+zt+"; q=0.01":""):p.accepts["*"]),p.headers)S.setRequestHeader(f,p.headers[f]);if(p.beforeSend&&(!1===p.beforeSend.call(d,S,p)||c))return S.abort();if(k="abort",g.add(p.complete),S.done(p.success),S.fail(p.error),n=Vt(Lt,p,t,S)){if(S.readyState=1,l&&m.trigger("ajaxSend",[S,p]),c)return S;p.async&&p.timeout>0&&(s=r.setTimeout((function(){S.abort("timeout")}),p.timeout));try{c=!1,n.send(x,T)}catch(I){if(c)throw I;T(-1,I)}}else T(-1,"No Transport");function T(e,t,o,u){var f,h,b,x,w,k=t;c||(c=!0,s&&r.clearTimeout(s),n=void 0,i=u||"",S.readyState=e>0?4:0,f=e>=200&&e<300||304===e,o&&(x=function(e,t,n){for(var r,a,i,o,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){u.unshift(a);break}if(u[0]in n)i=u[0];else{for(a in n){if(!u[0]||e.converters[a+" "+u[0]]){i=a;break}o||(o=a)}i=i||o}if(i)return i!==u[0]&&u.unshift(i),n[i]}(p,S,o)),!f&&_.inArray("script",p.dataTypes)>-1&&_.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),x=function(e,t,n,r){var a,i,o,s,u,c={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(i=l.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=i,i=l.shift())if("*"===i)i=u;else if("*"!==u&&u!==i){if(!(o=c[u+" "+i]||c["* "+i]))for(a in c)if((s=a.split(" "))[1]===i&&(o=c[u+" "+s[0]]||c["* "+s[0]])){!0===o?o=c[a]:!0!==c[a]&&(i=s[0],l.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(I){return{state:"parsererror",error:o?I:"No conversion from "+u+" to "+i}}}return{state:"success",data:t}}(p,x,S,f),f?(p.ifModified&&((w=S.getResponseHeader("Last-Modified"))&&(_.lastModified[a]=w),(w=S.getResponseHeader("etag"))&&(_.etag[a]=w)),204===e||"HEAD"===p.type?k="nocontent":304===e?k="notmodified":(k=x.state,h=x.data,f=!(b=x.error))):(b=k,!e&&k||(k="error",e<0&&(e=0))),S.status=e,S.statusText=(t||k)+"",f?v.resolveWith(d,[h,k,S]):v.rejectWith(d,[S,k,b]),S.statusCode(y),y=void 0,l&&m.trigger(f?"ajaxSuccess":"ajaxError",[S,p,f?h:b]),g.fireWith(d,[S,k]),l&&(m.trigger("ajaxComplete",[S,p]),--_.active||_.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return _.get(e,t,n,"json")},getScript:function(e,t){return _.get(e,void 0,t,"script")}}),_.each(["get","post"],(function(e,t){_[t]=function(e,n,r,a){return g(n)&&(a=a||r,r=n,n=void 0),_.ajax(_.extend({url:e,type:t,dataType:a,data:n,success:r},_.isPlainObject(e)&&e))}})),_.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),_._evalUrl=function(e,t,n){return _.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){_.globalEval(e,t,n)}})},_.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=_(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return g(e)?this.each((function(t){_(this).wrapInner(e.call(this,t))})):this.each((function(){var t=_(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=g(e);return this.each((function(n){_(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){_(this).replaceWith(this.childNodes)})),this}}),_.expr.pseudos.hidden=function(e){return!_.expr.pseudos.visible(e)},_.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},Ht=_.ajaxSettings.xhr();v.cors=!!Ht&&"withCredentials"in Ht,v.ajax=Ht=!!Ht,_.ajaxTransport((function(e){var t,n;if(v.cors||Ht&&!e.crossDomain)return{send:function(a,i){var o,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];for(o in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)s.setRequestHeader(o,a[o]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!==typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Ut[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!==typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout((function(){t&&n()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}})),_.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return _.globalEval(e),e}}}),_.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),_.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,a){t=_("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&a("error"===e.type?404:200,e.type)}),b.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Zt=[],Gt=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Zt.pop()||_.expando+"_"+St.guid++;return this[e]=!0,e}}),_.ajaxPrefilter("json jsonp",(function(e,t,n){var a,i,o,s=!1!==e.jsonp&&(Gt.test(e.url)?"url":"string"===typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return a=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Gt,"$1"+a):!1!==e.jsonp&&(e.url+=(_t.test(e.url)?"&":"?")+e.jsonp+"="+a),e.converters["script json"]=function(){return o||_.error(a+" was not called"),o[0]},e.dataTypes[0]="json",i=r[a],r[a]=function(){o=arguments},n.always((function(){void 0===i?_(r).removeProp(a):r[a]=i,e[a]&&(e.jsonpCallback=t.jsonpCallback,Zt.push(a)),o&&g(i)&&i(o[0]),o=i=void 0})),"script"})),v.createHTMLDocument=function(){var e=b.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),_.parseHTML=function(e,t,n){return"string"!==typeof e?[]:("boolean"===typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((r=(t=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,t.head.appendChild(r)):t=b),i=!n&&[],(a=R.exec(e))?[t.createElement(a[1])]:(a=we([e],t,i),i&&i.length&&_(i).remove(),_.merge([],a.childNodes)));var r,a,i},_.fn.load=function(e,t,n){var r,a,i,o=this,s=e.indexOf(" ");return s>-1&&(r=vt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"===typeof t&&(a="POST"),o.length>0&&_.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done((function(e){i=arguments,o.html(r?_("<div>").append(_.parseHTML(e)).find(r):e)})).always(n&&function(e,t){o.each((function(){n.apply(this,i||[e.responseText,t,e])}))}),this},_.expr.pseudos.animated=function(e){return _.grep(_.timers,(function(t){return e===t.elem})).length},_.offset={setOffset:function(e,t,n){var r,a,i,o,s,u,c=_.css(e,"position"),l=_(e),f={};"static"===c&&(e.style.position="relative"),s=l.offset(),i=_.css(e,"top"),u=_.css(e,"left"),("absolute"===c||"fixed"===c)&&(i+u).indexOf("auto")>-1?(o=(r=l.position()).top,a=r.left):(o=parseFloat(i)||0,a=parseFloat(u)||0),g(t)&&(t=t.call(e,n,_.extend({},s))),null!=t.top&&(f.top=t.top-s.top+o),null!=t.left&&(f.left=t.left-s.left+a),"using"in t?t.using.call(e,f):l.css(f)}},_.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){_.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],a={top:0,left:0};if("fixed"===_.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===_.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((a=_(e).offset()).top+=_.css(e,"borderTopWidth",!0),a.left+=_.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-_.css(r,"marginTop",!0),left:t.left-a.left-_.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===_.css(e,"position");)e=e.offsetParent;return e||oe}))}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;_.fn[e]=function(r){return Z(this,(function(e,r,a){var i;if(y(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===a)return i?i[t]:e[r];i?i.scrollTo(n?i.pageXOffset:a,n?a:i.pageYOffset):e[r]=a}),e,r,arguments.length)}})),_.each(["top","left"],(function(e,t){_.cssHooks[t]=Ze(v.pixelPosition,(function(e,n){if(n)return n=He(e,t),ze.test(n)?_(e).position()[t]+"px":n}))})),_.each({Height:"height",Width:"width"},(function(e,t){_.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){_.fn[r]=function(a,i){var o=arguments.length&&(n||"boolean"!==typeof a),s=n||(!0===a||!0===i?"margin":"border");return Z(this,(function(t,n,a){var i;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===a?_.css(t,n,s):_.style(t,n,a,s)}),t,o?a:void 0,o)}}))})),_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){_.fn[t]=function(e){return this.on(t,e)}})),_.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){_.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var qt=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;_.proxy=function(e,t){var n,r,a;if("string"===typeof t&&(n=e[t],t=e,e=n),g(e))return r=s.call(arguments,2),a=function(){return e.apply(t||this,r.concat(s.call(arguments)))},a.guid=e.guid=e.guid||_.guid++,a},_.holdReady=function(e){e?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=A,_.isFunction=g,_.isWindow=y,_.camelCase=X,_.type=k,_.now=Date.now,_.isNumeric=function(e){var t=_.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},_.trim=function(e){return null==e?"":(e+"").replace(qt,"$1")},void 0===(n=function(){return _}.apply(t,[]))||(e.exports=n);var Kt=r.jQuery,Xt=r.$;return _.noConflict=function(e){return r.$===_&&(r.$=Xt),e&&r.jQuery===_&&(r.jQuery=Kt),_},"undefined"===typeof a&&(r.jQuery=r.$=_),_}))},483:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||d}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||d}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var x=b.prototype=new y;x.constructor=b,m(x,g.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,a)&&!_.hasOwnProperty(a)&&(i[a]=t[a]);var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===i[a]&&(i[a]=u[a]);return{$$typeof:n,type:e,key:o,ref:s,props:i,_owner:S.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function E(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===i?"."+C(u,0):i,w(o)?(a="",null!=e&&(a=e.replace(N,"$&/")+"/"),E(o,t,a,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(N,"$&/")+"/")+e)),t.push(o)),1;if(u=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var l=i+C(s=e[c],c);u+=E(s,t,a,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=E(s=s.value,t,a,l=i+C(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function A(e,t,n){if(null==e)return e;var r=[],a=0;return E(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},M={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:M,ReactCurrentOwner:S};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)k.call(t,c)&&!_.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];a.children=u}return{$$typeof:n,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},9653:function(e,t,n){"use strict";e.exports=n(483)},5877:function(e){function t(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(a,i){var o=e.apply(n,r);function s(e){t(o,a,i,s,u,"next",e)}function u(e){t(o,a,i,s,u,"throw",e)}s(void 0)}))}}},7957:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},6780:function(e,t,n){e.exports=n(9727)},5410:function(){},8628:function(){},5042:function(){},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},5263:function(e,t,n){var r=n(8698).default;function a(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(i,s,u):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,n){var r=n(8698).default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(R){f=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),s=new C(r||[]);return o(i,"_invoke",{value:_(e,n,s)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}t.wrap=h;var d={};function m(){}function v(){}function g(){}var y={};f(y,u,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(E([])));x&&x!==n&&i.call(x,u)&&(y=x);var w=g.prototype=m.prototype=Object.create(y);function k(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,o,s,u){var c=p(e[a],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&i.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}})}function _(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return A()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=T(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=p(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function T(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=p(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function E(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:A}}function A(){return{value:void 0,done:!0}}return v.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=f(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,f(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},k(S.prototype),f(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new S(h(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(w),f(w,l,"Generator"),f(w,u,(function(){return this})),f(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=E,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;N(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},7326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},3144:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return a}})},4942:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},7462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},5987:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(3366);function a(e,t){if(null==e)return{};var n,a,i=(0,r.Z)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}n.d(t,{Z:function(){return r}})},9611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(3878);var a=n(181),i=n(5267);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||(0,a.Z)(e,t)||(0,i.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var a=n(9199),i=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,a.Z)(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(907);function a(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(i,o),i}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".635aedaa.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="practice:";n.l=function(r,a,i,o){if(e[r])e[r].push(a);else{var s,u;if(void 0!==i)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+i){s=f;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[a];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/Inpporter/",function(){var e={179:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise((function(n,r){a=e[t]=[n,r]}));r.push(a[2]=i);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,a[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var a,i,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)u(n)}for(t&&t(r);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkpractice=self.webpackChunkpractice||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),n.nc=void 0,function(){"use strict";var e={};n.r(e),n.d(e,{browserFiles:function(){return TT},browserHTTPRequest:function(){return LT},concatenateArrayBuffers:function(){return x_},copyModel:function(){return lT},decodeWeights:function(){return d_},encodeWeights:function(){return h_},fromMemory:function(){return jT},fromMemorySync:function(){return UT},getLoadHandlers:function(){return M_},getModelArtifactsForJSON:function(){return __},getModelArtifactsForJSONSync:function(){return S_},getModelArtifactsInfoForJSON:function(){return I_},getSaveHandlers:function(){return O_},getWeightSpecs:function(){return N_},http:function(){return PT},isHTTPScheme:function(){return DT},listModels:function(){return oT},loadWeights:function(){return ET},moveModel:function(){return hT},registerLoadRouter:function(){return R_},registerSaveRouter:function(){return A_},removeModel:function(){return uT},weightsLoaderFactory:function(){return RT},withSaveHandler:function(){return HT},withSaveHandlerSync:function(){return ZT}});var t={};n.r(t),n.d(t,{conv2d:function(){return RA},depthwiseConv2d:function(){return DA},matMul:function(){return FA}});var r={};n.r(r),n.d(r,{json:function(){return Qj}});var a={};n.r(a),n.d(a,{json:function(){return Jj}});var i={};n.r(i),n.d(i,{json:function(){return eU}});var o={};n.r(o),n.d(o,{json:function(){return tU}});var s={};n.r(s),n.d(s,{json:function(){return nU}});var u={};n.r(u),n.d(u,{json:function(){return rU}});var c={};n.r(c),n.d(c,{json:function(){return aU}});var l={};n.r(l),n.d(l,{json:function(){return iU}});var f={};n.r(f),n.d(f,{json:function(){return oU}});var h={};n.r(h),n.d(h,{json:function(){return sU}});var p={};n.r(p),n.d(p,{json:function(){return uU}});var d={};n.r(d),n.d(d,{json:function(){return cU}});var m={};n.r(m),n.d(m,{json:function(){return lU}});var v={};n.r(v),n.d(v,{json:function(){return fU}});var g={};n.r(g),n.d(g,{json:function(){return hU}});var y={};n.r(y),n.d(y,{json:function(){return pU}});var b={};n.r(b),n.d(b,{json:function(){return dU}});var x={};n.r(x),n.d(x,{json:function(){return mU}});var w={};n.r(w),n.d(w,{json:function(){return vU}});var k={};n.r(k),n.d(k,{OP_SCOPE_SUFFIX:function(){return o_},abs:function(){return iI},acos:function(){return oI},acosh:function(){return sI},add:function(){return uI},addN:function(){return cI},all:function(){return lI},any:function(){return fI},argMax:function(){return hI},argMin:function(){return pI},asin:function(){return dI},asinh:function(){return mI},atan:function(){return vI},atan2:function(){return gI},atanh:function(){return yI},avgPool:function(){return FI},avgPool3d:function(){return PI},basicLSTMCell:function(){return UI},batchNorm:function(){return ZI},batchNorm2d:function(){return GI},batchNorm3d:function(){return qI},batchNorm4d:function(){return KI},batchToSpaceND:function(){return HI},bincount:function(){return XI},booleanMaskAsync:function(){return uA},broadcastArgs:function(){return YI},broadcastTo:function(){return $I},buffer:function(){return yT},cast:function(){return bT},ceil:function(){return QI},clipByValue:function(){return eN},clone:function(){return xT},complex:function(){return u_},concat:function(){return LI},concat1d:function(){return tN},concat2d:function(){return nN},concat3d:function(){return rN},concat4d:function(){return aN},conv1d:function(){return oN},conv2d:function(){return iN},conv2dTranspose:function(){return uN},conv3d:function(){return cN},conv3dTranspose:function(){return fN},cos:function(){return hN},cosh:function(){return pN},cosineWindow:function(){return SA},cumprod:function(){return dN},cumsum:function(){return mN},denseBincount:function(){return vN},depthToSpace:function(){return gN},depthwiseConv2d:function(){return yN},diag:function(){return bN},dilation2d:function(){return xN},div:function(){return kN},divNoNan:function(){return IN},dot:function(){return NN},dropout:function(){return wA},einsum:function(){return CN},elu:function(){return EN},enclosingPowerOfTwo:function(){return kA},equal:function(){return SN},erf:function(){return AN},euclideanNorm:function(){return qN},exp:function(){return KN},expandDims:function(){return XN},expm1:function(){return YN},eye:function(){return QN},fft:function(){return FE},fill:function(){return JI},floor:function(){return JN},floorDiv:function(){return wN},fused:function(){return t},gather:function(){return eC},gatherND:function(){return xA},greater:function(){return tC},greaterEqual:function(){return nC},ifft:function(){return PE},imag:function(){return rC},image:function(){return HR},inTopKAsync:function(){return TA},irfft:function(){return LE},isFinite:function(){return aC},isInf:function(){return iC},isNaN:function(){return oC},leakyRelu:function(){return sC},less:function(){return uC},lessEqual:function(){return cC},linalg:function(){return ZR},linspace:function(){return lC},localResponseNormalization:function(){return fC},log:function(){return hC},log1p:function(){return pC},logSigmoid:function(){return gC},logSoftmax:function(){return bC},logSumExp:function(){return xC},logicalAnd:function(){return wC},logicalNot:function(){return kC},logicalOr:function(){return SC},logicalXor:function(){return _C},losses:function(){return GR},lowerBound:function(){return NC},matMul:function(){return zI},max:function(){return zN},maxPool:function(){return CC},maxPool3d:function(){return EC},maxPoolWithArgmax:function(){return AC},maximum:function(){return RC},mean:function(){return OC},meshgrid:function(){return FC},min:function(){return BN},minimum:function(){return PC},mirrorPad:function(){return LC},mod:function(){return zC},moments:function(){return BC},movingAverage:function(){return dA},mul:function(){return BI},multiRNNCell:function(){return WC},multinomial:function(){return VC},neg:function(){return mC},norm:function(){return GN},notEqual:function(){return jC},oneHot:function(){return UC},ones:function(){return DC},onesLike:function(){return HC},op:function(){return s_},outerProduct:function(){return ZC},pad:function(){return GC},pad1d:function(){return qC},pad2d:function(){return KC},pad3d:function(){return XC},pad4d:function(){return YC},pool:function(){return QC},pow:function(){return WN},prelu:function(){return JC},print:function(){return wT},prod:function(){return eE},raggedGather:function(){return tE},raggedTensorToTensor:function(){return nE},rand:function(){return rE},randomGamma:function(){return sE},randomNormal:function(){return uE},randomStandardNormal:function(){return cE},randomUniform:function(){return lE},range:function(){return fE},real:function(){return hE},reciprocal:function(){return pE},relu:function(){return dE},relu6:function(){return mE},reshape:function(){return DI},reverse:function(){return vE},reverse1d:function(){return gE},reverse2d:function(){return yE},reverse3d:function(){return bE},reverse4d:function(){return xE},rfft:function(){return BE},round:function(){return wE},rsqrt:function(){return kE},scalar:function(){return VN},scatterND:function(){return gA},searchSorted:function(){return IC},selu:function(){return SE},separableConv2d:function(){return _E},setdiff1dAsync:function(){return IE},sigmoid:function(){return WI},sign:function(){return NE},signal:function(){return UR},sin:function(){return CE},sinh:function(){return EE},slice:function(){return VI},slice1d:function(){return AE},slice2d:function(){return RE},slice3d:function(){return OE},slice4d:function(){return ME},softmax:function(){return DE},softplus:function(){return vC},spaceToBatchND:function(){return $C},sparse:function(){return qR},sparseToDense:function(){return bA},spectral:function(){return jR},split:function(){return zE},sqrt:function(){return jN},square:function(){return UN},squaredDifference:function(){return WE},squeeze:function(){return VE},stack:function(){return jE},step:function(){return UE},stridedSlice:function(){return HE},string:function(){return KR},sub:function(){return yC},sum:function(){return HN},tan:function(){return ZE},tanh:function(){return jI},tensor:function(){return l_},tensor1d:function(){return GE},tensor2d:function(){return qE},tensor3d:function(){return KT},tensor4d:function(){return KE},tensor5d:function(){return XE},tensor6d:function(){return YE},tile:function(){return $N},topk:function(){return $E},transpose:function(){return pA},truncatedNormal:function(){return QE},unique:function(){return JE},unsortedSegmentSum:function(){return eA},unstack:function(){return tA},upperBound:function(){return nA},variable:function(){return rA},where:function(){return _N},whereAsync:function(){return oA},zeros:function(){return MC},zerosLike:function(){return TN}});var S=n(2791),_=n(4164),T=n(9439),I=n(3433);function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var C=n(3144),E=n(9611);function A(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,E.Z)(e,t)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var M,D=n(1002),F=n(7326);function P(e,t){if(t&&("object"===(0,D.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,F.Z)(e)}function L(e){var t=O();return function(){var n,r=R(e);if(t){var a=R(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return P(this,n)}}function z(e,t,n){return z=O()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&(0,E.Z)(a,n.prototype),a},z.apply(null,arguments)}function B(e){var t="function"===typeof Map?new Map:void 0;return B=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return z(e,arguments,R(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,E.Z)(n,e)},B(e)}function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(M||(M={}));var V,j="popstate";function U(e){return{usr:e.state,key:e.key}}function H(e,t,n,r){return void 0===n&&(n=null),W({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?G(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function Z(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,a=void 0===r?"":r,i=e.hash,o=void 0===i?"":i;return a&&"?"!==a&&(n+="?"===a.charAt(0)?a:"?"+a),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function G(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function q(e){var t="undefined"!==typeof window&&"undefined"!==typeof window.location&&"null"!==window.location.origin?window.location.origin:"unknown://unknown",n="string"===typeof e?e:Z(e);return new URL(n,t)}function K(e,t,n,r){void 0===r&&(r={});var a=r,i=a.window,o=void 0===i?document.defaultView:i,s=a.v5Compat,u=void 0!==s&&s,c=o.history,l=M.Pop,f=null;function h(){l=M.Pop,f&&f({action:l,location:p.location})}var p={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(j,h),f=e,function(){o.removeEventListener(j,h),f=null}},createHref:function(e){return t(o,e)},encodeLocation:function(e){var t=q(Z(e));return W({},e,{pathname:t.pathname,search:t.search,hash:t.hash})},push:function(e,t){l=M.Push;var r=H(p.location,e,t);n&&n(r,e);var a=U(r),i=p.createHref(r);try{c.pushState(a,"",i)}catch(s){o.location.assign(i)}u&&f&&f({action:l,location:p.location})},replace:function(e,t){l=M.Replace;var r=H(p.location,e,t);n&&n(r,e);var a=U(r),i=p.createHref(r);c.replaceState(a,"",i),u&&f&&f({action:l,location:p.location})},go:function(e){return c.go(e)}};return p}function X(e,t,n){void 0===n&&(n="/");var r=re(("string"===typeof t?G(t):t).pathname||"/",n);if(null==r)return null;var a=Y(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(a);for(var i=null,o=0;null==i&&o<a.length;++o)i=ee(a[o],ne(r));return i}function Y(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,a){var i={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(ae(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));var o=ce([r,i.relativePath]),s=n.concat(i);e.children&&e.children.length>0&&(ae(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),Y(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:J(o,e.index),routesMeta:s})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(V||(V={}));var $=/^:\w+$/,Q=function(e){return"*"===e};function J(e,t){var n=e.split("/"),r=n.length;return n.some(Q)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!Q(e)})).reduce((function(e,t){return e+($.test(t)?3:""===t?1:10)}),r)}function ee(e,t){for(var n=e.routesMeta,r={},a="/",i=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===a?t:t.slice(a.length)||"/",l=te({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var f=s.route;i.push({params:r,pathname:ce([a,l.pathname]),pathnameBase:le(ce([a,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(a=ce([a,l.pathnameBase]))}return i}function te(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);ie("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");return[new RegExp(a,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=(0,T.Z)(n,2),a=r[0],i=r[1],o=t.match(a);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),l=i.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return ie(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{});return{params:l,pathname:s,pathnameBase:u,pattern:e}}function ne(e){try{return decodeURI(e)}catch(t){return ie(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function re(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function ae(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function ie(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function oe(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function se(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function ue(e,t,n,r){var a;void 0===r&&(r=!1),"string"===typeof e?a=G(e):(ae(!(a=W({},e)).pathname||!a.pathname.includes("?"),oe("?","pathname","search",a)),ae(!a.pathname||!a.pathname.includes("#"),oe("#","pathname","hash",a)),ae(!a.search||!a.search.includes("#"),oe("#","search","hash",a)));var i,o=""===e||""===a.pathname,s=o?"/":a.pathname;if(r||null==s)i=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;a.pathname=c.join("/")}i=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?G(e):e,r=n.pathname,a=n.search,i=void 0===a?"":a,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:fe(i),hash:he(s)}}(a,i),f=s&&"/"!==s&&s.endsWith("/"),h=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var ce=function(e){return e.join("/").replace(/\/\/+/g,"/")},le=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},fe=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},he=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},pe=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n)}(B(Error));var de=(0,C.Z)((function e(t,n,r){N(this,e),this.status=t,this.statusText=n||"",this.data=r}));function me(e){return e instanceof de}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var ve=new Set(["POST","PUT","PATCH","DELETE"]);new Set(["GET","HEAD"].concat((0,I.Z)(ve)));function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ge.apply(this,arguments)}var ye="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},be=S.useState,xe=S.useEffect,we=S.useLayoutEffect,ke=S.useDebugValue;function Se(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!ye(n,r)}catch(a){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement;var _e=S.createContext(null);var Te=S.createContext(null);var Ie=S.createContext(null);var Ne=S.createContext(null);var Ce=S.createContext(null);var Ee=S.createContext(null);var Ae=S.createContext({outlet:null,matches:[]});var Re=S.createContext(null);function Oe(){return null!=S.useContext(Ee)}function Me(){return Oe()||ae(!1),S.useContext(Ee).location}function De(){Oe()||ae(!1);var e=S.useContext(Ce),t=e.basename,n=e.navigator,r=S.useContext(Ae).matches,a=Me().pathname,i=JSON.stringify(se(r).map((function(e){return e.pathnameBase}))),o=S.useRef(!1);S.useEffect((function(){o.current=!0}));var s=S.useCallback((function(e,r){if(void 0===r&&(r={}),o.current)if("number"!==typeof e){var s=ue(e,JSON.parse(i),a,"path"===r.relative);"/"!==t&&(s.pathname="/"===s.pathname?t:ce([t,s.pathname])),(r.replace?n.replace:n.push)(s,r.state,r)}else n.go(e)}),[t,n,i,a]);return s}function Fe(e,t){var n=(void 0===t?{}:t).relative,r=S.useContext(Ae).matches,a=Me().pathname,i=JSON.stringify(se(r).map((function(e){return e.pathnameBase})));return S.useMemo((function(){return ue(e,JSON.parse(i),a,"path"===n)}),[e,i,a,n])}function Pe(){var e=function(){var e,t=S.useContext(Re),n=je(ze.UseRouteError),r=S.useContext(Ae),a=r.matches[r.matches.length-1];if(t)return t;return r||ae(!1),!a.route.id&&ae(!1),null==(e=n.errors)?void 0:e[a.route.id]}(),t=me(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unhandled Thrown Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),n?S.createElement("pre",{style:a},n):null,S.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",S.createElement("code",{style:i},"errorElement")," props on\xa0",S.createElement("code",{style:i},"<Route>")))}var Le,ze,Be=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return(0,C.Z)(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?S.createElement(Re.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(S.Component);function We(e){var t=e.routeContext,n=e.match,r=e.children,a=S.useContext(_e);return a&&n.route.errorElement&&(a._deepestRenderedBoundaryId=n.route.id),S.createElement(Ae.Provider,{value:t},r)}function Ve(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var r=e,a=null==n?void 0:n.errors;if(null!=a){var i=r.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));i>=0||ae(!1),r=r.slice(0,Math.min(r.length,i+1))}return r.reduceRight((function(e,i,o){var s=i.route.id?null==a?void 0:a[i.route.id]:null,u=n?i.route.errorElement||S.createElement(Pe,null):null,c=function(){return S.createElement(We,{match:i,routeContext:{outlet:e,matches:t.concat(r.slice(0,o+1))}},s?u:void 0!==i.route.element?i.route.element:e)};return n&&(i.route.errorElement||0===o)?S.createElement(Be,{location:n.location,component:u,error:s,children:c()}):c()}),null)}function je(e){var t=S.useContext(Ie);return t||ae(!1),t}!function(e){e.UseRevalidator="useRevalidator"}(Le||(Le={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(ze||(ze={}));var Ue;function He(e){ae(!1)}function Ze(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,a=void 0===r?null:r,i=e.location,o=e.navigationType,s=void 0===o?M.Pop:o,u=e.navigator,c=e.static,l=void 0!==c&&c;Oe()&&ae(!1);var f=n.replace(/^\/*/,"/"),h=S.useMemo((function(){return{basename:f,navigator:u,static:l}}),[f,u,l]);"string"===typeof i&&(i=G(i));var p=i,d=p.pathname,m=void 0===d?"/":d,v=p.search,g=void 0===v?"":v,y=p.hash,b=void 0===y?"":y,x=p.state,w=void 0===x?null:x,k=p.key,_=void 0===k?"default":k,T=S.useMemo((function(){var e=re(m,f);return null==e?null:{pathname:e,search:g,hash:b,state:w,key:_}}),[f,m,g,b,w,_]);return null==T?null:S.createElement(Ce.Provider,{value:h},S.createElement(Ee.Provider,{children:a,value:{location:T,navigationType:s}}))}function Ge(e){var t=e.children,n=e.location,r=S.useContext(Te);return function(e,t){Oe()||ae(!1);var n,r=S.useContext(Ie),a=S.useContext(Ae).matches,i=a[a.length-1],o=i?i.params:{},s=(i&&i.pathname,i?i.pathnameBase:"/"),u=(i&&i.route,Me());if(t){var c,l="string"===typeof t?G(t):t;"/"===s||(null==(c=l.pathname)?void 0:c.startsWith(s))||ae(!1),n=l}else n=u;var f=n.pathname||"/",h=X(e,{pathname:"/"===s?f:f.slice(s.length)||"/"}),p=Ve(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:ce([s,e.pathname]),pathnameBase:"/"===e.pathnameBase?s:ce([s,e.pathnameBase])})})),a,r||void 0);return t&&p?S.createElement(Ee.Provider,{value:{location:ge({pathname:"/",search:"",hash:"",state:null,key:"default"},n),navigationType:M.Pop}},p):p}(r&&!t?r.router.routes:Ke(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Ue||(Ue={}));var qe=new Promise((function(){}));S.Component;function Ke(e,t){void 0===t&&(t=[]);var n=[];return S.Children.forEach(e,(function(e,r){if(S.isValidElement(e))if(e.type!==S.Fragment){e.type!==He&&ae(!1),e.props.index&&e.props.children&&ae(!1);var a=[].concat((0,I.Z)(t),[r]),i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(i.children=Ke(e.props.children,a)),n.push(i)}else n.push.apply(n,Ke(e.props.children,t))})),n}function Xe(){return Xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xe.apply(this,arguments)}function Ye(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var $e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Qe(e){var t=e.basename,n=e.children,r=e.window,a=S.useRef();null==a.current&&(a.current=function(e){return void 0===e&&(e={}),K((function(e,t){var n=e.location;return H("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:Z(t)}),null,e)}({window:r,v5Compat:!0}));var i=a.current,o=S.useState({action:i.action,location:i.location}),s=(0,T.Z)(o,2),u=s[0],c=s[1];return S.useLayoutEffect((function(){return i.listen(c)}),[i]),S.createElement(Ze,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:i})}var Je=S.forwardRef((function(e,t){var n=e.onClick,r=e.relative,a=e.reloadDocument,i=e.replace,o=e.state,s=e.target,u=e.to,c=e.preventScrollReset,l=Ye(e,$e),f=function(e,t){var n=(void 0===t?{}:t).relative;Oe()||ae(!1);var r=S.useContext(Ce),a=r.basename,i=r.navigator,o=Fe(e,{relative:n}),s=o.hash,u=o.pathname,c=o.search,l=u;return"/"!==a&&(l="/"===u?a:ce([a,u])),i.createHref({pathname:l,search:c,hash:s})}(u,{relative:r}),h=function(e,t){var n=void 0===t?{}:t,r=n.target,a=n.replace,i=n.state,o=n.preventScrollReset,s=n.relative,u=De(),c=Me(),l=Fe(e,{relative:s});return S.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();var n=void 0!==a?a:Z(c)===Z(l);u(e,{replace:n,state:i,preventScrollReset:o,relative:s})}}),[c,u,l,a,i,r,e,o,s])}(u,{replace:i,state:o,target:s,preventScrollReset:c,relative:r});return S.createElement("a",Xe({},l,{href:f,onClick:a?n:function(e){n&&n(e),e.defaultPrevented||h(e)},ref:t,target:s}))}));var et,tt;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(et||(et={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(tt||(tt={}));function nt(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var rt="function"===typeof Symbol&&Symbol.observable||"@@observable",at=function(){return Math.random().toString(36).substring(7).split("").join(".")},it={INIT:"@@redux/INIT"+at(),REPLACE:"@@redux/REPLACE"+at(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+at()}};function ot(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function st(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(nt(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(nt(1));return n(st)(e,t)}if("function"!==typeof e)throw new Error(nt(2));var a=e,i=t,o=[],s=o,u=!1;function c(){s===o&&(s=o.slice())}function l(){if(u)throw new Error(nt(3));return i}function f(e){if("function"!==typeof e)throw new Error(nt(4));if(u)throw new Error(nt(5));var t=!0;return c(),s.push(e),function(){if(t){if(u)throw new Error(nt(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),o=null}}}function h(e){if(!ot(e))throw new Error(nt(7));if("undefined"===typeof e.type)throw new Error(nt(8));if(u)throw new Error(nt(9));try{u=!0,i=a(i,e)}finally{u=!1}for(var t=o=s,n=0;n<t.length;n++){(0,t[n])()}return e}function p(e){if("function"!==typeof e)throw new Error(nt(10));a=e,h({type:it.REPLACE})}function d(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(nt(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[rt]=function(){return this},e}return h({type:it.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:p})[rt]=d,r}var ut="persist:",ct="persist/FLUSH",lt="persist/REHYDRATE",ft="persist/PAUSE",ht="persist/PERSIST",pt="persist/PURGE",dt="persist/REGISTER";function mt(e){return mt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mt(e)}function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yt(e,t,n,r){r.debug;var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(n,!0).forEach((function(t){gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);return e&&"object"===mt(e)&&Object.keys(e).forEach((function(r){"_persist"!==r&&t[r]===n[r]&&(a[r]=e[r])})),a}function bt(e){var t,n=e.blacklist||null,r=e.whitelist||null,a=e.transforms||[],i=e.throttle||0,o="".concat(void 0!==e.keyPrefix?e.keyPrefix:ut).concat(e.key),s=e.storage;t=!1===e.serialize?function(e){return e}:"function"===typeof e.serialize?e.serialize:xt;var u=e.writeFailHandler||null,c={},l={},f=[],h=null,p=null;function d(){if(0===f.length)return h&&clearInterval(h),void(h=null);var e=f.shift(),n=a.reduce((function(t,n){return n.in(t,e,c)}),c[e]);if(void 0!==n)try{l[e]=t(n)}catch(r){console.error("redux-persist/createPersistoid: error serializing state",r)}else delete l[e];0===f.length&&(Object.keys(l).forEach((function(e){void 0===c[e]&&delete l[e]})),p=s.setItem(o,t(l)).catch(v))}function m(e){return(!r||-1!==r.indexOf(e)||"_persist"===e)&&(!n||-1===n.indexOf(e))}function v(e){u&&u(e)}return{update:function(e){Object.keys(e).forEach((function(t){m(t)&&c[t]!==e[t]&&-1===f.indexOf(t)&&f.push(t)})),Object.keys(c).forEach((function(t){void 0===e[t]&&m(t)&&-1===f.indexOf(t)&&void 0!==c[t]&&f.push(t)})),null===h&&(h=setInterval(d,i)),c=e},flush:function(){for(;0!==f.length;)d();return p||Promise.resolve()}}}function xt(e){return JSON.stringify(e)}function wt(e){var t,n=e.transforms||[],r="".concat(void 0!==e.keyPrefix?e.keyPrefix:ut).concat(e.key),a=e.storage;e.debug;return t=!1===e.deserialize?function(e){return e}:"function"===typeof e.deserialize?e.deserialize:kt,a.getItem(r).then((function(e){if(e)try{var r={},a=t(e);return Object.keys(a).forEach((function(e){r[e]=n.reduceRight((function(t,n){return n.out(t,e,a)}),t(a[e]))})),r}catch(i){throw i}}))}function kt(e){return JSON.parse(e)}function St(e){0}function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_t(n,!0).forEach((function(t){It(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_t(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function It(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ct(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(n,!0).forEach((function(t){Rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ot={registry:[],bootstrapped:!1},Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case dt:return At({},e,{registry:[].concat(Ct(e.registry),[t.key])});case lt:var n=e.registry.indexOf(t.key),r=Ct(e.registry);return r.splice(n,1),At({},e,{registry:r,bootstrapped:0===r.length});default:return e}};var Dt=n(5752),Ft=n(4942);function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){(0,Ft.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zt={login:!1,id:"",name:""},Bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),console.log(t.id),console.log(t.name),t.type){case"login":return Lt(Lt({},e),{},{login:!0,id:t.id,name:t.name});case"logout":return Lt(Lt({},e),{},{login:!1,id:"",name:""});default:return e}},Wt={key:"root",storage:Dt.Z},Vt=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var a=t[r];0,"function"===typeof e[a]&&(n[a]=e[a])}var i,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:it.INIT}))throw new Error(nt(12));if("undefined"===typeof n(void 0,{type:it.PROBE_UNKNOWN_ACTION()}))throw new Error(nt(13))}))}(n)}catch(s){i=s}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var r=!1,a={},s=0;s<o.length;s++){var u=o[s],c=n[u],l=e[u],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(nt(14))}a[u]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?a:e}}({User:Bt}),jt=function(e,t){var n=void 0!==e.version?e.version:-1,r=(e.debug,void 0===e.stateReconciler?yt:e.stateReconciler),a=e.getStoredState||wt,i=void 0!==e.timeout?e.timeout:5e3,o=null,s=!1,u=!0,c=function(e){return e._persist.rehydrated&&o&&!u&&o.update(e),e};return function(l,f){var h=l||{},p=h._persist,d=Nt(h,["_persist"]);if(f.type===ht){var m=!1,v=function(t,n){m||(f.rehydrate(e.key,t,n),m=!0)};if(i&&setTimeout((function(){!m&&v(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))}),i),u=!1,o||(o=bt(e)),p)return Tt({},t(d,f),{_persist:p});if("function"!==typeof f.rehydrate||"function"!==typeof f.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return f.register(e.key),a(e).then((function(t){(e.migrate||function(e,t){return Promise.resolve(e)})(t,n).then((function(e){v(e)}),(function(e){v(void 0,e)}))}),(function(e){v(void 0,e)})),Tt({},t(d,f),{_persist:{version:n,rehydrated:!1}})}if(f.type===pt)return s=!0,f.result(function(e){var t=e.storage,n="".concat(void 0!==e.keyPrefix?e.keyPrefix:ut).concat(e.key);return t.removeItem(n,St)}(e)),Tt({},t(d,f),{_persist:p});if(f.type===ct)return f.result(o&&o.flush()),Tt({},t(d,f),{_persist:p});if(f.type===ft)u=!0;else if(f.type===lt){if(s)return Tt({},d,{_persist:Tt({},p,{rehydrated:!0})});if(f.key===e.key){var g=t(d,f),y=f.payload,b=Tt({},!1!==r&&void 0!==y?r(y,l,g,e):g,{_persist:Tt({},p,{rehydrated:!0})});return c(b)}}if(!p)return t(l,f);var x=t(d,f);return x===d?l:c(Tt({},x,{_persist:p}))}}(Wt,Vt),Ut=st(jt),Ht=function(e,t,n){var r=n||!1,a=st(Mt,Ot,t&&t.enhancer?t.enhancer:void 0),i=function(e){a.dispatch({type:dt,key:e})},o=function(t,n,i){var o={type:lt,payload:n,err:i,key:t};e.dispatch(o),a.dispatch(o),r&&s.getState().bootstrapped&&(r(),r=!1)},s=At({},a,{purge:function(){var t=[];return e.dispatch({type:pt,result:function(e){t.push(e)}}),Promise.all(t)},flush:function(){var t=[];return e.dispatch({type:ct,result:function(e){t.push(e)}}),Promise.all(t)},pause:function(){e.dispatch({type:ft})},persist:function(){e.dispatch({type:ht,register:i,rehydrate:o})}});return t&&t.manualPersist||s.persist(),s}(Ut),Zt=n(7248),Gt=n(327);var qt=function(e){e()},Kt=function(){return qt},Xt=(0,S.createContext)(null);function Yt(){return(0,S.useContext)(Xt)}var $t=function(){throw new Error("uSES not initialized!")},Qt=$t,Jt=function(e,t){return e===t};function en(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=e===Xt?Yt:function(){return(0,S.useContext)(e)};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt;var r=t(),a=r.store,i=r.subscription,o=r.getServerState,s=Qt(i.addNestedSub,a.getState,o||a.getState,e,n);return(0,S.useDebugValue)(s),s}}var tn=en(),nn=n(2110),rn=n.n(nn),an=n(7441);var on={notify:function(){},get:function(){return[]}};function sn(e,t){var n,r=on;function a(){o.onStateChange&&o.onStateChange()}function i(){n||(n=t?t.addNestedSub(a):e.subscribe(a),r=function(){var e=Kt(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,a=n={callback:e,next:null,prev:n};return a.prev?a.prev.next=a:t=a,function(){r&&null!==t&&(r=!1,a.next?a.next.prev=a.prev:n=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}())}var o={addNestedSub:function(e){return i(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:a,isSubscribed:function(){return Boolean(n)},trySubscribe:i,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=on)},getListeners:function(){return r}};return o}var un=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?S.useLayoutEffect:S.useEffect;var cn=function(e){var t=e.store,n=e.context,r=e.children,a=e.serverState,i=(0,S.useMemo)((function(){var e=sn(t);return{store:t,subscription:e,getServerState:a?function(){return a}:void 0}}),[t,a]),o=(0,S.useMemo)((function(){return t.getState()}),[t]);un((function(){var e=i.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[i,o]);var s=n||Xt;return S.createElement(s.Provider,{value:i},r)};var ln;!function(e){Qt=e}(Gt.useSyncExternalStoreWithSelector),function(e){e}(Zt.useSyncExternalStore),ln=_.unstable_batchedUpdates,qt=ln;var fn=n(3329);var hn=function(){var e=tn((function(e){return e.User.login})),t=De(),n=(0,fn.jsxs)("div",{className:"navi-two",children:[(0,fn.jsx)(Je,{to:"/signin",className:"nav-right",id:"signin",children:"Sign In"}),(0,fn.jsx)(Je,{to:"/signup",className:"nav-right",id:"signup",children:"Sign Up"})]}),r=(0,fn.jsx)("div",{className:"navi-two",children:(0,fn.jsx)("h2",{style:{cursor:"pointer"},className:"nav-right",id:"signin",onClick:function(){Ut.dispatch({type:"logout"}),alert("\ub85c\uadf8\uc544\uc6c3 \ub418\uc5c8\uc2b5\ub2c8\ub2e4."),t("/")},children:"Logout"})});return(0,fn.jsx)("div",{children:(0,fn.jsx)("header",{children:(0,fn.jsxs)("div",{className:"navbar",children:[(0,fn.jsx)("span",{className:"navbar-logo",children:(0,fn.jsx)(Je,{to:"/",children:(0,fn.jsx)("img",{src:"./logo1.png",id:"logo-link",alt:"image error"})})}),(0,fn.jsxs)("div",{className:"navi-one",children:[e?(0,fn.jsx)(Je,{to:"/selectquestion",className:"nav-left",children:"\uba74\uc811 \uc5f0\uc2b5\ud558\uae30"}):(0,fn.jsx)(Je,{to:"/signin",className:"nav-left",children:"\uba74\uc811 \uc5f0\uc2b5\ud558\uae30"}),e?(0,fn.jsx)(Je,{to:"/question",className:"nav-left",children:"\uba74\uc811 \uc9c8\ubb38 \ub9ac\uc2a4\ud2b8"}):(0,fn.jsx)(Je,{to:"/signin",className:"nav-left",children:"\uba74\uc811 \uc9c8\ubb38 \ub9ac\uc2a4\ud2b8"}),e?(0,fn.jsx)(Je,{to:"/resultList",className:"nav-left",children:"\uba74\uc811 \ubd84\uc11d \uacb0\uacfc"}):(0,fn.jsx)(Je,{to:"/signin",className:"nav-left",children:"\uba74\uc811 \ubd84\uc11d \uacb0\uacfc"})]}),e?r:n]})})})},pn=n(6785),dn=n(8688),mn=n(9704),vn=n(8704);var gn=function(){return(0,fn.jsxs)("div",{className:"footer",children:[(0,fn.jsxs)("div",{className:"socialMedia",children:[(0,fn.jsx)(pn.Z,{}),(0,fn.jsx)(dn.Z,{}),(0,fn.jsx)(mn.Z,{}),(0,fn.jsx)(vn.Z,{})]}),(0,fn.jsx)("p",{children:"\xa9 2022 Inpporter.com"})]})};var yn=function(){var e=tn((function(e){return e.User.login}));return(0,fn.jsx)("div",{className:"background",style:{backgroundImage:"url(./bgimg5.png)",backgroundSize:"cover",width:"100%",height:"auto",backgroundRepeat:"repeat-y"},children:(0,fn.jsxs)("div",{className:"home",children:[(0,fn.jsxs)("div",{className:"leftSide",children:[(0,fn.jsxs)("h1",{children:["\ucd5c\uace0\uc758 \uba74\uc811\uc744 \uc704\ud55c",(0,fn.jsx)("br",{}),"\uc11c\ud3ec\ud130, \uc778\ud3ec\ud130"]}),(0,fn.jsx)("p",{children:"AI \ubd84\uc11d\uc744 \ud1b5\ud55c \uba74\uc811 \uc5f0\uc2b5\uc73c\ub85c \uafc8\uc758 \ud68c\uc0ac\uc5d0 \ud55c\uac78\uc74c \ub354 \ub2e4\uac00\uac00\uc138\uc694!"}),e?(0,fn.jsx)(Je,{to:"/selectquestion",children:(0,fn.jsx)("button",{children:"\ubc14\ub85c \uc2dc\uc791\ud558\uae30"})}):(0,fn.jsx)(Je,{to:"/signin",children:(0,fn.jsx)("button",{children:"\ubc14\ub85c \uc2dc\uc791\ud558\uae30"})})]}),(0,fn.jsx)("div",{className:"rightSide",style:{backgroundImage:"url(./mainimage.jpg)"}})]})})},bn=n(4569),xn=n.n(bn),wn=function(e){e.history;var t=De(),n=(0,S.useState)(""),r=(0,T.Z)(n,2),a=r[0],i=r[1],o=(0,S.useState)(""),s=(0,T.Z)(o,2),u=s[0],c=s[1];return(0,fn.jsx)("div",{className:"background",style:{backgroundImage:"url(./bgimg5.png)",backgroundSize:"cover",width:"100%",height:"auto",backgroundRepeat:"repeat-y"},children:(0,fn.jsxs)("form",{class:"SignForm",onSubmit:function(e){e.preventDefault();var n={id:a,pw:u};xn().post("http://localhost:5001/auth/login",n).then((function(e){!1===e.data.success&&("id not find"===e.data.msg&&alert("\ud574\ub2f9\ud558\ub294 ID\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),"pw not correct"===e.data.msg&&alert("\ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")),!0===e.data.success&&(alert("\ub85c\uadf8\uc778\uc5d0 \uc131\uacf5\ud558\uc600\uc2b5\ub2c8\ub2e4."),console.log(e.data),Ut.dispatch({type:"login",id:e.data.userId,name:e.data.name}),t("/"))})).catch((function(e){console.log(e)}))},children:[(0,fn.jsx)("h2",{class:"SignInHeader",children:"Inpporter Sign In"}),(0,fn.jsxs)("div",{class:"SignContent",children:[(0,fn.jsx)("label",{children:"ID"}),(0,fn.jsx)("input",{type:"string",placeholder:"\uc544\uc774\ub514",value:a,onChange:function(e){i(e.currentTarget.value)}})]}),(0,fn.jsxs)("div",{class:"SignContent",children:[(0,fn.jsx)("label",{children:"\ube44\ubc00\ubc88\ud638"}),(0,fn.jsx)("input",{type:"password",placeholder:"\ube44\ubc00\ubc88\ud638",value:u,onChange:function(e){c(e.currentTarget.value)}})]}),(0,fn.jsx)("div",{class:"Btns",children:(0,fn.jsx)("button",{type:"submit",id:"SignInBtn",class:"Btn",children:"\ub85c\uadf8\uc778"})}),(0,fn.jsx)(Je,{to:"/signup",children:(0,fn.jsx)("div",{class:"Btns",children:(0,fn.jsx)("button",{type:"button",id:"SingUpBtn",class:"Btn",children:"\ud68c\uc6d0\uac00\uc785"})})})]})})};var kn=function(){var e=De(),t=(0,S.useState)(""),n=(0,T.Z)(t,2),r=n[0],a=n[1],i=(0,S.useState)(""),o=(0,T.Z)(i,2),s=o[0],u=o[1],c=(0,S.useState)(""),l=(0,T.Z)(c,2),f=l[0],h=l[1],p=(0,S.useState)(""),d=(0,T.Z)(p,2),m=d[0],v=d[1],g=(0,S.useState)(""),y=(0,T.Z)(g,2),b=y[0],x=y[1],w=(0,S.useState)(""),k=(0,T.Z)(w,2),_=k[0],I=k[1],N=(0,S.useState)(""),C=(0,T.Z)(N,2),E=C[0],A=C[1];return(0,fn.jsx)("div",{className:"background",style:{backgroundImage:"url(./bgimg5.png)",backgroundSize:"contain",width:"100%",height:"auto",backgroundRepeat:"repeat-y"},children:(0,fn.jsxs)("form",{class:"SignForm",onSubmit:function(t){t.preventDefault(),s!==f&&alert("\ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");var n={id:r,password:s,name:m,nickname:b,email:_,phone:E,login:!1};xn().post("http://localhost:5001/auth/register",n).then((function(t){!1===t.data.success&&alert("\ud68c\uc6d0\uac00\uc785\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4."),!0===t.data.success&&(alert("\ud68c\uc6d0\uac00\uc785\uc5d0 \uc131\uacf5\ud558\uc600\uc2b5\ub2c8\ub2e4."),e("/signin"))})).catch((function(e){console.log(e)}))},children:[(0,fn.jsx)("h2",{class:"SignUpHeader",children:"Inpporter Sign Up"}),(0,fn.jsxs)("div",{class:"SignContent",children:[(0,fn.jsx)("label",{children:"ID"}),(0,fn.jsx)("input",{type:"text",value:r,onChange:function(e){a(e.currentTarget.value)},placeholder:"ID"})]}),(0,fn.jsxs)("div",{class:"SignContent",children:[(0,fn.jsx)("label",{children:"\ube44\ubc00\ubc88\ud638"}),(0,fn.jsx)("input",{type:"password",value:s,onChange:function(e){u(e.currentTarget.value)},placeholder:"\ube44\ubc00\ubc88\ud638"})]}),(0,fn.jsxs)("div",{class:"SignContent",children:[(0,fn.jsx)("label",{children:"\ube44\ubc00\ubc88\ud638 \ud655\uc778"}),(0,fn.jsx)("input",{type:"password",value:f,onChange:function(e){h(e.currentTarget.value)},placeholder:"\ube44\ubc00\ubc88\ud638 \ud655\uc778"})]}),(0,fn.jsxs)("div",{class:"SignContent",children:[(0,fn.jsx)("label",{children:"\uc774\ub984"}),(0,fn.jsx)("input",{type:"text",value:m,onChange:function(e){v(e.currentTarget.value)},placeholder:"\uc774\ub984"})]}),(0,fn.jsxs)("div",{class:"SignContent",children:[(0,fn.jsx)("label",{children:"\ub2c9\ub124\uc784"}),(0,fn.jsx)("input",{type:"text",value:b,onChange:function(e){x(e.currentTarget.value)},placeholder:"\ub2c9\ub124\uc784"})]}),(0,fn.jsxs)("div",{class:"SignContent",children:[(0,fn.jsx)("label",{children:"\uc774\uba54\uc77c"}),(0,fn.jsx)("input",{type:"email",value:_,onChange:function(e){I(e.currentTarget.value)},placeholder:"\uc774\uba54\uc77c"})]}),(0,fn.jsxs)("div",{class:"SignContent",children:[(0,fn.jsx)("label",{children:"\uc804\ud654\ubc88\ud638"}),(0,fn.jsx)("input",{type:"text",value:E,onChange:function(e){A(e.currentTarget.value)},placeholder:"\uc804\ud654\ubc88\ud638"})]}),(0,fn.jsx)("div",{class:"Btns",children:(0,fn.jsx)("button",{type:"submit",id:"SignUpSubmit",class:"Btn",children:"\ud68c\uc6d0\uac00\uc785"})})]})})};function Sn(){Sn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(C){u=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var i=t&&t.prototype instanceof h?t:h,o=Object.create(i.prototype),s=new T(a||[]);return r(o,"_invoke",{value:w(e,n,s)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var f={};function h(){}function p(){}function d(){}var m={};u(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(I([])));g&&g!==t&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,s){var u=l(e[r],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==(0,D.Z)(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){a("next",e,o,s)}),(function(e){a("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return a("throw",e,o,s)}))}s(u.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return N()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function k(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:N}}function N(){return{value:void 0,done:!0}}return p.prototype=d,r(y,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:p,configurable:!0}),p.displayName=u(d,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(x.prototype),u(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(c(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(y),u(y,s,"Generator"),u(y,i,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;_(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function _n(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function Tn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){_n(i,r,a,o,s,"next",e)}function s(e){_n(i,r,a,o,s,"throw",e)}o(void 0)}))}}var In=function(){var e=(0,S.useState)(""),t=(0,T.Z)(e,2),n=t[0],r=t[1],a=(0,S.useState)("\uc5ed\ub7c9"),i=(0,T.Z)(a,2),o=i[0],s=i[1],u=(0,S.useRef)(null),c=tn((function(e){return e.User.id}));return(0,fn.jsx)("div",{className:"inputbox",children:(0,fn.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),!n)return alert("\ucd94\uac00\ud560 \uc9c8\ubb38\uc744 \uc785\ub825\ud558\uc138\uc694"),!1;var t={userid:c,text:n,selected:o};xn().post("http://localhost:5001/question/write",t).then((function(e){console.log(e)})),r(""),u.current.focus(),window.location.reload()},className:"inputbox",children:[(0,fn.jsx)("select",{className:"selectbox",onChange:function(e){s(e.target.value)},value:o,children:["\uc5ed\ub7c9","\uc9c0\uc6d0\ub3d9\uae30","\uc9c1\ubb34","\uae30\ucd08\uc778\uc131"].map((function(e){return(0,fn.jsx)("option",{value:e,children:e},e)}))}),(0,fn.jsx)("input",{type:"text",name:"questionItem",value:n,ref:u,placeholder:"\uc5f0\uc2b5\ud560 \uba74\uc811 \uc9c8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694",className:"inputbox-input",onChange:function(e){r(e.target.value)}}),(0,fn.jsx)("button",{type:"submit",className:"inputbox-submit-btn",children:"\uc9c8\ubb38 \ucd94\uac00\ud558\uae30"})]})})},Nn=n(9653),Cn={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},En=Nn.createContext&&Nn.createContext(Cn),An=function(){return An=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},An.apply(this,arguments)},Rn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function On(e){return e&&e.map((function(e,t){return Nn.createElement(e.tag,An({key:t},e.attr),On(e.child))}))}function Mn(e){return function(t){return Nn.createElement(Dn,An({attr:An({},e.attr)},t),On(e.child))}}function Dn(e){var t=function(t){var n,r=e.attr,a=e.size,i=e.title,o=Rn(e,["attr","size","title"]),s=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),Nn.createElement("svg",An({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:n,style:An(An({color:e.color||t.color},t.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),i&&Nn.createElement("title",null,i),e.children)};return void 0!==En?Nn.createElement(En.Consumer,null,(function(e){return t(e)})):t(Cn)}function Fn(e){return Mn({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"g",attr:{fill:"#D1C4E9"},child:[{tag:"path",attr:{d:"M38,7H10C8.9,7,8,7.9,8,9v6c0,1.1,0.9,2,2,2h28c1.1,0,2-0.9,2-2V9C40,7.9,39.1,7,38,7z"}},{tag:"path",attr:{d:"M38,19H10c-1.1,0-2,0.9-2,2v6c0,1.1,0.9,2,2,2h28c1.1,0,2-0.9,2-2v-6C40,19.9,39.1,19,38,19z"}},{tag:"path",attr:{d:"M38,31H10c-1.1,0-2,0.9-2,2v6c0,1.1,0.9,2,2,2h28c1.1,0,2-0.9,2-2v-6C40,31.9,39.1,31,38,31z"}}]}]})(e)}function Pn(e){return Mn({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"polygon",attr:{fill:"#FF8A65",points:"24,21.3 12.7,10 26,1.7 38.3,10"}},{tag:"polygon",attr:{fill:"#FFAB91",points:"24,21.3 12.7,10 17,4.7 38.3,10"}},{tag:"path",attr:{fill:"#B39DDB",d:"M30.6,44H17.4c-2,0-3.7-1.4-4-3.4L9,11h30l-4.5,29.6C34.2,42.6,32.5,44,30.6,44z"}},{tag:"path",attr:{fill:"#7E57C2",d:"M38,13H10c-1.1,0-2-0.9-2-2v0c0-1.1,0.9-2,2-2h28c1.1,0,2,0.9,2,2v0C40,12.1,39.1,13,38,13z"}}]})(e)}function Ln(e){return Mn({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"g",attr:{fill:"#37474F"},child:[{tag:"rect",attr:{x:"9",y:"20",width:"30",height:"13"}},{tag:"ellipse",attr:{cx:"24",cy:"33",rx:"15",ry:"6"}}]},{tag:"path",attr:{fill:"#78909C",d:"M23.1,8.2L0.6,18.1c-0.8,0.4-0.8,1.5,0,1.9l22.5,9.9c0.6,0.2,1.2,0.2,1.8,0l22.5-9.9c0.8-0.4,0.8-1.5,0-1.9 L24.9,8.2C24.3,7.9,23.7,7.9,23.1,8.2z"}},{tag:"g",attr:{fill:"#37474F"},child:[{tag:"path",attr:{d:"M43.2,20.4l-20-3.4c-0.5-0.1-1.1,0.3-1.2,0.8c-0.1,0.5,0.3,1.1,0.8,1.2L42,22.2V37c0,0.6,0.4,1,1,1 s1-0.4,1-1V21.4C44,20.9,43.6,20.5,43.2,20.4z"}},{tag:"circle",attr:{cx:"43",cy:"37",r:"2"}},{tag:"path",attr:{d:"M46,40c0,1.7-3,6-3,6s-3-4.3-3-6s1.3-3,3-3S46,38.3,46,40z"}}]}]})(e)}function zn(e){return Mn({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"circle",attr:{fill:"#FFF59D",cx:"24",cy:"22",r:"20"}},{tag:"path",attr:{fill:"#FBC02D",d:"M37,22c0-7.7-6.6-13.8-14.5-12.9c-6,0.7-10.8,5.5-11.4,11.5c-0.5,4.6,1.4,8.7,4.6,11.3 c1.4,1.2,2.3,2.9,2.3,4.8V37h12v-0.1c0-1.8,0.8-3.6,2.2-4.8C35.1,29.7,37,26.1,37,22z"}},{tag:"path",attr:{fill:"#FFF59D",d:"M30.6,20.2l-3-2c-0.3-0.2-0.8-0.2-1.1,0L24,19.8l-2.4-1.6c-0.3-0.2-0.8-0.2-1.1,0l-3,2 c-0.2,0.2-0.4,0.4-0.4,0.7s0,0.6,0.2,0.8l3.8,4.7V37h2V26c0-0.2-0.1-0.4-0.2-0.6l-3.3-4.1l1.5-1l2.4,1.6c0.3,0.2,0.8,0.2,1.1,0 l2.4-1.6l1.5,1l-3.3,4.1C25.1,25.6,25,25.8,25,26v11h2V26.4l3.8-4.7c0.2-0.2,0.3-0.5,0.2-0.8S30.8,20.3,30.6,20.2z"}},{tag:"circle",attr:{fill:"#5C6BC0",cx:"24",cy:"44",r:"3"}},{tag:"path",attr:{fill:"#9FA8DA",d:"M26,45h-4c-2.2,0-4-1.8-4-4v-5h12v5C30,43.2,28.2,45,26,45z"}},{tag:"g",attr:{fill:"#5C6BC0"},child:[{tag:"path",attr:{d:"M30,41l-11.6,1.6c0.3,0.7,0.9,1.4,1.6,1.8l9.4-1.3C29.8,42.5,30,41.8,30,41z"}},{tag:"polygon",attr:{points:"18,38.7 18,40.7 30,39 30,37"}}]}]})(e)}function Bn(e){return Mn({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"circle",attr:{fill:"#4CAF50",cx:"24",cy:"24",r:"21"}},{tag:"polygon",attr:{fill:"#CCFF90",points:"34.6,14.6 21,28.2 15.4,22.6 12.6,25.4 21,33.8 37.4,17.4"}}]})(e)}function Wn(e){return Mn({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#90CAF9",d:"M42,42H6V10c0-2.2,1.8-4,4-4h28c2.2,0,4,1.8,4,4V42z"}},{tag:"rect",attr:{x:"6",y:"42",fill:"#64B5F6",width:"36",height:"2"}},{tag:"g",attr:{fill:"#1565C0"},child:[{tag:"rect",attr:{x:"31",y:"27",width:"6",height:"5"}},{tag:"rect",attr:{x:"21",y:"27",width:"6",height:"5"}},{tag:"rect",attr:{x:"11",y:"27",width:"6",height:"5"}},{tag:"rect",attr:{x:"31",y:"35",width:"6",height:"5"}},{tag:"rect",attr:{x:"11",y:"35",width:"6",height:"5"}},{tag:"rect",attr:{x:"31",y:"19",width:"6",height:"5"}},{tag:"rect",attr:{x:"21",y:"19",width:"6",height:"5"}},{tag:"rect",attr:{x:"11",y:"19",width:"6",height:"5"}},{tag:"rect",attr:{x:"31",y:"11",width:"6",height:"5"}},{tag:"rect",attr:{x:"21",y:"11",width:"6",height:"5"}},{tag:"rect",attr:{x:"11",y:"11",width:"6",height:"5"}},{tag:"rect",attr:{x:"21",y:"35",width:"6",height:"9"}}]}]})(e)}function Vn(e){return Mn({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#607D8B",d:"M39.6,27.2c0.1-0.7,0.2-1.4,0.2-2.2s-0.1-1.5-0.2-2.2l4.5-3.2c0.4-0.3,0.6-0.9,0.3-1.4L40,10.8 c-0.3-0.5-0.8-0.7-1.3-0.4l-5,2.3c-1.2-0.9-2.4-1.6-3.8-2.2l-0.5-5.5c-0.1-0.5-0.5-0.9-1-0.9h-8.6c-0.5,0-1,0.4-1,0.9l-0.5,5.5 c-1.4,0.6-2.7,1.3-3.8,2.2l-5-2.3c-0.5-0.2-1.1,0-1.3,0.4l-4.3,7.4c-0.3,0.5-0.1,1.1,0.3,1.4l4.5,3.2c-0.1,0.7-0.2,1.4-0.2,2.2 s0.1,1.5,0.2,2.2L4,30.4c-0.4,0.3-0.6,0.9-0.3,1.4L8,39.2c0.3,0.5,0.8,0.7,1.3,0.4l5-2.3c1.2,0.9,2.4,1.6,3.8,2.2l0.5,5.5 c0.1,0.5,0.5,0.9,1,0.9h8.6c0.5,0,1-0.4,1-0.9l0.5-5.5c1.4-0.6,2.7-1.3,3.8-2.2l5,2.3c0.5,0.2,1.1,0,1.3-0.4l4.3-7.4 c0.3-0.5,0.1-1.1-0.3-1.4L39.6,27.2z M24,35c-5.5,0-10-4.5-10-10c0-5.5,4.5-10,10-10c5.5,0,10,4.5,10,10C34,30.5,29.5,35,24,35z"}},{tag:"path",attr:{fill:"#455A64",d:"M24,13c-6.6,0-12,5.4-12,12c0,6.6,5.4,12,12,12s12-5.4,12-12C36,18.4,30.6,13,24,13z M24,30 c-2.8,0-5-2.2-5-5c0-2.8,2.2-5,5-5s5,2.2,5,5C29,27.8,26.8,30,24,30z"}}]})(e)}function jn(e){return Mn({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#2196F3",d:"M40,22h-8l-4,4V12c0-2.2,1.8-4,4-4h8c2.2,0,4,1.8,4,4v6C44,20.2,42.2,22,40,22z"}},{tag:"circle",attr:{fill:"#FFA726",cx:"17",cy:"19",r:"8"}},{tag:"path",attr:{fill:"#607D8B",d:"M30,36.7c0,0-3.6-6.7-13-6.7S4,36.7,4,36.7V40h26V36.7z"}}]})(e)}var Un=n(3110),Hn=n.n(Un),Zn=function(e){var t=e.questionItem,n=(0,S.useState)(!1),r=(0,T.Z)(n,2),a=r[0],i=r[1],o=(0,S.useState)(t.text),s=(0,T.Z)(o,2),u=s[0],c=s[1],l=(0,S.useRef)(null);(0,S.useEffect)((function(){a&&l.current.focus()}),[a]);return(0,fn.jsxs)("li",{className:"item",children:[a?(0,fn.jsxs)("div",{className:"item-edit-input",children:[(0,fn.jsx)("input",{type:"text",className:"item-edit-input",value:u,ref:l,onChange:function(e){c(e.target.value)}}),(0,fn.jsx)("div",{id:"editnone",children:(0,fn.jsxs)("span",{className:"item-ctx",children:[t.text,(0,fn.jsx)("span",{id:t._id,className:"sxsx",children:t._id})]})})]}):(0,fn.jsxs)("span",{className:"item-ctx",children:[t.text,(0,fn.jsx)("span",{id:t._id,className:"sxsx",children:t._id})]}),a?(0,fn.jsx)("button",{type:"button",className:"item-edit-btn",onClick:function(){return function(e){var t={id:e,text:u};xn().post("http://localhost:5001/question/update/".concat(e),t).then((function(e){i(!1)})).catch((function(e){console.log("\uc218\uc815 \uc2e4\ud328")})),i(!1),window.location.reload()}(Hn()("#".concat(t._id)).text())},children:(0,fn.jsx)(Bn,{size:"20"})}):(0,fn.jsx)("button",{type:"button",className:"item-edit-btn",onClick:function(){return Hn()("#".concat(t._id)).text(),void i(!0)},children:(0,fn.jsx)(Vn,{size:"20"})}),(0,fn.jsx)("button",{type:"button",className:"item-delete-btn",onClick:function(){return function(e){window.confirm("\uc815\ub9d0\ub85c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&xn().post("http://localhost:5001/question/delete/".concat(e),e),window.location.reload()}(Hn()("#".concat(t._id)).text())},children:(0,fn.jsx)(Pn,{size:"20"})})]})},Gn=function(e){var t=e.title,n=e.questionList,r=e.listdata;return(0,fn.jsxs)("div",{className:"list",children:[(0,fn.jsx)("p",{className:"list-title",children:t}),(0,fn.jsx)("ul",{className:"list-ul",children:n&&n.slice(0).reverse().map((function(e){return(0,fn.jsx)(Zn,{questionItem:e,listdata:r})}))})]})},qn=function(){var e=tn((function(e){return e.User.id})),t=(0,S.useState)("0"),n=(0,T.Z)(t,2),r=n[0],a=n[1],i=(0,S.useState)("\uc804\uccb4"),o=(0,T.Z)(i,2),s=o[0],u=o[1],c=(0,S.useState)([]),l=(0,T.Z)(c,2),f=l[0],h=l[1];return(0,S.useEffect)((function(){var t=function(){var t=Tn(Sn().mark((function t(){var r;return Sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xn().get("http://localhost:5001/question/".concat(e),e);case 2:r=t.sent,n(r.data.list);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(e){h(e)};t()}),[e]),(0,S.useEffect)((function(){var t=function(){var t=Tn(Sn().mark((function t(){var r,a;return Sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("\uc804\uccb4"!==s){t.next=7;break}return t.next=3,xn().get("http://localhost:5001/question/".concat(e),e);case 3:r=t.sent,n(r.data.list),t.next=11;break;case 7:return t.next=9,xn().get("http://localhost:5001/question/".concat(e,"/").concat(s),e,s);case 9:a=t.sent,n(a.data.list);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(e){h(e)};t()}),[s]),(0,S.useEffect)((function(){"0"===r?u("\uc804\uccb4"):"1"===r?u("\uc5ed\ub7c9"):"2"===r?u("\uc9c0\uc6d0\ub3d9\uae30"):"3"===r?u("\uc9c1\ubb34"):"4"===r&&u("\uae30\ucd08\uc778\uc131")}),[r]),(0,fn.jsx)("div",{className:"background",style:{backgroundImage:"url(./bgimg5.png)",backgroundSize:"contain",width:"100%",height:"auto",backgroundRepeat:"repeat-y"},children:(0,fn.jsx)("div",{className:"Question",children:(0,fn.jsxs)("div",{className:"question__container",children:[(0,fn.jsx)("h2",{className:"QuestionHeader",children:"\uc5f0\uc2b5\ud560 \uba74\uc811 \uc9c8\ubb38\uc744 \uad00\ub9ac\ud558\uc138\uc694"}),(0,fn.jsx)(In,{questionList:f,setQuestionList:h}),(0,fn.jsxs)("div",{className:"category_contatiner",children:[(0,fn.jsx)("p",{className:"cateheader",children:"\uba74\uc811 \uc720\ud615 \uce74\ud14c\uace0\ub9ac"}),(0,fn.jsxs)("div",{className:"catediv",children:[(0,fn.jsxs)("button",{className:"cate"+("0"===r?"active":""),id:"cate1",onClick:function(){return a("0")},children:[(0,fn.jsx)(Fn,{size:"25"}),(0,fn.jsx)("br",{}),"\uc804\uccb4"]}),(0,fn.jsxs)("button",{className:"cate"+("1"===r?"active":""),id:"cate2",onClick:function(){return a("1")},children:[(0,fn.jsx)(Ln,{size:"25"}),(0,fn.jsx)("br",{}),"\uc5ed\ub7c9"]}),(0,fn.jsxs)("button",{className:"cate"+("2"===r?"active":""),id:"cate3",onClick:function(){return a("2")},children:[(0,fn.jsx)(jn,{size:"25"}),(0,fn.jsx)("br",{}),"\uc9c0\uc6d0\ub3d9\uae30"]}),(0,fn.jsxs)("button",{className:"cate"+("3"===r?"active":""),id:"cate4",onClick:function(){return a("3")},children:[(0,fn.jsx)(Wn,{size:"25"}),(0,fn.jsx)("br",{}),"\uc9c1\ubb34"]}),(0,fn.jsxs)("button",{className:"cate"+("4"===r?"active":""),id:"cate5",onClick:function(){return a("4")},children:[(0,fn.jsx)(zn,{size:"25"}),(0,fn.jsx)("br",{}),"\uae30\ucd08 \uc778\uc131"]})]})]}),(0,fn.jsx)(Gn,{title:"\uba74\uc811 \uc9c8\ubb38 \ub9ac\uc2a4\ud2b8",questionList:f})]})})})},Kn=n(5095),Xn=n.n(Kn),Yn={},$n=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(Yn={mouseenter:"mouseover",mouseleave:"mouseout"}));function Qn(e,t,n){return e=Jn(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function Jn(e,t,n){return function(r){var a=$n;$n=r;try{e.call(this,this.__data__,t,n)}finally{$n=a}}}function er(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function tr(e){return function(){var t=this.__on;if(t){for(var n,r=0,a=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.capture);++a?t.length=a:delete this.__on}}}function nr(e,t,n){var r=Yn.hasOwnProperty(e.type)?Qn:Jn;return function(a,i,o){var s,u=this.__on,c=r(t,i,o);if(u)for(var l=0,f=u.length;l<f;++l)if((s=u[l]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=t);this.addEventListener(e.type,c,n),s={type:e.type,name:e.name,value:t,listener:c,capture:n},u?u.push(s):this.__on=[s]}}function rr(){}function ar(e){return null==e?rr:function(){return this.querySelector(e)}}function ir(){return[]}function or(e){return null==e?ir:function(){return this.querySelectorAll(e)}}function sr(e){return function(){return this.matches(e)}}function ur(e){return new Array(e.length)}function cr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}cr.prototype={constructor:cr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function lr(e,t,n,r,a,i){for(var o,s=0,u=t.length,c=i.length;s<c;++s)(o=t[s])?(o.__data__=i[s],r[s]=o):n[s]=new cr(e,i[s]);for(;s<u;++s)(o=t[s])&&(a[s]=o)}function fr(e,t,n,r,a,i,o){var s,u,c,l={},f=t.length,h=i.length,p=new Array(f);for(s=0;s<f;++s)(u=t[s])&&(p[s]=c="$"+o.call(u,u.__data__,s,t),c in l?a[s]=u:l[c]=u);for(s=0;s<h;++s)(u=l[c="$"+o.call(e,i[s],s,i)])?(r[s]=u,u.__data__=i[s],l[c]=null):n[s]=new cr(e,i[s]);for(s=0;s<f;++s)(u=t[s])&&l[p[s]]===u&&(a[s]=u)}function hr(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var pr="http://www.w3.org/1999/xhtml",dr={svg:"http://www.w3.org/2000/svg",xhtml:pr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function mr(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),dr.hasOwnProperty(t)?{space:dr[t],local:e}:e}function vr(e){return function(){this.removeAttribute(e)}}function gr(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yr(e,t){return function(){this.setAttribute(e,t)}}function br(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function xr(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function wr(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function kr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Sr(e){return function(){this.style.removeProperty(e)}}function _r(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Tr(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Ir(e,t){return e.style.getPropertyValue(t)||kr(e).getComputedStyle(e,null).getPropertyValue(t)}function Nr(e){return function(){delete this[e]}}function Cr(e,t){return function(){this[e]=t}}function Er(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Ar(e){return e.trim().split(/^|\s+/)}function Rr(e){return e.classList||new Or(e)}function Or(e){this._node=e,this._names=Ar(e.getAttribute("class")||"")}function Mr(e,t){for(var n=Rr(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function Dr(e,t){for(var n=Rr(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function Fr(e){return function(){Mr(this,e)}}function Pr(e){return function(){Dr(this,e)}}function Lr(e,t){return function(){(t.apply(this,arguments)?Mr:Dr)(this,e)}}function zr(){this.textContent=""}function Br(e){return function(){this.textContent=e}}function Wr(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Vr(){this.innerHTML=""}function jr(e){return function(){this.innerHTML=e}}function Ur(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Hr(){this.nextSibling&&this.parentNode.appendChild(this)}function Zr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Gr(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===pr&&t.documentElement.namespaceURI===pr?t.createElement(e):t.createElementNS(n,e)}}function qr(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Kr(e){var t=mr(e);return(t.local?qr:Gr)(t)}function Xr(){return null}function Yr(){var e=this.parentNode;e&&e.removeChild(this)}function $r(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Qr(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Jr(e,t,n){var r=kr(e),a=r.CustomEvent;"function"===typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function ea(e,t){return function(){return Jr(this,e,t)}}function ta(e,t){return function(){return Jr(this,e,t.apply(this,arguments))}}Or.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var na=[null];function ra(e,t){this._groups=e,this._parents=t}function aa(){return new ra([[document.documentElement]],na)}ra.prototype=aa.prototype={constructor:ra,select:function(e){"function"!==typeof e&&(e=ar(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o,s=t[a],u=s.length,c=r[a]=new Array(u),l=0;l<u;++l)(i=s[l])&&(o=e.call(i,i.__data__,l,s))&&("__data__"in i&&(o.__data__=i.__data__),c[l]=o);return new ra(r,this._parents)},selectAll:function(e){"function"!==typeof e&&(e=or(e));for(var t=this._groups,n=t.length,r=[],a=[],i=0;i<n;++i)for(var o,s=t[i],u=s.length,c=0;c<u;++c)(o=s[c])&&(r.push(e.call(o,o.__data__,c,s)),a.push(o));return new ra(r,a)},filter:function(e){"function"!==typeof e&&(e=sr(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],s=o.length,u=r[a]=[],c=0;c<s;++c)(i=o[c])&&e.call(i,i.__data__,c,o)&&u.push(i);return new ra(r,this._parents)},data:function(e,t){if(!e)return p=new Array(this.size()),c=-1,this.each((function(e){p[++c]=e})),p;var n=t?fr:lr,r=this._parents,a=this._groups;"function"!==typeof e&&(e=function(e){return function(){return e}}(e));for(var i=a.length,o=new Array(i),s=new Array(i),u=new Array(i),c=0;c<i;++c){var l=r[c],f=a[c],h=f.length,p=e.call(l,l&&l.__data__,c,r),d=p.length,m=s[c]=new Array(d),v=o[c]=new Array(d);n(l,f,m,v,u[c]=new Array(h),p,t);for(var g,y,b=0,x=0;b<d;++b)if(g=m[b]){for(b>=x&&(x=b+1);!(y=v[x])&&++x<d;);g._next=y||null}}return(o=new ra(o,r))._enter=s,o._exit=u,o},enter:function(){return new ra(this._enter||this._groups.map(ur),this._parents)},exit:function(){return new ra(this._exit||this._groups.map(ur),this._parents)},join:function(e,t,n){var r=this.enter(),a=this,i=this.exit();return r="function"===typeof e?e(r):r.append(e+""),null!=t&&(a=t(a)),null==n?i.remove():n(i),r&&a?r.merge(a).order():a},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,a=n.length,i=Math.min(r,a),o=new Array(r),s=0;s<i;++s)for(var u,c=t[s],l=n[s],f=c.length,h=o[s]=new Array(f),p=0;p<f;++p)(u=c[p]||l[p])&&(h[p]=u);for(;s<r;++s)o[s]=t[s];return new ra(o,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,a=e[t],i=a.length-1,o=a[i];--i>=0;)(r=a[i])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=hr);for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o,s=n[i],u=s.length,c=a[i]=new Array(u),l=0;l<u;++l)(o=s[l])&&(c[l]=o);c.sort(t)}return new ra(a,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a,i=t[n],o=0,s=i.length;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this},attr:function(e,t){var n=mr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?gr:vr:"function"===typeof t?n.local?wr:xr:n.local?br:yr)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Sr:"function"===typeof t?Tr:_r)(e,t,null==n?"":n)):Ir(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Nr:"function"===typeof t?Er:Cr)(e,t)):this.node()[e]},classed:function(e,t){var n=Ar(e+"");if(arguments.length<2){for(var r=Rr(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"===typeof t?Lr:t?Fr:Pr)(n,t))},text:function(e){return arguments.length?this.each(null==e?zr:("function"===typeof e?Wr:Br)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Vr:("function"===typeof e?Ur:jr)(e)):this.node().innerHTML},raise:function(){return this.each(Hr)},lower:function(){return this.each(Zr)},append:function(e){var t="function"===typeof e?e:Kr(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:Kr(e),r=null==t?Xr:"function"===typeof t?t:ar(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Yr)},clone:function(e){return this.select(e?Qr:$r)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,a,i=er(e+""),o=i.length;if(!(arguments.length<2)){for(s=t?nr:tr,null==n&&(n=!1),r=0;r<o;++r)this.each(s(i[r],t,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(r=0,u=s[c];r<o;++r)if((a=i[r]).type===u.type&&a.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"===typeof t?ta:ea)(e,t))}};var ia=aa;function oa(e){return"string"===typeof e?new ra([[document.querySelector(e)]],[document.documentElement]):new ra([[e]],na)}var sa=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var a=r[n];e.call(t,a[1],a[0])}},t}()}(),ua="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,ca="undefined"!==typeof n.g&&n.g.Math===Math?n.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),la="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(ca):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var fa=["top","right","bottom","left","width","height","size","weight"],ha="undefined"!==typeof MutationObserver,pa=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,a=0;function i(){n&&(n=!1,e()),r&&s()}function o(){la(i)}function s(){var e=Date.now();if(n){if(e-a<2)return;r=!0}else n=!0,r=!1,setTimeout(o,t);a=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){ua&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ha?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){ua&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;fa.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),da=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];Object.defineProperty(e,a,{value:t[a],enumerable:!1,writable:!1,configurable:!0})}return e},ma=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||ca},va=ka(0,0,0,0);function ga(e){return parseFloat(e)||0}function ya(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+ga(e["border-"+n+"-width"])}),0)}function ba(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return va;var r=ma(e).getComputedStyle(e),a=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var a=r[n],i=e["padding-"+a];t[a]=ga(i)}return t}(r),i=a.left+a.right,o=a.top+a.bottom,s=ga(r.width),u=ga(r.height);if("border-box"===r.boxSizing&&(Math.round(s+i)!==t&&(s-=ya(r,"left","right")+i),Math.round(u+o)!==n&&(u-=ya(r,"top","bottom")+o)),!function(e){return e===ma(e).document.documentElement}(e)){var c=Math.round(s+i)-t,l=Math.round(u+o)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(l)&&(u-=l)}return ka(a.left,a.top,s,u)}var xa="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof ma(e).SVGGraphicsElement}:function(e){return e instanceof ma(e).SVGElement&&"function"===typeof e.getBBox};function wa(e){return ua?xa(e)?function(e){var t=e.getBBox();return ka(0,0,t.width,t.height)}(e):ba(e):va}function ka(e,t,n,r){return{x:e,y:t,width:n,height:r}}var Sa=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=ka(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=wa(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),_a=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(i.prototype);return da(o,{x:t,y:n,width:r,height:a,top:n,right:t+r,bottom:a+n,left:t}),o}(t);da(this,{target:e,contentRect:n})},Ta=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new sa,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof ma(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Sa(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof ma(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new _a(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Ia="undefined"!==typeof WeakMap?new WeakMap:new sa,Na=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=pa.getInstance(),r=new Ta(t,n,this);Ia.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){Na.prototype[e]=function(){var t;return(t=Ia.get(this))[e].apply(t,arguments)}}));var Ca,Ea,Aa="undefined"!==typeof ca.ResizeObserver?ca.ResizeObserver:Na,Ra=n(1930),Oa=0,Ma=0,Da=0,Fa=0,Pa=0,La=0,za="object"===typeof performance&&performance.now?performance:Date,Ba="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Wa(){return Pa||(Ba(Va),Pa=za.now()+La)}function Va(){Pa=0}function ja(){this._call=this._time=this._next=null}function Ua(e,t,n){var r=new ja;return r.restart(e,t,n),r}function Ha(){Pa=(Fa=za.now())+La,Oa=Ma=0;try{!function(){Wa(),++Oa;for(var e,t=Ca;t;)(e=Pa-t._time)>=0&&t._call.call(null,e),t=t._next;--Oa}()}finally{Oa=0,function(){var e,t,n=Ca,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Ca=t);Ea=e,Ga(r)}(),Pa=0}}function Za(){var e=za.now(),t=e-Fa;t>1e3&&(La-=t,Fa=e)}function Ga(e){Oa||(Ma&&(Ma=clearTimeout(Ma)),e-Pa>24?(e<1/0&&(Ma=setTimeout(Ha,e-za.now()-La)),Da&&(Da=clearInterval(Da))):(Da||(Fa=za.now(),Da=setInterval(Za,1e3)),Oa=1,Ba(Ha)))}function qa(e,t,n){var r=new ja;return t=null==t?0:+t,r.restart((function(n){r.stop(),e(n+t)}),t,n),r}ja.prototype=Ua.prototype={constructor:ja,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?Wa():+n)+(null==t?0:+t),this._next||Ea===this||(Ea?Ea._next=this:Ca=this,Ea=this),this._call=e,this._time=n,Ga()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ga())}};var Ka=(0,Ra.Z)("start","end","cancel","interrupt"),Xa=[];function Ya(e,t,n,r,a,i){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var r,a=e.__transition;function i(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(i){var c,l,f,h;if(1!==n.state)return u();for(c in a)if((h=a[c]).name===n.name){if(3===h.state)return qa(o);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete a[c]):+c<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete a[c])}if(qa((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(i))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),c=0,l=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++l]=h);r.length=l+1}}function s(t){for(var a=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=5,1),i=-1,o=r.length;++i<o;)r[i].call(e,a);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var r in n.state=6,n.timer.stop(),delete a[t],a)return;delete e.__transition}a[t]=n,n.timer=Ua(i,0,n.time)}(e,n,{name:t,index:r,group:a,on:Ka,tween:Xa,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function $a(e,t){var n=Ja(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function Qa(e,t){var n=Ja(e,t);if(n.state>3)throw new Error("too late; already running");return n}function Ja(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ei(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ti,ni,ri,ai,ii=180/Math.PI,oi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function si(e,t,n,r,a,i){var o,s,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*ii,skewX:Math.atan(u)*ii,scaleX:o,scaleY:s}}function ui(e,t,n,r){function a(e){return e.length?e.pop()+" ":""}return function(i,o){var s=[],u=[];return i=e(i),o=e(o),function(e,r,a,i,o,s){if(e!==a||r!==i){var u=o.push("translate(",null,t,null,n);s.push({i:u-4,x:ei(e,a)},{i:u-2,x:ei(r,i)})}else(a||i)&&o.push("translate("+a+t+i+n)}(i.translateX,i.translateY,o.translateX,o.translateY,s,u),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(a(n)+"rotate(",null,r)-2,x:ei(e,t)})):t&&n.push(a(n)+"rotate("+t+r)}(i.rotate,o.rotate,s,u),function(e,t,n,i){e!==t?i.push({i:n.push(a(n)+"skewX(",null,r)-2,x:ei(e,t)}):t&&n.push(a(n)+"skewX("+t+r)}(i.skewX,o.skewX,s,u),function(e,t,n,r,i,o){if(e!==n||t!==r){var s=i.push(a(i)+"scale(",null,",",null,")");o.push({i:s-4,x:ei(e,n)},{i:s-2,x:ei(t,r)})}else 1===n&&1===r||i.push(a(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,o.scaleX,o.scaleY,s,u),i=o=null,function(e){for(var t,n=-1,r=u.length;++n<r;)s[(t=u[n]).i]=t.x(e);return s.join("")}}}var ci=ui((function(e){return"none"===e?oi:(ti||(ti=document.createElement("DIV"),ni=document.documentElement,ri=document.defaultView),ti.style.transform=e,e=ri.getComputedStyle(ni.appendChild(ti),null).getPropertyValue("transform"),ni.removeChild(ti),si(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),li=ui((function(e){return null==e?oi:(ai||(ai=document.createElementNS("http://www.w3.org/2000/svg","g")),ai.setAttribute("transform",e),(e=ai.transform.baseVal.consolidate())?si((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):oi)}),", ",")",")");function fi(e,t){var n,r;return function(){var a=Qa(this,e),i=a.tween;if(i!==n)for(var o=0,s=(r=n=i).length;o<s;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}a.tween=r}}function hi(e,t,n){var r,a;if("function"!==typeof n)throw new Error;return function(){var i=Qa(this,e),o=i.tween;if(o!==r){a=(r=o).slice();for(var s={name:t,value:n},u=0,c=a.length;u<c;++u)if(a[u].name===t){a[u]=s;break}u===c&&a.push(s)}i.tween=a}}function pi(e,t,n){var r=e._id;return e.each((function(){var e=Qa(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Ja(e,r).value[t]}}function di(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function mi(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function vi(){}var gi=.7,yi=1/gi,bi="\\s*([+-]?\\d+)\\s*",xi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",wi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ki=/^#([0-9a-f]{3,8})$/,Si=new RegExp("^rgb\\("+[bi,bi,bi]+"\\)$"),_i=new RegExp("^rgb\\("+[wi,wi,wi]+"\\)$"),Ti=new RegExp("^rgba\\("+[bi,bi,bi,xi]+"\\)$"),Ii=new RegExp("^rgba\\("+[wi,wi,wi,xi]+"\\)$"),Ni=new RegExp("^hsl\\("+[xi,wi,wi]+"\\)$"),Ci=new RegExp("^hsla\\("+[xi,wi,wi,xi]+"\\)$"),Ei={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ai(){return this.rgb().formatHex()}function Ri(){return this.rgb().formatRgb()}function Oi(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ki.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Mi(t):3===n?new Li(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Di(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Di(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Si.exec(e))?new Li(t[1],t[2],t[3],1):(t=_i.exec(e))?new Li(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Ti.exec(e))?Di(t[1],t[2],t[3],t[4]):(t=Ii.exec(e))?Di(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Ni.exec(e))?Vi(t[1],t[2]/100,t[3]/100,1):(t=Ci.exec(e))?Vi(t[1],t[2]/100,t[3]/100,t[4]):Ei.hasOwnProperty(e)?Mi(Ei[e]):"transparent"===e?new Li(NaN,NaN,NaN,0):null}function Mi(e){return new Li(e>>16&255,e>>8&255,255&e,1)}function Di(e,t,n,r){return r<=0&&(e=t=n=NaN),new Li(e,t,n,r)}function Fi(e){return e instanceof vi||(e=Oi(e)),e?new Li((e=e.rgb()).r,e.g,e.b,e.opacity):new Li}function Pi(e,t,n,r){return 1===arguments.length?Fi(e):new Li(e,t,n,null==r?1:r)}function Li(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function zi(){return"#"+Wi(this.r)+Wi(this.g)+Wi(this.b)}function Bi(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Wi(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Vi(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ui(e,t,n,r)}function ji(e){if(e instanceof Ui)return new Ui(e.h,e.s,e.l,e.opacity);if(e instanceof vi||(e=Oi(e)),!e)return new Ui;if(e instanceof Ui)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,s=i-a,u=(i+a)/2;return s?(o=t===i?(n-r)/s+6*(n<r):n===i?(r-t)/s+2:(t-n)/s+4,s/=u<.5?i+a:2-i-a,o*=60):s=u>0&&u<1?0:o,new Ui(o,s,u,e.opacity)}function Ui(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Hi(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Zi(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}function Gi(e){return function(){return e}}function qi(e,t){return function(n){return e+n*t}}function Ki(e){return 1===(e=+e)?Xi:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Gi(isNaN(t)?n:t)}}function Xi(e,t){var n=t-e;return n?qi(e,n):Gi(isNaN(e)?t:e)}di(vi,Oi,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Ai,formatHex:Ai,formatHsl:function(){return ji(this).formatHsl()},formatRgb:Ri,toString:Ri}),di(Li,Pi,mi(vi,{brighter:function(e){return e=null==e?yi:Math.pow(yi,e),new Li(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?gi:Math.pow(gi,e),new Li(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zi,formatHex:zi,formatRgb:Bi,toString:Bi})),di(Ui,(function(e,t,n,r){return 1===arguments.length?ji(e):new Ui(e,t,n,null==r?1:r)}),mi(vi,{brighter:function(e){return e=null==e?yi:Math.pow(yi,e),new Ui(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?gi:Math.pow(gi,e),new Ui(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Li(Hi(e>=240?e-240:e+120,a,r),Hi(e,a,r),Hi(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Yi=function e(t){var n=Ki(t);function r(e,t){var r=n((e=Pi(e)).r,(t=Pi(t)).r),a=n(e.g,t.g),i=n(e.b,t.b),o=Xi(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=i(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function $i(e){return function(t){var n,r,a=t.length,i=new Array(a),o=new Array(a),s=new Array(a);for(n=0;n<a;++n)r=Pi(t[n]),i[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return i=e(i),o=e(o),s=e(s),r.opacity=1,function(e){return r.r=i(e),r.g=o(e),r.b=s(e),r+""}}}$i((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],i=e[r+1],o=r>0?e[r-1]:2*a-i,s=r<t-1?e[r+2]:2*i-a;return Zi((n-r/t)*t,o,a,i,s)}})),$i((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],i=e[r%t],o=e[(r+1)%t],s=e[(r+2)%t];return Zi((n-r/t)*t,a,i,o,s)}}));var Qi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ji=new RegExp(Qi.source,"g");function eo(e,t){var n,r,a,i=Qi.lastIndex=Ji.lastIndex=0,o=-1,s=[],u=[];for(e+="",t+="";(n=Qi.exec(e))&&(r=Ji.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:ei(n,r)})),i=Ji.lastIndex;return i<t.length&&(a=t.slice(i),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function to(e,t){var n;return("number"===typeof t?ei:t instanceof Oi?Yi:(n=Oi(t))?(t=n,Yi):eo)(e,t)}function no(e){return function(){this.removeAttribute(e)}}function ro(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ao(e,t,n){var r,a,i=n+"";return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function io(e,t,n){var r,a,i=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function oo(e,t,n){var r,a,i;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttribute(e))===(s=u+"")?null:o===r&&s===a?i:(a=s,i=t(r=o,u));this.removeAttribute(e)}}function so(e,t,n){var r,a,i;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttributeNS(e.space,e.local))===(s=u+"")?null:o===r&&s===a?i:(a=s,i=t(r=o,u));this.removeAttributeNS(e.space,e.local)}}function uo(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function co(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function lo(e,t){var n,r;function a(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&co(e,a)),n}return a._value=t,a}function fo(e,t){var n,r;function a(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&uo(e,a)),n}return a._value=t,a}function ho(e,t){return function(){$a(this,e).delay=+t.apply(this,arguments)}}function po(e,t){return t=+t,function(){$a(this,e).delay=t}}function mo(e,t){return function(){Qa(this,e).duration=+t.apply(this,arguments)}}function vo(e,t){return t=+t,function(){Qa(this,e).duration=t}}function go(e,t){if("function"!==typeof t)throw new Error;return function(){Qa(this,e).ease=t}}function yo(e,t,n){var r,a,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?$a:Qa;return function(){var o=i(this,e),s=o.on;s!==r&&(a=(r=s).copy()).on(t,n),o.on=a}}var bo=ia.prototype.constructor;function xo(e){return function(){this.style.removeProperty(e)}}function wo(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function ko(e,t,n){var r,a;function i(){var i=t.apply(this,arguments);return i!==a&&(r=(a=i)&&wo(e,i,n)),r}return i._value=t,i}function So(e){return function(t){this.textContent=e.call(this,t)}}function _o(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&So(r)),t}return r._value=e,r}var To=0;function Io(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function No(){return++To}var Co=ia.prototype;Io.prototype=function(e){return ia().transition(e)}.prototype={constructor:Io,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=ar(e));for(var r=this._groups,a=r.length,i=new Array(a),o=0;o<a;++o)for(var s,u,c=r[o],l=c.length,f=i[o]=new Array(l),h=0;h<l;++h)(s=c[h])&&(u=e.call(s,s.__data__,h,c))&&("__data__"in s&&(u.__data__=s.__data__),f[h]=u,Ya(f[h],t,n,h,f,Ja(s,n)));return new Io(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=or(e));for(var r=this._groups,a=r.length,i=[],o=[],s=0;s<a;++s)for(var u,c=r[s],l=c.length,f=0;f<l;++f)if(u=c[f]){for(var h,p=e.call(u,u.__data__,f,c),d=Ja(u,n),m=0,v=p.length;m<v;++m)(h=p[m])&&Ya(h,t,n,m,p,d);i.push(p),o.push(u)}return new Io(i,o,t,n)},filter:function(e){"function"!==typeof e&&(e=sr(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],s=o.length,u=r[a]=[],c=0;c<s;++c)(i=o[c])&&e.call(i,i.__data__,c,o)&&u.push(i);return new Io(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,i=Math.min(r,a),o=new Array(r),s=0;s<i;++s)for(var u,c=t[s],l=n[s],f=c.length,h=o[s]=new Array(f),p=0;p<f;++p)(u=c[p]||l[p])&&(h[p]=u);for(;s<r;++s)o[s]=t[s];return new Io(o,this._parents,this._name,this._id)},selection:function(){return new bo(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=No(),r=this._groups,a=r.length,i=0;i<a;++i)for(var o,s=r[i],u=s.length,c=0;c<u;++c)if(o=s[c]){var l=Ja(o,t);Ya(o,e,n,c,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Io(r,this._parents,e,n)},call:Co.call,nodes:Co.nodes,node:Co.node,size:Co.size,empty:Co.empty,each:Co.each,on:function(e,t){var n=this._id;return arguments.length<2?Ja(this.node(),n).on.on(e):this.each(yo(n,e,t))},attr:function(e,t){var n=mr(e),r="transform"===n?li:to;return this.attrTween(e,"function"===typeof t?(n.local?so:oo)(n,r,pi(this,"attr."+e,t)):null==t?(n.local?ro:no)(n):(n.local?io:ao)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=mr(e);return this.tween(n,(r.local?lo:fo)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?ci:to;return null==t?this.styleTween(e,function(e,t){var n,r,a;return function(){var i=Ir(this,e),o=(this.style.removeProperty(e),Ir(this,e));return i===o?null:i===n&&o===r?a:a=t(n=i,r=o)}}(e,r)).on("end.style."+e,xo(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,a,i;return function(){var o=Ir(this,e),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(e),u=s=Ir(this,e)),o===u?null:o===r&&u===a?i:(a=u,i=t(r=o,s))}}(e,r,pi(this,"style."+e,t))).each(function(e,t){var n,r,a,i,o="style."+t,s="end."+o;return function(){var u=Qa(this,e),c=u.on,l=null==u.value[o]?i||(i=xo(t)):void 0;c===n&&a===l||(r=(n=c).copy()).on(s,a=l),u.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,a,i=n+"";return function(){var o=Ir(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,ko(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(pi(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,_o(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,a=Ja(this.node(),n).tween,i=0,o=a.length;i<o;++i)if((r=a[i]).name===e)return r.value;return null}return this.each((null==t?fi:hi)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?ho:po)(t,e)):Ja(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?mo:vo)(t,e)):Ja(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(go(t,e)):Ja(this.node(),t).ease},end:function(){var e,t,n=this,r=n._id,a=n.size();return new Promise((function(i,o){var s={value:o},u={value:function(){0===--a&&i()}};n.each((function(){var n=Qa(this,r),a=n.on;a!==e&&((t=(e=a).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),n.on=t}))}))}};var Eo={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Ao(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return Eo.time=Wa(),Eo;return n}ia.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,a,i=e.__transition,o=!0;if(i){for(a in t=null==t?null:t+"",i)(n=i[a]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[a]):o=!1;o&&delete e.__transition}}(this,e)}))},ia.prototype.transition=function(e){var t,n;e instanceof Io?(t=e._id,e=e._name):(t=No(),(n=Eo).time=Wa(),e=null==e?null:e+"");for(var r=this._groups,a=r.length,i=0;i<a;++i)for(var o,s=r[i],u=s.length,c=0;c<u;++c)(o=s[c])&&Ya(o,e,t,c,s,n||Ao(o,t));return new Io(r,this._parents,e,t)};var Ro=n(181);function Oo(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,Ro.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}var Mo=n(9205),Do=n.n(Mo),Fo=n(1016),Po=n.n(Fo),Lo=n(6699),zo=n.n(Lo);function Bo(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Wo(e){return e instanceof Bo(e).Element||e instanceof Element}function Vo(e){return e instanceof Bo(e).HTMLElement||e instanceof HTMLElement}function jo(e){return"undefined"!==typeof ShadowRoot&&(e instanceof Bo(e).ShadowRoot||e instanceof ShadowRoot)}var Uo=Math.max,Ho=Math.min,Zo=Math.round;function Go(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function qo(){return!/^((?!chrome|android).)*safari/i.test(Go())}function Ko(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),a=1,i=1;t&&Vo(e)&&(a=e.offsetWidth>0&&Zo(r.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Zo(r.height)/e.offsetHeight||1);var o=(Wo(e)?Bo(e):window).visualViewport,s=!qo()&&n,u=(r.left+(s&&o?o.offsetLeft:0))/a,c=(r.top+(s&&o?o.offsetTop:0))/i,l=r.width/a,f=r.height/i;return{width:l,height:f,top:c,right:u+l,bottom:c+f,left:u,x:u,y:c}}function Xo(e){var t=Bo(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Yo(e){return e?(e.nodeName||"").toLowerCase():null}function $o(e){return((Wo(e)?e.ownerDocument:e.document)||window.document).documentElement}function Qo(e){return Ko($o(e)).left+Xo(e).scrollLeft}function Jo(e){return Bo(e).getComputedStyle(e)}function es(e){var t=Jo(e),n=t.overflow,r=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+r)}function ts(e,t,n){void 0===n&&(n=!1);var r=Vo(t),a=Vo(t)&&function(e){var t=e.getBoundingClientRect(),n=Zo(t.width)/e.offsetWidth||1,r=Zo(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),i=$o(t),o=Ko(e,a,n),s={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&(("body"!==Yo(t)||es(i))&&(s=function(e){return e!==Bo(e)&&Vo(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:Xo(e);var t}(t)),Vo(t)?((u=Ko(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):i&&(u.x=Qo(i))),{x:o.left+s.scrollLeft-u.x,y:o.top+s.scrollTop-u.y,width:o.width,height:o.height}}function ns(e){var t=Ko(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function rs(e){return"html"===Yo(e)?e:e.assignedSlot||e.parentNode||(jo(e)?e.host:null)||$o(e)}function as(e){return["html","body","#document"].indexOf(Yo(e))>=0?e.ownerDocument.body:Vo(e)&&es(e)?e:as(rs(e))}function is(e,t){var n;void 0===t&&(t=[]);var r=as(e),a=r===(null==(n=e.ownerDocument)?void 0:n.body),i=Bo(r),o=a?[i].concat(i.visualViewport||[],es(r)?r:[]):r,s=t.concat(o);return a?s:s.concat(is(rs(o)))}function os(e){return["table","td","th"].indexOf(Yo(e))>=0}function ss(e){return Vo(e)&&"fixed"!==Jo(e).position?e.offsetParent:null}function us(e){for(var t=Bo(e),n=ss(e);n&&os(n)&&"static"===Jo(n).position;)n=ss(n);return n&&("html"===Yo(n)||"body"===Yo(n)&&"static"===Jo(n).position)?t:n||function(e){var t=/firefox/i.test(Go());if(/Trident/i.test(Go())&&Vo(e)&&"fixed"===Jo(e).position)return null;var n=rs(e);for(jo(n)&&(n=n.host);Vo(n)&&["html","body"].indexOf(Yo(n))<0;){var r=Jo(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var cs="top",ls="bottom",fs="right",hs="left",ps="auto",ds=[cs,ls,fs,hs],ms="start",vs="end",gs="viewport",ys="popper",bs=ds.reduce((function(e,t){return e.concat([t+"-"+ms,t+"-"+vs])}),[]),xs=[].concat(ds,[ps]).reduce((function(e,t){return e.concat([t,t+"-"+ms,t+"-"+vs])}),[]),ws=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function ks(e){var t=new Map,n=new Set,r=[];function a(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&a(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||a(e)})),r}function Ss(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var _s={placement:"bottom",modifiers:[],strategy:"absolute"};function Ts(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function Is(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,a=t.defaultOptions,i=void 0===a?_s:a;return function(e,t,n){void 0===n&&(n=i);var a={placement:"bottom",orderedModifiers:[],options:Object.assign({},_s,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},o=[],s=!1,u={state:a,setOptions:function(n){var s="function"===typeof n?n(a.options):n;c(),a.options=Object.assign({},i,a.options,s),a.scrollParents={reference:Wo(e)?is(e):e.contextElement?is(e.contextElement):[],popper:is(t)};var l=function(e){var t=ks(e);return ws.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,a.options.modifiers)));return a.orderedModifiers=l.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"===typeof i){var s=i({state:a,name:t,instance:u,options:r}),c=function(){};o.push(s||c)}})),u.update()},forceUpdate:function(){if(!s){var e=a.elements,t=e.reference,n=e.popper;if(Ts(t,n)){a.rects={reference:ts(t,us(n),"fixed"===a.options.strategy),popper:ns(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var i=a.orderedModifiers[r],o=i.fn,c=i.options,l=void 0===c?{}:c,f=i.name;"function"===typeof o&&(a=o({state:a,options:l,name:f,instance:u})||a)}else a.reset=!1,r=-1}}},update:Ss((function(){return new Promise((function(e){u.forceUpdate(),e(a)}))})),destroy:function(){c(),s=!0}};if(!Ts(e,t))return u;function c(){o.forEach((function(e){return e()})),o=[]}return u.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var Ns={passive:!0};var Cs={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,a=r.scroll,i=void 0===a||a,o=r.resize,s=void 0===o||o,u=Bo(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&c.forEach((function(e){e.addEventListener("scroll",n.update,Ns)})),s&&u.addEventListener("resize",n.update,Ns),function(){i&&c.forEach((function(e){e.removeEventListener("scroll",n.update,Ns)})),s&&u.removeEventListener("resize",n.update,Ns)}},data:{}};function Es(e){return e.split("-")[0]}function As(e){return e.split("-")[1]}function Rs(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Os(e){var t,n=e.reference,r=e.element,a=e.placement,i=a?Es(a):null,o=a?As(a):null,s=n.x+n.width/2-r.width/2,u=n.y+n.height/2-r.height/2;switch(i){case cs:t={x:s,y:n.y-r.height};break;case ls:t={x:s,y:n.y+n.height};break;case fs:t={x:n.x+n.width,y:u};break;case hs:t={x:n.x-r.width,y:u};break;default:t={x:n.x,y:n.y}}var c=i?Rs(i):null;if(null!=c){var l="y"===c?"height":"width";switch(o){case ms:t[c]=t[c]-(n[l]/2-r[l]/2);break;case vs:t[c]=t[c]+(n[l]/2-r[l]/2)}}return t}var Ms={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ds(e){var t,n=e.popper,r=e.popperRect,a=e.placement,i=e.variation,o=e.offsets,s=e.position,u=e.gpuAcceleration,c=e.adaptive,l=e.roundOffsets,f=e.isFixed,h=o.x,p=void 0===h?0:h,d=o.y,m=void 0===d?0:d,v="function"===typeof l?l({x:p,y:m}):{x:p,y:m};p=v.x,m=v.y;var g=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),b=hs,x=cs,w=window;if(c){var k=us(n),S="clientHeight",_="clientWidth";if(k===Bo(n)&&"static"!==Jo(k=$o(n)).position&&"absolute"===s&&(S="scrollHeight",_="scrollWidth"),a===cs||(a===hs||a===fs)&&i===vs)x=ls,m-=(f&&k===w&&w.visualViewport?w.visualViewport.height:k[S])-r.height,m*=u?1:-1;if(a===hs||(a===cs||a===ls)&&i===vs)b=fs,p-=(f&&k===w&&w.visualViewport?w.visualViewport.width:k[_])-r.width,p*=u?1:-1}var T,I=Object.assign({position:s},c&&Ms),N=!0===l?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:Zo(t*r)/r||0,y:Zo(n*r)/r||0}}({x:p,y:m}):{x:p,y:m};return p=N.x,m=N.y,u?Object.assign({},I,((T={})[x]=y?"0":"",T[b]=g?"0":"",T.transform=(w.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",T)):Object.assign({},I,((t={})[x]=y?m+"px":"",t[b]=g?p+"px":"",t.transform="",t))}var Fs={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,a=void 0===r||r,i=n.adaptive,o=void 0===i||i,s=n.roundOffsets,u=void 0===s||s,c={placement:Es(t.placement),variation:As(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Ds(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:u})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Ds(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var Ps={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},a=t.elements[e];Vo(a)&&Yo(a)&&(Object.assign(a.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?a.removeAttribute(e):a.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],a=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});Vo(r)&&Yo(r)&&(Object.assign(r.style,i),Object.keys(a).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};var Ls={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,a=n.offset,i=void 0===a?[0,0]:a,o=xs.reduce((function(e,n){return e[n]=function(e,t,n){var r=Es(e),a=[hs,cs].indexOf(r)>=0?-1:1,i="function"===typeof n?n(Object.assign({},t,{placement:e})):n,o=i[0],s=i[1];return o=o||0,s=(s||0)*a,[hs,fs].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}(n,t.rects,i),e}),{}),s=o[t.placement],u=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=o}},zs={left:"right",right:"left",bottom:"top",top:"bottom"};function Bs(e){return e.replace(/left|right|bottom|top/g,(function(e){return zs[e]}))}var Ws={start:"end",end:"start"};function Vs(e){return e.replace(/start|end/g,(function(e){return Ws[e]}))}function js(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&jo(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Us(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Hs(e,t,n){return t===gs?Us(function(e,t){var n=Bo(e),r=$o(e),a=n.visualViewport,i=r.clientWidth,o=r.clientHeight,s=0,u=0;if(a){i=a.width,o=a.height;var c=qo();(c||!c&&"fixed"===t)&&(s=a.offsetLeft,u=a.offsetTop)}return{width:i,height:o,x:s+Qo(e),y:u}}(e,n)):Wo(t)?function(e,t){var n=Ko(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):Us(function(e){var t,n=$o(e),r=Xo(e),a=null==(t=e.ownerDocument)?void 0:t.body,i=Uo(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=Uo(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),s=-r.scrollLeft+Qo(e),u=-r.scrollTop;return"rtl"===Jo(a||n).direction&&(s+=Uo(n.clientWidth,a?a.clientWidth:0)-i),{width:i,height:o,x:s,y:u}}($o(e)))}function Zs(e,t,n,r){var a="clippingParents"===t?function(e){var t=is(rs(e)),n=["absolute","fixed"].indexOf(Jo(e).position)>=0&&Vo(e)?us(e):e;return Wo(n)?t.filter((function(e){return Wo(e)&&js(e,n)&&"body"!==Yo(e)})):[]}(e):[].concat(t),i=[].concat(a,[n]),o=i[0],s=i.reduce((function(t,n){var a=Hs(e,n,r);return t.top=Uo(a.top,t.top),t.right=Ho(a.right,t.right),t.bottom=Ho(a.bottom,t.bottom),t.left=Uo(a.left,t.left),t}),Hs(e,o,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Gs(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function qs(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function Ks(e,t){void 0===t&&(t={});var n=t,r=n.placement,a=void 0===r?e.placement:r,i=n.strategy,o=void 0===i?e.strategy:i,s=n.boundary,u=void 0===s?"clippingParents":s,c=n.rootBoundary,l=void 0===c?gs:c,f=n.elementContext,h=void 0===f?ys:f,p=n.altBoundary,d=void 0!==p&&p,m=n.padding,v=void 0===m?0:m,g=Gs("number"!==typeof v?v:qs(v,ds)),y=h===ys?"reference":ys,b=e.rects.popper,x=e.elements[d?y:h],w=Zs(Wo(x)?x:x.contextElement||$o(e.elements.popper),u,l,o),k=Ko(e.elements.reference),S=Os({reference:k,element:b,strategy:"absolute",placement:a}),_=Us(Object.assign({},b,S)),T=h===ys?_:k,I={top:w.top-T.top+g.top,bottom:T.bottom-w.bottom+g.bottom,left:w.left-T.left+g.left,right:T.right-w.right+g.right},N=e.modifiersData.offset;if(h===ys&&N){var C=N[a];Object.keys(I).forEach((function(e){var t=[fs,ls].indexOf(e)>=0?1:-1,n=[cs,ls].indexOf(e)>=0?"y":"x";I[e]+=C[n]*t}))}return I}var Xs={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var a=n.mainAxis,i=void 0===a||a,o=n.altAxis,s=void 0===o||o,u=n.fallbackPlacements,c=n.padding,l=n.boundary,f=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,d=void 0===p||p,m=n.allowedAutoPlacements,v=t.options.placement,g=Es(v),y=u||(g===v||!d?[Bs(v)]:function(e){if(Es(e)===ps)return[];var t=Bs(e);return[Vs(e),t,Vs(t)]}(v)),b=[v].concat(y).reduce((function(e,n){return e.concat(Es(n)===ps?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,a=n.boundary,i=n.rootBoundary,o=n.padding,s=n.flipVariations,u=n.allowedAutoPlacements,c=void 0===u?xs:u,l=As(r),f=l?s?bs:bs.filter((function(e){return As(e)===l})):ds,h=f.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=f);var p=h.reduce((function(t,n){return t[n]=Ks(e,{placement:n,boundary:a,rootBoundary:i,padding:o})[Es(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:l,rootBoundary:f,padding:c,flipVariations:d,allowedAutoPlacements:m}):n)}),[]),x=t.rects.reference,w=t.rects.popper,k=new Map,S=!0,_=b[0],T=0;T<b.length;T++){var I=b[T],N=Es(I),C=As(I)===ms,E=[cs,ls].indexOf(N)>=0,A=E?"width":"height",R=Ks(t,{placement:I,boundary:l,rootBoundary:f,altBoundary:h,padding:c}),O=E?C?fs:hs:C?ls:cs;x[A]>w[A]&&(O=Bs(O));var M=Bs(O),D=[];if(i&&D.push(R[N]<=0),s&&D.push(R[O]<=0,R[M]<=0),D.every((function(e){return e}))){_=I,S=!1;break}k.set(I,D)}if(S)for(var F=function(e){var t=b.find((function(t){var n=k.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return _=t,"break"},P=d?3:1;P>0;P--){if("break"===F(P))break}t.placement!==_&&(t.modifiersData[r]._skip=!0,t.placement=_,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Ys(e,t,n){return Uo(e,Ho(t,n))}var $s={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,a=n.mainAxis,i=void 0===a||a,o=n.altAxis,s=void 0!==o&&o,u=n.boundary,c=n.rootBoundary,l=n.altBoundary,f=n.padding,h=n.tether,p=void 0===h||h,d=n.tetherOffset,m=void 0===d?0:d,v=Ks(t,{boundary:u,rootBoundary:c,padding:f,altBoundary:l}),g=Es(t.placement),y=As(t.placement),b=!y,x=Rs(g),w="x"===x?"y":"x",k=t.modifiersData.popperOffsets,S=t.rects.reference,_=t.rects.popper,T="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,I="number"===typeof T?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),N=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,C={x:0,y:0};if(k){if(i){var E,A="y"===x?cs:hs,R="y"===x?ls:fs,O="y"===x?"height":"width",M=k[x],D=M+v[A],F=M-v[R],P=p?-_[O]/2:0,L=y===ms?S[O]:_[O],z=y===ms?-_[O]:-S[O],B=t.elements.arrow,W=p&&B?ns(B):{width:0,height:0},V=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},j=V[A],U=V[R],H=Ys(0,S[O],W[O]),Z=b?S[O]/2-P-H-j-I.mainAxis:L-H-j-I.mainAxis,G=b?-S[O]/2+P+H+U+I.mainAxis:z+H+U+I.mainAxis,q=t.elements.arrow&&us(t.elements.arrow),K=q?"y"===x?q.clientTop||0:q.clientLeft||0:0,X=null!=(E=null==N?void 0:N[x])?E:0,Y=M+G-X,$=Ys(p?Ho(D,M+Z-X-K):D,M,p?Uo(F,Y):F);k[x]=$,C[x]=$-M}if(s){var Q,J="x"===x?cs:hs,ee="x"===x?ls:fs,te=k[w],ne="y"===w?"height":"width",re=te+v[J],ae=te-v[ee],ie=-1!==[cs,hs].indexOf(g),oe=null!=(Q=null==N?void 0:N[w])?Q:0,se=ie?re:te-S[ne]-_[ne]-oe+I.altAxis,ue=ie?te+S[ne]+_[ne]-oe-I.altAxis:ae,ce=p&&ie?function(e,t,n){var r=Ys(e,t,n);return r>n?n:r}(se,te,ue):Ys(p?se:re,te,p?ue:ae);k[w]=ce,C[w]=ce-te}t.modifiersData[r]=C}},requiresIfExists:["offset"]};var Qs={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,a=e.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,s=Es(n.placement),u=Rs(s),c=[hs,fs].indexOf(s)>=0?"height":"width";if(i&&o){var l=function(e,t){return Gs("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:qs(e,ds))}(a.padding,n),f=ns(i),h="y"===u?cs:hs,p="y"===u?ls:fs,d=n.rects.reference[c]+n.rects.reference[u]-o[u]-n.rects.popper[c],m=o[u]-n.rects.reference[u],v=us(i),g=v?"y"===u?v.clientHeight||0:v.clientWidth||0:0,y=d/2-m/2,b=l[h],x=g-f[c]-l[p],w=g/2-f[c]/2+y,k=Ys(b,w,x),S=u;n.modifiersData[r]=((t={})[S]=k,t.centerOffset=k-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&js(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Js(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function eu(e){return[cs,fs,ls,hs].some((function(t){return e[t]>=0}))}var tu=Is({defaultModifiers:[Cs,{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Os({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},Fs,Ps,Ls,Xs,$s,Qs,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,a=t.rects.popper,i=t.modifiersData.preventOverflow,o=Ks(t,{elementContext:"reference"}),s=Ks(t,{altBoundary:!0}),u=Js(o,r),c=Js(s,a,i),l=eu(u),f=eu(c);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:c,isReferenceHidden:l,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":f})}}]}),nu="tippy-content",ru="tippy-backdrop",au="tippy-arrow",iu="tippy-svg-arrow",ou={passive:!0,capture:!0},su=function(){return document.body};function uu(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?Array.isArray(n)?n[t]:n:r}return e}function cu(e,t){var n={}.toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function lu(e,t){return"function"===typeof e?e.apply(void 0,t):e}function fu(e,t){return 0===t?e:function(r){clearTimeout(n),n=setTimeout((function(){e(r)}),t)};var n}function hu(e){return[].concat(e)}function pu(e,t){-1===e.indexOf(t)&&e.push(t)}function du(e){return e.split("-")[0]}function mu(e){return[].slice.call(e)}function vu(e){return Object.keys(e).reduce((function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t}),{})}function gu(){return document.createElement("div")}function yu(e){return["Element","Fragment"].some((function(t){return cu(e,t)}))}function bu(e){return cu(e,"MouseEvent")}function xu(e){return!(!e||!e._tippy||e._tippy.reference!==e)}function wu(e){return yu(e)?[e]:function(e){return cu(e,"NodeList")}(e)?mu(e):Array.isArray(e)?e:mu(document.querySelectorAll(e))}function ku(e,t){e.forEach((function(e){e&&(e.style.transitionDuration=t+"ms")}))}function Su(e,t){e.forEach((function(e){e&&e.setAttribute("data-state",t)}))}function _u(e){var t,n=hu(e)[0];return null!=n&&null!=(t=n.ownerDocument)&&t.body?n.ownerDocument:document}function Tu(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(t){e[r](t,n)}))}function Iu(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=null==n.getRootNode||null==(r=n.getRootNode())?void 0:r.host}return!1}var Nu={isTouch:!1},Cu=0;function Eu(){Nu.isTouch||(Nu.isTouch=!0,window.performance&&document.addEventListener("mousemove",Au))}function Au(){var e=performance.now();e-Cu<20&&(Nu.isTouch=!1,document.removeEventListener("mousemove",Au)),Cu=e}function Ru(){var e=document.activeElement;if(xu(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}var Ou=!!("undefined"!==typeof window&&"undefined"!==typeof document)&&!!window.msCrypto;var Mu={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Du=Object.assign({appendTo:su,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Mu,{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),Fu=Object.keys(Du);function Pu(e){var t=(e.plugins||[]).reduce((function(t,n){var r,a=n.name,i=n.defaultValue;a&&(t[a]=void 0!==e[a]?e[a]:null!=(r=Du[a])?r:i);return t}),{});return Object.assign({},e,t)}function Lu(e,t){var n=Object.assign({},t,{content:lu(t.content,[e])},t.ignoreAttributes?{}:function(e,t){return(t?Object.keys(Pu(Object.assign({},Du,{plugins:t}))):Fu).reduce((function(t,n){var r=(e.getAttribute("data-tippy-"+n)||"").trim();if(!r)return t;if("content"===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(a){t[n]=r}return t}),{})}(e,t.plugins));return n.aria=Object.assign({},Du.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}function zu(e,t){e.innerHTML=t}function Bu(e){var t=gu();return!0===e?t.className=au:(t.className=iu,yu(e)?t.appendChild(e):zu(t,e)),t}function Wu(e,t){yu(t.content)?(zu(e,""),e.appendChild(t.content)):"function"!==typeof t.content&&(t.allowHTML?zu(e,t.content):e.textContent=t.content)}function Vu(e){var t=e.firstElementChild,n=mu(t.children);return{box:t,content:n.find((function(e){return e.classList.contains(nu)})),arrow:n.find((function(e){return e.classList.contains(au)||e.classList.contains(iu)})),backdrop:n.find((function(e){return e.classList.contains(ru)}))}}function ju(e){var t=gu(),n=gu();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=gu();function a(n,r){var a=Vu(t),i=a.box,o=a.content,s=a.arrow;r.theme?i.setAttribute("data-theme",r.theme):i.removeAttribute("data-theme"),"string"===typeof r.animation?i.setAttribute("data-animation",r.animation):i.removeAttribute("data-animation"),r.inertia?i.setAttribute("data-inertia",""):i.removeAttribute("data-inertia"),i.style.maxWidth="number"===typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?i.setAttribute("role",r.role):i.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||Wu(o,e.props),r.arrow?s?n.arrow!==r.arrow&&(i.removeChild(s),i.appendChild(Bu(r.arrow))):i.appendChild(Bu(r.arrow)):s&&i.removeChild(s)}return r.className=nu,r.setAttribute("data-state","hidden"),Wu(r,e.props),t.appendChild(n),n.appendChild(r),a(e.props,e.props),{popper:t,onUpdate:a}}ju.$$tippy=!0;var Uu=1,Hu=[],Zu=[];function Gu(e,t){var n,r,a,i,o,s,u,c,l=Lu(e,Object.assign({},Du,Pu(vu(t)))),f=!1,h=!1,p=!1,d=!1,m=[],v=fu(q,l.interactiveDebounce),g=Uu++,y=(c=l.plugins).filter((function(e,t){return c.indexOf(e)===t})),b={id:g,reference:e,popper:gu(),popperInstance:null,props:l,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:y,clearDelayTimeouts:function(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(a)},setProps:function(t){0;if(b.state.isDestroyed)return;M("onBeforeUpdate",[b,t]),Z();var n=b.props,r=Lu(e,Object.assign({},n,vu(t),{ignoreAttributes:!0}));b.props=r,H(),n.interactiveDebounce!==r.interactiveDebounce&&(P(),v=fu(q,r.interactiveDebounce));n.triggerTarget&&!r.triggerTarget?hu(n.triggerTarget).forEach((function(e){e.removeAttribute("aria-expanded")})):r.triggerTarget&&e.removeAttribute("aria-expanded");F(),O(),k&&k(n,r);b.popperInstance&&($(),J().forEach((function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})));M("onAfterUpdate",[b,t])},setContent:function(e){b.setProps({content:e})},show:function(){0;var e=b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,r=Nu.isTouch&&!b.props.touch,a=uu(b.props.duration,0,Du.duration);if(e||t||n||r)return;if(C().hasAttribute("disabled"))return;if(M("onShow",[b],!1),!1===b.props.onShow(b))return;b.state.isVisible=!0,N()&&(w.style.visibility="visible");O(),W(),b.state.isMounted||(w.style.transition="none");if(N()){var i=A(),o=i.box,u=i.content;ku([o,u],0)}s=function(){var e;if(b.state.isVisible&&!d){if(d=!0,w.offsetHeight,w.style.transition=b.props.moveTransition,N()&&b.props.animation){var t=A(),n=t.box,r=t.content;ku([n,r],a),Su([n,r],"visible")}D(),F(),pu(Zu,b),null==(e=b.popperInstance)||e.forceUpdate(),M("onMount",[b]),b.props.animation&&N()&&function(e,t){j(e,t)}(a,(function(){b.state.isShown=!0,M("onShown",[b])}))}},function(){var e,t=b.props.appendTo,n=C();e=b.props.interactive&&t===su||"parent"===t?n.parentNode:lu(t,[n]);e.contains(w)||e.appendChild(w);b.state.isMounted=!0,$(),!1}()},hide:function(){0;var e=!b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,r=uu(b.props.duration,1,Du.duration);if(e||t||n)return;if(M("onHide",[b],!1),!1===b.props.onHide(b))return;b.state.isVisible=!1,b.state.isShown=!1,d=!1,f=!1,N()&&(w.style.visibility="hidden");if(P(),V(),O(!0),N()){var a=A(),i=a.box,o=a.content;b.props.animation&&(ku([i,o],r),Su([i,o],"hidden"))}D(),F(),b.props.animation?N()&&function(e,t){j(e,(function(){!b.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&t()}))}(r,b.unmount):b.unmount()},hideWithInteractivity:function(e){0;E().addEventListener("mousemove",v),pu(Hu,v),v(e)},enable:function(){b.state.isEnabled=!0},disable:function(){b.hide(),b.state.isEnabled=!1},unmount:function(){0;b.state.isVisible&&b.hide();if(!b.state.isMounted)return;Q(),J().forEach((function(e){e._tippy.unmount()})),w.parentNode&&w.parentNode.removeChild(w);Zu=Zu.filter((function(e){return e!==b})),b.state.isMounted=!1,M("onHidden",[b])},destroy:function(){0;if(b.state.isDestroyed)return;b.clearDelayTimeouts(),b.unmount(),Z(),delete e._tippy,b.state.isDestroyed=!0,M("onDestroy",[b])}};if(!l.render)return b;var x=l.render(b),w=x.popper,k=x.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+b.id,b.popper=w,e._tippy=b,w._tippy=b;var S=y.map((function(e){return e.fn(b)})),_=e.hasAttribute("aria-expanded");return H(),F(),O(),M("onCreate",[b]),l.showOnCreate&&ee(),w.addEventListener("mouseenter",(function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()})),w.addEventListener("mouseleave",(function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&E().addEventListener("mousemove",v)})),b;function T(){var e=b.props.touch;return Array.isArray(e)?e:[e,0]}function I(){return"hold"===T()[0]}function N(){var e;return!(null==(e=b.props.render)||!e.$$tippy)}function C(){return u||e}function E(){var e=C().parentNode;return e?_u(e):document}function A(){return Vu(w)}function R(e){return b.state.isMounted&&!b.state.isVisible||Nu.isTouch||i&&"focus"===i.type?0:uu(b.props.delay,e?0:1,Du.delay)}function O(e){void 0===e&&(e=!1),w.style.pointerEvents=b.props.interactive&&!e?"":"none",w.style.zIndex=""+b.props.zIndex}function M(e,t,n){var r;(void 0===n&&(n=!0),S.forEach((function(n){n[e]&&n[e].apply(n,t)})),n)&&(r=b.props)[e].apply(r,t)}function D(){var t=b.props.aria;if(t.content){var n="aria-"+t.content,r=w.id;hu(b.props.triggerTarget||e).forEach((function(e){var t=e.getAttribute(n);if(b.state.isVisible)e.setAttribute(n,t?t+" "+r:r);else{var a=t&&t.replace(r,"").trim();a?e.setAttribute(n,a):e.removeAttribute(n)}}))}}function F(){!_&&b.props.aria.expanded&&hu(b.props.triggerTarget||e).forEach((function(e){b.props.interactive?e.setAttribute("aria-expanded",b.state.isVisible&&e===C()?"true":"false"):e.removeAttribute("aria-expanded")}))}function P(){E().removeEventListener("mousemove",v),Hu=Hu.filter((function(e){return e!==v}))}function L(t){if(!Nu.isTouch||!p&&"mousedown"!==t.type){var n=t.composedPath&&t.composedPath()[0]||t.target;if(!b.props.interactive||!Iu(w,n)){if(hu(b.props.triggerTarget||e).some((function(e){return Iu(e,n)}))){if(Nu.isTouch)return;if(b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else M("onClickOutside",[b,t]);!0===b.props.hideOnClick&&(b.clearDelayTimeouts(),b.hide(),h=!0,setTimeout((function(){h=!1})),b.state.isMounted||V())}}}function z(){p=!0}function B(){p=!1}function W(){var e=E();e.addEventListener("mousedown",L,!0),e.addEventListener("touchend",L,ou),e.addEventListener("touchstart",B,ou),e.addEventListener("touchmove",z,ou)}function V(){var e=E();e.removeEventListener("mousedown",L,!0),e.removeEventListener("touchend",L,ou),e.removeEventListener("touchstart",B,ou),e.removeEventListener("touchmove",z,ou)}function j(e,t){var n=A().box;function r(e){e.target===n&&(Tu(n,"remove",r),t())}if(0===e)return t();Tu(n,"remove",o),Tu(n,"add",r),o=r}function U(t,n,r){void 0===r&&(r=!1),hu(b.props.triggerTarget||e).forEach((function(e){e.addEventListener(t,n,r),m.push({node:e,eventType:t,handler:n,options:r})}))}function H(){I()&&(U("touchstart",G,{passive:!0}),U("touchend",K,{passive:!0})),function(e){return e.split(/\s+/).filter(Boolean)}(b.props.trigger).forEach((function(e){if("manual"!==e)switch(U(e,G),e){case"mouseenter":U("mouseleave",K);break;case"focus":U(Ou?"focusout":"blur",X);break;case"focusin":U("focusout",X)}}))}function Z(){m.forEach((function(e){var t=e.node,n=e.eventType,r=e.handler,a=e.options;t.removeEventListener(n,r,a)})),m=[]}function G(e){var t,n=!1;if(b.state.isEnabled&&!Y(e)&&!h){var r="focus"===(null==(t=i)?void 0:t.type);i=e,u=e.currentTarget,F(),!b.state.isVisible&&bu(e)&&Hu.forEach((function(t){return t(e)})),"click"===e.type&&(b.props.trigger.indexOf("mouseenter")<0||f)&&!1!==b.props.hideOnClick&&b.state.isVisible?n=!0:ee(e),"click"===e.type&&(f=!n),n&&!r&&te(e)}}function q(e){var t=e.target,n=C().contains(t)||w.contains(t);if("mousemove"!==e.type||!n){var r=J().concat(w).map((function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:l}:null})).filter(Boolean);(function(e,t){var n=t.clientX,r=t.clientY;return e.every((function(e){var t=e.popperRect,a=e.popperState,i=e.props.interactiveBorder,o=du(a.placement),s=a.modifiersData.offset;if(!s)return!0;var u="bottom"===o?s.top.y:0,c="top"===o?s.bottom.y:0,l="right"===o?s.left.x:0,f="left"===o?s.right.x:0,h=t.top-r+u>i,p=r-t.bottom-c>i,d=t.left-n+l>i,m=n-t.right-f>i;return h||p||d||m}))})(r,e)&&(P(),te(e))}}function K(e){Y(e)||b.props.trigger.indexOf("click")>=0&&f||(b.props.interactive?b.hideWithInteractivity(e):te(e))}function X(e){b.props.trigger.indexOf("focusin")<0&&e.target!==C()||b.props.interactive&&e.relatedTarget&&w.contains(e.relatedTarget)||te(e)}function Y(e){return!!Nu.isTouch&&I()!==e.type.indexOf("touch")>=0}function $(){Q();var t=b.props,n=t.popperOptions,r=t.placement,a=t.offset,i=t.getReferenceClientRect,o=t.moveTransition,u=N()?Vu(w).arrow:null,c=i?{getBoundingClientRect:i,contextElement:i.contextElement||C()}:e,l={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(N()){var n=A().box;["placement","reference-hidden","escaped"].forEach((function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)})),t.attributes.popper={}}}},f=[{name:"offset",options:{offset:a}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!o}},l];N()&&u&&f.push({name:"arrow",options:{element:u,padding:3}}),f.push.apply(f,(null==n?void 0:n.modifiers)||[]),b.popperInstance=tu(c,w,Object.assign({},n,{placement:r,onFirstUpdate:s,modifiers:f}))}function Q(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function J(){return mu(w.querySelectorAll("[data-tippy-root]"))}function ee(e){b.clearDelayTimeouts(),e&&M("onTrigger",[b,e]),W();var t=R(!0),r=T(),a=r[0],i=r[1];Nu.isTouch&&"hold"===a&&i&&(t=i),t?n=setTimeout((function(){b.show()}),t):b.show()}function te(e){if(b.clearDelayTimeouts(),M("onUntrigger",[b,e]),b.state.isVisible){if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&f)){var t=R(!1);t?r=setTimeout((function(){b.state.isVisible&&b.hide()}),t):a=requestAnimationFrame((function(){b.hide()}))}}else V()}}function qu(e,t){void 0===t&&(t={});var n=Du.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",Eu,ou),window.addEventListener("blur",Ru);var r=Object.assign({},t,{plugins:n}),a=wu(e).reduce((function(e,t){var n=t&&Gu(t,r);return n&&e.push(n),e}),[]);return yu(e)?a[0]:a}qu.defaultProps=Du,qu.setDefaultProps=function(e){Object.keys(e).forEach((function(t){Du[t]=e[t]}))},qu.currentInput=Nu;Object.assign({},Ps,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}});qu.setDefaultProps({render:ju});var Ku=qu,Xu=Math.sqrt(50),Yu=Math.sqrt(10),$u=Math.sqrt(2);function Qu(e,t,n){var r,a,i,o,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),0===(o=Ju(e,t,n))||!isFinite(o))return[];if(o>0){var u=Math.round(e/o),c=Math.round(t/o);for(u*o<e&&++u,c*o>t&&--c,i=new Array(a=c-u+1);++s<a;)i[s]=(u+s)*o}else{o=-o;var l=Math.round(e*o),f=Math.round(t*o);for(l/o<e&&++l,f/o>t&&--f,i=new Array(a=f-l+1);++s<a;)i[s]=(l+s)/o}return r&&i.reverse(),i}function Ju(e,t,n){var r=(t-e)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,a);return a>=0?(i>=Xu?10:i>=Yu?5:i>=$u?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(i>=Xu?10:i>=Yu?5:i>=$u?2:1)}function ec(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function tc(e){return(e=ec(Math.abs(e)))?e[1]:NaN}var nc,rc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ac(e){if(!(t=rc.exec(e)))throw new Error("invalid format: "+e);var t;return new ic({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function ic(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function oc(e,t){var n=ec(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}ac.prototype=ic.prototype,ic.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var sc={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return oc(100*e,t)},r:oc,s:function(e,t){var n=ec(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(nc=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+ec(e,Math.max(0,t+i-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function uc(e){return e}var cc,lc,fc,hc=Array.prototype.map,pc=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function dc(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?uc:(t=hc.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,i=[],o=0,s=t[0],u=0;a>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),i.push(e.substring(a-=s,a+s)),!((u+=s+1)>r));)s=t[o=(o+1)%t.length];return i.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?uc:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(hc.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=ac(e)).fill,n=e.align,f=e.sign,h=e.symbol,p=e.zero,d=e.width,m=e.comma,v=e.precision,g=e.trim,y=e.type;"n"===y?(m=!0,y="g"):sc[y]||(void 0===v&&(v=12),g=!0,y="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var b="$"===h?a:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===h?i:/[%p]/.test(y)?u:"",w=sc[y],k=/[defgprs%]/.test(y);function S(e){var a,i,u,h=b,S=x;if("c"===y)S=w(e)+S,e="";else{var _=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:w(Math.abs(e),v),g&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),_&&0===+e&&"+"!==f&&(_=!1),h=(_?"("===f?f:c:"-"===f||"("===f?"":f)+h,S=("s"===y?pc[8+nc/3]:"")+S+(_&&"("===f?")":""),k)for(a=-1,i=e.length;++a<i;)if(48>(u=e.charCodeAt(a))||u>57){S=(46===u?o+e.slice(a+1):e.slice(a))+S,e=e.slice(0,a);break}}m&&!p&&(e=r(e,1/0));var T=h.length+e.length+S.length,I=T<d?new Array(d-T+1).join(t):"";switch(m&&p&&(e=r(I+e,I.length?d-S.length:1/0),I=""),n){case"<":e=h+e+S+I;break;case"=":e=h+I+e+S;break;case"^":e=I.slice(0,T=I.length>>1)+h+e+S+I.slice(T);break;default:e=I+h+e+S}return s(e)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),S.toString=function(){return e+""},S}return{format:f,formatPrefix:function(e,t){var n=f(((e=ac(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(tc(t)/3))),a=Math.pow(10,-r),i=pc[8+r/3];return function(e){return n(a*e)+i}}}}function mc(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function vc(e){var t=e,n=e;function r(e,t,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;n(e[i],t)<0?r=i+1:a=i}return r}return 1===e.length&&(t=function(t,n){return e(t)-n},n=function(e){return function(t,n){return mc(e(t),n)}}(e)),{left:r,center:function(e,n,a,i){null==a&&(a=0),null==i&&(i=e.length);var o=r(e,n,a,i-1);return o>a&&t(e[o-1],n)>-t(e[o],n)?o-1:o},right:function(e,t,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;n(e[i],t)>0?a=i:r=i+1}return r}}}cc=dc({thousands:",",grouping:[3],currency:["$",""]}),lc=cc.format,fc=cc.formatPrefix;var gc=vc(mc),yc=gc.right,bc=(gc.left,vc((function(e){return null===e?NaN:+e})).center,yc);function xc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function wc(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function kc(){}var Sc=.7,_c=1/Sc,Tc="\\s*([+-]?\\d+)\\s*",Ic="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nc="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Cc=/^#([0-9a-f]{3,8})$/,Ec=new RegExp("^rgb\\("+[Tc,Tc,Tc]+"\\)$"),Ac=new RegExp("^rgb\\("+[Nc,Nc,Nc]+"\\)$"),Rc=new RegExp("^rgba\\("+[Tc,Tc,Tc,Ic]+"\\)$"),Oc=new RegExp("^rgba\\("+[Nc,Nc,Nc,Ic]+"\\)$"),Mc=new RegExp("^hsl\\("+[Ic,Nc,Nc]+"\\)$"),Dc=new RegExp("^hsla\\("+[Ic,Nc,Nc,Ic]+"\\)$"),Fc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Pc(){return this.rgb().formatHex()}function Lc(){return this.rgb().formatRgb()}function zc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Cc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Bc(t):3===n?new Uc(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Wc(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Wc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Ec.exec(e))?new Uc(t[1],t[2],t[3],1):(t=Ac.exec(e))?new Uc(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Rc.exec(e))?Wc(t[1],t[2],t[3],t[4]):(t=Oc.exec(e))?Wc(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Mc.exec(e))?qc(t[1],t[2]/100,t[3]/100,1):(t=Dc.exec(e))?qc(t[1],t[2]/100,t[3]/100,t[4]):Fc.hasOwnProperty(e)?Bc(Fc[e]):"transparent"===e?new Uc(NaN,NaN,NaN,0):null}function Bc(e){return new Uc(e>>16&255,e>>8&255,255&e,1)}function Wc(e,t,n,r){return r<=0&&(e=t=n=NaN),new Uc(e,t,n,r)}function Vc(e){return e instanceof kc||(e=zc(e)),e?new Uc((e=e.rgb()).r,e.g,e.b,e.opacity):new Uc}function jc(e,t,n,r){return 1===arguments.length?Vc(e):new Uc(e,t,n,null==r?1:r)}function Uc(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Hc(){return"#"+Gc(this.r)+Gc(this.g)+Gc(this.b)}function Zc(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Gc(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function qc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Xc(e,t,n,r)}function Kc(e){if(e instanceof Xc)return new Xc(e.h,e.s,e.l,e.opacity);if(e instanceof kc||(e=zc(e)),!e)return new Xc;if(e instanceof Xc)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,s=i-a,u=(i+a)/2;return s?(o=t===i?(n-r)/s+6*(n<r):n===i?(r-t)/s+2:(t-n)/s+4,s/=u<.5?i+a:2-i-a,o*=60):s=u>0&&u<1?0:o,new Xc(o,s,u,e.opacity)}function Xc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Yc(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function $c(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}xc(kc,zc,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Pc,formatHex:Pc,formatHsl:function(){return Kc(this).formatHsl()},formatRgb:Lc,toString:Lc}),xc(Uc,jc,wc(kc,{brighter:function(e){return e=null==e?_c:Math.pow(_c,e),new Uc(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Sc:Math.pow(Sc,e),new Uc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hc,formatHex:Hc,formatRgb:Zc,toString:Zc})),xc(Xc,(function(e,t,n,r){return 1===arguments.length?Kc(e):new Xc(e,t,n,null==r?1:r)}),wc(kc,{brighter:function(e){return e=null==e?_c:Math.pow(_c,e),new Xc(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Sc:Math.pow(Sc,e),new Xc(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Uc(Yc(e>=240?e-240:e+120,a,r),Yc(e,a,r),Yc(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Qc=function(e){return function(){return e}};function Jc(e,t){return function(n){return e+n*t}}function el(e){return 1===(e=+e)?tl:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Qc(isNaN(t)?n:t)}}function tl(e,t){var n=t-e;return n?Jc(e,n):Qc(isNaN(e)?t:e)}var nl=function e(t){var n=el(t);function r(e,t){var r=n((e=jc(e)).r,(t=jc(t)).r),a=n(e.g,t.g),i=n(e.b,t.b),o=tl(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=i(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function rl(e){return function(t){var n,r,a=t.length,i=new Array(a),o=new Array(a),s=new Array(a);for(n=0;n<a;++n)r=jc(t[n]),i[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return i=e(i),o=e(o),s=e(s),r.opacity=1,function(e){return r.r=i(e),r.g=o(e),r.b=s(e),r+""}}}rl((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],i=e[r+1],o=r>0?e[r-1]:2*a-i,s=r<t-1?e[r+2]:2*i-a;return $c((n-r/t)*t,o,a,i,s)}})),rl((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],i=e[r%t],o=e[(r+1)%t],s=e[(r+2)%t];return $c((n-r/t)*t,a,i,o,s)}}));function al(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,i=new Array(a),o=new Array(r);for(n=0;n<a;++n)i[n]=hl(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<a;++n)o[n]=i[n](e);return o}}function il(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ol(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function sl(e,t){var n,r={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=hl(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var ul=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cl=new RegExp(ul.source,"g");function ll(e,t){var n,r,a,i=ul.lastIndex=cl.lastIndex=0,o=-1,s=[],u=[];for(e+="",t+="";(n=ul.exec(e))&&(r=cl.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:ol(n,r)})),i=cl.lastIndex;return i<t.length&&(a=t.slice(i),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function fl(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(n=0;n<r;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}}function hl(e,t){var n,r=typeof t;return null==t||"boolean"===r?Qc(t):("number"===r?ol:"string"===r?(n=zc(t))?(t=n,nl):ll:t instanceof zc?nl:t instanceof Date?il:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?fl:Array.isArray(t)?al:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?sl:ol)(e,t)}function pl(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function dl(e){return+e}var ml=[0,1];function vl(e){return e}function gl(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function yl(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=gl(a,r),i=n(o,i)):(r=gl(r,a),i=n(i,o)),function(e){return i(r(e))}}function bl(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=gl(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(t){var n=bc(e,t,1,r)-1;return i[n](a[n](t))}}function xl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function wl(){var e,t,n,r,a,i,o=ml,s=ml,u=hl,c=vl;function l(){var e=Math.min(o.length,s.length);return c!==vl&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?bl:yl,a=i=null,f}function f(t){return null==t||isNaN(t=+t)?n:(a||(a=r(o.map(e),s,u)))(e(c(t)))}return f.invert=function(n){return c(t((i||(i=r(s,o.map(e),ol)))(n)))},f.domain=function(e){return arguments.length?(o=Array.from(e,dl),l()):o.slice()},f.range=function(e){return arguments.length?(s=Array.from(e),l()):s.slice()},f.rangeRound=function(e){return s=Array.from(e),u=pl,l()},f.clamp=function(e){return arguments.length?(c=!!e||vl,l()):c!==vl},f.interpolate=function(e){return arguments.length?(u=e,l()):u},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,l()}}function kl(){return wl()(vl,vl)}function Sl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function _l(e){return Math.log(e)}function Tl(e){return Math.exp(e)}function Il(e){return-Math.log(-e)}function Nl(e){return-Math.exp(-e)}function Cl(e){return isFinite(e)?+("1e"+e):e<0?0:e}function El(e){return function(t){return-e(-t)}}function Al(e){var t,n,r=e(_l,Tl),a=r.domain,i=10;function o(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(i),n=function(e){return 10===e?Cl:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(i),a()[0]<0?(t=El(t),n=El(n),e(Il,Nl)):e(_l,Tl),r}return r.base=function(e){return arguments.length?(i=+e,o()):i},r.domain=function(e){return arguments.length?(a(e),o()):a()},r.ticks=function(e){var r,o=a(),s=o[0],u=o[o.length-1];(r=u<s)&&(h=s,s=u,u=h);var c,l,f,h=t(s),p=t(u),d=null==e?10:+e,m=[];if(!(i%1)&&p-h<d){if(h=Math.floor(h),p=Math.ceil(p),s>0){for(;h<=p;++h)for(l=1,c=n(h);l<i;++l)if(!((f=c*l)<s)){if(f>u)break;m.push(f)}}else for(;h<=p;++h)for(l=i-1,c=n(h);l>=1;--l)if(!((f=c*l)<s)){if(f>u)break;m.push(f)}2*m.length<d&&(m=Qu(s,u,d))}else m=Qu(h,p,Math.min(p-h,d)).map(n);return r?m.reverse():m},r.tickFormat=function(e,a){if(null==a&&(a=10===i?".0e":","),"function"!==typeof a&&(a=lc(a)),e===1/0)return a;null==e&&(e=10);var o=Math.max(1,i*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*i<i-.5&&(r*=i),r<=o?a(e):""}},r.nice=function(){return a(function(e,t){var n,r=0,a=(e=e.slice()).length-1,i=e[r],o=e[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),e[r]=t.floor(i),e[a]=t.ceil(o),e}(a(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function Rl(){var e=Al(wl()).domain([1,10]);return e.copy=function(){return xl(e,Rl()).base(e.base())},Sl.apply(e,arguments),e}function Ol(e,t,n,r){var a,i=function(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/a;return i>=Xu?a*=10:i>=Yu?a*=5:i>=$u&&(a*=2),t<e?-a:a}(e,t,n);switch((r=ac(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(tc(t)/3)))-tc(Math.abs(e)))}(i,o))||(r.precision=a),fc(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,tc(t)-tc(e))+1}(i,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=function(e){return Math.max(0,-tc(Math.abs(e)))}(i))||(r.precision=a-2*("%"===r.type))}return lc(r)}function Ml(e){var t=e.domain;return e.ticks=function(e){var n=t();return Qu(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return Ol(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,a,i=t(),o=0,s=i.length-1,u=i[o],c=i[s],l=10;for(c<u&&(a=u,u=c,c=a,a=o,o=s,s=a);l-- >0;){if((a=Ju(u,c,n))===r)return i[o]=u,i[s]=c,t(i);if(a>0)u=Math.floor(u/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;u=Math.ceil(u*a)/a,c=Math.floor(c*a)/a}r=a}return e},e}function Dl(){var e=kl();return e.copy=function(){return xl(e,Dl())},Sl.apply(e,arguments),Ml(e)}function Fl(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Pl(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Ll(e){return e<0?-e*e:e*e}function zl(e){var t=e(vl,vl),n=1;function r(){return 1===n?e(vl,vl):.5===n?e(Pl,Ll):e(Fl(n),Fl(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},Ml(t)}function Bl(){var e=zl(wl());return e.copy=function(){return xl(e,Bl()).exponent(e.exponent())},Sl.apply(e,arguments),e}function Wl(){return Bl.apply(null,arguments).exponent(.5)}var Vl=Symbol("implicit");var jl=function(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function Ul(){return(Ul=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Hl=Math.PI/180;function Zl(e){return e.text}function Gl(){return"serif"}function ql(){return"normal"}function Kl(e){return Math.sqrt(e.value)}function Xl(){return 30*(~~(6*Math.random())-3)}function Yl(){return 1}function $l(e,t,n,r){if(!t.sprite){var a=e.context,i=e.ratio;a.clearRect(0,0,2048/i,2048/i);var o=0,s=0,u=0,c=n.length;for(--r;++r<c;){t=n[r],a.save(),a.font=t.style+" "+t.weight+" "+~~((t.size+1)/i)+"px "+t.font;var l=a.measureText(t.text+"m").width*i,f=t.size<<1;if(t.rotate){var h=Math.sin(t.rotate*Hl),p=Math.cos(t.rotate*Hl),d=l*p,m=l*h,v=f*p,g=f*h;l=Math.max(Math.abs(d+g),Math.abs(d-g))+31>>5<<5,f=~~Math.max(Math.abs(m+v),Math.abs(m-v))}else l=l+31>>5<<5;if(f>u&&(u=f),o+l>=2048&&(o=0,s+=u,u=0),s+f>=2048)break;a.translate((o+(l>>1))/i,(s+(f>>1))/i),t.rotate&&a.rotate(t.rotate*Hl),a.fillText(t.text,0,0),t.padding&&(a.lineWidth=2*t.padding,a.strokeText(t.text,0,0)),a.restore(),t.width=l,t.height=f,t.xoff=o,t.yoff=s,t.x1=l>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=l}for(var y=a.getImageData(0,0,2048/i,2048/i).data,b=[];--r>=0;)if((t=n[r]).hasText){for(var x=(l=t.width)>>5,w=(f=t.y1-t.y0,0);w<f*x;w++)b[w]=0;if(null==(o=t.xoff))return;s=t.yoff;for(var k=0,S=-1,_=0;_<f;_++){for(w=0;w<l;w++){var T=y[2048*(s+_)+(o+w)<<2]?1<<31-w%32:0;b[x*_+(w>>5)]|=T,k|=T}k?S=_:(t.y0++,f--,_--,s++)}t.y1=t.y0+S,t.sprite=b.slice(0,(t.y1-t.y0)*x)}}}function Ql(e,t,n){for(var r,a=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=127&o,u=32-s,c=e.y1-e.y0,l=(e.y+e.y0)*(n>>=5)+(o>>5),f=0;f<c;f++){r=0;for(var h=0;h<=i;h++)if((r<<u|(h<i?(r=a[f*i+h])>>>s:0))&t[l+h])return!0;l+=n}return!1}function Jl(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function ef(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function tf(){return document.createElement("canvas")}function nf(e){return"function"==typeof e?e:function(){return e}}var rf={archimedean:ef,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var a=e<0?-1:1;switch(Math.sqrt(1+4*a*e)-a&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}};function af(e,t){return e[Math.floor(t()*e.length)]}function of(e){return e.size+"px"}function sf(e){return e.text}function uf(e){return"translate("+e.x+", "+e.y+")"+("number"==typeof e.rotate?"rotate("+e.rotate+")":"")}function cf(e){var t,n=e.callbacks,r=e.maxWords,a=e.options,i=e.selection,o=e.size,s=a.deterministic,u=a.enableOptimizations,c=a.fontFamily,l=a.fontStyle,f=a.fontSizes,h=a.fontWeight,p=a.padding,d=a.randomSeed,m=a.rotations,v=a.rotationAngles,g=a.spiral,y=a.scale,b=e.words.concat().sort((function(e,t){return function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}(e.value,t.value)})).slice(0,r),x=zo()(s?d||"deterministic":null);(t=u?function(){var e=[256,256],t=Zl,n=Gl,r=Kl,a=ql,i=ql,o=Xl,s=Yl,u=ef,c=[],l=1/0,f=(0,Ra.Z)("word","end"),h=Math.random,p={},d=tf,m=!1;function v(t,n,r){for(var a,i,o,s,c,l=n.x,f=n.y,p=Math.sqrt(e[0]*e[0]+e[1]*e[1]),d=u(e),m=h()<.5?1:-1,v=-m;(a=d(v+=m))&&(i=~~a[0],o=~~a[1],!(Math.min(Math.abs(i),Math.abs(o))>=p));)if(n.x=l+i,n.y=f+o,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>e[0]||n.y+n.y1>e[1]||r&&Ql(n,t,e[0])||r&&!((s=n).x+s.x1>(c=r)[0].x&&s.x+s.x0<c[1].x&&s.y+s.y1>c[0].y&&s.y+s.y0<c[1].y))){for(var g,y=n.sprite,b=n.width>>5,x=e[0]>>5,w=n.x-(b<<4),k=127&w,S=32-k,_=n.y1-n.y0,T=(n.y+n.y0)*x+(w>>5),I=0;I<_;I++){g=0;for(var N=0;N<=b;N++)t[T+N]|=g<<S|(N<b?(g=y[I*b+N])>>>k:0);T+=x}return delete n.sprite,!0}return!1}return p.canvas=function(e){return arguments.length?(d=nf(e),p):d},p.start=function(){var u=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=2048/t,e.height=2048/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(d()),l=new Uint32Array((e[0]>>5)*e[1]),g=null,y=[],b=c.map((function(e,u){return e.text=t.call(this,e,u),e.font=n.call(this,e,u),e.style=a.call(this,e,u),e.weight=i.call(this,e,u),e.rotate=o.call(this,e,u),e.size=~~r.call(this,e,u),e.padding=s.call(this,e,u),e})).sort((function(e,t){return t.size-e.size}));return setTimeout((function(){return function t(n){var r=50*n,a=Math.min(50*(n+1),c.length);!function(t,n){for(var r=t;r<n;r+=1){var a=b[r];a.x=e[0]*(h()+.5)>>1,a.y=e[1]*(h()+.5)>>1,$l(u,a,b,r),a.hasText&&v(l,a,g)&&(y.push(a),f.call("word",p,a),g?Jl(g,a):g=[{x:a.x+a.x0,y:a.y+a.y0},{x:a.x+a.x1,y:a.y+a.y1}],a.x-=e[0]>>1,a.y-=e[1]>>1)}}(r,a),m||(a<c.length?setTimeout((function(){return t(n+1)}),0):(p.stop(),f.call("end",p,y,g)))}(0)}),0),p},p.revive=function(){return m=!1,p},p.stop=function(){return m=!0,p},p.timeInterval=function(e){return arguments.length?(l=null==e?1/0:e,p):l},p.words=function(e){return arguments.length?(c=e,p):c},p.size=function(t){return arguments.length?(e=[+t[0],+t[1]],p):e},p.font=function(e){return arguments.length?(n=nf(e),p):n},p.fontStyle=function(e){return arguments.length?(a=nf(e),p):a},p.fontWeight=function(e){return arguments.length?(i=nf(e),p):i},p.rotate=function(e){return arguments.length?(o=nf(e),p):o},p.text=function(e){return arguments.length?(t=nf(e),p):t},p.spiral=function(e){return arguments.length?(u=rf[e]||e,p):u},p.fontSize=function(e){return arguments.length?(r=nf(e),p):r},p.padding=function(e){return arguments.length?(s=nf(e),p):s},p.random=function(e){return arguments.length?(h=e,p):h},p.on=function(){var e=f.on.apply(f,arguments);return e===f?p:e},p}():Do()()).size(o).padding(p).words(Po()(b)).rotate((function(){return void 0===m?30*(~~(6*x())-3):function(e,t,n){if(e<1)return 0;var r=[];if(1===e)r=[t[0]];else{r=[].concat(t);for(var a=(t[1]-t[0])/(e-1),i=t[0]+a;i<t[1];)r.push(i),i+=a}return af(r,n)}(m,v,x)})).spiral(g).random(x).text(sf).font(c).fontStyle(l).fontWeight(h),function e(r,o){void 0===o&&(o=1),u&&t.revive(),t.fontSize((function(e){return function(e,t,n){var r,a=function(e,t){var n;if(void 0===t){var r,a=Oo(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&(n>i||void 0===n&&i>=i)&&(n=i)}}catch(l){a.e(l)}finally{a.f()}}else{var o,s=-1,u=Oo(e);try{for(u.s();!(o=u.n()).done;){var c=o.value;null!=(c=t(c,++s,e))&&(n>c||void 0===n&&c>=c)&&(n=c)}}catch(l){u.e(l)}finally{u.f()}}return n}(e,(function(e){return Number(e.value)})),i=function(e,t){var n;if(void 0===t){var r,a=Oo(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&(n<i||void 0===n&&i>=i)&&(n=i)}}catch(l){a.e(l)}finally{a.f()}}else{var o,s=-1,u=Oo(e);try{for(u.s();!(o=u.n()).done;){var c=o.value;null!=(c=t(c,++s,e))&&(n<c||void 0===n&&c>=c)&&(n=c)}}catch(l){u.e(l)}finally{u.f()}}return n}(e,(function(e){return Number(e.value)}));switch(n){case"log":r=Rl;break;case"sqrt":r=Wl;break;default:r=Dl}return r().domain([a,i]).range(t)}(b,r,y)(e.value)})).on("end",(function(t){if(b.length!==t.length&&o<=10){10===o&&console.warn("Unable to layout "+(b.length-t.length)+" word(s) after "+o+" attempts.  Consider: (1) Increasing the container/component size. (2) Lowering the max font size. (3) Limiting the rotation angles.");var s=Math.max(.95*r[0],1);e([s,Math.max(.95*r[1],s)],o+1)}else!function(e){var t,n=e.callbacks,r=e.options,a=e.random,i=e.words,o=n.getWordColor,s=n.getWordTooltip,u=n.onWordClick,c=n.onWordMouseOver,l=n.onWordMouseOut,f=r.colors,h=r.enableTooltip,p=r.fontStyle,d=r.fontWeight,m=r.textAttributes,v=r.tooltipOptions,g=r.fontFamily,y=r.transitionDuration;function b(e){return o?o(e):af(f,a)}e.selection.selectAll("text").data(i).join((function(e){var n=e.append("text").on("click",(function(e){u&&u(e,$n)})).on("mouseover",(function(e){h&&(t=Ku($n.target,Ul({animation:"scale",arrow:!0,content:function(){return s(e)}},v))),c&&c(e,$n)})).on("mouseout",(function(e){t&&t.destroy(),l&&l(e,$n)})).attr("cursor",u?"pointer":"default").attr("fill",b).attr("font-family",g).attr("font-style",p).attr("font-weight",d).attr("text-anchor","middle").attr("transform","translate(0, 0) rotate(0)");"object"==typeof m&&Object.keys(m).forEach((function(e){n=n.attr(e,m[e])})),n=n.call((function(e){return e.transition().duration(y).attr("font-size",of).attr("transform",uf).text(sf)}))}),(function(e){e.transition().duration(y).attr("fill",b).attr("font-family",g).attr("font-size",of).attr("transform",uf).text(sf)}),(function(e){e.transition().duration(y).attr("fill-opacity",0).remove()}))}({callbacks:n,options:a,random:x,selection:i,words:t})})).start()}(f)}var lf={getWordTooltip:function(e){return e.text+" ("+e.value+")"}},ff={colors:function(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(a);++r<a;)i[r]=e+r*n;return i}(20).map((function(e){return e.toString()})).map(function e(){var t=new Map,n=[],r=[],a=Vl;function i(e){var i=e+"",o=t.get(i);if(!o){if(a!==Vl)return a;t.set(i,o=n.push(e))}return r[(o-1)%r.length]}return i.domain=function(e){if(!arguments.length)return n.slice();n=[],t=new Map;var r,a=Oo(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o+"";t.has(s)||t.set(s,n.push(o))}}catch(u){a.e(u)}finally{a.f()}return i},i.range=function(e){return arguments.length?(r=Array.from(e),i):r.slice()},i.unknown=function(e){return arguments.length?(a=e,i):a},i.copy=function(){return e(n,r).unknown(a)},Sl.apply(i,arguments),i}(jl)),deterministic:!1,enableOptimizations:!1,enableTooltip:!0,fontFamily:"times new roman",fontSizes:[4,32],fontStyle:"normal",fontWeight:"normal",padding:1,rotationAngles:[-90,90],scale:"sqrt",spiral:"rectangular",tooltipOptions:{},transitionDuration:600};function hf(e){var t=e.callbacks,n=e.maxWords,r=void 0===n?100:n,a=e.minSize,i=e.options,o=e.size,s=e.words,u=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(a[n]=e[n]);return a}(e,["callbacks","maxWords","minSize","options","size","words"]),c=Ul({},lf,t),l=Ul({},ff,i),f=function(e,t,n){var r=(0,S.useRef)(),a=(0,S.useState)(t),i=a[0],o=a[1],s=(0,S.useState)(null),u=s[0],c=s[1];return(0,S.useEffect)((function(){var a=r.current,i=oa(a).append("svg").style("display","block");"object"==typeof n&&Object.keys(n).forEach((function(e){i=i.attr(e,n[e])}));var s=i.append("g");function u(e,t){i.attr("height",t).attr("width",e),s.attr("transform","translate("+e/2+", "+t/2+")"),o([e,t])}c(s);var l=0,f=0;void 0===t?(l=a.parentElement.offsetWidth,f=a.parentElement.offsetHeight):(l=t[0],f=t[1]),u(l=Math.max(l,e[0]),f=Math.max(f,e[1]));var h=new Aa((function(e){if(e&&0!==e.length&&void 0===t){var n=e[0].contentRect;u(n.width,n.height)}}));return h.observe(a),function(){h.unobserve(a),oa(a).selectAll("*").remove()}}),[t,e,n]),[r,u,i]}(a,o,i.svgAttributes),h=f[0],p=f[1],d=f[2],m=(0,S.useRef)(Xn()(cf,100));return(0,S.useEffect)((function(){p&&m.current({callbacks:c,maxWords:r,options:l,selection:p,size:d,words:s})}),[r,c,l,p,d,s]),S.createElement("div",Ul({ref:h,style:{height:"100%",width:"100%"}},u))}hf.defaultProps={callbacks:lf,maxWords:100,minSize:[300,300],options:ff};var pf=hf,df=n(3161);function mf(e){return Mn({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 1a2 2 0 0 0-2 2v1h10V3a2 2 0 0 0-2-2H5zm6 8H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1z"}},{tag:"path",attr:{d:"M0 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-2a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2H2a2 2 0 0 1-2-2V7zm2.5 1a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"}}]})(e)}var vf=n(1146),gf=n.n(vf);function yf(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}function bf(){return bf="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=yf(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},bf.apply(this,arguments)}function xf(){}var wf=function(){var e=0;return function(){return e++}}();function kf(e){return null===e||"undefined"===typeof e}function Sf(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function _f(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}var Tf=function(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)};function If(e,t){return Tf(e)?e:t}function Nf(e,t){return"undefined"===typeof e?t:e}var Cf=function(e,t){return"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e};function Ef(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function Af(e,t,n,r){var a,i,o;if(Sf(e))if(i=e.length,r)for(a=i-1;a>=0;a--)t.call(n,e[a],a);else for(a=0;a<i;a++)t.call(n,e[a],a);else if(_f(e))for(i=(o=Object.keys(e)).length,a=0;a<i;a++)t.call(n,e[o[a]],o[a])}function Rf(e,t){var n,r,a,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(a=e[n],i=t[n],a.datasetIndex!==i.datasetIndex||a.index!==i.index)return!1;return!0}function Of(e){if(Sf(e))return e.map(Of);if(_f(e)){for(var t=Object.create(null),n=Object.keys(e),r=n.length,a=0;a<r;++a)t[n[a]]=Of(e[n[a]]);return t}return e}function Mf(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Df(e,t,n,r){if(Mf(e)){var a=t[e],i=n[e];_f(a)&&_f(i)?Ff(a,i,r):t[e]=Of(i)}}function Ff(e,t,n){var r=Sf(t)?t:[t],a=r.length;if(!_f(e))return e;for(var i=(n=n||{}).merger||Df,o=0;o<a;++o)if(_f(t=r[o]))for(var s=Object.keys(t),u=0,c=s.length;u<c;++u)i(s[u],e,t,n);return e}function Pf(e,t){return Ff(e,t,{merger:Lf})}function Lf(e,t,n){if(Mf(e)){var r=t[e],a=n[e];_f(r)&&_f(a)?Pf(r,a):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Of(a))}}var zf={"":function(e){return e},x:function(e){return e.x},y:function(e){return e.y}};function Bf(e,t){var n=zf[t]||(zf[t]=function(e){var t=function(e){var t,n=e.split("."),r=[],a="",i=Oo(n);try{for(i.s();!(t=i.n()).done;){(a+=t.value).endsWith("\\")?a=a.slice(0,-1)+".":(r.push(a),a="")}}catch(o){i.e(o)}finally{i.f()}return r}(e);return function(e){var n,r=Oo(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(""===a)break;e=e&&e[a]}}catch(i){r.e(i)}finally{r.f()}return e}}(t));return n(e)}function Wf(e){return e.charAt(0).toUpperCase()+e.slice(1)}var Vf=function(e){return"undefined"!==typeof e},jf=function(e){return"function"===typeof e},Uf=function(e,t){if(e.size!==t.size)return!1;var n,r=Oo(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!t.has(a))return!1}}catch(i){r.e(i)}finally{r.f()}return!0};var Hf=Math.PI,Zf=2*Hf,Gf=Zf+Hf,qf=Number.POSITIVE_INFINITY,Kf=Hf/180,Xf=Hf/2,Yf=Hf/4,$f=2*Hf/3,Qf=Math.log10,Jf=Math.sign;function eh(e){var t=Math.round(e);e=nh(e,t,e/1e3)?t:e;var n=Math.pow(10,Math.floor(Qf(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function th(e){return!isNaN(parseFloat(e))&&isFinite(e)}function nh(e,t,n){return Math.abs(e-t)<n}function rh(e,t,n){var r,a,i;for(r=0,a=e.length;r<a;r++)i=e[r][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function ah(e){return e*(Hf/180)}function ih(e){return e*(180/Hf)}function oh(e){if(Tf(e)){for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}}function sh(e,t){var n=t.x-e.x,r=t.y-e.y,a=Math.sqrt(n*n+r*r),i=Math.atan2(r,n);return i<-.5*Hf&&(i+=Zf),{angle:i,distance:a}}function uh(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ch(e,t){return(e-t+Gf)%Zf-Hf}function lh(e){return(e%Zf+Zf)%Zf}function fh(e,t,n,r){var a=lh(e),i=lh(t),o=lh(n),s=lh(i-a),u=lh(o-a),c=lh(a-i),l=lh(a-o);return a===i||a===o||r&&i===o||s>u&&c<l}function hh(e,t,n){return Math.max(t,Math.min(n,e))}function ph(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function dh(e,t,n){n=n||function(n){return e[n]<t};for(var r,a=e.length-1,i=0;a-i>1;)n(r=i+a>>1)?i=r:a=r;return{lo:i,hi:a}}var mh=function(e,t,n,r){return dh(e,n,r?function(r){return e[r][t]<=n}:function(r){return e[r][t]<n})},vh=function(e,t,n){return dh(e,n,(function(r){return e[r][t]>=n}))};var gh=["push","pop","shift","splice","unshift"];function yh(e,t){var n=e._chartjs;if(n){var r=n.listeners,a=r.indexOf(t);-1!==a&&r.splice(a,1),r.length>0||(gh.forEach((function(t){delete e[t]})),delete e._chartjs)}}function bh(e){var t,n,r=new Set;for(t=0,n=e.length;t<n;++t)r.add(e[t]);return r.size===n?e:Array.from(r)}var xh="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function wh(e,t,n){var r=n||function(e){return Array.prototype.slice.call(e)},a=!1,i=[];return function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];i=r(o),a||(a=!0,xh.call(window,(function(){a=!1,e.apply(t,i)})))}}var kh=function(e){return"start"===e?"left":"end"===e?"right":"center"},Sh=function(e,t,n){return"start"===e?t:"end"===e?n:(t+n)/2};function _h(e,t,n){var r=t.length,a=0,i=r;if(e._sorted){var o=e.iScale,s=e._parsed,u=o.axis,c=o.getUserBounds(),l=c.min,f=c.max,h=c.minDefined,p=c.maxDefined;h&&(a=hh(Math.min(mh(s,o.axis,l).lo,n?r:mh(t,u,o.getPixelForValue(l)).lo),0,r-1)),i=p?hh(Math.max(mh(s,o.axis,f,!0).hi+1,n?0:mh(t,u,o.getPixelForValue(f),!0).hi+1),a,r)-a:r-a}return{start:a,count:i}}function Th(e){var t=e.xScale,n=e.yScale,r=e._scaleRanges,a={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=a,!0;var i=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,a),i}var Ih=function(e){return 0===e||1===e},Nh=function(e,t,n){return-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Zf/n)},Ch=function(e,t,n){return Math.pow(2,-10*e)*Math.sin((e-t)*Zf/n)+1},Eh={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*Xf)},easeOutSine:function(e){return Math.sin(e*Xf)},easeInOutSine:function(e){return-.5*(Math.cos(Hf*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return Ih(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1)))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){return Ih(e)?e:Nh(e,.075,.3)},easeOutElastic:function(e){return Ih(e)?e:Ch(e,.075,.3)},easeInOutElastic:function(e){var t=.1125;return Ih(e)?e:e<.5?.5*Nh(2*e,t,.45):.5+.5*Ch(2*e-1,t,.45)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-Eh.easeOutBounce(1-e)},easeOutBounce:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*Eh.easeInBounce(2*e):.5*Eh.easeOutBounce(2*e-1)+.5}};function Ah(e){return e+.5|0}var Rh=function(e,t,n){return Math.max(Math.min(e,n),t)};function Oh(e){return Rh(Ah(2.55*e),0,255)}function Mh(e){return Rh(Ah(255*e),0,255)}function Dh(e){return Rh(Ah(e/2.55)/100,0,1)}function Fh(e){return Rh(Ah(100*e),0,100)}var Ph={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Lh=(0,I.Z)("0123456789ABCDEF"),zh=function(e){return Lh[15&e]},Bh=function(e){return Lh[(240&e)>>4]+Lh[15&e]},Wh=function(e){return(240&e)>>4===(15&e)};function Vh(e){var t=function(e){return Wh(e.r)&&Wh(e.g)&&Wh(e.b)&&Wh(e.a)}(e)?zh:Bh;return e?"#"+t(e.r)+t(e.g)+t(e.b)+function(e,t){return e<255?t(e):""}(e.a,t):void 0}var jh=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Uh(e,t,n){var r=t*Math.min(n,1-n),a=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(a-3,9-a,1),-1)};return[a(0),a(8),a(4)]}function Hh(e,t,n){var r=function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(a,4-a,1),0)};return[r(5),r(3),r(1)]}function Zh(e,t,n){var r,a=Uh(e,1,.5);for(t+n>1&&(t*=r=1/(t+n),n*=r),r=0;r<3;r++)a[r]*=1-t-n,a[r]+=t;return a}function Gh(e){var t,n,r,a=e.r/255,i=e.g/255,o=e.b/255,s=Math.max(a,i,o),u=Math.min(a,i,o),c=(s+u)/2;return s!==u&&(r=s-u,n=c>.5?r/(2-s-u):r/(s+u),t=function(e,t,n,r,a){return e===a?(t-n)/r+(t<n?6:0):t===a?(n-e)/r+2:(e-t)/r+4}(a,i,o,r,s),t=60*t+.5),[0|t,n||0,c]}function qh(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(Mh)}function Kh(e,t,n){return qh(Uh,e,t,n)}function Xh(e){return(e%360+360)%360}function Yh(e){var t,n=jh.exec(e),r=255;if(n){n[5]!==t&&(r=n[6]?Oh(+n[5]):Mh(+n[5]));var a=Xh(+n[2]),i=+n[3]/100,o=+n[4]/100;return t="hwb"===n[1]?function(e,t,n){return qh(Zh,e,t,n)}(a,i,o):"hsv"===n[1]?function(e,t,n){return qh(Hh,e,t,n)}(a,i,o):Kh(a,i,o),{r:t[0],g:t[1],b:t[2],a:r}}}var $h,Qh={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Jh={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function ep(e){$h||($h=function(){var e,t,n,r,a,i={},o=Object.keys(Jh),s=Object.keys(Qh);for(e=0;e<o.length;e++){for(r=a=o[e],t=0;t<s.length;t++)n=s[t],a=a.replace(n,Qh[n]);n=parseInt(Jh[r],16),i[a]=[n>>16&255,n>>8&255,255&n]}return i}(),$h.transparent=[0,0,0,0]);var t=$h[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}var tp=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;var np=function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055},rp=function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)};function ap(e,t,n){if(e){var r=Gh(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=Kh(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function ip(e,t){return e?Object.assign(t||{},e):e}function op(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Mh(e[3]))):(t=ip(e,{r:0,g:0,b:0,a:1})).a=Mh(t.a),t}function sp(e){return"r"===e.charAt(0)?function(e){var t,n,r,a=tp.exec(e),i=255;if(a){if(a[7]!==t){var o=+a[7];i=a[8]?Oh(o):Rh(255*o,0,255)}return t=+a[1],n=+a[3],r=+a[5],{r:t=255&(a[2]?Oh(t):Rh(t,0,255)),g:n=255&(a[4]?Oh(n):Rh(n,0,255)),b:r=255&(a[6]?Oh(r):Rh(r,0,255)),a:i}}}(e):Yh(e)}var up=function(){function e(t){if(N(this,e),t instanceof e)return t;var n,r=typeof t;"object"===r?n=op(t):"string"===r&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*Ph[e[1]],g:255&17*Ph[e[2]],b:255&17*Ph[e[3]],a:5===n?17*Ph[e[4]]:255}:7!==n&&9!==n||(t={r:Ph[e[1]]<<4|Ph[e[2]],g:Ph[e[3]]<<4|Ph[e[4]],b:Ph[e[5]]<<4|Ph[e[6]],a:9===n?Ph[e[7]]<<4|Ph[e[8]]:255})),t}(t)||ep(t)||sp(t)),this._rgb=n,this._valid=!!n}return(0,C.Z)(e,[{key:"valid",get:function(){return this._valid}},{key:"rgb",get:function(){var e=ip(this._rgb);return e&&(e.a=Dh(e.a)),e},set:function(e){this._rgb=op(e)}},{key:"rgbString",value:function(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(Dh(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}},{key:"hexString",value:function(){return this._valid?Vh(this._rgb):void 0}},{key:"hslString",value:function(){return this._valid?function(e){if(e){var t=Gh(e),n=t[0],r=Fh(t[1]),a=Fh(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(a,"%, ").concat(Dh(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(a,"%)")}}(this._rgb):void 0}},{key:"mix",value:function(e,t){if(e){var n,r=this.rgb,a=e.rgb,i=t===n?.5:t,o=2*i-1,s=r.a-a.a,u=((o*s===-1?o:(o+s)/(1+o*s))+1)/2;n=1-u,r.r=255&u*r.r+n*a.r+.5,r.g=255&u*r.g+n*a.g+.5,r.b=255&u*r.b+n*a.b+.5,r.a=i*r.a+(1-i)*a.a,this.rgb=r}return this}},{key:"interpolate",value:function(e,t){return e&&(this._rgb=function(e,t,n){var r=rp(Dh(e.r)),a=rp(Dh(e.g)),i=rp(Dh(e.b));return{r:Mh(np(r+n*(rp(Dh(t.r))-r))),g:Mh(np(a+n*(rp(Dh(t.g))-a))),b:Mh(np(i+n*(rp(Dh(t.b))-i))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}},{key:"clone",value:function(){return new e(this.rgb)}},{key:"alpha",value:function(e){return this._rgb.a=Mh(e),this}},{key:"clearer",value:function(e){return this._rgb.a*=1-e,this}},{key:"greyscale",value:function(){var e=this._rgb,t=Ah(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}},{key:"opaquer",value:function(e){return this._rgb.a*=1+e,this}},{key:"negate",value:function(){var e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}},{key:"lighten",value:function(e){return ap(this._rgb,2,e),this}},{key:"darken",value:function(e){return ap(this._rgb,2,-e),this}},{key:"saturate",value:function(e){return ap(this._rgb,1,e),this}},{key:"desaturate",value:function(e){return ap(this._rgb,1,-e),this}},{key:"rotate",value:function(e){return function(e,t){var n=Gh(e);n[0]=Xh(n[0]+t),n=Kh(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}]),e}();function cp(e){return new up(e)}function lp(e){if(e&&"object"===typeof e){var t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function fp(e){return lp(e)?e:cp(e)}function hp(e){return lp(e)?e:cp(e).saturate(.5).darken(.1).hexString()}var pp=Object.create(null),dp=Object.create(null);function mp(e,t){if(!t)return e;for(var n=t.split("."),r=0,a=n.length;r<a;++r){var i=n[r];e=e[i]||(e[i]=Object.create(null))}return e}function vp(e,t,n){return"string"===typeof t?Ff(mp(e,t),n):Ff(mp(e,""),t)}var gp=function(){function e(t){N(this,e),this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=function(e){return e.chart.platform.getDevicePixelRatio()},this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=function(e,t){return hp(t.backgroundColor)},this.hoverBorderColor=function(e,t){return hp(t.borderColor)},this.hoverColor=function(e,t){return hp(t.color)},this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}return(0,C.Z)(e,[{key:"set",value:function(e,t){return vp(this,e,t)}},{key:"get",value:function(e){return mp(this,e)}},{key:"describe",value:function(e,t){return vp(dp,e,t)}},{key:"override",value:function(e,t){return vp(pp,e,t)}},{key:"route",value:function(e,t,n,r){var a,i=mp(this,e),o=mp(this,n),s="_"+t;Object.defineProperties(i,(a={},(0,Ft.Z)(a,s,{value:i[t],writable:!0}),(0,Ft.Z)(a,t,{enumerable:!0,get:function(){var e=this[s],t=o[r];return _f(e)?Object.assign({},t,e):Nf(e,t)},set:function(e){this[s]=e}}),a))}}]),e}(),yp=new gp({_scriptable:function(e){return!e.startsWith("on")},_indexable:function(e){return"events"!==e},hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function bp(e,t,n,r,a){var i=t[a];return i||(i=t[a]=e.measureText(a).width,n.push(a)),i>r&&(r=i),r}function xp(e,t,n,r){var a=(r=r||{}).data=r.data||{},i=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(a=r.data={},i=r.garbageCollect=[],r.font=t),e.save(),e.font=t;var o,s,u,c,l,f=0,h=n.length;for(o=0;o<h;o++)if(void 0!==(c=n[o])&&null!==c&&!0!==Sf(c))f=bp(e,a,i,f,c);else if(Sf(c))for(s=0,u=c.length;s<u;s++)void 0===(l=c[s])||null===l||Sf(l)||(f=bp(e,a,i,f,l));e.restore();var p=i.length/2;if(p>n.length){for(o=0;o<p;o++)delete a[i[o]];i.splice(0,p)}return f}function wp(e,t,n){var r=e.currentDevicePixelRatio,a=0!==n?Math.max(n/2,.5):0;return Math.round((t-a)*r)/r+a}function kp(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function Sp(e,t,n,r){_p(e,t,n,r,null)}function _p(e,t,n,r,a){var i,o,s,u,c,l,f=t.pointStyle,h=t.rotation,p=t.radius,d=(h||0)*Kf;if(f&&"object"===typeof f&&("[object HTMLImageElement]"===(i=f.toString())||"[object HTMLCanvasElement]"===i))return e.save(),e.translate(n,r),e.rotate(d),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(p)||p<=0)){switch(e.beginPath(),f){default:a?e.ellipse(n,r,a/2,p,0,0,Zf):e.arc(n,r,p,0,Zf),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(d)*p,r-Math.cos(d)*p),d+=$f,e.lineTo(n+Math.sin(d)*p,r-Math.cos(d)*p),d+=$f,e.lineTo(n+Math.sin(d)*p,r-Math.cos(d)*p),e.closePath();break;case"rectRounded":u=p-(c=.516*p),o=Math.cos(d+Yf)*u,s=Math.sin(d+Yf)*u,e.arc(n-o,r-s,c,d-Hf,d-Xf),e.arc(n+s,r-o,c,d-Xf,d),e.arc(n+o,r+s,c,d,d+Xf),e.arc(n-s,r+o,c,d+Xf,d+Hf),e.closePath();break;case"rect":if(!h){u=Math.SQRT1_2*p,l=a?a/2:u,e.rect(n-l,r-u,2*l,2*u);break}d+=Yf;case"rectRot":o=Math.cos(d)*p,s=Math.sin(d)*p,e.moveTo(n-o,r-s),e.lineTo(n+s,r-o),e.lineTo(n+o,r+s),e.lineTo(n-s,r+o),e.closePath();break;case"crossRot":d+=Yf;case"cross":o=Math.cos(d)*p,s=Math.sin(d)*p,e.moveTo(n-o,r-s),e.lineTo(n+o,r+s),e.moveTo(n+s,r-o),e.lineTo(n-s,r+o);break;case"star":o=Math.cos(d)*p,s=Math.sin(d)*p,e.moveTo(n-o,r-s),e.lineTo(n+o,r+s),e.moveTo(n+s,r-o),e.lineTo(n-s,r+o),d+=Yf,o=Math.cos(d)*p,s=Math.sin(d)*p,e.moveTo(n-o,r-s),e.lineTo(n+o,r+s),e.moveTo(n+s,r-o),e.lineTo(n-s,r+o);break;case"line":o=a?a/2:Math.cos(d)*p,s=Math.sin(d)*p,e.moveTo(n-o,r-s),e.lineTo(n+o,r+s);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(d)*p,r+Math.sin(d)*p)}e.fill(),t.borderWidth>0&&e.stroke()}}function Tp(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Ip(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Np(e){e.restore()}function Cp(e,t,n,r,a){if(!t)return e.lineTo(n.x,n.y);if("middle"===a){var i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else"after"===a!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Ep(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Ap(e,t,n,r,a){var i,o,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=Sf(t)?t:[t],c=s.strokeWidth>0&&""!==s.strokeColor;for(e.save(),e.font=a.string,Rp(e,s),i=0;i<u.length;++i)o=u[i],c&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),kf(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(o,n,r,s.maxWidth)),e.fillText(o,n,r,s.maxWidth),Op(e,n,r,o,s),r+=a.lineHeight;e.restore()}function Rp(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),kf(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Op(e,t,n,r,a){if(a.strikethrough||a.underline){var i=e.measureText(r),o=t-i.actualBoundingBoxLeft,s=t+i.actualBoundingBoxRight,u=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,l=a.strikethrough?(u+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(o,l),e.lineTo(s,l),e.stroke()}}function Mp(e,t){var n=t.x,r=t.y,a=t.w,i=t.h,o=t.radius;e.arc(n+o.topLeft,r+o.topLeft,o.topLeft,-Xf,Hf,!0),e.lineTo(n,r+i-o.bottomLeft),e.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,Hf,Xf,!0),e.lineTo(n+a-o.bottomRight,r+i),e.arc(n+a-o.bottomRight,r+i-o.bottomRight,o.bottomRight,Xf,0,!0),e.lineTo(n+a,r+o.topRight),e.arc(n+a-o.topRight,r+o.topRight,o.topRight,0,-Xf,!0),e.lineTo(n+o.topLeft,r)}var Dp=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Fp=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function Pp(e,t){var n=(""+e).match(Dp);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}var Lp=function(e){return+e||0};function zp(e,t){var n,r={},a=_f(t),i=a?Object.keys(t):t,o=_f(e)?a?function(n){return Nf(e[n],e[t[n]])}:function(t){return e[t]}:function(){return e},s=Oo(i);try{for(s.s();!(n=s.n()).done;){var u=n.value;r[u]=Lp(o(u))}}catch(c){s.e(c)}finally{s.f()}return r}function Bp(e){return zp(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Wp(e){return zp(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Vp(e){var t=Bp(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function jp(e,t){e=e||{},t=t||yp.font;var n=Nf(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));var r=Nf(e.style,t.style);r&&!(""+r).match(Fp)&&(console.warn('Invalid font style specified: "'+r+'"'),r="");var a={family:Nf(e.family,t.family),lineHeight:Pp(Nf(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:Nf(e.weight,t.weight),string:""};return a.string=function(e){return!e||kf(e.size)||kf(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(a),a}function Up(e,t,n,r){var a,i,o,s=!0;for(a=0,i=e.length;a<i;++a)if(void 0!==(o=e[a])&&(void 0!==t&&"function"===typeof o&&(o=o(t),s=!1),void 0!==n&&Sf(o)&&(o=o[n%o.length],s=!1),void 0!==o))return r&&!s&&(r.cacheable=!1),o}function Hp(e,t){return Object.assign(Object.create(e),t)}function Zp(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return e[0]};Vf(a)||(a=rd("_fallback",e));var o=(t={},(0,Ft.Z)(t,Symbol.toStringTag,"Object"),(0,Ft.Z)(t,"_cacheable",!0),(0,Ft.Z)(t,"_scopes",e),(0,Ft.Z)(t,"_rootScopes",r),(0,Ft.Z)(t,"_fallback",a),(0,Ft.Z)(t,"_getTarget",i),(0,Ft.Z)(t,"override",(function(t){return Zp([t].concat((0,I.Z)(e)),n,r,a)})),t);return new Proxy(o,{deleteProperty:function(t,n){return delete t[n],delete t._keys,delete e[0][n],!0},get:function(t,r){return Yp(t,r,(function(){return nd(r,n,e,t)}))},getOwnPropertyDescriptor:function(e,t){return Reflect.getOwnPropertyDescriptor(e._scopes[0],t)},getPrototypeOf:function(){return Reflect.getPrototypeOf(e[0])},has:function(e,t){return ad(e).includes(t)},ownKeys:function(e){return ad(e)},set:function(e,t,n){var r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function Gp(e,t,n,r){var a={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:qp(e,r),setContext:function(t){return Gp(e,t,n,r)},override:function(a){return Gp(e.override(a),t,n,r)}};return new Proxy(a,{deleteProperty:function(t,n){return delete t[n],delete e[n],!0},get:function(e,t,n){return Yp(e,t,(function(){return function(e,t,n){var r=e._proxy,a=e._context,i=e._subProxy,o=e._descriptors,s=r[t];jf(s)&&o.isScriptable(t)&&(s=function(e,t,n,r){var a=n._proxy,i=n._context,o=n._subProxy,s=n._stack;if(s.has(e))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+e);s.add(e),t=t(i,o||r),s.delete(e),Xp(e,t)&&(t=ed(a._scopes,a,e,t));return t}(t,s,e,n));Sf(s)&&s.length&&(s=function(e,t,n,r){var a=n._proxy,i=n._context,o=n._subProxy,s=n._descriptors;if(Vf(i.index)&&r(e))t=t[i.index%t.length];else if(_f(t[0])){var u=t,c=a._scopes.filter((function(e){return e!==u}));t=[];var l,f=Oo(u);try{for(f.s();!(l=f.n()).done;){var h=ed(c,a,e,l.value);t.push(Gp(h,i,o&&o[e],s))}}catch(p){f.e(p)}finally{f.f()}}return t}(t,s,e,o.isIndexable));Xp(t,s)&&(s=Gp(s,a,i&&i[t],o));return s}(e,t,n)}))},getOwnPropertyDescriptor:function(t,n){return t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n)},getPrototypeOf:function(){return Reflect.getPrototypeOf(e)},has:function(t,n){return Reflect.has(e,n)},ownKeys:function(){return Reflect.ownKeys(e)},set:function(t,n,r){return e[n]=r,delete t[n],!0}})}function qp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0},n=e._scriptable,r=void 0===n?t.scriptable:n,a=e._indexable,i=void 0===a?t.indexable:a,o=e._allKeys,s=void 0===o?t.allKeys:o;return{allKeys:s,scriptable:r,indexable:i,isScriptable:jf(r)?r:function(){return r},isIndexable:jf(i)?i:function(){return i}}}var Kp=function(e,t){return e?e+Wf(t):t},Xp=function(e,t){return _f(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object)};function Yp(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];var r=n();return e[t]=r,r}function $p(e,t,n){return jf(e)?e(t,n):e}var Qp=function(e,t){return!0===e?t:"string"===typeof e?Bf(t,e):void 0};function Jp(e,t,n,r,a){var i,o=Oo(t);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=Qp(n,s);if(u){e.add(u);var c=$p(u._fallback,n,a);if(Vf(c)&&c!==n&&c!==r)return c}else if(!1===u&&Vf(r)&&n!==r)return null}}catch(l){o.e(l)}finally{o.f()}return!1}function ed(e,t,n,r){var a=t._rootScopes,i=$p(t._fallback,n,r),o=[].concat((0,I.Z)(e),(0,I.Z)(a)),s=new Set;s.add(r);var u=td(s,o,n,i||n,r);return null!==u&&((!Vf(i)||i===n||null!==(u=td(s,o,i,u,r)))&&Zp(Array.from(s),[""],a,i,(function(){return function(e,t,n){var r=e._getTarget();t in r||(r[t]={});var a=r[t];if(Sf(a)&&_f(n))return n;return a}(t,n,r)})))}function td(e,t,n,r,a){for(;n;)n=Jp(e,t,n,r,a);return n}function nd(e,t,n,r){var a,i,o=Oo(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(a=rd(Kp(s,e),n),Vf(a))return Xp(e,a)?ed(n,r,e,a):a}}catch(u){o.e(u)}finally{o.f()}}function rd(e,t){var n,r=Oo(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a){var i=a[e];if(Vf(i))return i}}}catch(o){r.e(o)}finally{r.f()}}function ad(e){var t=e._keys;return t||(t=e._keys=function(e){var t,n=new Set,r=Oo(e);try{for(r.s();!(t=r.n()).done;){var a,i=t.value,o=Oo(Object.keys(i).filter((function(e){return!e.startsWith("_")})));try{for(o.s();!(a=o.n()).done;){var s=a.value;n.add(s)}}catch(u){o.e(u)}finally{o.f()}}}catch(u){r.e(u)}finally{r.f()}return Array.from(n)}(e._scopes)),t}function id(e,t,n,r){var a,i,o,s,u=e.iScale,c=this._parsing.key,l=void 0===c?"r":c,f=new Array(r);for(a=0,i=r;a<i;++a)s=t[o=a+n],f[a]={r:u.parse(Bf(s,l),o)};return f}var od=Number.EPSILON||1e-14,sd=function(e,t){return t<e.length&&!e[t].skip&&e[t]},ud=function(e){return"x"===e?"y":"x"};function cd(e,t,n,r){var a=e.skip?t:e,i=t,o=n.skip?t:n,s=uh(i,a),u=uh(o,i),c=s/(s+u),l=u/(s+u),f=r*(c=isNaN(c)?0:c),h=r*(l=isNaN(l)?0:l);return{previous:{x:i.x-f*(o.x-a.x),y:i.y-f*(o.y-a.y)},next:{x:i.x+h*(o.x-a.x),y:i.y+h*(o.y-a.y)}}}function ld(e,t,n){for(var r,a,i,o,s,u=e.length,c=sd(e,0),l=0;l<u-1;++l)s=c,c=sd(e,l+1),s&&c&&(nh(t[l],0,od)?n[l]=n[l+1]=0:(r=n[l]/t[l],a=n[l+1]/t[l],(o=Math.pow(r,2)+Math.pow(a,2))<=9||(i=3/Math.sqrt(o),n[l]=r*i*t[l],n[l+1]=a*i*t[l])))}function fd(e,t){for(var n,r,a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",o=ud(i),s=e.length,u=sd(e,0),c=0;c<s;++c)if(r=a,a=u,u=sd(e,c+1),a){var l=a[i],f=a[o];r&&(n=(l-r[i])/3,a["cp1".concat(i)]=l-n,a["cp1".concat(o)]=f-n*t[c]),u&&(n=(u[i]-l)/3,a["cp2".concat(i)]=l+n,a["cp2".concat(o)]=f+n*t[c])}}function hd(e,t,n){return Math.max(Math.min(e,n),t)}function pd(e,t,n,r,a){var i,o,s,u;if(t.spanGaps&&(e=e.filter((function(e){return!e.skip}))),"monotone"===t.cubicInterpolationMode)!function(e){var t,n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",i=ud(a),o=e.length,s=Array(o).fill(0),u=Array(o),c=sd(e,0);for(t=0;t<o;++t)if(n=r,r=c,c=sd(e,t+1),r){if(c){var l=c[a]-r[a];s[t]=0!==l?(c[i]-r[i])/l:0}u[t]=n?c?Jf(s[t-1])!==Jf(s[t])?0:(s[t-1]+s[t])/2:s[t-1]:s[t]}ld(e,s,u),fd(e,u,a)}(e,a);else{var c=r?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)u=cd(c,s=e[i],e[Math.min(i+1,o-(r?0:1))%o],t.tension),s.cp1x=u.previous.x,s.cp1y=u.previous.y,s.cp2x=u.next.x,s.cp2y=u.next.y,c=s}t.capBezierPoints&&function(e,t){var n,r,a,i,o,s=Tp(e[0],t);for(n=0,r=e.length;n<r;++n)o=i,i=s,s=n<r-1&&Tp(e[n+1],t),i&&(a=e[n],o&&(a.cp1x=hd(a.cp1x,t.left,t.right),a.cp1y=hd(a.cp1y,t.top,t.bottom)),s&&(a.cp2x=hd(a.cp2x,t.left,t.right),a.cp2y=hd(a.cp2y,t.top,t.bottom)))}(e,n)}function dd(){return"undefined"!==typeof window&&"undefined"!==typeof document}function md(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function vd(e,t,n){var r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}var gd=function(e){return window.getComputedStyle(e,null)};var yd=["top","right","bottom","left"];function bd(e,t,n){var r={};n=n?"-"+n:"";for(var a=0;a<4;a++){var i=yd[a];r[i]=parseFloat(e[t+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function xd(e,t){if("native"in e)return e;var n=t.canvas,r=t.currentDevicePixelRatio,a=gd(n),i="border-box"===a.boxSizing,o=bd(a,"padding"),s=bd(a,"border","width"),u=function(e,t){var n,r,a=e.touches,i=a&&a.length?a[0]:e,o=i.offsetX,s=i.offsetY,u=!1;if(function(e,t,n){return(e>0||t>0)&&(!n||!n.shadowRoot)}(o,s,e.target))n=o,r=s;else{var c=t.getBoundingClientRect();n=i.clientX-c.left,r=i.clientY-c.top,u=!0}return{x:n,y:r,box:u}}(e,n),c=u.x,l=u.y,f=u.box,h=o.left+(f&&s.left),p=o.top+(f&&s.top),d=t.width,m=t.height;return i&&(d-=o.width+s.width,m-=o.height+s.height),{x:Math.round((c-h)/d*n.width/r),y:Math.round((l-p)/m*n.height/r)}}var wd=function(e){return Math.round(10*e)/10};function kd(e,t,n,r){var a=gd(e),i=bd(a,"margin"),o=vd(a.maxWidth,e,"clientWidth")||qf,s=vd(a.maxHeight,e,"clientHeight")||qf,u=function(e,t,n){var r,a;if(void 0===t||void 0===n){var i=md(e);if(i){var o=i.getBoundingClientRect(),s=gd(i),u=bd(s,"border","width"),c=bd(s,"padding");t=o.width-c.width-u.width,n=o.height-c.height-u.height,r=vd(s.maxWidth,i,"clientWidth"),a=vd(s.maxHeight,i,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||qf,maxHeight:a||qf}}(e,t,n),c=u.width,l=u.height;if("content-box"===a.boxSizing){var f=bd(a,"border","width"),h=bd(a,"padding");c-=h.width+f.width,l-=h.height+f.height}return c=Math.max(0,c-i.width),l=Math.max(0,r?Math.floor(c/r):l-i.height),c=wd(Math.min(c,o,u.maxWidth)),l=wd(Math.min(l,s,u.maxHeight)),c&&!l&&(l=wd(c/2)),{width:c,height:l}}function Sd(e,t,n){var r=t||1,a=Math.floor(e.height*r),i=Math.floor(e.width*r);e.height=a/r,e.width=i/r;var o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(e.height,"px"),o.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||o.height!==a||o.width!==i)&&(e.currentDevicePixelRatio=r,o.height=a,o.width=i,e.ctx.setTransform(r,0,0,r,0,0),!0)}var _d=function(){var e=!1;try{var t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(n){}return e}();function Td(e,t){var n=function(e,t){return gd(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Id(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Nd(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function Cd(e,t,n,r){var a={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=Id(e,a,n),s=Id(a,i,n),u=Id(i,t,n),c=Id(o,s,n),l=Id(s,u,n);return Id(c,l,n)}var Ed=new Map;function Ad(e,t,n){return function(e,t){t=t||{};var n=e+JSON.stringify(t),r=Ed.get(n);return r||(r=new Intl.NumberFormat(e,t),Ed.set(n,r)),r}(t,n).format(e)}function Rd(e,t,n){return e?function(e,t){return{x:function(n){return e+e+t-n},setWidth:function(e){t=e},textAlign:function(e){return"center"===e?e:"right"===e?"left":"right"},xPlus:function(e,t){return e-t},leftForLtr:function(e,t){return e-t}}}(t,n):{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}}function Od(e,t){var n,r;"ltr"!==t&&"rtl"!==t||(r=[(n=e.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function Md(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Dd(e){return"angle"===e?{between:fh,compare:ch,normalize:lh}:{between:ph,compare:function(e,t){return e-t},normalize:function(e){return e}}}function Fd(e){var t=e.start,n=e.end,r=e.count;return{start:t%r,end:n%r,loop:e.loop&&(n-t+1)%r===0,style:e.style}}function Pd(e,t,n){if(!n)return[e];for(var r,a,i,o=n.property,s=n.start,u=n.end,c=t.length,l=Dd(o),f=l.compare,h=l.between,p=l.normalize,d=function(e,t,n){var r,a,i=n.property,o=n.start,s=n.end,u=Dd(i),c=u.between,l=u.normalize,f=t.length,h=e.start,p=e.end,d=e.loop;if(d){for(h+=f,p+=f,r=0,a=f;r<a&&c(l(t[h%f][i]),o,s);++r)h--,p--;h%=f,p%=f}return p<h&&(p+=f),{start:h,end:p,loop:d,style:e.style}}(e,t,n),m=d.start,v=d.end,g=d.loop,y=d.style,b=[],x=!1,w=null,k=function(){return x||h(s,i,r)&&0!==f(s,i)},S=function(){return!x||0===f(u,r)||h(u,i,r)},_=m,T=m;_<=v;++_)(a=t[_%c]).skip||(r=p(a[o]))!==i&&(x=h(r,s,u),null===w&&k()&&(w=0===f(r,s)?_:T),null!==w&&S()&&(b.push(Fd({start:w,end:_,loop:g,count:c,style:y})),w=null),T=_,i=r);return null!==w&&b.push(Fd({start:w,end:v,loop:g,count:c,style:y})),b}function Ld(e,t){for(var n=[],r=e.segments,a=0;a<r.length;a++){var i=Pd(r[a],e.points,t);i.length&&n.push.apply(n,(0,I.Z)(i))}return n}function zd(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){var a=e._chart.getContext(),i=Bd(e.options),o=e._datasetIndex,s=e.options.spanGaps,u=n.length,c=[],l=i,f=t[0].start,h=f;function p(e,t,r,a){var i=s?-1:1;if(e!==t){for(e+=u;n[e%u].skip;)e-=i;for(;n[t%u].skip;)t+=i;e%u!==t%u&&(c.push({start:e%u,end:t%u,loop:r,style:a}),l=a,f=t%u)}}var d,m=Oo(t);try{for(m.s();!(d=m.n()).done;){var v=d.value;f=s?f:v.start;var g=n[f%u],y=void 0;for(h=f+1;h<=v.end;h++){var b=n[h%u];Wd(y=Bd(r.setContext(Hp(a,{type:"segment",p0:g,p1:b,p0DataIndex:(h-1)%u,p1DataIndex:h%u,datasetIndex:o}))),l)&&p(f,h-1,v.loop,l),g=b,l=y}f<h-1&&p(f,h-1,v.loop,l)}}catch(x){m.e(x)}finally{m.f()}return c}(e,t,n,r):t}function Bd(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Wd(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}var Vd=function(){function e(){N(this,e),this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}return(0,C.Z)(e,[{key:"_notify",value:function(e,t,n,r){var a=t.listeners[r],i=t.duration;a.forEach((function(r){return r({chart:e,initial:t.initial,numSteps:i,currentStep:Math.min(n-t.start,i)})}))}},{key:"_refresh",value:function(){var e=this;this._request||(this._running=!0,this._request=xh.call(window,(function(){e._update(),e._request=null,e._running&&e._refresh()})))}},{key:"_update",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),n=0;this._charts.forEach((function(r,a){if(r.running&&r.items.length){for(var i,o=r.items,s=o.length-1,u=!1;s>=0;--s)(i=o[s])._active?(i._total>r.duration&&(r.duration=i._total),i.tick(t),u=!0):(o[s]=o[o.length-1],o.pop());u&&(a.draw(),e._notify(a,r,t,"progress")),o.length||(r.running=!1,e._notify(a,r,t,"complete"),r.initial=!1),n+=o.length}})),this._lastDate=t,0===n&&(this._running=!1)}},{key:"_getAnims",value:function(e){var t=this._charts,n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}},{key:"listen",value:function(e,t,n){this._getAnims(e).listeners[t].push(n)}},{key:"add",value:function(e,t){var n;t&&t.length&&(n=this._getAnims(e).items).push.apply(n,(0,I.Z)(t))}},{key:"has",value:function(e){return this._getAnims(e).items.length>0}},{key:"start",value:function(e){var t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((function(e,t){return Math.max(e,t._duration)}),0),this._refresh())}},{key:"running",value:function(e){if(!this._running)return!1;var t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}},{key:"stop",value:function(e){var t=this._charts.get(e);if(t&&t.items.length){for(var n=t.items,r=n.length-1;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}}},{key:"remove",value:function(e){return this._charts.delete(e)}}]),e}(),jd=new Vd,Ud="transparent",Hd={boolean:function(e,t,n){return n>.5?t:e},color:function(e,t,n){var r=fp(e||Ud),a=r.valid&&fp(t||Ud);return a&&a.valid?a.mix(r,n).hexString():t},number:function(e,t,n){return e+(t-e)*n}},Zd=function(){function e(t,n,r,a){N(this,e);var i=n[r];a=Up([t.to,a,i,t.from]);var o=Up([t.from,i,a]);this._active=!0,this._fn=t.fn||Hd[t.type||typeof o],this._easing=Eh[t.easing]||Eh.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=r,this._from=o,this._to=a,this._promises=void 0}return(0,C.Z)(e,[{key:"active",value:function(){return this._active}},{key:"update",value:function(e,t,n){if(this._active){this._notify(!1);var r=this._target[this._prop],a=n-this._start,i=this._duration-a;this._start=n,this._duration=Math.floor(Math.max(i,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=Up([e.to,t,r,e.from]),this._from=Up([e.from,r,t])}}},{key:"cancel",value:function(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}},{key:"tick",value:function(e){var t,n=e-this._start,r=this._duration,a=this._prop,i=this._from,o=this._loop,s=this._to;if(this._active=i!==s&&(o||n<r),!this._active)return this._target[a]=s,void this._notify(!0);n<0?this._target[a]=i:(t=n/r%2,t=o&&t>1?2-t:t,t=this._easing(Math.min(1,Math.max(0,t))),this._target[a]=this._fn(i,s,t))}},{key:"wait",value:function(){var e=this._promises||(this._promises=[]);return new Promise((function(t,n){e.push({res:t,rej:n})}))}},{key:"_notify",value:function(e){for(var t=e?"res":"rej",n=this._promises||[],r=0;r<n.length;r++)n[r][t]()}}]),e}();yp.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});var Gd=Object.keys(yp.animation);yp.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:function(e){return"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}}),yp.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),yp.describe("animations",{_fallback:"animation"}),yp.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:function(e){return 0|e}}}}});var qd=function(){function e(t,n){N(this,e),this._chart=t,this._properties=new Map,this.configure(n)}return(0,C.Z)(e,[{key:"configure",value:function(e){if(_f(e)){var t=this._properties;Object.getOwnPropertyNames(e).forEach((function(n){var r=e[n];if(_f(r)){var a,i={},o=Oo(Gd);try{for(o.s();!(a=o.n()).done;){var s=a.value;i[s]=r[s]}}catch(u){o.e(u)}finally{o.f()}(Sf(r.properties)&&r.properties||[n]).forEach((function(e){e!==n&&t.has(e)||t.set(e,i)}))}}))}}},{key:"_animateOptions",value:function(e,t){var n=t.options,r=function(e,t){if(!t)return;var n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];var a=this._createAnimations(r,n);return n.$shared&&function(e,t){for(var n=[],r=Object.keys(t),a=0;a<r.length;a++){var i=e[r[a]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}(e.options.$animations,n).then((function(){e.options=n}),(function(){})),a}},{key:"_createAnimations",value:function(e,t){var n,r=this._properties,a=[],i=e.$animations||(e.$animations={}),o=Object.keys(t),s=Date.now();for(n=o.length-1;n>=0;--n){var u=o[n];if("$"!==u.charAt(0))if("options"!==u){var c=t[u],l=i[u],f=r.get(u);if(l){if(f&&l.active()){l.update(f,c,s);continue}l.cancel()}f&&f.duration?(i[u]=l=new Zd(f,e,u,c),a.push(l)):e[u]=c}else a.push.apply(a,(0,I.Z)(this._animateOptions(e,t)))}return a}},{key:"update",value:function(e,t){if(0!==this._properties.size){var n=this._createAnimations(e,t);return n.length?(jd.add(this._chart,n),!0):void 0}Object.assign(e,t)}}]),e}();function Kd(e,t){var n=e&&e.options||{},r=n.reverse,a=void 0===n.min?t:0,i=void 0===n.max?t:0;return{start:r?i:a,end:r?a:i}}function Xd(e,t){var n,r,a=[],i=e._getSortedDatasetMetas(t);for(n=0,r=i.length;n<r;++n)a.push(i[n].index);return a}function Yd(e,t,n){var r,a,i,o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=e.keys,c="single"===s.mode;if(null!==t){for(r=0,a=u.length;r<a;++r){if((i=+u[r])===n){if(s.all)continue;break}o=e.values[i],Tf(o)&&(c||0===t||Jf(t)===Jf(o))&&(t+=o)}return t}}function $d(e,t){var n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function Qd(e,t,n){var r=e[t]||(e[t]={});return r[n]||(r[n]={})}function Jd(e,t,n,r){var a,i=Oo(t.getMatchingVisibleMetas(r).reverse());try{for(i.s();!(a=i.n()).done;){var o=a.value,s=e[o.index];if(n&&s>0||!n&&s<0)return o.index}}catch(u){i.e(u)}finally{i.f()}return null}function em(e,t){for(var n,r=e.chart,a=e._cachedMeta,i=r._stacks||(r._stacks={}),o=a.iScale,s=a.vScale,u=a.index,c=o.axis,l=s.axis,f=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(o,s,a),h=t.length,p=0;p<h;++p){var d=t[p],m=d[c],v=d[l];(n=(d._stacks||(d._stacks={}))[l]=Qd(i,f,m))[u]=v,n._top=Jd(n,s,!0,a.type),n._bottom=Jd(n,s,!1,a.type)}}function tm(e,t){var n=e.scales;return Object.keys(n).filter((function(e){return n[e].axis===t})).shift()}function nm(e,t){var n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){var a,i=Oo(t=t||e._parsed);try{for(i.s();!(a=i.n()).done;){var o=a.value._stacks;if(!o||void 0===o[r]||void 0===o[r][n])return;delete o[r][n]}}catch(s){i.e(s)}finally{i.f()}}}var rm=function(e){return"reset"===e||"none"===e},am=function(e,t){return t?e:Object.assign({},e)},im=function(){function e(t,n){N(this,e),this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}return(0,C.Z)(e,[{key:"initialize",value:function(){var e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=$d(e.vScale,e),this.addElements()}},{key:"updateIndex",value:function(e){this.index!==e&&nm(this._cachedMeta),this.index=e}},{key:"linkScales",value:function(){var e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=function(e,t,n,r){return"x"===e?t:"r"===e?r:n},a=t.xAxisID=Nf(n.xAxisID,tm(e,"x")),i=t.yAxisID=Nf(n.yAxisID,tm(e,"y")),o=t.rAxisID=Nf(n.rAxisID,tm(e,"r")),s=t.indexAxis,u=t.iAxisID=r(s,a,i,o),c=t.vAxisID=r(s,i,a,o);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(i),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(u),t.vScale=this.getScaleForId(c)}},{key:"getDataset",value:function(){return this.chart.data.datasets[this.index]}},{key:"getMeta",value:function(){return this.chart.getDatasetMeta(this.index)}},{key:"getScaleForId",value:function(e){return this.chart.scales[e]}},{key:"_getOtherScale",value:function(e){var t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}},{key:"reset",value:function(){this._update("reset")}},{key:"_destroy",value:function(){var e=this._cachedMeta;this._data&&yh(this._data,this),e._stacked&&nm(e)}},{key:"_dataCheck",value:function(){var e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(_f(t))this._data=function(e){var t,n,r,a=Object.keys(e),i=new Array(a.length);for(t=0,n=a.length;t<n;++t)r=a[t],i[t]={x:r,y:e[r]};return i}(t);else if(n!==t){if(n){yh(n,this);var r=this._cachedMeta;nm(r),r._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),gh.forEach((function(t){var n="_onData"+Wf(t),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];var o=r.apply(this,a);return e._chartjs.listeners.forEach((function(e){"function"===typeof e[n]&&e[n].apply(e,a)})),o}})})))}(t,this),this._syncList=[],this._data=t}}},{key:"addElements",value:function(){var e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}},{key:"buildOrUpdateElements",value:function(e){var t=this._cachedMeta,n=this.getDataset(),r=!1;this._dataCheck();var a=t._stacked;t._stacked=$d(t.vScale,t),t.stack!==n.stack&&(r=!0,nm(t),t.stack=n.stack),this._resyncElements(e),(r||a!==t._stacked)&&em(this,t._parsed)}},{key:"configure",value:function(){var e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}},{key:"parse",value:function(e,t){var n,r,a,i=this._cachedMeta,o=this._data,s=i.iScale,u=i._stacked,c=s.axis,l=0===e&&t===o.length||i._sorted,f=e>0&&i._parsed[e-1];if(!1===this._parsing)i._parsed=o,i._sorted=!0,a=o;else{a=Sf(o[e])?this.parseArrayData(i,o,e,t):_f(o[e])?this.parseObjectData(i,o,e,t):this.parsePrimitiveData(i,o,e,t);for(n=0;n<t;++n)i._parsed[n+e]=r=a[n],l&&((null===r[c]||f&&r[c]<f[c])&&(l=!1),f=r);i._sorted=l}u&&em(this,a)}},{key:"parsePrimitiveData",value:function(e,t,n,r){var a,i,o,s=e.iScale,u=e.vScale,c=s.axis,l=u.axis,f=s.getLabels(),h=s===u,p=new Array(r);for(a=0,i=r;a<i;++a){var d;o=a+n,p[a]=(d={},(0,Ft.Z)(d,c,h||s.parse(f[o],o)),(0,Ft.Z)(d,l,u.parse(t[o],o)),d)}return p}},{key:"parseArrayData",value:function(e,t,n,r){var a,i,o,s,u=e.xScale,c=e.yScale,l=new Array(r);for(a=0,i=r;a<i;++a)s=t[o=a+n],l[a]={x:u.parse(s[0],o),y:c.parse(s[1],o)};return l}},{key:"parseObjectData",value:function(e,t,n,r){var a,i,o,s,u=e.xScale,c=e.yScale,l=this._parsing,f=l.xAxisKey,h=void 0===f?"x":f,p=l.yAxisKey,d=void 0===p?"y":p,m=new Array(r);for(a=0,i=r;a<i;++a)s=t[o=a+n],m[a]={x:u.parse(Bf(s,h),o),y:c.parse(Bf(s,d),o)};return m}},{key:"getParsed",value:function(e){return this._cachedMeta._parsed[e]}},{key:"getDataElement",value:function(e){return this._cachedMeta.data[e]}},{key:"applyStack",value:function(e,t,n){var r=this.chart,a=this._cachedMeta,i=t[e.axis];return Yd({keys:Xd(r,!0),values:t._stacks[e.axis]},i,a.index,{mode:n})}},{key:"updateRangeFromParsed",value:function(e,t,n,r){var a=n[t.axis],i=null===a?NaN:a,o=r&&n._stacks[t.axis];r&&o&&(r.values=o,i=Yd(r,a,this._cachedMeta.index)),e.min=Math.min(e.min,i),e.max=Math.max(e.max,i)}},{key:"getMinMax",value:function(e,t){var n,r,a=this._cachedMeta,i=a._parsed,o=a._sorted&&e===a.iScale,s=i.length,u=this._getOtherScale(e),c=function(e,t,n){return e&&!t.hidden&&t._stacked&&{keys:Xd(n,!0),values:null}}(t,a,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},f=function(e){var t=e.getUserBounds(),n=t.min,r=t.max,a=t.minDefined,i=t.maxDefined;return{min:a?n:Number.NEGATIVE_INFINITY,max:i?r:Number.POSITIVE_INFINITY}}(u),h=f.min,p=f.max;function d(){var t=(r=i[n])[u.axis];return!Tf(r[e.axis])||h>t||p<t}for(n=0;n<s&&(d()||(this.updateRangeFromParsed(l,e,r,c),!o));++n);if(o)for(n=s-1;n>=0;--n)if(!d()){this.updateRangeFromParsed(l,e,r,c);break}return l}},{key:"getAllParsedValues",value:function(e){var t,n,r,a=this._cachedMeta._parsed,i=[];for(t=0,n=a.length;t<n;++t)r=a[t][e.axis],Tf(r)&&i.push(r);return i}},{key:"getMaxOverflow",value:function(){return!1}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.iScale,r=t.vScale,a=this.getParsed(e);return{label:n?""+n.getLabelForValue(a[n.axis]):"",value:r?""+r.getLabelForValue(a[r.axis]):""}}},{key:"_update",value:function(e){var t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){var t,n,r,a;return _f(e)?(t=e.top,n=e.right,r=e.bottom,a=e.left):t=n=r=a=e,{top:t,right:n,bottom:r,left:a,disabled:!1===e}}(Nf(this.options.clip,function(e,t,n){if(!1===n)return!1;var r=Kd(e,n),a=Kd(t,n);return{top:a.end,right:r.end,bottom:a.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}},{key:"update",value:function(e){}},{key:"draw",value:function(){var e,t=this._ctx,n=this.chart,r=this._cachedMeta,a=r.data||[],i=n.chartArea,o=[],s=this._drawStart||0,u=this._drawCount||a.length-s,c=this.options.drawActiveElementsOnTop;for(r.dataset&&r.dataset.draw(t,i,s,u),e=s;e<s+u;++e){var l=a[e];l.hidden||(l.active&&c?o.push(l):l.draw(t,i))}for(e=0;e<o.length;++e)o[e].draw(t,i)}},{key:"getStyle",value:function(e,t){var n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}},{key:"getContext",value:function(e,t,n){var r,a=this.getDataset();if(e>=0&&e<this._cachedMeta.data.length){var i=this._cachedMeta.data[e];r=i.$context||(i.$context=function(e,t,n){return Hp(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,i)),r.parsed=this.getParsed(e),r.raw=a.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return Hp(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=a,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}},{key:"resolveDatasetElementOptions",value:function(e){return this._resolveElementOptions(this.datasetElementType.id,e)}},{key:"resolveDataElementOptions",value:function(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}},{key:"_resolveElementOptions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2?arguments[2]:void 0,a="active"===n,i=this._cachedDataOpts,o=e+"-"+n,s=i[o],u=this.enableOptionSharing&&Vf(r);if(s)return am(s,u);var c=this.chart.config,l=c.datasetElementScopeKeys(this._type,e),f=a?["".concat(e,"Hover"),"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),l),p=Object.keys(yp.elements[e]),d=function(){return t.getContext(r,a)},m=c.resolveNamedOptions(h,p,d,f);return m.$shared&&(m.$shared=u,i[o]=Object.freeze(am(m,u))),m}},{key:"_resolveAnimations",value:function(e,t,n){var r,a=this.chart,i=this._cachedDataOpts,o="animation-".concat(t),s=i[o];if(s)return s;if(!1!==a.options.animation){var u=this.chart.config,c=u.datasetAnimationScopeKeys(this._type,t),l=u.getOptionScopes(this.getDataset(),c);r=u.createResolver(l,this.getContext(e,n,t))}var f=new qd(a,r&&r.animations);return r&&r._cacheable&&(i[o]=Object.freeze(f)),f}},{key:"getSharedOptions",value:function(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}},{key:"includeOptions",value:function(e,t){return!t||rm(e)||this.chart._animationsDisabled}},{key:"_getSharedOptions",value:function(e,t){var n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,a=this.getSharedOptions(n),i=this.includeOptions(t,a)||a!==r;return this.updateSharedOptions(a,t,n),{sharedOptions:a,includeOptions:i}}},{key:"updateElement",value:function(e,t,n,r){rm(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}},{key:"updateSharedOptions",value:function(e,t,n){e&&!rm(t)&&this._resolveAnimations(void 0,t).update(e,n)}},{key:"_setStyle",value:function(e,t,n,r){e.active=r;var a=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(a)||a})}},{key:"removeHoverStyle",value:function(e,t,n){this._setStyle(e,n,"active",!1)}},{key:"setHoverStyle",value:function(e,t,n){this._setStyle(e,n,"active",!0)}},{key:"_removeDatasetHoverStyle",value:function(){var e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}},{key:"_setDatasetHoverStyle",value:function(){var e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}},{key:"_resyncElements",value:function(e){var t,n=this._data,r=this._cachedMeta.data,a=Oo(this._syncList);try{for(a.s();!(t=a.n()).done;){var i=(0,T.Z)(t.value,3),o=i[0],s=i[1],u=i[2];this[o](s,u)}}catch(h){a.e(h)}finally{a.f()}this._syncList=[];var c=r.length,l=n.length,f=Math.min(l,c);f&&this.parse(0,f),l>c?this._insertElements(c,l-c,e):l<c&&this._removeElements(l,c-l)}},{key:"_insertElements",value:function(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this._cachedMeta,i=a.data,o=e+t,s=function(e){for(e.length+=t,n=e.length-1;n>=o;n--)e[n]=e[n-t]};for(s(i),n=e;n<o;++n)i[n]=new this.dataElementType;this._parsing&&s(a._parsed),this.parse(e,t),r&&this.updateElements(i,e,t,"reset")}},{key:"updateElements",value:function(e,t,n,r){}},{key:"_removeElements",value:function(e,t){var n=this._cachedMeta;if(this._parsing){var r=n._parsed.splice(e,t);n._stacked&&nm(n,r)}n.data.splice(e,t)}},{key:"_sync",value:function(e){if(this._parsing)this._syncList.push(e);else{var t=(0,T.Z)(e,3),n=t[0],r=t[1],a=t[2];this[n](r,a)}this.chart._dataChanges.push([this.index].concat((0,I.Z)(e)))}},{key:"_onDataPush",value:function(){var e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}},{key:"_onDataPop",value:function(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}},{key:"_onDataShift",value:function(){this._sync(["_removeElements",0,1])}},{key:"_onDataSplice",value:function(e,t){t&&this._sync(["_removeElements",e,t]);var n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}},{key:"_onDataUnshift",value:function(){this._sync(["_insertElements",0,arguments.length])}}]),e}();function om(e){var t,n,r,a,i=e.iScale,o=function(e,t){if(!e._cache.$bar){for(var n=e.getMatchingVisibleMetas(t),r=[],a=0,i=n.length;a<i;a++)r=r.concat(n[a].controller.getAllParsedValues(e));e._cache.$bar=bh(r.sort((function(e,t){return e-t})))}return e._cache.$bar}(i,e.type),s=i._length,u=function(){32767!==r&&-32768!==r&&(Vf(a)&&(s=Math.min(s,Math.abs(r-a)||s)),a=r)};for(t=0,n=o.length;t<n;++t)r=i.getPixelForValue(o[t]),u();for(a=void 0,t=0,n=i.ticks.length;t<n;++t)r=i.getPixelForTick(t),u();return s}function sm(e,t,n,r){return Sf(e)?function(e,t,n,r){var a=n.parse(e[0],r),i=n.parse(e[1],r),o=Math.min(a,i),s=Math.max(a,i),u=o,c=s;Math.abs(o)>Math.abs(s)&&(u=s,c=o),t[n.axis]=c,t._custom={barStart:u,barEnd:c,start:a,end:i,min:o,max:s}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function um(e,t,n,r){var a,i,o,s,u=e.iScale,c=e.vScale,l=u.getLabels(),f=u===c,h=[];for(a=n,i=n+r;a<i;++a)s=t[a],(o={})[u.axis]=f||u.parse(l[a],a),h.push(sm(s,o,c,a));return h}function cm(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function lm(e,t,n,r){var a=t.borderSkipped,i={};if(a)if(!0!==a){var o=function(e){var t,n,r,a,i;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(a="end",i="start"):(a="start",i="end"),{start:n,end:r,reverse:t,top:a,bottom:i}}(e),s=o.start,u=o.end,c=o.reverse,l=o.top,f=o.bottom;"middle"===a&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?a=l:(n._bottom||0)===r?a=f:(i[fm(f,s,u,c)]=!0,a=l)),i[fm(a,s,u,c)]=!0,e.borderSkipped=i}else e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};else e.borderSkipped=i}function fm(e,t,n,r){return r?(e=function(e,t,n){return e===t?n:e===n?t:e}(e,t,n),e=hm(e,n,t)):e=hm(e,t,n),e}function hm(e,t,n){return"start"===e?t:"end"===e?n:e}function pm(e,t,n){var r=t.inflateAmount;e.inflateAmount="auto"===r?1===n?.33:0:r}im.defaults={},im.prototype.datasetElementType=null,im.prototype.dataElementType=null;var dm=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"parsePrimitiveData",value:function(e,t,n,r){return um(e,t,n,r)}},{key:"parseArrayData",value:function(e,t,n,r){return um(e,t,n,r)}},{key:"parseObjectData",value:function(e,t,n,r){var a,i,o,s,u=e.iScale,c=e.vScale,l=this._parsing,f=l.xAxisKey,h=void 0===f?"x":f,p=l.yAxisKey,d=void 0===p?"y":p,m="x"===u.axis?h:d,v="x"===c.axis?h:d,g=[];for(a=n,i=n+r;a<i;++a)s=t[a],(o={})[u.axis]=u.parse(Bf(s,m),a),g.push(sm(Bf(s,v),o,c,a));return g}},{key:"updateRangeFromParsed",value:function(e,t,r,a){bf(R(n.prototype),"updateRangeFromParsed",this).call(this,e,t,r,a);var i=r._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}},{key:"getMaxOverflow",value:function(){return 0}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.iScale,r=t.vScale,a=this.getParsed(e),i=a._custom,o=cm(i)?"["+i.start+", "+i.end+"]":""+r.getLabelForValue(a[r.axis]);return{label:""+n.getLabelForValue(a[n.axis]),value:o}}},{key:"initialize",value:function(){this.enableOptionSharing=!0,bf(R(n.prototype),"initialize",this).call(this),this._cachedMeta.stack=this.getDataset().stack}},{key:"update",value:function(e){var t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}},{key:"updateElements",value:function(e,t,n,r){for(var a="reset"===r,i=this.index,o=this._cachedMeta.vScale,s=o.getBasePixel(),u=o.isHorizontal(),c=this._getRuler(),l=this._getSharedOptions(t,r),f=l.sharedOptions,h=l.includeOptions,p=t;p<t+n;p++){var d=this.getParsed(p),m=a||kf(d[o.axis])?{base:s,head:s}:this._calculateBarValuePixels(p),v=this._calculateBarIndexPixels(p,c),g=(d._stacks||{})[o.axis],y={horizontal:u,base:m.base,enableBorderRadius:!g||cm(d._custom)||i===g._top||i===g._bottom,x:u?m.head:v.center,y:u?v.center:m.head,height:u?v.size:Math.abs(m.size),width:u?Math.abs(m.size):v.size};h&&(y.options=f||this.resolveDataElementOptions(p,e[p].active?"active":r));var b=y.options||e[p].options;lm(y,b,g,i),pm(y,b,c.ratio),this.updateElement(e[p],p,y,r)}}},{key:"_getStacks",value:function(e,t){var n,r=this._cachedMeta.iScale,a=r.getMatchingVisibleMetas(this._type).filter((function(e){return e.controller.options.grouped})),i=r.options.stacked,o=[],s=function(e){var n=e.controller.getParsed(t),r=n&&n[e.vScale.axis];if(kf(r)||isNaN(r))return!0},u=Oo(a);try{for(u.s();!(n=u.n()).done;){var c=n.value;if((void 0===t||!s(c))&&((!1===i||-1===o.indexOf(c.stack)||void 0===i&&void 0===c.stack)&&o.push(c.stack),c.index===e))break}}catch(l){u.e(l)}finally{u.f()}return o.length||o.push(void 0),o}},{key:"_getStackCount",value:function(e){return this._getStacks(void 0,e).length}},{key:"_getStackIndex",value:function(e,t,n){var r=this._getStacks(e,n),a=void 0!==t?r.indexOf(t):-1;return-1===a?r.length-1:a}},{key:"_getRuler",value:function(){var e,t,n=this.options,r=this._cachedMeta,a=r.iScale,i=[];for(e=0,t=r.data.length;e<t;++e)i.push(a.getPixelForValue(this.getParsed(e)[a.axis],e));var o=n.barThickness;return{min:o||om(r),pixels:i,start:a._startPixel,end:a._endPixel,stackCount:this._getStackCount(),scale:a,grouped:n.grouped,ratio:o?1:n.categoryPercentage*n.barPercentage}}},{key:"_calculateBarValuePixels",value:function(e){var t,n,r=this._cachedMeta,a=r.vScale,i=r._stacked,o=this.options,s=o.base,u=o.minBarLength,c=s||0,l=this.getParsed(e),f=l._custom,h=cm(f),p=l[a.axis],d=0,m=i?this.applyStack(a,l,i):p;m!==p&&(d=m-p,m=p),h&&(p=f.barStart,m=f.barEnd-f.barStart,0!==p&&Jf(p)!==Jf(f.barEnd)&&(d=0),d+=p);var v=kf(s)||h?d:s,g=a.getPixelForValue(v);if(n=(t=this.chart.getDataVisibility(e)?a.getPixelForValue(d+m):g)-g,Math.abs(n)<u){n=function(e,t,n){return 0!==e?Jf(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(n,a,c)*u,p===c&&(g-=n/2);var y=a.getPixelForDecimal(0),b=a.getPixelForDecimal(1),x=Math.min(y,b),w=Math.max(y,b);t=(g=Math.max(Math.min(g,w),x))+n}if(g===a.getPixelForValue(c)){var k=Jf(n)*a.getLineWidthForValue(c)/2;g+=k,n-=k}return{size:n,base:g,head:t,center:t+n/2}}},{key:"_calculateBarIndexPixels",value:function(e,t){var n,r,a=t.scale,i=this.options,o=i.skipNull,s=Nf(i.maxBarThickness,1/0);if(t.grouped){var u=o?this._getStackCount(e):t.stackCount,c="flex"===i.barThickness?function(e,t,n,r){var a=t.pixels,i=a[e],o=e>0?a[e-1]:null,s=e<a.length-1?a[e+1]:null,u=n.categoryPercentage;null===o&&(o=i-(null===s?t.end-t.start:s-i)),null===s&&(s=i+i-o);var c=i-(i-Math.min(o,s))/2*u;return{chunk:Math.abs(s-o)/2*u/r,ratio:n.barPercentage,start:c}}(e,t,i,u):function(e,t,n,r){var a,i,o=n.barThickness;return kf(o)?(a=t.min*n.categoryPercentage,i=n.barPercentage):(a=o*r,i=1),{chunk:a/r,ratio:i,start:t.pixels[e]-a/2}}(e,t,i,u),l=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);n=c.start+c.chunk*l+c.chunk/2,r=Math.min(s,c.chunk*c.ratio)}else n=a.getPixelForValue(this.getParsed(e)[a.axis],e),r=Math.min(s,t.min*t.ratio);return{base:n-r/2,head:n+r/2,center:n,size:r}}},{key:"draw",value:function(){for(var e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length,a=0;a<r;++a)null!==this.getParsed(a)[t.axis]&&n[a].draw(this._ctx)}}]),n}(im);dm.id="bar",dm.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},dm.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};var mm=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"initialize",value:function(){this.enableOptionSharing=!0,bf(R(n.prototype),"initialize",this).call(this)}},{key:"parsePrimitiveData",value:function(e,t,r,a){for(var i=bf(R(n.prototype),"parsePrimitiveData",this).call(this,e,t,r,a),o=0;o<i.length;o++)i[o]._custom=this.resolveDataElementOptions(o+r).radius;return i}},{key:"parseArrayData",value:function(e,t,r,a){for(var i=bf(R(n.prototype),"parseArrayData",this).call(this,e,t,r,a),o=0;o<i.length;o++){var s=t[r+o];i[o]._custom=Nf(s[2],this.resolveDataElementOptions(o+r).radius)}return i}},{key:"parseObjectData",value:function(e,t,r,a){for(var i=bf(R(n.prototype),"parseObjectData",this).call(this,e,t,r,a),o=0;o<i.length;o++){var s=t[r+o];i[o]._custom=Nf(s&&s.r&&+s.r,this.resolveDataElementOptions(o+r).radius)}return i}},{key:"getMaxOverflow",value:function(){for(var e=this._cachedMeta.data,t=0,n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.xScale,r=t.yScale,a=this.getParsed(e),i=n.getLabelForValue(a.x),o=r.getLabelForValue(a.y),s=a._custom;return{label:t.label,value:"("+i+", "+o+(s?", "+s:"")+")"}}},{key:"update",value:function(e){var t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}},{key:"updateElements",value:function(e,t,n,r){for(var a="reset"===r,i=this._cachedMeta,o=i.iScale,s=i.vScale,u=this._getSharedOptions(t,r),c=u.sharedOptions,l=u.includeOptions,f=o.axis,h=s.axis,p=t;p<t+n;p++){var d=e[p],m=!a&&this.getParsed(p),v={},g=v[f]=a?o.getPixelForDecimal(.5):o.getPixelForValue(m[f]),y=v[h]=a?s.getBasePixel():s.getPixelForValue(m[h]);v.skip=isNaN(g)||isNaN(y),l&&(v.options=c||this.resolveDataElementOptions(p,d.active?"active":r),a&&(v.options.radius=0)),this.updateElement(d,p,v,r)}}},{key:"resolveDataElementOptions",value:function(e,t){var r=this.getParsed(e),a=bf(R(n.prototype),"resolveDataElementOptions",this).call(this,e,t);a.$shared&&(a=Object.assign({},a,{$shared:!1}));var i=a.radius;return"active"!==t&&(a.radius=0),a.radius+=Nf(r&&r._custom,i),a}}]),n}(im);mm.id="bubble",mm.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},mm.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:function(){return""}}}}};var vm=function(e){A(n,e);var t=L(n);function n(e,r){var a;return N(this,n),(a=t.call(this,e,r)).enableOptionSharing=!0,a.innerRadius=void 0,a.outerRadius=void 0,a.offsetX=void 0,a.offsetY=void 0,a}return(0,C.Z)(n,[{key:"linkScales",value:function(){}},{key:"parse",value:function(e,t){var n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{var a,i,o=function(e){return+n[e]};if(_f(n[e])){var s=this._parsing.key,u=void 0===s?"value":s;o=function(e){return+Bf(n[e],u)}}for(a=e,i=e+t;a<i;++a)r._parsed[a]=o(a)}}},{key:"_getRotation",value:function(){return ah(this.options.rotation-90)}},{key:"_getCircumference",value:function(){return ah(this.options.circumference)}},{key:"_getRotationExtents",value:function(){for(var e=Zf,t=-Zf,n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){var r=this.chart.getDatasetMeta(n).controller,a=r._getRotation(),i=r._getCircumference();e=Math.min(e,a),t=Math.max(t,a+i)}return{rotation:e,circumference:t-e}}},{key:"update",value:function(e){var t=this.chart.chartArea,n=this._cachedMeta,r=n.data,a=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,i=Math.max((Math.min(t.width,t.height)-a)/2,0),o=Math.min(function(e,t){return"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100:e/t}(this.options.cutout,i),1),s=this._getRingWeight(this.index),u=this._getRotationExtents(),c=u.circumference,l=function(e,t,n){var r=1,a=1,i=0,o=0;if(t<Zf){var s=e,u=s+t,c=Math.cos(s),l=Math.sin(s),f=Math.cos(u),h=Math.sin(u),p=function(e,t,r){return fh(e,s,u,!0)?1:Math.max(t,t*n,r,r*n)},d=function(e,t,r){return fh(e,s,u,!0)?-1:Math.min(t,t*n,r,r*n)},m=p(0,c,f),v=p(Xf,l,h),g=d(Hf,c,f),y=d(Hf+Xf,l,h);r=(m-g)/2,a=(v-y)/2,i=-(m+g)/2,o=-(v+y)/2}return{ratioX:r,ratioY:a,offsetX:i,offsetY:o}}(u.rotation,c,o),f=l.ratioX,h=l.ratioY,p=l.offsetX,d=l.offsetY,m=(t.width-a)/f,v=(t.height-a)/h,g=Math.max(Math.min(m,v)/2,0),y=Cf(this.options.radius,g),b=(y-Math.max(y*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*y,this.offsetY=d*y,n.total=this.calculateTotal(),this.outerRadius=y-b*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-b*s,0),this.updateElements(r,0,r.length,e)}},{key:"_circumference",value:function(e,t){var n=this.options,r=this._cachedMeta,a=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*a/Zf)}},{key:"updateElements",value:function(e,t,n,r){var a,i="reset"===r,o=this.chart,s=o.chartArea,u=o.options.animation,c=(s.left+s.right)/2,l=(s.top+s.bottom)/2,f=i&&u.animateScale,h=f?0:this.innerRadius,p=f?0:this.outerRadius,d=this._getSharedOptions(t,r),m=d.sharedOptions,v=d.includeOptions,g=this._getRotation();for(a=0;a<t;++a)g+=this._circumference(a,i);for(a=t;a<t+n;++a){var y=this._circumference(a,i),b=e[a],x={x:c+this.offsetX,y:l+this.offsetY,startAngle:g,endAngle:g+y,circumference:y,outerRadius:p,innerRadius:h};v&&(x.options=m||this.resolveDataElementOptions(a,b.active?"active":r)),g+=y,this.updateElement(b,a,x,r)}}},{key:"calculateTotal",value:function(){var e,t=this._cachedMeta,n=t.data,r=0;for(e=0;e<n.length;e++){var a=t._parsed[e];null===a||isNaN(a)||!this.chart.getDataVisibility(e)||n[e].hidden||(r+=Math.abs(a))}return r}},{key:"calculateCircumference",value:function(e){var t=this._cachedMeta.total;return t>0&&!isNaN(e)?Zf*(Math.abs(e)/t):0}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart,r=n.data.labels||[],a=Ad(t._parsed[e],n.options.locale);return{label:r[e]||"",value:a}}},{key:"getMaxBorderWidth",value:function(e){var t,n,r,a,i,o=0,s=this.chart;if(!e)for(t=0,n=s.data.datasets.length;t<n;++t)if(s.isDatasetVisible(t)){e=(r=s.getDatasetMeta(t)).data,a=r.controller;break}if(!e)return 0;for(t=0,n=e.length;t<n;++t)"inner"!==(i=a.resolveDataElementOptions(t)).borderAlign&&(o=Math.max(o,i.borderWidth||0,i.hoverBorderWidth||0));return o}},{key:"getMaxOffset",value:function(e){for(var t=0,n=0,r=e.length;n<r;++n){var a=this.resolveDataElementOptions(n);t=Math.max(t,a.offset||0,a.hoverOffset||0)}return t}},{key:"_getRingWeightOffset",value:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}},{key:"_getRingWeight",value:function(e){return Math.max(Nf(this.chart.data.datasets[e].weight,1),0)}},{key:"_getVisibleDatasetWeightTotal",value:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}]),n}(im);vm.id="doughnut",vm.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},vm.descriptors={_scriptable:function(e){return"spacing"!==e},_indexable:function(e){return"spacing"!==e}},vm.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(e){var t=e.data;if(t.labels.length&&t.datasets.length){var n=e.legend.options.labels.pointStyle;return t.labels.map((function(t,r){var a=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick:function(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:function(){return""},label:function(e){var t=e.label,n=": "+e.formattedValue;return Sf(t)?(t=t.slice())[0]+=n:t+=n,t}}}}};var gm=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"initialize",value:function(){this.enableOptionSharing=!0,this.supportsDecimation=!0,bf(R(n.prototype),"initialize",this).call(this)}},{key:"update",value:function(e){var t=this._cachedMeta,n=t.dataset,r=t.data,a=void 0===r?[]:r,i=t._dataset,o=this.chart._animationsDisabled,s=_h(t,a,o),u=s.start,c=s.count;this._drawStart=u,this._drawCount=c,Th(t)&&(u=0,c=a.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=a;var l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:l},e),this.updateElements(a,u,c,e)}},{key:"updateElements",value:function(e,t,n,r){for(var a="reset"===r,i=this._cachedMeta,o=i.iScale,s=i.vScale,u=i._stacked,c=i._dataset,l=this._getSharedOptions(t,r),f=l.sharedOptions,h=l.includeOptions,p=o.axis,d=s.axis,m=this.options,v=m.spanGaps,g=m.segment,y=th(v)?v:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||a||"none"===r,x=t>0&&this.getParsed(t-1),w=t;w<t+n;++w){var k=e[w],S=this.getParsed(w),_=b?k:{},T=kf(S[d]),I=_[p]=o.getPixelForValue(S[p],w),N=_[d]=a||T?s.getBasePixel():s.getPixelForValue(u?this.applyStack(s,S,u):S[d],w);_.skip=isNaN(I)||isNaN(N)||T,_.stop=w>0&&Math.abs(S[p]-x[p])>y,g&&(_.parsed=S,_.raw=c.data[w]),h&&(_.options=f||this.resolveDataElementOptions(w,k.active?"active":r)),b||this.updateElement(k,w,_,r),x=S}}},{key:"getMaxOverflow",value:function(){var e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;var a=r[0].size(this.resolveDataElementOptions(0)),i=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,a,i)/2}},{key:"draw",value:function(){var e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),bf(R(n.prototype),"draw",this).call(this)}}]),n}(im);gm.id="line",gm.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},gm.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};var ym=function(e){A(n,e);var t=L(n);function n(e,r){var a;return N(this,n),(a=t.call(this,e,r)).innerRadius=void 0,a.outerRadius=void 0,a}return(0,C.Z)(n,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart,r=n.data.labels||[],a=Ad(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:a}}},{key:"parseObjectData",value:function(e,t,n,r){return id.bind(this)(e,t,n,r)}},{key:"update",value:function(e){var t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}},{key:"getMinMax",value:function(){var e=this,t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((function(t,r){var a=e.getParsed(r).r;!isNaN(a)&&e.chart.getDataVisibility(r)&&(a<n.min&&(n.min=a),a>n.max&&(n.max=a))})),n}},{key:"_updateRadius",value:function(){var e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),a=Math.max(r/2,0),i=(a-Math.max(n.cutoutPercentage?a/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=a-i*this.index,this.innerRadius=this.outerRadius-i}},{key:"updateElements",value:function(e,t,n,r){var a,i="reset"===r,o=this.chart,s=o.options.animation,u=this._cachedMeta.rScale,c=u.xCenter,l=u.yCenter,f=u.getIndexAngle(0)-.5*Hf,h=f,p=360/this.countVisibleElements();for(a=0;a<t;++a)h+=this._computeAngle(a,r,p);for(a=t;a<t+n;a++){var d=e[a],m=h,v=h+this._computeAngle(a,r,p),g=o.getDataVisibility(a)?u.getDistanceFromCenterForValue(this.getParsed(a).r):0;h=v,i&&(s.animateScale&&(g=0),s.animateRotate&&(m=v=f));var y={x:c,y:l,innerRadius:0,outerRadius:g,startAngle:m,endAngle:v,options:this.resolveDataElementOptions(a,d.active?"active":r)};this.updateElement(d,a,y,r)}}},{key:"countVisibleElements",value:function(){var e=this,t=this._cachedMeta,n=0;return t.data.forEach((function(t,r){!isNaN(e.getParsed(r).r)&&e.chart.getDataVisibility(r)&&n++})),n}},{key:"_computeAngle",value:function(e,t,n){return this.chart.getDataVisibility(e)?ah(this.resolveDataElementOptions(e,t).angle||n):0}}]),n}(im);ym.id="polarArea",ym.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},ym.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(e){var t=e.data;if(t.labels.length&&t.datasets.length){var n=e.legend.options.labels.pointStyle;return t.labels.map((function(t,r){var a=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick:function(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:function(){return""},label:function(e){return e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};var bm=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n)}(vm);bm.id="pie",bm.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};var xm=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}},{key:"parseObjectData",value:function(e,t,n,r){return id.bind(this)(e,t,n,r)}},{key:"update",value:function(e){var t=this._cachedMeta,n=t.dataset,r=t.data||[],a=t.iScale.getLabels();if(n.points=r,"resize"!==e){var i=this.resolveDatasetElementOptions(e);this.options.showLine||(i.borderWidth=0);var o={_loop:!0,_fullLoop:a.length===r.length,options:i};this.updateElement(n,void 0,o,e)}this.updateElements(r,0,r.length,e)}},{key:"updateElements",value:function(e,t,n,r){for(var a=this._cachedMeta.rScale,i="reset"===r,o=t;o<t+n;o++){var s=e[o],u=this.resolveDataElementOptions(o,s.active?"active":r),c=a.getPointPositionForValue(o,this.getParsed(o).r),l=i?a.xCenter:c.x,f=i?a.yCenter:c.y,h={x:l,y:f,angle:c.angle,skip:isNaN(l)||isNaN(f),options:u};this.updateElement(s,o,h,r)}}}]),n}(im);xm.id="radar",xm.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},xm.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};var wm=function(){function e(){N(this,e),this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}return(0,C.Z)(e,[{key:"tooltipPosition",value:function(e){var t=this.getProps(["x","y"],e);return{x:t.x,y:t.y}}},{key:"hasValue",value:function(){return th(this.x)&&th(this.y)}},{key:"getProps",value:function(e,t){var n=this,r=this.$animations;if(!t||!r)return this;var a={};return e.forEach((function(e){a[e]=r[e]&&r[e].active()?r[e]._to:n[e]})),a}}]),e}();wm.defaults={},wm.defaultRoutes=void 0;var km={values:function(e){return Sf(e)?e:""+e},numeric:function(e,t,n){if(0===e)return"0";var r,a=this.chart.options.locale,i=e;if(n.length>1){var o=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(o<1e-4||o>1e15)&&(r="scientific"),i=function(e,t){var n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}var s=Qf(Math.abs(i)),u=Math.max(Math.min(-1*Math.floor(s),20),0),c={notation:r,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(c,this.options.ticks.format),Ad(e,a,c)},logarithmic:function(e,t,n){if(0===e)return"0";var r=e/Math.pow(10,Math.floor(Qf(e)));return 1===r||2===r||5===r?km.numeric.call(this,e,t,n):""}};var Sm={formatters:km};function _m(e,t){var n=e.options.ticks,r=n.maxTicksLimit||function(e){var t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),a=e._maxLength/n;return Math.floor(Math.min(r,a))}(e),a=n.major.enabled?function(e){var t,n,r=[];for(t=0,n=e.length;t<n;t++)e[t].major&&r.push(t);return r}(t):[],i=a.length,o=a[0],s=a[i-1],u=[];if(i>r)return function(e,t,n,r){var a,i=0,o=n[0];for(r=Math.ceil(r),a=0;a<e.length;a++)a===o&&(t.push(e[a]),o=n[++i*r])}(t,u,a,i/r),u;var c=function(e,t,n){var r=function(e){var t,n,r=e.length;if(r<2)return!1;for(n=e[0],t=1;t<r;++t)if(e[t]-e[t-1]!==n)return!1;return n}(e),a=t.length/n;if(!r)return Math.max(a,1);for(var i=function(e){var t,n=[],r=Math.sqrt(e);for(t=1;t<r;t++)e%t===0&&(n.push(t),n.push(e/t));return r===(0|r)&&n.push(r),n.sort((function(e,t){return e-t})).pop(),n}(r),o=0,s=i.length-1;o<s;o++){var u=i[o];if(u>a)return u}return Math.max(a,1)}(a,t,r);if(i>0){var l,f,h=i>1?Math.round((s-o)/(i-1)):null;for(Tm(t,u,c,kf(h)?0:o-h,o),l=0,f=i-1;l<f;l++)Tm(t,u,c,a[l],a[l+1]);return Tm(t,u,c,s,kf(h)?t.length:s+h),u}return Tm(t,u,c),u}function Tm(e,t,n,r,a){var i,o,s,u=Nf(r,0),c=Math.min(Nf(a,e.length),e.length),l=0;for(n=Math.ceil(n),a&&(n=(i=a-r)/Math.floor(i/n)),s=u;s<0;)l++,s=Math.round(u+l*n);for(o=Math.max(u,0);o<c;o++)o===s&&(t.push(e[o]),l++,s=Math.round(u+l*n))}yp.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:function(e,t){return t.lineWidth},tickColor:function(e,t){return t.color},offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Sm.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),yp.route("scale.ticks","color","","color"),yp.route("scale.grid","color","","borderColor"),yp.route("scale.grid","borderColor","","borderColor"),yp.route("scale.title","color","","color"),yp.describe("scale",{_fallback:!1,_scriptable:function(e){return!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e},_indexable:function(e){return"borderDash"!==e&&"tickBorderDash"!==e}}),yp.describe("scales",{_fallback:"scale"}),yp.describe("scale.ticks",{_scriptable:function(e){return"backdropPadding"!==e&&"callback"!==e},_indexable:function(e){return"backdropPadding"!==e}});var Im=function(e,t,n){return"top"===t||"left"===t?e[t]+n:e[t]-n};function Nm(e,t){for(var n=[],r=e.length/t,a=e.length,i=0;i<a;i+=r)n.push(e[Math.floor(i)]);return n}function Cm(e,t,n){var r,a=e.ticks.length,i=Math.min(t,a-1),o=e._startPixel,s=e._endPixel,u=1e-6,c=e.getPixelForTick(i);if(!(n&&(r=1===a?Math.max(c-o,s-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,(c+=i<t?r:-r)<o-u||c>s+u)))return c}function Em(e){return e.drawTicks?e.tickLength:0}function Am(e,t){if(!e.display)return 0;var n=jp(e.font,t),r=Vp(e.padding);return(Sf(e.text)?e.text.length:1)*n.lineHeight+r.height}function Rm(e,t,n){var r=kh(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=function(e){return"left"===e?"right":"right"===e?"left":e}(r)),r}var Om=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).id=e.id,r.type=e.type,r.options=void 0,r.ctx=e.ctx,r.chart=e.chart,r.top=void 0,r.bottom=void 0,r.left=void 0,r.right=void 0,r.width=void 0,r.height=void 0,r._margins={left:0,right:0,top:0,bottom:0},r.maxWidth=void 0,r.maxHeight=void 0,r.paddingTop=void 0,r.paddingBottom=void 0,r.paddingLeft=void 0,r.paddingRight=void 0,r.axis=void 0,r.labelRotation=void 0,r.min=void 0,r.max=void 0,r._range=void 0,r.ticks=[],r._gridLineItems=null,r._labelItems=null,r._labelSizes=null,r._length=0,r._maxLength=0,r._longestTextCache={},r._startPixel=void 0,r._endPixel=void 0,r._reversePixels=!1,r._userMax=void 0,r._userMin=void 0,r._suggestedMax=void 0,r._suggestedMin=void 0,r._ticksLength=0,r._borderValue=0,r._cache={},r._dataLimitsCached=!1,r.$context=void 0,r}return(0,C.Z)(n,[{key:"init",value:function(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}},{key:"parse",value:function(e,t){return e}},{key:"getUserBounds",value:function(){var e=this._userMin,t=this._userMax,n=this._suggestedMin,r=this._suggestedMax;return e=If(e,Number.POSITIVE_INFINITY),t=If(t,Number.NEGATIVE_INFINITY),n=If(n,Number.POSITIVE_INFINITY),r=If(r,Number.NEGATIVE_INFINITY),{min:If(e,n),max:If(t,r),minDefined:Tf(e),maxDefined:Tf(t)}}},{key:"getMinMax",value:function(e){var t,n=this.getUserBounds(),r=n.min,a=n.max,i=n.minDefined,o=n.maxDefined;if(i&&o)return{min:r,max:a};for(var s=this.getMatchingVisibleMetas(),u=0,c=s.length;u<c;++u)t=s[u].controller.getMinMax(this,e),i||(r=Math.min(r,t.min)),o||(a=Math.max(a,t.max));return{min:If(r=o&&r>a?a:r,If(a=i&&r>a?r:a,r)),max:If(a,If(r,a))}}},{key:"getPadding",value:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}},{key:"getTicks",value:function(){return this.ticks}},{key:"getLabels",value:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}},{key:"beforeLayout",value:function(){this._cache={},this._dataLimitsCached=!1}},{key:"beforeUpdate",value:function(){Ef(this.options.beforeUpdate,[this])}},{key:"update",value:function(e,t,n){var r=this.options,a=r.beginAtZero,i=r.grace,o=r.ticks,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){var r=e.min,a=e.max,i=Cf(t,(a-r)/2),o=function(e,t){return n&&0===e?0:e+t};return{min:o(r,-Math.abs(i)),max:o(a,i)}}(this,i,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();var u=s<this.ticks.length;this._convertTicksToLabels(u?Nm(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=_m(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}},{key:"configure",value:function(){var e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}},{key:"afterUpdate",value:function(){Ef(this.options.afterUpdate,[this])}},{key:"beforeSetDimensions",value:function(){Ef(this.options.beforeSetDimensions,[this])}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}},{key:"afterSetDimensions",value:function(){Ef(this.options.afterSetDimensions,[this])}},{key:"_callHooks",value:function(e){this.chart.notifyPlugins(e,this.getContext()),Ef(this.options[e],[this])}},{key:"beforeDataLimits",value:function(){this._callHooks("beforeDataLimits")}},{key:"determineDataLimits",value:function(){}},{key:"afterDataLimits",value:function(){this._callHooks("afterDataLimits")}},{key:"beforeBuildTicks",value:function(){this._callHooks("beforeBuildTicks")}},{key:"buildTicks",value:function(){return[]}},{key:"afterBuildTicks",value:function(){this._callHooks("afterBuildTicks")}},{key:"beforeTickToLabelConversion",value:function(){Ef(this.options.beforeTickToLabelConversion,[this])}},{key:"generateTickLabels",value:function(e){var t,n,r,a=this.options.ticks;for(t=0,n=e.length;t<n;t++)(r=e[t]).label=Ef(a.callback,[r.value,t,e],this)}},{key:"afterTickToLabelConversion",value:function(){Ef(this.options.afterTickToLabelConversion,[this])}},{key:"beforeCalculateLabelRotation",value:function(){Ef(this.options.beforeCalculateLabelRotation,[this])}},{key:"calculateLabelRotation",value:function(){var e,t,n,r=this.options,a=r.ticks,i=this.ticks.length,o=a.minRotation||0,s=a.maxRotation,u=o;if(!this._isVisible()||!a.display||o>=s||i<=1||!this.isHorizontal())this.labelRotation=o;else{var c=this._getLabelSizes(),l=c.widest.width,f=c.highest.height,h=hh(this.chart.width-l,0,this.maxWidth);l+6>(e=r.offset?this.maxWidth/i:h/(i-1))&&(e=h/(i-(r.offset?.5:1)),t=this.maxHeight-Em(r.grid)-a.padding-Am(r.title,this.chart.options.font),n=Math.sqrt(l*l+f*f),u=ih(Math.min(Math.asin(hh((c.highest.height+6)/e,-1,1)),Math.asin(hh(t/n,-1,1))-Math.asin(hh(f/n,-1,1)))),u=Math.max(o,Math.min(s,u))),this.labelRotation=u}}},{key:"afterCalculateLabelRotation",value:function(){Ef(this.options.afterCalculateLabelRotation,[this])}},{key:"afterAutoSkip",value:function(){}},{key:"beforeFit",value:function(){Ef(this.options.beforeFit,[this])}},{key:"fit",value:function(){var e={width:0,height:0},t=this.chart,n=this.options,r=n.ticks,a=n.title,i=n.grid,o=this._isVisible(),s=this.isHorizontal();if(o){var u=Am(a,t.options.font);if(s?(e.width=this.maxWidth,e.height=Em(i)+u):(e.height=this.maxHeight,e.width=Em(i)+u),r.display&&this.ticks.length){var c=this._getLabelSizes(),l=c.first,f=c.last,h=c.widest,p=c.highest,d=2*r.padding,m=ah(this.labelRotation),v=Math.cos(m),g=Math.sin(m);if(s){var y=r.mirror?0:g*h.width+v*p.height;e.height=Math.min(this.maxHeight,e.height+y+d)}else{var b=r.mirror?0:v*h.width+g*p.height;e.width=Math.min(this.maxWidth,e.width+b+d)}this._calculatePadding(l,f,g,v)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}},{key:"_calculatePadding",value:function(e,t,n,r){var a=this.options,i=a.ticks,o=i.align,s=i.padding,u=a.position,c=0!==this.labelRotation,l="top"!==u&&"x"===this.axis;if(this.isHorizontal()){var f=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),p=0,d=0;c?l?(p=r*e.width,d=n*t.height):(p=n*e.height,d=r*t.width):"start"===o?d=t.width:"end"===o?p=e.width:"inner"!==o&&(p=e.width/2,d=t.width/2),this.paddingLeft=Math.max((p-f+s)*this.width/(this.width-f),0),this.paddingRight=Math.max((d-h+s)*this.width/(this.width-h),0)}else{var m=t.height/2,v=e.height/2;"start"===o?(m=0,v=e.height):"end"===o&&(m=t.height,v=0),this.paddingTop=m+s,this.paddingBottom=v+s}}},{key:"_handleMargins",value:function(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}},{key:"afterFit",value:function(){Ef(this.options.afterFit,[this])}},{key:"isHorizontal",value:function(){var e=this.options,t=e.axis,n=e.position;return"top"===n||"bottom"===n||"x"===t}},{key:"isFullSize",value:function(){return this.options.fullSize}},{key:"_convertTicksToLabels",value:function(e){var t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)kf(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}},{key:"_getLabelSizes",value:function(){var e=this._labelSizes;if(!e){var t=this.options.ticks.sampleSize,n=this.ticks;t<n.length&&(n=Nm(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length)}return e}},{key:"_computeLabelSizes",value:function(e,t){var n,r,a,i,o,s,u,c,l,f,h,p=this.ctx,d=this._longestTextCache,m=[],v=[],g=0,y=0;for(n=0;n<t;++n){if(i=e[n].label,o=this._resolveTickFontOptions(n),p.font=s=o.string,u=d[s]=d[s]||{data:{},gc:[]},c=o.lineHeight,l=f=0,kf(i)||Sf(i)){if(Sf(i))for(r=0,a=i.length;r<a;++r)kf(h=i[r])||Sf(h)||(l=bp(p,u.data,u.gc,l,h),f+=c)}else l=bp(p,u.data,u.gc,l,i),f=c;m.push(l),v.push(f),g=Math.max(l,g),y=Math.max(f,y)}!function(e,t){Af(e,(function(e){var n,r=e.gc,a=r.length/2;if(a>t){for(n=0;n<a;++n)delete e.data[r[n]];r.splice(0,a)}}))}(d,t);var b=m.indexOf(g),x=v.indexOf(y),w=function(e){return{width:m[e]||0,height:v[e]||0}};return{first:w(0),last:w(t-1),widest:w(b),highest:w(x),widths:m,heights:v}}},{key:"getLabelForValue",value:function(e){return e}},{key:"getPixelForValue",value:function(e,t){return NaN}},{key:"getValueForPixel",value:function(e){}},{key:"getPixelForTick",value:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}},{key:"getPixelForDecimal",value:function(e){this._reversePixels&&(e=1-e);var t=this._startPixel+e*this._length;return function(e){return hh(e,-32768,32767)}(this._alignToPixels?wp(this.chart,t,0):t)}},{key:"getDecimalForPixel",value:function(e){var t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}},{key:"getBasePixel",value:function(){return this.getPixelForValue(this.getBaseValue())}},{key:"getBaseValue",value:function(){var e=this.min,t=this.max;return e<0&&t<0?t:e>0&&t>0?e:0}},{key:"getContext",value:function(e){var t=this.ticks||[];if(e>=0&&e<t.length){var n=t[e];return n.$context||(n.$context=function(e,t,n){return Hp(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=Hp(this.chart.getContext(),{scale:this,type:"scale"}))}},{key:"_tickSize",value:function(){var e=this.options.ticks,t=ah(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),a=this._getLabelSizes(),i=e.autoSkipPadding||0,o=a?a.widest.width+i:0,s=a?a.highest.height+i:0;return this.isHorizontal()?s*n>o*r?o/n:s/r:s*r<o*n?s/n:o/r}},{key:"_isVisible",value:function(){var e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}},{key:"_computeGridLineItems",value:function(e){var t,n,r,a,i,o,s,u,c,l,f,h,p=this.axis,d=this.chart,m=this.options,v=m.grid,g=m.position,y=v.offset,b=this.isHorizontal(),x=this.ticks.length+(y?1:0),w=Em(v),k=[],S=v.setContext(this.getContext()),_=S.drawBorder?S.borderWidth:0,T=_/2,I=function(e){return wp(d,e,_)};if("top"===g)t=I(this.bottom),o=this.bottom-w,u=t-T,l=I(e.top)+T,h=e.bottom;else if("bottom"===g)t=I(this.top),l=e.top,h=I(e.bottom)-T,o=t+T,u=this.top+w;else if("left"===g)t=I(this.right),i=this.right-w,s=t-T,c=I(e.left)+T,f=e.right;else if("right"===g)t=I(this.left),c=e.left,f=I(e.right)-T,i=t+T,s=this.left+w;else if("x"===p){if("center"===g)t=I((e.top+e.bottom)/2+.5);else if(_f(g)){var N=Object.keys(g)[0],C=g[N];t=I(this.chart.scales[N].getPixelForValue(C))}l=e.top,h=e.bottom,u=(o=t+T)+w}else if("y"===p){if("center"===g)t=I((e.left+e.right)/2);else if(_f(g)){var E=Object.keys(g)[0],A=g[E];t=I(this.chart.scales[E].getPixelForValue(A))}s=(i=t-T)-w,c=e.left,f=e.right}var R=Nf(m.ticks.maxTicksLimit,x),O=Math.max(1,Math.ceil(x/R));for(n=0;n<x;n+=O){var M=v.setContext(this.getContext(n)),D=M.lineWidth,F=M.color,P=M.borderDash||[],L=M.borderDashOffset,z=M.tickWidth,B=M.tickColor,W=M.tickBorderDash||[],V=M.tickBorderDashOffset;void 0!==(r=Cm(this,n,y))&&(a=wp(d,r,D),b?i=s=c=f=a:o=u=l=h=a,k.push({tx1:i,ty1:o,tx2:s,ty2:u,x1:c,y1:l,x2:f,y2:h,width:D,color:F,borderDash:P,borderDashOffset:L,tickWidth:z,tickColor:B,tickBorderDash:W,tickBorderDashOffset:V}))}return this._ticksLength=x,this._borderValue=t,k}},{key:"_computeLabelItems",value:function(e){var t,n,r,a,i,o,s,u,c,l,f,h=this.axis,p=this.options,d=p.position,m=p.ticks,v=this.isHorizontal(),g=this.ticks,y=m.align,b=m.crossAlign,x=m.padding,w=m.mirror,k=Em(p.grid),S=k+x,_=w?-x:S,T=-ah(this.labelRotation),I=[],N="middle";if("top"===d)i=this.bottom-_,o=this._getXAxisLabelAlignment();else if("bottom"===d)i=this.top+_,o=this._getXAxisLabelAlignment();else if("left"===d){var C=this._getYAxisLabelAlignment(k);o=C.textAlign,a=C.x}else if("right"===d){var E=this._getYAxisLabelAlignment(k);o=E.textAlign,a=E.x}else if("x"===h){if("center"===d)i=(e.top+e.bottom)/2+S;else if(_f(d)){var A=Object.keys(d)[0],R=d[A];i=this.chart.scales[A].getPixelForValue(R)+S}o=this._getXAxisLabelAlignment()}else if("y"===h){if("center"===d)a=(e.left+e.right)/2-S;else if(_f(d)){var O=Object.keys(d)[0],M=d[O];a=this.chart.scales[O].getPixelForValue(M)}o=this._getYAxisLabelAlignment(k).textAlign}"y"===h&&("start"===y?N="top":"end"===y&&(N="bottom"));var D=this._getLabelSizes();for(t=0,n=g.length;t<n;++t){r=g[t].label;var F=m.setContext(this.getContext(t));s=this.getPixelForTick(t)+m.labelOffset,c=(u=this._resolveTickFontOptions(t)).lineHeight;var P=(l=Sf(r)?r.length:1)/2,L=F.color,z=F.textStrokeColor,B=F.textStrokeWidth,W=o;v?(a=s,"inner"===o&&(W=t===n-1?this.options.reverse?"left":"right":0===t?this.options.reverse?"right":"left":"center"),f="top"===d?"near"===b||0!==T?-l*c+c/2:"center"===b?-D.highest.height/2-P*c+c:-D.highest.height+c/2:"near"===b||0!==T?c/2:"center"===b?D.highest.height/2-P*c:D.highest.height-l*c,w&&(f*=-1)):(i=s,f=(1-l)*c/2);var V=void 0;if(F.showLabelBackdrop){var j=Vp(F.backdropPadding),U=D.heights[t],H=D.widths[t],Z=i+f-j.top,G=a-j.left;switch(N){case"middle":Z-=U/2;break;case"bottom":Z-=U}switch(o){case"center":G-=H/2;break;case"right":G-=H}V={left:G,top:Z,width:H+j.width,height:U+j.height,color:F.backdropColor}}I.push({rotation:T,label:r,font:u,color:L,strokeColor:z,strokeWidth:B,textOffset:f,textAlign:W,textBaseline:N,translation:[a,i],backdrop:V})}return I}},{key:"_getXAxisLabelAlignment",value:function(){var e=this.options,t=e.position,n=e.ticks;if(-ah(this.labelRotation))return"top"===t?"left":"right";var r="center";return"start"===n.align?r="left":"end"===n.align?r="right":"inner"===n.align&&(r="inner"),r}},{key:"_getYAxisLabelAlignment",value:function(e){var t,n,r=this.options,a=r.position,i=r.ticks,o=i.crossAlign,s=i.mirror,u=i.padding,c=e+u,l=this._getLabelSizes().widest.width;return"left"===a?s?(n=this.right+u,"near"===o?t="left":"center"===o?(t="center",n+=l/2):(t="right",n+=l)):(n=this.right-c,"near"===o?t="right":"center"===o?(t="center",n-=l/2):(t="left",n=this.left)):"right"===a?s?(n=this.left+u,"near"===o?t="right":"center"===o?(t="center",n-=l/2):(t="left",n-=l)):(n=this.left+c,"near"===o?t="left":"center"===o?(t="center",n+=l/2):(t="right",n=this.right)):t="right",{textAlign:t,x:n}}},{key:"_computeLabelArea",value:function(){if(!this.options.ticks.mirror){var e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}}},{key:"drawBackground",value:function(){var e=this.ctx,t=this.options.backgroundColor,n=this.left,r=this.top,a=this.width,i=this.height;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,a,i),e.restore())}},{key:"getLineWidthForValue",value:function(e){var t=this.options.grid;if(!this._isVisible()||!t.display)return 0;var n=this.ticks.findIndex((function(t){return t.value===e}));return n>=0?t.setContext(this.getContext(n)).lineWidth:0}},{key:"drawGrid",value:function(e){var t,n,r=this.options.grid,a=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),o=function(e,t,n){n.width&&n.color&&(a.save(),a.lineWidth=n.width,a.strokeStyle=n.color,a.setLineDash(n.borderDash||[]),a.lineDashOffset=n.borderDashOffset,a.beginPath(),a.moveTo(e.x,e.y),a.lineTo(t.x,t.y),a.stroke(),a.restore())};if(r.display)for(t=0,n=i.length;t<n;++t){var s=i[t];r.drawOnChartArea&&o({x:s.x1,y:s.y1},{x:s.x2,y:s.y2},s),r.drawTicks&&o({x:s.tx1,y:s.ty1},{x:s.tx2,y:s.ty2},{color:s.tickColor,width:s.tickWidth,borderDash:s.tickBorderDash,borderDashOffset:s.tickBorderDashOffset})}}},{key:"drawBorder",value:function(){var e=this.chart,t=this.ctx,n=this.options.grid,r=n.setContext(this.getContext()),a=n.drawBorder?r.borderWidth:0;if(a){var i,o,s,u,c=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;this.isHorizontal()?(i=wp(e,this.left,a)-a/2,o=wp(e,this.right,c)+c/2,s=u=l):(s=wp(e,this.top,a)-a/2,u=wp(e,this.bottom,c)+c/2,i=o=l),t.save(),t.lineWidth=r.borderWidth,t.strokeStyle=r.borderColor,t.beginPath(),t.moveTo(i,s),t.lineTo(o,u),t.stroke(),t.restore()}}},{key:"drawLabels",value:function(e){if(this.options.ticks.display){var t=this.ctx,n=this._computeLabelArea();n&&Ip(t,n);var r,a,i=this._labelItems||(this._labelItems=this._computeLabelItems(e));for(r=0,a=i.length;r<a;++r){var o=i[r],s=o.font,u=o.label;o.backdrop&&(t.fillStyle=o.backdrop.color,t.fillRect(o.backdrop.left,o.backdrop.top,o.backdrop.width,o.backdrop.height)),Ap(t,u,0,o.textOffset,s,o)}n&&Np(t)}}},{key:"drawTitle",value:function(){var e=this.ctx,t=this.options,n=t.position,r=t.title,a=t.reverse;if(r.display){var i=jp(r.font),o=Vp(r.padding),s=r.align,u=i.lineHeight/2;"bottom"===n||"center"===n||_f(n)?(u+=o.bottom,Sf(r.text)&&(u+=i.lineHeight*(r.text.length-1))):u+=o.top;var c=function(e,t,n,r){var a,i,o,s=e.top,u=e.left,c=e.bottom,l=e.right,f=e.chart,h=f.chartArea,p=f.scales,d=0,m=c-s,v=l-u;if(e.isHorizontal()){if(i=Sh(r,u,l),_f(n)){var g=Object.keys(n)[0],y=n[g];o=p[g].getPixelForValue(y)+m-t}else o="center"===n?(h.bottom+h.top)/2+m-t:Im(e,n,t);a=l-u}else{if(_f(n)){var b=Object.keys(n)[0],x=n[b];i=p[b].getPixelForValue(x)-v+t}else i="center"===n?(h.left+h.right)/2-v+t:Im(e,n,t);o=Sh(r,c,s),d="left"===n?-Xf:Xf}return{titleX:i,titleY:o,maxWidth:a,rotation:d}}(this,u,n,s),l=c.titleX,f=c.titleY,h=c.maxWidth,p=c.rotation;Ap(e,r.text,0,0,i,{color:r.color,maxWidth:h,rotation:p,textAlign:Rm(s,n,a),textBaseline:"middle",translation:[l,f]})}}},{key:"draw",value:function(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}},{key:"_layers",value:function(){var e=this,t=this.options,r=t.ticks&&t.ticks.z||0,a=Nf(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===n.prototype.draw?[{z:a,draw:function(t){e.drawBackground(),e.drawGrid(t),e.drawTitle()}},{z:a+1,draw:function(){e.drawBorder()}},{z:r,draw:function(t){e.drawLabels(t)}}]:[{z:r,draw:function(t){e.draw(t)}}]}},{key:"getMatchingVisibleMetas",value:function(e){var t,n,r=this.chart.getSortedVisibleDatasetMetas(),a=this.axis+"AxisID",i=[];for(t=0,n=r.length;t<n;++t){var o=r[t];o[a]!==this.id||e&&o.type!==e||i.push(o)}return i}},{key:"_resolveTickFontOptions",value:function(e){return jp(this.options.ticks.setContext(this.getContext(e)).font)}},{key:"_maxDigits",value:function(){var e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}]),n}(wm),Mm=function(){function e(t,n,r){N(this,e),this.type=t,this.scope=n,this.override=r,this.items=Object.create(null)}return(0,C.Z)(e,[{key:"isForType",value:function(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}},{key:"register",value:function(e){var t,n=Object.getPrototypeOf(e);(function(e){return"id"in e&&"defaults"in e})(n)&&(t=this.register(n));var r=this.items,a=e.id,i=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in r||(r[a]=e,function(e,t,n){var r=Ff(Object.create(null),[n?yp.get(n):{},yp.get(t),e.defaults]);yp.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((function(n){var r=n.split("."),a=r.pop(),i=[e].concat(r).join("."),o=t[n].split("."),s=o.pop(),u=o.join(".");yp.route(i,a,u,s)}))}(t,e.defaultRoutes);e.descriptors&&yp.describe(t,e.descriptors)}(e,i,t),this.override&&yp.override(e.id,e.overrides)),i}},{key:"get",value:function(e){return this.items[e]}},{key:"unregister",value:function(e){var t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in yp[r]&&(delete yp[r][n],this.override&&delete pp[n])}}]),e}();var Dm=function(){function e(){N(this,e),this.controllers=new Mm(im,"datasets",!0),this.elements=new Mm(wm,"elements"),this.plugins=new Mm(Object,"plugins"),this.scales=new Mm(Om,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}return(0,C.Z)(e,[{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}},{key:"remove",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}},{key:"addControllers",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}},{key:"addElements",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}},{key:"addPlugins",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}},{key:"addScales",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}},{key:"getController",value:function(e){return this._get(e,this.controllers,"controller")}},{key:"getElement",value:function(e){return this._get(e,this.elements,"element")}},{key:"getPlugin",value:function(e){return this._get(e,this.plugins,"plugin")}},{key:"getScale",value:function(e){return this._get(e,this.scales,"scale")}},{key:"removeControllers",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}},{key:"removeElements",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}},{key:"removePlugins",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}},{key:"removeScales",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}},{key:"_each",value:function(e,t,n){var r=this;(0,I.Z)(t).forEach((function(t){var a=n||r._getRegistryForType(t);n||a.isForType(t)||a===r.plugins&&t.id?r._exec(e,a,t):Af(t,(function(t){var a=n||r._getRegistryForType(t);r._exec(e,a,t)}))}))}},{key:"_exec",value:function(e,t,n){var r=Wf(e);Ef(n["before"+r],[],n),t[e](n),Ef(n["after"+r],[],n)}},{key:"_getRegistryForType",value:function(e){for(var t=0;t<this._typedRegistries.length;t++){var n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}},{key:"_get",value:function(e,t,n){var r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}]),e}(),Fm=new Dm,Pm=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"update",value:function(e){var t=this._cachedMeta,n=t.data,r=void 0===n?[]:n,a=this.chart._animationsDisabled,i=_h(t,r,a),o=i.start,s=i.count;if(this._drawStart=o,this._drawCount=s,Th(t)&&(o=0,s=r.length),this.options.showLine){var u=t.dataset,c=t._dataset;u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!c._decimated,u.points=r;var l=this.resolveDatasetElementOptions(e);l.segment=this.options.segment,this.updateElement(u,void 0,{animated:!a,options:l},e)}this.updateElements(r,o,s,e)}},{key:"addElements",value:function(){var e=this.options.showLine;!this.datasetElementType&&e&&(this.datasetElementType=Fm.getElement("line")),bf(R(n.prototype),"addElements",this).call(this)}},{key:"updateElements",value:function(e,t,n,r){for(var a="reset"===r,i=this._cachedMeta,o=i.iScale,s=i.vScale,u=i._stacked,c=i._dataset,l=this.resolveDataElementOptions(t,r),f=this.getSharedOptions(l),h=this.includeOptions(r,f),p=o.axis,d=s.axis,m=this.options,v=m.spanGaps,g=m.segment,y=th(v)?v:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||a||"none"===r,x=t>0&&this.getParsed(t-1),w=t;w<t+n;++w){var k=e[w],S=this.getParsed(w),_=b?k:{},T=kf(S[d]),I=_[p]=o.getPixelForValue(S[p],w),N=_[d]=a||T?s.getBasePixel():s.getPixelForValue(u?this.applyStack(s,S,u):S[d],w);_.skip=isNaN(I)||isNaN(N)||T,_.stop=w>0&&Math.abs(S[p]-x[p])>y,g&&(_.parsed=S,_.raw=c.data[w]),h&&(_.options=f||this.resolveDataElementOptions(w,k.active?"active":r)),b||this.updateElement(k,w,_,r),x=S}this.updateSharedOptions(f,r,l)}},{key:"getMaxOverflow",value:function(){var e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){for(var n=0,r=t.length-1;r>=0;--r)n=Math.max(n,t[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}var a=e.dataset,i=a.options&&a.options.borderWidth||0;if(!t.length)return i;var o=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,o,s)/2}}]),n}(im);Pm.id="scatter",Pm.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},Pm.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:function(){return""},label:function(e){return"("+e.label+", "+e.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};function Lm(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var zm=function(){function e(t){N(this,e),this.options=t||{}}return(0,C.Z)(e,[{key:"init",value:function(e){}},{key:"formats",value:function(){return Lm()}},{key:"parse",value:function(e,t){return Lm()}},{key:"format",value:function(e,t){return Lm()}},{key:"add",value:function(e,t,n){return Lm()}},{key:"diff",value:function(e,t,n){return Lm()}},{key:"startOf",value:function(e,t,n){return Lm()}},{key:"endOf",value:function(e,t){return Lm()}}]),e}();zm.override=function(e){Object.assign(zm.prototype,e)};var Bm={_date:zm};function Wm(e,t,n,r){var a=e.controller,i=e.data,o=e._sorted,s=a._cachedMeta.iScale;if(s&&t===s.axis&&"r"!==t&&o&&i.length){var u=s._reversePixels?vh:mh;if(!r)return u(i,t,n);if(a._sharedOptions){var c=i[0],l="function"===typeof c.getRange&&c.getRange(t);if(l){var f=u(i,t,n-l),h=u(i,t,n+l);return{lo:f.lo,hi:h.hi}}}}return{lo:0,hi:i.length-1}}function Vm(e,t,n,r,a){for(var i=e.getSortedVisibleDatasetMetas(),o=n[t],s=0,u=i.length;s<u;++s)for(var c=i[s],l=c.index,f=c.data,h=Wm(i[s],t,o,a),p=h.lo,d=h.hi,m=p;m<=d;++m){var v=f[m];v.skip||r(v,l,m)}}function jm(e,t,n,r,a){var i=[];if(!a&&!e.isPointInArea(t))return i;return Vm(e,n,t,(function(n,o,s){(a||Tp(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&i.push({element:n,datasetIndex:o,index:s})}),!0),i}function Um(e,t,n,r,a,i){var o=[],s=function(e){var t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){var a=t?Math.abs(e.x-r.x):0,i=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(i,2))}}(n),u=Number.POSITIVE_INFINITY;return Vm(e,n,t,(function(n,c,l){var f=n.inRange(t.x,t.y,a);if(!r||f){var h=n.getCenterPoint(a);if(!!i||e.isPointInArea(h)||f){var p=s(t,h);p<u?(o=[{element:n,datasetIndex:c,index:l}],u=p):p===u&&o.push({element:n,datasetIndex:c,index:l})}}})),o}function Hm(e,t,n,r,a,i){return i||e.isPointInArea(t)?"r"!==n||r?Um(e,t,n,r,a,i):function(e,t,n,r){var a=[];return Vm(e,n,t,(function(e,n,i){var o=e.getProps(["startAngle","endAngle"],r),s=o.startAngle,u=o.endAngle;fh(sh(e,{x:t.x,y:t.y}).angle,s,u)&&a.push({element:e,datasetIndex:n,index:i})})),a}(e,t,n,a):[]}function Zm(e,t,n,r,a){var i=[],o="x"===n?"inXRange":"inYRange",s=!1;return Vm(e,n,t,(function(e,r,u){e[o](t[n],a)&&(i.push({element:e,datasetIndex:r,index:u}),s=s||e.inRange(t.x,t.y,a))})),r&&!s?[]:i}var Gm={evaluateInteractionItems:Vm,modes:{index:function(e,t,n,r){var a=xd(t,e),i=n.axis||"x",o=n.includeInvisible||!1,s=n.intersect?jm(e,a,i,r,o):Hm(e,a,i,!1,r,o),u=[];return s.length?(e.getSortedVisibleDatasetMetas().forEach((function(e){var t=s[0].index,n=e.data[t];n&&!n.skip&&u.push({element:n,datasetIndex:e.index,index:t})})),u):[]},dataset:function(e,t,n,r){var a=xd(t,e),i=n.axis||"xy",o=n.includeInvisible||!1,s=n.intersect?jm(e,a,i,r,o):Hm(e,a,i,!1,r,o);if(s.length>0){var u=s[0].datasetIndex,c=e.getDatasetMeta(u).data;s=[];for(var l=0;l<c.length;++l)s.push({element:c[l],datasetIndex:u,index:l})}return s},point:function(e,t,n,r){return jm(e,xd(t,e),n.axis||"xy",r,n.includeInvisible||!1)},nearest:function(e,t,n,r){var a=xd(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;return Hm(e,a,i,n.intersect,r,o)},x:function(e,t,n,r){return Zm(e,xd(t,e),"x",n.intersect,r)},y:function(e,t,n,r){return Zm(e,xd(t,e),"y",n.intersect,r)}}},qm=["left","top","right","bottom"];function Km(e,t){return e.filter((function(e){return e.pos===t}))}function Xm(e,t){return e.filter((function(e){return-1===qm.indexOf(e.pos)&&e.box.axis===t}))}function Ym(e,t){return e.sort((function(e,n){var r=t?n:e,a=t?e:n;return r.weight===a.weight?r.index-a.index:r.weight-a.weight}))}function $m(e,t){var n,r,a,i=function(e){var t,n={},r=Oo(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=a.stack,o=a.pos,s=a.stackWeight;if(i&&qm.includes(o)){var u=n[i]||(n[i]={count:0,placed:0,weight:0,size:0});u.count++,u.weight+=s}}}catch(c){r.e(c)}finally{r.f()}return n}(e),o=t.vBoxMaxWidth,s=t.hBoxMaxHeight;for(n=0,r=e.length;n<r;++n){var u=(a=e[n]).box.fullSize,c=i[a.stack],l=c&&a.stackWeight/c.weight;a.horizontal?(a.width=l?l*o:u&&t.availableWidth,a.height=s):(a.width=o,a.height=l?l*s:u&&t.availableHeight)}return i}function Qm(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function Jm(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function ev(e,t,n,r){var a=n.pos,i=n.box,o=e.maxPadding;if(!_f(a)){n.size&&(e[a]-=n.size);var s=r[n.stack]||{size:0,count:1};s.size=Math.max(s.size,n.horizontal?i.height:i.width),n.size=s.size/s.count,e[a]+=n.size}i.getPadding&&Jm(o,i.getPadding());var u=Math.max(0,t.outerWidth-Qm(o,e,"left","right")),c=Math.max(0,t.outerHeight-Qm(o,e,"top","bottom")),l=u!==e.w,f=c!==e.h;return e.w=u,e.h=c,n.horizontal?{same:l,other:f}:{same:f,other:l}}function tv(e,t){var n=t.maxPadding;function r(e){var r={left:0,top:0,right:0,bottom:0};return e.forEach((function(e){r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function nv(e,t,n,r){var a,i,o,s,u,c,l=[];for(a=0,i=e.length,u=0;a<i;++a){(s=(o=e[a]).box).update(o.width||t.w,o.height||t.h,tv(o.horizontal,t));var f=ev(t,n,o,r),h=f.same,p=f.other;u|=h&&l.length,c=c||p,s.fullSize||l.push(o)}return u&&nv(l,t,n,r)||c}function rv(e,t,n,r,a){e.top=n,e.left=t,e.right=t+r,e.bottom=n+a,e.width=r,e.height=a}function av(e,t,n,r){var a,i=n.padding,o=t.x,s=t.y,u=Oo(e);try{for(u.s();!(a=u.n()).done;){var c=a.value,l=c.box,f=r[c.stack]||{count:1,placed:0,weight:1},h=c.stackWeight/f.weight||1;if(c.horizontal){var p=t.w*h,d=f.size||l.height;Vf(f.start)&&(s=f.start),l.fullSize?rv(l,i.left,s,n.outerWidth-i.right-i.left,d):rv(l,t.left+f.placed,s,p,d),f.start=s,f.placed+=p,s=l.bottom}else{var m=t.h*h,v=f.size||l.width;Vf(f.start)&&(o=f.start),l.fullSize?rv(l,o,i.top,v,n.outerHeight-i.bottom-i.top):rv(l,o,t.top+f.placed,v,m),f.start=o,f.placed+=m,o=l.right}}}catch(g){u.e(g)}finally{u.f()}t.x=o,t.y=s}yp.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var iv=function(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(e){t.draw(e)}}]},e.boxes.push(t)},ov=function(e,t){var n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},sv=function(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},uv=function(e,t,n,r){if(e){var a=Vp(e.options.layout.padding),i=Math.max(t-a.width,0),o=Math.max(n-a.height,0),s=function(e){var t=function(e){var t,n,r,a,i,o,s=[];for(t=0,n=(e||[]).length;t<n;++t){var u=r=e[t];a=u.position;var c=u.options;i=c.stack;var l=c.stackWeight;o=void 0===l?1:l,s.push({index:t,box:r,pos:a,horizontal:r.isHorizontal(),weight:r.weight,stack:i&&a+i,stackWeight:o})}return s}(e),n=Ym(t.filter((function(e){return e.box.fullSize})),!0),r=Ym(Km(t,"left"),!0),a=Ym(Km(t,"right")),i=Ym(Km(t,"top"),!0),o=Ym(Km(t,"bottom")),s=Xm(t,"x"),u=Xm(t,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:a.concat(u).concat(o).concat(s),chartArea:Km(t,"chartArea"),vertical:r.concat(a).concat(u),horizontal:i.concat(o).concat(s)}}(e.boxes),u=s.vertical,c=s.horizontal;Af(e.boxes,(function(e){"function"===typeof e.beforeLayout&&e.beforeLayout()}));var l=u.reduce((function(e,t){return t.box.options&&!1===t.box.options.display?e:e+1}),0)||1,f=Object.freeze({outerWidth:t,outerHeight:n,padding:a,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/l,hBoxMaxHeight:o/2}),h=Object.assign({},a);Jm(h,Vp(r));var p=Object.assign({maxPadding:h,w:i,h:o,x:a.left,y:a.top},a),d=$m(u.concat(c),f);nv(s.fullSize,p,f,d),nv(u,p,f,d),nv(c,p,f,d)&&nv(u,p,f,d),function(e){var t=e.maxPadding;function n(n){var r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(p),av(s.leftAndTop,p,f,d),p.x+=p.w,p.y+=p.h,av(s.rightAndBottom,p,f,d),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Af(s.chartArea,(function(t){var n=t.box;Object.assign(n,e.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})}))}},cv=function(){function e(){N(this,e)}return(0,C.Z)(e,[{key:"acquireContext",value:function(e,t){}},{key:"releaseContext",value:function(e){return!1}},{key:"addEventListener",value:function(e,t,n){}},{key:"removeEventListener",value:function(e,t,n){}},{key:"getDevicePixelRatio",value:function(){return 1}},{key:"getMaximumSize",value:function(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}},{key:"isAttached",value:function(e){return!0}},{key:"updateConfig",value:function(e){}}]),e}(),lv=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"acquireContext",value:function(e){return e&&e.getContext&&e.getContext("2d")||null}},{key:"updateConfig",value:function(e){e.options.animation=!1}}]),n}(cv),fv={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hv=function(e){return null===e||""===e};var pv=!!_d&&{passive:!0};function dv(e,t,n){e.canvas.removeEventListener(t,n,pv)}function mv(e,t){var n,r=Oo(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a===t||a.contains(t))return!0}}catch(i){r.e(i)}finally{r.f()}}function vv(e,t,n){var r=e.canvas,a=new MutationObserver((function(e){var t,a=!1,i=Oo(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;a=(a=a||mv(o.addedNodes,r))&&!mv(o.removedNodes,r)}}catch(s){i.e(s)}finally{i.f()}a&&n()}));return a.observe(document,{childList:!0,subtree:!0}),a}function gv(e,t,n){var r=e.canvas,a=new MutationObserver((function(e){var t,a=!1,i=Oo(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;a=(a=a||mv(o.removedNodes,r))&&!mv(o.addedNodes,r)}}catch(s){i.e(s)}finally{i.f()}a&&n()}));return a.observe(document,{childList:!0,subtree:!0}),a}var yv=new Map,bv=0;function xv(){var e=window.devicePixelRatio;e!==bv&&(bv=e,yv.forEach((function(t,n){n.currentDevicePixelRatio!==e&&t()})))}function wv(e,t,n){var r=e.canvas,a=r&&md(r);if(a){var i=wh((function(e,t){var r=a.clientWidth;n(e,t),r<a.clientWidth&&n()}),window),o=new ResizeObserver((function(e){var t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||i(n,r)}));return o.observe(a),function(e,t){yv.size||window.addEventListener("resize",xv),yv.set(e,t)}(e,i),o}}function kv(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){yv.delete(e),yv.size||window.removeEventListener("resize",xv)}(e)}function Sv(e,t,n){var r=e.canvas,a=wh((function(t){null!==e.ctx&&n(function(e,t){var n=fv[e.type]||e.type,r=xd(e,t),a=r.x,i=r.y;return{type:n,chart:t,native:e,x:void 0!==a?a:null,y:void 0!==i?i:null}}(t,e))}),e,(function(e){var t=e[0];return[t,t.offsetX,t.offsetY]}));return function(e,t,n){e.addEventListener(t,n,pv)}(r,t,a),a}var _v=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"acquireContext",value:function(e,t){var n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){var n=e.style,r=e.getAttribute("height"),a=e.getAttribute("width");if(e.$chartjs={initial:{height:r,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",hv(a)){var i=Td(e,"width");void 0!==i&&(e.width=i)}if(hv(r))if(""===e.style.height)e.height=e.width/(t||2);else{var o=Td(e,"height");void 0!==o&&(e.height=o)}}(e,t),n):null}},{key:"releaseContext",value:function(e){var t=e.canvas;if(!t.$chartjs)return!1;var n=t.$chartjs.initial;["height","width"].forEach((function(e){var r=n[e];kf(r)?t.removeAttribute(e):t.setAttribute(e,r)}));var r=n.style||{};return Object.keys(r).forEach((function(e){t.style[e]=r[e]})),t.width=t.width,delete t.$chartjs,!0}},{key:"addEventListener",value:function(e,t,n){this.removeEventListener(e,t);var r=e.$proxies||(e.$proxies={}),a={attach:vv,detach:gv,resize:wv}[t]||Sv;r[t]=a(e,t,n)}},{key:"removeEventListener",value:function(e,t){var n=e.$proxies||(e.$proxies={}),r=n[t];r&&(({attach:kv,detach:kv,resize:kv}[t]||dv)(e,t,r),n[t]=void 0)}},{key:"getDevicePixelRatio",value:function(){return window.devicePixelRatio}},{key:"getMaximumSize",value:function(e,t,n,r){return kd(e,t,n,r)}},{key:"isAttached",value:function(e){var t=md(e);return!(!t||!t.isConnected)}}]),n}(cv);var Tv=function(){function e(){N(this,e),this._init=[]}return(0,C.Z)(e,[{key:"notify",value:function(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));var a=r?this._descriptors(e).filter(r):this._descriptors(e),i=this._notify(a,e,t,n);return"afterDestroy"===t&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),i}},{key:"_notify",value:function(e,t,n,r){r=r||{};var a,i=Oo(e);try{for(i.s();!(a=i.n()).done;){var o=a.value,s=o.plugin;if(!1===Ef(s[n],[t,r,o.options],s)&&r.cancelable)return!1}}catch(u){i.e(u)}finally{i.f()}return!0}},{key:"invalidate",value:function(){kf(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}},{key:"_descriptors",value:function(e){if(this._cache)return this._cache;var t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}},{key:"_createDescriptors",value:function(e,t){var n=e&&e.config,r=Nf(n.options&&n.options.plugins,{}),a=function(e){for(var t={},n=[],r=Object.keys(Fm.plugins.items),a=0;a<r.length;a++)n.push(Fm.getPlugin(r[a]));for(var i=e.plugins||[],o=0;o<i.length;o++){var s=i[o];-1===n.indexOf(s)&&(n.push(s),t[s.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){var a,i=t.plugins,o=t.localIds,s=[],u=e.getContext(),c=Oo(i);try{for(c.s();!(a=c.n()).done;){var l=a.value,f=l.id,h=Iv(n[f],r);null!==h&&s.push({plugin:l,options:Nv(e.config,{plugin:l,local:o[f]},h,u)})}}catch(p){c.e(p)}finally{c.f()}return s}(e,a,r,t):[]}},{key:"_notifyStateChanges",value:function(e){var t=this._oldCache||[],n=this._cache,r=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.plugin.id===t.plugin.id}))}))};this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}]),e}();function Iv(e,t){return t||!1!==e?!0===e?{}:e:null}function Nv(e,t,n,r){var a=t.plugin,i=t.local,o=e.pluginScopeKeys(a),s=e.getOptionScopes(n,o);return i&&a.defaults&&s.push(a.defaults),e.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Cv(e,t){var n=yp.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Ev(e,t){return"x"===e||"y"===e?e:t.axis||("top"===(n=t.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||e.charAt(0).toLowerCase();var n}function Av(e){var t=e.options||(e.options={});t.plugins=Nf(t.plugins,{}),t.scales=function(e,t){var n=pp[e.type]||{scales:{}},r=t.scales||{},a=Cv(e.type,t),i=Object.create(null),o=Object.create(null);return Object.keys(r).forEach((function(e){var t=r[e];if(!_f(t))return console.error("Invalid scale configuration for scale: ".concat(e));if(t._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(e));var s=Ev(e,t),u=function(e,t){return e===t?"_index_":"_value_"}(s,a),c=n.scales||{};i[s]=i[s]||e,o[e]=Pf(Object.create(null),[{axis:s},t,c[s],c[u]])})),e.data.datasets.forEach((function(n){var a=n.type||e.type,s=n.indexAxis||Cv(a,t),u=(pp[a]||{}).scales||{};Object.keys(u).forEach((function(e){var t=function(e,t){var n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,s),a=n[t+"AxisID"]||i[t]||t;o[a]=o[a]||Object.create(null),Pf(o[a],[{axis:t},r[a],u[e]])}))})),Object.keys(o).forEach((function(e){var t=o[e];Pf(t,[yp.scales[t.type],yp.scale])})),o}(e,t)}function Rv(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}var Ov=new Map,Mv=new Set;function Dv(e,t){var n=Ov.get(e);return n||(n=t(),Ov.set(e,n),Mv.add(n)),n}var Fv=function(e,t,n){var r=Bf(t,n);void 0!==r&&e.add(r)},Pv=function(){function e(t){N(this,e),this._config=function(e){return(e=e||{}).data=Rv(e.data),Av(e),e}(t),this._scopeCache=new Map,this._resolverCache=new Map}return(0,C.Z)(e,[{key:"platform",get:function(){return this._config.platform}},{key:"type",get:function(){return this._config.type},set:function(e){this._config.type=e}},{key:"data",get:function(){return this._config.data},set:function(e){this._config.data=Rv(e)}},{key:"options",get:function(){return this._config.options},set:function(e){this._config.options=e}},{key:"plugins",get:function(){return this._config.plugins}},{key:"update",value:function(){var e=this._config;this.clearCache(),Av(e)}},{key:"clearCache",value:function(){this._scopeCache.clear(),this._resolverCache.clear()}},{key:"datasetScopeKeys",value:function(e){return Dv(e,(function(){return[["datasets.".concat(e),""]]}))}},{key:"datasetAnimationScopeKeys",value:function(e,t){return Dv("".concat(e,".transition.").concat(t),(function(){return[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]}))}},{key:"datasetElementScopeKeys",value:function(e,t){return Dv("".concat(e,"-").concat(t),(function(){return[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]}))}},{key:"pluginScopeKeys",value:function(e){var t=e.id,n=this.type;return Dv("".concat(n,"-plugin-").concat(t),(function(){return[["plugins.".concat(t)].concat((0,I.Z)(e.additionalOptionScopes||[]))]}))}},{key:"_cachedScopes",value:function(e,t){var n=this._scopeCache,r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}},{key:"getOptionScopes",value:function(e,t,n){var r=this.options,a=this.type,i=this._cachedScopes(e,n),o=i.get(t);if(o)return o;var s=new Set;t.forEach((function(t){e&&(s.add(e),t.forEach((function(t){return Fv(s,e,t)}))),t.forEach((function(e){return Fv(s,r,e)})),t.forEach((function(e){return Fv(s,pp[a]||{},e)})),t.forEach((function(e){return Fv(s,yp,e)})),t.forEach((function(e){return Fv(s,dp,e)}))}));var u=Array.from(s);return 0===u.length&&u.push(Object.create(null)),Mv.has(t)&&i.set(t,u),u}},{key:"chartOptionScopes",value:function(){var e=this.options,t=this.type;return[e,pp[t]||{},yp.datasets[t]||{},{type:t},yp,dp]}},{key:"resolveNamedOptions",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""],a={$shared:!0},i=Lv(this._resolverCache,e,r),o=i.resolver,s=i.subPrefixes,u=o;if(Bv(o,t)){a.$shared=!1,n=jf(n)?n():n;var c=this.createResolver(e,n,s);u=Gp(o,n,c)}var l,f=Oo(t);try{for(f.s();!(l=f.n()).done;){var h=l.value;a[h]=u[h]}}catch(p){f.e(p)}finally{f.f()}return a}},{key:"createResolver",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0,a=Lv(this._resolverCache,e,n),i=a.resolver;return _f(t)?Gp(i,t,void 0,r):i}}]),e}();function Lv(e,t,n){var r=e.get(t);r||(r=new Map,e.set(t,r));var a=n.join(),i=r.get(a);i||(i={resolver:Zp(t,n),subPrefixes:n.filter((function(e){return!e.toLowerCase().includes("hover")}))},r.set(a,i));return i}var zv=function(e){return _f(e)&&Object.getOwnPropertyNames(e).reduce((function(t,n){return t||jf(e[n])}),!1)};function Bv(e,t){var n,r=qp(e),a=r.isScriptable,i=r.isIndexable,o=Oo(t);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=a(s),c=i(s),l=(c||u)&&e[s];if(u&&(jf(l)||zv(l))||c&&Sf(l))return!0}}catch(f){o.e(f)}finally{o.f()}return!1}var Wv=["top","bottom","left","right","chartArea"];function Vv(e,t){return"top"===e||"bottom"===e||-1===Wv.indexOf(e)&&"x"===t}function jv(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function Uv(e){var t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Ef(n&&n.onComplete,[e],t)}function Hv(e){var t=e.chart,n=t.options.animation;Ef(n&&n.onProgress,[e],t)}function Zv(e){return dd()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}var Gv={},qv=function(e){var t=Zv(e);return Object.values(Gv).filter((function(e){return e.canvas===t})).pop()};function Kv(e,t,n){for(var r=0,a=Object.keys(e);r<a.length;r++){var i=a[r],o=+i;if(o>=t){var s=e[i];delete e[i],(n>0||o>t)&&(e[o+n]=s)}}}var Xv=function(){function e(t,n){var r=this;N(this,e);var a=this.config=new Pv(n),i=Zv(t),o=qv(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");var s=a.createResolver(a.chartOptionScopes(),this.getContext());this.platform=new(a.platform||function(e){return!dd()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?lv:_v}(i)),this.platform.updateConfig(a);var u=this.platform.acquireContext(i,s.aspectRatio),c=u&&u.canvas,l=c&&c.height,f=c&&c.width;this.id=wf(),this.ctx=u,this.canvas=c,this.width=f,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Tv,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){var n;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t?(clearTimeout(n),n=setTimeout(e,t,a)):e.apply(this,a),t}}((function(e){return r.update(e)}),s.resizeDelay||0),this._dataChanges=[],Gv[this.id]=this,u&&c?(jd.listen(this,"complete",Uv),jd.listen(this,"progress",Hv),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}return(0,C.Z)(e,[{key:"aspectRatio",get:function(){var e=this.options,t=e.aspectRatio,n=e.maintainAspectRatio,r=this.width,a=this.height,i=this._aspectRatio;return kf(t)?n&&i?i:a?r/a:null:t}},{key:"data",get:function(){return this.config.data},set:function(e){this.config.data=e}},{key:"options",get:function(){return this._options},set:function(e){this.config.options=e}},{key:"_initialize",value:function(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Sd(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}},{key:"clear",value:function(){return kp(this.canvas,this.ctx),this}},{key:"stop",value:function(){return jd.stop(this),this}},{key:"resize",value:function(e,t){jd.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}},{key:"_resize",value:function(e,t){var n=this.options,r=this.canvas,a=n.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(r,e,t,a),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,Sd(this,o,!0)&&(this.notifyPlugins("resize",{size:i}),Ef(n.onResize,[this,i],this),this.attached&&this._doResize(s)&&this.render())}},{key:"ensureScalesHaveIDs",value:function(){Af(this.options.scales||{},(function(e,t){e.id=t}))}},{key:"buildOrUpdateScales",value:function(){var e=this,t=this.options,n=t.scales,r=this.scales,a=Object.keys(r).reduce((function(e,t){return e[t]=!1,e}),{}),i=[];n&&(i=i.concat(Object.keys(n).map((function(e){var t=n[e],r=Ev(e,t),a="r"===r,i="x"===r;return{options:t,dposition:a?"chartArea":i?"bottom":"left",dtype:a?"radialLinear":i?"category":"linear"}})))),Af(i,(function(n){var i=n.options,o=i.id,s=Ev(o,i),u=Nf(i.type,n.dtype);void 0!==i.position&&Vv(i.position,s)===Vv(n.dposition)||(i.position=n.dposition),a[o]=!0;var c=null;o in r&&r[o].type===u?c=r[o]:(c=new(Fm.getScale(u))({id:o,type:u,ctx:e.ctx,chart:e}),r[c.id]=c);c.init(i,t)})),Af(a,(function(e,t){e||delete r[t]})),Af(r,(function(t){sv(e,t,t.options),iv(e,t)}))}},{key:"_updateMetasets",value:function(){var e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((function(e,t){return e.index-t.index})),n>t){for(var r=t;r<n;++r)this._destroyDatasetMeta(r);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(jv("order","index"))}},{key:"_removeUnreferencedMetasets",value:function(){var e=this,t=this._metasets,n=this.data.datasets;t.length>n.length&&delete this._stacks,t.forEach((function(t,r){0===n.filter((function(e){return e===t._dataset})).length&&e._destroyDatasetMeta(r)}))}},{key:"buildOrUpdateControllers",value:function(){var e,t,n=[],r=this.data.datasets;for(this._removeUnreferencedMetasets(),e=0,t=r.length;e<t;e++){var a=r[e],i=this.getDatasetMeta(e),o=a.type||this.config.type;if(i.type&&i.type!==o&&(this._destroyDatasetMeta(e),i=this.getDatasetMeta(e)),i.type=o,i.indexAxis=a.indexAxis||Cv(o,this.options),i.order=a.order||0,i.index=e,i.label=""+a.label,i.visible=this.isDatasetVisible(e),i.controller)i.controller.updateIndex(e),i.controller.linkScales();else{var s=Fm.getController(o),u=yp.datasets[o],c=u.datasetElementType,l=u.dataElementType;Object.assign(s.prototype,{dataElementType:Fm.getElement(l),datasetElementType:c&&Fm.getElement(c)}),i.controller=new s(this,e),n.push(i.controller)}}return this._updateMetasets(),n}},{key:"_resetElements",value:function(){var e=this;Af(this.data.datasets,(function(t,n){e.getDatasetMeta(n).controller.reset()}),this)}},{key:"reset",value:function(){this._resetElements(),this.notifyPlugins("reset")}},{key:"update",value:function(e){var t=this.config;t.update();var n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1!==this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})){var a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");for(var i=0,o=0,s=this.data.datasets.length;o<s;o++){var u=this.getDatasetMeta(o).controller,c=!r&&-1===a.indexOf(u);u.buildOrUpdateElements(c),i=Math.max(+u.getMaxOverflow(),i)}i=this._minPadding=n.layout.autoPadding?i:0,this._updateLayout(i),r||Af(a,(function(e){e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(jv("z","_idx"));var l=this._active,f=this._lastEvent;f?this._eventHandler(f,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}}},{key:"_updateScales",value:function(){var e=this;Af(this.scales,(function(t){ov(e,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}},{key:"_checkEventBindings",value:function(){var e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Uf(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}},{key:"_updateHiddenIndices",value:function(){var e,t=this._hiddenIndices,n=Oo(this._getUniformDataChanges()||[]);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=r.method,i=r.start,o=r.count;Kv(t,i,"_removeElements"===a?-o:o)}}catch(s){n.e(s)}finally{n.f()}}},{key:"_getUniformDataChanges",value:function(){var e=this._dataChanges;if(e&&e.length){this._dataChanges=[];for(var t=this.data.datasets.length,n=function(t){return new Set(e.filter((function(e){return e[0]===t})).map((function(e,t){return t+","+e.splice(1).join(",")})))},r=n(0),a=1;a<t;a++)if(!Uf(r,n(a)))return;return Array.from(r).map((function(e){return e.split(",")})).map((function(e){return{method:e[1],start:+e[2],count:+e[3]}}))}}},{key:"_updateLayout",value:function(e){var t=this;if(!1!==this.notifyPlugins("beforeLayout",{cancelable:!0})){uv(this,this.width,this.height,e);var n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Af(this.boxes,(function(e){var n;r&&"chartArea"===e.position||(e.configure&&e.configure(),(n=t._layers).push.apply(n,(0,I.Z)(e._layers())))}),this),this._layers.forEach((function(e,t){e._idx=t})),this.notifyPlugins("afterLayout")}}},{key:"_updateDatasets",value:function(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(var t=0,n=this.data.datasets.length;t<n;++t)this.getDatasetMeta(t).controller.configure();for(var r=0,a=this.data.datasets.length;r<a;++r)this._updateDataset(r,jf(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}},{key:"_updateDataset",value:function(e,t){var n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}},{key:"render",value:function(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(jd.has(this)?this.attached&&!jd.running(this)&&jd.start(this):(this.draw(),Uv({chart:this})))}},{key:"draw",value:function(){var e;if(this._resizeBeforeDraw){var t=this._resizeBeforeDraw,n=t.width,r=t.height;this._resize(n,r),this._resizeBeforeDraw=null}if(this.clear(),!(this.width<=0||this.height<=0)&&!1!==this.notifyPlugins("beforeDraw",{cancelable:!0})){var a=this._layers;for(e=0;e<a.length&&a[e].z<=0;++e)a[e].draw(this.chartArea);for(this._drawDatasets();e<a.length;++e)a[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}}},{key:"_getSortedDatasetMetas",value:function(e){var t,n,r=this._sortedMetasets,a=[];for(t=0,n=r.length;t<n;++t){var i=r[t];e&&!i.visible||a.push(i)}return a}},{key:"getSortedVisibleDatasetMetas",value:function(){return this._getSortedDatasetMetas(!0)}},{key:"_drawDatasets",value:function(){if(!1!==this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})){for(var e=this.getSortedVisibleDatasetMetas(),t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}}},{key:"_drawDataset",value:function(e){var t=this.ctx,n=e._clip,r=!n.disabled,a=this.chartArea,i={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",i)&&(r&&Ip(t,{left:!1===n.left?0:a.left-n.left,right:!1===n.right?this.width:a.right+n.right,top:!1===n.top?0:a.top-n.top,bottom:!1===n.bottom?this.height:a.bottom+n.bottom}),e.controller.draw(),r&&Np(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}},{key:"isPointInArea",value:function(e){return Tp(e,this.chartArea,this._minPadding)}},{key:"getElementsAtEventForMode",value:function(e,t,n,r){var a=Gm.modes[t];return"function"===typeof a?a(this,e,n,r):[]}},{key:"getDatasetMeta",value:function(e){var t=this.data.datasets[e],n=this._metasets,r=n.filter((function(e){return e&&e._dataset===t})).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}},{key:"getContext",value:function(){return this.$context||(this.$context=Hp(null,{chart:this,type:"chart"}))}},{key:"getVisibleDatasetCount",value:function(){return this.getSortedVisibleDatasetMetas().length}},{key:"isDatasetVisible",value:function(e){var t=this.data.datasets[e];if(!t)return!1;var n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}},{key:"setDatasetVisibility",value:function(e,t){this.getDatasetMeta(e).hidden=!t}},{key:"toggleDataVisibility",value:function(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}},{key:"getDataVisibility",value:function(e){return!this._hiddenIndices[e]}},{key:"_updateVisibility",value:function(e,t,n){var r=n?"show":"hide",a=this.getDatasetMeta(e),i=a.controller._resolveAnimations(void 0,r);Vf(t)?(a.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),i.update(a,{visible:n}),this.update((function(t){return t.datasetIndex===e?r:void 0})))}},{key:"hide",value:function(e,t){this._updateVisibility(e,t,!1)}},{key:"show",value:function(e,t){this._updateVisibility(e,t,!0)}},{key:"_destroyDatasetMeta",value:function(e){var t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}},{key:"_stop",value:function(){var e,t;for(this.stop(),jd.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}},{key:"destroy",value:function(){this.notifyPlugins("beforeDestroy");var e=this.canvas,t=this.ctx;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),kp(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete Gv[this.id],this.notifyPlugins("afterDestroy")}},{key:"toBase64Image",value:function(){var e;return(e=this.canvas).toDataURL.apply(e,arguments)}},{key:"bindEvents",value:function(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}},{key:"bindUserEvents",value:function(){var e=this,t=this._listeners,n=this.platform,r=function(t,n,r){t.offsetX=n,t.offsetY=r,e._eventHandler(t)};Af(this.options.events,(function(a){return function(r,a){n.addEventListener(e,r,a),t[r]=a}(a,r)}))}},{key:"bindResponsiveEvents",value:function(){var e=this;this._responsiveListeners||(this._responsiveListeners={});var t,n=this._responsiveListeners,r=this.platform,a=function(t,a){r.addEventListener(e,t,a),n[t]=a},i=function(t,a){n[t]&&(r.removeEventListener(e,t,a),delete n[t])},o=function(t,n){e.canvas&&e.resize(t,n)},s=function n(){i("attach",n),e.attached=!0,e.resize(),a("resize",o),a("detach",t)};t=function(){e.attached=!1,i("resize",o),e._stop(),e._resize(0,0),a("attach",s)},r.isAttached(this.canvas)?s():t()}},{key:"unbindEvents",value:function(){var e=this;Af(this._listeners,(function(t,n){e.platform.removeEventListener(e,n,t)})),this._listeners={},Af(this._responsiveListeners,(function(t,n){e.platform.removeEventListener(e,n,t)})),this._responsiveListeners=void 0}},{key:"updateHoverStyle",value:function(e,t,n){var r,a,i,o=n?"set":"remove";for("dataset"===t&&this.getDatasetMeta(e[0].datasetIndex).controller["_"+o+"DatasetHoverStyle"](),a=0,i=e.length;a<i;++a){var s=(r=e[a])&&this.getDatasetMeta(r.datasetIndex).controller;s&&s[o+"HoverStyle"](r.element,r.datasetIndex,r.index)}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(e){var t=this,n=this._active||[],r=e.map((function(e){var n=e.datasetIndex,r=e.index,a=t.getDatasetMeta(n);if(!a)throw new Error("No dataset found at index "+n);return{datasetIndex:n,element:a.data[r],index:r}}));!Rf(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}},{key:"notifyPlugins",value:function(e,t,n){return this._plugins.notify(this,e,t,n)}},{key:"_updateHoverStyles",value:function(e,t,n){var r=this.options.hover,a=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.datasetIndex===t.datasetIndex&&e.index===t.index}))}))},i=a(t,e),o=n?e:a(e,t);i.length&&this.updateHoverStyle(i,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}},{key:"_eventHandler",value:function(e,t){var n=this,r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},a=function(t){return(t.options.events||n.options.events).includes(e.native.type)};if(!1!==this.notifyPlugins("beforeEvent",r,a)){var i=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,a),(i||r.changed)&&this.render(),this}}},{key:"_handleEvent",value:function(e,t,n){var r=this._active,a=void 0===r?[]:r,i=this.options,o=t,s=this._getActiveElements(e,a,n,o),u=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),c=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,u);n&&(this._lastEvent=null,Ef(i.onHover,[e,s,this],this),u&&Ef(i.onClick,[e,s,this],this));var l=!Rf(s,a);return(l||t)&&(this._active=s,this._updateHoverStyles(s,a,t)),this._lastEvent=c,l}},{key:"_getActiveElements",value:function(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;var a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,r)}}]),e}(),Yv=function(){return Af(Xv.instances,(function(e){return e._plugins.invalidate()}))},$v=!0;function Qv(e,t,n){var r=t.startAngle,a=t.pixelMargin,i=t.x,o=t.y,s=t.outerRadius,u=t.innerRadius,c=a/s;e.beginPath(),e.arc(i,o,s,r-c,n+c),u>a?(c=a/u,e.arc(i,o,u,n+c,r-c,!0)):e.arc(i,o,a,n+Xf,r-Xf),e.closePath(),e.clip()}function Jv(e,t,n,r){var a=function(e){return zp(e,["outerStart","outerEnd","innerStart","innerEnd"])}(e.options.borderRadius),i=(n-t)/2,o=Math.min(i,r*t/2),s=function(e){var t=(n-Math.min(i,e))*r/2;return hh(e,0,Math.min(i,t))};return{outerStart:s(a.outerStart),outerEnd:s(a.outerEnd),innerStart:hh(a.innerStart,0,o),innerEnd:hh(a.innerEnd,0,o)}}function eg(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function tg(e,t,n,r,a,i){var o=t.x,s=t.y,u=t.startAngle,c=t.pixelMargin,l=t.innerRadius,f=Math.max(t.outerRadius+r+n-c,0),h=l>0?l+r+n+c:0,p=0,d=a-u;if(r){var m=((l>0?l-r:0)+(f>0?f-r:0))/2;p=(d-(0!==m?d*m/(m+r):d))/2}var v=(d-Math.max(.001,d*f-n/Hf)/f)/2,g=u+v+p,y=a-v-p,b=Jv(t,h,f,y-g),x=b.outerStart,w=b.outerEnd,k=b.innerStart,S=b.innerEnd,_=f-x,T=f-w,I=g+x/_,N=y-w/T,C=h+k,E=h+S,A=g+k/C,R=y-S/E;if(e.beginPath(),i){if(e.arc(o,s,f,I,N),w>0){var O=eg(T,N,o,s);e.arc(O.x,O.y,w,N,y+Xf)}var M=eg(E,y,o,s);if(e.lineTo(M.x,M.y),S>0){var D=eg(E,R,o,s);e.arc(D.x,D.y,S,y+Xf,R+Math.PI)}if(e.arc(o,s,h,y-S/h,g+k/h,!0),k>0){var F=eg(C,A,o,s);e.arc(F.x,F.y,k,A+Math.PI,g-Xf)}var P=eg(_,g,o,s);if(e.lineTo(P.x,P.y),x>0){var L=eg(_,I,o,s);e.arc(L.x,L.y,x,g-Xf,I)}}else{e.moveTo(o,s);var z=Math.cos(I)*f+o,B=Math.sin(I)*f+s;e.lineTo(z,B);var W=Math.cos(N)*f+o,V=Math.sin(N)*f+s;e.lineTo(W,V)}e.closePath()}function ng(e,t,n,r,a,i){var o=t.options,s=o.borderWidth,u=o.borderJoinStyle,c="inner"===o.borderAlign;s&&(c?(e.lineWidth=2*s,e.lineJoin=u||"round"):(e.lineWidth=s,e.lineJoin=u||"bevel"),t.fullCircles&&function(e,t,n){var r,a=t.x,i=t.y,o=t.startAngle,s=t.pixelMargin,u=t.fullCircles,c=Math.max(t.outerRadius-s,0),l=t.innerRadius+s;for(n&&Qv(e,t,o+Zf),e.beginPath(),e.arc(a,i,l,o+Zf,o,!0),r=0;r<u;++r)e.stroke();for(e.beginPath(),e.arc(a,i,c,o,o+Zf),r=0;r<u;++r)e.stroke()}(e,t,c),c&&Qv(e,t,a),tg(e,t,n,r,a,i),e.stroke())}Object.defineProperties(Xv,{defaults:{enumerable:$v,value:yp},instances:{enumerable:$v,value:Gv},overrides:{enumerable:$v,value:pp},registry:{enumerable:$v,value:Fm},version:{enumerable:$v,value:"3.9.1"},getChart:{enumerable:$v,value:qv},register:{enumerable:$v,value:function(){Fm.add.apply(Fm,arguments),Yv()}},unregister:{enumerable:$v,value:function(){Fm.remove.apply(Fm,arguments),Yv()}}});var rg=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).options=void 0,r.circumference=void 0,r.startAngle=void 0,r.endAngle=void 0,r.innerRadius=void 0,r.outerRadius=void 0,r.pixelMargin=0,r.fullCircles=0,e&&Object.assign((0,F.Z)(r),e),r}return(0,C.Z)(n,[{key:"inRange",value:function(e,t,n){var r=sh(this.getProps(["x","y"],n),{x:e,y:t}),a=r.angle,i=r.distance,o=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),s=o.startAngle,u=o.endAngle,c=o.innerRadius,l=o.outerRadius,f=o.circumference,h=this.options.spacing/2,p=Nf(f,u-s)>=Zf||fh(a,s,u),d=ph(i,c+h,l+h);return p&&d}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),n=t.x,r=t.y,a=t.startAngle,i=t.endAngle,o=t.innerRadius,s=t.outerRadius,u=this.options,c=u.offset,l=(a+i)/2,f=(o+s+u.spacing+c)/2;return{x:n+Math.cos(l)*f,y:r+Math.sin(l)*f}}},{key:"tooltipPosition",value:function(e){return this.getCenterPoint(e)}},{key:"draw",value:function(e){var t=this.options,n=this.circumference,r=(t.offset||0)/2,a=(t.spacing||0)/2,i=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>Zf?Math.floor(n/Zf):0,!(0===n||this.innerRadius<0||this.outerRadius<0)){e.save();var o=0;if(r){o=r/2;var s=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(s)*o,Math.sin(s)*o),this.circumference>=Hf&&(o=r)}e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor;var u=function(e,t,n,r,a){var i=t.fullCircles,o=t.startAngle,s=t.circumference,u=t.endAngle;if(i){tg(e,t,n,r,o+Zf,a);for(var c=0;c<i;++c)e.fill();isNaN(s)||(u=o+s%Zf,s%Zf===0&&(u+=Zf))}return tg(e,t,n,r,u,a),e.fill(),u}(e,this,o,a,i);ng(e,this,o,a,u,i),e.restore()}}}]),n}(wm);function ag(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=Nf(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Nf(n.borderDash,t.borderDash)),e.lineDashOffset=Nf(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Nf(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Nf(n.borderWidth,t.borderWidth),e.strokeStyle=Nf(n.borderColor,t.borderColor)}function ig(e,t,n){e.lineTo(n.x,n.y)}function og(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.length,a=n.start,i=void 0===a?0:a,o=n.end,s=void 0===o?r-1:o,u=t.start,c=t.end,l=Math.max(i,u),f=Math.min(s,c),h=i<u&&s<u||i>c&&s>c;return{count:r,start:l,loop:t.loop,ilen:f<l&&!h?r+f-l:f-l}}function sg(e,t,n,r){var a,i,o,s=t.points,u=t.options,c=og(s,n,r),l=c.count,f=c.start,h=c.loop,p=c.ilen,d=function(e){return e.stepped?Cp:e.tension||"monotone"===e.cubicInterpolationMode?Ep:ig}(u),m=r||{},v=m.move,g=void 0===v||v,y=m.reverse;for(a=0;a<=p;++a)(i=s[(f+(y?p-a:a))%l]).skip||(g?(e.moveTo(i.x,i.y),g=!1):d(e,o,i,y,u.stepped),o=i);return h&&d(e,o,i=s[(f+(y?p:0))%l],y,u.stepped),!!h}function ug(e,t,n,r){var a,i,o,s,u,c,l=t.points,f=og(l,n,r),h=f.count,p=f.start,d=f.ilen,m=r||{},v=m.move,g=void 0===v||v,y=m.reverse,b=0,x=0,w=function(e){return(p+(y?d-e:e))%h},k=function(){s!==u&&(e.lineTo(b,u),e.lineTo(b,s),e.lineTo(b,c))};for(g&&(i=l[w(0)],e.moveTo(i.x,i.y)),a=0;a<=d;++a)if(!(i=l[w(a)]).skip){var S=i.x,_=i.y,T=0|S;T===o?(_<s?s=_:_>u&&(u=_),b=(x*b+S)/++x):(k(),e.lineTo(S,_),o=T,x=0,s=u=_),c=_}k()}function cg(e){var t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?ug:sg}rg.id="arc",rg.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},rg.defaultRoutes={backgroundColor:"backgroundColor"};var lg="function"===typeof Path2D;function fg(e,t,n,r){lg&&!t.options.segment?function(e,t,n,r){var a=t._path;a||(a=t._path=new Path2D,t.path(a,n,r)&&a.closePath()),ag(e,t.options),e.stroke(a)}(e,t,n,r):function(e,t,n,r){var a,i=t.segments,o=t.options,s=cg(t),u=Oo(i);try{for(u.s();!(a=u.n()).done;){var c=a.value;ag(e,o,c.style),e.beginPath(),s(e,t,c,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}}catch(l){u.e(l)}finally{u.f()}}(e,t,n,r)}var hg=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).animated=!0,r.options=void 0,r._chart=void 0,r._loop=void 0,r._fullLoop=void 0,r._path=void 0,r._points=void 0,r._segments=void 0,r._decimated=!1,r._pointsUpdated=!1,r._datasetIndex=void 0,e&&Object.assign((0,F.Z)(r),e),r}return(0,C.Z)(n,[{key:"updateControlPoints",value:function(e,t){var n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){var r=n.spanGaps?this._loop:this._fullLoop;pd(this._points,n,e,r,t),this._pointsUpdated=!0}}},{key:"points",get:function(){return this._points},set:function(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}},{key:"segments",get:function(){return this._segments||(this._segments=function(e,t){var n=e.points,r=e.options.spanGaps,a=n.length;if(!a)return[];var i=!!e._loop,o=function(e,t,n,r){var a=0,i=t-1;if(n&&!r)for(;a<t&&!e[a].skip;)a++;for(;a<t&&e[a].skip;)a++;for(a%=t,n&&(i+=a);i>a&&e[i%t].skip;)i--;return{start:a,end:i%=t}}(n,a,i,r),s=o.start,u=o.end;return zd(e,!0===r?[{start:s,end:u,loop:i}]:function(e,t,n,r){var a,i=e.length,o=[],s=t,u=e[t];for(a=t+1;a<=n;++a){var c=e[a%i];c.skip||c.stop?u.skip||(r=!1,o.push({start:t%i,end:(a-1)%i,loop:r}),t=s=c.stop?a:null):(s=a,u.skip&&(t=a)),u=c}return null!==s&&o.push({start:t%i,end:s%i,loop:r}),o}(n,s,u<s?u+a:u,!!e._fullLoop&&0===s&&u===a-1),n,t)}(this,this.options.segment))}},{key:"first",value:function(){var e=this.segments,t=this.points;return e.length&&t[e[0].start]}},{key:"last",value:function(){var e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}},{key:"interpolate",value:function(e,t){var n=this.options,r=e[t],a=this.points,i=Ld(this,{property:t,start:r,end:r});if(i.length){var o,s,u=[],c=function(e){return e.stepped?Nd:e.tension||"monotone"===e.cubicInterpolationMode?Cd:Id}(n);for(o=0,s=i.length;o<s;++o){var l=i[o],f=l.start,h=l.end,p=a[f],d=a[h];if(p!==d){var m=c(p,d,Math.abs((r-p[t])/(d[t]-p[t])),n.stepped);m[t]=e[t],u.push(m)}else u.push(p)}return 1===u.length?u[0]:u}}},{key:"pathSegment",value:function(e,t,n){return cg(this)(e,this,t,n)}},{key:"path",value:function(e,t,n){var r=this.segments,a=cg(this),i=this._loop;t=t||0,n=n||this.points.length-t;var o,s=Oo(r);try{for(s.s();!(o=s.n()).done;){i&=a(e,this,o.value,{start:t,end:t+n-1})}}catch(u){s.e(u)}finally{s.f()}return!!i}},{key:"draw",value:function(e,t,n,r){var a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),fg(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}]),n}(wm);function pg(e,t,n,r){var a=e.options,i=e.getProps([n],r)[n];return Math.abs(t-i)<a.radius+a.hitRadius}hg.id="line",hg.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},hg.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},hg.descriptors={_scriptable:!0,_indexable:function(e){return"borderDash"!==e&&"fill"!==e}};var dg=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).options=void 0,r.parsed=void 0,r.skip=void 0,r.stop=void 0,e&&Object.assign((0,F.Z)(r),e),r}return(0,C.Z)(n,[{key:"inRange",value:function(e,t,n){var r=this.options,a=this.getProps(["x","y"],n),i=a.x,o=a.y;return Math.pow(e-i,2)+Math.pow(t-o,2)<Math.pow(r.hitRadius+r.radius,2)}},{key:"inXRange",value:function(e,t){return pg(this,e,"x",t)}},{key:"inYRange",value:function(e,t){return pg(this,e,"y",t)}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y"],e);return{x:t.x,y:t.y}}},{key:"size",value:function(e){var t=(e=e||this.options||{}).radius||0;return 2*((t=Math.max(t,t&&e.hoverRadius||0))+(t&&e.borderWidth||0))}},{key:"draw",value:function(e,t){var n=this.options;this.skip||n.radius<.1||!Tp(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Sp(e,n,this.x,this.y))}},{key:"getRange",value:function(){var e=this.options||{};return e.radius+e.hitRadius}}]),n}(wm);function mg(e,t){var n,r,a,i,o,s=e.getProps(["x","y","base","width","height"],t),u=s.x,c=s.y,l=s.base,f=s.width,h=s.height;return e.horizontal?(o=h/2,n=Math.min(u,l),r=Math.max(u,l),a=c-o,i=c+o):(n=u-(o=f/2),r=u+o,a=Math.min(c,l),i=Math.max(c,l)),{left:n,top:a,right:r,bottom:i}}function vg(e,t,n,r){return e?0:hh(t,n,r)}function gg(e){var t=mg(e),n=t.right-t.left,r=t.bottom-t.top,a=function(e,t,n){var r=e.options.borderWidth,a=e.borderSkipped,i=Bp(r);return{t:vg(a.top,i.top,0,n),r:vg(a.right,i.right,0,t),b:vg(a.bottom,i.bottom,0,n),l:vg(a.left,i.left,0,t)}}(e,n/2,r/2),i=function(e,t,n){var r=e.getProps(["enableBorderRadius"]).enableBorderRadius,a=e.options.borderRadius,i=Wp(a),o=Math.min(t,n),s=e.borderSkipped,u=r||_f(a);return{topLeft:vg(!u||s.top||s.left,i.topLeft,0,o),topRight:vg(!u||s.top||s.right,i.topRight,0,o),bottomLeft:vg(!u||s.bottom||s.left,i.bottomLeft,0,o),bottomRight:vg(!u||s.bottom||s.right,i.bottomRight,0,o)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:i},inner:{x:t.left+a.l,y:t.top+a.t,w:n-a.l-a.r,h:r-a.t-a.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,i.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(a.b,a.r))}}}}function yg(e,t,n,r){var a=null===t,i=null===n,o=e&&!(a&&i)&&mg(e,r);return o&&(a||ph(t,o.left,o.right))&&(i||ph(n,o.top,o.bottom))}function bg(e,t){e.rect(t.x,t.y,t.w,t.h)}function xg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.x!==n.x?-t:0,a=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-r,o=(e.y+e.h!==n.y+n.h?t:0)-a;return{x:e.x+r,y:e.y+a,w:e.w+i,h:e.h+o,radius:e.radius}}dg.id="point",dg.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},dg.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var wg=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).options=void 0,r.horizontal=void 0,r.base=void 0,r.width=void 0,r.height=void 0,r.inflateAmount=void 0,e&&Object.assign((0,F.Z)(r),e),r}return(0,C.Z)(n,[{key:"draw",value:function(e){var t,n=this.inflateAmount,r=this.options,a=r.borderColor,i=r.backgroundColor,o=gg(this),s=o.inner,u=o.outer,c=(t=u.radius).topLeft||t.topRight||t.bottomLeft||t.bottomRight?Mp:bg;e.save(),u.w===s.w&&u.h===s.h||(e.beginPath(),c(e,xg(u,n,s)),e.clip(),c(e,xg(s,-n,u)),e.fillStyle=a,e.fill("evenodd")),e.beginPath(),c(e,xg(s,n)),e.fillStyle=i,e.fill(),e.restore()}},{key:"inRange",value:function(e,t,n){return yg(this,e,t,n)}},{key:"inXRange",value:function(e,t){return yg(this,e,null,t)}},{key:"inYRange",value:function(e,t){return yg(this,null,e,t)}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y","base","horizontal"],e),n=t.x,r=t.y,a=t.base,i=t.horizontal;return{x:i?(n+a)/2:n,y:i?r:(r+a)/2}}},{key:"getRange",value:function(e){return"x"===e?this.width/2:this.height/2}}]),n}(wm);wg.id="bar",wg.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},wg.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function kg(e,t,n,r){if(!r){var a=t[e],i=n[e];return"angle"===e&&(a=lh(a),i=lh(i)),{property:e,start:a,end:i}}}function Sg(e,t,n){for(;t>e;t--){var r=n[t];if(!isNaN(r.x)&&!isNaN(r.y))break}return t}function _g(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function Tg(e,t){var n=[],r=!1;return Sf(e)?(r=!0,n=e):n=function(e,t){var n=e||{},r=n.x,a=void 0===r?null:r,i=n.y,o=void 0===i?null:i,s=t.points,u=[];return t.segments.forEach((function(e){var t=e.start,n=e.end;n=Sg(t,n,s);var r=s[t],i=s[n];null!==o?(u.push({x:r.x,y:o}),u.push({x:i.x,y:o})):null!==a&&(u.push({x:a,y:r.y}),u.push({x:a,y:i.y}))})),u}(e,t),n.length?new hg({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function Ig(e){return e&&!1!==e.fill}function Ng(e,t,n){var r,a=e[t].fill,i=[t];if(!n)return a;for(;!1!==a&&-1===i.indexOf(a);){if(!Tf(a))return a;if(!(r=e[a]))return!1;if(r.visible)return a;i.push(a),a=r.fill}return!1}function Cg(e,t,n){var r=function(e){var t=e.options,n=t.fill,r=Nf(n&&n.target,n);void 0===r&&(r=!!t.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(e);if(_f(r))return!isNaN(r.value)&&r;var a=parseFloat(r);return Tf(a)&&Math.floor(a)===a?function(e,t,n,r){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=r)return!1;return n}(r[0],t,a,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Eg(e,t,n){for(var r=[],a=0;a<n.length;a++){var i=Ag(n[a],t,"x"),o=i.first,s=i.last,u=i.point;if(!(!u||o&&s))if(o)r.unshift(u);else if(e.push(u),!s)break}e.push.apply(e,r)}function Ag(e,t,n){var r=e.interpolate(t,n);if(!r)return{};for(var a=r[n],i=e.segments,o=e.points,s=!1,u=!1,c=0;c<i.length;c++){var l=i[c],f=o[l.start][n],h=o[l.end][n];if(ph(a,f,h)){s=a===f,u=a===h;break}}return{first:s,last:u,point:r}}var Rg=function(){function e(t){N(this,e),this.x=t.x,this.y=t.y,this.radius=t.radius}return(0,C.Z)(e,[{key:"pathSegment",value:function(e,t,n){var r=this.x,a=this.y,i=this.radius;return t=t||{start:0,end:Zf},e.arc(r,a,i,t.end,t.start,!0),!n.bounds}},{key:"interpolate",value:function(e){var t=this.x,n=this.y,r=this.radius,a=e.angle;return{x:t+Math.cos(a)*r,y:n+Math.sin(a)*r,angle:a}}}]),e}();function Og(e){var t=e.chart,n=e.fill,r=e.line;if(Tf(n))return function(e,t){var n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}(t,n);if("stack"===n)return function(e){var t=e.scale,n=e.index,r=e.line,a=[],i=r.segments,o=r.points,s=function(e,t){for(var n=[],r=e.getMatchingVisibleMetas("line"),a=0;a<r.length;a++){var i=r[a];if(i.index===t)break;i.hidden||n.unshift(i.dataset)}return n}(t,n);s.push(Tg({x:null,y:t.bottom},r));for(var u=0;u<i.length;u++)for(var c=i[u],l=c.start;l<=c.end;l++)Eg(a,o[l],s);return new hg({points:a,options:{}})}(e);if("shape"===n)return!0;var a=function(e){if((e.scale||{}).getPointPositionForValue)return function(e){var t=e.scale,n=e.fill,r=t.options,a=t.getLabels().length,i=r.reverse?t.max:t.min,o=function(e,t,n){return"start"===e?n:"end"===e?t.options.reverse?t.min:t.max:_f(e)?e.value:t.getBaseValue()}(n,t,i),s=[];if(r.grid.circular){var u=t.getPointPositionForValue(0,i);return new Rg({x:u.x,y:u.y,radius:t.getDistanceFromCenterForValue(o)})}for(var c=0;c<a;++c)s.push(t.getPointPositionForValue(c,o));return s}(e);return function(e){var t=e.scale,n=void 0===t?{}:t,r=function(e,t){var n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:_f(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(e.fill,n);if(Tf(r)){var a=n.isHorizontal();return{x:a?r:null,y:a?null:r}}return null}(e)}(e);return a instanceof Rg?a:Tg(a,r)}function Mg(e,t,n){var r=Og(t),a=t.line,i=t.scale,o=t.axis,s=a.options,u=s.fill,c=s.backgroundColor,l=u||{},f=l.above,h=void 0===f?c:f,p=l.below,d=void 0===p?c:p;r&&a.points.length&&(Ip(e,n),function(e,t){var n=t.line,r=t.target,a=t.above,i=t.below,o=t.area,s=t.scale,u=n._loop?"angle":t.axis;e.save(),"x"===u&&i!==a&&(Dg(e,r,o.top),Fg(e,{line:n,target:r,color:a,scale:s,property:u}),e.restore(),e.save(),Dg(e,r,o.bottom));Fg(e,{line:n,target:r,color:i,scale:s,property:u}),e.restore()}(e,{line:a,target:r,above:h,below:d,area:n,scale:i,axis:o}),Np(e))}function Dg(e,t,n){var r=t.segments,a=t.points,i=!0,o=!1;e.beginPath();var s,u=Oo(r);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=c.start,f=c.end,h=a[l],p=a[Sg(l,f,a)];i?(e.moveTo(h.x,h.y),i=!1):(e.lineTo(h.x,n),e.lineTo(h.x,h.y)),(o=!!t.pathSegment(e,c,{move:o}))?e.closePath():e.lineTo(p.x,n)}}catch(d){u.e(d)}finally{u.f()}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function Fg(e,t){var n,r=t.line,a=t.target,i=t.property,o=t.color,s=t.scale,u=function(e,t,n){var r,a=e.segments,i=e.points,o=t.points,s=[],u=Oo(a);try{for(u.s();!(r=u.n()).done;){var c=r.value,l=c.start,f=c.end;f=Sg(l,f,i);var h=kg(n,i[l],i[f],c.loop);if(t.segments){var p,d=Oo(Ld(t,h));try{for(d.s();!(p=d.n()).done;){var m,v=p.value,g=kg(n,o[v.start],o[v.end],v.loop),y=Oo(Pd(c,i,g));try{for(y.s();!(m=y.n()).done;){var b=m.value;s.push({source:b,target:v,start:(0,Ft.Z)({},n,_g(h,g,"start",Math.max)),end:(0,Ft.Z)({},n,_g(h,g,"end",Math.min))})}}catch(x){y.e(x)}finally{y.f()}}}catch(x){d.e(x)}finally{d.f()}}else s.push({source:c,target:h,start:i[l],end:i[f]})}}catch(x){u.e(x)}finally{u.f()}return s}(r,a,i),c=Oo(u);try{for(c.s();!(n=c.n()).done;){var l=n.value,f=l.source,h=l.target,p=l.start,d=l.end,m=f.style,v=(m=void 0===m?{}:m).backgroundColor,g=void 0===v?o:v,y=!0!==a;e.save(),e.fillStyle=g,Pg(e,s,y&&kg(i,p,d)),e.beginPath();var b=!!r.pathSegment(e,f),x=void 0;if(y){b?e.closePath():Lg(e,a,d,i);var w=!!a.pathSegment(e,h,{move:b,reverse:!0});(x=b&&w)||Lg(e,a,p,i)}e.closePath(),e.fill(x?"evenodd":"nonzero"),e.restore()}}catch(k){c.e(k)}finally{c.f()}}function Pg(e,t,n){var r=t.chart.chartArea,a=r.top,i=r.bottom,o=n||{},s=o.property,u=o.start,c=o.end;"x"===s&&(e.beginPath(),e.rect(u,a,c-u,i-a),e.clip())}function Lg(e,t,n,r){var a=t.interpolate(n,r);a&&e.lineTo(a.x,a.y)}var zg={id:"filler",afterDatasetsUpdate:function(e,t,n){var r,a,i,o,s=(e.data.datasets||[]).length,u=[];for(a=0;a<s;++a)o=null,(i=(r=e.getDatasetMeta(a)).dataset)&&i.options&&i instanceof hg&&(o={visible:e.isDatasetVisible(a),index:a,fill:Cg(i,a,s),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:i}),r.$filler=o,u.push(o);for(a=0;a<s;++a)(o=u[a])&&!1!==o.fill&&(o.fill=Ng(u,a,n.propagate))},beforeDraw:function(e,t,n){for(var r="beforeDraw"===n.drawTime,a=e.getSortedVisibleDatasetMetas(),i=e.chartArea,o=a.length-1;o>=0;--o){var s=a[o].$filler;s&&(s.line.updateControlPoints(i,s.axis),r&&s.fill&&Mg(e.ctx,s,i))}},beforeDatasetsDraw:function(e,t,n){if("beforeDatasetsDraw"===n.drawTime)for(var r=e.getSortedVisibleDatasetMetas(),a=r.length-1;a>=0;--a){var i=r[a].$filler;Ig(i)&&Mg(e.ctx,i,e.chartArea)}},beforeDatasetDraw:function(e,t,n){var r=t.meta.$filler;Ig(r)&&"beforeDatasetDraw"===n.drawTime&&Mg(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},Bg=function(e,t){var n=e.boxHeight,r=void 0===n?t:n,a=e.boxWidth,i=void 0===a?t:a;return e.usePointStyle&&(r=Math.min(r,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:r,itemHeight:Math.max(t,r)}},Wg=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this))._added=!1,r.legendHitBoxes=[],r._hoveredItem=null,r.doughnutMode=!1,r.chart=e.chart,r.options=e.options,r.ctx=e.ctx,r.legendItems=void 0,r.columnSizes=void 0,r.lineWidths=void 0,r.maxHeight=void 0,r.maxWidth=void 0,r.top=void 0,r.bottom=void 0,r.left=void 0,r.right=void 0,r.height=void 0,r.width=void 0,r._margins=void 0,r.position=void 0,r.weight=void 0,r.fullSize=void 0,r}return(0,C.Z)(n,[{key:"update",value:function(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}},{key:"buildLabels",value:function(){var e=this,t=this.options.labels||{},n=Ef(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter((function(n){return t.filter(n,e.chart.data)}))),t.sort&&(n=n.sort((function(n,r){return t.sort(n,r,e.chart.data)}))),this.options.reverse&&n.reverse(),this.legendItems=n}},{key:"fit",value:function(){var e=this.options,t=this.ctx;if(e.display){var n,r,a=e.labels,i=jp(a.font),o=i.size,s=this._computeTitleHeight(),u=Bg(a,o),c=u.boxWidth,l=u.itemHeight;t.font=i.string,this.isHorizontal()?(n=this.maxWidth,r=this._fitRows(s,o,c,l)+10):(r=this.maxHeight,n=this._fitCols(s,o,c,l)+10),this.width=Math.min(n,e.maxWidth||this.maxWidth),this.height=Math.min(r,e.maxHeight||this.maxHeight)}else this.width=this.height=0}},{key:"_fitRows",value:function(e,t,n,r){var a=this.ctx,i=this.maxWidth,o=this.options.labels.padding,s=this.legendHitBoxes=[],u=this.lineWidths=[0],c=r+o,l=e;a.textAlign="left",a.textBaseline="middle";var f=-1,h=-c;return this.legendItems.forEach((function(e,p){var d=n+t/2+a.measureText(e.text).width;(0===p||u[u.length-1]+d+2*o>i)&&(l+=c,u[u.length-(p>0?0:1)]=0,h+=c,f++),s[p]={left:0,top:h,row:f,width:d,height:r},u[u.length-1]+=d+o})),l}},{key:"_fitCols",value:function(e,t,n,r){var a=this.ctx,i=this.maxHeight,o=this.options.labels.padding,s=this.legendHitBoxes=[],u=this.columnSizes=[],c=i-e,l=o,f=0,h=0,p=0,d=0;return this.legendItems.forEach((function(e,i){var m=n+t/2+a.measureText(e.text).width;i>0&&h+r+2*o>c&&(l+=f+o,u.push({width:f,height:h}),p+=f+o,d++,f=h=0),s[i]={left:p,top:h,col:d,width:m,height:r},f=Math.max(f,m),h+=r+o})),l+=f,u.push({width:f,height:h}),l}},{key:"adjustHitBoxes",value:function(){if(this.options.display){var e=this._computeTitleHeight(),t=this.legendHitBoxes,n=this.options,r=n.align,a=n.labels.padding,i=Rd(n.rtl,this.left,this.width);if(this.isHorizontal()){var o,s=0,u=Sh(r,this.left+a,this.right-this.lineWidths[s]),c=Oo(t);try{for(c.s();!(o=c.n()).done;){var l=o.value;s!==l.row&&(s=l.row,u=Sh(r,this.left+a,this.right-this.lineWidths[s])),l.top+=this.top+e+a,l.left=i.leftForLtr(i.x(u),l.width),u+=l.width+a}}catch(v){c.e(v)}finally{c.f()}}else{var f,h=0,p=Sh(r,this.top+e+a,this.bottom-this.columnSizes[h].height),d=Oo(t);try{for(d.s();!(f=d.n()).done;){var m=f.value;m.col!==h&&(h=m.col,p=Sh(r,this.top+e+a,this.bottom-this.columnSizes[h].height)),m.top=p,m.left+=this.left+a,m.left=i.leftForLtr(i.x(m.left),m.width),p+=m.height+a}}catch(v){d.e(v)}finally{d.f()}}}}},{key:"isHorizontal",value:function(){return"top"===this.options.position||"bottom"===this.options.position}},{key:"draw",value:function(){if(this.options.display){var e=this.ctx;Ip(e,this),this._draw(),Np(e)}}},{key:"_draw",value:function(){var e,t=this,n=this.options,r=this.columnSizes,a=this.lineWidths,i=this.ctx,o=n.align,s=n.labels,u=yp.color,c=Rd(n.rtl,this.left,this.width),l=jp(s.font),f=s.color,h=s.padding,p=l.size,d=p/2;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;var m=Bg(s,p),v=m.boxWidth,g=m.boxHeight,y=m.itemHeight,b=this.isHorizontal(),x=this._computeTitleHeight();e=b?{x:Sh(o,this.left+h,this.right-a[0]),y:this.top+h+x,line:0}:{x:this.left+h,y:Sh(o,this.top+x+h,this.bottom-r[0].height),line:0},Od(this.ctx,n.textDirection);var w=y+h;this.legendItems.forEach((function(m,k){i.strokeStyle=m.fontColor||f,i.fillStyle=m.fontColor||f;var S=i.measureText(m.text).width,_=c.textAlign(m.textAlign||(m.textAlign=s.textAlign)),T=v+d+S,I=e.x,N=e.y;c.setWidth(t.width),b?k>0&&I+T+h>t.right&&(N=e.y+=w,e.line++,I=e.x=Sh(o,t.left+h,t.right-a[e.line])):k>0&&N+w>t.bottom&&(I=e.x=I+r[e.line].width+h,e.line++,N=e.y=Sh(o,t.top+x+h,t.bottom-r[e.line].height)),function(e,t,n){if(!(isNaN(v)||v<=0||isNaN(g)||g<0)){i.save();var r=Nf(n.lineWidth,1);if(i.fillStyle=Nf(n.fillStyle,u),i.lineCap=Nf(n.lineCap,"butt"),i.lineDashOffset=Nf(n.lineDashOffset,0),i.lineJoin=Nf(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=Nf(n.strokeStyle,u),i.setLineDash(Nf(n.lineDash,[])),s.usePointStyle){var a={radius:g*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},o=c.xPlus(e,v/2);_p(i,a,o,t+d,s.pointStyleWidth&&v)}else{var l=t+Math.max((p-g)/2,0),f=c.leftForLtr(e,v),h=Wp(n.borderRadius);i.beginPath(),Object.values(h).some((function(e){return 0!==e}))?Mp(i,{x:f,y:l,w:v,h:g,radius:h}):i.rect(f,l,v,g),i.fill(),0!==r&&i.stroke()}i.restore()}}(c.x(I),N,m),I=function(e,t,n,r){return e===(r?"left":"right")?n:"center"===e?(t+n)/2:t}(_,I+v+d,b?I+T:t.right,n.rtl),function(e,t,n){Ap(i,n.text,e,t+y/2,l,{strikethrough:n.hidden,textAlign:c.textAlign(n.textAlign)})}(c.x(I),N,m),b?e.x+=T+h:e.y+=w})),Md(this.ctx,n.textDirection)}},{key:"drawTitle",value:function(){var e=this.options,t=e.title,n=jp(t.font),r=Vp(t.padding);if(t.display){var a,i=Rd(e.rtl,this.left,this.width),o=this.ctx,s=t.position,u=n.size/2,c=r.top+u,l=this.left,f=this.width;if(this.isHorizontal())f=Math.max.apply(Math,(0,I.Z)(this.lineWidths)),a=this.top+c,l=Sh(e.align,l,this.right-f);else{var h=this.columnSizes.reduce((function(e,t){return Math.max(e,t.height)}),0);a=c+Sh(e.align,this.top,this.bottom-h-e.labels.padding-this._computeTitleHeight())}var p=Sh(s,l,l+f);o.textAlign=i.textAlign(kh(s)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=n.string,Ap(o,t.text,p,a,n)}}},{key:"_computeTitleHeight",value:function(){var e=this.options.title,t=jp(e.font),n=Vp(e.padding);return e.display?t.lineHeight+n.height:0}},{key:"_getLegendItemAt",value:function(e,t){var n,r,a;if(ph(e,this.left,this.right)&&ph(t,this.top,this.bottom))for(a=this.legendHitBoxes,n=0;n<a.length;++n)if(ph(e,(r=a[n]).left,r.left+r.width)&&ph(t,r.top,r.top+r.height))return this.legendItems[n];return null}},{key:"handleEvent",value:function(e){var t=this.options;if(function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t)){var n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){var r=this._hoveredItem,a=function(e,t){return null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index}(r,n);r&&!a&&Ef(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!a&&Ef(t.onHover,[e,n,this],this)}else n&&Ef(t.onClick,[e,n,this],this)}}}]),n}(wm);var Vg={id:"legend",_element:Wg,start:function(e,t,n){var r=e.legend=new Wg({ctx:e.ctx,options:n,chart:e});sv(e,r,n),iv(e,r)},stop:function(e){ov(e,e.legend),delete e.legend},beforeUpdate:function(e,t,n){var r=e.legend;sv(e,r,n),r.options=n},afterUpdate:function(e){var t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent:function(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick:function(e,t,n){var r=t.datasetIndex,a=n.chart;a.isDatasetVisible(r)?(a.hide(r),t.hidden=!0):(a.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:function(e){return e.chart.options.color},boxWidth:40,padding:10,generateLabels:function(e){var t=e.data.datasets,n=e.legend.options.labels,r=n.usePointStyle,a=n.pointStyle,i=n.textAlign,o=n.color;return e._getSortedDatasetMetas().map((function(e){var n=e.controller.getStyle(r?0:void 0),s=Vp(n.borderWidth);return{text:t[e.index].label,fillStyle:n.backgroundColor,fontColor:o,hidden:!e.visible,lineCap:n.borderCapStyle,lineDash:n.borderDash,lineDashOffset:n.borderDashOffset,lineJoin:n.borderJoinStyle,lineWidth:(s.width+s.height)/4,strokeStyle:n.borderColor,pointStyle:a||n.pointStyle,rotation:n.rotation,textAlign:i||n.textAlign,borderRadius:0,datasetIndex:e.index}}),this)}},title:{color:function(e){return e.chart.options.color},display:!1,position:"center",text:""}},descriptors:{_scriptable:function(e){return!e.startsWith("on")},labels:{_scriptable:function(e){return!["generateLabels","filter","sort"].includes(e)}}}},jg=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).chart=e.chart,r.options=e.options,r.ctx=e.ctx,r._padding=void 0,r.top=void 0,r.bottom=void 0,r.left=void 0,r.right=void 0,r.width=void 0,r.height=void 0,r.position=void 0,r.weight=void 0,r.fullSize=void 0,r}return(0,C.Z)(n,[{key:"update",value:function(e,t){var n=this.options;if(this.left=0,this.top=0,n.display){this.width=this.right=e,this.height=this.bottom=t;var r=Sf(n.text)?n.text.length:1;this._padding=Vp(n.padding);var a=r*jp(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}else this.width=this.height=this.right=this.bottom=0}},{key:"isHorizontal",value:function(){var e=this.options.position;return"top"===e||"bottom"===e}},{key:"_drawArgs",value:function(e){var t,n,r,a=this.top,i=this.left,o=this.bottom,s=this.right,u=this.options,c=u.align,l=0;return this.isHorizontal()?(n=Sh(c,i,s),r=a+e,t=s-i):("left"===u.position?(n=i+e,r=Sh(c,o,a),l=-.5*Hf):(n=s-e,r=Sh(c,a,o),l=.5*Hf),t=o-a),{titleX:n,titleY:r,maxWidth:t,rotation:l}}},{key:"draw",value:function(){var e=this.ctx,t=this.options;if(t.display){var n=jp(t.font),r=n.lineHeight/2+this._padding.top,a=this._drawArgs(r),i=a.titleX,o=a.titleY,s=a.maxWidth,u=a.rotation;Ap(e,t.text,0,0,n,{color:t.color,maxWidth:s,rotation:u,textAlign:kh(t.align),textBaseline:"middle",translation:[i,o]})}}}]),n}(wm);var Ug={id:"title",_element:jg,start:function(e,t,n){!function(e,t){var n=new jg({ctx:e.ctx,options:t,chart:e});sv(e,n,t),iv(e,n),e.titleBlock=n}(e,n)},stop:function(e){var t=e.titleBlock;ov(e,t),delete e.titleBlock},beforeUpdate:function(e,t,n){var r=e.titleBlock;sv(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Hg=(new WeakMap,{average:function(e){if(!e.length)return!1;var t,n,r=0,a=0,i=0;for(t=0,n=e.length;t<n;++t){var o=e[t].element;if(o&&o.hasValue()){var s=o.tooltipPosition();r+=s.x,a+=s.y,++i}}return{x:r/i,y:a/i}},nearest:function(e,t){if(!e.length)return!1;var n,r,a,i=t.x,o=t.y,s=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){var u=e[n].element;if(u&&u.hasValue()){var c=uh(t,u.getCenterPoint());c<s&&(s=c,a=u)}}if(a){var l=a.tooltipPosition();i=l.x,o=l.y}return{x:i,y:o}}});function Zg(e,t){return t&&(Sf(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Gg(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function qg(e,t){var n=t.element,r=t.datasetIndex,a=t.index,i=e.getDatasetMeta(r).controller,o=i.getLabelAndValue(a),s=o.label,u=o.value;return{chart:e,label:s,parsed:i.getParsed(a),raw:e.data.datasets[r].data[a],formattedValue:u,dataset:i.getDataset(),dataIndex:a,datasetIndex:r,element:n}}function Kg(e,t){var n=e.chart.ctx,r=e.body,a=e.footer,i=e.title,o=t.boxWidth,s=t.boxHeight,u=jp(t.bodyFont),c=jp(t.titleFont),l=jp(t.footerFont),f=i.length,h=a.length,p=r.length,d=Vp(t.padding),m=d.height,v=0,g=r.reduce((function(e,t){return e+t.before.length+t.lines.length+t.after.length}),0);(g+=e.beforeBody.length+e.afterBody.length,f&&(m+=f*c.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),g)&&(m+=p*(t.displayColors?Math.max(s,u.lineHeight):u.lineHeight)+(g-p)*u.lineHeight+(g-1)*t.bodySpacing);h&&(m+=t.footerMarginTop+h*l.lineHeight+(h-1)*t.footerSpacing);var y=0,b=function(e){v=Math.max(v,n.measureText(e).width+y)};return n.save(),n.font=c.string,Af(e.title,b),n.font=u.string,Af(e.beforeBody.concat(e.afterBody),b),y=t.displayColors?o+2+t.boxPadding:0,Af(r,(function(e){Af(e.before,b),Af(e.lines,b),Af(e.after,b)})),y=0,n.font=l.string,Af(e.footer,b),n.restore(),{width:v+=d.width,height:m}}function Xg(e,t,n,r){var a=n.x,i=n.width,o=e.width,s=e.chartArea,u=s.left,c=s.right,l="center";return"center"===r?l=a<=(u+c)/2?"left":"right":a<=i/2?l="left":a>=o-i/2&&(l="right"),function(e,t,n,r){var a=r.x,i=r.width,o=n.caretSize+n.caretPadding;return"left"===e&&a+i+o>t.width||"right"===e&&a-i-o<0||void 0}(l,e,t,n)&&(l="center"),l}function Yg(e,t,n){var r=n.yAlign||t.yAlign||function(e,t){var n=t.y,r=t.height;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||Xg(e,t,n,r),yAlign:r}}function $g(e,t,n,r){var a=e.caretSize,i=e.caretPadding,o=e.cornerRadius,s=n.xAlign,u=n.yAlign,c=a+i,l=Wp(o),f=l.topLeft,h=l.topRight,p=l.bottomLeft,d=l.bottomRight,m=function(e,t){var n=e.x,r=e.width;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,s),v=function(e,t,n){var r=e.y,a=e.height;return"top"===t?r+=n:r-="bottom"===t?a+n:a/2,r}(t,u,c);return"center"===u?"left"===s?m+=c:"right"===s&&(m-=c):"left"===s?m-=Math.max(f,p)+a:"right"===s&&(m+=Math.max(h,d)+a),{x:hh(m,0,r.width-t.width),y:hh(v,0,r.height-t.height)}}function Qg(e,t,n){var r=Vp(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function Jg(e){return Zg([],Gg(e))}function ey(e,t){var n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}var ty=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).opacity=0,r._active=[],r._eventPosition=void 0,r._size=void 0,r._cachedAnimations=void 0,r._tooltipItems=[],r.$animations=void 0,r.$context=void 0,r.chart=e.chart||e._chart,r._chart=r.chart,r.options=e.options,r.dataPoints=void 0,r.title=void 0,r.beforeBody=void 0,r.body=void 0,r.afterBody=void 0,r.footer=void 0,r.xAlign=void 0,r.yAlign=void 0,r.x=void 0,r.y=void 0,r.height=void 0,r.width=void 0,r.caretX=void 0,r.caretY=void 0,r.labelColors=void 0,r.labelPointStyles=void 0,r.labelTextColors=void 0,r}return(0,C.Z)(n,[{key:"initialize",value:function(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}},{key:"_resolveAnimations",value:function(){var e=this._cachedAnimations;if(e)return e;var t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,a=new qd(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}},{key:"getContext",value:function(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,Hp(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}},{key:"getTitle",value:function(e,t){var n=t.callbacks,r=n.beforeTitle.apply(this,[e]),a=n.title.apply(this,[e]),i=n.afterTitle.apply(this,[e]),o=[];return o=Zg(o,Gg(r)),o=Zg(o,Gg(a)),o=Zg(o,Gg(i))}},{key:"getBeforeBody",value:function(e,t){return Jg(t.callbacks.beforeBody.apply(this,[e]))}},{key:"getBody",value:function(e,t){var n=this,r=t.callbacks,a=[];return Af(e,(function(e){var t={before:[],lines:[],after:[]},i=ey(r,e);Zg(t.before,Gg(i.beforeLabel.call(n,e))),Zg(t.lines,i.label.call(n,e)),Zg(t.after,Gg(i.afterLabel.call(n,e))),a.push(t)})),a}},{key:"getAfterBody",value:function(e,t){return Jg(t.callbacks.afterBody.apply(this,[e]))}},{key:"getFooter",value:function(e,t){var n=t.callbacks,r=n.beforeFooter.apply(this,[e]),a=n.footer.apply(this,[e]),i=n.afterFooter.apply(this,[e]),o=[];return o=Zg(o,Gg(r)),o=Zg(o,Gg(a)),o=Zg(o,Gg(i))}},{key:"_createItems",value:function(e){var t,n,r=this,a=this._active,i=this.chart.data,o=[],s=[],u=[],c=[];for(t=0,n=a.length;t<n;++t)c.push(qg(this.chart,a[t]));return e.filter&&(c=c.filter((function(t,n,r){return e.filter(t,n,r,i)}))),e.itemSort&&(c=c.sort((function(t,n){return e.itemSort(t,n,i)}))),Af(c,(function(t){var n=ey(e.callbacks,t);o.push(n.labelColor.call(r,t)),s.push(n.labelPointStyle.call(r,t)),u.push(n.labelTextColor.call(r,t))})),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=u,this.dataPoints=c,c}},{key:"update",value:function(e,t){var n,r=this.options.setContext(this.getContext()),a=this._active,i=[];if(a.length){var o=Hg[r.position].call(this,a,this._eventPosition);i=this._createItems(r),this.title=this.getTitle(i,r),this.beforeBody=this.getBeforeBody(i,r),this.body=this.getBody(i,r),this.afterBody=this.getAfterBody(i,r),this.footer=this.getFooter(i,r);var s=this._size=Kg(this,r),u=Object.assign({},o,s),c=Yg(this.chart,r,u),l=$g(r,u,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,n={opacity:1,x:l.x,y:l.y,width:s.width,height:s.height,caretX:o.x,caretY:o.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=i,this.$context=void 0,n&&this._resolveAnimations().update(this,n),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}},{key:"drawCaret",value:function(e,t,n,r){var a=this.getCaretPosition(e,n,r);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}},{key:"getCaretPosition",value:function(e,t,n){var r,a,i,o,s,u,c=this.xAlign,l=this.yAlign,f=n.caretSize,h=Wp(n.cornerRadius),p=h.topLeft,d=h.topRight,m=h.bottomLeft,v=h.bottomRight,g=e.x,y=e.y,b=t.width,x=t.height;return"center"===l?(s=y+x/2,"left"===c?(a=(r=g)-f,o=s+f,u=s-f):(a=(r=g+b)+f,o=s-f,u=s+f),i=r):(a="left"===c?g+Math.max(p,m)+f:"right"===c?g+b-Math.max(d,v)-f:this.caretX,"top"===l?(s=(o=y)-f,r=a-f,i=a+f):(s=(o=y+x)+f,r=a+f,i=a-f),u=o),{x1:r,x2:a,x3:i,y1:o,y2:s,y3:u}}},{key:"drawTitle",value:function(e,t,n){var r,a,i,o=this.title,s=o.length;if(s){var u=Rd(n.rtl,this.x,this.width);for(e.x=Qg(this,n.titleAlign,n),t.textAlign=u.textAlign(n.titleAlign),t.textBaseline="middle",r=jp(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=r.string,i=0;i<s;++i)t.fillText(o[i],u.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+a,i+1===s&&(e.y+=n.titleMarginBottom-a)}}},{key:"_drawColorBox",value:function(e,t,n,r,a){var i=this.labelColors[n],o=this.labelPointStyles[n],s=a.boxHeight,u=a.boxWidth,c=a.boxPadding,l=jp(a.bodyFont),f=Qg(this,"left",a),h=r.x(f),p=s<l.lineHeight?(l.lineHeight-s)/2:0,d=t.y+p;if(a.usePointStyle){var m={radius:Math.min(u,s)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},v=r.leftForLtr(h,u)+u/2,g=d+s/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,Sp(e,m,v,g),e.strokeStyle=i.borderColor,e.fillStyle=i.backgroundColor,Sp(e,m,v,g)}else{e.lineWidth=_f(i.borderWidth)?Math.max.apply(Math,(0,I.Z)(Object.values(i.borderWidth))):i.borderWidth||1,e.strokeStyle=i.borderColor,e.setLineDash(i.borderDash||[]),e.lineDashOffset=i.borderDashOffset||0;var y=r.leftForLtr(h,u-c),b=r.leftForLtr(r.xPlus(h,1),u-c-2),x=Wp(i.borderRadius);Object.values(x).some((function(e){return 0!==e}))?(e.beginPath(),e.fillStyle=a.multiKeyBackground,Mp(e,{x:y,y:d,w:u,h:s,radius:x}),e.fill(),e.stroke(),e.fillStyle=i.backgroundColor,e.beginPath(),Mp(e,{x:b,y:d+1,w:u-2,h:s-2,radius:x}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(y,d,u,s),e.strokeRect(y,d,u,s),e.fillStyle=i.backgroundColor,e.fillRect(b,d+1,u-2,s-2))}e.fillStyle=this.labelTextColors[n]}},{key:"drawBody",value:function(e,t,n){var r,a,i,o,s,u,c,l=this.body,f=n.bodySpacing,h=n.bodyAlign,p=n.displayColors,d=n.boxHeight,m=n.boxWidth,v=n.boxPadding,g=jp(n.bodyFont),y=g.lineHeight,b=0,x=Rd(n.rtl,this.x,this.width),w=function(n){t.fillText(n,x.x(e.x+b),e.y+y/2),e.y+=y+f},k=x.textAlign(h);for(t.textAlign=h,t.textBaseline="middle",t.font=g.string,e.x=Qg(this,k,n),t.fillStyle=n.bodyColor,Af(this.beforeBody,w),b=p&&"right"!==k?"center"===h?m/2+v:m+2+v:0,o=0,u=l.length;o<u;++o){for(r=l[o],a=this.labelTextColors[o],t.fillStyle=a,Af(r.before,w),i=r.lines,p&&i.length&&(this._drawColorBox(t,e,o,x,n),y=Math.max(g.lineHeight,d)),s=0,c=i.length;s<c;++s)w(i[s]),y=g.lineHeight;Af(r.after,w)}b=0,y=g.lineHeight,Af(this.afterBody,w),e.y-=f}},{key:"drawFooter",value:function(e,t,n){var r,a,i=this.footer,o=i.length;if(o){var s=Rd(n.rtl,this.x,this.width);for(e.x=Qg(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=s.textAlign(n.footerAlign),t.textBaseline="middle",r=jp(n.footerFont),t.fillStyle=n.footerColor,t.font=r.string,a=0;a<o;++a)t.fillText(i[a],s.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+n.footerSpacing}}},{key:"drawBackground",value:function(e,t,n,r){var a=this.xAlign,i=this.yAlign,o=e.x,s=e.y,u=n.width,c=n.height,l=Wp(r.cornerRadius),f=l.topLeft,h=l.topRight,p=l.bottomLeft,d=l.bottomRight;t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(o+f,s),"top"===i&&this.drawCaret(e,t,n,r),t.lineTo(o+u-h,s),t.quadraticCurveTo(o+u,s,o+u,s+h),"center"===i&&"right"===a&&this.drawCaret(e,t,n,r),t.lineTo(o+u,s+c-d),t.quadraticCurveTo(o+u,s+c,o+u-d,s+c),"bottom"===i&&this.drawCaret(e,t,n,r),t.lineTo(o+p,s+c),t.quadraticCurveTo(o,s+c,o,s+c-p),"center"===i&&"left"===a&&this.drawCaret(e,t,n,r),t.lineTo(o,s+f),t.quadraticCurveTo(o,s,o+f,s),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}},{key:"_updateAnimationTarget",value:function(e){var t=this.chart,n=this.$animations,r=n&&n.x,a=n&&n.y;if(r||a){var i=Hg[e.position].call(this,this._active,this._eventPosition);if(!i)return;var o=this._size=Kg(this,e),s=Object.assign({},i,this._size),u=Yg(t,e,s),c=$g(e,s,u,t);r._to===c.x&&a._to===c.y||(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=o.width,this.height=o.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,c))}}},{key:"_willRender",value:function(){return!!this.opacity}},{key:"draw",value:function(e){var t=this.options.setContext(this.getContext()),n=this.opacity;if(n){this._updateAnimationTarget(t);var r={width:this.width,height:this.height},a={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;var i=Vp(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(a,e,r,t),Od(e,t.textDirection),a.y+=i.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),Md(e,t.textDirection),e.restore())}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(e,t){var n=this,r=this._active,a=e.map((function(e){var t=e.datasetIndex,r=e.index,a=n.chart.getDatasetMeta(t);if(!a)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:a.data[r],index:r}})),i=!Rf(r,a),o=this._positionChanged(a,t);(i||o)&&(this._active=a,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}},{key:"handleEvent",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;var r=this.options,a=this._active||[],i=this._getActiveElements(e,a,t,n),o=this._positionChanged(i,e),s=t||!Rf(i,a)||o;return s&&(this._active=i,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),s}},{key:"_getActiveElements",value:function(e,t,n,r){var a=this.options;if("mouseout"===e.type)return[];if(!r)return t;var i=this.chart.getElementsAtEventForMode(e,a.mode,a,n);return a.reverse&&i.reverse(),i}},{key:"_positionChanged",value:function(e,t){var n=this.caretX,r=this.caretY,a=this.options,i=Hg[a.position].call(this,e,t);return!1!==i&&(n!==i.x||r!==i.y)}}]),n}(wm);ty.positioners=Hg;var ny={id:"tooltip",_element:ty,positioners:Hg,afterInit:function(e,t,n){n&&(e.tooltip=new ty({chart:e,options:n}))},beforeUpdate:function(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset:function(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw:function(e){var t=e.tooltip;if(t&&t._willRender()){var n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",n))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent:function(e,t){if(e.tooltip){var n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:function(e,t){return t.bodyFont.size},boxWidth:function(e,t){return t.bodyFont.size},multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:xf,title:function(e){if(e.length>0){var t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:xf,beforeBody:xf,beforeLabel:xf,label:function(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;var t=e.dataset.label||"";t&&(t+=": ");var n=e.formattedValue;return kf(n)||(t+=n),t},labelColor:function(e){var t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor:function(){return this.options.bodyColor},labelPointStyle:function(e){var t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:xf,afterBody:xf,beforeFooter:xf,footer:xf,afterFooter:xf}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:function(e){return"filter"!==e&&"itemSort"!==e&&"external"!==e},_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function ry(e,t,n,r){var a=e.indexOf(t);return-1===a?function(e,t,n,r){return"string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n}(e,t,n,r):a!==e.lastIndexOf(t)?n:a}var ay=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e))._startValue=void 0,r._valueRange=0,r._addedLabels=[],r}return(0,C.Z)(n,[{key:"init",value:function(e){var t=this._addedLabels;if(t.length){var r,a=this.getLabels(),i=Oo(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o.index,u=o.label;a[s]===u&&a.splice(s,1)}}catch(c){i.e(c)}finally{i.f()}this._addedLabels=[]}bf(R(n.prototype),"init",this).call(this,e)}},{key:"parse",value:function(e,t){if(kf(e))return null;var n=this.getLabels();return function(e,t){return null===e?null:hh(Math.round(e),0,t)}(t=isFinite(t)&&n[t]===e?t:ry(n,e,Nf(t,e),this._addedLabels),n.length-1)}},{key:"determineDataLimits",value:function(){var e=this.getUserBounds(),t=e.minDefined,n=e.maxDefined,r=this.getMinMax(!0),a=r.min,i=r.max;"ticks"===this.options.bounds&&(t||(a=0),n||(i=this.getLabels().length-1)),this.min=a,this.max=i}},{key:"buildTicks",value:function(){var e=this.min,t=this.max,n=this.options.offset,r=[],a=this.getLabels();a=0===e&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(var i=e;i<=t;i++)r.push({value:i});return r}},{key:"getLabelForValue",value:function(e){var t=this.getLabels();return e>=0&&e<t.length?t[e]:e}},{key:"configure",value:function(){bf(R(n.prototype),"configure",this).call(this),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}},{key:"getPixelForValue",value:function(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}},{key:"getPixelForTick",value:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}},{key:"getValueForPixel",value:function(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}},{key:"getBasePixel",value:function(){return this.bottom}}]),n}(Om);function iy(e,t){var n,r,a,i,o=[],s=e.bounds,u=e.step,c=e.min,l=e.max,f=e.precision,h=e.count,p=e.maxTicks,d=e.maxDigits,m=e.includeBounds,v=u||1,g=p-1,y=t.min,b=t.max,x=!kf(c),w=!kf(l),k=!kf(h),S=(b-y)/(d+1),_=eh((b-y)/g/v)*v;if(_<1e-14&&!x&&!w)return[{value:y},{value:b}];(i=Math.ceil(b/_)-Math.floor(y/_))>g&&(_=eh(i*_/g/v)*v),kf(f)||(n=Math.pow(10,f),_=Math.ceil(_*n)/n),"ticks"===s?(r=Math.floor(y/_)*_,a=Math.ceil(b/_)*_):(r=y,a=b),x&&w&&u&&function(e,t){var n=Math.round(e);return n-t<=e&&n+t>=e}((l-c)/u,_/1e3)?(_=(l-c)/(i=Math.round(Math.min((l-c)/_,p))),r=c,a=l):k?_=((a=w?l:a)-(r=x?c:r))/(i=h-1):i=nh(i=(a-r)/_,Math.round(i),_/1e3)?Math.round(i):Math.ceil(i);var T=Math.max(oh(_),oh(r));n=Math.pow(10,kf(f)?T:f),r=Math.round(r*n)/n,a=Math.round(a*n)/n;var I=0;for(x&&(m&&r!==c?(o.push({value:c}),r<c&&I++,nh(Math.round((r+I*_)*n)/n,c,oy(c,S,e))&&I++):r<c&&I++);I<i;++I)o.push({value:Math.round((r+I*_)*n)/n});return w&&m&&a!==l?o.length&&nh(o[o.length-1].value,l,oy(l,S,e))?o[o.length-1].value=l:o.push({value:l}):w&&a!==l||o.push({value:a}),o}function oy(e,t,n){var r=n.horizontal,a=ah(n.minRotation),i=(r?Math.sin(a):Math.cos(a))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}ay.id="category",ay.defaults={ticks:{callback:ay.prototype.getLabelForValue}};var sy=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).start=void 0,r.end=void 0,r._startValue=void 0,r._endValue=void 0,r._valueRange=0,r}return(0,C.Z)(n,[{key:"parse",value:function(e,t){return kf(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}},{key:"handleTickRangeOptions",value:function(){var e=this.options.beginAtZero,t=this.getUserBounds(),n=t.minDefined,r=t.maxDefined,a=this.min,i=this.max,o=function(e){return a=n?a:e},s=function(e){return i=r?i:e};if(e){var u=Jf(a),c=Jf(i);u<0&&c<0?s(0):u>0&&c>0&&o(0)}if(a===i){var l=1;(i>=Number.MAX_SAFE_INTEGER||a<=Number.MIN_SAFE_INTEGER)&&(l=Math.abs(.05*i)),s(i+l),e||o(a-l)}this.min=a,this.max=i}},{key:"getTickLimit",value:function(){var e,t=this.options.ticks,n=t.maxTicksLimit,r=t.stepSize;return r?(e=Math.ceil(this.max/r)-Math.floor(this.min/r)+1)>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(e," ticks. Limiting to 1000.")),e=1e3):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}},{key:"computeTickLimit",value:function(){return Number.POSITIVE_INFINITY}},{key:"buildTicks",value:function(){var e=this.options,t=e.ticks,n=this.getTickLimit(),r=iy({maxTicks:n=Math.max(2,n),bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&rh(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}},{key:"configure",value:function(){var e=this.ticks,t=this.min,r=this.max;if(bf(R(n.prototype),"configure",this).call(this),this.options.offset&&e.length){var a=(r-t)/Math.max(e.length-1,1)/2;t-=a,r+=a}this._startValue=t,this._endValue=r,this._valueRange=r-t}},{key:"getLabelForValue",value:function(e){return Ad(e,this.chart.options.locale,this.options.ticks.format)}}]),n}(Om),uy=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"determineDataLimits",value:function(){var e=this.getMinMax(!0),t=e.min,n=e.max;this.min=Tf(t)?t:0,this.max=Tf(n)?n:1,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){var e=this.isHorizontal(),t=e?this.width:this.height,n=ah(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/r))}},{key:"getPixelForValue",value:function(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}]),n}(sy);function cy(e){return 1===e/Math.pow(10,Math.floor(Qf(e)))}uy.id="linear",uy.defaults={ticks:{callback:Sm.formatters.numeric}};var ly=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).start=void 0,r.end=void 0,r._startValue=void 0,r._valueRange=0,r}return(0,C.Z)(n,[{key:"parse",value:function(e,t){var n=sy.prototype.parse.apply(this,[e,t]);if(0!==n)return Tf(n)&&n>0?n:null;this._zero=!0}},{key:"determineDataLimits",value:function(){var e=this.getMinMax(!0),t=e.min,n=e.max;this.min=Tf(t)?Math.max(0,t):null,this.max=Tf(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}},{key:"handleTickRangeOptions",value:function(){var e=this.getUserBounds(),t=e.minDefined,n=e.maxDefined,r=this.min,a=this.max,i=function(e){return r=t?r:e},o=function(e){return a=n?a:e},s=function(e,t){return Math.pow(10,Math.floor(Qf(e))+t)};r===a&&(r<=0?(i(1),o(10)):(i(s(r,-1)),o(s(a,1)))),r<=0&&i(s(a,-1)),a<=0&&o(s(r,1)),this._zero&&this.min!==this._suggestedMin&&r===s(this.min,0)&&i(s(r,-1)),this.min=r,this.max=a}},{key:"buildTicks",value:function(){var e=this.options,t=function(e,t){var n=Math.floor(Qf(t.max)),r=Math.ceil(t.max/Math.pow(10,n)),a=[],i=If(e.min,Math.pow(10,Math.floor(Qf(t.min)))),o=Math.floor(Qf(i)),s=Math.floor(i/Math.pow(10,o)),u=o<0?Math.pow(10,Math.abs(o)):1;do{a.push({value:i,major:cy(i)}),10===++s&&(s=1,u=++o>=0?1:u),i=Math.round(s*Math.pow(10,o)*u)/u}while(o<n||o===n&&s<r);var c=If(e.max,i);return a.push({value:c,major:cy(i)}),a}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&rh(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}},{key:"getLabelForValue",value:function(e){return void 0===e?"0":Ad(e,this.chart.options.locale,this.options.ticks.format)}},{key:"configure",value:function(){var e=this.min;bf(R(n.prototype),"configure",this).call(this),this._startValue=Qf(e),this._valueRange=Qf(this.max)-Qf(e)}},{key:"getPixelForValue",value:function(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Qf(e)-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(e){var t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}]),n}(Om);function fy(e){var t=e.ticks;if(t.display&&e.display){var n=Vp(t.backdropPadding);return Nf(t.font&&t.font.size,yp.font.size)+n.height}return 0}function hy(e,t,n,r,a){return e===r||e===a?{start:t-n/2,end:t+n/2}:e<r||e>a?{start:t-n,end:t}:{start:t,end:t+n}}function py(e){for(var t,n,r,a={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},a),o=[],s=[],u=e._pointLabels.length,c=e.options.pointLabels,l=c.centerPointLabels?Hf/u:0,f=0;f<u;f++){var h=c.setContext(e.getPointLabelContext(f));s[f]=h.padding;var p=e.getPointPosition(f,e.drawingArea+s[f],l),d=jp(h.font),m=(t=e.ctx,n=d,r=Sf(r=e._pointLabels[f])?r:[r],{w:xp(t,n.string,r),h:r.length*n.lineHeight});o[f]=m;var v=lh(e.getIndexAngle(f)+l),g=Math.round(ih(v));dy(i,a,v,hy(g,p.x,m.w,0,180),hy(g,p.y,m.h,90,270))}e.setCenterPoint(a.l-i.l,i.r-a.r,a.t-i.t,i.b-a.b),e._pointLabelItems=function(e,t,n){for(var r=[],a=e._pointLabels.length,i=e.options,o=fy(i)/2,s=e.drawingArea,u=i.pointLabels.centerPointLabels?Hf/a:0,c=0;c<a;c++){var l=e.getPointPosition(c,s+o+n[c],u),f=Math.round(ih(lh(l.angle+Xf))),h=t[c],p=gy(l.y,h.h,f),d=my(f),m=vy(l.x,h.w,d);r.push({x:l.x,y:p,textAlign:d,left:m,top:p,right:m+h.w,bottom:p+h.h})}return r}(e,o,s)}function dy(e,t,n,r,a){var i=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n)),s=0,u=0;r.start<t.l?(s=(t.l-r.start)/i,e.l=Math.min(e.l,t.l-s)):r.end>t.r&&(s=(r.end-t.r)/i,e.r=Math.max(e.r,t.r+s)),a.start<t.t?(u=(t.t-a.start)/o,e.t=Math.min(e.t,t.t-u)):a.end>t.b&&(u=(a.end-t.b)/o,e.b=Math.max(e.b,t.b+u))}function my(e){return 0===e||180===e?"center":e<180?"left":"right"}function vy(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function gy(e,t,n){return 90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t),e}function yy(e,t,n,r){var a=e.ctx;if(n)a.arc(e.xCenter,e.yCenter,t,0,Zf);else{var i=e.getPointPosition(0,t);a.moveTo(i.x,i.y);for(var o=1;o<r;o++)i=e.getPointPosition(o,t),a.lineTo(i.x,i.y)}}ly.id="logarithmic",ly.defaults={ticks:{callback:Sm.formatters.logarithmic,major:{enabled:!0}}};var by=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).xCenter=void 0,r.yCenter=void 0,r.drawingArea=void 0,r._pointLabels=[],r._pointLabelItems=[],r}return(0,C.Z)(n,[{key:"setDimensions",value:function(){var e=this._padding=Vp(fy(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}},{key:"determineDataLimits",value:function(){var e=this.getMinMax(!1),t=e.min,n=e.max;this.min=Tf(t)&&!isNaN(t)?t:0,this.max=Tf(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){return Math.ceil(this.drawingArea/fy(this.options))}},{key:"generateTickLabels",value:function(e){var t=this;sy.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((function(e,n){var r=Ef(t.options.pointLabels.callback,[e,n],t);return r||0===r?r:""})).filter((function(e,n){return t.chart.getDataVisibility(n)}))}},{key:"fit",value:function(){var e=this.options;e.display&&e.pointLabels.display?py(this):this.setCenterPoint(0,0,0,0)}},{key:"setCenterPoint",value:function(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}},{key:"getIndexAngle",value:function(e){return lh(e*(Zf/(this._pointLabels.length||1))+ah(this.options.startAngle||0))}},{key:"getDistanceFromCenterForValue",value:function(e){if(kf(e))return NaN;var t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}},{key:"getValueForDistanceFromCenter",value:function(e){if(kf(e))return NaN;var t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}},{key:"getPointLabelContext",value:function(e){var t=this._pointLabels||[];if(e>=0&&e<t.length){var n=t[e];return function(e,t,n){return Hp(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}},{key:"getPointPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.getIndexAngle(e)-Xf+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}},{key:"getPointPositionForValue",value:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}},{key:"getBasePosition",value:function(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}},{key:"getPointLabelPosition",value:function(e){var t=this._pointLabelItems[e];return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}},{key:"drawBackground",value:function(){var e=this.options,t=e.backgroundColor,n=e.grid.circular;if(t){var r=this.ctx;r.save(),r.beginPath(),yy(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=t,r.fill(),r.restore()}}},{key:"drawGrid",value:function(){var e,t,n,r=this,a=this.ctx,i=this.options,o=i.angleLines,s=i.grid,u=this._pointLabels.length;if(i.pointLabels.display&&function(e,t){for(var n=e.ctx,r=e.options.pointLabels,a=t-1;a>=0;a--){var i=r.setContext(e.getPointLabelContext(a)),o=jp(i.font),s=e._pointLabelItems[a],u=s.x,c=s.y,l=s.textAlign,f=s.left,h=s.top,p=s.right,d=s.bottom,m=i.backdropColor;if(!kf(m)){var v=Wp(i.borderRadius),g=Vp(i.backdropPadding);n.fillStyle=m;var y=f-g.left,b=h-g.top,x=p-f+g.width,w=d-h+g.height;Object.values(v).some((function(e){return 0!==e}))?(n.beginPath(),Mp(n,{x:y,y:b,w:x,h:w,radius:v}),n.fill()):n.fillRect(y,b,x,w)}Ap(n,e._pointLabels[a],u,c+o.lineHeight/2,o,{color:i.color,textAlign:l,textBaseline:"middle"})}}(this,u),s.display&&this.ticks.forEach((function(e,n){if(0!==n){t=r.getDistanceFromCenterForValue(e.value);var a=s.setContext(r.getContext(n-1));!function(e,t,n,r){var a=e.ctx,i=t.circular,o=t.color,s=t.lineWidth;!i&&!r||!o||!s||n<0||(a.save(),a.strokeStyle=o,a.lineWidth=s,a.setLineDash(t.borderDash),a.lineDashOffset=t.borderDashOffset,a.beginPath(),yy(e,n,i,r),a.closePath(),a.stroke(),a.restore())}(r,a,t,u)}})),o.display){for(a.save(),e=u-1;e>=0;e--){var c=o.setContext(this.getPointLabelContext(e)),l=c.color,f=c.lineWidth;f&&l&&(a.lineWidth=f,a.strokeStyle=l,a.setLineDash(c.borderDash),a.lineDashOffset=c.borderDashOffset,t=this.getDistanceFromCenterForValue(i.ticks.reverse?this.min:this.max),n=this.getPointPosition(e,t),a.beginPath(),a.moveTo(this.xCenter,this.yCenter),a.lineTo(n.x,n.y),a.stroke())}a.restore()}}},{key:"drawBorder",value:function(){}},{key:"drawLabels",value:function(){var e=this,t=this.ctx,n=this.options,r=n.ticks;if(r.display){var a,i,o=this.getIndexAngle(0);t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(o),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((function(o,s){if(0!==s||n.reverse){var u=r.setContext(e.getContext(s)),c=jp(u.font);if(a=e.getDistanceFromCenterForValue(e.ticks[s].value),u.showLabelBackdrop){t.font=c.string,i=t.measureText(o.label).width,t.fillStyle=u.backdropColor;var l=Vp(u.backdropPadding);t.fillRect(-i/2-l.left,-a-c.size/2-l.top,i+l.width,c.size+l.height)}Ap(t,o.label,0,-a,c,{color:u.color})}})),t.restore()}}},{key:"drawTitle",value:function(){}}]),n}(sy);by.id="radialLinear",by.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Sm.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:function(e){return e},padding:5,centerPointLabels:!1}},by.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},by.descriptors={angleLines:{_fallback:"grid"}};var xy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},wy=Object.keys(xy);function ky(e,t){return e-t}function Sy(e,t){if(kf(t))return null;var n=e._adapter,r=e._parseOpts,a=r.parser,i=r.round,o=r.isoWeekday,s=t;return"function"===typeof a&&(s=a(s)),Tf(s)||(s="string"===typeof a?n.parse(s,a):n.parse(s)),null===s?null:(i&&(s="week"!==i||!th(o)&&!0!==o?n.startOf(s,i):n.startOf(s,"isoWeek",o)),+s)}function _y(e,t,n,r){for(var a=wy.length,i=wy.indexOf(e);i<a-1;++i){var o=xy[wy[i]],s=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(s*o.size))<=r)return wy[i]}return wy[a-1]}function Ty(e,t,n){if(n){if(n.length){var r=dh(n,t),a=r.lo,i=r.hi;e[n[a]>=t?n[a]:n[i]]=!0}}else e[t]=!0}function Iy(e,t,n){var r,a,i=[],o={},s=t.length;for(r=0;r<s;++r)o[a=t[r]]=r,i.push({value:a,major:!1});return 0!==s&&n?function(e,t,n,r){var a,i,o=e._adapter,s=+o.startOf(t[0].value,r),u=t[t.length-1].value;for(a=s;a<=u;a=+o.add(a,1,r))(i=n[a])>=0&&(t[i].major=!0);return t}(e,i,o,n):i}var Ny=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e))._cache={data:[],labels:[],all:[]},r._unit="day",r._majorUnit=void 0,r._offsets={},r._normalized=!1,r._parseOpts=void 0,r}return(0,C.Z)(n,[{key:"init",value:function(e,t){var r=e.time||(e.time={}),a=this._adapter=new Bm._date(e.adapters.date);a.init(t),Pf(r.displayFormats,a.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},bf(R(n.prototype),"init",this).call(this,e),this._normalized=t.normalized}},{key:"parse",value:function(e,t){return void 0===e?null:Sy(this,e)}},{key:"beforeLayout",value:function(){bf(R(n.prototype),"beforeLayout",this).call(this),this._cache={data:[],labels:[],all:[]}}},{key:"determineDataLimits",value:function(){var e=this.options,t=this._adapter,n=e.time.unit||"day",r=this.getUserBounds(),a=r.min,i=r.max,o=r.minDefined,s=r.maxDefined;function u(e){o||isNaN(e.min)||(a=Math.min(a,e.min)),s||isNaN(e.max)||(i=Math.max(i,e.max))}o&&s||(u(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||u(this.getMinMax(!1))),a=Tf(a)&&!isNaN(a)?a:+t.startOf(Date.now(),n),i=Tf(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(a,i-1),this.max=Math.max(a+1,i)}},{key:"_getLabelBounds",value:function(){var e=this.getLabelTimestamps(),t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}},{key:"buildTicks",value:function(){var e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);var a=this.min,i=function(e,t,n){for(var r=0,a=e.length;r<a&&e[r]<t;)r++;for(;a>r&&e[a-1]>n;)a--;return r>0||a<e.length?e.slice(r,a):e}(r,a,this.max);return this._unit=t.unit||(n.autoSkip?_y(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):function(e,t,n,r,a){for(var i=wy.length-1;i>=wy.indexOf(n);i--){var o=wy[i];if(xy[o].common&&e._adapter.diff(a,r,o)>=t-1)return o}return wy[n?wy.indexOf(n):0]}(this,i.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(var t=wy.indexOf(e)+1,n=wy.length;t<n;++t)if(xy[wy[t]].common)return wy[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&i.reverse(),Iy(this,i,this._majorUnit)}},{key:"afterAutoSkip",value:function(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((function(e){return+e.value})))}},{key:"initOffsets",value:function(e){var t,n,r=0,a=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),r=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,n=this.getDecimalForValue(e[e.length-1]),a=1===e.length?n:(n-this.getDecimalForValue(e[e.length-2]))/2);var i=e.length<3?.5:.25;r=hh(r,0,i),a=hh(a,0,i),this._offsets={start:r,end:a,factor:1/(r+1+a)}}},{key:"_generate",value:function(){var e,t,n=this._adapter,r=this.min,a=this.max,i=this.options,o=i.time,s=o.unit||_y(o.minUnit,r,a,this._getLabelCapacity(r)),u=Nf(o.stepSize,1),c="week"===s&&o.isoWeekday,l=th(c)||!0===c,f={},h=r;if(l&&(h=+n.startOf(h,"isoWeek",c)),h=+n.startOf(h,l?"day":s),n.diff(a,r,s)>1e5*u)throw new Error(r+" and "+a+" are too far apart with stepSize of "+u+" "+s);var p="data"===i.ticks.source&&this.getDataTimestamps();for(e=h,t=0;e<a;e=+n.add(e,u,s),t++)Ty(f,e,p);return e!==a&&"ticks"!==i.bounds&&1!==t||Ty(f,e,p),Object.keys(f).sort((function(e,t){return e-t})).map((function(e){return+e}))}},{key:"getLabelForValue",value:function(e){var t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}},{key:"_tickFormatFunction",value:function(e,t,n,r){var a=this.options,i=a.time.displayFormats,o=this._unit,s=this._majorUnit,u=o&&i[o],c=s&&i[s],l=n[t],f=s&&c&&l&&l.major,h=this._adapter.format(e,r||(f?c:u)),p=a.ticks.callback;return p?Ef(p,[h,t,n],this):h}},{key:"generateTickLabels",value:function(e){var t,n,r;for(t=0,n=e.length;t<n;++t)(r=e[t]).label=this._tickFormatFunction(r.value,t,e)}},{key:"getDecimalForValue",value:function(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}},{key:"getPixelForValue",value:function(e){var t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}},{key:"getValueForPixel",value:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}},{key:"_getLabelSize",value:function(e){var t=this.options.ticks,n=this.ctx.measureText(e).width,r=ah(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(r),i=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:n*a+o*i,h:n*i+o*a}}},{key:"_getLabelCapacity",value:function(e){var t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,a=this._tickFormatFunction(e,0,Iy(this,[e],this._majorUnit),r),i=this._getLabelSize(a),o=Math.floor(this.isHorizontal()?this.width/i.w:this.height/i.h)-1;return o>0?o:1}},{key:"getDataTimestamps",value:function(){var e,t,n=this._cache.data||[];if(n.length)return n;var r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}},{key:"getLabelTimestamps",value:function(){var e,t,n=this._cache.labels||[];if(n.length)return n;var r=this.getLabels();for(e=0,t=r.length;e<t;++e)n.push(Sy(this,r[e]));return this._cache.labels=this._normalized?n:this.normalize(n)}},{key:"normalize",value:function(e){return bh(e.sort(ky))}}]),n}(Om);function Cy(e,t,n){var r,a,i,o,s=0,u=e.length-1;if(n){if(t>=e[s].pos&&t<=e[u].pos){var c=mh(e,"pos",t);s=c.lo,u=c.hi}var l=e[s];r=l.pos,i=l.time;var f=e[u];a=f.pos,o=f.time}else{if(t>=e[s].time&&t<=e[u].time){var h=mh(e,"time",t);s=h.lo,u=h.hi}var p=e[s];r=p.time,i=p.pos;var d=e[u];a=d.time,o=d.pos}var m=a-r;return m?i+(o-i)*(t-r)/m:i}Ny.id="time",Ny.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};var Ey=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e))._table=[],r._minPos=void 0,r._tableRange=void 0,r}return(0,C.Z)(n,[{key:"initOffsets",value:function(){var e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Cy(t,this.min),this._tableRange=Cy(t,this.max)-this._minPos,bf(R(n.prototype),"initOffsets",this).call(this,e)}},{key:"buildLookupTable",value:function(e){var t,n,r,a,i,o=this.min,s=this.max,u=[],c=[];for(t=0,n=e.length;t<n;++t)(a=e[t])>=o&&a<=s&&u.push(a);if(u.length<2)return[{time:o,pos:0},{time:s,pos:1}];for(t=0,n=u.length;t<n;++t)i=u[t+1],r=u[t-1],a=u[t],Math.round((i+r)/2)!==a&&c.push({time:a,pos:t/(n-1)});return c}},{key:"_getTimestampsForTable",value:function(){var e=this._cache.all||[];if(e.length)return e;var t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e}},{key:"getDecimalForValue",value:function(e){return(Cy(this._table,e)-this._minPos)/this._tableRange}},{key:"getValueForPixel",value:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Cy(this._table,n*this._tableRange+this._minPos,!0)}}]),n}(Ny);Ey.id="timeseries",Ey.defaults=Ny.defaults;var Ay=n(5987),Ry=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],Oy="label";function My(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Dy(e,t){e.labels=t}function Fy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oy,r=[];e.datasets=t.map((function(t){var a=e.datasets.find((function(e){return e[n]===t[n]}));return a&&t.data&&!r.includes(a)?(r.push(a),Object.assign(a,t),a):Lt({},t)}))}function Py(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oy,n={labels:[],datasets:[]};return Dy(n,e.labels),Fy(n,e.datasets,t),n}function Ly(e,t){var n=e.height,r=void 0===n?150:n,a=e.width,i=void 0===a?300:a,o=e.redraw,s=void 0!==o&&o,u=e.datasetIdKey,c=e.type,l=e.data,f=e.options,h=e.plugins,p=void 0===h?[]:h,d=e.fallbackContent,m=e.updateMode,v=(0,Ay.Z)(e,Ry),g=(0,S.useRef)(null),y=(0,S.useRef)(),b=function(){g.current&&(y.current=new Xv(g.current,{type:c,data:Py(l,u),options:f&&Lt({},f),plugins:p}),My(t,y.current))},x=function(){My(t,null),y.current&&(y.current.destroy(),y.current=null)};return(0,S.useEffect)((function(){var e,t;!s&&y.current&&f&&(e=y.current,t=f,Object.assign(e.options,t))}),[s,f]),(0,S.useEffect)((function(){!s&&y.current&&Dy(y.current.config.data,l.labels)}),[s,l.labels]),(0,S.useEffect)((function(){!s&&y.current&&l.datasets&&Fy(y.current.config.data,l.datasets,u)}),[s,l.datasets]),(0,S.useEffect)((function(){y.current&&(s?(x(),setTimeout(b)):y.current.update(m))}),[s,f,l.labels,l.datasets,m]),(0,S.useEffect)((function(){y.current&&(x(),setTimeout(b))}),[c]),(0,S.useEffect)((function(){return b(),function(){return x()}}),[]),S.createElement("canvas",Object.assign({ref:g,role:"img",height:r,width:i},v),d)}var zy=(0,S.forwardRef)(Ly);function By(e,t){return Xv.register(t),(0,S.forwardRef)((function(t,n){return S.createElement(zy,Object.assign({},t,{ref:n,type:e}))}))}var Wy,Vy,jy,Uy,Hy,Zy,Gy,qy=By("bar",dm),Ky=By("radar",xm),Xy=By("pie",bm),Yy=[],$y=[],Qy=[],Jy=0,eb=0,tb=0,nb=0,rb=0,ab=0,ib=0,ob={fontSizes:[25,60],padding:1,transitionDuration:1e3,colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b"],enableTooltip:!0,deterministic:!1,fontFamily:"impact",fontStyle:"normal",fontWeight:"normal",rotations:3,rotationAngles:[0,90],scale:"sqrt",spiral:"archimedean"};function sb(){n(4164);var e=Me();Vy=e.state.date,console.log(Vy),jy=Vy.substring(0,4),Uy=Vy.substring(4,6),Hy=Vy.substring(6),Zy=e.state.question,Gy=e.state.category,Wy=e.state.fileurl;var t=e.state.audioResult1,r=e.state.audioResult2,a=e.state.duration,i=e.state.script,o=tn((function(e){return e.User.name})),s=(e.state.word,(Yy=e.state.word).slice());s.sort((function(e,t){return t.value-e.value})),s.length>=10&&(s.length=10);for(var u=[],c=0;c<s.length;c++)u[c]=s[c].text;var l=[];for(c=0;c<s.length;c++)l[c]=s[c].value;Xv.register(rg,ay,uy,wg,by,dg,hg,zg,Ug,ny,Vg),$y=e.state.left_eye,Qy=e.state.right_eye;var f=S.useRef(null),h=S.useRef(null);Jy=e.state.angryvalue,nb=e.state.happyvalue,eb=e.state.disgustedvalue,rb=e.state.neutralvalue,ab=e.state.sadvalue,ib=e.state.surprisedvalue,tb=e.state.fearfulvalue;var p={labels:["\ubd84\ub178","\ud589\ubcf5","\ud610\uc624","\uce68\ucc29","\uc2ac\ud514","\ub180\ub78c","\uae34\uc7a5"],datasets:[{data:[Jy,nb,eb,rb,ab,ib,tb],label:"\uac10\uc815 \uc9c0\uc218",borderColor:"#FF6869",backgroundColor:"#FF6869"}]},d={labels:u,maintainAspectRatio:!1,datasets:[{label:"\ub2e8\uc5b4 \ube48\ub3c4",data:l,backgroundColor:["rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(54, 162, 235)","rgb(153, 102, 255)","#B1B2FF","#FFD1D1","#C4DFAA","#9ADCFF"],hoverOffset:4}]},m={labels:["\ubd84\ub178","\ud589\ubcf5","\ud610\uc624","\uce68\ucc29","\uc2ac\ud514","\ub180\ub78c","\uae34\uc7a5"],datasets:[{label:"\uac10\uc815 \uc9c0\uc218(%)",data:[Jy,nb,eb,rb,ab,ib,tb],backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},v={labels:t,datasets:[{data:t,label:"\ubaa9\uc18c\ub9ac \ud06c\uae30",borderColor:"#FF6869",backgroundColor:"#FF6869"}]};return(0,fn.jsxs)("div",{id:"resultdiv",children:[(0,fn.jsx)("div",{id:"resulttitle",children:(0,fn.jsx)("h2",{children:" \uba74\uc811 \ubd84\uc11d \uacb0\uacfc "})}),(0,fn.jsxs)("div",{className:"info",children:[(0,fn.jsxs)("div",{className:"entity",children:[" ",(0,fn.jsx)("div",{className:"type",children:"\uc774\ub984"})," ",(0,fn.jsx)("div",{className:"content",children:o})," "]}),(0,fn.jsxs)("div",{className:"entity",children:[" ",(0,fn.jsx)("div",{className:"type",children:"\uac80\uc0ac \uc77c\uc2dc"})," ",(0,fn.jsxs)("div",{className:"content",children:[jy,"\ub144 ",Uy,"\uc6d4 ",Hy,"\uc77c"]})," "]}),(0,fn.jsxs)("div",{className:"entity",children:[" ",(0,fn.jsx)("div",{className:"type",children:"\ubd84\uc57c"})," ",(0,fn.jsx)("div",{className:"content",children:Gy})," "]})]}),(0,fn.jsx)("div",{className:"questionArea",children:(0,fn.jsx)("label",{id:"questionArea-content",children:Zy})}),(0,fn.jsx)("hr",{}),(0,fn.jsxs)("div",{className:"vision",children:[(0,fn.jsx)("div",{className:"subtitle",children:(0,fn.jsx)("h3",{children:" Vision Analysis "})}),(0,fn.jsx)("div",{className:"analyzeimage",children:(0,fn.jsx)("div",{id:"interviewVideo",children:(0,fn.jsxs)("video",{id:"video",controls:"controls",loop:"loop",children:[(0,fn.jsx)("source",{src:Wy,type:"video/webm"}),"Video Error"]})})}),(0,fn.jsxs)("div",{className:"Explanation",children:[(0,fn.jsx)("p",{className:"explanation-header",children:"\ub2f5\ubcc0"}),(0,fn.jsx)("p",{className:"explanation-contenet",children:i})]})]}),(0,fn.jsxs)("div",{className:"resultArea",children:[(0,fn.jsx)("div",{className:"hr"}),(0,fn.jsxs)("div",{id:"face",children:[(0,fn.jsx)("div",{className:"subtitle",children:(0,fn.jsx)("h3",{children:" \ud45c\uc815 \ubd84\uc11d "})}),(0,fn.jsxs)("div",{className:"analyzeimage",children:[(0,fn.jsxs)("div",{className:"leftdiv",children:[(0,fn.jsx)("p",{className:"graphtitle",children:"\ud45c\uc815 \uc778\uc2dd \uacb0\uacfc"}),(0,fn.jsx)(qy,{className:"inner",options:{indexAxis:"y",maintainAspectRatio:!1,responsive:!1,elements:{bar:{borderWidth:1}},plugins:{legend:{display:!1},title:{display:!1}},scales:{xAxis:{scaleLabel:{display:!1},ticks:{display:!1},gridLines:{display:!1}}}},height:300,data:p})]}),(0,fn.jsx)("div",{className:"rightdiv",children:(0,fn.jsx)(Ky,{className:"inner",data:m})})]}),(0,fn.jsxs)("div",{className:"Explanation",children:[(0,fn.jsx)("p",{className:"explanation-header",children:"\ud574\uc11d"}),(0,fn.jsxs)("p",{className:"explanation-contenet",children:["\uc704 \uadf8\ub798\ud504\ub294 \uba74\uc811\uc744 \uc9c4\ud589\ud558\ub294 \ub3d9\uc548 \uc0ac\uc6a9\uc790\uc758 ",(0,fn.jsx)("b",{children:"\ud45c\uc815 \ubcc0\ud654"}),"\ub97c \ubcf4\uc5ec\uc8fc\ub294 \uadf8\ub798\ud504\uc785\ub2c8\ub2e4.",(0,fn.jsx)("br",{}),"\ubd84\ub178\u2219\ud589\ubcf5\u2219\ud610\uc624\u2219\uce68\ucc29\u2219\uc2ac\ud514\u2219\ub180\ub78c\u2219\uae34\uc7a5 \ucd1d 7\uac00\uc9c0\uc758 \ud45c\uc815 \ubd84\uc11d\uc744 \ud1b5\ud574 \uc804\ubc18\uc801\uc778 \uc5bc\uad74 \ud45c\uc815\uc744 \ud655\uc778 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",(0,fn.jsx)("br",{}),"\uadf8\ub798\ud504\ub97c \ud1b5\ud574 \ud45c\uc815 \ubd84\uc11d \uacb0\uacfc\ub97c \ud655\uc778\ud558\uace0 \ubcf4\uc644\uc774 \ud544\uc694\ud55c \ubd80\ubd84\uc744 \ucd94\uac00\ub85c \uc5f0\uc2b5\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]})]})]}),(0,fn.jsx)("div",{className:"hr"}),(0,fn.jsxs)("div",{id:"iris",children:[(0,fn.jsxs)("div",{className:"subtitle",children:[(0,fn.jsx)("h3",{children:" \uc2dc\uc120 \ucc98\ub9ac "}),(0,fn.jsx)("button",{onClick:function(){return function(){var e=f.current.getContext("2d"),t=h.current.getContext("2d");f.current.width=300,f.current.height=300,h.current.width=300,h.current.height=300,e.strokeStyle="#000000",e.lineWidth=1,e.beginPath(),e.moveTo(0,150),e.lineTo(300,150),e.stroke(),e.beginPath(),e.moveTo(150,0),e.lineTo(150,300),e.stroke(),t.strokeStyle="#000000",t.lineWidth=1,t.beginPath(),t.moveTo(0,150),t.lineTo(300,150),t.stroke(),t.beginPath(),t.moveTo(150,0),t.lineTo(150,300),t.stroke(),e.fillStyle="rgba(237, 109, 133, 1)",e.strokeStyle="rgba(237, 109, 133, 1)",t.fillStyle="rgba(87, 160, 229, 1)",t.strokeStyle="rgba(87, 160, 229, 1)";for(var n=1;n<$y.length;n++)e.beginPath(),e.arc($y[n].x-$y[0].x+150,$y[n].y-$y[0].y+150,5,0,2*Math.PI),e.stroke(),e.fill(),t.beginPath(),t.arc(Qy[n].x-Qy[0].x+150,Qy[n].y-Qy[0].y+150,5,0,2*Math.PI),t.stroke(),t.fill()}()},children:"\uc2dc\uc120 \ucc98\ub9ac \uacb0\uacfc \ud655\uc778\ud558\uae30"})]}),(0,fn.jsxs)("div",{className:"analyzeimage",children:[(0,fn.jsx)("div",{className:"leftdiv",children:(0,fn.jsx)("canvas",{ref:f,className:"iriscanvas"})}),(0,fn.jsx)("div",{className:"rightdiv",children:(0,fn.jsx)("canvas",{ref:h,className:"iriscanvas"})})]}),(0,fn.jsxs)("div",{className:"Explanation",children:[(0,fn.jsx)("p",{className:"explanation-header",children:"\ud574\uc11d"}),(0,fn.jsxs)("p",{className:"explanation-contenet",children:["\uc704 \uadf8\ub798\ud504\ub294 \uba74\uc811\uc744 \uc9c4\ud589\ud558\ub294 \ub3d9\uc548 \uc0ac\uc6a9\uc790\uc758"," ",(0,fn.jsx)("b",{children:"\uc2dc\uc120\uc774 \uba38\ubb34\ub978 \uc601\uc5ed"}),"\uc744 \ubcf4\uc5ec\uc8fc\ub294 \uadf8\ub798\ud504\uc785\ub2c8\ub2e4.",(0,fn.jsx)("br",{})," \uadf8\ub798\ud504\ub294 \uc0ac\uc6a9\uc790\uac00 \uc5f0\uc2b5\ud558\uae30 \ubc84\ud2bc\uc744 \ub20c\ub800\uc744 \ub54c \uc2dc\uc120\uc744 \uae30\uc900\uc73c\ub85c \uadf8\ub824\uc9d1\ub2c8\ub2e4.",(0,fn.jsx)("br",{}),"\uc67c\ucabd \uadf8\ub798\ud504\ub294 ",(0,fn.jsx)("b",{children:"\uc67c\ucabd\uc758 \ud64d\ucc44\uc758 \uc6c0\uc9c1\uc784"}),", \uc624\ub978\ucabd \uadf8\ub798\ud504\ub294"," ",(0,fn.jsx)("b",{children:"\uc624\ub978\ucabd \ud64d\ucc44\uc758 \uc6c0\uc9c1\uc784"}),"\uc744 \ub098\ud0c0\ub0c5\ub2c8\ub2e4.",(0,fn.jsx)("br",{}),"\uc810\uc73c\ub85c \ud45c\uc2dc\ub41c \uc2dc\uc120 \ubd84\ud3ec\uc758 \ud769\uc5b4\uc9d0 \uc815\ub3c4\uac00 \ud06c\ub2e4\uba74, \uc2dc\uc120\uc774 \uc5ec\ub7ec \ubc29\ud5a5\uc73c\ub85c \ubd84\uc0b0 \ub410\ub2e4\ub294 \uac83\uc744 \uc758\ubbf8\ud569\ub2c8\ub2e4."]})]})]}),(0,fn.jsx)("div",{className:"hr"}),(0,fn.jsxs)("div",{id:"word",children:[(0,fn.jsx)("div",{className:"subtitle",children:(0,fn.jsx)("h3",{children:" \ub2e8\uc5b4 \ubd84\uc11d "})}),(0,fn.jsxs)("div",{className:"analyzeimage",children:[(0,fn.jsxs)("div",{className:"leftdiv",children:[(0,fn.jsx)("p",{className:"graphtitle",children:"word cloud"}),(0,fn.jsx)(pf,{className:"inner",options:ob,words:Yy})]}),(0,fn.jsxs)("div",{className:"rightdiv",children:[(0,fn.jsx)("p",{className:"graphtitle",children:"\uc790\uc8fc \uc0ac\uc6a9\ud55c \ub2e8\uc5b4"}),(0,fn.jsx)(Xy,{className:"inner",options:{plugins:{title:{display:!1,font:{size:17,weight:"normal"},padding:{bottom:20}},legend:{display:!0,position:"right",labels:{boxWidth:20,usePointStyle:!0,pointStyle:"circle"}}}},data:d})]})]}),(0,fn.jsxs)("div",{className:"Explanation",children:[(0,fn.jsx)("p",{className:"explanation-header",children:"\ud574\uc11d"}),(0,fn.jsxs)("p",{className:"explanation-contenet",children:["\uc704 \uadf8\ub798\ud504\ub294 \uba74\uc811\uc744 \uc9c4\ud589\ud558\ub294 \ub3d9\uc548 ",(0,fn.jsx)("b",{children:"\uc0ac\uc6a9\uc790\uc758 \uc0ac\uc6a9 \uc5b4\ud718"}),"\ub97c \ubcf4\uc5ec\uc8fc\ub294 \uadf8\ub798\ud504\uc785\ub2c8\ub2e4.",(0,fn.jsx)("br",{}),"\uc67c\ucabd \uadf8\ub798\ud504\ub294 \ubaa8\ub4e0 \ub2e8\uc5b4\uc758 \ube48\ub3c4\ub97c \ud06c\uae30\ub85c \ube44\uad50\ud560 \uc218 \uc788\ub294"," ",(0,fn.jsx)("b",{children:"Word Cloud"}),", \uc624\ub978\ucabd \uadf8\ub798\ud504\ub294"," ",(0,fn.jsx)("b",{children:"\uc0ac\uc6a9 \ube48\ub3c4\uc218\uac00 \ub192\uc740 \uc0c1\uc704 10\uac1c \ub2e8\uc5b4"}),"\ub97c \ub098\ud0c0\ub0c5\ub2c8\ub2e4.",(0,fn.jsx)("br",{}),"\uc774\uc640 \uac19\uc740 \uc9c0\uc6cc\uc790\uc758 \uc5b4\ud718 \uc0ac\uc6a9 \uc2b5\uad00 \ud655\uc778\uc744 \ud1b5\ud574 \ubd80\uc801\uc808\ud558\uac70\ub098 \ubd88\ud544\uc694\ud55c \ub0b4\uc6a9\uc774 \ubc18\ubcf5\ub418\uc9c0 \uc54a\uc558\ub294\uc9c0 \uc810\uac80\ud574 \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4."]})]})]}),(0,fn.jsx)("div",{className:"hr"}),(0,fn.jsxs)("div",{id:"voice",children:[(0,fn.jsx)("div",{className:"subtitle",children:(0,fn.jsx)("h3",{children:" \ubaa9\uc18c\ub9ac \ubd84\uc11d "})}),(0,fn.jsxs)("div",{className:"analyzeimage",children:[(0,fn.jsxs)("div",{className:"leftdiv",children:[(0,fn.jsx)("p",{className:"graphtitle",children:"\ubaa9\uc18c\ub9ac \ud06c\uae30 \ubcc0\ud654"}),(0,fn.jsx)(qy,{className:"inner",options:{indexAxis:"x",maintainAspectRatio:!1,responsive:!0,maxBarThickness:10,elements:{bar:{borderWidth:0}},plugins:{legend:{display:!1,labels:{padding:0}},title:{display:!1}},scales:{xAxis:{scaleLabel:{display:!1},ticks:{display:!1},gridLines:{display:!1},grid:{display:!1,drawThicks:!1}},yAxis:{grid:{display:!1,drawThicks:!1},ticks:{stepSize:1},max:5,min:0}}},data:v})]}),(0,fn.jsxs)("div",{id:"waveformdiv",children:[(0,fn.jsx)("p",{className:"graphtitle",children:"\ubaa9\uc18c\ub9ac \ub5a8\ub9bc \ubcc0\ud654"}),(0,fn.jsx)(df.Z,{barWidth:1,peaks:r,height:250,duration:a,color:"#B1B2FF",progressGradientColors:[[0,"#B1B2FF"]]})]})]}),(0,fn.jsxs)("div",{className:"Explanation",children:[(0,fn.jsx)("p",{className:"explanation-header",children:"\ud574\uc11d"}),(0,fn.jsxs)("p",{className:"explanation-contenet",children:["\uc704 \uadf8\ub798\ud504\ub294 \uba74\uc811\uc744 \uc9c4\ud589\ud558\ub294 \ub3d9\uc548 ",(0,fn.jsx)("b",{children:"\uc0ac\uc6a9\uc790\uc758 \ubaa9\uc18c\ub9ac \ubd84\uc11d \uacb0\uacfc"}),"\ub97c \ubcf4\uc5ec\uc8fc\ub294 \uadf8\ub798\ud504\uc785\ub2c8\ub2e4.",(0,fn.jsx)("br",{}),"\uc67c\ucabd \uadf8\ub798\ud504\ub294 ",(0,fn.jsx)("b",{children:"\ubaa9\uc18c\ub9ac \ud06c\uae30 \ubcc0\ud654"}),"\ub97c \ub2e4\uc12f\ub2e8\uacc4\ub85c \ub098\ud0c0\ub0b4\uace0,"," ","\uc624\ub978\ucabd \uadf8\ub798\ud504\ub294 ",(0,fn.jsx)("b",{children:"\ubaa9\uc18c\ub9ac\uc758 \ub5a8\ub9bc"}),"\uc744 \ub098\ud0c0\ub0c5\ub2c8\ub2e4.",(0,fn.jsx)("br",{}),"\ub192\uc740 \uc804\ub2ec\ub825\uc744 \uc704\ud574 \uc801\ub2f9\ud55c \ud06c\uae30\uc640 \uc77c\uc815\ud55c \ud1a4\uc73c\ub85c \ub9d0\ud558\ub294 \uac83\uc5d0 \uc8fc\uc758\ud574\uc57c\ud569\ub2c8\ub2e4. \ubd84\uc11d \uacb0\uacfc\ub97c \ud1b5\ud574 \uc9c0\uc6d0\uc790\uc758 \uc74c\uc131\uc5d0 \ub300\ud574 \ud655\uc778\ud558\uace0 \ub300\ub2f5\ud558\ub294 \uac83\uc744 \uc5f0\uc2b5\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]})]})]})]})]})}var ub=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,e)}return(0,C.Z)(n,[{key:"render",value:function(){return(0,fn.jsx)(sb,{})}}]),n}(S.PureComponent),cb=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).componentRef=null,r.setComponentRef=function(e){r.componentRef=e},r.reactToPrintContent=function(){return r.componentRef},r.reactToPrintTrigger=function(){return(0,fn.jsxs)("button",{id:"printbtn",children:[" ",(0,fn.jsx)(mf,{size:"30"})," "]})},r}return(0,C.Z)(n,[{key:"render",value:function(){return(0,fn.jsx)("div",{className:"background",style:{backgroundImage:"url(./bgimg5.png)",backgroundSize:"contain",width:"100%",height:"auto",backgroundRepeat:"repeat-y"},children:(0,fn.jsxs)("div",{className:"Result",children:[(0,fn.jsx)(gf(),{content:this.reactToPrintContent,documentTitle:"\uba74\uc811\uc5f0\uc2b5\ubd84\uc11d\uacb0\uacfc\uc9c0",removeAfterPrint:!0,trigger:this.reactToPrintTrigger}),(0,fn.jsx)("div",{id:"result_container",children:(0,fn.jsx)(ub,{ref:this.setComponentRef})})]})})}}]),n}(S.PureComponent),lb=n(5801),fb=function(){function e(t,n){N(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return(0,C.Z)(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),hb=function(){function e(){N(this,e)}return(0,C.Z)(e,[{key:"refCount",value:function(e){return pb("refCount")}},{key:"incRef",value:function(e){return pb("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return pb("time")}},{key:"read",value:function(e){return pb("read")}},{key:"readSync",value:function(e){return pb("readSync")}},{key:"readToGPU",value:function(e,t){return pb("readToGPU")}},{key:"numDataIds",value:function(){return pb("numDataIds")}},{key:"disposeData",value:function(e,t){return pb("disposeData")}},{key:"write",value:function(e,t,n){return pb("write")}},{key:"move",value:function(e,t,n,r,a){return pb("move")}},{key:"memory",value:function(){return pb("memory")}},{key:"floatPrecision",value:function(){return pb("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return pb("dispose")}}]),e}();function pb(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function db(e){return e%2===0?e:e+1}function mb(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function vb(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function gb(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function yb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";gb(kb(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function bb(e){gb(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function xb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||Ob(e)&&!n)for(var r=0;r<e.length;++r)xb(e[r],t,n);else t.push(e);return t}function wb(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function kb(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Sb(e){return e%1===0}function _b(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Tb(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Ib(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:setTimeout;return new Promise((function(a,i){var o=0;!function s(){if(e())a();else{o++;var u=t(o);null!=n&&o>=n?i():r(s,u)}}()}))}function Nb(e,t){var n=t.length;return gb((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),gb(e.every((function(e){return Sb(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function Cb(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:Nb(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function Eb(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function Ab(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function Rb(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function Ob(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function Mb(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function Db(e){return"string"===typeof e||e instanceof String}function Fb(e){return Array.isArray(e)?Fb(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":function(e){return"number"===typeof e}(e)?"float32":Db(e)?"string":function(e){return"boolean"===typeof e}(e)?"bool":"float32"}function Pb(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Lb(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function zb(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Bb(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var s=t[0],u=t.slice(1),c=u.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<s;l++)a[l]=Bb(e+l*c,u,n,r);return a}function Wb(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return Bb(0,e,t,n)}function Vb(e,t){for(var n=jb(e,t),r=0;r<n.length;r++)n[r]=1;return n}function jb(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function Ub(e){e.forEach((function(t){gb(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function Hb(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function Zb(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function Gb(e){return e&&e.then&&"function"===typeof e.then}var qb="tfjsflags",Kb=function(){function e(t){N(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Xb,this.populateURLFlags()}return(0,C.Z)(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&($b().getBool("IS_TEST")||$b().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];$b().getBool("IS_TEST")||$b().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(Gb(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(qb in t)t.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),r=(0,T.Z)(n,2),a=r[0],i=r[1];e.urlFlags[a]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(a,i)}))}}}]),e}();function Xb(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return Yb(t,r[0],r[1]),r.join("=")})),t}function Yb(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function $b(){return Jb}var Qb,Jb=null;function ex(){if(null==Qb){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}Qb=e}return Qb}function tx(e,t){var n=function(){var e=ex();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var nx="Abs",rx="Acos",ax="Acosh",ix="Add",ox="AddN",sx="All",ux="Any",cx="ArgMax",lx="ArgMin",fx="Asin",hx="Asinh",px="Atan",dx="Atanh",mx="Atan2",vx="AvgPool",gx="AvgPool3D",yx="BatchMatMul",bx="BatchToSpaceND",xx="Bincount",wx="BroadcastArgs",kx="Cast",Sx="Ceil",_x="ClipByValue",Tx="Complex",Ix="ComplexAbs",Nx="Concat",Cx="Conv2D",Ex="Conv2DBackpropFilter",Ax="Conv2DBackpropInput",Rx="Conv3D",Ox="Conv3DBackpropInputV2",Mx="Cosh",Dx="Cumprod",Fx="Cumsum",Px="CropAndResize",Lx="DenseBincount",zx="DepthToSpace",Bx="DepthwiseConv2dNative",Wx="DepthwiseConv2dNativeBackpropFilter",Vx="DepthwiseConv2dNativeBackpropInput",jx="Diag",Ux="Dilation2D",Hx="RealDiv",Zx="Einsum",Gx="Equal",qx="Exp",Kx="ExpandDims",Xx="Expm1",Yx="Fill",$x="FlipLeftRight",Qx="Floor",Jx="FloorDiv",ew="FusedBatchNorm",tw="GatherV2",nw="GatherNd",rw="Greater",aw="GreaterEqual",iw="Identity",ow="IFFT",sw="Imag",uw="IsFinite",cw="IsInf",lw="IsNan",fw="LeakyRelu",hw="Less",pw="LessEqual",dw="LinSpace",mw="Log",vw="Log1p",gw="LogicalAnd",yw="LogicalNot",bw="LogicalOr",xw="LRN",ww="Max",kw="Maximum",Sw="MaxPool",_w="MaxPool3D",Tw="MaxPoolWithArgmax",Iw="Mean",Nw="Min",Cw="Minimum",Ew="MirrorPad",Aw="Multinomial",Rw="Multiply",Ow="Neg",Mw="NotEqual",Dw="NonMaxSuppressionV3",Fw="NonMaxSuppressionV4",Pw="NonMaxSuppressionV5",Lw="OnesLike",zw="OneHot",Bw="Pack",Ww="PadV2",Vw="Prelu",jw="Prod",Uw="RaggedGather",Hw="RaggedTensorToTensor",Zw="Range",Gw="Real",qw="Reciprocal",Kw="Relu",Xw="Reshape",Yw="ResizeNearestNeighbor",$w="ResizeBilinear",Qw="Relu6",Jw="Reverse",ek="Round",tk="Rsqrt",nk="ScatterNd",rk="SearchSorted",ak="Select",ik="Selu",ok="Slice",sk="Sinh",uk="Sign",ck="Sigmoid",lk="Softplus",fk="Sqrt",hk="Sum",pk="SpaceToBatchND",dk="SplitV",mk="Softmax",vk="SparseFillEmptyRows",gk="SparseReshape",yk="SparseSegmentMean",bk="SparseSegmentSum",xk="SparseToDense",wk="SquaredDifference",kk="StridedSlice",Sk="StringNGrams",_k="StringSplit",Tk="StringToHashBucketFast",Ik="Sub",Nk="Tanh",Ck="Tile",Ek="TopK",Ak="Transform",Rk="Transpose",Ok="Unique",Mk="Unpack",Dk="UnsortedSegmentSum",Fk="ZerosLike",Pk="Step",Lk="FromPixels",zk="RotateWithOffset",Bk="_FusedMatMul",Wk="FusedConv2D",Vk="FusedDepthwiseConv2D";function jk(){var e;$b().getBool("IS_TEST")||$b().getBool("PROD")||(e=console).warn.apply(e,arguments)}var Uk=tx("kernelRegistry",(function(){return new Map})),Hk=tx("gradRegistry",(function(){return new Map}));function Zk(e,t){var n=Xk(e,t);return Uk.get(n)}function Gk(e){return Hk.get(e)}function qk(e){for(var t=Uk.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=(0,T.Z)(i,2),s=o[0],u=o[1],c=s.split("_");(0,T.Z)(c,1)[0]===e&&n.push(u)}return n}function Kk(e){var t=e.kernelName,n=e.backendName,r=Xk(t,n);Uk.has(r)&&jk("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),Uk.set(r,e)}function Xk(e,t){return"".concat(t,"_").concat(e)}var Yk=n(8987),$k=n.n(Yk)()||Yk;function Qk(e){return $k.fromString(e,!0,16)}var Jk=Qk("c3a5c85c97cb3127"),eS=Qk("b492b66fbe98f273"),tS=Qk("9ae16a3b2f90404f");function nS(e){return e.xor(e.shru(47))}function rS(e,t,n){var r=e.slice(t,t+n);return $k.fromBytes(Array.from(r),!0,!0)}function aS(e,t){return rS(e,t,8)}function iS(e,t){return rS(e,t,4)}function oS(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function sS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qk("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function uS(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=oS(i.add(a).add(r),21);var o=a;return a=(a=a.add(t)).add(n),i=i.add(oS(a,44)),[a.add(r),i.add(o)]}(aS(e,t),aS(e,t+8),aS(e,t+16),aS(e,t+24),n,r)}function cS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=tS.add(2*t),r=aS(e,0).add(tS),a=aS(e,t-8),i=oS(a,37).mul(n).add(r),o=oS(r,25).add(a).mul(n);return sS(i,o,n)}if(t>=4){var s=tS.add(2*t),u=iS(e,0);return sS(u.shl(3).add(t),iS(e,t-4),s)}if(t>0){var c=e[0],l=e[t>>1],f=e[t-1],h=c+(l<<8),p=t+(f<<2);return nS(tS.mul(h).xor(Jk.mul(p))).mul(tS)}return tS}function lS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=tS.add(2*t),r=aS(e,0).mul(eS),a=aS(e,8),i=aS(e,t-8).mul(n),o=aS(e,t-16).mul(tS);return sS(oS(r.add(a),43).add(oS(i,30)).add(o),r.add(oS(a.add(tS),18)).add(i),n)}function fS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=tS.add(2*t),r=aS(e,0).mul(tS),a=aS(e,8),i=aS(e,t-8).mul(n),o=aS(e,t-16).mul(tS),s=oS(r.add(a),43).add(oS(i,30)).add(o),u=sS(s,r.add(oS(a.add(tS),18)).add(i),n),c=aS(e,16).mul(n),l=aS(e,24),f=s.add(aS(e,t-32)).mul(n),h=u.add(aS(e,t-24)).mul(n);return sS(oS(c.add(l),43).add(oS(f,30)).add(h),c.add(oS(l.add(r),18)).add(f),n)}function hS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=$k.fromNumber(81,!0);if(t<=32)return t<=16?cS(e,t):lS(e,t);if(t<=64)return fS(e,t);var r=n,a=n.mul(eS).add(113),i=nS(a.mul(tS).add(113)).mul(tS),o=[$k.UZERO,$k.UZERO],s=[$k.UZERO,$k.UZERO];r=r.mul(tS).add(aS(e,0));var u=0,c=64*(t-1>>6),l=c+(t-1&63)-63;do{r=oS(r.add(a).add(o[0]).add(aS(e,u+8)),37).mul(eS),a=oS(a.add(o[1]).add(aS(e,u+48)),42).mul(eS),r=r.xor(s[1]),a=a.add(o[0]).add(aS(e,u+40)),i=oS(i.add(s[0]),33).mul(eS),o=uS(e,u,o[1].mul(eS),r.add(s[0])),s=uS(e,u+32,i.add(s[1]),a.add(aS(e,u+16)));var f=[r,i];i=f[0],r=f[1],u+=64}while(u!==c);var h=eS.add(i.and(255).shl(1));u=l,s[0]=s[0].add(t-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=oS(r.add(a).add(o[0]).add(aS(e,u+8)),37).mul(h),a=oS(a.add(o[1]).add(aS(e,u+48)),42).mul(h),r=r.xor(s[1].mul(9)),a=a.add(o[0].mul(9).add(aS(e,u+40))),i=oS(i.add(s[0]),33).mul(h),o=uS(e,u,o[1].mul(h),r.add(s[0])),s=uS(e,u+32,i.add(s[1]),a.add(aS(e,u+16)));var p=[r,i];return i=p[0],r=p[1],sS(sS(o[0],s[0],h).add(nS(a).mul(Jk)).add(i),sS(o[1],s[1],h).add(r),h)}function pS(e,t){return"string"===t?vS(e):dS([e],t)}function dS(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=xb(e)),$b().getBool("DEBUG")&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function mS(){return $b().platform.now()}function vS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",$b().platform.encode(e,t)}function gS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",$b().platform.decode(e,t)}var yS=function(){function e(t,n){N(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new bS)}return(0,C.Z)(e,[{key:"profileKernel",value:function(e,t,n){var r,a,i=function(){r=n()},o=mS();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();var s,u=Oo(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(f){u.e(f)}finally{u.f()}a=Promise.resolve({kernelMs:mS()-o})}if($b().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var c=function(t){var n=r[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},l=0;l<r.length;l++)c(l);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var bS=function(){function e(){N(this,e)}return(0,C.Z)(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"===typeof r?Tb("".concat(r,"ms"),9):r.error,s=Tb(e,25),u=t.rank,c=t.size,l=Tb(t.shape.toString(),14),f="";for(var h in a){var p=a[h];if(null!=p){var d=p.shape||t.shape,m=d.length;f+="".concat(h,": ").concat(m,"D ").concat(m>0?d:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(f,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function xS(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var c in u){for(var l=u[c],f=!1,h=0;h<t.length;h++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),f=!0,a[s.id]=!0;break}if(f)break}}var p={};p[n.id]=!0;for(var d={},m=e.length-1;m>=0;m--)for(var v=e[m],g=v.inputs,y=0;y<v.outputs.length;y++)if(p[v.outputs[y].id]){for(var b in g)p[g[b].id]=!0,d[v.id]=!0;break}for(var x=[],w=0;w<e.length;w++){var k=e[w];if(a[k.id]&&d[k.id]){var S={};for(var _ in k.inputs){var T=k.inputs[_];r[T.id]&&(S[_]=T)}var I=Object.assign({},k);I.inputs=S,I.outputs=k.outputs,x.push(I)}}return x}function wS(e,t,n,r){for(var a=function(a){var i=t[a],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));var s=i.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var a=n((function(){return s[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var o=i.inputs[t];if(!kb(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=a;else{var u=e[o.id];e[o.id]=r(u,a),u.dispose()}};for(var c in i.inputs)u(c)},i=t.length-1;i>=0;i--)a(i)}function kS(e,t,n,r){var a=zb(t),i=function(e,t,n,r){var a=wb(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?IS(e):e;if(s>1)for(var c=0;c<a/i;c++)for(var l=c*i,f=0;f<i;f++)o[f]=Math.max(o[f],SS(u[l+f],0,n).length);return o}(e,t,n,a),o=t.length,s=TS(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function SS(e,t,n){return Tb(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):Db(e)?"'".concat(e,"'"):"bool"===n?_S(e):parseFloat(e.toFixed(7)).toString(),t)}function _S(e){return 0===e?"false":"true"}function TS(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u){if("complex64"===n){var c=IS(e);return[SS(c[0],0,n)]}return"bool"===n?[_S(e[0])]:[e[0].toString()]}if(1===u){if(s>20){var l=3*o,f=Array.from(e.slice(0,l)),h=Array.from(e.slice((s-3)*o,s*o));return"complex64"===n&&(f=IS(f),h=IS(h)),["["+f.map((function(e,t){return SS(e,a[t],n)})).join(", ")+", ..., "+h.map((function(e,t){return SS(e,a[s-3+t],n)})).join(", ")+"]"]}var p="complex64"===n?IS(e):Array.from(e);return["["+p.map((function(e,t){return SS(e,a[t],n)})).join(", ")+"]"]}var d=t.slice(1),m=r.slice(1),v=r[0]*o,g=[];if(s>20){for(var y=0;y<3;y++){var b=y*v,x=b+v;g.push.apply(g,(0,I.Z)(TS(e.slice(b,x),d,n,m,a,!1)))}g.push("...");for(var w=s-3;w<s;w++){var k=w*v,S=k+v;g.push.apply(g,(0,I.Z)(TS(e.slice(k,S),d,n,m,a,w===s-1)))}}else for(var _=0;_<s;_++){var T=_*v,N=T+v;g.push.apply(g,(0,I.Z)(TS(e.slice(T,N),d,n,m,a,_===s-1)))}var C=2===u?",":"";g[0]="["+g[0]+C;for(var E=1;E<g.length-1;E++)g[E]=" "+g[E]+C;for(var A=",\n",R=2;R<u;R++)A+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(i?"":A),g}function IS(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var NS=function(){function e(t,n,r){var a=this;if(N(this,e),this.dtype=n,this.shape=t.slice(),this.size=wb(t),null!=r){var i=r.length;gb(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Ab(n,this.size),this.strides=zb(t)}return(0,C.Z)(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),gb(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return CS().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),CS=null,ES=null;var AS=function(){function e(t,n,r,a){N(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=wb(t),this.strides=zb(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return(0,C.Z)(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=Tn(Sn().mark((function e(){var t;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",ES.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return ES.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=Tn(Sn().mark((function e(){var t;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Wb(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return Wb(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=Tn(Sn().mark((function e(){var t,n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=CS().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return gS(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),CS().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=CS().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return gS(e)}))}catch(t5){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=Tn(Sn().mark((function e(){var t;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,CS().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(CS().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ES.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),ES.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return kS(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),ES.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),CS().makeVariable(this,e,t,n)}}]),e}();Object.defineProperty(AS,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),tx("Tensor",(function(){return AS}));var RS,OS,MS,DS,FS,PS=function(e){A(n,e);var t=L(n);function n(e,r,a,i){var o;return N(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return(0,C.Z)(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!kb(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));CS().disposeTensor(this),this.dataId=e.dataId,CS().incRef(this,null)}},{key:"dispose",value:function(){CS().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(AS);Object.defineProperty(PS,Symbol.hasInstance,{value:function(e){return e instanceof AS&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(RS||(RS={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(OS||(OS={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(MS||(MS={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(DS||(DS={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(FS||(FS={}));var LS={float32:DS,int32:OS,bool:MS,complex64:FS};function zS(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return LS[e][t]}function BS(e){return zS(e,"int32")}function WS(e,t){if(e.dtype===t.dtype)return[e,t];var n=zS(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function VS(e,t){gb(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}function jS(e){var t=[];return US(e,t,new Set),t}function US(e,t,n){if(null!=e)if(e instanceof AS)t.push(e);else if(r=e,Array.isArray(r)||"object"===typeof r){var r,a=e;for(var i in a){var o=a[i];n.has(o)||(n.add(o),US(o,t,n))}}}function HS(e){return null!=e.kernelName}var ZS=function(){function e(){N(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return(0,C.Z)(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),GS=function(){function e(t){N(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new ZS}return(0,C.Z)(e,[{key:"ready",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(jk("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=Tn(Sn().mark((function e(t){var n,r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new yS(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;qk(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;qk(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof hb||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,jk("Initialization of backend ".concat(e," failed")),jk(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return jk("Initialization of backend ".concat(e," failed")),jk(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(Yce){throw t(),Yce}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=YS.runKernel(iw,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return YS.runKernel(kx,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=Zk(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=HS(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(HS(e)){var l=e.kernelName,f=e.inputs,h=e.attrs;null==this.backendName&&this.backend;var p=Zk(l,this.backendName);gb(null!=p,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=p.kernelFunc({inputs:f,attrs:h,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){return null!=e.rank?e:a.makeTensorFromTensorInfo(e)}));if(o){var s=a.getTensorsForGradient(l,f,n);i=a.saveTensorsForBackwardMode(s)}return n}}else{var d=e.forwardFunc,m=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return d(a.backend,m)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var v,g=e.inputs,y=e.attrs,b=HS(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(v=a.profiler.profileKernel(c,g,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(v),t=v.outputs):t=n()})),o&&this.addTapeNode(c,g,t,b,i,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(g).map((function(e){return null!=g[e]?g[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:v.timeMs,extraInfo:v.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this,n=e.map((function(e){return t.keep(t.clone(e))}));return n}},{key:"getTensorsForGradient",value:function(e,t,n){var r=Gk(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(gb(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&Db(e[0])&&(a=e.map((function(e){return vS(e)})));var i=r.write(a,t,n),o=new AS(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}},{key:"makeTensorFromTensorInfo",value:function(e,t){var n=e.dataId,r=e.shape,a=e.dtype,i=new AS(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new PS(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*Mb(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof PS||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*Mb(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i,o;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,(0,I.Z)(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=Oo(this.state.activeProfile.kernels),e.prev=12,a.s();case 14:if((i=a.n()).done){e.next=24;break}return o=i.value,e.next=18,o.kernelTimeMs;case 18:return o.kernelTimeMs=e.sent,e.next=21,o.extraInfo;case 21:o.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=Gk(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=jb(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=jS(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(gb(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));gb(i instanceof AS,(function(){return"The result y returned by f() must be a tensor."}));var o=xS(this.state.activeTape,t,i);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?qS(i.shape):n,wS(e,o,(function(e){return r.tidy(e)}),$S);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=Oo(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:i,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return gb(Pb(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;gb(r.every((function(e){return e instanceof AS})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(e,t){o[t]=e}));var s=function(t,n){return gb((i=e.apply(void 0,[].concat(r,[n]))).value instanceof AS,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),gb(Pb(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},u=function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];gb(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),gb(a.every((function(e){return e instanceof AS})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o};return t.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=Tn(Sn().mark((function e(t){var n,r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=mS(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=mS()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new ZS,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function qS(e){var t=Vb(wb(e),"float32");return YS.makeTensor(t,e,"float32")}function KS(){var e=ex();if(null==e._tfengine){var t=new Kb(e);e._tfengine=new GS(t)}return function(e){Jb=e}(e._tfengine.ENV),function(e){CS=e}((function(){return e._tfengine})),e._tfengine}GS.nextTensorId=0,GS.nextVariableId=0;var XS,YS=KS();function $S(e,t){var n={a:e,b:t};return YS.runKernel(ix,n)}function QS(e){if(void 0!==XS)return XS;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function JS(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var e_=$b();function t_(e,t){var n=e;if(Ob(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||Ob(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&$b().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&n_(e,r,[]),r}function n_(e,t,n){if(n=n||[],Array.isArray(e)||Ob(e)){gb(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),gb(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)n_(e[a],r,n.concat(a))}else gb(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function r_(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function a_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof AS)return r_(r,e.dtype,t,n),e;var a=Fb(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),r_(r,a,t,n),null==e||!Ob(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(i,"'"))}var o=t_(e,a);Ob(e)||Array.isArray(e)||(e=[e]);var s=!0,u="string"!==a?dS(e,a):xb(e,[],s);return YS.makeTensor(u,o,a)}function i_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return a_(e,"".concat(t,"[").concat(a,"]"),n,r)}))}e_.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),e_.registerFlag("IS_BROWSER",(function(){return JS()})),e_.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),e_.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),e_.registerFlag("PROD",(function(){return!1})),e_.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return e_.getBool("DEBUG")})),e_.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),e_.registerFlag("IS_TEST",(function(){return!1})),e_.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),e_.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),e_.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1})),e_.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(function(){return!1})),e_.registerFlag("USE_SETTIMEOUTCUSTOM",(function(){return!1}));var o_="__op";function s_(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=o_;var a=function(){YS.startScope(n);try{var e=r.apply(void 0,arguments);return Gb(e)&&console.error("Cannot return a Promise inside of tidy."),YS.endScope(e),e}catch(Yce){throw YS.endScope(null),Yce}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var u_=s_({complex_:function(e,t){var n=a_(e,"real","complex"),r=a_(t,"imag","complex");yb(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return YS.runKernel(Tx,a)}});function c_(e,t,n,r){if(null==r&&(r=Fb(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ob(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Ub(t);var a=wb(t),i=wb(n);gb(a===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==wb(t.slice(o));gb(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return Ob(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?dS(e,r):xb(e,[],!0),YS.makeTensor(e,t,r)}function l_(e,t,n){return c_(e,t,t_(e,n),n)}var f_={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};function h_(e,t){return p_.apply(this,arguments)}function p_(){return p_=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=[],i=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),o=function(e){var o=i[e],s=Array.isArray(t)?t[e].tensor:t[o];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(s.dtype));var u={name:o,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){var c=new Promise(function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i,o,u,c;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,a=new Uint8Array(r),i=0,o=0;o<n.length;o++)u=n[o],c=new Uint8Array(new Uint32Array([u.length]).buffer),a.set(c,i),i+=4,a.set(u,i),i+=u.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.push(c)}else a.push(s.data());null!=n&&(u.group=n),r.push(u)},s=0;s<i.length;++s)o(s);return e.next=7,Promise.all(a);case 7:return u=e.sent,e.abrupt("return",{data:m_(u),specs:r});case 9:case"end":return e.stop()}}),e)}))),p_.apply(this,arguments)}function d_(e,t){var n,r,a={},i=0,o=Oo(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.name,c=s.dtype,l=s.shape,f=wb(l),h=void 0;if("quantization"in s){var p=s.quantization;if("uint8"===p.dtype||"uint16"===p.dtype){if(!("min"in p)||!("scale"in p))throw new Error("Weight ".concat(s.name," with quantization ").concat(p.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==p.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(p.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==c)throw new Error("Weight ".concat(s.name," is quantized with ").concat(p.dtype," ")+"which only supports weights of type float32 not ".concat(c,"."))}var d=f_[p.dtype],m=e.slice(i,i+f*d),v="uint8"===p.dtype?new Uint8Array(m):new Uint16Array(m);if("float32"===c)if("uint8"===p.dtype||"uint16"===p.dtype){h=new Float32Array(v.length);for(var g=0;g<v.length;g++){var y=v[g];h[g]=y*p.scale+p.min}}else{if("float16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," ")+"for weight type float32.");void 0===n&&(n=C_()),h=n(v)}else{if("int32"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));if("uint8"!==p.dtype&&"uint16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," ")+"for weight type int32.");h=new Int32Array(v.length);for(var b=0;b<v.length;b++){var x=v[b];h[b]=Math.round(x*p.scale+p.min)}}i+=f*d}else if("string"===c){var w=wb(s.shape);h=[];for(var k=0;k<w;k++){var S=new Uint32Array(e.slice(i,i+4))[0];i+=4;var _=new Uint8Array(e.slice(i,i+S));h.push(_),i+=S}}else{var T=f_[c],I=e.slice(i,i+f*T);if("float32"===c)h=new Float32Array(I);else if("int32"===c)h=new Int32Array(I);else if("bool"===c)h=new Uint8Array(I);else{if("complex64"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));h=new Float32Array(I);for(var N=new Float32Array(h.length/2),C=new Float32Array(h.length/2),E=0;E<N.length;E++)N[E]=h[2*E],C[E]=h[2*E+1];var A=l_(N,l,"float32"),R=l_(C,l,"float32");a[u]=u_(A,R),A.dispose(),R.dispose()}i+=f*T}"complex64"!==c&&(a[u]=l_(h,l,c))}}catch(O){o.e(O)}finally{o.f()}return a}function m_(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var v_="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function g_(e){return v_?Buffer.byteLength(e):new Blob([e]).size}function y_(e){if(v_)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function b_(e){if(v_){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function x_(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function w_(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function k_(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function S_(e,t,n){var r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),r}function __(e,t){return T_.apply(this,arguments)}function T_(){return T_=Tn(Sn().mark((function e(t,n){var r,a,i,o;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.weightsManifest){e.next=7;break}return e.next=3,n(t.weightsManifest);case 3:i=e.sent,o=(0,T.Z)(i,2),r=o[0],a=o[1];case 7:return e.abrupt("return",S_(t,r,a));case 8:case"end":return e.stop()}}),e)}))),T_.apply(this,arguments)}function I_(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:g_(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:g_(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function N_(e){var t,n=[],r=Oo(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push.apply(n,(0,I.Z)(a.weights))}}catch(i){r.e(i)}finally{r.f()}return n}function C_(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=u}return new Float32Array(a)}}var E_=function(){function e(){N(this,e),this.saveRouters=[],this.loadRouters=[]}return(0,C.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),A_=function(e){return E_.registerSaveRouter(e)},R_=function(e){return E_.registerLoadRouter(e)},O_=function(e){return E_.getSaveHandlers(e)},M_=function(e,t){return E_.getLoadHandlers(e,t)},D_="tensorflowjs",F_="models_store",P_="model_info_store";function L_(){if(!$b().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function z_(e){var t=e.result;t.createObjectStore(F_,{keyPath:"modelPath"}),t.createObjectStore(P_,{keyPath:"modelPath"})}var B_=function(){function e(t){if(N(this,e),this.indexedDB=L_(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return(0,C.Z)(e,[{key:"save",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(D_,1);a.onupgradeneeded=function(){return z_(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(F_,"readonly"),s=o.objectStore(F_).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,c=I_(t),l=i.transaction(P_,"readwrite"),f=l.objectStore(P_),h=f.put({modelPath:n.modelPath,modelArtifactsInfo:c});h.onsuccess=function(){var a=(u=i.transaction(F_,"readwrite")).objectStore(F_).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(f=l.objectStore(P_)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},h.onerror=function(e){return i.close(),r(h.error)},l.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();B_.URL_SCHEME="indexeddb://";var W_=function(e){return $b().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(B_.URL_SCHEME)?(t=e.slice(B_.URL_SCHEME.length),new B_(t)):null;var t};E_.registerSaveRouter(W_),E_.registerLoadRouter(W_);var V_=function(){function e(){N(this,e),this.indexedDB=L_()}return(0,C.Z)(e,[{key:"listModels",value:function(){var e=Tn(Sn().mark((function e(){var t=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(D_,1);r.onupgradeneeded=function(){return z_(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(P_,"readonly"),i=a.objectStore(P_).getAll();i.onsuccess=function(){var t,n={},r=Oo(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Tn(Sn().mark((function e(t){var n=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(B_.URL_SCHEME)?r.slice(B_.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(D_,1);a.onupgradeneeded=function(){return z_(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(P_,"readwrite"),s=o.objectStore(P_),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),o=function(){var a=(n=i.transaction(F_,"readwrite")).objectStore(F_).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),j_="/",U_="tensorflowjs_models",H_="info",Z_="model_topology",G_="weight_specs",q_="weight_data",K_="model_metadata";function X_(e){return{info:[U_,e,H_].join(j_),topology:[U_,e,Z_].join(j_),weightSpecs:[U_,e,G_].join(j_),weightData:[U_,e,q_].join(j_),modelMetadata:[U_,e,K_].join(j_)}}function Y_(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function $_(e){var t=e.split(j_);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(j_)}var Q_=function(){function e(t){if(N(this,e),!$b().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=X_(this.modelPath)}return(0,C.Z)(e,[{key:"save",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=I_(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,y_(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),Y_(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r,a,i,o,s;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=b_(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();Q_.URL_SCHEME="localstorage://";var J_=function(e){return $b().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Q_.URL_SCHEME)?(t=e.slice(Q_.URL_SCHEME.length),new Q_(t)):null;var t};E_.registerSaveRouter(J_),E_.registerLoadRouter(J_);var eT=function(){function e(){N(this,e),gb($b().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),gb("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return(0,C.Z)(e,[{key:"listModels",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r,a,i,o;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=U_+j_,r=j_+H_,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=$_(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Tn(Sn().mark((function e(t){var n,r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(Q_.URL_SCHEME)?a.slice(Q_.URL_SCHEME.length):a,n=X_(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),Y_(n),e.abrupt("return",r);case 7:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),tT="://",nT=function(){function e(){N(this,e),this.managers={}}return(0,C.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){gb(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(tT)&&(t=t.slice(0,t.indexOf(tT))),gb(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();gb(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(t){var n=e.getInstance().managers[t];if(null==n)throw new Error("Cannot find model manager for scheme '".concat(t,"'"));return n}},{key:"getSchemes",value:function(){return Object.keys(e.getInstance().managers)}}]),e}();function rT(e){if(-1===e.indexOf(tT))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(nT.getSchemes().join(",")));return{scheme:e.split(tT)[0],path:e.split(tT)[1]}}function aT(e,t){return iT.apply(this,arguments)}function iT(){return iT=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u,c,l,f,h,p=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]&&p[2],gb(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),gb((a=E_.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),gb(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),i=a[0],gb((o=E_.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),gb(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=o[0],u=rT(t).scheme,c=rT(t).path,l=u===rT(t).scheme,e.next=15,i.load();case 15:if(f=e.sent,!r||!l){e.next=19;break}return e.next=19,nT.getManager(u).removeModel(c);case 19:return e.next=21,s.save(f);case 21:if(h=e.sent,!r||l){e.next=25;break}return e.next=25,nT.getManager(u).removeModel(c);case 25:return e.abrupt("return",h.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),iT.apply(this,arguments)}function oT(){return sT.apply(this,arguments)}function sT(){return(sT=Tn(Sn().mark((function e(){var t,n,r,a,i,o,s;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=nT.getSchemes(),n={},r=Oo(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return i=a.value,e.next=9,nT.getManager(i).listModels();case 9:for(s in o=e.sent)n[i+tT+s]=o[s];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function uT(e){return cT.apply(this,arguments)}function cT(){return(cT=Tn(Sn().mark((function e(t){var n,r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=rT(t),r=nT.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lT(e,t){return fT.apply(this,arguments)}function fT(){return(fT=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",aT(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hT(e,t){return pT.apply(this,arguments)}function pT(){return(pT=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",aT(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dT=function(){function e(){N(this,e),this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}return(0,C.Z)(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}},{key:"setTimeoutCustom",value:function(e,t){var n=this;window&&$b().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((function(){window.postMessage({name:n.messageName,index:n.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(function(e){e.source===window&&e.data.name===n.messageName&&(e.stopPropagation(),(0,n.functionRefs[e.data.index])(),n.handledMessageCount++,n.handledMessageCount===n.functionRefs.length&&(n.functionRefs=[],n.handledMessageCount=0))}),!0))):setTimeout(e,t)}}]),e}();if($b().get("IS_BROWSER")){$b().setPlatform("browser",new dT);try{nT.registerManager(Q_.URL_SCHEME,new eT)}catch(cBe){}try{nT.registerManager(B_.URL_SCHEME,new V_)}catch(cBe){}}var mT,vT=function(){return n(5410)};var gT=function(){function e(){N(this,e),this.util=n(8628),this.textEncoder=new this.util.TextEncoder}return(0,C.Z)(e,[{key:"fetch",value:function(e,t){return null!=$b().global.fetch?$b().global.fetch(e,t):(null==mT&&(mT=vT()),mT(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();function yT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",Ub(e),new NS(e,t,n)}$b().get("IS_NODE")&&!$b().get("IS_BROWSER")&&$b().setPlatform("node",new gT);var bT=s_({cast_:function(e,t){var n=a_(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return YS.runKernel(kx,r,a)}});var xT=s_({clone_:function(e){var t={x:a_(e,"x","clone","string_or_numeric")};return YS.runKernel(iw,t)}});function wT(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}KS(),ES={buffer:yT,cast:bT,clone:xT,print:wT};function kT(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var ST=function(){function e(t){if(N(this,e),!$b().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return(0,C.Z)(e,[{key:"save",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i,o,s;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=k_(t,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,o.href=i,e.next=15,kT((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,kT((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:I_(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();ST.URL_SCHEME="downloads://";var _T=function(){function e(t){if(N(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return(0,C.Z)(e,[{key:"load",value:function(){var e=Tn(Sn().mark((function e(){var t=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),i=a.modelTopology;if(null!=i)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var o=__(a,(function(e){return t.loadWeights(e)}));e(o)}else e({modelTopology:i});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],i=Oo(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push.apply(r,(0,I.Z)(o.weights)),a.push.apply(a,(0,I.Z)(o.paths))}}catch(cBe){i.e(cBe)}finally{i.f()}var s=this.checkManifestAndWeightFiles(e),u=a.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(u).then((function(e){return[r,x_(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return w_(e.name)})),i={},o=Oo(e);try{for(o.s();!(t=o.n()).done;){t.value.paths.forEach((function(e){var t=w_(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));i[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(cBe){o.e(cBe)}finally{o.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return i}}]),e}();function TT(e){return new _T(e)}function IT(e,t,n,r){!function(e){gb(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){gb(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),gb(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),gb(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function NT(e,t){return CT.apply(this,arguments)}function CT(){return(CT=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u,c,l,f;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?$b().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,IT(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0,u=s.map((function(e){return e.arrayBuffer()})),c=.5,l=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,IT(u,n.onProgress,c,l);case 26:e.t1=e.sent;case 27:return f=e.t1,e.abrupt("return",f);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ET(e){return AT.apply(this,arguments)}function AT(){return AT=Tn(Sn().mark((function e(t){var n,r,a,i,o=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,i=RT((function(e){return NT(e,{requestInit:a})})),e.abrupt("return",i(t,n,r));case 6:case"end":return e.stop()}}),e)}))),AT.apply(this,arguments)}function RT(e){return function(){var t=Tn(Sn().mark((function t(n){var r,a,i,o,s,u,c,l,f,h,p,d,m=arguments;return Sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:"",a=m.length>2?m[2]:void 0,i=n.map((function(){return!1})),o={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,c=f_[r]*wb(e.shape),l=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),s[n]=!0)})):l(),u.push(e.name),n+=c}))})),s.every((function(e){return e}))){t.next=10;break}throw c=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(c.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(u.join(", "),"."));case 10:return l=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),f=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;f.push(t)}))})),t.next=15,e(f);case 15:return h=t.sent,p={},d=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=h[d+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,c=0;c<t;c++){var l=new Uint8Array(h[d+c]);s.set(l,u),u+=l.byteLength}o[e].forEach((function(e){var t=d_(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)p[n]=t[n]})),d+=t})),t.abrupt("return",p);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}E_.registerSaveRouter((function(e){return $b().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ST.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new ST(e)}(e.slice(ST.URL_SCHEME.length)):null}));var OT=function(){function e(t,n){if(N(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(gb("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=$b().platform.fetch,gb(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&gb(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return(0,C.Z)(e,[{key:"save",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=k_(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(i=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:I_(t),responses:[i]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r,a,i,o=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",__(n,(function(e){return o.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i,o,s,u,c,l,f,h,p,d,m,v,g;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=MT(n),a=(0,T.Z)(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,u=N_(t),c=[],l=[],f=Oo(t);try{for(f.s();!(h=f.n()).done;){p=h.value,d=Oo(p.paths);try{for(d.s();!(m=d.n()).done;)v=m.value,null!=this.weightUrlConverter?l.push(this.weightUrlConverter(v)):c.push(s+v+o)}catch(cBe){d.e(cBe)}finally{d.f()}}}catch(cBe){f.e(cBe)}finally{f.f()}if(!this.weightUrlConverter){e.next=17;break}return e.t0=c.push,e.t1=c,e.t2=I.Z,e.next=14,Promise.all(l);case 14:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 17:return e.next=19,NT(c,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 19:return g=e.sent,e.abrupt("return",[u,x_(g)]);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function MT(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function DT(e){return null!=e.match(OT.URL_SCHEME_REGEX)}OT.URL_SCHEME_REGEX=/^https?:\/\//;var FT=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return DT(e)})):DT(e))?PT(e,t):null};function PT(e,t){return new OT(e,t)}function LT(e,t){return PT(e,t)}E_.registerSaveRouter(FT),E_.registerLoadRouter(FT);var zT,BT=function(){function e(t){N(this,e),this.modelArtifacts=t}return(0,C.Z)(e,[{key:"load",value:function(){return this.modelArtifacts}}]),e}(),WT=function(){function e(t){N(this,e),this.saveHandler=t}return(0,C.Z)(e,[{key:"save",value:function(e){return this.saveHandler(e)}}]),e}(),VT=(0,C.Z)((function e(t){N(this,e),t.load&&(this.load=function(){return Promise.resolve(t.load())}),t.save&&(this.save=function(e){return Promise.resolve(t.save(e))})}));function jT(e,t,n,r){var a=arguments;return new VT(UT.apply(void 0,(0,I.Z)(a)))}function UT(e,t,n,r){if(1===arguments.length){var a=null!=e.modelTopology||null!=e.weightSpecs;return a?new BT(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new BT({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new BT({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function HT(e){return new WT(e)}function ZT(e){return new WT(e)}function GT(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function qT(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(i)}}return n}function KT(e,t,n){if(bb(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=t_(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return c_(e,t,r,n)}function XT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}var u=Zk(Lk,YS.backendName);if(null!=u){var c={pixels:e},l={numChannels:t};return YS.runKernel(Lk,c,l)}var f,h,p=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],d=(0,T.Z)(p,2),m=d[0],v=d[1];if(o)f=e.getContext("2d").getImageData(0,0,m,v).data;else if(r||n)f=e.data;else if(i||a||s){if(null==zT)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");zT=new OffscreenCanvas(1,1).getContext("2d")}else zT=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});zT.canvas.width=m,zT.canvas.height=v,zT.drawImage(e,0,0,m,v),f=zT.getImageData(0,0,m,v).data}if(4===t)h=new Int32Array(f);else{var g=m*v;h=new Int32Array(g*t);for(var y=0;y<g;y++)for(var b=0;b<t;++b)h[y*t+b]=f[4*y+b]}var x=[v,m,t];return KT(h,x,"int32")}function YT(e,t){return $T.apply(this,arguments)}function $T(){return $T=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u,c,l,f,h,p,d,m,v,g,y,b;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a_(t,"img","toPixels"),t instanceof AS||(r=bT(a=r,"int32"),a.dispose()),2===r.rank||3===r.rank){e.next=4;break}throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(r.rank,"."));case 4:if(i=r.shape.slice(0,2),o=(0,T.Z)(i,2),s=o[0],u=o[1],!((c=2===r.rank?1:r.shape[2])>4||2===c)){e.next=8;break}throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(c));case 8:if("float32"===r.dtype||"int32"===r.dtype){e.next=10;break}throw new Error("Unsupported type for toPixels: ".concat(r.dtype,".")+" Please use float32 or int32 tensors.");case 10:return e.next=12,r.data();case 12:l=e.sent,f="float32"===r.dtype?255:1,h=new Uint8ClampedArray(u*s*4),p=0;case 16:if(!(p<s*u)){e.next=41;break}d=[0,0,0,255],m=0;case 19:if(!(m<c)){e.next=33;break}if(v=l[p*c+m],"float32"!==r.dtype){e.next=26;break}if(!(v<0||v>1)){e.next=24;break}throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(v,"."));case 24:e.next=29;break;case 26:if("int32"!==r.dtype){e.next=29;break}if(!(v<0||v>255)){e.next=29;break}throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(v,"."));case 29:1===c?(d[0]=v*f,d[1]=v*f,d[2]=v*f):d[m]=v*f;case 30:m++,e.next=19;break;case 33:h[(g=4*p)+0]=Math.round(d[0]),h[g+1]=Math.round(d[1]),h[g+2]=Math.round(d[2]),h[g+3]=Math.round(d[3]);case 38:++p,e.next=16;break;case 41:return null!=n&&(n.width=u,n.height=s,y=n.getContext("2d"),b=new ImageData(h,u,s),y.putImageData(b,0,0)),r!==t&&r.dispose(),e.abrupt("return",h);case 44:case"end":return e.stop()}}),e)}))),$T.apply(this,arguments)}var QT=s_({fromPixels_:XT});function JT(e,t,n){var r=e.shape.length;gb(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),gb(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){gb(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},i=0;i<r;++i)a(i)}function eI(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function tI(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function nI(e,t,n){var r,a,i=e.shape.length;return(r="number"===typeof t?[t].concat((0,I.Z)(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){gb(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"===typeof n?[n].concat((0,I.Z)(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(gb(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function rI(e,t,n,r,a,i,o,s,u){var c;if(null==r?(c=new Array(t.length)).fill(1):c=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var l=!1,f={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u},h=0;h<f.dims;h++)l&&0!==(1<<h&s)&&f.numAddAxisAfterEllipsis++,1<<h&o&&(l=!0);l||(f.ellipsisMask|=1<<f.dims,f.dims++);var p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(f,p);for(var d=!0,m=!0,v=!0,g=[],y=[],b=0;b<e.length;++b){if(0===p.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(p.shrinkAxisMask&1<<b),w=e[b];if(-1!==w){var k=[p.beginMask&1<<b,p.endMask&1<<b],S=[p.strides[b]>0?0:-1,p.strides[b]>0?w:w-1];if(x&&p.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&1===p.strides[b];var _=!!(p.beginMask&1<<b&&p.endMask&1<<b);if(p.beginValid&&p.endValid){if(x){var T=p.begin[b]<0?w+p.begin[b]:p.begin[b];if(p.begin[b]=T,p.end[b]=p.begin[b]+1,T<0||T>=w)throw Error("slice index ".concat(p.begin[b]," of dimension ").concat(b," out of bounds."))}else p.begin[b]=aI(p.begin[b],0,p.strides[b],w,k,S),p.end[b]=aI(p.end[b],1,p.strides[b],w,k,S);var I=1===p.strides[b]&&0===p.begin[b]&&p.end[b]===w;d=d&&I,m=m&&(0===b&&1===p.strides[b]||I)}else d=d&&1===p.strides[b]&&_,m=m&&(0===b&&1===p.strides[b]||_);var N=void 0,C=!1;if(p.beginValid&&p.endValid?(N=p.end[b]-p.begin[b],C=!0):x?(N=1,C=!0):_&&w>=0&&(N=p.strides[b]<0?-w:w,C=!0),C){var E=void 0;E=0===N||N<0!==p.strides[b]<0?0:Math.trunc(N/p.strides[b])+(N%p.strides[b]!==0?1:0),g.push(E)}else g.push(-1)}else g.push(x?1:-1)}for(var A=0;A<p.finalShapeGatherIndices.length;++A){var R=p.finalShapeGatherIndices[A];R>=0?y.push(g[R]):-2===R&&y.push(1)}var O=y.filter((function(e,t){return-2!==p.finalShapeGatherIndices[t]}));return{finalShapeSparse:O,finalShape:y,isIdentity:d,sliceDim0:m,isSimpleSlice:v,begin:p.begin,end:p.end,strides:p.strides}}function aI(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}var iI=s_({abs_:function(e){var t=a_(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return YS.runKernel(Ix,n)}var r={x:t};return YS.runKernel(nx,r)}});var oI=s_({acos_:function(e){var t={x:a_(e,"x","acos")};return YS.runKernel(rx,t)}});var sI=s_({acosh_:function(e){var t={x:a_(e,"x","acosh")};return YS.runKernel(ax,t)}});var uI=s_({add_:function(e,t){var n=a_(e,"a","add"),r=a_(t,"b","add"),a=WS(n,r),i=(0,T.Z)(a,2),o={a:n=i[0],b:r=i[1]};return YS.runKernel(ix,o)}});var cI=s_({addN_:function(e){gb(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),gb(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return a_(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!kb(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return YS.runKernel(ox,r)}});var lI=s_({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=a_(e,"x","all","bool"),a={x:r},i={axis:t,keepDims:n};return YS.runKernel(sx,a,i)}});var fI=s_({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=a_(e,"x","any","bool"),a={x:r},i={axis:t,keepDims:n};return YS.runKernel(ux,a,i)}});var hI=s_({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=a_(e,"x","argMax"),r={x:n},a={axis:t};return YS.runKernel(cx,r,a)}});var pI=s_({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=a_(e,"x","argMin"),r={x:n},a={axis:t};return YS.runKernel(lx,r,a)}});var dI=s_({asin_:function(e){var t={x:a_(e,"x","asin")};return YS.runKernel(fx,t)}});var mI=s_({asinh_:function(e){var t={x:a_(e,"x","asinh")};return YS.runKernel(hx,t)}});var vI=s_({atan_:function(e){var t={x:a_(e,"x","atan")};return YS.runKernel(px,t)}});var gI=s_({atan2_:function(e,t){var n=a_(e,"a","atan2"),r=a_(t,"b","atan2"),a=WS(n,r),i=(0,T.Z)(a,2),o={a:n=i[0],b:r=i[1]};return YS.runKernel(mx,o)}});var yI=s_({atanh_:function(e){var t={x:a_(e,"x","atanh")};return YS.runKernel(dx,t)}});function bI(e,t,n,r,a,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=_I(t),c=(0,T.Z)(u,2),l=c[0],f=c[1];if("channelsLast"===s)o=[l,f,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[l,f,e[1],e[1]]}return wI(e,o,n,r,a,i,!1,s)}function xI(e,t,n,r,a,i){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",c=TI(t),l=(0,T.Z)(c,3),f=l[0],h=l[1],p=l[2];if("NDHWC"===u)s="channelsLast",o=[f,h,p,e[4],e[4]];else{if("NCDHW"!==u)throw new Error("Unknown dataFormat ".concat(u));s="channelsFirst",o=[f,h,p,e[1],e[1]]}return kI(e,o,n,r,a,!1,s,i)}function wI(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,c=-1,l=-1,f=-1;if("channelsLast"===s){var h=(0,T.Z)(e,4);u=h[0],c=h[1],l=h[2],f=h[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var p=(0,T.Z)(e,4);u=p[0],f=p[1],c=p[2],l=p[3]}var d,m=(0,T.Z)(t,4),v=m[0],g=m[1],y=m[3],b=_I(n),x=(0,T.Z)(b,2),w=x[0],k=x[1],S=_I(r),_=(0,T.Z)(S,2),I=_[0],N=_[1],C=II(v,I),E=II(g,N),A=NI(a,c,l,w,k,C,E,i,s),R=A.padInfo,O=A.outHeight,M=A.outWidth,D=o?y*f:y;return"channelsFirst"===s?d=[u,D,O,M]:"channelsLast"===s&&(d=[u,O,M,D]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:l,inChannels:f,outHeight:O,outWidth:M,outChannels:D,padInfo:R,strideHeight:w,strideWidth:k,filterHeight:v,filterWidth:g,effectiveFilterHeight:C,effectiveFilterWidth:E,dilationHeight:I,dilationWidth:N,inShape:e,outShape:d,filterShape:t}}function kI(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,u=-1,c=-1,l=-1,f=-1,h=-1;if("channelsLast"===o){var p=(0,T.Z)(e,5);u=p[0],c=p[1],l=p[2],f=p[3],h=p[4]}else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));var d=(0,T.Z)(e,5);u=d[0],h=d[1],c=d[2],l=d[3],f=d[4]}var m,v=(0,T.Z)(t,5),g=v[0],y=v[1],b=v[2],x=v[4],w=TI(n),k=(0,T.Z)(w,3),S=k[0],_=k[1],I=k[2],N=TI(r),C=(0,T.Z)(N,3),E=C[0],A=C[1],R=C[2],O=II(g,E),M=II(y,A),D=II(b,R),F=CI(a,c,l,f,S,_,I,O,M,D,s),P=F.padInfo,L=F.outDepth,z=F.outHeight,B=F.outWidth,W=i?x*h:x;return"channelsFirst"===o?m=[u,W,L,z,B]:"channelsLast"===o&&(m=[u,L,z,B,W]),{batchSize:u,dataFormat:o,inDepth:c,inHeight:l,inWidth:f,inChannels:h,outDepth:L,outHeight:z,outWidth:B,outChannels:W,padInfo:P,strideDepth:S,strideHeight:_,strideWidth:I,filterDepth:g,filterHeight:y,filterWidth:b,effectiveFilterDepth:O,effectiveFilterHeight:M,effectiveFilterWidth:D,dilationDepth:E,dilationHeight:A,dilationWidth:R,inShape:e,outShape:m,filterShape:t}}function SI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=II(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function _I(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function TI(e){return"number"===typeof e?[e,e,e]:e}function II(e,t){return t<=1?e:e+(e-1)*(t-1)}function NI(e,t,n,r,a,i,o,s,u){var c,l,f;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var h=function(e,t,n,r,a){null==r&&(r=SI(e,t,n));var i=e[0],o=e[1];return[EI((i-t+2*r)/n+1,a),EI((o-t+2*r)/n+1,a)]}([t,n],i,r,e,s);l=h[0],f=h[1]}else if("same"===e){l=Math.ceil(t/r),f=Math.ceil(n/a);var p=Math.max(0,(l-1)*r+i-t),d=Math.max(0,(f-1)*a+o-n),m=Math.floor(p/2),v=p-m,g=Math.floor(d/2);c={top:m,bottom:v,left:g,right:d-g,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-i+1)/r),f=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],x="channelsLast"===u?e[2][0]:e[3][0],w="channelsLast"===u?e[2][1]:e[3][1];c={top:y,bottom:b,left:x,right:w,type:0===y&&0===b&&0===x&&0===w?"VALID":"EXPLICIT"},l=EI((t-i+y+b)/r+1,s),f=EI((n-o+x+w)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:f}}function CI(e,t,n,r,a,i,o,s,u,c,l){var f,h,p,d;if("number"===typeof e){f={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,a,i){null==a&&(a=SI(e,t,r));var o=e[0],s=e[1],u=e[2];return[EI((o-t+2*a)/r+1,i),EI((s-t+2*a)/r+1,i),EI((u-t+2*a)/r+1,i),n]}([t,n,r,1],s,1,a,e,l);h=m[0],p=m[1],d=m[2]}else if("same"===e){var v=((h=Math.ceil(t/a))-1)*a+s-t,g=((p=Math.ceil(n/i))-1)*i+u-n,y=((d=Math.ceil(r/o))-1)*o+c-r,b=Math.floor(v/2),x=v-b,w=Math.floor(g/2),k=g-w,S=Math.floor(y/2);f={top:w,bottom:k,left:S,right:y-S,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));f={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((t-s+1)/a),p=Math.ceil((n-u+1)/i),d=Math.ceil((r-c+1)/o)}return{padInfo:f,outDepth:h,outHeight:p,outWidth:d}}function EI(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function AI(e){var t=_I(e),n=(0,T.Z)(t,3),r=n[0],a=n[1],i=n[2];return 1===r&&1===a&&1===i}function RI(e,t){return AI(e)||AI(t)}function OI(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function MI(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)gb(Sb(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){gb(Sb(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}var DI=s_({reshape_:function(e,t){var n={x:a_(e,"x","reshape","string_or_numeric")},r={shape:t};return YS.runKernel(Xw,n,r)}});var FI=s_({avgPool_:function(e,t,n,r,a){var i=a_(e,"x","avgPool","float32");gb(RI(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var o=i,s=!1;3===i.rank&&(s=!0,o=DI(i,[1,i.shape[0],i.shape[1],i.shape[2]])),gb(4===o.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")})),MI("avgPool",r,a);var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=YS.runKernel(vx,u,c);return l=bT(l,i.dtype),s?DI(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var PI=s_({avgPool3d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=a_(e,"x","avgPool3d","float32"),s=o,u=!1;4===o.rank&&(u=!0,s=DI(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),gb(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),gb("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),MI("avgPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},f=YS.runKernel(gx,c,l);return f=bT(f,s.dtype),u?DI(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var LI=s_({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;gb(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=i_(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return xT(n[0]);var r=n,a={axis:t};return YS.runKernel(Nx,r,a)}});var zI=s_({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=a_(e,"a","matMul"),i=a_(t,"b","matMul"),o=WS(a,i),s=(0,T.Z)(o,2),u={a:a=s[0],b:i=s[1]},c={transposeA:n,transposeB:r};return YS.runKernel(yx,u,c)}});var BI=s_({mul_:function(e,t){var n=a_(e,"a","mul"),r=a_(t,"b","mul"),a=WS(n,r),i=(0,T.Z)(a,2),o={a:n=i[0],b:r=i[1]};return YS.runKernel(Rw,o)}});var WI=s_({sigmoid_:function(e){var t={x:a_(e,"x","sigmoid","float32")};return YS.runKernel(ck,t)}});var VI=s_({slice_:function(e,t,n){var r=a_(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return YS.runKernel(ok,a,i)}});var jI=s_({tanh_:function(e){var t={x:a_(e,"x","tanh","float32")};return YS.runKernel(Nk,t)}});var UI=s_({basicLSTMCell_:function(e,t,n,r,a,i){var o=a_(e,"forgetBias","basicLSTMCell"),s=a_(t,"lstmKernel","basicLSTMCell"),u=a_(n,"lstmBias","basicLSTMCell"),c=a_(r,"data","basicLSTMCell"),l=a_(a,"c","basicLSTMCell"),f=a_(i,"h","basicLSTMCell"),h=LI([c,f],1),p=zI(h,s),d=uI(p,u),m=d.shape[0],v=d.shape[1]/4,g=[m,v],y=VI(d,[0,0],g),b=VI(d,[0,v],g),x=VI(d,[0,2*v],g),w=VI(d,[0,3*v],g),k=uI(BI(WI(y),jI(b)),BI(l,WI(uI(o,x))));return[k,BI(jI(k),WI(w))]}});var HI=s_({batchToSpaceND_:function(e,t,n){var r=a_(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));gb(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),gb(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),gb(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)}));var i={x:r},o={blockShape:t,crops:n};return YS.runKernel(bx,i,o)}});var ZI=s_({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);var o,s,u=a_(e,"x","batchNorm"),c=a_(t,"mean","batchNorm"),l=a_(n,"variance","batchNorm");null!=a&&(o=a_(a,"scale","batchNorm")),null!=r&&(s=a_(r,"offset","batchNorm")),gb(c.rank===l.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),gb(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),gb(null==o||c.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var f=function(e){return 0===e.rank||1===e.rank?DI(e,[1,1,1,e.size]):2===e.rank?DI(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?DI(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(u),h={x:f,scale:o,offset:s,mean:c,variance:l},p={varianceEpsilon:i},d=YS.runKernel(ew,h,p);return DI(d,u.shape)}});var GI=s_({batchNorm2d_:function(e,t,n,r,a,i){var o,s,u=a_(e,"x","batchNorm"),c=a_(t,"mean","batchNorm"),l=a_(n,"variance","batchNorm");return null!=a&&(o=a_(a,"scale","batchNorm")),null!=r&&(s=a_(r,"offset","batchNorm")),gb(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(u.rank,".")})),gb(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(c.rank,".")})),gb(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&gb(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&gb(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),ZI(u,c,l,s,o,i)}});var qI=s_({batchNorm3d_:function(e,t,n,r,a,i){var o,s,u=a_(e,"x","batchNorm"),c=a_(t,"mean","batchNorm"),l=a_(n,"variance","batchNorm");return null!=a&&(o=a_(a,"scale","batchNorm")),null!=r&&(s=a_(r,"offset","batchNorm")),gb(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(u.rank,".")})),gb(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(c.rank,".")})),gb(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&gb(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&gb(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),ZI(u,c,l,s,o,i)}});var KI=s_({batchNorm4d_:function(e,t,n,r,a,i){var o,s,u=a_(e,"x","batchNorm"),c=a_(t,"mean","batchNorm"),l=a_(n,"variance","batchNorm");return null!=a&&(o=a_(a,"scale","batchNorm")),null!=r&&(s=a_(r,"offset","batchNorm")),gb(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(u.rank,".")})),gb(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(c.rank,".")})),gb(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&gb(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&gb(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),ZI(u,c,l,s,o,i)}});var XI=s_({bincount_:function(e,t,n){var r=a_(e,"x","bincount"),a=a_(t,"weights","bincount");gb("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),gb(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),gb(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var i={x:r,weights:a},o={size:n};return YS.runKernel(xx,i,o)}});var YI=s_({broadcastArgs_:function(e,t){var n=a_(e,"s0","broadcastArgs","int32"),r=a_(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));var a={s0:n,s1:r};return YS.runKernel(wx,a)}});var $I=s_({broadcastTo_:function(e,t){var n=a_(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=DI(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var u=o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===u.length)return xT(n);var c={x:n},l={reps:o};return YS.runKernel(Ck,c,l)}});var QI=s_({ceil_:function(e){var t={x:a_(e,"x","ceil","float32")};return YS.runKernel(Sx,t)}});function JI(e,t,n){var r={shape:e,value:t,dtype:n};return YS.runKernel(Yx,{},r)}var eN=s_({clipByValue_:function(e,t,n){var r=a_(e,"x","clipByValue");if(gb(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")})),t===n)return JI(r.shape,t,r.dtype);var a={x:r},i={clipValueMin:t,clipValueMax:n};return YS.runKernel(_x,a,i)}});var tN=s_({concat1d_:function(e){return LI(e,0)}});var nN=s_({concat2d_:function(e,t){return LI(e,t)}});var rN=s_({concat3d_:function(e,t){return LI(e,t)}});var aN=s_({concat4d_:function(e,t){return LI(e,t)}});var iN=s_({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=a_(e,"x","conv2d","float32"),u=a_(t,"filter","conv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=DI(s,[1,s.shape[0],s.shape[1],s.shape[2]])),gb(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),gb(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),MI("conv2d",r,o);var f="NHWC"===a?c.shape[3]:c.shape[1];gb(f===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(f,") must match ")+"input depth for filter ".concat(u.shape[2],".")})),gb(RI(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")}));var h={x:c,filter:u},p={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},d=YS.runKernel(Cx,h,p);return l?DI(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var oN=s_({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0,s=a_(e,"x","conv1d"),u=a_(t,"filter","conv1d"),c=s,l=!1;2===s.rank&&(l=!0,c=DI(s,[1,s.shape[0],s.shape[1]])),gb(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")})),gb(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(u.rank,".")})),MI("conv1d",r,o),gb(c.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(c.shape[2],") must match ")+"input depth for filter ".concat(u.shape[1],".")})),gb(RI(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")})),gb("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var f=DI(u,[1,u.shape[0],u.shape[1],u.shape[2]]),h=DI(c,[c.shape[0],1,c.shape[1],c.shape[2]]),p=[1,n],d=[1,i],m="NHWC",v=iN(h,f,p,r,m,d,o);return DI(v,l?[v.shape[2],v.shape[3]]:[v.shape[0],v.shape[2],v.shape[3]])}});var sN=s_({conv2DBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0;gb(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,c=!1;3===t.rank&&(c=!0,u=DI(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),gb(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")})),gb(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)})),gb(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var l="NHWC"===i?s[3]:s[1],f="NHWC"===i?u.shape[3]:u.shape[1];gb(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),gb(f===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(f,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),MI("conv2dDerInput",a,o);var h={dy:u,filter:n},p={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},d=YS.runKernel(Ax,h,p);return c?DI(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var uN=s_({conv2dTranspose_:function(e,t,n,r,a,i){var o=a_(e,"x","conv2dTranspose"),s=a_(t,"filter","conv2dTranspose");return sN(n,o,s,r,a,"NHWC",i)}});var cN=s_({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=a_(e,"x","conv3d"),s=a_(t,"filter","conv3d"),u=o,c=!1;4===o.rank&&(c=!0,u=DI(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),gb(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),gb(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")})),gb(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")})),gb(RI(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")})),gb("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var l={x:u,filter:s},f={strides:n,pad:r,dataFormat:a,dilations:i},h=YS.runKernel(Rx,l,f);return c?DI(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var lN=s_({conv3DBackpropInput_:function(e,t,n,r,a){gb(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=DI(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],c=o.shape[4];gb(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")})),gb(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(o.rank)})),gb(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),gb(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),gb(c===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(c,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var l={dy:o,filter:n},f={pad:a,strides:r,inputShape:i},h=YS.runKernel(Ox,l,f);return s?DI(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var fN=s_({conv3dTranspose_:function(e,t,n,r,a){var i=a_(e,"x","conv3dTranspose"),o=a_(t,"filter","conv3dTranspose");return lN(n,i,o,r,a)}});var hN=s_({cos_:function(e){var t={x:a_(e,"x","cos","float32")};return YS.runKernel("Cos",t)}});var pN=s_({cosh_:function(e){var t={x:a_(e,"x","cosh","float32")};return YS.runKernel(Mx,t)}});var dN=s_({cumprod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=a_(e,"x","cumprod"),i={x:a},o={axis:t,exclusive:n,reverse:r};return YS.runKernel(Dx,i,o)}});var mN=s_({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=a_(e,"x","cumsum"),i={x:a},o={axis:t,exclusive:n,reverse:r};return YS.runKernel(Fx,i,o)}});var vN=s_({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=a_(e,"x","denseBincount"),i=a_(t,"weights","denseBincount");gb("int32"===a.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)})),gb(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")})),gb(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),gb(i.size===a.size||0===i.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(i.shape,".")}));var o={x:a,weights:i},s={size:n,binaryOutput:r};return YS.runKernel(Lx,o,s)}});var gN=s_({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=a_(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];gb(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),gb(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),gb(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),gb(o%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},u={blockSize:t,dataFormat:n};return YS.runKernel(zx,s,u)}});var yN=s_({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=a_(e,"x","depthwiseConv2d","float32"),u=a_(t,"filter","depthwiseConv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=DI(s,[1,s.shape[0],s.shape[1],s.shape[2]])),gb(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")})),gb(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")}));var f="NHWC"===a?c.shape[3]:c.shape[1];gb(f===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(f,") must match the inChannels dimension in ")+"filter ".concat(u.shape[2],".")})),MI("depthwiseConv2d",r,o);var h={x:c,filter:u},p={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},d=YS.runKernel(Bx,h,p);return l?DI(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var bN=s_({diag_:function(e){var t={x:a_(e,"x","diag")};return YS.runKernel(jx,t)}});var xN=s_({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=a_(e,"x","dilation2d"),s=a_(t,"filter","dilation2d");gb(3===o.rank||4===o.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(o.rank,".")})),gb(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")})),gb("NHWC"===i,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(i)}));var u=o,c=!1;3===o.rank&&(u=DI(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0);var l={x:u,filter:s},f={strides:n,pad:r,dilations:a},h=YS.runKernel(Ux,l,f);return c?DI(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var wN=s_({floorDiv_:function(e,t){var n=a_(e,"a","floorDiv"),r=a_(t,"b","floorDiv"),a=WS(n,r),i=(0,T.Z)(a,2),o={a:n=i[0],b:r=i[1]};return YS.runKernel(Jx,o)}});var kN=s_({div_:function(e,t){var n=a_(e,"a","div"),r=a_(t,"b","div"),a=WS(n,r),i=(0,T.Z)(a,2);if(n=i[0],r=i[1],"int32"===n.dtype&&"int32"===r.dtype)return wN(n,r);var o={a:n,b:r};return YS.runKernel(Hx,o,{})}});var SN=s_({equal_:function(e,t){var n=a_(e,"a","equal","string_or_numeric"),r=a_(t,"b","equal","string_or_numeric"),a=WS(n,r),i=(0,T.Z)(a,2);n=i[0],r=i[1],qT(n.shape,r.shape);var o={a:n,b:r};return YS.runKernel(Gx,o)}});var _N=s_({where_:function(e,t,n){var r=a_(t,"a","where"),a=a_(n,"b","where"),i=a_(e,"condition","where","bool"),o=qT(qT(i.shape,r.shape),a.shape),s={condition:$I(i,o),t:$I(r,o),e:$I(a,o)};return YS.runKernel(ak,s)}});var TN=s_({zerosLike_:function(e){var t={x:a_(e,"x","zerosLike")};return YS.runKernel(Fk,t)}});var IN=s_({divNoNan_:function(e,t){var n=a_(e,"a","div"),r=a_(t,"b","div"),a=WS(n,r),i=(0,T.Z)(a,2);n=i[0],r=i[1];var o=kN(n,r),s=TN(o),u=SN(r,s);return _N(u,s,o)}});var NN=s_({dot_:function(e,t){var n=a_(e,"t1","dot"),r=a_(t,"t2","dot");gb((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(gb(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(i,".")})),1===n.rank&&1===r.rank){var o=DI(n,[1,-1]),s=DI(r,[-1,1]),u=zI(o,s);return DI(u,[])}if(1===n.rank&&2===r.rank){var c=DI(n,[1,-1]),l=DI(r,[r.shape[0],r.shape[1]]),f=zI(c,l);return DI(f,[f.size])}if(2===n.rank&&1===r.rank){var h=DI(r,[-1,1]),p=zI(n,h);return DI(p,[p.size])}var d=DI(r,[r.shape[0],r.shape[1]]);return zI(n,d)}});var CN=s_({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map((function(e,t){return a_(e,"tensors".concat(t),"einsum")})),i={equation:e};return YS.runKernel(Zx,a,i)}});var EN=s_({elu_:function(e){var t={x:a_(e,"x","elu","float32")};return YS.runKernel("Elu",t)}});var AN=s_({erf_:function(e){var t=a_(e,"x","erf");gb("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=bT(t,"float32"));var n={x:t};return YS.runKernel("Erf",n)}});function RN(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function ON(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function MN(e,t){return function(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}(e,t.map((function(e){return 1})),t)}function DN(e,t,n){gb(RN(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function FN(e,t){if(RN(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function PN(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function LN(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var zN=s_({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=a_(e,"x","max"),a={x:r},i={reductionIndices:t,keepDims:n};return YS.runKernel(ww,a,i)}});var BN=s_({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=a_(e,"x","min"),a={x:r},i={axis:t,keepDims:n};return YS.runKernel(Nw,a,i)}});var WN=s_({pow_:function(e,t){var n=a_(e,"base","pow"),r=a_(t,"exp","pow"),a=WS(n,r),i=(0,T.Z)(a,2),o={a:n=i[0],b:r=i[1]};return YS.runKernel("Pow",o)}});function VN(e,t){if((Ob(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Ob(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return c_(e,[],[],t)}var jN=s_({sqrt_:function(e){var t={x:a_(e,"x","sqrt","float32")};return YS.runKernel(fk,t)}});var UN=s_({square_:function(e){var t=a_(e,"x","square");return YS.runKernel("Square",{x:t},{})}});var HN=s_({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=a_(e,"x","sum");"bool"===r.dtype&&(r=bT(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return YS.runKernel(hk,a,i)}});function ZN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return iI(e);if(1!==e.rank&&null===n)return ZN(DI(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return HN(iI(e),n);if(t===1/0)return zN(iI(e),n);if(t===-1/0)return BN(iI(e),n);if("euclidean"===t||2===t)return jN(HN(WN(iI(e),VN(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return zN(HN(iI(e),n[0]),n[1]-1);if(t===1/0)return zN(HN(iI(e),n[1]),n[0]);if(t===-1/0)return BN(HN(iI(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return jN(HN(UN(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var GN=s_({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=ZN(e=a_(e,"x","norm"),t,n),i=a.shape;if(r){var o=Nb(n,e.shape);i=MN(a.shape,o)}return DI(a,i)}});var qN=s_({euclideanNorm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return GN(e,"euclidean",t,n)}});var KN=s_({exp_:function(e){var t={x:a_(e,"x","exp")};return YS.runKernel(qx,t)}});var XN=s_({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=a_(e,"x","expandDims","string_or_numeric");gb(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return YS.runKernel(Kx,r,a)}});var YN=s_({expm1_:function(e){var t={x:a_(e,"x","expm1")};return YS.runKernel(Xx,t)}});var $N=s_({tile_:function(e,t){var n=a_(e,"x","tile","string_or_numeric");gb(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return YS.runKernel(Ck,r,a)}});var QN=s_({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=yT([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=DI(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return $N(XN(s,0),[n[0],1,1]);if(2===n.length)return $N(XN(XN(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return $N(XN(XN(XN(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});var JN=s_({floor_:function(e){var t={x:a_(e,"x","floor","float32")};return YS.runKernel(Qx,t)}});var eC=s_({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=a_(e,"x","gather"),i=a_(t,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return YS.runKernel(tw,o,s)}});var tC=s_({greater_:function(e,t){var n=a_(e,"a","greater","string_or_numeric"),r=a_(t,"b","greater","string_or_numeric"),a=WS(n,r),i=(0,T.Z)(a,2);n=i[0],r=i[1],qT(n.shape,r.shape);var o={a:n,b:r};return YS.runKernel(rw,o)}});var nC=s_({greaterEqual_:function(e,t){var n=a_(e,"a","greaterEqual","string_or_numeric"),r=a_(t,"b","greaterEqual","string_or_numeric"),a=WS(n,r),i=(0,T.Z)(a,2);n=i[0],r=i[1],qT(n.shape,r.shape);var o={a:n,b:r};return YS.runKernel(aw,o)}});var rC=s_({imag_:function(e){var t={input:a_(e,"input","imag")};return YS.runKernel(sw,t)}});var aC=s_({isFinite_:function(e){var t={x:a_(e,"x","isFinite")};return YS.runKernel(uw,t)}});var iC=s_({isInf_:function(e){var t={x:a_(e,"x","isInf")};return YS.runKernel(cw,t)}});var oC=s_({isNaN_:function(e){var t={x:a_(e,"x","isNaN")};return YS.runKernel(lw,t)}});var sC=s_({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=a_(e,"x","leakyRelu"),r={x:n},a={alpha:t};return YS.runKernel(fw,r,a)}});var uC=s_({less_:function(e,t){var n=a_(e,"a","less","string_or_numeric"),r=a_(t,"b","less","string_or_numeric"),a=WS(n,r),i=(0,T.Z)(a,2);n=i[0],r=i[1],qT(n.shape,r.shape);var o={a:n,b:r};return YS.runKernel(hw,o)}});var cC=s_({lessEqual_:function(e,t){var n=a_(e,"a","lessEqual","string_or_numeric"),r=a_(t,"b","lessEqual","string_or_numeric"),a=WS(n,r),i=(0,T.Z)(a,2);n=i[0],r=i[1],qT(n.shape,r.shape);var o={a:n,b:r};return YS.runKernel(pw,o)}});function lC(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return YS.runKernel(dw,{},r)}var fC=s_({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=a_(e,"x","localResponseNormalization");gb(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")})),gb(Sb(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var o=i,s=!1;3===i.rank&&(s=!0,o=DI(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var u={x:o},c={depthRadius:t,bias:n,alpha:r,beta:a},l=YS.runKernel(xw,u,c);return s?DI(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var hC=s_({log_:function(e){var t={x:a_(e,"x","log","float32")};return YS.runKernel(mw,t)}});var pC=s_({log1p_:function(e){var t={x:a_(e,"x","log1p")};return YS.runKernel(vw,t)}});function dC(e){return YS.customGrad(e)}var mC=s_({neg_:function(e){var t={x:a_(e,"x","neg")};return YS.runKernel(Ow,t)}});var vC=s_({softplus_:function(e){var t={x:a_(e,"x","softplus")};return YS.runKernel(lk,t)}});var gC=s_({logSigmoid_:function(e){var t=a_(e,"x","logSigmoid"),n=dC((function(e){return{value:mC(vC(mC(e))),gradFunc:function(t){return BI(t,WI(mC(e)))}}}));return n(t)}});var yC=s_({sub_:function(e,t){var n=a_(e,"a","sub"),r=a_(t,"b","sub"),a=WS(n,r),i=(0,T.Z)(a,2),o={a:n=i[0],b:r=i[1]};return YS.runKernel(Ik,o)}});var bC=s_({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=a_(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var r=dC((function(e,n){var r=zN(e,t,!0),a=yC(e,r),i=yC(bT(a,"float32"),hC(HN(KN(a),t,!0)));n([i]);return{value:i,gradFunc:function(e,n){var r=(0,T.Z)(n,1)[0],a=KN(r);return yC(e,BI(HN(e,t,!0),a))}}}));return r(n)}});var xC=s_({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=a_(e,"x","logSumExp"),a=Nb(t,r.shape),i=zN(r,a,!0),o=yC(r,i),s=KN(o),u=HN(s,a),c=hC(u),l=uI(DI(i,c.shape),c);if(n){var f=MN(l.shape,a);return DI(l,f)}return l}});var wC=s_({logicalAnd_:function(e,t){var n=a_(e,"a","logicalAnd","bool"),r=a_(t,"b","logicalAnd","bool");qT(n.shape,r.shape);var a={a:n,b:r};return YS.runKernel(gw,a)}});var kC=s_({logicalNot_:function(e){var t={x:a_(e,"x","logicalNot","bool")};return YS.runKernel(yw,t)}});var SC=s_({logicalOr_:function(e,t){var n=a_(e,"a","logicalOr","bool"),r=a_(t,"b","logicalOr","bool");qT(n.shape,r.shape);var a={a:n,b:r};return YS.runKernel(bw,a)}});var _C=s_({logicalXor_:function(e,t){var n=a_(e,"a","logicalXor","bool"),r=a_(t,"b","logicalXor","bool");return qT(n.shape,r.shape),wC(SC(e,t),kC(wC(e,t)))}}),TC=2147483648;var IC=s_({searchSorted_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",r=a_(e,"sortedSequence","searchSorted"),a=a_(t,"values","searchSorted"),i=r.shape[r.shape.length-1],o=a.shape[a.shape.length-1],s=DI(r,[-1,i]),u=DI(a,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(wb(u.shape)>=TC)throw new Error("values tensor size must less than ".concat(TC));if(s.shape[1]>=TC)throw new Error("trailing dim_size must less than ".concat(TC," for int32 output type, was ").concat(s.shape[1]));var c={sortedSequence:s,values:u},l={side:n};return YS.runKernel(rk,c,l)}});function NC(e,t){return IC(e,t,"left")}var CC=s_({maxPool_:function(e,t,n,r,a){var i=a_(e,"x","maxPool"),o=i,s=!1;3===i.rank&&(s=!0,o=DI(i,[1,i.shape[0],i.shape[1],i.shape[2]])),gb(4===o.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")})),gb(RI(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),MI("maxPool",r,a);var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=YS.runKernel(Sw,u,c);return s?DI(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var EC=s_({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=a_(e,"x","maxPool3d"),s=o,u=!1;4===o.rank&&(u=!0,s=DI(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),gb(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),gb("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),MI("maxPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},f=YS.runKernel(_w,c,l);return u?DI(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var AC=s_({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=a_(e,"x","maxPoolWithArgmax"),o={x:i},s={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},u=YS.runKernel(Tw,o,s);return{result:u[0],indexes:u[1]}}});var RC=s_({maximum_:function(e,t){var n=a_(e,"a","maximum"),r=a_(t,"b","maximum"),a=WS(n,r),i=(0,T.Z)(a,2);n=i[0],r=i[1],"bool"===n.dtype&&(n=bT(n,"int32"),r=bT(r,"int32")),qT(n.shape,r.shape);var o={a:n,b:r};return YS.runKernel(kw,o)}});var OC=s_({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=a_(e,"x","mean"),a={x:r},i={axis:t,keepDims:n};return YS.runKernel(Iw,a,i)}});function MC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=MC(e,"float32"),r=MC(e,"float32");return u_(n,r)}var a=jb(wb(e),t);return YS.makeTensor(a,e,t)}function DC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=DC(e,"float32"),r=MC(e,"float32");return u_(n,r)}var a=Vb(wb(e),t);return YS.makeTensor(a,e,t)}function FC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.indexing,a=void 0===r?"xy":r;if("xy"!==a&&"ij"!==a)throw new TypeError("".concat(a," is not a valid third argument to meshgrid"));if(void 0===e)return[];var i=a_(e,"x","meshgrid",e instanceof AS?e.dtype:"float32");if(void 0===t)return[i];var o=a_(t,"y","meshgrid",t instanceof AS?t.dtype:"float32"),s=wb(i.shape),u=wb(o.shape);return"xy"===a?(i=DI(i,[1,-1]),o=DI(o,[-1,1]),[zI(DC([u,1],i.dtype),i),zI(o,DC([1,s],o.dtype))]):(i=DI(i,[-1,1]),o=DI(o,[1,-1]),[zI(i,DC([1,u],i.dtype)),zI(DC([s,1],o.dtype),o)])}var PC=s_({minimum_:function(e,t){var n=a_(e,"a","minimum"),r=a_(t,"b","minimum"),a=WS(n,r),i=(0,T.Z)(a,2);n=i[0],r=i[1],"bool"===n.dtype&&(n=bT(n,"int32"),r=bT(r,"int32")),qT(n.shape,r.shape);var o={a:n,b:r};return YS.runKernel(Cw,o)}});var LC=s_({mirrorPad_:function(e,t,n){gb("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var r=a_(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");gb(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")}));for(var a="reflect"===n?1:0,i=function(e){gb(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),gb(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(r.shape[e]-a," or less than 0 for input of ")+"shape ".concat(r.shape)}))},o=0;o<r.rank;o++)i(o);var s={paddings:t,mode:n},u={x:r};return YS.runKernel(Ew,u,s)}});var zC=s_({mod_:function(e,t){var n=a_(e,"a","mod"),r=a_(t,"b","mod"),a=WS(n,r),i=(0,T.Z)(a,2),o={a:n=i[0],b:r=i[1]};return YS.runKernel("Mod",o)}});var BC=s_({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Nb(t,(e=a_(e,"x","moments")).shape),a=OC(e,r,n),i=a.shape;n||(i=MN(a.shape,r));var o=UN(yC(bT(e,"float32"),DI(a,i))),s=OC(o,r,n);return{mean:a,variance:s}}});var WC=s_({multiRNNCell_:function(e,t,n,r){for(var a=a_(t,"data","multiRNNCell"),i=i_(n,"c","multiRNNCell"),o=i_(r,"h","multiRNNCell"),s=a,u=[],c=0;c<e.length;c++){var l=e[c](s,i[c],o[c]);u.push(l[0]),u.push(l[1]),s=l[1]}for(var f=[],h=[],p=0;p<u.length;p+=2)f.push(u[p]),h.push(u[p+1]);return[f,h]}});var VC=s_({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=a_(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(i,"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(o));n=n||Math.random();var s=1===o?DI(a,[1,-1]):a,u={logits:s},c={numSamples:t,seed:n,normalized:r},l=YS.runKernel(Aw,u,c);return 1===o?DI(l,[l.size]):l}});var jC=s_({notEqual_:function(e,t){var n=a_(e,"a","notEqual","string_or_numeric"),r=a_(t,"b","notEqual","string_or_numeric"),a=WS(n,r),i=(0,T.Z)(a,2);n=i[0],r=i[1],qT(n.shape,r.shape);var o={a:n,b:r};return YS.runKernel(Mw,o)}});var UC=s_({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var i=a_(e,"indices","oneHot","int32"),o={indices:i},s={dtype:a,depth:t,onValue:n,offValue:r};return YS.runKernel(zw,o,s)}});var HC=s_({onesLike_:function(e){var t={x:a_(e,"x","onesLike")};return YS.runKernel(Lw,t)}});var ZC=s_({outerProduct_:function(e,t){var n=a_(e,"v1","outerProduct"),r=a_(t,"v2","outerProduct");gb(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=DI(n,[-1,1]),i=DI(r,[1,-1]);return zI(a,i)}});var GC=s_({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=a_(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},i={x:r};return YS.runKernel(Ww,i,a)}});var qC=s_({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return gb(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),GC(e,[t],n)}});var KC=s_({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return gb(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),GC(e,t,n)}});var XC=s_({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return gb(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),GC(e,t,n)}});var YC=s_({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return gb(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),GC(e,t,n)}});var $C=s_({spaceToBatchND_:function(e,t,n){var r=a_(e,"x","spaceToBatchND");gb(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),gb(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),gb(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},i={blockShape:t,paddings:n};return YS.runKernel(pk,a,i)}});var QC=s_({pool_:function(e,t,n,r,a,i,o){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var s=a_(e,"x","maxPool"),u=s,c=!1;3===s.rank&&(c=!0,u=DI(s,[1,s.shape[0],s.shape[1],s.shape[2]])),gb(RI(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(a,"'")}));var l,f=bI(u.shape,t,i,a,r),h=[f.dilationHeight,f.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([f.filterHeight,f.filterWidth],h):[[0,0],[0,0]];var p=1===h[0]&&1===h[1],d=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),c=t.map((function(e,t){return[0,o[t]]}));return[u,c]}([f.inHeight,f.inWidth],h,l),m=(0,T.Z)(d,2),v=m[0],g=m[1],y=p?r:"valid",b=p?u:$C(u,h,v),x=("avg"===n?function(){return FI(b,t,i,y,o)}:function(){return CC(b,t,i,y,o)})(),w=p?x:HI(x,h,g);return c?DI(w,[w.shape[1],w.shape[2],w.shape[3]]):w}});var JC=s_({prelu_:function(e,t){var n={x:a_(e,"x","prelu"),alpha:a_(t,"alpha","prelu")};return YS.runKernel(Vw,n)}});var eE=s_({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=a_(e,"x","prod");"bool"===r.dtype&&(r=bT(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return YS.runKernel(jw,a,i)}});var tE=s_({raggedGather_:function(e,t,n,r){var a={paramsNestedSplits:e.map((function(e,t){return a_(e,"tensors".concat(t),"raggedGather","int32")})),paramsDenseValues:a_(t,"paramsDenseValues","raggedGather"),indices:a_(n,"indices","raggedGather","int32")},i={outputRaggedRank:r},o=YS.runKernel(Uw,a,i);return{outputNestedSplits:o.slice(0,o.length-1),outputDenseValues:o[o.length-1]}}});var nE=s_({raggedTensorToTensor_:function(e,t,n,r,a){var i=a_(e,"shape","raggedTensorToTensor","int32"),o=a_(t,"values","raggedTensorToTensor"),s={shape:i,values:o,defaultValue:a_(n,"defaultValue","raggedTensorToTensor",o.dtype),rowPartitionTensors:r.map((function(e,t){return a_(e,"tensors".concat(t),"raggedTensorToTensor","int32")}))},u={rowPartitionTypes:a};return YS.runKernel(Hw,s,u)}});var rE=s_({rand_:function(e,t,n){var r=wb(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return YS.makeTensor(a,e,n)}}),aE=function(){function e(t,n,r,a,i){N(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=Lo.alea(o.toString())}return(0,C.Z)(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),iE=function(){function e(t,n,r,a){N(this,e),this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=Lo.alea(i.toString()),this.randn=new aE(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return(0,C.Z)(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),oE=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(N(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==i&&(i=Math.random()),"number"===typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=Lo.alea(i)}return(0,C.Z)(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var sE=s_({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new iE(t,n,r,a),o=yT(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var uE=s_({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new aE(t,n,r,!1,a),o=yT(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var cE=s_({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error("Unsupported data type ".concat(t));return uE(e,0,1,t,n)}});var lE=s_({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0,i=yT(e,r),o=new oE(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});function fE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return YS.runKernel(Zw,{},a)}var hE=s_({real_:function(e){var t={input:a_(e,"input","real")};return YS.runKernel(Gw,t)}});var pE=s_({reciprocal_:function(e){var t={x:a_(e,"x","reciprocal")};return YS.runKernel(qw,t)}});var dE=s_({relu_:function(e){var t={x:a_(e,"x","relu")};return YS.runKernel(Kw,t)}});var mE=s_({relu6_:function(e){var t={x:a_(e,"x","relu6")};return YS.runKernel(Qw,t)}});var vE=s_({reverse_:function(e,t){var n={x:a_(e,"x","reverse")},r={dims:t};return YS.runKernel(Jw,n,r)}});var gE=s_({reverse1d_:function(e){var t=a_(e,"x","reverse");return gb(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),vE(t,0)}});var yE=s_({reverse2d_:function(e,t){var n=a_(e,"x","reverse");return gb(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),vE(n,t)}});var bE=s_({reverse3d_:function(e,t){var n=a_(e,"x","reverse");return gb(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),vE(n,t)}});var xE=s_({reverse4d_:function(e,t){var n=a_(e,"x","reverse");return gb(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),vE(n,t)}});var wE=s_({round_:function(e){var t={x:a_(e,"x","round")};return YS.runKernel(ek,t)}});var kE=s_({rsqrt_:function(e){var t={x:a_(e,"x","rsqrt","float32")};return YS.runKernel(tk,t)}});var SE=s_({selu_:function(e){var t={x:a_(e,"x","selu")};return YS.runKernel(ik,t)}});var _E=s_({separableConv2d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=a_(e,"x","separableConv2d"),u=a_(t,"depthwiseFilter","separableConv2d"),c=a_(n,"pointwiseFilter","separableConv2d"),l=s,f=!1;if(3===s.rank&&(f=!0,l=DI(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");gb(4===l.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,".")})),gb(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),gb(4===c.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),gb(1===c.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(c.shape[0],".")})),gb(1===c.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(c.shape[1],".")}));var h=u.shape[2],p=u.shape[3];gb(c.shape[2]===h*p,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(h*p,", ")+"but got ".concat(c.shape[2],".")}));var d=yN(l,u,r,a,o,i),m=1,v=iN(d,c,m,"valid",o);return f?DI(v,[v.shape[1],v.shape[2],v.shape[3]]):v}});function TE(){return TE=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u,c,l,f,h,p;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a_(t,"x","setdiff1d"),a=a_(n,"y","setdiff1d"),gb(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),gb(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),gb(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=7,r.data();case 7:return i=e.sent,e.next=10,a.data();case 10:for(o=e.sent,s=new Set(o),u=0,c=0;c<i.length;c++)s.has(i[c])||u++;for(l=new NS([u],r.dtype),f=new NS([u],"int32"),h=0,p=0;h<i.length;h++)s.has(i[h])||(l.values[p]=i[h],f.values[p]=h,p++);return e.abrupt("return",[l.toTensor(),f.toTensor()]);case 18:case"end":return e.stop()}}),e)}))),TE.apply(this,arguments)}var IE=function(e,t){return TE.apply(this,arguments)};var NE=s_({sign_:function(e){var t={x:a_(e,"x","sign")};return YS.runKernel(uk,t)}});var CE=s_({sin_:function(e){var t={x:a_(e,"x","sin","float32")};return YS.runKernel("Sin",t)}});var EE=s_({sinh_:function(e){var t={x:a_(e,"x","sinh")};return YS.runKernel(sk,t)}});var AE=s_({slice1d_:function(e,t,n){var r=a_(e,"x","slice1d");return gb(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),VI(r,[t],[n])}});var RE=s_({slice2d_:function(e,t,n){var r=a_(e,"x","slice2d");return gb(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),VI(r,t,n)}});var OE=s_({slice3d_:function(e,t,n){var r=a_(e,"x","slice3d");return gb(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),VI(r,t,n)}});var ME=s_({slice4d_:function(e,t,n){var r=a_(e,"x","slice4d");return gb(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),VI(r,t,n)}});var DE=s_({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=a_(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return YS.runKernel(mk,r,a)}});var FE=s_({fft_:function(e){gb("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return YS.runKernel("FFT",t)}});var PE=s_({ifft_:function(e){gb("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return YS.runKernel(ow,t)}});var LE=s_({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=DI(e,[r,n]);t=PE(a)}else{var i=[r,2*(n-1)],o=DI(hE(e),[r,n]),s=DI(rC(e),[r,n]),u=vE(VI(o,[0,1],[r,n-2]),1),c=BI(vE(VI(s,[0,1],[r,n-2]),1),VN(-1)),l=LI([o,u],1),f=LI([s,c],1),h=DI(u_(l,f),[i[0],i[1]]);t=PE(h)}if(t=hE(t),3===e.rank&&0!==e.shape[0]){var p=t,d=e.shape[0];t=DI(t,[d,t.shape[0]/d,t.shape[1]]),p.dispose()}return t}});var zE=s_({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=a_(e,"x","split"),a={x:r},i={numOrSizeSplits:t,axis:n};return YS.runKernel(dk,a,i)}});var BE=s_({rfft_:function(e,t){gb("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=VI(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=LI([e,MC(s)],e.shape.length-1),r=t}else n=e;var u=TN(n),c=DI(u_(n,u),[a,r]),l=FE(c),f=Math.floor(r/2)+1,h=hE(l),p=rC(l),d=zE(h,[f,r-f],h.shape.length-1),m=zE(p,[f,r-f],p.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=f,DI(u_(d[0],m[0]),v)}});var WE=s_({squaredDifference_:function(e,t){var n=a_(e,"a","squaredDifference"),r=a_(t,"b","squaredDifference"),a=WS(n,r),i=(0,T.Z)(a,2);n=i[0],r=i[1],qT(n.shape,r.shape);var o={a:n,b:r};return YS.runKernel(wk,o,{})}});var VE=s_({squeeze_:function(e,t){var n=a_(e,"x","squeeze","string_or_numeric");return DI(n,Cb(n.shape,t).newShape)}});var jE=s_({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=i_(e,"tensors","stack","string_or_numeric");gb(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&gb(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return YS.runKernel(Bw,r,a)}});var UE=s_({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=a_(e,"x","step"),r={x:n},a={alpha:t};return YS.runKernel(Pk,r,a)}});var HE=s_({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=a_(e,"x","stridedSlice","string_or_numeric"),l={x:c},f={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return YS.runKernel(kk,l,f)}});var ZE=s_({tan_:function(e){var t={x:a_(e,"x","tan","float32")};return YS.runKernel("Tan",t)}});function GE(e,t){bb(e);var n=t_(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return c_(e,null,n,t)}function qE(e,t,n){if(bb(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=t_(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return c_(e,t,r,n)}function KE(e,t,n){if(bb(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=t_(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return c_(e,t,r,n)}function XE(e,t,n){if(bb(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=t_(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return c_(e,t,r,n)}function YE(e,t,n){if(bb(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=t_(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return c_(e,t=t||r,r,n)}var $E=s_({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=a_(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var i={x:r},o={k:t,sorted:n},s=YS.runKernel(Ek,i,o),u=(0,T.Z)(s,2),c=u[0],l=u[1];return{values:c,indices:l}}});var QE=s_({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new aE(t,n,r,!0,a),o=yT(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var JE=s_({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=a_(e,"x","unique","string_or_numeric");gb(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},i=YS.runKernel(Ok,r,a),o=(0,T.Z)(i,2),s=o[0],u=o[1];return{values:s,indices:u}}});var eA=s_({unsortedSegmentSum_:function(e,t,n){var r=a_(e,"x","unsortedSegmentSum"),a=a_(t,"segmentIds","unsortedSegmentSum","int32");gb(Sb(n),(function(){return"numSegments must be of dtype int"}));var i={x:r,segmentIds:a},o={numSegments:n};return YS.runKernel(Dk,i,o)}});var tA=s_({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=a_(e,"x","unstack","string_or_numeric");gb(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return YS.runKernel(Mk,r,a)}});function nA(e,t){return IC(e,t,"right")}function rA(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return YS.makeVariable(e,t,n,r)}function aA(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=yT(e,"int32"),i=yT([n.length,e.length],"int32"),o=0;o<n.length;o++){var s=a.indexToLoc(n[o]),u=o*e.length;i.values.set(s,u)}return i.toTensor()}function iA(){return(iA=Tn(Sn().mark((function e(t){var n,r,a;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a_(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=aA(n.shape,r),t!==n&&n.dispose(),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oA=function(e){return iA.apply(this,arguments)};function sA(){return sA=Tn(Sn().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,p,d,m,v;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=a_(t,"tensor","boolMask"),i=a_(n,"mask","boolMask","bool"),o=null==r?0:r,s=i.rank,u=a.shape,gb(s>0,(function(){return"mask cannot be scalar"})),yb(u.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=o;l<o+s;l++)c*=u[l];return f=u.slice(0,o).concat([c],u.slice(o+s)),h=DI(a,f),p=DI(i,[-1]),e.next=14,oA(p);case 14:return d=e.sent,m=VE(d,[1]),v=eC(h,m,o),t!==a&&a.dispose(),n!==i&&i.dispose(),m.dispose(),h.dispose(),p.dispose(),d.dispose(),e.abrupt("return",v);case 24:case"end":return e.stop()}}),e)}))),sA.apply(this,arguments)}var uA=function(e,t,n){return sA.apply(this,arguments)};function cA(){return YS}function lA(e,t){return YS.tidy(e,t)}function fA(e){jS(e).forEach((function(e){return e.dispose()}))}function hA(e){return YS.keep(e)}!function(e){e}((function(e){$b().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}));var pA=s_({transpose_:function(e,t,n){var r=a_(e,"x","transpose");if(null==t&&(t=r.shape.map((function(e,t){return t})).reverse()),gb(r.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){gb(e>=0&&e<r.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t)}))})),r.rank<=1)return r.clone();var a={x:r},i={perm:t};return"complex64"===r.dtype?lA((function(){var e=hE(r),t=rC(r);return e=YS.runKernel(Rk,{x:e},i),t=YS.runKernel(Rk,{x:t},i),n&&(t=mC(t)),u_(e,t)})):YS.runKernel(Rk,a,i)}});var dA=s_({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=a_(e,"v","movingAverage"),o=a_(t,"x","movingAverage"),s=a_(n,"decay","movingAverage");VS(i,o),gb(kb(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var u=VN(1),c=yC(u,s),l=BI(yC(o,i),c);if(a){gb(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var f=a_(r,"step","movingAverage");l=kN(l,yC(u,WN(s,f)))}return uI(i,l)}});function mA(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}!function(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}(n,t,e)}function vA(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:wb(t.shape)/u,sliceSize:o,strides:[].concat((0,I.Z)(zb(n.slice(0,a))),[1]),outputSize:wb(n)}}var gA=s_({scatterND_:function(e,t,n){var r=a_(e,"indices","scatterND","int32"),a=a_(t,"updates","scatterND");mA(a,r,n);var i={indices:r,updates:a},o={shape:n};return YS.runKernel(nk,i,o)}});function yA(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var bA=s_({sparseToDense_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=a_(e,"sparseIndices","sparseToDense","int32"),i=a_(t,"sparseValues","sparseToDense","string_or_numeric"),o=a_(r,"defaultValue","sparseToDense",i.dtype);yA(a,i,n,o);var s={sparseIndices:a,sparseValues:i,defaultValue:o},u={outputShape:n};return YS.runKernel(xk,s,u)}});var xA=s_({gatherND_:function(e,t){var n=a_(t,"indices","gatherND","int32"),r={params:a_(e,"x","gatherND","string_or_numeric"),indices:n};return YS.runKernel(nw,r)}});var wA=s_({dropout_:function(e,t,n,r){var a=a_(e,"x","dropout");if(gb("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),gb(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof AS?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(kb(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=kN(JN(uI(lE(i,0,1,"float32",r),o)),o);return BI(a,s)}});function kA(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function SA(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return GE(a,"float32")}function _A(){return _A=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u,c,l,f,h,p,d,m,v,g,y=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>2&&void 0!==y[2]?y[2]:1,a=a_(t,"predictions","inTopK"),i=a_(n,"targets","inTopK"),gb(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),gb(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(i.rank)})),yb(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],gb(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(r)})),e.next=10,a.data();case 10:return s=e.sent,e.next=13,i.data();case 13:u=e.sent,c=s.length/o,l=o,f=Eb("bool",c),h=0;case 17:if(!(h<c)){e.next=35;break}for(p=h*l,d=s.subarray(p,p+l),m=[],v=0;v<d.length;v++)m.push({value:d[v],index:v});m.sort((function(e,t){return t.value-e.value})),f[h]=0,g=0;case 25:if(!(g<r)){e.next=32;break}if(m[g].index!==u[h]){e.next=29;break}return f[h]=1,e.abrupt("break",32);case 29:g++,e.next=25;break;case 32:h++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==i&&i.dispose(),e.abrupt("return",l_(f,i.shape,"bool"));case 38:case"end":return e.stop()}}),e)}))),_A.apply(this,arguments)}var TA=function(e,t){return _A.apply(this,arguments)};var IA=s_({conv2DBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=DI(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=DI(t,[1,t.shape[0],t.shape[1],t.shape[2]])),gb(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")})),gb(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")})),gb(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var c="NHWC"===i?s.shape[3]:s.shape[1],l="NHWC"===i?u.shape[3]:u.shape[1];gb(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(c,") must ")+"match input depth in filter (".concat(n[2],".")})),gb(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(l,") must ")+"match output depth for filter (".concat(n[3],").")})),MI("conv2dDerFilter",a,o);var f={x:s,dy:u},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return YS.runKernel(Ex,f,h)}});function NA(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return BI(e,UE(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function CA(e,t){var n=t,r=function(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}(e.shape,t.shape);return r.length>0&&(n=HN(n,r)),DI(n,e.shape)}function EA(e,t,n,r){if("linear"===t)return e;if("relu"===t)return dE(e);if("elu"===t)return EN(e);if("relu6"===t)return mE(e);if("prelu"===t)return JC(e,n);if("leakyrelu"===t)return sC(e,r);if("sigmoid"===t)return WI(e);throw new Error("Unknown fused activation ".concat(t,"."))}var AA=function(e,t){return!(e>0)||"linear"===t};var RA=s_({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,f=e.activation,h=void 0===f?"linear":f,p=e.preluActivationWeights,d=e.leakyreluAlpha;if(h=h||"linear",!1===AA(YS.state.gradientDepth,h)){gb("NHWC"===o,(function(){return"Error in fused conv2d: got dataFormat of ".concat(o," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."}));var m=iN(t,n,r,a,o,u,c);return null!=l&&(m=uI(m,l)),EA(m,h,p,d)}var v=a_(t,"x","conv2d","float32"),g=a_(n,"filter","conv2d","float32"),y=v,b=!1;3===v.rank&&(b=!0,y=DI(v,[1,v.shape[0],v.shape[1],v.shape[2]])),gb(4===y.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(y.rank,".")})),gb(4===g.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(g.rank,".")})),MI("fused conv2d",a,c);var x="NHWC"===o?y.shape[3]:y.shape[1];gb(g.shape[2]===x,(function(){return"Error in conv2d: depth of input (".concat(x,") must match ")+"input depth for filter ".concat(g.shape[2],".")})),gb(RI(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(u,"'")}));var w,k,S=wI(y.shape,g.shape,r,u,a,c);if(null!=l){var _=WS(w=a_(l,"bias","fused conv2d"),v),I=(0,T.Z)(_,1);w=I[0],"NHWC"===o?qT(S.outShape,w.shape):(gb(w.shape.length<=1,(function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(w.shape.length,".")})),gb(0===w.shape.length||w.shape[0]===S.outChannels||1===w.shape[0],(function(){return"Error in fused conv2d: bias shape (".concat(w.shape,") is not ")+"compatible with the number of output channels "+"(".concat(S.outChannels,")")})))}if(null!=p){var N=p.shape;if(gb(N.length<=1||3===N.length,(function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(N.length,".")})),1===N.length)gb(1===N[0]||N[0]===S.outChannels,(function(){return"Error in fused conv2d: PReLU activation weights "+"(".concat(N,") is not compatible with the number of output ")+"channels (".concat(S.outChannels,").")}));else if(3===N.length)try{qT(N,S.outShape)}catch(D){var C="Error in fused conv2d: PReLU activation weights (".concat(N,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(S.outShape,").");throw Error(C)}k=a_(p,"prelu weights","fused conv2d")}var E=function(e,t){gb("NHWC"===o,(function(){return"Error in gradient of fused conv2D: got dataFormat of ".concat(o," but only NHWC is currently supported.")}));var n=(0,T.Z)(t,4),i=n[0],s=n[1],c=n[2],l=n[3],f=NA(e,c,h);gb(AI(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(u,"'")}));var p=[sN(s.shape,f,i,r,a),IA(s,f,i.shape,r,a)];if(null!=l){var d=CA(l,f);p.push(d)}return p},A={x:y,filter:g,bias:w,preluActivationWeights:k},R={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:c,activation:h,leakyreluAlpha:d};if(null==l){var O=dC((function(e,t,n){var r=YS.runKernel(Wk,A,R);return n([t,e,r]),b&&(r=DI(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:E}}));return O(y,g)}var M=dC((function(e,t,n,r){var a=YS.runKernel(Wk,A,R);return r([t,e,a,n]),b&&(a=DI(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:E}}));return M(y,g,w)}});var OA=s_({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=DI(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=DI(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={x:s,dy:u},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return YS.runKernel(Wx,c,l)}});var MA=s_({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=DI(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={dy:s,filter:n},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},f=YS.runKernel(Vx,c,l);return u?DI(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var DA=s_({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,f=e.activation,h=void 0===f?"linear":f,p=e.preluActivationWeights,d=e.leakyreluAlpha;if(!1===AA(YS.state.gradientDepth,h)){var m=yN(t,n,r,a,o,u,c);return null!=l&&(m=uI(m,l)),EA(m,h,p,d)}var v=a_(t,"x","depthwiseConv2d","float32"),g=a_(n,"filter","depthwiseConv2d","float32"),y=v,b=!1;3===v.rank&&(b=!0,y=DI(v,[1,v.shape[0],v.shape[1],v.shape[2]])),gb(4===y.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(y.rank,".")})),gb(4===g.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(g.rank,".")})),gb(y.shape[3]===g.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(y.shape[3],") must match the inChannels dimension in ")+"filter ".concat(g.shape[2],".")})),null==u&&(u=[1,1]),gb(RI(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(u,"'")})),MI("fused depthwiseConv2d",a,c);var x,w,k=wI(y.shape,g.shape,r,u,a,c,!0);if(null!=l){var S=WS(x=a_(l,"bias","fused conv2d"),v),_=(0,T.Z)(S,1);x=_[0],qT(k.outShape,x.shape)}null!=p&&(w=a_(p,"prelu weights","fused depthwiseConv2d"));var I=function(e,t){gb(AI(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(u,"'")}));var n=(0,T.Z)(t,4),i=n[0],o=n[1],s=n[2],l=n[3],f=NA(e,s,h),p=MA(o.shape,f,i,r,a,u,c),d=OA(o,f,i.shape,r,a,u,c);return null!=l?[p,d,CA(x,f)]:[p,d]},N={x:y,filter:g,bias:x,preluActivationWeights:w},C={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:c,activation:h,leakyreluAlpha:d};if(null==l){var E=dC((function(e,t,n){var r=YS.runKernel(Vk,N,C);return n([t,e,r]),b&&(r=DI(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:I}}));return E(y,g)}var A=dC((function(e,t,n,r){var a=YS.runKernel(Vk,N,C);return r([t,e,a,n]),b&&(a=DI(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:I}}));return A(y,g,x)}});var FA=s_({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,s=e.bias,u=e.activation,c=void 0===u?"linear":u,l=e.preluActivationWeights,f=e.leakyreluAlpha,h=void 0===f?.2:f;if(!1===AA(YS.state.gradientDepth,c)){var p=zI(t,n,a,o);return null!=s&&(p=uI(p,s)),EA(p,c,l,h)}var d=a_(t,"a","fused matMul"),m=a_(n,"b","fused matMul"),v=WS(d,m),g=(0,T.Z)(v,2);d=g[0],m=g[1];var y=a?d.shape[d.rank-2]:d.shape[d.rank-1],b=o?m.shape[m.rank-1]:m.shape[m.rank-2],x=a?d.shape[d.rank-1]:d.shape[d.rank-2],w=o?m.shape[m.rank-2]:m.shape[m.rank-1],k=d.shape.slice(0,-2),S=m.shape.slice(0,-2),_=wb(k),I=wb(S);gb(y===b,(function(){return"Error in fused matMul: inner shapes (".concat(y,") and (")+"".concat(b,") of Tensors with shapes ").concat(d.shape," and ")+"".concat(m.shape," and transposeA=").concat(a)+" and transposeB=".concat(o," must match.")}));var N,C,E=qT(d.shape.slice(0,-2),m.shape.slice(0,-2)).concat([x,w]),A=DI(d,a?[_,y,x]:[_,x,y]),R=DI(m,o?[I,w,b]:[I,b,w]);if(null!=s){var O=WS(N=a_(s,"bias","fused matMul"),d);N=(0,T.Z)(O,1)[0],qT(E,N.shape)}null!=l&&(C=a_(l,"prelu weights","fused matMul"));var M=function(e,t){var n,r,i=(0,T.Z)(t,4),u=i[0],l=i[1],f=i[2],h=i[3],p=NA(DI(e,f.shape),f,c);return a||o?!a&&o?(n=zI(p,l,!1,!1),r=zI(p,u,!0,!1)):a&&!o?(n=zI(l,p,!1,!0),r=zI(u,p,!1,!1)):(n=zI(l,p,!0,!0),r=zI(p,u,!0,!0)):(n=zI(p,l,!1,!0),r=zI(u,p,!0,!1)),null!=s?[n,r,CA(h,p)]:[n,r]},D={a:A,b:R,bias:N,preluActivationWeights:C},F={transposeA:a,transposeB:o,activation:c,leakyreluAlpha:h};if(null==s){var P=dC((function(e,t,n){var r=YS.runKernel(Bk,D,F);return n([e,t,r]),{value:DI(r,E),gradFunc:M}}));return P(A,R)}var L=dC((function(e,t,n,r){var a=YS.runKernel(Bk,D,F);return r([e,t,a,n]),{value:DI(a,E),gradFunc:M}}));return L(A,R,N)}});var PA=s_({hammingWindow_:function(e){return SA(e,.54,.46)}});var LA=s_({hannWindow_:function(e){return SA(e,.5,.5)}});var zA=s_({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(VI(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=LI([VI(e,i,t-s),JI([s],a)]);o.push(u),i+=n}return 0===o.length?qE([],[0,t]):DI(LI(o),[o.length,t])}});var BA=s_({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:LA;null==r&&(r=kA(t));var i=zA(e,t,n),o=BI(i,a(t));return BE(o,r)}});var WA=s_({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=a_(e,"image","cropAndResize"),s=a_(t,"boxes","cropAndResize","float32"),u=a_(n,"boxInd","cropAndResize","int32"),c=s.shape[0];gb(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),gb(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(s.shape,".")})),gb(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(s.shape,".")})),gb(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),gb(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),gb("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:o,boxes:s,boxInd:u},f={method:a,extrapolationValue:i,cropSize:r},h=YS.runKernel(Px,l,f);return h}});var VA=s_({flipLeftRight_:function(e){var t=a_(e,"image","flipLeftRight","float32");gb(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return YS.runKernel($x,n,{})}});var jA=s_({grayscaleToRGB_:function(e){var t=a_(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];gb(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),gb(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,$N(t,a)}});var UA=s_({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=a_(e,"image","rotateWithOffset","float32");gb(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r},s=YS.runKernel(zk,i,o);return s}});function HA(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),gb(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),gb(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),gb(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),gb(1===t.rank,(function(){return"scores must be a 1D tensor"})),gb(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),gb(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var ZA=s_({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=a_(e,"boxes","nonMaxSuppression","float32"),o=a_(t,"scores","nonMaxSuppression","float32"),s=HA(i,o,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return YS.runKernel(Dw,{boxes:i,scores:o},u)}});function GA(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,i=0,o=!1;for(;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||qA)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function qA(e,t){return e>t?1:e<t?-1:0}function KA(e,t,n,r,a){return $A(e,t,n,r,a,0)}function XA(e,t,n,r,a,i){return $A(e,t,n,r,a,0,!1,i,!0)}function YA(e,t,n,r,a,i){return $A(e,t,n,r,a,i,!0)}function $A(e,t,n,r,a,i){for(var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=[],l=0;l<t.length;l++)t[l]>a&&c.push({score:t[l],boxIndex:l,suppressBeginIndex:0});c.sort(eR);for(var f=i>0?-.5/i:0,h=[],p=[];h.length<n&&c.length>0;){var d=c.pop(),m=d.score,v=d.boxIndex,g=d.suppressBeginIndex;if(m<a)break;for(var y=!1,b=h.length-1;b>=g;--b){var x=QA(e,v,h[b]);if(x>=r){y=!0;break}if(d.score=d.score*JA(r,f,x),d.score<=a)break}d.suppressBeginIndex=h.length,y||(d.score===m?(h.push(v),p.push(d.score)):d.score>a&&GA(c,d,eR))}var w=h.length,k=n-w;s&&k>0&&(h.push.apply(h,(0,I.Z)(new Array(k).fill(0))),p.push.apply(p,(0,I.Z)(new Array(k).fill(0))));var S={selectedIndices:h};return o&&(S.selectedScores=p),u&&(S.validOutputs=w),S}function QA(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),f=Math.max(a[0],a[2]),h=Math.max(a[1],a[3]),p=(s-i)*(u-o),d=(f-c)*(h-l);if(p<=0||d<=0)return 0;var m=Math.max(i,c),v=Math.max(o,l),g=Math.min(s,f),y=Math.min(u,h),b=Math.max(g-m,0)*Math.max(y-v,0);return b/(p+d-b)}function JA(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function eR(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function tR(){return tR=Tn(Sn().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,p,d=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:.5,i=d.length>4&&void 0!==d[4]?d[4]:Number.NEGATIVE_INFINITY,o=a_(t,"boxes","nonMaxSuppressionAsync"),s=a_(n,"scores","nonMaxSuppressionAsync"),u=HA(o,s,r,a,i),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,e.next=10,Promise.all([o.data(),s.data()]);case 10:return c=e.sent,l=c[0],f=c[1],h=KA(l,f,r,a,i),p=h.selectedIndices,o!==t&&o.dispose(),s!==n&&s.dispose(),e.abrupt("return",GE(p,"int32"));case 17:case"end":return e.stop()}}),e)}))),tR.apply(this,arguments)}var nR=function(e,t,n){return tR.apply(this,arguments)};var rR=s_({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=a_(e,"boxes","nonMaxSuppression"),s=a_(t,"scores","nonMaxSuppression"),u=HA(o,s,n,r,a,i),c={boxes:o,scores:s},l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},f=YS.runKernel(Pw,c,l);return{selectedIndices:f[0],selectedScores:f[1]}}});function aR(){return aR=Tn(Sn().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,p,d,m,v=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>3&&void 0!==v[3]?v[3]:.5,i=v.length>4&&void 0!==v[4]?v[4]:Number.NEGATIVE_INFINITY,o=v.length>5&&void 0!==v[5]?v[5]:0,s=a_(t,"boxes","nonMaxSuppressionAsync"),u=a_(n,"scores","nonMaxSuppressionAsync"),c=HA(s,u,r,a,i,o),r=c.maxOutputSize,a=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma,e.next=12,Promise.all([s.data(),u.data()]);case 12:return l=e.sent,f=l[0],h=l[1],p=YA(f,h,r,a,i,o),d=p.selectedIndices,m=p.selectedScores,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:GE(d,"int32"),selectedScores:GE(m)});case 19:case"end":return e.stop()}}),e)}))),aR.apply(this,arguments)}var iR=function(e,t,n){return aR.apply(this,arguments)};var oR=s_({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=a_(e,"boxes","nonMaxSuppression"),s=a_(t,"scores","nonMaxSuppression"),u=HA(o,s,n,r,a,null),c=u.maxOutputSize,l=u.iouThreshold,f=u.scoreThreshold,h={boxes:o,scores:s},p={maxOutputSize:c,iouThreshold:l,scoreThreshold:f,padToMaxOutputSize:i},d=YS.runKernel(Fw,h,p);return{selectedIndices:d[0],validOutputs:d[1]}}});function sR(){return sR=Tn(Sn().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,p,d,m,v,g,y,b,x=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.length>3&&void 0!==x[3]?x[3]:.5,i=x.length>4&&void 0!==x[4]?x[4]:Number.NEGATIVE_INFINITY,o=x.length>5&&void 0!==x[5]&&x[5],s=a_(t,"boxes","nonMaxSuppressionAsync"),u=a_(n,"scores","nonMaxSuppressionAsync"),c=HA(s,u,r,a,i,null),l=c.maxOutputSize,f=c.iouThreshold,h=c.scoreThreshold,e.next=11,Promise.all([s.data(),u.data()]);case 11:return p=e.sent,d=(0,T.Z)(p,2),m=d[0],v=d[1],g=XA(m,v,l,f,h,o),y=g.selectedIndices,b=g.validOutputs,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:GE(y,"int32"),validOutputs:VN(b,"int32")});case 19:case"end":return e.stop()}}),e)}))),sR.apply(this,arguments)}var uR=function(e,t,n){return sR.apply(this,arguments)},cR=n(3878),lR=n(9199),fR=n(5267);function hR(e){return(0,cR.Z)(e)||(0,lR.Z)(e)||(0,Ro.Z)(e)||(0,fR.Z)()}var pR=s_({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=a_(e,"images","resizeBilinear");gb(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),gb(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),gb(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=DI(a,[1,a.shape[0],a.shape[1],a.shape[2]])),hR(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=YS.runKernel($w,s,u);return o?DI(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var dR=s_({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=a_(e,"images","resizeNearestNeighbor");gb(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),gb(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),gb("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),gb(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=DI(a,[1,a.shape[0],a.shape[1],a.shape[2]])),hR(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=YS.runKernel(Yw,s,u);return o?DI(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});function mR(e,t){for(var n,r,a,i,o,s,u=GE([-1]),c=GE([0]),l=GE([0]),f=0;f<e.size-1;f++){n=VI(e,0,f+1),r=VI(e,f+1),o=kN(HN(n),t),s=kN(HN(r),t);var h=HN(BI(n,fE(0,n.size)));a=kN(h,HN(n));var p=JI(r.shape,n.size),d=uI(fE(0,r.size),p),m=BI(r,d);i=kN(HN(m),HN(r));var v=yC(a,i),g=yC(a,i),y=BI(o,s);l=BI(BI(y,v),g);var b=tC(l,c);c=_N(b,l,c),u=_N(b,GE([f]),u)}return u}var vR=s_({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,u=a_(e,"image","threshold"),c=.2989,l=.587,f=.114,h=u.shape[0]*u.shape[1],p=BI(GE([s]),255);if(gb(3===u.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(u.rank,".")})),gb(3===u.shape[2]||1===u.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(u.shape[2],".")})),gb("int32"===u.dtype||"float32"===u.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(u.dtype,".")})),gb("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===u.shape[2]){var d=zE(u,[1,1,1],-1),m=(0,T.Z)(d,3);t=m[0],n=m[1],r=m[2];var v=BI(t,c),g=BI(n,l),y=BI(r,f);a=uI(uI(v,g),y)}else a=e;if("otsu"===i){var b=XI(bT(wE(a),"int32"),l_([]),256);p=mR(b,h)}var x=o?cC(a,p):tC(a,p),w=bT(BI(x,255),"int32");return w}});var gR=s_({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=a_(e,"image","transform","float32"),s=a_(t,"transforms","transform","float32");gb(4===o.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),gb(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),gb(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")}));var u={image:o,transforms:s},c={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return YS.runKernel(Ak,u,c)}});var yR=s_({bandPart_:function(e,t,n){gb(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),gb(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=a_(e,"a","bandPart");gb(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=r.shape.slice(-2),o=(0,T.Z)(i,2),s=o[0],u=o[1];if(!(t<=s))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(s,")."));if(!(n<=u))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(u,")."));t<0&&(t=s),n<0&&(n=u);var c=DI(fE(0,s,1,"int32"),[-1,1]),l=fE(0,u,1,"int32"),f=yC(c,l),h=wC(cC(f,VN(+t,"int32")),nC(f,VN(-n,"int32"))),p=MC([s,u],r.dtype);return DI(jE(tA(DI(r,[-1,s,u])).map((function(e){return _N(h,e,p)}))),a)}});var bR=s_({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,gb(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){gb(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=zE(e,e.shape[0],0).map((function(e){return VE(e,[0])}))),gb(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(YS.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=BI(HN(BI(n[a],t)),n[a]);t=yC(t,i)}return kN(t,GN(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?jE(n,0):n}});function xR(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return YS.tidy((function(){gb(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=QN(n),i=xT(e),o=qE([[1]],[1,1]),s=xT(o),u=n>=r?r:n,c=function(e){var t=i,u=s,c=a,l=YS.tidy((function(){var t=VI(i,[e,e],[n-e,1]),u=GN(t),c=VI(i,[e,e],[1,1]),l=_N(tC(c,0),qE([[-1]]),qE([[1]])),f=yC(c,BI(l,u)),h=kN(t,f);s=1===h.shape[0]?xT(o):LI([o,VI(h,[1,0],[h.shape[0]-1,h.shape[1]])],0);var p=mC(kN(zI(l,f),u)),d=VI(i,[e,0],[n-e,r]),m=BI(p,s),v=pA(s);if(0===e)i=yC(d,zI(m,zI(v,d)));else{var g=yC(d,zI(m,zI(v,d)));i=LI([VI(i,[0,0],[e,r]),g],0)}var y=pA(m),b=VI(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=yC(b,zI(zI(b,s),y));else{var x=yC(b,zI(zI(b,s),y));a=LI([VI(a,[0,0],[n,e]),x],1)}return[s,i,a]})),f=(0,T.Z)(l,3);s=f[0],i=f[1],a=f[2],fA([t,u,c])},l=0;l<u;++l)c(l);return!t&&n>r&&(a=VI(a,[0,0],[n,r]),i=VI(i,[0,0],[r,r])),[a,i]}))}var wR,kR=s_({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(gb(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return xR(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=tA(DI(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach((function(e){var n=xR(e,t),r=(0,T.Z)(n,2),o=r[0],s=r[1];a.push(o),i.push(s)}));var o=DI(jE(a,0),e.shape),s=DI(jE(i,0),e.shape);return[o,s]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(wR||(wR={}));var SR=s_({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wR.SUM_BY_NONZERO_WEIGHTS,r=a_(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=a_(t,"weights","computeWeightedLoss"));var i=null==a?r:BI(r,a);if(n===wR.NONE)return i;if(n===wR.SUM)return HN(i);if(n===wR.MEAN){if(null==a)return OC(i);var o=r.size/a.size,s=kN(HN(i),HN(a));return o>1?kN(s,VN(o)):s}if(n===wR.SUM_BY_NONZERO_WEIGHTS){if(null==a)return kN(HN(i),VN(r.size));var u=BI(a,DC(r.shape)),c=bT(HN(jC(u,VN(0))),"float32");return kN(HN(i),c)}throw Error("Unknown reduction: ".concat(n))}});var _R=s_({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wR.SUM_BY_NONZERO_WEIGHTS,a=a_(e,"labels","absoluteDifference"),i=a_(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=a_(n,"weights","absoluteDifference")),yb(a.shape,i.shape,"Error in absoluteDifference: ");var s=iI(yC(a,i));return SR(s,o,r)}});var TR=s_({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:wR.SUM_BY_NONZERO_WEIGHTS,i=a_(e,"labels","cosineDistance"),o=a_(t,"predictions","cosineDistance"),s=null;null!=r&&(s=a_(r,"weights","cosineDistance")),yb(i.shape,o.shape,"Error in cosineDistance: ");var u=VN(1),c=yC(u,HN(BI(i,o),n,!0));return SR(c,s,a)}});var IR=s_({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wR.SUM_BY_NONZERO_WEIGHTS,a=a_(e,"labels","hingeLoss"),i=a_(t,"predictions","hingeLoss"),o=null;null!=n&&(o=a_(n,"weights","hingeLoss")),yb(a.shape,i.shape,"Error in hingeLoss: ");var s=VN(1);a=yC(BI(VN(2),a),s);var u=dE(yC(s,BI(a,i)));return SR(u,o,r)}});var NR=s_({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:wR.SUM_BY_NONZERO_WEIGHTS,i=a_(e,"labels","huberLoss"),o=a_(t,"predictions","huberLoss"),s=null;null!=n&&(s=a_(n,"weights","huberLoss")),yb(i.shape,o.shape,"Error in huberLoss: ");var u=VN(r),c=iI(yC(o,i)),l=PC(c,u),f=yC(c,l),h=uI(BI(VN(.5),UN(l)),BI(u,f));return SR(h,s,a)}});var CR=s_({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:wR.SUM_BY_NONZERO_WEIGHTS,i=a_(e,"labels","logLoss"),o=a_(t,"predictions","logLoss"),s=null;null!=n&&(s=a_(n,"weights","logLoss")),yb(i.shape,o.shape,"Error in logLoss: ");var u=VN(1),c=VN(r),l=mC(BI(i,hC(uI(o,c)))),f=BI(yC(u,i),hC(uI(yC(u,o),c))),h=yC(l,f);return SR(h,s,a)}});var ER=s_({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wR.SUM_BY_NONZERO_WEIGHTS,a=a_(e,"labels","meanSquaredError"),i=a_(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=a_(n,"weights","meanSquaredError")),yb(a.shape,i.shape,"Error in meanSquaredError: ");var s=WE(a,i);return SR(s,o,r)}});function AR(e,t){var n=a_(e,"labels","sigmoidCrossEntropyWithLogits"),r=a_(t,"logits","sigmoidCrossEntropyWithLogits");yb(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=dE(r),i=BI(r,n),o=pC(KN(mC(iI(r))));return uI(yC(a,i),o)}var RR=s_({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:wR.SUM_BY_NONZERO_WEIGHTS,i=a_(e,"multiClassLabels","sigmoidCrossEntropy"),o=a_(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=a_(n,"weights","sigmoidCrossEntropy")),yb(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=VN(r),c=VN(1),l=VN(.5);i=uI(BI(i,yC(c,u)),BI(l,u))}var f=AR(i,o);return SR(f,s,a)}});function OR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=dC((function(e,t,r){var a=xC(t,[n],!0),i=yC(bT(t,"float32"),a);r([e,i]);var o=mC(BI(i,e));return{value:HN(o,[n]),gradFunc:function(e,t){var r=(0,T.Z)(t,2),a=r[0],i=r[1],o=MN(e.shape,[n]);return[BI(DI(e,o),yC(bT(a,"float32"),KN(i))),BI(DI(e,o),yC(KN(i),bT(a,"float32")))]}}}));return r(e,t)}var MR=s_({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:wR.SUM_BY_NONZERO_WEIGHTS,i=a_(e,"onehotLabels","softmaxCrossEntropy"),o=a_(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=a_(n,"weights","softmaxCrossEntropy")),yb(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=VN(r),c=VN(1),l=VN(i.shape[1]);i=uI(BI(i,yC(c,u)),kN(u,l))}var f=OR(i,o);return SR(f,s,a)}});var DR=s_({sparseFillEmptyRows_:function(e,t,n,r){var a=a_(e,"indices","sparseFillEmptyRows","int32"),i=a_(t,"values","sparseFillEmptyRows"),o=a_(n,"denseShape","sparseFillEmptyRows","int32"),s=a_(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:i,denseShape:o,defaultValue:s},c=YS.runKernel(vk,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});var FR=s_({sparseReshape_:function(e,t,n){var r=a_(e,"inputIndices","sparseReshape","int32"),a=a_(t,"inputShape","sparseReshape","int32"),i=a_(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},s=YS.runKernel(gk,o);return{outputIndices:s[0],outputShape:s[1]}}});var PR=s_({sparseSegmentMean_:function(e,t,n){var r=a_(e,"data","sparseSegmentMean"),a=a_(t,"indices","sparseSegmentMean","int32"),i=a_(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return YS.runKernel(yk,o)}});var LR=s_({sparseSegmentSum_:function(e,t,n){var r=a_(e,"data","sparseSegmentSum"),a=a_(t,"indices","sparseSegmentSum","int32"),i=a_(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return YS.runKernel(bk,o)}});var zR=s_({stringNGrams_:function(e,t,n,r,a,i,o,s){var u=a_(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var c=a_(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");var l={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},f={data:u,dataSplits:c},h=YS.runKernel(Sk,f,l);return{nGrams:h[0],nGramsSplits:h[1]}}});var BR=s_({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=a_(e,"input","stringSplit","string"),a=a_(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},s=YS.runKernel(_k,o,i);return{indices:s[0],values:s[1],shape:s[2]}}});var WR,VR=s_({stringToHashBucketFast_:function(e,t){var n=a_(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return YS.runKernel(Tk,a,r)}}),jR={fft:FE,ifft:PE,rfft:BE,irfft:LE},UR={hammingWindow:PA,hannWindow:LA,frame:zA,stft:BA},HR={flipLeftRight:VA,grayscaleToRGB:jA,resizeNearestNeighbor:dR,resizeBilinear:pR,rotateWithOffset:UA,cropAndResize:WA,nonMaxSuppression:ZA,nonMaxSuppressionAsync:nR,nonMaxSuppressionWithScore:rR,nonMaxSuppressionWithScoreAsync:iR,nonMaxSuppressionPadded:oR,nonMaxSuppressionPaddedAsync:uR,threshold:vR,transform:gR},ZR={bandPart:yR,gramSchmidt:bR,qr:kR},GR={absoluteDifference:_R,computeWeightedLoss:SR,cosineDistance:TR,hingeLoss:IR,huberLoss:NR,logLoss:CR,meanSquaredError:ER,sigmoidCrossEntropy:RR,softmaxCrossEntropy:MR},qR={sparseFillEmptyRows:DR,sparseReshape:FR,sparseSegmentMean:PR,sparseSegmentSum:LR},KR={stringNGrams:zR,stringSplit:BR,stringToHashBucketFast:VR},XR="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(e){return e()};function YR(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(WR||(WR={}));function $R(e){return e<=30?e:Lb(e,Math.floor(Math.sqrt(e)))}function QR(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function JR(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2===1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function eO(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function tO(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}var nO="->",rO=/->/g;function aO(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],i=0;i<e;++i)-1===n[i]&&a.push(i);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function iO(e){return e.every((function(e,t){return e===t}))}function oO(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function sO(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function uO(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function cO(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function lO(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function fO(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function hO(e){try{return e.map((function(e){return gS(e)}))}catch(cBe){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(cBe))}}var pO,dO,mO,vO={},gO={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function yO(e,t){if(!(e in vO)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete vO[e]}),!1),$b().getBool("SOFTWARE_WEBGL_ENABLED")&&(gO.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",gO)||n.getContext("experimental-webgl",gO);return n.getContext("webgl2",gO)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;vO[e]=n}var r=vO[e];return null==r||r.isContextLost()?(delete vO[e],yO(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),vO[e])}function bO(e,t){return[t,e]}function xO(e){var t=wb(e);return _b(Math.ceil(t/4))}function wO(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function kO(e,t){var n,r,a,i,o,s,u,c,l,f,h=e;return 2===$b().getNumber("WEBGL_VERSION")?(n=h.R32F,r=h.R16F,a=h.RGBA16F,i=h.RGBA32F,o=h.RED,u=4,c=1,l=h.HALF_FLOAT,f=h.FLOAT,s=h.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=h.RGBA,o=e.RGBA,u=4,c=4,l=null!=t?t.HALF_FLOAT_OES:null,f=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:f}}function SO(e,t){var n=t();return $b().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(pO||(pO={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(dO||(dO={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(mO||(mO={}));function _O(e){return!!($b().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function TO(e,t){return zO(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}var IO,NO,CO=/ERROR: [0-9]+:([0-9]+):/g;function EO(e,t){var n=CO.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return Tb((t+1).toString(),i)+e})),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var c=o.slice(0,r-1),l=o.slice(r-1,r),f=o.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(Tb(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}function AO(e,t){if(SO(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function RO(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(SO(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),SO(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),SO(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function OO(e,t,n){return zO(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function MO(e,t,n){return e.getUniformLocation(t,n)}function DO(e,t,n,r){SO(e,(function(){return function(e,t,n){BO(e,n),SO(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),SO(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),SO(e,(function(){return e.uniform1i(n,r)}))}function FO(e,t,n){SO(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),SO(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function PO(e,t){SO(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),SO(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function LO(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function zO(e,t,n){var r=SO(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function BO(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function WO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return wb(e.slice(0,e.length-t))}function VO(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function jO(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[WO(e)].concat((0,I.Z)(VO(e)))),t}function UO(e){return e%2===0}function HO(e,t){if(kb(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(UO(n)&&UO(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&UO(e[0])&&UO(t[0])}function ZO(e,t){return null!=e.getExtension(t)}function GO(e){try{if(null!=yO(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function qO(e){if(0===e)return!1;var t=yO(e);if(1!==e){if(ZO(t,"EXT_color_buffer_float"))return KO(t);var n="EXT_color_buffer_half_float";if(ZO(t,n)){var r=t.getExtension(n);return function(e,t){var n=kO(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,r)}return!1}return!!ZO(t,"OES_texture_float")&&(!!ZO(t,"WEBGL_color_buffer_float")&&KO(t))}function KO(e){var t=kO(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function XO(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&gb("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var YO=$b();function $O(){var e,t,n,r,a,i,o,s,u,c;return 2===$b().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s=$b().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function QO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=zb(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function JO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=zb(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function eM(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}function tM(e){var t=zb(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}YO.registerFlag("HAS_WEBGL",(function(){return YO.getNumber("WEBGL_VERSION")>0})),YO.registerFlag("WEBGL_VERSION",(function(){return GO(2)?2:GO(1)?1:0})),YO.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),YO.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===YO.get("WEBGL_VERSION")})),YO.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),YO.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),YO.registerFlag("WEBGL_PACK",(function(){return YO.getBool("HAS_WEBGL")})),YO.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return YO.getBool("WEBGL_PACK")})),YO.registerFlag("WEBGL_PACK_CLIP",(function(){return YO.getBool("WEBGL_PACK")})),YO.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return YO.getBool("WEBGL_PACK")})),YO.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return YO.getBool("WEBGL_PACK")})),YO.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return YO.getBool("WEBGL_PACK")})),YO.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return YO.getBool("WEBGL_PACK")})),YO.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return YO.getBool("WEBGL_PACK")})),YO.registerFlag("WEBGL_PACK_REDUCE",(function(){return YO.getBool("WEBGL_PACK")})),YO.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return YO.getBool("WEBGL_PACK")})),YO.registerFlag("WEBGL_CONV_IM2COL",(function(){return YO.getBool("WEBGL_PACK")})),YO.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==IO){var t=yO(e);IO=t.getParameter(t.MAX_TEXTURE_SIZE)}return IO}(YO.getNumber("WEBGL_VERSION"))})),YO.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==NO){var t=yO(e);NO=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,NO)}(YO.getNumber("WEBGL_VERSION"))})),YO.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=YO.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=yO(e);return ZO(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:ZO(t,"EXT_disjoint_timer_query")?1:0}(e)})),YO.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return YO.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!QS()})),YO.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=yO(e);if(1===e){if(!ZO(t,"OES_texture_float"))return!1}else if(!ZO(t,"EXT_color_buffer_float"))return!1;return KO(t)}(YO.getNumber("WEBGL_VERSION"))})),YO.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!YO.getBool("WEBGL_FORCE_F16_TEXTURES")&&YO.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),YO.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return qO(YO.getNumber("WEBGL_VERSION"))})),YO.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=YO.getNumber("WEBGL_VERSION"))&&null!=yO(e).fenceSync;var e})),YO.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return YO.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),YO.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),YO.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return QS()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),YO.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),YO.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),YO.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),YO.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128})),YO.registerFlag("WEBGL_EXP_CONV",(function(){return!1})),YO.registerFlag("SOFTWARE_WEBGL_ENABLED",(function(){return YO.getBool("IS_TEST")})),YO.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(function(){return 1/0})),YO.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(function(){return!1})),YO.registerFlag("WEBGL2_ISNAN_CUSTOM",(function(){return!1}));var nM="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",rM=GT;function aM(e,t,n){var r=[];if(e.forEach((function(e){var t=wb(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(SM(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,i,o=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?oM(e,r):iM(e,r);var i=e.shapeInfo.logicalShape,o=t.logicalShape;i.length<=o.length&&(a+=n?xM(e,t):wM(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,c=$O(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(c),f=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(sM,"\n    ").concat(uM,"\n    ").concat(cM,"\n  ")}(c);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(kb(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),o=i,s="",u="b, r, c",c=2;c<e.length-1;c++)o*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(o,";\n      index -= b").concat(c," * ").concat(o,";\n    ")+s,u="b".concat(c,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(c)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(kb(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=JO(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=QO(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=JO(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=QO(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=QO(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=QO(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(c)),n.packedInputs&&(f+=lM),[f,l,i,o,a,s,n.userCode].join("\n")}function iM(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return hM(e,t);case 1:return pM(e,t);case 2:return dM(e,t);case 3:return mM(e,t);case 4:return vM(e,t);case 5:return gM(e);case 6:return yM(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function oM(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=$O();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=$O();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");var o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],u=$O();if(null!=i&&kb(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],l=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(l,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var s=[1,2],u=_M(e,n.slice(1)),c=["b","row","col"];return"\n        ".concat(oM(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(TM(c,s),");\n        }\n      ")}var l=$O();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");var f=o[0],h=o[1],p=Math.ceil(n[2]/2),d=p*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(f,", ").concat(h,", ").concat(d,", ").concat(p,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=$O();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var i=e.shapeInfo.logicalShape,o=i.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=u[0],l=u[1],f=Math.ceil(i[o-1]/2),h=f*Math.ceil(i[o-2]/2),p="int b, int row, int col",d="b * ".concat(h," + (row / 2) * ").concat(f," + (col / 2)"),m=2;m<o-1;m++)p="int b".concat(m,", ")+p,h*=i[o-m-1],d="b".concat(m," * ").concat(h," + ")+d;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(d,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var sM="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",uM="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",cM="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",lM="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function fM(e){return"offset".concat(e)}function hM(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=(0,T.Z)(e.shapeInfo.texShape,2),i=a[0],o=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=fM(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var u=(0,T.Z)(e.shapeInfo.texShape,2),c=u[0],l=u[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(c,", ").concat(l,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function pM(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(bM(e),"\n      }\n    ");var a=e.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=fM(n);return 1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function dM(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&kb(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var o=i[0],s=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=Cb(n),c=u.newShape,l=u.keptDims,f=c;if(f.length<n.length){var h=_M(e,f);return"\n      ".concat(iM(h,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(TM(["row","col"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(bM(e),"\n      }\n    ");var p=i[0],d=i[1],m=fM(r);return 1===d?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===p?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(d,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(m,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(m,";\n    vec2 uv = uvFromFlat(").concat(p,", ").concat(d,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function mM(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],s=Cb(n),u=s.newShape,c=s.keptDims,l=u;if(l.length<n.length){var f=_M(e,l);return"\n        ".concat(iM(f,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(TM(["row","col","depth"],c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(bM(e),"\n      }\n    ");var h=e.shapeInfo.texShape,p=h[0],d=h[1],m=e.shapeInfo.flatOffset;if(d===i&&null==m)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(d,".0, ").concat(p,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(d===o&&null==m)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(d,".0, ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var v=fM(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(v,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(p,", ").concat(d,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function vM(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,u=Cb(n),c=u.newShape,l=u.keptDims;if(c.length<n.length){var f=_M(e,c);return"\n      ".concat(iM(f,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(TM(["row","col","depth","depth2"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(bM(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,d=p[0],m=p[1],v="int stride2 = ".concat(r,"Shape[3];"),g="int stride1 = ".concat(r,"Shape[2] * stride2;"),y="int stride0 = ".concat(r,"Shape[1] * stride1;");if(m===s&&null==h)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(v,"\n        ").concat(g,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(d,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(m===i&&null==h)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(d,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var b=fM(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(v,"\n      ").concat(g,"\n      ").concat(y,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(d,", ").concat(m,", index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function gM(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,u=Cb(t),c=u.newShape,l=u.keptDims;if(c.length<t.length){var f=_M(e,c);return"\n      ".concat(iM(f),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(TM(["row","col","depth","depth2","depth3"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(o,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(bM(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,d=p[0],m=p[1];if(m===s&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(d,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===a&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(d,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var v=fM(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(v,";\n      vec2 uv = uvFromFlat(").concat(d,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function yM(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Cb(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var s=_M(e,i);return"\n      ".concat(iM(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(TM(["row","col","depth","depth2","depth3","depth4"],o),");\n      }\n    ")}var u=t[5],c=t[4]*u,l=t[3]*c,f=t[2]*l,h=t[1]*f;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(h,", ").concat(f,", ").concat(l,", ").concat(c,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(u,", 1)));\n        ").concat(bM(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,m=d[0],v=d[1];if(v===h&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(f,", ").concat(l,", ").concat(c,", ").concat(u,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===u&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=fM(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(h," + col * ").concat(f," + depth * ").concat(l," +\n          depth2 * ").concat(c," + depth3 * ").concat(u," + depth4 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function bM(e){var t=e.name,n=wb(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function xM(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=rM(e.shapeInfo.logicalShape,t.logicalShape),c=kM(s),l=s-o,f=["x","y","z","w","u","v"];n=0===o?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(f[e+l]," = 0;")})).join("\n");var h="";h=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+l])})).join(", ");var p="return outputValue;",d=1===wb(e.shapeInfo.logicalShape),m=1===wb(t.logicalShape);if(1!==o||d||m){if(d&&!m)p=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var v=o-2,g=o-1;u.indexOf(v)>-1&&u.indexOf(g)>-1?p="return vec4(outputValue.x);":u.indexOf(v)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(h,");\n      ").concat(p,"\n    }\n  ")}function wM(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&kb(o,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var c,l=kM(u),f=rM(e.shapeInfo.logicalShape,t.logicalShape),h=u-s,p=["x","y","z","w","u","v"];c=0===s?"":u<2&&f.length>=1?"coords = 0;":f.map((function(e){return"coords.".concat(p[e+h]," = 0;")})).join("\n");var d="";return d=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(p[t+h])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(r,"(").concat(d,");\n    }\n  ")}function kM(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function SM(e,t,n){var r=Cb(t),a=r.newShape,i=r.keptDims,o=t.length,s=e&&3===o&&1===t[0],u=s?t.slice(1):a,c=!e&&o>1&&!kb(t,n)&&a.length<o||s;return{useSqueezeShape:c,uniformShape:c?u:t,keptDims:i}}function _M(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function TM(e,t){return t.map((function(t){return e[t]})).join(", ")}function IM(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=aM(a,o,t),u=function(e,t){var n=zO(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(SO(e,(function(){return e.shaderSource(n,t)})),SO(e,(function(){return e.compileShader(n)})),$b().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw EO(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),c=e.createProgram(u);return $b().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o},NM(e,t,c))}function NM(e,t,n){var r,a,i,o,s={},u={},c={},l=[],f=null;o=e.getUniformLocation(n,"NAN",!1),1===$b().getNumber("WEBGL_VERSION")&&(f=e.getUniformLocation(n,"INFINITY",!1));for(var h=!1,p=0;p<t.variableNames.length;p++){var d=t.variableNames[p];s[d]=e.getUniformLocation(n,d,h),s["offset".concat(d)]=e.getUniformLocation(n,"offset".concat(d),h),t.enableShapeUniforms&&(u["".concat(d,"Shape")]=e.getUniformLocation(n,"".concat(d,"Shape"),h),c["".concat(d,"TexShape")]=e.getUniformLocation(n,"".concat(d,"TexShape"),h))}return t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",h),i=e.getUniformLocation(n,"outShapeStrides",h),a=e.getUniformLocation(n,"outTexShape",h)),t.customUniforms&&t.customUniforms.forEach((function(t,r){l[r]=e.getUniformLocation(n,t.name,h)})),{uniformLocations:s,customUniformLocations:l,infLoc:f,nanLoc:o,inShapesLocations:u,inTexShapesLocations:c,outShapeLocation:r,outShapeStridesLocation:i,outTexShapeLocation:a}}function CM(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!kb(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!kb(o,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(o," and ").concat(s," must match"))}}))}function EM(e,t,n,r,a){t.program.enableShapeUniforms||(CM(t.inShapeInfos,n),CM([t.outShapeInfo],[r]));var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),1===$b().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],i=t.uniformLocations[a],o=t.uniformLocations["offset".concat(a)],s=t.inShapesLocations["".concat(a,"Shape")],u=t.inTexShapesLocations["".concat(a,"TexShape")];if(s){var c=SM(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(c.length){case 1:e.gl.uniform1iv(s,new Int32Array(c));break;case 2:e.gl.uniform2iv(s,new Int32Array(c));break;case 3:e.gl.uniform3iv(s,new Int32Array(c));break;case 4:e.gl.uniform4iv(s,new Int32Array(c))}}if(u&&e.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=i)if(n.isUniform)if(wb(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var l=n.uniformValues;l instanceof Float32Array||(l=new Float32Array(l)),e.gl.uniform1fv(i,l)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,i,r)}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var u=zb(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var i=t.customUniformLocations[r],o=a[r];if("float"===n.type)e.gl.uniform1fv(i,o);else if("vec2"===n.type)e.gl.uniform2fv(i,o);else if("vec3"===n.type)e.gl.uniform3fv(i,o);else if("vec4"===n.type)e.gl.uniform4fv(i,o);else if("int"===n.type)e.gl.uniform1iv(i,o);else if("ivec2"===n.type)e.gl.uniform2iv(i,o);else if("ivec3"===n.type)e.gl.uniform3iv(i,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(i,o)}})),e.executeProgram()}function AM(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var i=t.texData.texShape,o=SM(e.packedInputs,t.shape,i),s=o.useSqueezeShape,u=o.uniformShape,c=o.keptDims,l="",f="",h="";if(1===u.length&&e.packedInputs){var p=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];l="".concat(p[0]>1,"_").concat(p[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var d=zb(u);h="".concat(d[0]===i[1],"_").concat(d[d.length-1]===i[1])}}else f="".concat(u[0]>1,"_").concat(u[1]>1);var m=t.shape.length,v=2===u.length&&kb(t.shape,i),g=1===wb(t.shape),y=GT(t.shape,n.shape),b=!e.packedInputs&&m===n.shape.length&&kb(i,n.texData.texShape),x=e.packedInputs||u.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(m,"_").concat(b,"_").concat(s?c:"","_").concat(u.length,"_").concat(g,"_").concat(y,"_").concat(v,"_").concat(l,"_").concat(f,"_").concat(h,"_").concat(x,"_").concat(a)}else{var w=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(w,"_").concat(a)}}));var a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a+"".concat($b().getNumber("WEBGL_VERSION"))}function RM(e){return $b().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var OM=(0,C.Z)((function e(t){N(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=pO.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=$O();this.outputShape=t,this.enableShapeUniforms=RM(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?JO(["r","c","d"],t):QO(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),MM=(0,C.Z)((function e(t){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=pO.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=$O();this.outputShape=t,this.enableShapeUniforms=RM(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?JO(["r","c","d"],t):QO(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),DM=(0,C.Z)((function e(t){N(this,e),this.variableNames=["A"],this.outTexUsage=dO.DOWNLOAD;var n=$O();this.outputShape=t,this.userCode="\n      ".concat(nM,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),FM=(0,C.Z)((function e(t){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=dO.DOWNLOAD;var n=$O();this.outputShape=t,this.userCode="\n      ".concat(nM,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),PM=(0,C.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];N(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=$O();this.outputShape=t,this.enableShapeUniforms=RM(this.outputShape.length);var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":tM(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ").concat(r.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")})),LM=(0,C.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];N(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=$O();this.outputShape=t,this.enableShapeUniforms=RM(this.outputShape.length);var a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var s=0;s<=1;s++){var u=2*o+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":tM(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(i,";\n        }\n    ")}));function zM(e){var t=$O();return function(e,t){var n=zO(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(SO(e,(function(){return e.shaderSource(n,t)})),SO(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function BM(e){return function(e,t){var n=zO(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return SO(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),SO(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function WM(e){return function(e,t){var n=zO(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return SO(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),SO(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function VM(e,t,n,r,a,i){!function(e,t){var n=$b().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+i+".")}}(t,n);var o=function(e){return zO(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return SO(e,(function(){return e.bindTexture(s,o)})),SO(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),SO(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),SO(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),SO(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===$b().getNumber("WEBGL_VERSION")?SO(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})):SO(e,(function(){return e.texStorage2D(s,1,r,t,n)})),SO(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:o,texShape:[n,t]}}function jM(e){return e.internalFormatFloat}function UM(e){return e.internalFormatHalfFloat}function HM(e){return e.downloadTextureFormat}function ZM(e){return e.internalFormatPackedFloat}function GM(e){return e.internalFormatPackedHalfFloat}function qM(e,t,n,r,a,i,o,s){var u=e,c=new Float32Array(function(e,t){var n=wO(e,t),r=(0,T.Z)(n,2);return r[0]*r[1]*4}(i,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}var KM=function(){function e(t){N(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=$b().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){vO[e]=t}(n,t)):this.gl=yO(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===$b().getNumber("WEBGL_VERSION")){var i="OES_texture_half_float";if(this.textureFloatExtension=TO(this.gl,"OES_texture_float"),ZO(this.gl,i))this.textureHalfFloatExtension=TO(this.gl,i);else if($b().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),ZO(this.gl,a))this.colorBufferHalfFloatExtension=TO(this.gl,a);else if($b().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",ZO(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!ZO(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=BM(this.gl),this.indexBuffer=WM(this.gl),this.framebuffer=function(e){return zO(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=kO(this.gl,this.textureHalfFloatExtension)}return(0,C.Z)(e,[{key:"debug",get:function(){return $b().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;SO(t,(function(){return t.finish()})),SO(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),SO(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),SO(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),SO(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),SO(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=bO(t,n),i=(0,T.Z)(a,2);return VM(e,i[0],i[1],jM(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=bO(t,n),i=(0,T.Z)(a,2);return VM(e,i[0],i[1],UM(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=bO(t,n),i=(0,T.Z)(a,2);return VM(e,i[0],i[1],HM(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){SO(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===$b().getNumber("WEBGL_VERSION")?SO(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):SO(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===$b().getNumber("WEBGL_VERSION")?SO(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):SO(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),SO(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i){var o,s,u;SO(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,u=i.internalFormatPackedFloat),o.set(a),2===$b().getNumber("WEBGL_VERSION")?SO(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,o)})):SO(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,o)})),SO(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=wO(t,n),i=(0,T.Z)(a,2);return VM(e,i[0],i[1],GM(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=wO(t,n),i=(0,T.Z)(a,2);return VM(e,i[0],i[1],ZM(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(PO(this.gl,this.framebuffer),this.outputTexture=null),SO(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=bO(t,n),i=(0,T.Z)(a,2),o=i[0],s=i[1],u=new Uint8Array(t*n*4);return SO(e,(function(){return e.readPixels(0,0,o,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return qM(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();SO(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return SO(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),SO(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),SO(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if($b().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else $b().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,$b().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return SO(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=zM(n));var r=function(e){return zO(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return SO(n,(function(){return n.attachShader(r,t.vertexShader)})),SO(n,(function(){return n.attachShader(r,e)})),function(e,t){if(SO(e,(function(){return e.linkProgram(t)})),!$b().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,r),this.debug&&AO(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=function(e,t,n){return SO(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),RO(e,t,"clipSpacePos",n,3,20,0)&&RO(e,t,"uv",n,2,20,12)}(n,this.program,this.vertexBuffer)),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&SO(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&AO(this.gl,this.program),SO(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?OO(this.gl,e,t):MO(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),SO(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),DO(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=wO(t,n),a=(0,T.Z)(r,2),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(e,i,o)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&AO(this.gl,this.program),LO(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),SO(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),SO(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=TO(this.gl,2===$b().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===$b().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==$b().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=Tn(Sn().mark((function e(t){var n=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ib((function(){return n.disposed||n.isQueryAvailable(t,$b().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,$b().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),!(this.itemsToPoll.length>1)){var r=void 0;"setTimeoutCustom"in $b().platform&&(r=$b().platform.setTimeoutCustom.bind($b().platform)),Ib((function(){return n.pollItems(),0===n.itemsToPoll.length}),(function(){return 0}),null,r)}}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),FO(this.gl,e,this.framebuffer),this.debug&&LO(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(FO(this.gl,this.outputTexture,this.framebuffer),this.debug&&LO(this.gl)):PO(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;FO(r,e,this.framebuffer),this.debug&&LO(r),this.outputTexture=e,SO(r,(function(){return r.viewport(0,0,t,n)})),SO(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),SO(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();function XM(e){return function(t,n,r,a,i){var o=qT(t,n),s=o.length,u=zb(o),c=Eb(i,wb(o)),l=t.length,f=n.length,h=zb(t),p=zb(n),d=GT(t,o),m=GT(n,o);if(d.length+m.length===0)for(var v=0;v<c.length;++v)c[v]=e(r[v%r.length],a[v%a.length]);else for(var g=function(t){var n=Zb(t,s,u),i=n.slice(-l);d.forEach((function(e){return i[e]=0}));var o=Hb(i,l,h),v=n.slice(-f);m.forEach((function(e){return v[e]=0}));var g=Hb(v,f,p);c[t]=e(r[o],a[g])},y=0;y<c.length;++y)g(y);return[c,o]}}function YM(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&gb("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}function $M(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}function QM(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=QM(e,t,"float32"),a=QM(e,t,"float32");return $M({inputs:{real:r,imag:a},backend:e})}var i=jb(wb(t),n);return e.makeTensorInfo(t,n,i)}function JM(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function eD(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}function tD(e,t,n,r){if("int32"===r)return[t,"int32",Int32Array.from(e)];if("bool"===r){var a=dS([0],n),i=XM((function(e,t){return e!==t?1:0}))(t,[],e,a,"bool"),o=(0,T.Z)(i,2),s=o[0];return[o[1],"bool",s]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function nD(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if("complex64"===i){if("complex64"===a.dtype)return JM({inputs:{x:a},backend:n});var o=QM(n,a.shape,a.dtype),s=nD({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=$M({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}if("complex64"===a.dtype){var c=eD({inputs:{input:a},backend:n}),l=nD({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),l}if(!Rb(a.dtype,i)){var f=JM({inputs:{x:a},backend:n});return{dataId:f.dataId,shape:f.shape,dtype:i}}var h=tD(n.data.get(a.dataId).values,a.shape,a.dtype,i),p=(0,T.Z)(h,3),d=p[0],m=p[1],v=p[2];return n.makeTensorInfo(d,m,v)}function rD(e,t,n,r){return null==n?function(n){var a=n.inputs,i=n.backend,o=a.a,s=a.b,u=i;YM([o,s],e);var c=u.data.get(o.dataId).values,l=u.data.get(s.dataId).values,f="string"===o.dtype?hO(c):c,h="string"===o.dtype?hO(l):l,p=r||o.dtype,d=t(o.shape,s.shape,f,h,p),m=(0,T.Z)(d,2),v=m[0],g=m[1];return u.makeTensorInfo(g,p,v)}:function(e){var a=e.inputs,i=e.backend,o=a.a,s=a.b,u=i;if("complex64"===o.dtype||"complex64"===s.dtype){var c=nD({inputs:{x:o},backend:u,attrs:{dtype:"complex64"}}),l=u.data.get(c.dataId),f=l.complexTensorInfos.real,h=l.complexTensorInfos.imag,p=u.data.get(f.dataId).values,d=u.data.get(h.dataId).values,m=nD({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),v=u.data.get(m.dataId),g=v.complexTensorInfos.real,y=v.complexTensorInfos.imag,b=u.data.get(g.dataId).values,x=u.data.get(y.dataId).values,w=n(o.shape,s.shape,p,d,b,x),k=(0,T.Z)(w,3),S=k[0],_=k[1],I=k[2],N=u.makeTensorInfo(I,"float32",S),C=u.makeTensorInfo(I,"float32",_),E=$M({inputs:{real:N,imag:C},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(m),u.disposeIntermediateTensorInfo(N),u.disposeIntermediateTensorInfo(C),E}var A=u.data.get(o.dataId).values,R=u.data.get(s.dataId).values,O=r||o.dtype,M=t(o.shape,s.shape,A,R,O),D=(0,T.Z)(M,2),F=D[0],P=D[1];return u.makeTensorInfo(P,O,F)}}function aD(e){return function(t,n,r,a,i,o){var s=qT(t,n),u=wb(s),c=s.length,l=zb(s),f=Eb("float32",u),h=Eb("float32",u),p=GT(t,s),d=GT(n,s),m=tO(r,a),v=tO(i,o),g=t.length,y=zb(t),b=n.length,x=zb(n);if(p.length+d.length===0)for(var w=0;w<f.length;w++){var k=w%m.length,S=w%v.length,_=e(m[2*k],m[2*k+1],v[2*S],v[2*S+1]);f[w]=_.real,h[w]=_.imag}else for(var T=function(t){var n=Zb(t,c,l),r=n.slice(-g);p.forEach((function(e){return r[e]=0}));var a=Hb(r,g,y),i=n.slice(-b);d.forEach((function(e){return i[e]=0}));var o=Hb(i,b,x),s=e(m[2*a],m[2*a+1],v[2*o],v[2*o+1]);f[t]=s.real,h[t]=s.imag},I=0;I<f.length;I++)T(I);return[f,h,s]}}var iD=XM((function(e,t){return e+t})),oD=aD((function(e,t,n,r){return{real:e+n,imag:t+r}}));rD(ix,iD,oD);function sD(e){return function(t,n,r){for(var a=Eb(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}function uD(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(YM(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=o,c=u.data.get(s.dataId).values,l=wb(s.shape),f=n||s.dtype,h=Ab(f,l),p=0;p<l;++p)h[p]=t(c[p],i);return u.makeTensorInfo(s.shape,f,h)}}function cD(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(YM(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=o,c=u.data.get(s.dataId).values,l=n||s.dtype,f=t(c,l,i);return u.makeTensorInfo(s.shape,l,f)}}var lD=sD((function(e){return Math.ceil(e)}));cD(Sx,lD);var fD=XM((function(e,t){return e===t?1:0})),hD=(rD(Gx,fD,null,"bool"),sD((function(e){return Math.exp(e)}))),pD=(cD(qx,hD,"float32"),sD((function(e){return Math.expm1(e)}))),dD=(cD(Xx,pD),sD((function(e){return Math.floor(e)})));cD(Qx,dD);var mD=XM((function(e,t){return e>t?1:0})),vD=(rD(rw,mD,null,"bool"),XM((function(e,t){return e>=t?1:0}))),gD=(rD(aw,vD,null,"bool"),XM((function(e,t){return e<t?1:0}))),yD=(rD(hw,gD,null,"bool"),XM((function(e,t){return e<=t?1:0})));rD(pw,yD,null,"bool");var bD=sD((function(e){return Math.log(e)}));cD(mw,bD);var xD=XM((function(e,t){return Math.max(e,t)})),wD=(rD(kw,xD),XM((function(e,t){return Math.min(e,t)}))),kD=(rD(Cw,wD),XM((function(e,t){return e*t}))),SD=aD((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}}));rD(Rw,kD,SD);function _D(e,t,n){var r=pS(-1,n);return kD([],t,r,e,n)}var TD=XM((function(e,t){return e!==t?1:0}));rD(Mw,TD,null,"bool");function ID(e,t,n,r,a){for(var i=t.length,o=wb(t),s=zb(t),u=zb(a),c=Eb(n,wb(a)),l=0;l<o;++l){for(var f=Zb(l,i,s),h=new Array(f.length),p=0;p<h.length;p++)h[p]=f[r[p]];c[Hb(h,i,u)]=e[l]}return c}function ND(e,t,n,r){for(var a=ON(e,r),i=(0,T.Z)(a,2),o=i[0],s=i[1],u=zS(t,"int32"),c=jb(wb(o),u),l=wb(s),f=0;f<c.length;++f){for(var h=f*l,p=1,d=0;d<l;++d)p*=n[h+d];c[f]=p}return{outVals:c,outShape:o,outDtype:u}}function CD(e,t,n,r){var a=[],i=0,o=t.length-1+n.length,s=new Array(o).fill(null).map((function(){return[0]}));!function(e,t){for(var n=0;n<e.length;++n){var r=e[n],a=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(var i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);for(var u=1,c=0;c<t.length-1;++c){u*=t[c];for(var l=t[c+1],f=1;f<u+1;++f)s[c].push(f*l)}for(var h=0;h<e.length;++h){for(var p=e[h],d=e[h]+1,m=0;m<n.length;++m){var v=n[m],g=m+t.length-1;if(g>=0)for(var y=s[g],b=y[y.length-1]-v[p],x=p;x<d;++x)s[g].push(v[x+1]+b);p=v[p],d=v[d]}d!==p&&(a.push([p,d]),i+=d-p)}return{outSplits:s,valueSlices:a,numValues:i}}function ED(e,t){for(var n=e.slice(0,t);n.length<t;)n.push(1);for(var r=t;r<e.length;r++)n[t-1]*=e[r];return n}function AD(e,t,n,r,a){var i=t.slice();i[0]=a;var o=Ab(n,wb(i)),s=e.length;return function(e,t,n,r,a,i){var o,s=ED(t,2)[1],u=ED(i,2)[1],c=0,l=Oo(n);try{for(l.s();!(o=l.n()).done;)for(var f=o.value,h=f[0];h<f[1];++h){for(var p=0;p<r;++p)a[c*u+p]=e[h*s+p];++c}}catch(cBe){l.e(cBe)}finally{l.f()}}(e,t,r,0===s?0:s/t[0],o,i),[o,i]}var RD=WR,OD=function(){function e(t,n,r,a,i,o,s,u,c,l){var f;N(this,e),this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=u,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=function(e){var t,n={FIRST_DIM_SIZE:WR.FIRST_DIM_SIZE,VALUE_ROWIDS:WR.VALUE_ROWIDS,ROW_LENGTHS:WR.ROW_LENGTHS,ROW_SPLITS:WR.ROW_SPLITS,ROW_LIMITS:WR.ROW_LIMITS,ROW_STARTS:WR.ROW_STARTS},r=[],a=Oo(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(!(i in n))break;r.push(n[i])}}catch(cBe){a.e(cBe)}finally{a.f()}return r}(l),this.raggedRank=0===(f=this.rowPartitionTypes).length?0:f[0]===WR.FIRST_DIM_SIZE?f.length-1:f.length}return(0,C.Z)(e,[{key:"getRowPartitionTypeByDimension",value:function(e){return this.rowPartitionTypes[0]===RD.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}},{key:"getRowPartitionTensor",value:function(e){return this.rowPartitionTypes[0]===RD.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}},{key:"getMaxWidth",value:function(t){var n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case RD.VALUE_ROWIDS:return e.getMaxWidthValueRowID(n);case RD.ROW_SPLITS:return e.getMaxWidthRowSplit(n);default:throw new Error("Cannot handle partition type ".concat(RD[this.getRowPartitionTypeByDimension(t-1)]))}}},{key:"tensorShapeFromTensor",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return DD(e,n)}},{key:"calculateOutputSize",value:function(e){var t=this.valuesShape;!function(e,t){if(null!=e&&null!=t){var n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(var a=0;a<Math.min(n,r-1);++a){var i=e[a],o=t[a+1];if(i>=0&&o>=0&&1!==i&&i!==o)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(a-e.length,"] = ").concat(i," but ragged tensor input.flatValues.shape[").concat(a-e.length,"] = ").concat(o))}}}(this.defaultValueShape,t);var n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=function(e,t,n){var r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(var a=1;a<n.length;++a){var i=n[a],o=r[r.length-n.length+a],s=r[o];if(i>=0)if(s>=0){if(s!==i)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(a+e,"] = ").concat(i," but shape[").concat(a+e,"] = ").concat(s))}else r[o]=i}return r}(this.raggedRank,n,t),a=r;a[0]<0&&(a[0]=e);for(var i=1;i<=this.raggedRank;++i)a[i]<0&&(a[i]=this.getMaxWidth(i));return a}},{key:"calculateFirstParentOutputIndex",value:function(e,t,n){for(var r=Math.min(e,n),a=[],i=0,o=0;o<r;++o,i+=t)a.push(i);for(var s=r;s<e;++s)a.push(-1);return gb(a.length===e,(function(){return"Final length of result must be equal to firstDimension."})),a}},{key:"calculateOutputIndexRowSplit",value:function(e,t,n,r){for(var a=e.length,i=[],o=0;o<a-1;++o){var s=e[o+1]-e[o],u=Math.min(r,s),c=t[o];-1===c&&(u=0);for(var l=0;l<u;++l)i.push(c),c+=n;for(var f=0;f<s-u;++f)i.push(-1)}if(a>0&&i.length!==e[a-1])throw new Error("Invalid row split size.");return i}},{key:"calculateOutputIndexValueRowID",value:function(e,t,n,r){var a=e.length,i=[];if(0===a)return[];var o=0,s=e[0];if(s>=t.length)throw new Error("Got currentValueRowId=".concat(s,", which is not less than ").concat(t.length));var u=t[s];i.push(u);for(var c=1;c<a;++c){var l=e[c];if(l===s)u>=0&&(++o<r?u+=n:u=-1);else{if(o=0,s=l,l>=t.length)throw new Error("Got nextValueRowId=".concat(l," which is not less than ").concat(t.length));u=t[l]}i.push(u)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}},{key:"calculateOutputIndex",value:function(e,t,n,r){var a=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case RD.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,n,r);case RD.ROW_SPLITS:if(a.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(a.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(a,t,n,r);default:throw new Error("Unsupported partition type: ".concat(RD[i]))}}},{key:"getFirstDimensionSize",value:function(){var e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");var t=this.rowPartitionTypes[0];switch(t){case RD.FIRST_DIM_SIZE:return e[0];case RD.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case RD.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(RD[t]))}}},{key:"compute",value:function(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");var e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(var r=n.length-2;r>=0;--r)n[r]=n[r+1]*t[r+1];var a=DD(t,!1),i=Ab(this.valuesDType,wb(a));if(n[0]*t[0]>0){for(var o=this.calculateFirstParentOutputIndex(e,n[0],t[0]),s=1;s<=this.raggedRank;++s){o=this.calculateOutputIndex(s-1,o,n[s],t[s])}this.setOutput(this.raggedRank,o,i,a)}return[a,i]}},{key:"setOutput",value:function(e,t,n,r){if(0!==n.length){var a=this.values,i=n,o=r.slice(),s=wb(o=o.slice(e+1)),u=t.length,c=this.defaultValue;if(c.length!==s&&1!==c.length){var l=this.defaultValueShape;lA((function(){var e=DI(c,l),t=$I(e,o);c=t.dataSync()}))}for(var f=0,h=0,p=0,d=0;d<=u;++d){var m=d<u?t[d]:-1;if(m!==p){if(h<p){var v=a.subarray(f*s);MD(i.subarray(h*s),v,(p-h)*s)}if(d>=u){var g=n.length;m=Math.floor(g/s)}if(m>p)if(1===this.defaultValue.length)i.subarray(p*s,m*s).fill(this.defaultValue[0]),p=m;else for(;m>p;){MD(i.slice(p*s),c,s),++p}m<0?(f=d+1,h=p):(f=d,p=(h=p)+1)}else++p}}}}],[{key:"getMaxWidthRowSplit",value:function(e){var t=e.length;if(0===t||1===t)return 0;for(var n=0,r=0;r<t-1;++r){var a=e[r+1]-e[r];a>n&&(n=a)}return n}},{key:"getMaxWidthValueRowID",value:function(e){var t=e.length;if(0===t)return 0;for(var n=0,r=e[0],a=0,i=1;i<t;++i){var o=e[i];o!==r&&(r=o,a=Math.max(i-n,a),n=i)}return Math.max(t-n,a)}}]),e}();function MD(e,t,n){for(var r=0;r<n;r++)e[r]=t[r]}function DD(e,t){var n,r=[],a=Oo(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i<0){if(!t)throw new Error("Dimension ".concat(i," must be >= 0"));if(i<-1)throw new Error("Dimension ".concat(i," must be >= -1"));i=-1}r.push(i)}}catch(cBe){a.e(cBe)}finally{a.f()}return r}var FD=sD((function(e){return 1/Math.sqrt(e)}));cD(tk,FD);var PD=sD((function(e){return 1/(1+Math.exp(-e))}));uD(ck,(function(e){return 1/(1+Math.exp(-e))}));function LD(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}function zD(e,t,n,r,a){var i=eI(r,t,n),o=wb(n),s=zb(r);if(i){var u=tI(t,s);return"string"===a?e.slice(u,u+o):e.subarray(u,u+o)}for(var c=yT(r,a,"string"===a?hO(e):e),l=yT(n,a),f=0;f<l.size;++f){var h=l.indexToLoc(f),p=h.map((function(e,n){return e+t[n]}));l.set.apply(l,[c.get.apply(c,(0,I.Z)(p))].concat((0,I.Z)(h)))}return"string"===a?l.values.map((function(e){return vS(e)})):l.values}var BD=sD((function(e){return Math.sqrt(e)}));uD(fk,(function(e){return Math.sqrt(e)}));var WD=function(){function e(t,n,r,a,i,o){N(this,e),this.separator=vS(t),this.nGramWidths=n,this.leftPad=vS(r),this.rightPad=vS(a),this.padWidth=i,this.preserveShort=o}return(0,C.Z)(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,i){for(var o=this,s=function(s){var u=o.getPadWidth(i),c=Math.max(0,u-s),l=Math.max(0,u-(a-(s+1))),f=i-(c+l),h=t+(c>0?0:s-u),p=0;p+=c*o.leftPad.length;for(var d=0;d<f;++d)p+=e[h+d].length;p+=l*o.rightPad.length,p+=(c+l+f-1)*o.separator.length,n[r+s]=new Uint8Array(p);for(var m=n[r+s],v=0,g=function(e){return e.forEach((function(e){return m[v++]=e}))},y=0;y<c;++y)g(o.leftPad),g(o.separator);for(var b=0;b<f-1;++b)g(e[h+b]),g(o.separator);if(f>0){g(e[h+f-1]);for(var x=0;x<l;++x)g(o.separator),g(o.rightPad)}else{for(var w=0;w<l-1;++w)g(o.rightPad),g(o.separator);g(o.rightPad)}},u=0;u<a;++u)s(u)}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var i=t[0];if(0!==i)throw new Error("First split value must be 0, got ".concat(i));for(var o=1;o<a;++o){var s=t[o]>=i;if(!(s=s&&t[o]<=r))throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(i,", ").concat(r,"]"));i=t[o]}if(i!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(i))}var u=a-1,c=Ab("int32",a);if(0===r||0===a){for(var l=new Array(r),f=0;f<=u;++f)c[f]=0;return[l,c]}c[0]=0;for(var h=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),c[e]=c[e-1]+a},p=1;p<=u;++p)h(p);for(var d=new Array(c[u]),m=function(r){var a=t[r],i=c[r];if(n.nGramWidths.forEach((function(o){var s=t[r+1]-t[r],u=n.getNumNGrams(s,o);n.createNGrams(e,a,d,i,u,o),i+=u})),n.preserveShort&&i===c[r]){var o=t[r+1]-t[r];if(0===o)return"continue";var s=o+2*n.padWidth;n.createNGrams(e,a,d,i,1,s)}},v=0;v<u;++v)m(v);return[d,c]}}]),e}();function VD(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){var o=e.subarray(a,i);n&&0===o.length||r.push(o),a=i+1}}else{for(var s=t[0],u=e.indexOf(s);-1!==u;){var c=e.subarray(0,u);n&&0===c.length||r.push(c),u=(e=e.subarray(u+1)).indexOf(s)}n&&0===e.length||r.push(e)}else for(var l=0;l<e.length;++l)r.push(e.subarray(l,l+1))}var jD=XM((function(e,t){return e-t})),UD=aD((function(e,t,n,r){return{real:e-n,imag:t-r}}));rD(Ik,jD,UD);var HD=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function ZD(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,i=t-n+1,o=Math.log(a),s=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*s*(a-s)/a)*Math.sign(i-a/2),c=Math.max(n,Math.floor(t-i*s/a+u)),l=Math.min(r,Math.floor(t+(a-i)*s/a+u));ZD(e,t,c,l)}var f=e[t],h=n,p=r;for(mb(e,n,t),HD(e[r],f)>0&&mb(e,n,r);h<p;){for(mb(e,h,p),h++,p--;HD(e[h],f)<0;)h+=1;for(;HD(e[p],f)>0;)p-=1}0===HD(e[n],f)?mb(e,n,p):mb(e,p+=1,r),p<=t&&(n=p+1),t<=p&&(r=p-1)}}var GD=iD,qD=function(e,t,n,r,a){for(var i=wb(r),o=jb(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(o[u]+=i>0?t[s]:1)}return o},KD=function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],i=e.shape[1],o=yT([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<i;u++){var c=e.get(s,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,s,c):t.size>0?o.set(o.get(s,c)+t.get(s,u),s,c):o.set(o.get(s,c)+1,s,c))}return o},XD=tD,YD=lD,$D=function(e,t,n,r){var a=Ab(n,wb(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=wb(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?hO(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+o,c=0;c<e.shape[1];++c)a[u+c]=r[i++];o+=e.shape[1]}))}return a},QD=fD,JD=hD,eF=pD,tF=dD,nF=function(e,t,n,r,a,i,o,s,u){for(var c=yT([r,i],n),l=0;l<r;l++){for(var f=[],h=0,p=0;p<a;p++){var d=e[l*a+p];h+=d*o[p],f.push(d)}if(h<0||h>=u/i)throw new Error("Invalid indices: ".concat(f," does not index into ").concat(s));for(var m=0;m<i;m++)c.values[l*i+m]=t.get.apply(t,(0,I.Z)(t.indexToLoc(h*i+m)))}return c},rF=function(e,t,n){for(var r=yT(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a).slice(),o=i[0],s=i[2],u=t.locToIndex([o,s]);i[2]=t.values[u];var c=e.locToIndex(i);0<=c&&c<e.values.length&&(r.values[a]=e.values[c])}return r},aF=mD,iF=vD,oF=gD,sF=yD,uF=function(e,t,n){var r=(t-e)/(n-1),a=jb(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a},cF=bD,lF=function(e,t,n,r){for(var a=Eb(r,wb(n)),i=0;i<a.length;++i){for(var o=i*t,s=e[o],u=0;u<t;++u){var c=e[o+u];(Number.isNaN(c)||c>s)&&(s=c)}a[i]=s}return a},fF=xD,hF=wD,pF=kD,dF=_D,mF=TD,vF=ND,gF=function(e,t,n,r,a,i,o,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach((function(e,r){if(e<0||e>=n){var a=Zb(r,t.length,zb(t)).join(",");throw new Error("indices[".concat(a,"] = ").concat(e," is not in [0, ").concat(n,")"))}}))}(i,o,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");var u=CD(i,o,e,r[0]),c=u.outSplits,l=u.valueSlices,f=u.numValues,h=function(e){for(var t=[],n=function(n){var r=Ab("int32",e[n].length);t.push(r),e[n].forEach((function(e,t){return r[t]=e}))},r=0;r<e.length;++r)n(r);return t}(c),p=AD(n,r,a,l,f);return[h,p[0],p[1]]},yF=function(e,t,n,r,a,i,o,s,u,c){return new OD(e,t,n,r,a,i,o,s,u,c).compute()},bF=function(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return jb(0,r);var a=jb(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return a},xF=FD,wF=function(e,t,n,r,a,i,o,s,u,c){var l=[r/a,a],f=e.values,h=t.values;if(0===r)return yT(n,t.dtype);var p=yT(l,t.dtype);"string"===typeof u||"number"===typeof u?p.values.fill(u):"boolean"===typeof u&&p.values.fill(+u);for(var d=0;d<i;d++){for(var m=[],v=0,g=0;g<o;g++){var y=f[d*o+g];m.push(y),v+=y*s[g]}if(v<0||v>=r/a)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(var b=0;b<a;b++)c?p.values[v*a+b]+=h[d*a+b]:p.values[v*a+b]=0===t.rank?h[0]:h[d*a+b]}return p},kF=PD,SF=LD,_F=zD,TF=function(e,t,n,r,a,i,o){var s=t[0],u=i[0],c=new Array(u),l=new Array(s),f=t[1];if(0===u){if(0!==s)throw new Error("Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(s));return[Ab(n,0),[0,f],Ab(a,0),c,l]}for(var h=!0,p=0,d=new Array(u).fill(0),m=0;m<s;++m){var v=e[m*f];if(v<0)throw new Error(sO(m,v));if(v>=u)throw new Error(uO(m,v,u));++d[v],h=h&&v>=p,p=v}for(var g=!0,y=0;y<u;++y){var b=0===d[y];c[y]=b,g=g&&!b,d[y]=Math.max(d[y],1),y>0&&(d[y]+=d[y-1])}if(g&&h){for(var x=e,w=r,k=0;k<s;++k)l[k]=k;return[x,[s,f],w,c,l]}for(var S=d[u-1],_=Ab(n,S*f),T=Ab(a,S),I=new Array(u).fill(0),N=0;N<s;++N){var C=e[N*f],E=I[C],A=(0===C?0:d[C-1])+E;I[C]++;for(var R=0;R<f;++R)_[A*f+R]=e[N*f+R];T[A]=r[N],l[N]=A}for(var O=0;O<u;++O){if(0===I[O]){var M=0===O?0:d[O-1];_[M*f+0]=O;for(var D=1;D<f;++D)_[M*f+D]=0;T[M]=o}}return[_,[S,f],T,c,l]},IF=function(e,t,n,r,a){for(var i,o=wb(r),s=t[0],u=a.length,c=[],l=1,f=-1,h=0;h<u;++h){var p=a[h];if(-1===p){if(-1!==f)throw new Error((i=h,"only one output dimension may be -1, not both ".concat(f," and ").concat(i)));f=h,c.push(1)}else{if(p<0)throw new Error(cO(h,p));l*=p,c.push(p)}}if(-1!==f){if(l<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");var d=Math.trunc(o/l);if(l*d!==o)throw new Error(function(e,t){var n=wb(e),r=wb(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}(r,c));c[f]=d}if(wb(c)!==o)throw new Error(function(e,t){var n=wb(e),r=wb(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}(r,c));var m=r.length,v=[];if(m>0){v[m-1]=1;for(var g=m-2;g>=0;--g)v[g]=v[g+1]*r[g+1]}var y=[];if(u>0){y[u-1]=1;for(var b=u-2;b>=0;--b)y[b]=y[b+1]*c[b+1]}for(var x=Ab(n,s*u),w=0;w<s;++w){for(var k=0,S=0;S<m;++S)k+=e[w*m+S]*v[S];for(var _=0;_<u;++_)x[w*u+_]=Math.trunc(k/y[_]),k%=y[_]}return[x,[s,u],c]},NF=function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,u=[t[0],e.length/t[0]],c=u[1],l=s>0?a[s-1]+1:0,f=l;if(f<0)throw new Error("segment ids must be >= 0");var h=t.slice();h[0]=f;var p=h.reduce((function(e,t){return e*t}),1),d=Ab(n,p);if(0===s)return f>0&&d.fill(o),[d,h];if(f<=0)throw new Error("segment ids must be >= 0");for(var m=0,v=1,g=0,y=a[m];;){var b=0;if(v<s){if(y===(b=a[v])){++v;continue}if(y>=b)throw new Error("segment ids are not increasing")}if(y<0||y>=f)throw new Error(lO(y,f));y>g&&d.fill(o,g*c,y*c);for(var x=m;x<v;++x){var w=r[x];if(w<0||w>=u[0])throw new Error(fO(x,r[x],u[0]));for(var k=0;k<c;k++)d[y*c+k]+=e[w*c+k]}if(i)for(var S=0;S<c;S++)d[y*c+S]/=v-m;if(m=v,g=y+1,y=b,++v>s)break}return g<f&&d.fill(o,g*c,f*c),[d,h]},CF=BD,EF=function(e,t,n,r){for(var a=yT(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),u=0;u<s.length;u++)s[u]=o[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat((0,I.Z)(o)))}return a},AF=function(e,t,n,r,a,i,o,s){return new WD(n,r,a,i,o,s).compute(e,t)},RF=function(e,t,n){for(var r=e.length,a=[],i=0,o=0,s=new Array(r),u=0;u<r;++u){var c=a.length;VD(e[u],t,n,a);var l=a.length-c;s[u]=l,i+=l,o=Math.max(o,l)}for(var f=Ab("int32",2*i),h=new Array(i),p=[r,o],d=0,m=0;m<r;++m)for(var v=0;v<s[m];++v)f[2*d]=m,f[2*d+1]=v,h[d]=a[d],++d;return[f,h,p]},OF=function(e,t){for(var n=Ab("int32",e.length),r=0;r<e.length;++r)n[r]=hS(e[r]).modulo(t).getLowBitsUnsigned();return n},MF=jD,DF=function(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=yT(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=o[u]%e.shape[u];var c=e.locToIndex(s);a.values[i]=e.values[c]}return a},FF=function(e,t,n,r,a){for(var i=t[t.length-1],o=e.length/i,s=i,u=Eb(n,o*r),c=Eb("int32",o*r),l=function(t){var n=t*s,i=e.subarray(n,n+s),o=new Array(i.length);i.forEach((function(e,t){return o[t]={value:e,index:t}})),r<o.length&&(ZD(o,r),o=o.slice(0,r)),a&&o.sort(HD);for(var l=t*r,f=u.subarray(l,l+r),h=c.subarray(l,l+r),p=0;p<r;p++)f[p]=o[p].value,h[p]=o[p].index},f=0;f<o;f++)l(f);var h=t.slice();return h[h.length-1]=r,[yT(h,n,u),yT(h,"int32",c)]},PF=ID,LF=function(e,t,n,r){for(var a=Nb(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var s=a+1;s<n.length;s++)i[2]*=n[s];for(var u={},c=new Int32Array(n[a]),l=new NS(i,r,e),f=[],h=1===i[0]&&1===i[2],p=0;p<n[a];p++){var d=void 0;if(h)d=e[p].toString();else{for(var m=[],v=0;v<i[0];v++)for(var g=0;g<i[2];g++)m.push(l.get(v,p,g));d=m.join(",")}if(void 0!==u[d])c[p]=u[d];else{var y=Object.keys(u).length;u[d]=y,c[p]=y,f.push(p)}}var b=i.slice();b[1]=Object.keys(u).length;var x=new NS(b,r);f.forEach((function(e,t){for(var n=0;n<i[0];n++)for(var r=0;r<i[2];r++)x.set(l.get(n,e,r),n,t,r)}));var w=n.slice();return w[a]=b[1],{outputValues:x.values,outputShape:w,indices:c}};function zF(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function BF(e,t){return 1===t?[e]:zF(e,t)}var WF=function(){function e(t){if(N(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=RM(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=BF("rc",this.rank),r=kM(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}return(0,C.Z)(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),i=2;i<this.rank;i++)a="".concat(e[e.length-1-i],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),VF=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=RM(this.outputShape.length);for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((function(e,t){return t})),a=eM(r,t);return a.map((function(t,r){var i="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),o=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(i,"; ").concat(o,";")})).join("")}(["r","c","d"],"inputShape"):QO(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":tM(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var jF=function(){function e(t){N(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return(0,C.Z)(e,[{key:"acquireTexture",value:function(e,t,n){var r=HF(t,n),a=ZF(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=UF(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===mO.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===mO.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===mO.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===mO.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===mO.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=HF(n,r),i=ZF(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=UF(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=$b().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var u=this.usedTextures[i],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function UF(e,t,n,r,a){var i,o=function(e,t){switch(e){case mO.PACKED_2X2_FLOAT32:return ZM(t);case mO.PACKED_2X2_FLOAT16:return GM(t);case mO.UNPACKED_FLOAT32:return jM(t);case mO.UNPACKED_FLOAT16:return UM(t);case mO.PACKED_4X1_UNSIGNED_BYTE:return HM(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=wO(e[0],e[1]),u=(0,T.Z)(s,2);i=u[0]*u[1]}else{var c=bO(e[0],e[1]),l=(0,T.Z)(c,2);i=l[0]*l[1]}var f=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*f}function HF(e,t){if(e===dO.UPLOAD)return mO.PACKED_2X2_FLOAT32;if(e===dO.RENDER||null==e)return function(e){return $b().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?mO.PACKED_2X2_FLOAT32:mO.UNPACKED_FLOAT32:e?mO.PACKED_2X2_FLOAT16:mO.UNPACKED_FLOAT16}(t);if(e===dO.DOWNLOAD||e===dO.PIXELS)return mO.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function ZF(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var GF=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=RM(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),qF="if (isnan(x)) return x;",KF="return x;",XF="return abs(x);";var YF="return (x >= 0.0) ? x : (exp(x) - 1.0);",$F=qF+"\n  return (x < 0.0) ? 0.0 : x;\n",QF=qF+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",JF="return x;",eP="return 1.0 / (1.0 + exp(-1.0 * x));",tP="return x;",nP="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",rP="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",aP="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",iP="return 1.0 / (1.0 + exp(-1.0 * x));",oP=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=RM(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),sP=(0,C.Z)((function e(t){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=RM(this.outputShape.length);var n=t.length,r=BF("rc",n),a=kM(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),uP=aA,cP={};var lP=$b().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var fP=function(e){A(n,e);var t=L(n);function n(e){var r,a,i;if(N(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!$b().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof KM)a=e;else{var o=yO($b().getNumber("WEBGL_VERSION"),e);a=new KM(o)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var s=yO($b().getNumber("WEBGL_VERSION"));a=new KM(s),r.binaryCache=((i=$b().getNumber("WEBGL_VERSION"))in cP||(cP[i]={}),cP[i]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new jF(r.gpgpu),r.numMBBeforeWarning=null==$b().global.screen?1024:$b().global.screen.height*$b().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new fb((0,F.Z)(r),cA()),r}return(0,C.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"write",value:function(e,t,n){if(($b().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||$b().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:dO.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if($b().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:dO.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var u;u=s?new oP(o,JF):new GF(o,JF);var c=this.runWebGLProgram(u,[{dataId:e,shape:o,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var f,h,p=null!=this.activeTimers;(p&&(f=mS()),"complex64"===r)?h=tO(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):h=this.getValuesFromTexture(e);return p&&(this.downloadWaitMs+=mS()-f),this.convertAndCacheOnCPU(e,h)}},{key:"read",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i,o,s,u,c,l,f,h,p,d,m,v,g,y,b,x,w,k,S,_;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,i=r.shape,o=r.slice,s=r.dtype,u=r.complexTensorInfos,c=r.isPacked,null==o){e.next=11;break}return l=c?new oP(i,JF):new GF(i,JF),f=this.runWebGLProgram(l,[{dataId:t,shape:i,dtype:s}],s),h=this.read(f.dataId),this.disposeIntermediateTensorInfo(f),e.abrupt("return",h);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!$b().getBool("DEBUG")){e.next=16;break}if($b().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==$b().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(p=null,"complex64"!==s&&$b().get("WEBGL_BUFFER_SUPPORTED")&&(d=this.decode(t),v=this.texData.get(d.dataId),p=(m=this.gpgpu).createBufferFromTexture.apply(m,[v.texture.texture].concat((0,I.Z)(xO(i))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==s){e.next=31;break}return e.next=25,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 25:y=e.sent,b=y[0],x=y[1],g=tO(b,x),e.next=32;break;case 31:null==p?g=this.getValuesFromTexture(t):(w=wb(i),g=this.gpgpu.downloadFloat32MatrixFromBuffer(p,w));case 32:return null!=d&&this.disposeIntermediateTensorInfo(d),null!=p&&SO(k=this.gpgpu.gl,(function(){return k.deleteBuffer(p)})),S=this.convertAndCacheOnCPU(t,g),_=this.pendingRead.get(t),this.pendingRead.delete(t),_.forEach((function(e){return e(S)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&cA().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",S);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.isPacked,u=n.texture;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var c;c=s?new oP(a,JF):new GF(a,JF);var l=this.runWebGLProgram(c,[{dataId:e,shape:a,dtype:o}],o),f=this.readToGPU(l,t);return this.disposeIntermediateTensorInfo(l),f}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var h=this.decode(e,t.customTexShape),p=cA().makeTensorFromTensorInfo(h),d=this.texData.get(h.dataId);return Object.assign({tensorRef:p},d.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return gS(e)}));return yT(e.shape,e.dtype,n)}catch(t5){throw new Error("Failed to decode encoded string bytes into utf-8")}return yT(e.shape,e.dtype,t)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!_O(n)){if($b().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,i=wb(n);if($b().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,s=this.decode(e),u=this.texData.get(s.dataId),c=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[u.texture.texture].concat((0,I.Z)(xO(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(s),c}var l=$b().getBool("WEBGL_PACK")&&!0===a,f=l?jO(n):n,h=l?new FM(f):new DM(f),p=this.runWebGLProgram(h,[{shape:f,dtype:r,dataId:e}],"float32"),d=this.texData.get(p.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(p),m}},{key:"timerAvailable",value:function(){return $b().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var i=xb(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=xb(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return Tn(Sn().mark((function e(){var n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!($b().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(i);case 3:n=e.sent,s.kernelMs=vb(n),s.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return $b().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:mS(),endMs:null}}},{key:"endTimer",value:function(e){return $b().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=mS(),e)}},{key:"getQueryTime",value:function(){var e=Tn(Sn().mark((function e(t){var n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!($b().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lP;return $b().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&wb(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){jk("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return uP(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new oP(e.shape,t),a=this.compileAndRun(r,[e],n);return cA().makeTensorFromTensorInfo(a)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=SF(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if($b().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,XF,e.dtype);var n=new GF(e.shape,XF),r=this.compileAndRun(n,[e]);return cA().makeTensorFromTensorInfo(r)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&Db(n[0])){var a=n.map((function(e){return vS(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){return cA().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}},{key:"unpackTensor",value:function(e){var t=new sP(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new WF(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[WO(e.shape)].concat((0,I.Z)(VO(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[WO(t)].concat((0,I.Z)(VO(t))),i=new VF(a,n),o=[n],s=this.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype;null!=t&&gb(wb(a)<=t[0]*t[1]*4,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}));var o,s=jO(a);o=r?new MM(s):new OM(s);var u=[null!=t?t:xO(s)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(o,[{shape:s,dtype:i,dataId:e}],i,u,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===pO.DENSE){var c=null!=o?o:xO(e.outputShape);u.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===wb(s.shape))return u.values=Eb(s.dtype,0),s;var l=[],f=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&wb(t.shape)<=$b().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),l.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!HO(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),l.push(t),n=a.texData.get(t.dataId),r.shape=i}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var h,p={shape:s.shape,texData:u,isUniform:!1},d=AM(e,f,p),m=this.getAndSaveBinary(d,(function(){return IM(a.gpgpu,e,f,p)})),v=null!=this.activeTimers;v&&(h=this.startTimer()),$b().get("ENGINE_COMPILE_ONLY")||EM(this.gpgpu,m,f,p,r),l.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),v&&(h=this.endTimer(h),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(h)}));var g=$b().get("WEBGL_FLUSH_THRESHOLD");if(g>0){var y=mS();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!$b().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===i){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,a);return i}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!$b().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=lA((function(){if(!$b().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=$b().getBool("DEBUG");$b().set("DEBUG",!1);var n=e.abs(VN(1e-8)).dataSync()[0];if($b().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,i=t.texture,o=t.usage,s=t.isPacked;if(null==i){var u,c=null!=this.activeTimers;c&&(u=mS());var l=t.texShape;if(null==l&&(l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=$b().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=$b().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&$b().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?db(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var a=Cb(e);e=a.newShape}var i=wb(e),o=null;e.length<=1&&i<=n?o=[1,i]:2===e.length&&e[0]<=n&&e[1]<=n?o=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?o=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?o=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?o=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(o=[e[0],e[1]*e[2]*e[3]]);var s=null!=o&&Math.max.apply(Math,(0,I.Z)(o))>r&&Math.min.apply(Math,(0,I.Z)(o))<=(t?2:1)&&Math.min.apply(Math,(0,I.Z)(o))>0;if(null==o||s)if(t){var u=WO(e),c=2,l=2;if(e.length){var f=VO(e),h=(0,T.Z)(f,2);c=h[0],l=h[1]}o=_b(i=u*(c/2)*(l/2)).map((function(e){return 2*e}))}else o=_b(i);return o}(n,s),t.texShape=l),null!=a){var f,h=jO(n),p=l[1],d=l[0],m=a instanceof Uint8Array||a instanceof Uint8ClampedArray;if(s||!m){var v=wO(l[0],l[1]),g=(0,T.Z)(v,2);p=g[0],d=g[1]}f=s?new LM(h,m):new PM(h,m);var y=m?[d,p]:l,b=this.makeTensorInfo(y,r),x=this.texData.get(b.dataId);x.usage=m?dO.PIXELS:dO.UPLOAD,x.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),p,d,a);var w=[[d,p]],k=this.runWebGLProgram(f,[b],r,w,!0),S=this.texData.get(k.dataId);t.texShape=S.texShape,t.isPacked=S.isPacked,t.usage=S.usage,$b().get("ENGINE_COMPILE_ONLY")?this.disposeData(k.dataId):(t.texture=S.texture,t.values=null,this.texData.delete(k.dataId)),this.disposeIntermediateTensorInfo(b),c&&(this.uploadWaitMs+=mS()-u)}else{var _=this.acquireTexture(l,o,r,s);t.texture=_}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*Mb(t)}},{key:"checkCompileCompletion",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,T.Z)(t[e],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r,a,i,o,s,u,c=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.gpgpu.parallelCompilationExtension){e.next=6;break}for(n=0,r=Object.entries(this.binaryCache);n<r.length;n++)a=(0,T.Z)(r[n],2),i=a[1],t.push(this.checkCompletionAsync_(i));return e.abrupt("return",Promise.all(t));case 6:for(o=function(){var e=(0,T.Z)(u[s],2)[1],n=new Promise((function(t){try{c.checkCompletion_(e),t(!0)}catch(n){throw n}}));t.push(n)},s=0,u=Object.entries(this.binaryCache);s<u.length;s++)o();return e.abrupt("return",Promise.all(t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkCompletionAsync_",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){e.next=4;break}return e.abrupt("return",this.checkCompletion_(t));case 4:return e.next=6,new Promise((function(e){return XR((function(){return e()}))}));case 6:return e.abrupt("return",this.checkCompletionAsync_(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCompletion_",value:function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw EO(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}},{key:"getUniformLocations",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,T.Z)(t[e],2)[1],r=NM(this.gpgpu,n.program,n.webGLProgram),a=r.uniformLocations,i=r.customUniformLocations,o=r.infLoc,s=r.nanLoc,u=r.inShapesLocations,c=r.inTexShapesLocations,l=r.outShapeLocation,f=r.outShapeStridesLocation,h=r.outTexShapeLocation;n.uniformLocations=a,n.customUniformLocations=i,n.infLoc=o,n.nanLoc=s,n.inShapesLocations=u,n.inTexShapesLocations=c,n.outShapeLocation=l,n.outShapeStridesLocation=f,n.outTexShapeLocation=h}}}]),n}(hb);fP.nextDataId=0,JS()&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;YS.registerBackend(e,t,n)}("webgl",(function(){return new fP}),2);var hP=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["A","B"],this.outputShape=qT(n,r),this.enableShapeUniforms=RM(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),pP=(0,C.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];N(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=qT(n,r);var i=this.outputShape.length;this.enableShapeUniforms=RM(i);var o="";if(a)if(0===i||1===wb(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=kM(i);if(o="\n          ".concat(s," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var u=BF("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}));function dP(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var mP={kernelName:iw,backendName:"webgl",kernelFunc:dP};function vP(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=dP({inputs:{x:r},backend:n}),u=dP({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var gP={kernelName:Tx,backendName:"webgl",kernelFunc:vP},yP="return (a < 0.) ? b * a : a;",bP="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var xP={kernelName:fw,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",pS(i,"float32")),s=$b().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pP(bP,a.shape,o.shape):new hP(yP,a.shape,o.shape),u=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),u}},wP="return (a < 0.) ? b * a : a;",kP="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var SP={kernelName:Vw,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=$b().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pP(kP,r.shape,a.shape):new hP(wP,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}};function _P(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,u=o.x,c=s,l=a||u.dtype;if(c.shouldExecuteOnCPU([u])&&null!=r){var f=c.texData.get(u.dataId),h=r(f.values,l);return c.makeTensorInfo(u.shape,l,h)}return i=$b().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new oP(u.shape,n):new GF(u.shape,t),c.runWebGLProgram(i,[u],l)}}function TP(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,s=e.cpuKernelImpl,u=e.dtype;return function(e){var r=e.inputs,i=e.backend,c=r.a,l=r.b,f=i;if(o&&"complex64"===c.dtype){var h=f.texData.get(c.dataId),p=f.texData.get(l.dataId),d=[[h.complexTensorInfos.real,p.complexTensorInfos.real],[h.complexTensorInfos.imag,p.complexTensorInfos.imag]].map((function(e){var n=(0,T.Z)(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:c.shape},o={dataId:a.dataId,dtype:a.dtype,shape:l.shape},s=new hP(t,c.shape,l.shape);return f.runWebGLProgram(s,[i,o],zS(r.dtype,a.dtype))})),m=(0,T.Z)(d,2),v=m[0],g=m[1],y=vP({inputs:{real:v,imag:g},backend:f});return f.disposeIntermediateTensorInfo(v),f.disposeIntermediateTensorInfo(g),y}var b,x=u||zS(c.dtype,l.dtype);if(("string"===c.dtype||"string"===l.dtype||f.shouldExecuteOnCPU([c,l]))&&null!=s){var w=f.texData.get(c.dataId).values,k=f.texData.get(l.dataId).values,S="string"===c.dtype?hO(w):w,_="string"===c.dtype?hO(k):k,I=s(c.shape,l.shape,S,_,x),N=(0,T.Z)(I,2),C=N[0],E=N[1],A=f.makeTensorInfo(E,x);return f.texData.get(A.dataId).values=C,A}return b=$b().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new pP(n,c.shape,l.shape,a):new hP(t,c.shape,l.shape),f.runWebGLProgram(b,[c,l],x)}}function IP(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?tP:KF;if("relu"===e)return t?rP:$F;if("elu"===e)return t?nP:YF;if("relu6"===e)return t?aP:QF;if("prelu"===e)return t?kP:wP;if("leakyrelu"===e)return t?bP:yP;if("sigmoid"===e)return t?iP:eP;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var NP=(0,C.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];N(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=RM(this.outputShape.length);var l=a?t[1]:t[2],f=Math.ceil(l/2),h=a?"i * 2, rc.y":"rc.y, i * 2",p=i?"rc.z, i * 2":"i * 2, rc.z",d=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],v="",g="";s&&(v=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),g="result = activation(result);");var y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var b="rc.x",x="rc.x";t[0]<n[0]?b="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(x="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(v,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(f,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(f,"; i++) {\n          int batchA = ").concat(b,";\n          int batchB = ").concat(x,";\n          vec4 a = getMatrixA(batchA, ").concat(h,");\n          vec4 b = getMatrixB(batchB, ").concat(p,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(d[0]," * ").concat(m[0],");\n          result += (").concat(d[1]," * ").concat(m[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")})),CP="return areal * breal - aimag * bimag;",EP="return areal * bimag + aimag * breal;",AP=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=qT(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),RP="return a * b;";function OP(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=zS(a.dtype,i.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),u=r.texData.get(i.dataId),c=new AP(CP,a.shape,i.shape),l=new AP(EP,a.shape,i.shape),f=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],h=r.runWebGLProgram(c,f,"float32"),p=r.runWebGLProgram(l,f,"float32"),d=vP({inputs:{real:h,imag:p},backend:r});return r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(p),d}if(r.shouldExecuteOnCPU([a,i])){var m=r.texData.get(a.dataId),v=r.texData.get(i.dataId),g=pF(a.shape,i.shape,m.values,v.values,o),y=(0,T.Z)(g,2),b=y[0],x=y[1],w=r.makeTensorInfo(x,o);return r.texData.get(w.dataId).values=b,w}return t=$b().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pP(RP,a.shape,i.shape):new hP(RP,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var MP={kernelName:Rw,backendName:"webgl",kernelFunc:OP};function DP(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,s=wb(a.shape),u=function(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}(i,s),c=wb(u);gb(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var l=o.texData.get(a.dataId);return!l.isPacked||HO(a.shape,u)||null!==l.texture&&HO(l.shape,u)?(o.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[WO(e.shape)].concat((0,I.Z)(VO(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[WO(t)].concat((0,I.Z)(VO(t))),o=new VF(i,r),s=[r],u=n.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,u,o)}var FP={kernelName:Xw,backendName:"webgl",kernelFunc:DP},PP=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s=4*Math.floor(r/4),u=r%4,c="sumValue += dot(values, ones);";if(null!=n){var l=1/n;c="sumValue += dot(values * ".concat(Sb(l)?l.toPrecision(2):l,", ones);")}var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),LP=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),f=r%4,h="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),p="vec4";"all"===n?(s="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===n&&(s="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(h,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===f,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(2===f,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(3===f,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(h,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}));function zP(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=$R(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var s,u=a[o],c=u.inSize,l=u.windowSize,f=u.outSize,h=void 0;h="mean"===n?0===o?new PP({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:f},c):new PP({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:f}):new LP({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:f},n),s=i,i=r.runWebGLProgram(h,[i],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return i}var BP=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=kM(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}));var WP=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=kM(this.rank),o=zF("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=o[u];var c="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),f="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(f,";\n      if(").concat(l,") {\n        result[1] = ").concat(f,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(f,";\n        if(").concat(l,") {\n          result[3] = ").concat(f,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function VP(e,t,n){var r=$b().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new WP(e.shape,t):new BP(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function jP(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,i=e.shape.length,o=Nb(a,e.shape),s=o,u=FN(s,i),c=null!=u,l=e;c&&(l=VP(e,u,r),s=LN(s.length,i)),DN("sum",s,i);var f=ON(l.shape,s),h=(0,T.Z)(f,2),p=h[0],d=h[1],m=p;n&&(m=MN(p,o));var v=wb(d),g=DP({inputs:{x:l},attrs:{shape:[wb(e.shape)/v,v]},backend:r}),y=zP(g,BS(e.dtype),"sum",r),b=DP({inputs:{x:y},attrs:{shape:m},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(y),c&&r.disposeIntermediateTensorInfo(l),b}(t.x,r.axis,r.keepDims,n)}var UP={kernelName:hk,backendName:"webgl",kernelFunc:jP};function HP(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,s=r,u=i.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=i.shape[o[l]];if(s.shouldExecuteOnCPU([i])){var f=s.texData.get(i.dataId).values,h=PF(f,i.shape,i.dtype,o,c);t=s.makeTensorInfo(c,i.dtype),s.texData.get(t.dataId).values=h}else t=VP(i,o,s);return t}var ZP={kernelName:Rk,backendName:"webgl",kernelFunc:HP};function GP(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,f=void 0===l?0:l,h=e.activation,p=void 0===h?null:h,d=t.shape.length,m=n.shape.length,v=r?t.shape[d-2]:t.shape[d-1],g=a?n.shape[m-1]:n.shape[m-2],y=r?t.shape[d-1]:t.shape[d-2],b=a?n.shape[m-2]:n.shape[m-1],x=t.shape.slice(0,-2),w=n.shape.slice(0,-2),k=wb(x),S=wb(w),_=qT(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);gb(v===g,(function(){return"Error in matMul: inner shapes (".concat(v,") and (")+"".concat(g,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var T,I=r?[k,v,y]:[k,y,v],N=a?[S,b,g]:[S,g,b],C=DP({inputs:{x:t},backend:i,attrs:{shape:I}}),E=DP({inputs:{x:n},backend:i,attrs:{shape:N}}),A=[C,E],R=Math.max(k,S),O=r?C.shape[1]:C.shape[2],M=null!=s,D=null!=c,F="leakyrelu"===p,P=null!=p?IP(p,!0):null;if((1===y||1===b)&&O>1e3&&!1===(M||D||F||null!=P)){var L=C,z=E;r&&(L=HP({inputs:{x:C},backend:i,attrs:{perm:[0,2,1]}}),A.push(L)),a&&(z=HP({inputs:{x:E},backend:i,attrs:{perm:[0,2,1]}}),A.push(z));var B=1===b,W=L;1!==b&&(W=DP({inputs:{x:L},backend:i,attrs:{shape:[R,O,1]}}),A.push(W));var V=1===b?2:1,j=z;B&&(j=DP({inputs:{x:z},backend:i,attrs:{shape:[R,1,O]}}),A.push(j));var U=OP({inputs:{a:W,b:j},backend:i});T=jP({inputs:{x:U},backend:i,attrs:{axis:V,keepDims:!0}}),A.push(U)}else{var H=zS(t.dtype,n.dtype),Z=new NP(I,N,[R,y,b],r,a,M,P,D,F),G=[C,E];if(null!=s&&G.push(s),D&&G.push(c),F){var q=i.makeTensorInfo([],"float32",pS(f,"float32"));G.push(q),A.push(q)}T=i.runWebGLProgram(Z,G,H)}var K=DP({inputs:{x:T},backend:i,attrs:{shape:_}});A.push(T);for(var X=0,Y=A;X<Y.length;X++){var $=Y[X];i.disposeIntermediateTensorInfo($)}return K}var qP={kernelName:Bk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return GP({a:a,b:i,transposeA:u,transposeB:c,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},KP="return abs(x);";var XP={kernelName:nx,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=SF(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=$b().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new oP(a.shape,KP):new GF(a.shape,KP),r.runWebGLProgram(t,[a],a.dtype)}},YP=_P({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),$P={kernelName:rx,backendName:"webgl",kernelFunc:YP},QP=_P({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),JP={kernelName:ax,backendName:"webgl",kernelFunc:QP},eL="return a + b;",tL=TP({opSnippet:eL,packedOpSnippet:eL,supportsComplex:!0,cpuKernelImpl:GD}),nL={kernelName:ix,backendName:"webgl",kernelFunc:tL},rL=(0,C.Z)((function e(t,n){N(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),aL=(0,C.Z)((function e(t,n){N(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var iL={kernelName:ox,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return dP({inputs:{x:a[0]},backend:r});if(a.length>$b().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),s=e({inputs:a.slice(i),backend:r});return e({inputs:[o,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return zS(e,t)})),c=a.map((function(e){return e.shape})),l=$b().getBool("WEBGL_PACK")?new aL(a[0].shape,c):new rL(a[0].shape,c);return r.runWebGLProgram(l,a,u)}};var oL={kernelName:sx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=Nb(i,a.shape),c=u,l=FN(c,s),f=a;null!=l&&(f=HP({inputs:{x:a},backend:n,attrs:{perm:l}}),c=LN(c.length,s)),DN("all",c,s);var h,p=ON(f.shape,c),d=(0,T.Z)(p,2),m=d[0],v=DP({inputs:{x:f},backend:n,attrs:{shape:[-1,wb(d[1])]}}),g=zP(v,v.dtype,"all",n);return h=DP(o?{inputs:{x:g},backend:n,attrs:{shape:MN(m,u)}}:{inputs:{x:g},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(f),h}};var sL={kernelName:ux,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=Nb(i,a.shape),c=u,l=FN(c,s),f=a;null!=l&&(f=HP({inputs:{x:a},backend:n,attrs:{perm:l}}),c=LN(c.length,s)),DN("any",c,s);var h,p=ON(f.shape,c),d=(0,T.Z)(p,2),m=d[0],v=DP({inputs:{x:f},backend:n,attrs:{shape:[-1,wb(d[1])]}}),g=zP(v,v.dtype,"any",n);return h=DP(o?{inputs:{x:g},backend:n,attrs:{shape:MN(m,u)}}:{inputs:{x:g},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(f),h}},uL=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),cL=(0,C.Z)((function e(t,n,r,a){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,gb(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");var s,u,c=this.outputShape,l=c.length,f=kM(l),h=BF("coords",l);if(1===o){var p=kM(u=l+1);s="\n        ".concat(p," sourceLocR = ").concat(p,"(").concat(h.join(),", 0);\n        ++").concat(h[l-1],";\n        ").concat(p," sourceLocG = ").concat(p,"(").concat(h.join(),", 0);\n        ++").concat(h[l-2],";\n        ").concat(p," sourceLocA = ").concat(p,"(").concat(h.join(),", 0);\n        --").concat(h[l-1],";\n        ").concat(p," sourceLocB = ").concat(p,"(").concat(h.join(),", 0);\n        --").concat(h[l-2],";")}else u=l,s="\n        ".concat(f," sourceLocR = coords;\n        ++").concat(h[l-1],";\n        ").concat(f," sourceLocG = coords;\n        ++").concat(h[l-2],";\n        ").concat(f," sourceLocA = coords;\n        --").concat(h[l-1],";\n        ").concat(f," sourceLocB = coords;\n        --").concat(h[l-2],";");var d=["x","y","z","w","u","v"].slice(0,u),m="."+d[u-1],v=d.map((function(e){return"int "+e})),g=BF("sourceLocR",u-1).concat("inIdx.r"),y=BF("sourceLocG",u-1).concat("inIdx.g"),b=BF("sourceLocB",u-1).concat("inIdx.b"),x=BF("sourceLocA",u-1).concat("inIdx.a"),w="max"===r?"greaterThan":"lessThan",k=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),S="vec4(\n            getAChannel(".concat(g.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),_=a?"":"\n      float getBestIndicesAChannel(".concat(v.join(),") {\n        return getChannel(getBestIndicesA(").concat(d.join(),"),\n                                          vec2(").concat(d.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(v.join(),") {\n        return getChannel(getA(").concat(d.join(),"),\n                               vec2(").concat(d.slice(-2).join(),"));\n      }\n      ").concat(_,"\n      void main() {\n        ").concat(f," coords = getOutputCoords();\n        bool hasNextCol = ").concat(h[l-1]," < ").concat(c[l-1]-1,";\n        bool hasNextRow = ").concat(h[l-2]," < ").concat(c[l-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(m,", sourceLocG").concat(m,",\n          sourceLocB").concat(m,", sourceLocA").concat(m,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(S,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(k,"\n          vec4 candidate = ").concat(S,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(w,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function lL(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);var o=$R(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},u=new uL(s,n,null==r),c=[t];null!=r&&c.push(r);var l=e.runWebGLProgram(u,c,"int32");if(1===l.shape[1])return l;var f=lL(e,t,n,l);return e.disposeIntermediateTensorInfo(l),f}function fL(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,i=a[a.length-1],o=$R(i),s=new cL(a,o,n,null==r),u=null==r?[t]:[t,r],c=e.runWebGLProgram(s,u,"int32");if(c.shape.length===t.shape.length){var l=fL(e,t,n,c);return e.disposeIntermediateTensorInfo(c),l}return c}function hL(e,t,n,r){var a=[n];if(DN("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!$b().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=e.texData.get(t.dataId),s=t;null!==o&&o.isPacked&&(s=e.unpackTensor(t),i.push(s));var u=ON(s.shape,a),c=(0,T.Z)(u,2),l=c[0],f=wb(c[1]),h=DP({inputs:{x:s},backend:e,attrs:{shape:[-1,f]}});i.push(h);var p=lL(e,h,r);i.push(p);var d=DP({inputs:{x:p},backend:e,attrs:{shape:l}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),d}return fL(e,t,r)}var pL={kernelName:cx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=Nb(r.axis,a.shape),o=FN(i,a.shape.length),s=a,u=[];null!=o&&(s=HP({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=LN(i.length,s.shape.length)),DN("argMax",[i[0]],s.shape.length);var c=hL(n,s,i[0],"max");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}};var dL={kernelName:lx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=Nb(r.axis,a.shape),o=FN(i,a.shape.length),s=a,u=[];null!=o&&(s=HP({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=LN(i.length,s.shape.length)),DN("argMin",[i[0]],s.shape.length);var c=hL(n,s,i[0],"min");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}},mL=_P({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),vL={kernelName:fx,backendName:"webgl",kernelFunc:mL},gL=_P({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),yL={kernelName:hx,backendName:"webgl",kernelFunc:gL},bL=_P({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),xL={kernelName:px,backendName:"webgl",kernelFunc:bL},wL=TP({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),kL={kernelName:mx,backendName:"webgl",kernelFunc:wL},SL=_P({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),_L={kernelName:dx,backendName:"webgl",kernelFunc:SL},TL=(0,C.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(N(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,p=t.padInfo.top,d=t.padInfo.left;this.outputShape=t.outShape;var m="avg"===n,v="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),g="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(m||(y="-1.0 / 1e-20"),r){var b=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(p,", ").concat(d,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(b," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?v:g:"wR * ".concat(h," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var x="max",w="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(w="avgValue / count");var k=4*Math.floor(o/4),S=o%4,_="\n      if (".concat(m,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(x,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(p,", ").concat(d,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(f,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(k,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(_,"\n          }\n\n          int xC = xCCorner + ").concat(k,";\n          if (").concat(1===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(_,"\n          } else if (").concat(2===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(_,"\n          } else if (").concat(3===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(_,"\n          }\n        }\n        setOutput(").concat(w,");\n      }\n    ")}})),IL=(0,C.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(N(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,u=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,f=t.dilationHeight,h=t.dilationWidth,p=t.effectiveFilterDepth,d=t.effectiveFilterHeight,m=t.effectiveFilterWidth,v=t.padInfo.front,g=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,x="0.0";if(b||(x="-1.0 / 1e-20"),r){var w=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(v,", ").concat(g,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(p,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(d,";\n                wR += ").concat(f,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(m,";\n                  wC += ").concat(h,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(w," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(d," * ").concat(m," +\n                      wR * ").concat(m," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var k="max",S="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(S="avgValue / count");var _=4*Math.floor(o/4),T=o%4,I="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(k,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(v,", ").concat(g,", ").concat(y,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(p,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,";\n            wR += ").concat(f,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(_,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(h,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(h,", ch)\n              );\n\n              ").concat(I,"\n            }\n\n            int xC = xCCorner + ").concat(_,";\n            if (").concat(1===T,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(I,"\n            } else if (").concat(2===T,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(I,"\n            } else if (").concat(3===T,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                initializationValue\n              );\n\n              ").concat(I,"\n            }\n          }\n          setOutput(").concat(S,");\n        }\n      }\n    ")}}));var NL={kernelName:vx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;XO(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;gb(RI(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=bI(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&kb(c.inShape,c.outShape))return dP({inputs:{x:a},backend:n});var l=new TL(c,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}};var CL={kernelName:gx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat,l=xI(a.shape,i,o,[1,1,1],s,u,c),f=new IL(l,"avg",!1);return n.runWebGLProgram(f,[a],"float32")}},EL=(0,C.Z)((function e(t){N(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=u-1-t.padInfo.top,f=c-1-t.padInfo.left,h=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(f,");\n      const float avgMultiplier = float(").concat(h,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),AL=(0,C.Z)((function e(t){N(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,f=t.effectiveFilterDepth,h=t.effectiveFilterHeight,p=t.effectiveFilterWidth,d=f-1-t.padInfo.front,m=h-1-t.padInfo.top,v=p-1-t.padInfo.left,g=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(d,", ").concat(m,", ").concat(v,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(f,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(h,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var RL={kernelName:"AvgPool3DGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=xI(i.shape,o,s,[1,1,1],u,c),f=new AL(l);return n.runWebGLProgram(f,[a],i.dtype)}};var OL={kernelName:"AvgPoolGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;XO([a,i],"avgPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=bI(o.shape,s,u,1,c),f=new EL(l);return n.runWebGLProgram(f,[a],o.dtype)}};var ML={kernelName:yx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return GP({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},DL=(0,C.Z)((function e(t,n,r,a,i,o){N(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],qT(t,n),qT(t,r);var s="0.0";null!=a&&(qT(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=i&&(qT(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),FL=(0,C.Z)((function e(t,n,r,a,i,o){N(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],qT(t,n),qT(t,r);var s="vec4(0.0)";null!=a&&(qT(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=i&&(qT(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),PL={kernelName:ew,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,s=t.offset,u=t.scale;gb(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),gb(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),gb(null==u||i.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c=r.varianceEpsilon;null==c&&(c=.001);var l=[a,i,o],f=null;null!=s&&(f=s.shape,l.push(s));var h=null;null!=u&&(h=u.shape,l.push(u));var p=$b().getBool("WEBGL_PACK_NORMALIZATION")?new FL(a.shape,i.shape,o.shape,f,h,c):new DL(a.shape,i.shape,o.shape,f,h,c);return n.runWebGLProgram(p,l,l[0].dtype)}},LL=(0,C.Z)((function e(t){N(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=kM(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return zL.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),i=t.map((function(e,t){return"sourceLoc.".concat(zL[t]," = start[").concat(t,"] + coords.").concat(zL[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),zL=["x","y","z","w","u","v"];var BL=(0,C.Z)((function e(t){N(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=kM(this.rank),r=BF("coords",this.rank),a=BF("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function WL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=nI(a,r.begin,r.size),o=(0,T.Z)(i,2),s=o[0],u=o[1];if(JT(a,s,u),0===wb(u))return n.makeTensorInfo(u,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var c=n.texData.get(a.dataId),l=_F(c.values,s,u,a.shape,a.dtype);return n.makeTensorInfo(u,a.dtype,l)}var f=n.texData.get(a.dataId).isPacked,h=eI(a.shape,s,u);if(f||!h){var p=$b().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new BL(u):new LL(u),d=[s];return n.runWebGLProgram(p,[a],a.dtype,d)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;var s=tI(t,zb(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),i}(a,s,u,n)}var VL={kernelName:ok,backendName:"webgl",kernelFunc:WL},jL={kernelName:bx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;gb(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=QR(a.shape,i,s),c=JR(u.length,i.length),l=eO(a.shape,i,s),f=function(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}(o,i.length),h=function(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}(l,o,i.length),p=[],d=DP({inputs:{x:a},backend:n,attrs:{shape:u}}),m=HP({inputs:{x:d},backend:n,attrs:{perm:c}}),v=DP({inputs:{x:m},backend:n,attrs:{shape:l}}),g=WL({inputs:{x:v},backend:n,attrs:{begin:f,size:h}});return p.push(d),p.push(m),p.push(v),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var UL={kernelName:xx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=qD(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}};var HL={kernelName:wx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=qT(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},ZL=TP({opSnippet:"return float(a != b);",cpuKernelImpl:mF,dtype:"bool"}),GL={kernelName:Mw,backendName:"webgl",kernelFunc:ZL};function qL(e){var t=e.inputs,n=e.backend,r=t.input;return dP({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var KL={kernelName:Gw,backendName:"webgl",kernelFunc:qL};var XL={kernelName:kx,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return dP({inputs:{x:i},backend:r});var s=MC(i.shape),u=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),c=vP({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),c}if("complex64"===i.dtype){var l=qL({inputs:{input:i},backend:r}),f=e({inputs:{x:l},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(l),f}if(!Rb(i.dtype,o)){var h=dP({inputs:{x:i},backend:r});return{dataId:h.dataId,shape:h.shape,dtype:o}}if(r.shouldExecuteOnCPU([i])){var p=r.texData.get(i.dataId).values,d=XD(p,i.shape,i.dtype,o),m=(0,T.Z)(d,3),v=m[0],g=m[1],y=m[2];return r.makeTensorInfo(v,g,y)}if("int32"===o)return function(e,t){var n=new GF(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var b=r.makeTensorInfo([],"bool",Eb("bool",1)),x=ZL({inputs:{a:i,b:b},backend:r});return r.disposeIntermediateTensorInfo(b),x}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},YL="return ceil(x);",$L=_P({opSnippet:YL,packedOpSnippet:YL,cpuKernelImpl:YD}),QL={kernelName:Sx,backendName:"webgl",kernelFunc:$L},JL=(0,C.Z)((function e(t){N(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),ez=(0,C.Z)((function e(t){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var tz={kernelName:_x,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,s=a.clipValueMax;t=$b().getBool("WEBGL_PACK_CLIP")?new ez(i.shape):new JL(i.shape);var u=[[o],[s]];return r.runWebGLProgram(t,[i],i.dtype,u)}},nz=(0,C.Z)((function e(t){N(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function rz(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var az={kernelName:Ix,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new nz(r.shape),o=[rz(r,a.complexTensorInfos.real),rz(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},iz=(0,C.Z)((function e(t){N(this,e),this.outputShape=[],this.outputShape=YR(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var o=n[i-1];a.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(o,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),oz=(0,C.Z)((function e(t,n){N(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=YR(t,n);var r=this.outputShape,a=r.length,i=kM(a),o=BF("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var c=1;c<u.length;c++)u[c]=u[c-1]+t[c][n];for(var l=s[n],f=s.slice(-2),h=s.join(),p="if (".concat(l," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(h,"), vec2(").concat(f.join(),"));\n        }"),d=1;d<u.length;d++){var m=u[d-1];p+="\n        if (".concat(l," < ").concat(u[d],"  && ").concat(l," >= ").concat(u[d-1],") {\n          return getChannel(\n            getT").concat(d,"(").concat(sz(s,l,m),"),\n            vec2(").concat(sz(f,l,m),"));\n        }")}var v=u.length,g=u[u.length-1];p+="\n        return getChannel(\n          getT".concat(v,"(").concat(sz(s,l,g),"),\n          vec2(").concat(sz(f,l,g),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(p,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}));function sz(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function uz(e){var t=e.inputs,n=e.backend,r=t.input;return dP({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var cz={kernelName:sw,backendName:"webgl",kernelFunc:uz};function lz(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return qL({inputs:{input:e},backend:n})})),i=e.map((function(e){return uz({inputs:{input:e},backend:n})})),o=lz(a,t,n),s=lz(i,t,n),u=vP({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}var c=n.shouldExecuteOnCPU(e);if("string"===r&&(c=!0),c){var l=e.map((function(e){var r=wb(e.shape.slice(t));return DP({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),f=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),h=YR(l.map((function(e){return e.shape})),1),p=1===l[0].shape[0],d=$D(f,h,r,p),m=YR(e.map((function(e){return e.shape})),t),v=n.makeTensorInfo(m,r,d);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}var g=$b().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(e.length>g){for(var y=[],b=0;b<e.length;b+=g){var x=e.slice(b,b+g);y.push(lz(x,t,n))}for(var w=lz(y,t,n),k=0,S=y;k<S.length;k++){var _=S[k];n.disposeIntermediateTensorInfo(_)}return w}if($b().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var T=new oz(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(T,e,r)}var I=function(e,t,n){var r=YR(e.map((function(e){return e.shape})),t),a=e.map((function(e){return DP({inputs:{x:e},attrs:{shape:[-1,wb(e.shape.slice(t))]},backend:n})}));return{tensors2D:a,outShape:r}}(e,t,n),N=I.tensors2D,C=I.outShape,E=new iz(N.map((function(e){return e.shape}))),A=n.runWebGLProgram(E,N,r);N.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var R=DP({inputs:{x:A},attrs:{shape:C},backend:n});return n.disposeIntermediateTensorInfo(A),R}function fz(e){var t=e.inputs,n=e.backend,r=Nb(e.attrs.axis,t[0].shape)[0];!function(e,t){var n=e[0].length;e.forEach((function(e,t){gb(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),gb(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)gb(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}(t.map((function(e){return e.shape})),r);var a=YR(t.map((function(e){return e.shape})),r);if(0===wb(a))return n.makeTensorInfo(a,t[0].dtype,[]);var i=t.filter((function(e){return wb(e.shape)>0}));return 1===i.length?dP({inputs:{x:i[0]},backend:n}):lz(i,r,n)}var hz={kernelName:Nx,backendName:"webgl",kernelFunc:fz},pz=(0,C.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];N(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,f=t.dilationWidth,h=t.filterHeight,p=t.filterWidth,d=4*Math.floor(t.inChannels/4),m=t.inChannels%4,v="channelsLast"===t.dataFormat,g=v?1:2,y=v?2:3,b=v?3:1,x="",w="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),w="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(p,"; wC++) {\n            int xC = xCCorner + wC * ").concat(f,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(d,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(v,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===m,") {\n\n              if (").concat(v,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(d,") *\n                    getW(wR, wC, ").concat(d,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(d,", xR, xC) *\n                    getW(wR, wC, ").concat(d,", d2);\n              }\n\n            } else if (").concat(2===m,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(d,", d2),\n                getW(wR, wC, ").concat(d," + 1, d2)\n              );\n\n              if (").concat(v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(d,"),\n                  getX(batch, xR, xC, ").concat(d," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(d,", xR, xC),\n                  getX(batch, ").concat(d," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===m,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(d,", d2),\n                getW(wR, wC, ").concat(d," + 1, d2),\n                getW(wR, wC, ").concat(d," + 2, d2)\n              );\n\n              if (").concat(v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(d,"),\n                  getX(batch, xR, xC, ").concat(d," + 1),\n                  getX(batch, xR, xC, ").concat(d," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(d,", xR, xC),\n                  getX(batch, ").concat(d," + 1, xR, xC),\n                  getX(batch, ").concat(d," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(k,"\n        ").concat(w,"\n        setOutput(result);\n      }\n    ")})),dz=(0,C.Z)((function e(t){N(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,f=t.filterDepth,h=t.filterHeight,p=t.filterWidth,d=4*Math.floor(t.inChannels/4),m=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(f,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(d,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===m,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(d,") *\n                  getW(wF, wR, wC, ").concat(d,", d2);\n              } else if (").concat(2===m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(d,"),\n                  getX(batch, xF, xR, xC, ").concat(d," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(d,", d2),\n                  getW(wF, wR, wC, ").concat(d," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(d,"),\n                  getX(batch, xF, xR, xC, ").concat(d," + 1),\n                  getX(batch, xF, xR, xC, ").concat(d," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(d,", d2),\n                  getW(wF, wR, wC, ").concat(d," + 1, d2),\n                  getW(wF, wR, wC, ").concat(d," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),mz=(0,C.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];N(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=RM(this.outputShape.length);for(var o=t.padInfo.left,s=t.strideWidth,u=t.dilationWidth,c=t.filterHeight,l=t.filterWidth,f=l,h="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;",p=0;p<l;p++)h+="\n           vec4 xTexelC".concat(2*p,";\n           int xTexelC").concat(2*p,"Ready;\n           vec4 xTexelC").concat(2*p+1,";\n           int xTexelC").concat(2*p+1,"Ready;\n           vec4 xC").concat(p,";");h+="\n     for (int r = 0; r < ".concat(c,"; r++) {\n      for (int d1 = 0; d1 < ").concat(t.inChannels,"; d1 += 2) {\n       ");for(var d=0;d<l;d++)h+="\n           xTexelC".concat(2*d," = vec4(0.0);\n           xTexelC").concat(2*d,"Ready = 0;\n           xTexelC").concat(2*d+1," = vec4(0.0);\n           xTexelC").concat(2*d+1,"Ready = 0;\n           xC").concat(d," = vec4(0.0);");h+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(var m=0;m<(f+1)/2;m++){var v=2*m;if(h+="\n           xC = xCCorner + ".concat(v*u,";\n           "),1===s){if(v<l&&(o%2===1?(h+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                   xTexelC").concat(v," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(v,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(v,"Ready = 1;\n                 }\n               "),h+=1===u&&v>0?"\n                 xC".concat(v," = vec4(xTexelC").concat(v-2,".zw, xTexelC").concat(v,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(v," = vec4(previous.zw, xTexelC").concat(v,".xy);\n                   } else {\n                     xC").concat(v," = vec4(0.0, 0.0, xTexelC").concat(v,".xy);\n                   }\n                   ")):h+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                   xTexelC").concat(v," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(v,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(v,"Ready = 1;\n                 }\n\n                 xC").concat(v," = xTexelC").concat(v,";\n                 "),v+1<l)){var g=o%2===0?db(u):u;u%2===0&&o%2===1||u%2!==0&&o%2!==1?(h+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(g,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                     xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(v+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(v+1,"Ready = 1;\n                   }\n                   "),h+=u>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(v+1," = vec4(previous.zw, xTexelC").concat(v+1,".xy);\n                     } else {\n                      xC").concat(v+1," = vec4(0.0, 0.0, xTexelC").concat(v+1,".xy);\n                     }\n                     "):"\n                     xC".concat(v+1," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".xy);\n                     ")):h+=1===g?"\n                     xC".concat(v+1," = xTexelC").concat(v,";\n                     "):"\n                     xCOffset = xC + ".concat(g,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                       xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(v+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(v+1,"Ready = 1;\n                     }\n\n                     xC").concat(v+1," = xTexelC").concat(v+1,";\n                     ")}}else v<l&&(o%2===1?(h+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                   xTexelC").concat(v," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(v,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(v,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                   xTexelC").concat(v+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(v+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(v+1,"Ready = 1;\n                 }\n\n                 xC").concat(v," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".zw);\n               "),v+1<l&&(h+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(v+1," = vec4(xTexelC").concat(v+1,".xy, final.xy);\n                 "))):(h+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                   xTexelC").concat(v," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(v,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(v,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                   xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(v+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(v+1,"Ready = 1;\n                 }\n\n                 xC").concat(v," = vec4(\n                   xTexelC").concat(v,".xy, xTexelC").concat(v+1,".xy);\n               "),v+1<l&&(h+="\n                   xC".concat(v+1," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".zw);\n                 "))));v<l&&(h+="\n             wTexel = getW(r, ".concat(v,", d1, d2);\n             dotProd += xC").concat(v,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(t.inChannels,") {\n               dotProd += xC").concat(v,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),v+1<l&&(h+="\n               wTexel = getW(r, ".concat(v+1,", d1, d2);\n               dotProd += xC").concat(v+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(t.inChannels,") {\n                 dotProd += xC").concat(v+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}h+="\n     }\n   ",h+="\n     }\n   ",h+="\n     }\n   ";var y="",b="";r&&(y=a?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(r,"\n         }"):i?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(r,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(r,"\n         }"),b="result = activation(result);");var x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(y,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(h,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(x,"\n         ").concat(b,"\n         setOutput(result);\n       }\n     ")})),vz=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=RM(this.outputShape.length);for(var r=n.dataFormat,a=$O(),i="channelsLast"===r,o=i?1:2,s=i?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(t[2]," && pos < ").concat(t[1],") {"),c="",l=0;l<=1;l++)for(var f=0;f<=1;f++)c+="\n          blockIndex = rc.z + ".concat(f,";\n          pos = rc.y + ").concat(l,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+f,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+f,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function gz(e,t){var n=e.length;return n>=3?[].concat((0,I.Z)(e.slice(0,-3)),t?[e[n-3]*e[n-2],e[n-1]]:[e[n-3],e[n-2]*e[n-1]]):!t&&1===n&&e[0]>1?[e[0],1]:null}function yz(e){var t,n=e.x,r=e.filter,a=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,f=void 0===l?0:l,h=e.activation,p=void 0===h?null:h,d=n.shape,m=i.texData.get(n.dataId),v=a.inChannels,g=d[0]*d[1]*d[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[];if(null!=c){var w=gz(c.shape,b);null!=w&&(c=DP({inputs:{x:c},backend:i,attrs:{shape:w}}),x.push(c))}if(null!=s){var k=gz(s.shape,b);null!=k&&(s=DP({inputs:{x:s},backend:i,attrs:{shape:k}}),x.push(s))}if(!((1===g||1===y)&&v>1e3)&&m.isPacked&&b&&null!=m.texture&&d[2]%2!==0&&kb(m.shape.slice(-3),d.slice(-3))){var S=d[0]*d[1]*(d[2]+1),_={dataId:n.dataId,shape:[1,S,a.inChannels],dtype:n.dtype},T=m.shape;m.shape=m.shape.slice(),m.shape[m.shape.length-2]++,gb(HO(m.shape,_.shape),(function(){return"packed reshape ".concat(m.shape," to ").concat(_.shape," isn't free")}));var I=DP({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(I);var N=GP({a:_,b:I,backend:i,transposeA:!1,transposeB:false,bias:s,activation:p,preluActivationWeights:c,leakyreluAlpha:f}),C=i.texData.get(N.dataId);gb(C.isPacked,(function(){return"batchMatMul result is expected to be packed"})),m.shape=T,C.shape=a.outShape,(t=dP({inputs:{x:N},backend:i})).shape=a.outShape,x.push(N)}else{var E=a.outHeight*a.outWidth,A=DP({inputs:{x:n},backend:i,attrs:{shape:b?[a.batchSize,E,a.inChannels]:[a.batchSize,a.inChannels,E]}}),R=DP({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),O=GP({a:b?A:R,b:b?R:A,transposeA:!b,transposeB:false,backend:i,bias:s,activation:p,preluActivationWeights:c,leakyreluAlpha:f});t=DP({inputs:{x:O},backend:i,attrs:{shape:a.outShape}}),x.push(A),x.push(R),x.push(O)}for(var M=0,D=x;M<D.length;M++){var F=D[M];i.disposeIntermediateTensorInfo(F)}return t}function bz(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,u=void 0===s?null:s,c=e.leakyreluAlpha,l=void 0===c?0:c,f=e.activation,h=void 0===f?null:f,p=r.filterWidth,d=r.filterHeight,m=r.inChannels,v=r.outWidth,g=r.outHeight,y="channelsLast"===r.dataFormat,b=p*d*m,x=g*v,w=[r.batchSize,b,x],k=[];if(null!=u){var S=gz(u.shape,y);null!=S&&(u=DP({inputs:{x:u},backend:a,attrs:{shape:S}}),k.push(u))}if(null!=o){var _=gz(o.shape,y);null!=_&&(o=DP({inputs:{x:o},backend:a,attrs:{shape:_}}),k.push(o))}var T=DP({inputs:{x:n},backend:a,attrs:{shape:[1,b,wb(n.shape)/b]}});k.push(T);var I=new vz(w,r),N=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],C=a.runWebGLProgram(I,[t],"float32",N),E=DP({inputs:{x:C},backend:a,attrs:{shape:w}});k.push(C),k.push(E);var A=null!=o,R=null!=u,O="leakyrelu"===h,M=h?IP(h,!0):null,D=new NP(y?E.shape:T.shape,y?T.shape:E.shape,y?[r.batchSize,x,r.outChannels]:[r.batchSize,r.outChannels,x],!0,!1,A,M,R,O),F=y?[E,T]:[T,E];if(o&&F.push(o),R&&F.push(u),O){var P=a.makeTensorInfo([],"float32",pS(l,"float32"));F.push(P),k.push(P)}var L=a.runWebGLProgram(D,F,"float32"),z=DP({inputs:{x:L},backend:a,attrs:{shape:r.outShape}});k.push(L);for(var B=0,W=k;B<W.length;B++){var V=W[B];a.disposeIntermediateTensorInfo(V)}return z}var xz={kernelName:Cx,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dataFormat,l=a.dilations,f=a.dimRoundingMode,h=OI(c),p=wI(i.shape,o.shape,s,l,u,f,!1,h);if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(p.strideWidth<=2&&"channelsLast"===h&&$b().getBool("WEBGL_EXP_CONV")){var d=new mz(p),m=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];t=r.runWebGLProgram(d,[i,o],"float32",m)}else if($b().getBool("WEBGL_CONV_IM2COL"))t=bz({x:i,filter:o,convInfo:p,backend:r});else{var v=new pz(p);t=r.runWebGLProgram(v,[i,o],"float32")}else t=yz({x:i,filter:o,convInfo:p,backend:r});var g=DP({inputs:{x:t},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(t),g}},wz=(0,C.Z)((function e(t){N(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(o,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),kz=(0,C.Z)((function e(t){N(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=o?1:2,l=o?2:3,f=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(f,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),Sz=(0,C.Z)((function e(t){N(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),_z=(0,C.Z)((function e(t){N(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var Tz={kernelName:Ex,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape,f=OI(u),h=wI(a.shape,l,o,1,s,c,!1,f),p=new wz(h);return n.runWebGLProgram(p,[a,i],"float32")}};var Iz={kernelName:Ax,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode,f=OI(c),h=wI(o,i.shape,s,1,u,l,!1,f),p=new kz(h);return n.runWebGLProgram(p,[a,i],"float32")}};var Nz={kernelName:Rx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=kI(a.shape,i.shape,o,u,s),l=new dz(c);return n.runWebGLProgram(l,[a,i],"float32")}};var Cz={kernelName:"Conv3DBackpropFilterV2",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape,c=kI(a.shape,u,o,1,s),l=new Sz(c);return n.runWebGLProgram(l,[a,i],"float32")}};var Ez,Az={kernelName:Ox,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=kI(r.inputShape,i.shape,s,1,o),c=new _z(u);return n.runWebGLProgram(c,[a,i],"float32")}},Rz={kernelName:"Cos",backendName:"webgl",kernelFunc:_P({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"})},Oz=_P({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),Mz={kernelName:Mx,backendName:"webgl",kernelFunc:Oz},Dz=(0,C.Z)((function e(t,n,r,a,i){N(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=(0,T.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3],f=(0,T.Z)(n,1)[0],h=(0,T.Z)(r,2),p=h[0],d=h[1];this.outputShape=[f,p,d,l];var m="bilinear"===a?1:0,v="".concat(u-1,".0"),g="".concat(c-1,".0"),y=p>1?["".concat((u-1)/(p-1)),"(y2-y1) * height_ratio","y1*".concat(v," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(v)],b=(0,T.Z)(y,3),x=b[0],w=b[1],k=b[2],S=d>1?["".concat((c-1)/(d-1)),"(x2-x1) * width_ratio","x1*".concat(g," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(g)],_=(0,T.Z)(S,3),I=_[0],C=_[1],E=_[2];this.userCode="\n      const float height_ratio = float(".concat(x,");\n      const float width_ratio = float(").concat(I,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(w,";\n        float width_scale = ").concat(C,";\n\n        float in_y = ").concat(k,";\n        if( in_y < 0.0 || in_y > ").concat(v," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(E,";\n        if( in_x < 0.0 || in_x > ").concat(g," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(m," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),Fz={kernelName:Px,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new Dz(a.shape,i.shape,s,u,c);return n.runWebGLProgram(l,[a,i,o],"float32")}};!function(e){e.Prod="*",e.Sum="+"}(Ez||(Ez={}));var Pz=(0,C.Z)((function e(t,n,r,a){N(this,e),this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];var i=this.outputShape.length,o=this.op===Ez.Prod?"1.0":"0.0",s=r?o:"getX(".concat(Lz(i,"coords",this.op),")"),u=this.outputShape[this.outputShape.length-1],c="",l="";r?(c=a?"end != ".concat(u-1):"end != 0",l=a?"end + 1":"end - 1"):(c=a?"end + pow2 < ".concat(u):"end >= pow2",l=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(kM(i)," coords = getOutputCoords();\n        int end = ").concat(zz(i,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(c,") {\n          int idx = ").concat(l,";\n          ").concat(zz(i,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(Lz(i,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}));function Lz(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function zz(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function Bz(e,t,n,r,a,i){var o=t.shape.length,s=FN([r],o),u=t;null!=s&&(u=HP({inputs:{x:t},backend:n,attrs:{perm:s}}));var c=LN(1,o)[0];if(c!==o-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));for(var l=u.shape[c],f=dP({inputs:{x:u},backend:n}),h=0;h<=Math.ceil(Math.log2(l))-1;h++){var p=new Pz(e,u.shape,!1,i),d=[[h]],m=f;f=n.runWebGLProgram(p,[f],f.dtype,d),n.disposeIntermediateTensorInfo(m)}if(a){var v=new Pz(e,u.shape,a,i),g=f;f=n.runWebGLProgram(v,[f],f.dtype),n.disposeIntermediateTensorInfo(g)}if(null!=s){var y=HP({inputs:{x:f},backend:n,attrs:{perm:PN(s)}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(u),y}return f}var Wz={kernelName:Dx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return Bz(Ez.Prod,a,n,i,o,s)}};var Vz={kernelName:Fx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return Bz(Ez.Sum,a,n,i,o,s)}};var jz={kernelName:Lx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=qD(u,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}if(2===a.shape.length){var f=n.bufferSync(a),h=n.bufferSync(i),p=KD(f,h,o,s);return n.makeTensorInfo(p.shape,i.dtype,p.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},Uz=function(){function e(t,n,r){N(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return(0,C.Z)(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var Hz={kernelName:zx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,c=("NHWC"===o?a.shape[2]:a.shape[3])*i,l=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),f=new Uz("NHWC"===o?[s,u,c,l]:[s,l,u,c],i,o);return n.runWebGLProgram(f,[a],a.dtype)}},Zz=(0,C.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];N(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=RM(this.outputShape.length);var o=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,c="",l="";r&&(c=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),l="result = activation(result);");var f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(f,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")})),Gz=(0,C.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];N(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=RM(this.outputShape.length);for(var o=t.outChannels/t.inChannels,s=t.padInfo.left,u=t.strideWidth,c=t.dilationWidth,l=t.filterHeight,f=t.filterWidth,h=f,p="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",d=0;d<f;d++)p+="\n          vec4 xTexelC".concat(2*d,";\n          int xTexelC").concat(2*d,"Ready;\n          vec4 xTexelC").concat(2*d+1,";\n          int xTexelC").concat(2*d+1,"Ready;\n          vec4 xC").concat(d,";");p+="\n    for (int r = 0; r < ".concat(l,"; r++) {\n      ");for(var m=0;m<f;m++)p+="\n          xTexelC".concat(2*m," = vec4(0.0);\n          xTexelC").concat(2*m,"Ready = 0;\n          xTexelC").concat(2*m+1," = vec4(0.0);\n          xTexelC").concat(2*m+1,"Ready = 0;\n          xC").concat(m," = vec4(0.0);");p+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var v=0;v<(h+1)/2;v++){var g=2*v;if(p+="\n          xC = xCCorner + ".concat(g*c,";\n          "),1===u){if(g<f&&(s%2===1?(p+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n              "),p+=1===c&&g>0?"\n                xC".concat(g," = vec4(xTexelC").concat(g-2,".zw, xTexelC").concat(g,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(g," = vec4(previous.zw, xTexelC").concat(g,".xy);\n                  } else {\n                    xC").concat(g," = vec4(0.0, 0.0, xTexelC").concat(g,".xy);\n                  }\n                  ")):p+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                xC").concat(g," = xTexelC").concat(g,";\n                "),g+1<f)){var y=s%2===0?db(c):c;c%2===0&&s%2===1||c%2!==0&&s%2!==1?(p+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                    xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(g+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(g+1,"Ready = 1;\n                  }\n                  "),p+=c>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(g+1," = vec4(previous.zw, xTexelC").concat(g+1,".xy);\n                    } else {\n                     xC").concat(g+1," = vec4(0.0, 0.0, xTexelC").concat(g+1,".xy);\n                    }\n                    "):"\n                    xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".xy);\n                    ")):p+=1===y?"\n                    xC".concat(g+1," = xTexelC").concat(g,";\n                    "):"\n                    xCOffset = xC + ".concat(y,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                      xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(g+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(g+1,"Ready = 1;\n                    }\n\n                    xC").concat(g+1," = xTexelC").concat(g+1,";\n                    ")}}else g<f&&(s%2===1?(p+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                  xTexelC").concat(g+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(g+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g+1,"Ready = 1;\n                }\n\n                xC").concat(g," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n              "),g+1<f&&(p+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(g+1," = vec4(xTexelC").concat(g+1,".xy, final.xy);\n                "))):(p+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                  xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(g+1,"Ready = 1;\n                }\n\n                xC").concat(g," = vec4(\n                  xTexelC").concat(g,".xy, xTexelC").concat(g+1,".xy);\n              "),g+1<f&&(p+="\n                  xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n                "))));g<f&&(p+="\n            wTexel = getW(r, ".concat(g,", d1, q);\n            dotProd += xC").concat(g," * vec4(wTexel.xz, wTexel.xz);\n          "),g+1<f&&(p+="\n              wTexel = getW(r, ".concat(g+1,", d1, q);\n              dotProd += xC").concat(g+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}p+="\n    }\n  ",p+="\n      }\n    ";var b="",x="";r&&(b=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),x="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(p,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(w,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}));var qz={kernelName:Bx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode,l=u;null==l&&(l=[1,1]),gb(RI(o,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(l,"'")}));var f,h=wI(a.shape,i.shape,o,l,s,c,!0);f=$b().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?new Gz(h):new Zz(h);var p=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(f,[a,i],"float32",p)}},Kz=(0,C.Z)((function e(t){N(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),Xz=(0,C.Z)((function e(t){N(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var Yz={kernelName:Wx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape,f=wI(a.shape,l,o,s,u,c,!0),h=new Kz(f);return n.runWebGLProgram(h,[a,i],"float32")}};var $z={kernelName:Vx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=wI(r.inputShape,i.shape,o,s,u,c,!0),f=new Xz(l);return n.runWebGLProgram(f,[a,i],"float32")}},Qz=(0,C.Z)((function e(t){N(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var Jz={kernelName:jx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat((0,I.Z)(r.shape),(0,I.Z)(r.shape)),i=wb(r.shape),o=DP({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new Qz(i),u=n.runWebGLProgram(s,[o],o.dtype),c=DP({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),c}},eB=(0,C.Z)((function e(t){N(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,f=a.top,h=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(f,", ").concat(h,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var tB={kernelName:Ux,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dilations,l=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0,o=e[3],s=[].concat((0,I.Z)(t),[o]),u=OI(a);return wI(e,s,n,i,r,null,null,u)}(i.shape,o.shape,s,u,"NHWC",c),f=new eB(l),h=DP({inputs:{x:t=r.runWebGLProgram(f,[i,o],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),h}};var nB={kernelName:Zx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=function(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(rO,"").length)/nO.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(nO,'").'));var r=e.split(nO),a=(0,T.Z)(r,2),i=a[0],o=a[1];gb(-1===i.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var s=i.split(","),u=s.length;if(t!==u)throw new Error("Expected ".concat(u," input tensors, received ").concat(t));if(u>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var c=[],l=function(e){var t=o[e];if(!s.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," ")+"not present in the input subscripts.");-1===c.indexOf(t)&&c.push(t)},f=0;f<o.length;++f)l(f);for(var h=0;h<i.length;++h){var p=i[h];-1===c.indexOf(p)&&","!==p&&c.push(p)}for(var d=new Array(s.length),m=0;m<u;++m){if(new Set(s[m].split("")).size!==s[m].length)throw new Error("Found duplicate axes in input component ".concat(s[m],". ")+"Support for duplicate axes in input is not implemented yet.");d[m]=[];for(var v=0;v<s[m].length;++v)d[m].push(c.indexOf(s[m][v]))}for(var g=c.length,y=[],b=o.length;b<g;++b)y.push(b);return{allDims:c,summedDims:y,idDims:d}}(e.attrs.equation,r.length),i=a.allDims,o=a.summedDims,s=a.idDims;!function(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,i=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:gb(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},o=0;o<t[e].length;++o)i(o)},i=0;i<n.length;++i)a(i)}(i.length,s,r);for(var u=function(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var i=0;i<n;++i)a.push([]);for(var o=[],s=0;s<r.length;++s){var u,c=Oo(oO(t,r[s]));try{for(c.s();!(u=c.n()).done;){var l=u.value;-1===o.indexOf(l)&&(a[s].push(l),o.push(l))}}catch(cBe){c.e(cBe)}finally{c.f()}}return{path:r,steps:a}}(o,s),c=u.path,l=u.steps,f=l.length,h=null,p=i.length,d=[],m=0;m<f;++m){var v,g=Oo(l[m]);try{for(g.s();!(v=g.n()).done;){var y=v.value,b=aO(p,s[y]),x=b.permutationIndices,w=b.expandDims,k=void 0;iO(x)?k=r[y]:(k=HP({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),d.push(k));for(var S=k.shape.slice(),_=0;_<w.length;++_)S.splice(w[_],0,1);kb(k.shape,S)||(k=DP({inputs:{x:k},backend:n,attrs:{shape:S}}),d.push(k)),null===h?h=k:(h=OP({inputs:{a:k,b:h},backend:n}),d.push(h))}}catch(cBe){g.e(cBe)}finally{g.f()}m<f-1&&(c[m]>=0&&(h=jP({inputs:{x:h},backend:n,attrs:{axis:c[m]-(i.length-p),keepDims:!1}}),d.push(h)),p--)}for(var I=0,N=d;I<N.length;I++){var C=N[I];C!==h&&n.disposeIntermediateTensorInfo(C)}return h}},rB={kernelName:"Elu",backendName:"webgl",kernelFunc:_P({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"})},aB={kernelName:"EluGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=$b().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pP("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new hP("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},iB=TP({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:QD}),oB={kernelName:Gx,backendName:"webgl",kernelFunc:iB},sB={kernelName:"Erf",backendName:"webgl",kernelFunc:_P({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(.3275911,";\n  float a1 = ").concat(.254829592,";\n  float a2 = ").concat(-.284496736,";\n  float a3 = ").concat(1.421413741,";\n  float a4 = ").concat(-1.453152027,";\n  float a5 = ").concat(1.061405429,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")})},uB=_P({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:JD,dtype:"float32"}),cB={kernelName:qx,backendName:"webgl",kernelFunc:uB};function lB(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),u=a;return a<0&&(gb(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+a+1),s.splice(u,0,1),DP({inputs:{x:i},backend:r,attrs:{shape:s}})}var fB={kernelName:Kx,backendName:"webgl",kernelFunc:lB},hB="return exp(x) - 1.0;",pB=_P({opSnippet:hB,packedOpSnippet:hB,cpuKernelImpl:eF}),dB={kernelName:Xx,backendName:"webgl",kernelFunc:pB},mB=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function vB(e,t,n){var r=n.texData.get(e.dataId),a=wb(e.shape),i=e.shape[e.shape.length-1],o=DP({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),s=o.shape,u=new mB("real",s,t),c=new mB("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],f=n.runWebGLProgram(u,l,"float32"),h=n.runWebGLProgram(c,l,"float32"),p=vP({inputs:{real:f,imag:h},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h);var d=DP({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(p),d}var gB={kernelName:"FFT",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return vB(t.input,!1,n)}},yB=(0,C.Z)((function e(t,n){N(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function bB(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||Fb(a))){var o=Ab(i,wb(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new yB(r,a),u=[[a]];return t.runWebGLProgram(s,[],i,u)}var xB,wB={kernelName:Yx,backendName:"webgl",kernelFunc:bB},kB=(0,C.Z)((function e(t){N(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),SB={kernelName:$x,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new kB(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},_B="return floor(x);",TB=_P({opSnippet:_B,packedOpSnippet:_B,cpuKernelImpl:tF}),IB={kernelName:Qx,backendName:"webgl",kernelFunc:TB},NB=TP({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),CB={kernelName:Jx,backendName:"webgl",kernelFunc:NB},EB=(0,C.Z)((function e(t){N(this,e),this.variableNames=["A"];var n=$O(),r=(0,T.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),AB=(0,C.Z)((function e(t){N(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=$O(),r=(0,T.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),RB={kernelName:Lk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,u=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=(0,T.Z)(u,2),l=c[0],f=c[1],h=[f,l],p=[f,l,i];if(s||o){var d=$b().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=xB&&d===OB||(OB=d,xB=document.createElement("canvas").getContext("2d",{willReadFrequently:OB})),xB.canvas.width=l,xB.canvas.height=f,xB.drawImage(a,0,0,l,f),a=xB.canvas}var m=n.makeTensorInfo(h,"int32");n.texData.get(m.dataId).usage=dO.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(m.dataId),a);var v=$b().getBool("WEBGL_PACK")?new AB(p):new EB(p),g=n.runWebGLProgram(v,[m],"int32");return n.disposeData(m.dataId),g}},OB=$b().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");var MB={kernelName:Wk,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=n.bias,u=n.preluActivationWeights,c=a.strides,l=a.pad,f=a.dataFormat,h=a.dilations,p=a.dimRoundingMode,d=a.activation,m=a.leakyreluAlpha,v=OI(f),g=wI(i.shape,o.shape,c,h,l,p,!1,v),y=[],b=null!=s,x=null!=u,w="leakyrelu"===d,k=function(){var e=[i,o],t=function(e,t){if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){var n=DP({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return y.push(n),n}return e};if(b&&e.push(t(s,f)),x&&e.push(t(u,f)),w){var n=r.makeTensorInfo([],"float32",pS(m,"float32"));e.push(n),y.push(n)}return e};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===v&&$b().getBool("WEBGL_EXP_CONV")){var S=d?IP(d,!0):null,_=new mz(g,b,S,x,w),T=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],I=k();t=r.runWebGLProgram(_,I,"float32",T)}else if($b().getBool("WEBGL_CONV_IM2COL"))t=bz({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:d,preluActivationWeights:u,leakyreluAlpha:m});else{var N=d?IP(d,!1):null,C=new pz(g,b,N,x,w),E=k();t=r.runWebGLProgram(C,E,"float32")}else t=yz({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:d,preluActivationWeights:u,leakyreluAlpha:m});var A=DP({inputs:{x:t},backend:r,attrs:{shape:g.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),A}};var DB={kernelName:Vk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dilations,f=r.dimRoundingMode,h=r.activation,p=r.leakyreluAlpha,d=[],m=l;null==m&&(m=[1,1]),gb(RI(u,m),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(m,"'")}));var v,g=wI(a.shape,i.shape,u,m,c,f,!0),y=$b().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=h?IP(h,y):null,x=[a,i],w=null!=o,k=null!=s,S="leakyrelu"===h;if(w&&x.push(o),k&&x.push(s),S){var _=n.makeTensorInfo([],"float32",pS(p,"float32"));x.push(_),d.push(_)}v=y?new Gz(g,w,b,k,S):new Zz(g,w,b,k,S);var T=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],I=n.runWebGLProgram(v,x,"float32",T);return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),I}},FB=(0,C.Z)((function e(t,n,r,a){N(this,e),this.sliceDim=t,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;for(var i=kM(r.length),o="\n    int index;",s=0;s<this.sliceDim;s++)o+="\n          index = round(getIndices(coords[0], ".concat(s,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[s],";\n          flattenIndex += index * ").concat(this.strides[s],";");this.userCode="\n         void main() {\n          ".concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(o,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}));var PB={kernelName:nw,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=wb(r.shape),u=function(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===wb(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,f=i;f<n;++f)l*=u[f],c.push(u[f]);var h=[].concat((0,I.Z)(zb(e.shape).map((function(e){return e/l}))),[1]).slice(0,i);return[c,o,l,h]}(r,a),c=(0,T.Z)(u,4),l=c[0],f=c[1],h=c[2],p=c[3],d=DP({inputs:{x:a},backend:n,attrs:{shape:[f,o]}}),m=DP({inputs:{x:r},backend:n,attrs:{shape:[wb(r.shape)/h,h]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var v=n.readSync(a.dataId),g=n.bufferSync(r),y=nF(v,g,r.dtype,f,o,h,p,r.shape,s);return n.makeTensorInfo(l,r.dtype,y.values)}var b=new FB(o,p,[f,h],r.shape),x=n.runWebGLProgram(b,[m,d],m.dtype),w=DP({inputs:{x:x},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(x),w}},LB=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=kM(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function zB(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,u=Nb(o,a.shape)[0];$b().get("DEBUG")&&function(){for(var e=n.readSync(i.dataId),t=a.shape[u],r=function(n){var r=e[n];gb(r<=t-1&&r>=0,(function(){return"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")}))},o=0;o<e.length;++o)r(o)}();var c=function(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],c=1,l=1,f=1,h=0;h<r;++h)u.push(e.shape[h]),c*=e.shape[h];for(var p=r;p<n;p++)u.push(e.shape[p]),l*=e.shape[p];for(var d=r;d<a;d++)u.push(t.shape[d]);for(var m=n+1;m<i;m++)u.push(e.shape[m]),f*=e.shape[m];return{batchSize:c,sliceSize:f,outerSize:l,dimSize:s,outputShape:u}}(a,i,u,s),l=wb(i.shape),f=[],h=DP({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=DP({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,l/c.batchSize]}});f.push(h),f.push(p);var d=[c.batchSize,c.outerSize,l/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var m=n.bufferSync(p),v=n.bufferSync(h),g=rF(v,m,d);return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(c.outputShape,g.dtype,g.values)}var y=new LB(h.shape,d),b=n.runWebGLProgram(y,[h,p],h.dtype);f.push(b);var x=DP({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}var BB={kernelName:tw,backendName:"webgl",kernelFunc:zB},WB=TP({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:aF,dtype:"bool"}),VB={kernelName:rw,backendName:"webgl",kernelFunc:WB},jB=TP({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:iF}),UB={kernelName:aw,backendName:"webgl",kernelFunc:jB};var HB={kernelName:ow,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return vB(t.input,!0,n)}},ZB=_P({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),GB={kernelName:uw,backendName:"webgl",kernelFunc:ZB},qB=_P({opSnippet:"return float(isinf(x));",dtype:"bool"}),KB={kernelName:cw,backendName:"webgl",kernelFunc:qB},XB=_P({opSnippet:"return float(isnan(x));",dtype:"bool"}),YB={kernelName:lw,backendName:"webgl",kernelFunc:XB},$B=TP({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:oF,dtype:"bool"}),QB={kernelName:hw,backendName:"webgl",kernelFunc:$B},JB=TP({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:sF,dtype:"bool"}),eW={kernelName:pw,backendName:"webgl",kernelFunc:JB};var tW={kernelName:dw,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=uF(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},nW=_P({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:cF}),rW={kernelName:mw,backendName:"webgl",kernelFunc:nW},aW=_P({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),iW={kernelName:vw,backendName:"webgl",kernelFunc:aW},oW=TP({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),sW={kernelName:gw,backendName:"webgl",kernelFunc:oW},uW=_P({opSnippet:"return float(!(x >= 1.0));"}),cW={kernelName:yw,backendName:"webgl",kernelFunc:uW},lW=TP({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),fW={kernelName:bw,backendName:"webgl",kernelFunc:lW},hW=(0,C.Z)((function e(t,n,r,a,i){N(this,e),this.variableNames=["x"],this.outputShape=[];var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")})),pW=(0,C.Z)((function e(t,n,r,a,i){N(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")})),dW={kernelName:xw,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta,c=$b().getBool("WEBGL_PACK_NORMALIZATION")?new pW(a.shape,i,o,s,u):new hW(a.shape,i,o,s,u);return n.runWebGLProgram(c,[a],a.dtype)}},mW=(0,C.Z)((function e(t,n,r,a,i){N(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),vW={kernelName:"LRNGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta,f=new mW(a.shape,s,u,c,l);return n.runWebGLProgram(f,[a,i,o],a.dtype)}};function gW(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=a.shape.length,u=Nb(i,a.shape),c=u,l=FN(c,s),f=null!=l,h=n.shouldExecuteOnCPU([a]),p=a;if(f){if(h){for(var d=n.texData.get(p.dataId).values,m=new Array(s),v=0;v<m.length;v++)m[v]=a.shape[l[v]];var g=PF(d,a.shape,a.dtype,l,m);p=n.makeTensorInfo(m,a.dtype),n.texData.get(p.dataId).values=g}else p=VP(a,l,n);c=LN(c.length,s)}DN("max",c,s);var y,b=ON(p.shape,c),x=(0,T.Z)(b,2),w=x[0],k=x[1],S=w;if(o&&(S=MN(w,u)),h){d=n.texData.get(p.dataId).values;var _=lF(d,wb(k),S,a.dtype);y=n.makeTensorInfo(S,a.dtype),n.texData.get(y.dataId).values=_}else y=function(e,t,n,r){var a=wb(t),i=DP({inputs:{x:e},attrs:{shape:[wb(e.shape)/a,a]},backend:r}),o=zP(i,e.dtype,"max",r),s=DP({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(p,k,S,n);return f&&n.disposeIntermediateTensorInfo(p),y}var yW={kernelName:ww,backendName:"webgl",kernelFunc:gW},bW=TP({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:fF}),xW={kernelName:kw,backendName:"webgl",kernelFunc:bW};var wW={kernelName:Sw,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;XO(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;gb(RI(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=bI(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&kb(c.inShape,c.outShape))return dP({inputs:{x:a},backend:n});var l=new TL(c,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}};var kW={kernelName:_w,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=xI(a.shape,i,o,[1,1,1],s,c,u),f=new IL(l,"max",!1);return n.runWebGLProgram(f,[a],a.dtype)}},SW=(0,C.Z)((function e(t){N(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,u=o-1-t.padInfo.left,c=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),_W=(0,C.Z)((function e(t){N(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,f=u-1-t.padInfo.front,h=c-1-t.padInfo.top,p=l-1-t.padInfo.left,d=u*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(f,", ").concat(h,", ").concat(p,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(d," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var TW={kernelName:"MaxPool3DGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=xI(i.shape,o,s,[1,1,1],u,c),f=new IL(l,"max",!0),h=n.runWebGLProgram(f,[i],i.dtype),p=new _W(l),d=n.runWebGLProgram(p,[a,h],i.dtype);return n.disposeIntermediateTensorInfo(h),d}};var IW={kernelName:"MaxPoolGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;XO([i,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,f=bI(o.shape,s,u,1,c,l),h=new TL(f,"max",!0),p=n.runWebGLProgram(h,[o],o.dtype),d=new SW(f),m=n.runWebGLProgram(d,[a,p],o.dtype);return n.disposeIntermediateTensorInfo(p),m}};var NW={kernelName:Tw,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;gb(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var l=[1,1];gb(RI(o,l),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(l,"'")}));var f=bI(a.shape,i,o,l,s),h=function(e,t,n,r){var a=new TL(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new TL(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,u,f,c),p=(0,T.Z)(h,2);return[p[0],p[1]]}};var CW={kernelName:Iw,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.keepDims,o=n.axis,s=r,u=a.shape.length,c=Nb(o,a.shape),l=c,f=FN(l,u),h=null!=f,p=s.shouldExecuteOnCPU([a]),d=[],m=a;if(h){if(p){for(var v=s.texData.get(m.dataId).values,g=new Array(u),y=0;y<g.length;y++)g[y]=a.shape[f[y]];var b=PF(v,a.shape,a.dtype,f,g);m=s.makeTensorInfo(g,a.dtype),s.texData.get(m.dataId).values=b}else m=VP(a,f,s);d.push(m),l=LN(l.length,u)}DN("sum",l,u);var x=ON(m.shape,l),w=(0,T.Z)(x,2),k=w[0],S=w[1],_=k;i&&(_=MN(k,c));for(var I=function(e,t,n,r){var a=wb(t),i=DP({inputs:{x:e},attrs:{shape:[wb(e.shape)/a,a]},backend:r}),o=zP(i,"float32","mean",r),s=DP({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(m,S,_,s),N=0,C=d;N<C.length;N++){y=C[N];s.disposeIntermediateTensorInfo(y)}return I}};var EW={kernelName:Nw,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=Nb(i,a.shape),c=u,l=FN(c,s),f=a;null!=l&&(f=HP({inputs:{x:a},backend:n,attrs:{perm:l}}),c=LN(c.length,a.shape.length)),DN("min",c,s);var h,p=ON(f.shape,c),d=(0,T.Z)(p,2),m=d[0],v=DP({inputs:{x:f},backend:n,attrs:{shape:[-1,wb(d[1])]}}),g=zP(v,v.dtype,"min",n);return h=DP(o?{inputs:{x:g},backend:n,attrs:{shape:MN(m,u)}}:{inputs:{x:g},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(f),h}},AW=TP({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:hF}),RW={kernelName:Cw,backendName:"webgl",kernelFunc:AW},OW=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=kM(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),MW=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=kM(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=BF("rc",a),c=BF("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),f=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),h="reflect"===r?0:1,p="";if(1===a){var d="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(h,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(h,";\n        }\n        source -= start;\n      ");p="\n        ".concat(i," rc = outputLoc;\n        ").concat(d,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(d,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        }\n      ")}else{var m="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(h,") +\n                gte * ((end - 1) * 2 - source + ").concat(h,");\n        source -= start;\n      ");p="\n        ".concat(i," rc = outputLoc;\n        ").concat(m,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(m,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(m,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(m,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),DW={kernelName:Ew,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=$b().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new MW(a.shape,i,o):new OW(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},FW={kernelName:"Mod",backendName:"webgl",kernelFunc:TP({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"})},PW=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),LW=TP({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),zW={kernelName:Hx,backendName:"webgl",kernelFunc:LW},BW="return a - b;",WW=TP({opSnippet:BW,packedOpSnippet:BW,supportsComplex:!0,cpuKernelImpl:MF}),VW={kernelName:Ik,backendName:"webgl",kernelFunc:WW};function jW(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=Nb([r.dim],a.shape),o=gW({inputs:{x:a},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),s=MN(o.shape,i),u=DP({inputs:{x:o},backend:n,attrs:{shape:s}}),c=WW({inputs:{a:a,b:u},backend:n}),l=uB({inputs:{x:c},backend:n}),f=jP({inputs:{x:l},backend:n,attrs:{axis:i,keepDims:!1}}),h=DP({inputs:{x:f},backend:n,attrs:{shape:s}}),p=LW({inputs:{a:l,b:h},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}var UW={kernelName:mk,backendName:"webgl",kernelFunc:jW};var HW={kernelName:Aw,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,u=s?a:jW({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],l=u.shape[1],f=new PW(c,l,i),h=[[o]],p=n.runWebGLProgram(f,[u],"int32",h);return s||n.disposeIntermediateTensorInfo(u),p}};var ZW={kernelName:Ow,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=dF(i.values,a.shape,a.dtype),s=(0,T.Z)(o,2),u=s[0],c=s[1];return r.makeTensorInfo(c,a.dtype,u)}return t=$b().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new oP(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new GF(a.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[a],a.dtype)}},GW=KA;var qW={kernelName:Dw,backendName:"webgl",kernelFunc:function(e){jk("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(i.dataId),f=GW(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}},KW=XA;var XW={kernelName:Fw,backendName:"webgl",kernelFunc:function(e){jk("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize,l=n.readSync(a.dataId),f=n.readSync(i.dataId),h=KW(l,f,o,s,u,c),p=h.selectedIndices,d=h.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}},YW=YA;var $W={kernelName:Pw,backendName:"webgl",kernelFunc:function(e){jk("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),f=n.readSync(i.dataId),h=YW(l,f,o,s,u,c),p=h.selectedIndices,d=h.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([d.length],"float32",new Float32Array(d))]}},QW=(0,C.Z)((function e(t,n,r,a){N(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),JW={kernelName:zw,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.dtype,o=r.depth,s=r.onValue,u=r.offValue,c=wb(a.shape),l=new QW(c,o,s,u),f=DP({inputs:{x:a},backend:n,attrs:{shape:[c]}}),h=n.runWebGLProgram(l,[f],i);n.disposeIntermediateTensorInfo(f);var p=DP({inputs:{x:h},backend:n,attrs:{shape:[].concat((0,I.Z)(a.shape),[o])}});return n.disposeIntermediateTensorInfo(h),p}};function eV(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=qL({inputs:{input:r},backend:n}),i=eV({inputs:{x:a},backend:n}),o=uz({inputs:{input:r},backend:n}),s=eV({inputs:{x:o},backend:n}),u=vP({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return bB({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var tV={kernelName:Fk,backendName:"webgl",kernelFunc:eV};var nV={kernelName:Lw,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=qL({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=uz({inputs:{input:a},backend:r}),u=eV({inputs:{x:s},backend:r}),c=vP({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return bB({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var rV={kernelName:Bw,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return lB({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){yb(a,e.shape,"All tensors passed to stack must have matching shapes"),gb(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=fz({inputs:t.map((function(e){var t=lB({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},aV=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=kM(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),iV=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=kM(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=BF("rc",a),c=BF("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),f=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),h=["".concat(i," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(l,") {")],p=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",d="",m=0,v=1===a?2:4;m<v;m++)d+="\n        ".concat(h[m],"\n        if (").concat(p,") {\n          result[").concat(m,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(m,"] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        }\n      ");d+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(d,"\n        setOutput(result);\n      }\n    ")})),oV=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(0===wb(a.shape))return bB({backend:n,attrs:{shape:i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),value:o,dtype:a.dtype}});var s=$b().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new iV(a.shape,i,o):new aV(a.shape,i,o),u=[[o]];return n.runWebGLProgram(s,[a],a.dtype,u)},sV={kernelName:Ww,backendName:"webgl",kernelFunc:oV},uV={kernelName:"Pow",backendName:"webgl",kernelFunc:TP({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"})};var cV={kernelName:jw,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims,u=i.shape.length,c=[],l=Nb(o,i.shape),f=l,h=FN(f,u),p=i;if(null!=h&&(p=HP({inputs:{x:i},backend:r,attrs:{perm:h}}),f=LN(f.length,u),c.push(p)),DN("prod",f,u),r.shouldExecuteOnCPU([p])){var d=r.texData.get(p.dataId).values,m=vF(p.shape,p.dtype,d,f),v=m.outVals,g=m.outShape,y=m.outDtype;t=r.makeTensorInfo(g,y,v)}else{var b=ON(p.shape,f),x=(0,T.Z)(b,2),w=x[0],k=wb(x[1]),S=DP({inputs:{x:p},backend:r,attrs:{shape:[-1,k]}}),_=zP(S,BS(i.dtype),"prod",r);t=DP({inputs:{x:_},backend:r,attrs:{shape:w}}),c.push(S),c.push(_)}if(s){c.push(t);var I=MN(t.shape,l);t=DP({inputs:{x:t},backend:r,attrs:{shape:I}})}return c.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}};var lV={kernelName:Uw,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.paramsNestedSplits,i=t.paramsDenseValues,o=t.indices,s=r.outputRaggedRank,u=a.map((function(e){return n.readSync(e.dataId)})),c=a.map((function(e){return e.shape})),l=n.readSync(i.dataId),f=n.readSync(o.dataId),h=gF(u,c,l,i.shape,i.dtype,f,o.shape,s),p=(0,T.Z)(h,3),d=p[0],m=p[1],v=p[2],g=d.map((function(e){return n.makeTensorInfo([e.length],"int32",e)})),y=n.makeTensorInfo(v,i.dtype,m);return g.concat([y])}};var fV={kernelName:Hw,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.shape,i=t.values,o=t.defaultValue,s=t.rowPartitionTensors,u=r.rowPartitionTypes,c=n.readSync(a.dataId),l=n.readSync(i.dataId),f=n.readSync(o.dataId),h=s.map((function(e){return n.readSync(e.dataId)})),p=s.map((function(e){return e.shape})),d=yF(c,a.shape,l,i.shape,i.dtype,f,o.shape,h,p,u),m=(0,T.Z)(d,2),v=m[0],g=m[1];return n.makeTensorInfo(v,i.dtype,g)}},hV=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=bF(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},pV={kernelName:Zw,backendName:"webgl",kernelFunc:hV},dV=_P({opSnippet:"return 1.0 / x;"}),mV={kernelName:qw,backendName:"webgl",kernelFunc:dV},vV=_P({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),gV={kernelName:Kw,backendName:"webgl",kernelFunc:vV},yV=_P({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),bV={kernelName:Qw,backendName:"webgl",kernelFunc:yV},xV=(0,C.Z)((function e(t,n,r,a,i){N(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,T.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var f,h=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),wV=(0,C.Z)((function e(t,n,r,a,i){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,T.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var f,h=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],",\n          ").concat(h[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var kV={kernelName:$w,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,u=(0,T.Z)(s,2),c=u[0],l=u[1],f=$b().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new wV(a.shape,c,l,i,o):new xV(a.shape,c,l,i,o);return n.runWebGLProgram(f,[a],"float32")}},SV=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,T.Z)(n,3),i=a[1],o=a[2],s=(0,T.Z)(t,3),u=s[1],c=s[2],l=[r&&u>1?i-1:i,r&&c>1?o-1:o],f=[r&&u>1?u-1:u,r&&c>1?c-1:c],h=l[0]/f[0],p=l[1]/f[1],d=1/h,m=1/p,v=2*Math.ceil(d)+2,g=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(d,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var _V={kernelName:"ResizeBilinearGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new SV(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},TV=(0,C.Z)((function e(t,n,r,a,i){N(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,T.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var f,h=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],d=a?"0.5":"0.0";f=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),IV=(0,C.Z)((function e(t,n,r,a,i){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,T.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var f,h=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],d=a?"0.5":"0.0";f=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],",\n          ").concat(h[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var NV={kernelName:Yw,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,u=(0,T.Z)(s,2),c=u[0],l=u[1],f=$b().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new IV(a.shape,c,l,i,o):new TV(a.shape,c,l,i,o);return n.runWebGLProgram(f,[a],a.dtype)}},CV=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,T.Z)(n,3),i=a[1],o=a[2],s=(0,T.Z)(t,3),u=s[1],c=s[2],l=[r&&u>1?i-1:i,r&&c>1?o-1:o],f=[r&&u>1?u-1:u,r&&c>1?c-1:c],h=l[0]/f[0],p=l[1]/f[1],d=1/h,m=1/p,v=2*Math.ceil(d)+2,g=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(d,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(l[0],") *\n                (float(dyR) / float(").concat(f[0],"));\n\n            float sourceFracCol =\n                float(").concat(l[1],") *\n                  (float(dyC) / float(").concat(f[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var EV={kernelName:"ResizeNearestNeighborGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new CV(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},AV=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=kM(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),RV=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=BF("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=kM(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var OV={kernelName:Jw,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,s=Nb(i,a.shape);if(0===o)return dP({inputs:{x:a},backend:n});var u=$b().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new RV(a.shape,s):new AV(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},MV=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var i="";i="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),DV={kernelName:zk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,c=new MV(a.shape,o),l=function(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}(s,a.shape[1],a.shape[2]),f=(0,T.Z)(l,2),h=[[f[0],f[1],Math.sin(i),Math.cos(i)]];return u.runWebGLProgram(c,[a],a.dtype,h)}},FV=_P({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),PV={kernelName:ek,backendName:"webgl",kernelFunc:FV},LV=_P({opSnippet:"return inversesqrt(x);",cpuKernelImpl:xF}),zV={kernelName:tk,backendName:"webgl",kernelFunc:LV},BV=(0,C.Z)((function e(t,n,r,a,i,o){N(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=kM(i.length),u=kM(o.length),c="";1===r?c="i":2===r&&(c="i, j");var l="getIndices(".concat(c,")"),f="";1===a?f="i":2===a&&(f="i, coords[1]");var h="getUpdates(".concat(f,")"),p=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(p,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(h,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}));var WV={kernelName:nk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=vA(0,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,f=s.strides,h=s.outputSize,p=[h/l,l];if(0===h)return n.makeTensorInfo(o,a.dtype);var d=DP({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),m=DP({inputs:{x:i},backend:n,attrs:{shape:[c,l]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new BV(c,u,d.shape.length,m.shape.length,f,p),y=n.runWebGLProgram(g,[m,d,v],m.dtype),b=DP({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),b}},VV=(0,C.Z)((function e(t,n,r,a){N(this,e),this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];var i="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),o=2===$b().getNumber("WEBGL_VERSION")?"while (left < right) {":i,s="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(o,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}));var jV={kernelName:rk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=new VV(a.shape[0],a.shape[1],i.shape[1],o),u=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",u)}},UV=(0,C.Z)((function e(t,n,r){var a,i;if(N(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(o[c])),c<t&&s.push("".concat(o[c]));a=s.join(),i=u.join()}var l=kM(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}));var HV={kernelName:ak,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new UV(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],zS(a.dtype,i.dtype))}},ZV=_P({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(1.7580993408473768,";\n  float scale = ").concat(1.0507009873554805,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),GV={kernelName:ik,backendName:"webgl",kernelFunc:ZV},qV=_P({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:kF}),KV={kernelName:ck,backendName:"webgl",kernelFunc:qV},XV=_P({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),YV={kernelName:uk,backendName:"webgl",kernelFunc:XV},$V={kernelName:"Sin",backendName:"webgl",kernelFunc:_P({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"})},QV=_P({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),JV={kernelName:sk,backendName:"webgl",kernelFunc:QV},ej=_P({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),tj={kernelName:lk,backendName:"webgl",kernelFunc:ej},nj={kernelName:pk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;gb(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,(0,I.Z)(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=[],f=oV({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),h=QR(f.shape,i,s,!1),p=JR(h.length,i.length,!1),d=eO(f.shape,i,s,!1),m=DP({inputs:{x:f},backend:n,attrs:{shape:h}}),v=HP({inputs:{x:m},backend:n,attrs:{perm:p}}),g=DP({inputs:{x:v},backend:n,attrs:{shape:d}});return l.push(f),l.push(m),l.push(v),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var rj={kernelName:vk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.readSync(r.dataId),u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],f=TF(s,r.shape,r.dtype,u,a.dtype,c,l),h=(0,T.Z)(f,5),p=h[0],d=h[1],m=h[2],v=h[3],g=h[4];return[n.makeTensorInfo(d,r.dtype,p),n.makeTensorInfo([d[0]],a.dtype,m),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};var aj={kernelName:gk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),u=Array.from(n.readSync(i.dataId)),c=IF(s,r.shape,r.dtype,o,u),l=(0,T.Z)(c,3),f=l[0],h=l[1],p=l[2];return[n.makeTensorInfo(h,r.dtype,f),n.makeTensorInfo([p.length],i.dtype,new Int32Array(p))]}};var ij={kernelName:yk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=NF(o,r.shape,r.dtype,s,u,!0),l=(0,T.Z)(c,2),f=l[0],h=l[1];return n.makeTensorInfo(h,r.dtype,f)}};var oj={kernelName:bk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=NF(o,r.shape,r.dtype,s,u),l=(0,T.Z)(c,2),f=l[0],h=l[1];return n.makeTensorInfo(h,r.dtype,f)}};var sj={kernelName:xk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=vA(0,a,s),c=u.sliceRank,l=u.numUpdates,f=u.sliceSize,h=u.strides,p=u.outputSize;if("string"===i.dtype){var d=n.bufferSync(a),m=n.bufferSync(i),v=gS(n.readSync(o.dataId)[0]),g=wF(d,m,s,p,f,l,c,h,v,false);return n.makeTensorInfo(s,g.dtype,g.values)}var y=new BV(l,c,a.shape.length,i.shape.length,h,[p,1],false),b=n.runWebGLProgram(y,[i,a,o],i.dtype),x=DP({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(b),x}};var uj={kernelName:dk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=Nb(r.axis,a.shape)[0],s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)gb(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);gb(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}gb(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}(a,i,o),u=a.shape.length,c=new Array(u).fill(0),l=a.shape.slice();return s.map((function(e){var t=(0,I.Z)(l);t[o]=e;var r=WL({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[o]+=e,r}))}},cj="return sqrt(x);",lj=_P({opSnippet:cj,packedOpSnippet:cj,cpuKernelImpl:CF}),fj={kernelName:fk,backendName:"webgl",kernelFunc:lj},hj={kernelName:"Square",backendName:"webgl",kernelFunc:_P({opSnippet:"return x * x;"})},pj="return (a - b) * (a - b);",dj=TP({opSnippet:pj,packedOpSnippet:pj}),mj={kernelName:wk,backendName:"webgl",kernelFunc:dj};var vj={kernelName:Pk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=qF+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new GF(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},gj=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=kM(r.length),o=kM(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var yj={kernelName:kk,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,f=a.ellipsisMask,h=a.newAxisMask,p=a.shrinkAxisMask,d=rI(i.shape,o,s,u,c,l,f,h,p),m=d.finalShapeSparse,v=d.finalShape,g=d.isIdentity,y=d.sliceDim0,b=d.isSimpleSlice,x=d.begin,w=d.end,k=d.strides;if(g)t=DP({inputs:{x:i},backend:r,attrs:{shape:v}});else if(y||b){gb(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var S=function(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}(x,w,k),_=WL({inputs:{x:i},backend:r,attrs:{begin:x,size:S}});t=DP({inputs:{x:_},backend:r,attrs:{shape:v}}),r.disposeIntermediateTensorInfo(_)}else{if(r.shouldExecuteOnCPU([i])){var T=r.readSync(i.dataId),I=yT(i.shape,i.dtype,T),N=EF(m,I,k,x);t=r.makeTensorInfo(v,i.dtype,N.values)}else{var C=new gj(x,k,m);t=r.runWebGLProgram(C,[i],i.dtype)}}var E=DP({inputs:{x:t},backend:r,attrs:{shape:v}});return r.disposeIntermediateTensorInfo(t),E}};var bj={kernelName:Sk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,f=t.dataSplits,h=n.readSync(l.dataId),p=n.readSync(f.dataId),d=AF(h,p,a,i,o,s,u,c),m=(0,T.Z)(d,2),v=m[0],g=m[1];return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(f.shape,"int32",g)]}};var xj={kernelName:_k,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=n.readSync(a.dataId),s=n.readSync(i.dataId)[0],u=RF(o,s,r),c=(0,T.Z)(u,3),l=c[0],f=c[1],h=c[2],p=f.length;return[n.makeTensorInfo([p,2],"int32",l),n.makeTensorInfo([p],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};var wj={kernelName:Tk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=n.readSync(a.dataId),o=OF(i,r);return n.makeTensorInfo(a.shape,"int32",o)}},kj={kernelName:"Tan",backendName:"webgl",kernelFunc:_P({opSnippet:"return tan(x);"})},Sj=_P({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),_j={kernelName:Nk,backendName:"webgl",kernelFunc:Sj},Tj=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=kM(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}));function Ij(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if("string"===a.dtype||a.shape.length>5){var o=n.readSync(a.dataId),s="string"===a.dtype?o.map((function(e){return gS(e)})):o,u=yT(a.shape,a.dtype,s),c=DF(u,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var l=new Tj(a.shape,i);return n.runWebGLProgram(l,[a],a.dtype)}var Nj={kernelName:Ck,backendName:"webgl",kernelFunc:Ij},Cj=(0,C.Z)((function e(t){N(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),Ej=(0,C.Z)((function e(t){N(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function Aj(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function Rj(e){for(var t=1;t<e;)t*=2;return t}var Oj={kernelName:Ek,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=$b().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=$b().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=a.shape,l=c[c.length-1];if(n.shouldExecuteOnCPU([a])||l<s||i>u){var f=n.readSync(a.dataId),h=FF(f,c,a.dtype,i,o),p=(0,T.Z)(h,2),d=p[0],m=p[1];return[n.makeTensorInfo(d.shape,d.dtype,d.values),n.makeTensorInfo(m.shape,m.dtype,m.values)]}if(0===i)return c[c.length-1]=0,[n.makeTensorInfo(c,a.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===l)return[a,bB({attrs:{shape:c,dtype:"int32",value:0},backend:n})];var v=n.texData.get(a.dataId),g=null!==v&&v.isPacked,y=g?n.unpackTensor(a):a,b=wb(c)/l,x=DP({inputs:{x:y},attrs:{shape:[b,l]},backend:n});g&&Aj(n,y);for(var w=Rj(i),k=Rj(l),S=null,_=function(){return null===S?[x,x]:[x,S]},I=function(e,t,r){var a=_(),i=new Cj(r),o=[[l],[null===S?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=S;S=n.runWebGLProgram(i,a,"int32",o),Aj(n,s)},N=1;N<w;N*=2)for(var C=2*N,E=N;E>=1;E/=2)I(C,E,[b,k]);for(var A=k;A>w;A/=2){var R=_(),O=new Ej([b,A/2]),M=[[l],[null===S?1:0],[w]],D=S;S=n.runWebGLProgram(O,R,"int32",M),Aj(n,D);for(var F=w/2,P=2*F,L=F;L>=1;L/=2)I(P,L,S.shape)}var z=S;S=WL({inputs:{x:S},backend:n,attrs:{begin:0,size:[b,i]}}),Aj(n,z);var B=zB({inputs:{x:x,indices:S},backend:n,attrs:{axis:1,batchDims:1}});Aj(n,x);var W=c.slice(0,-1);W.push(i),z=S,S=DP({inputs:{x:S},attrs:{shape:W},backend:n}),Aj(n,z);var V=B;return B=DP({inputs:{x:B},attrs:{shape:W},backend:n}),Aj(n,V),[B,S]}},Mj=(0,C.Z)((function e(t,n,r,a,i,o){N(this,e),this.variableNames=["Image","Transforms"],this.outputShape=o;var s,u="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var Dj={kernelName:Ak,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.transforms,o=r.interpolation,s=r.fillMode,u=r.fillValue,c=r.outputShape,l=(0,T.Z)(a.shape,4),f=l[0],h=l[1],p=l[2],d=l[3],m=null!=c?c:[h,p],v=(0,T.Z)(m,2),g=v[0],y=v[1],b=new Mj(h,p,o,s,u,[f,g,y,d]);return n.runWebGLProgram(b,[a,i],"float32")}};var Fj={kernelName:Ok,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;XO(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=LF(o,a,i.shape,i.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,i.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}};var Pj,Lj,zj={kernelName:Mk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],c=new Array(s-1),l=0,f=0;f<s;f++)f!==i&&(c[l++]=o.shape[f]);var h=[],p=new Array(s).fill(0),d=o.shape.slice();d[i]=1;for(var m=new Array(u),v=0;v<m.length;v++){p[i]=v;var g=WL({inputs:{x:o},backend:n,attrs:{begin:p,size:d}}),y=DP({inputs:{x:g},backend:n,attrs:{shape:c}});m[v]=y,h.push(g)}return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},Bj=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var h="";i%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(h,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var Wj={kernelName:Dk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,s=a.shape.length,u=[],c=0,l=FN([c],s),f=a;null!=l&&(f=HP({inputs:{x:a},backend:n,attrs:{perm:l}}),u.push(f),c=LN(1,s)[0]);var h=function(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}(f.shape,c,o),p=wb([f.shape[c]]),d=DP({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}});u.push(d);var m=function e(t,r,a,i,o){var s=t.shape[0],c=t.shape[1],l=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=Lb(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Lb(e,n+1);return n}(c,o),f=new Bj({windowSize:l,inSize:c,batchSize:s,numSegments:o},r),h=n.compileAndRun(f,[t,a],i);if(u.push(h),h.shape[1]===o)return h;var p=hV({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),d=Ij({inputs:{x:p},backend:n,attrs:{reps:[c/l]}});return u.push(p),u.push(d),e(h,r,d,i,o)}(d,"unsortedSegmentSum",i,BS(a.dtype),o),v=DP({inputs:{x:m},backend:n,attrs:{shape:h}}),g=v;if(null!=l){u.push(v);var y=PN(l);g=HP({inputs:{x:g},backend:n,attrs:{perm:y}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},Vj=0,jj=[qP,XP,$P,JP,nL,iL,oL,sL,pL,dL,vL,yL,xL,kL,_L,NL,CL,RL,OL,ML,PL,jL,UL,HL,XL,QL,tz,gP,az,hz,xz,Tz,Iz,Nz,Cz,Az,Rz,Mz,Fz,Wz,Vz,jz,Hz,qz,Yz,$z,Jz,tB,nB,rB,aB,oB,sB,cB,fB,dB,gB,wB,SB,IB,CB,RB,MB,DB,PB,BB,VB,UB,mP,HB,cz,GB,KB,YB,xP,QB,eW,tW,rW,iW,sW,cW,fW,dW,vW,yW,xW,wW,kW,TW,IW,NW,CW,EW,RW,DW,FW,HW,MP,ZW,qW,XW,$W,GL,JW,nV,rV,sV,uV,SP,cV,lV,fV,pV,KL,zW,mV,gV,bV,FP,kV,_V,NV,EV,OV,DV,PV,zV,WV,jV,HV,GV,KV,YV,$V,JV,VL,UW,tj,nj,rj,aj,ij,oj,sj,uj,fj,hj,mj,vj,yj,bj,xj,wj,VW,UP,kj,_j,Nj,Oj,Dj,ZP,Fj,zj,Wj,tV];Vj<jj.length;Vj++){Kk(jj[Vj])}$b().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(Pj||(Pj={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(Lj||(Lj={}));var Uj={};function Hj(e){return Uj[e]}function Zj(e,t,n,r,a){var i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){var o=i.inputIndexStart,s=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?o+1:i.inputIndexEnd;if("tensor"===i.type)return Gj(t.inputNames[i.inputIndexStart],n,r,a);if("tensors"===i.type)return t.inputNames.slice(o,s).map((function(e){return Gj(e,n,r,a)}));var u=Gj(t.inputNames.slice(o)[0],n,r,a),c=u.dataSync();return"number"===i.type?c[0]:Wb(u.shape,c)}var l=t.attrParams[e];return l&&l.value}function Gj(e,t,n,r){var a=Xj(e),i=(0,T.Z)(a,2),o=i[0],s=i[1];if(null!=r){var u=r.getHashTableHandleByName(o);if(null!=u)return u}var c=n.currentContextIds.find((function(e){return!!t[Kj(o,e)]}));return void 0!==c?t[Kj(o,c)][s]:void 0}function qj(e,t){var n=Xj(e),r=(0,T.Z)(n,3),a=r[0],i=r[1],o=r[2];return[Kj(a,t&&t.currentContextId),i,o]}function Kj(e,t){return t?"".concat(e,"-").concat(t):e}function Xj(e){var t=e.split(":");if(1===t.length)return[e,0,void 0];var n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function Yj(e,t,n){var r=Zj("pad",e,t,n);if("explicit"===r){r=Zj("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],i=0;i<4;i++)a[i][0]=r[2*i],a[i][1]=r[2*i+1];return a}return r}function $j(e){return e.kept?e:xT(e)}var Qj=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Jj=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],eU=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],tU=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],nU=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],rU=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],aU=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],iU=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],oU=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],sU=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],uU=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],cU=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],lU=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],fU=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],hU=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],pU=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],dU=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],mU=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],vU=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],gU=function(){function e(){var t;N(this,e);var n=[r,a,i,o,s,u,c,l,f,h,p,d,m,v,g,y,b,x,w],k=(t=[]).concat.apply(t,(0,I.Z)(n.map((function(e){return e.json}))));this.opMappers=k.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return(0,C.Z)(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],i=[],o=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?i.push(e[n.name]):null!=n.input&&0!==n.input.length||o.push(e[n.name]),e}),{}),u=[],c=[],l={},f={};null!=n&&(l=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));var h=Object.keys(s);h.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e,n){var r=qj(e),a=(0,T.Z)(r,3),i=a[0],o=a[2],u=s[i];if(null!=u.outputs){var c=u.outputs.indexOf(o);if(-1!==c){var l="".concat(i,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))})),0===Object.keys(f).length?h.forEach((function(e){var t=s[e];0===t.children.length&&c.push(t)})):Object.keys(f).forEach((function(e){var t=qj(e),n=(0,T.Z)(t,1)[0],r=s[n];null!=r&&(r.signatureKey=f[e],c.push(r))})),Object.keys(l).length>0?Object.keys(l).forEach((function(e){var t=qj(e),n=(0,T.Z)(t,1)[0],r=s[n];r&&(r.signatureKey=l[e],u.push(r))})):u=a;var p={};null!=e.library&&null!=e.library.function&&(p=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var d={nodes:s,inputs:u,outputs:c,weights:i,placeholders:a,signature:n,functions:p};return o.length>0&&(d.initNodes=o),d}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=Hj(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.slice(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=bU(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=bU(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=EU(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=EU(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=wU(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=wU(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=CU(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=CU(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=xU(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=xU(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=RU(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=RU(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=NU(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=NU(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=AU(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=AU(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=_U(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=_U(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=TU(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=TU(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=SU(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=SU(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var i=[],o=[];e.signature.inputArg.forEach((function(e){var t=qj(e.name),n=(0,T.Z)(t,1)[0],r={name:n,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:kU(e.type),type:"dtype"}},children:[]};r.signatureKey=e.name,i.push(r),a[n]=r})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=qj(e),i=(0,T.Z)(r,3),o=i[0],s=i[2],u=a[o];if(null!=u.outputs){var c=u.outputs.indexOf(s);if(-1!==c){var l="".concat(o,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=qj(s[e.name]),n=(0,T.Z)(t,2),r=n[0],i=n[1],u=a[r];null!=u&&(u.defaultOutput=i,o.push(u))}));var u=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:r,placeholders:[],signature:u}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function yU(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=$b().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function bU(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?yU(a.s,r):n}function xU(e,t,n){var r=e[t];return r?r.b:n}function wU(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function kU(e){switch("string"===typeof e&&(e=Pj[e]),e){case Pj.DT_FLOAT:case Pj.DT_HALF:return"float32";case Pj.DT_INT32:case Pj.DT_INT64:case Pj.DT_INT8:case Pj.DT_UINT8:return"int32";case Pj.DT_BOOL:return"bool";case Pj.DT_DOUBLE:return"float32";case Pj.DT_STRING:return"string";default:return null}}function SU(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function _U(e,t,n){var r=e[t];return r&&r.type?kU(r.type):n}function TU(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return kU(e)})):n}function IU(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"===typeof e.size?e.size:parseInt(e.size,10)})):[]}function NU(e,t,n){var r=e[t];return r&&r.shape?IU(r.shape):n}function CU(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"===typeof e?e:parseInt(e,10)})):n}function EU(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return yU(e,r)})):n}function AU(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return IU(e)})):n}function RU(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var OU=function(){function e(t,n,r){var a=this;N(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return(0,C.Z)(e,[{key:"getInput",value:function(e){return Gj(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return Gj(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return wU(this.node.rawAttrs,e,t);if(null!=n.s)return bU(this.node.rawAttrs,e,t);if(null!=n.b)return xU(this.node.rawAttrs,e,t);if(null!=n.shape)return NU(this.node.rawAttrs,e,t);if(null!=n.type)return _U(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return CU(this.node.rawAttrs,e,t);if(null!=n.list.s)return EU(this.node.rawAttrs,e,t);if(null!=n.list.shape)return AU(this.node.rawAttrs,e,t);if(null!=n.list.b)return RU(this.node.rawAttrs,e,t);if(null!=n.list.type)return TU(this.node.rawAttrs,e,t)}return t}}]),e}(),MU=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(Zj("a",e,t,n),Zj("b",e,t,n))];case"AddN":return[r.addN(Zj("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(Zj("a",e,t,n),Zj("b",e,t,n))];case"Mul":return[r.mul(Zj("a",e,t,n),Zj("b",e,t,n))];case"RealDiv":case"Div":return[r.div(Zj("a",e,t,n),Zj("b",e,t,n))];case"DivNoNan":return[r.divNoNan(Zj("a",e,t,n),Zj("b",e,t,n))];case"FloorDiv":return[r.floorDiv(Zj("a",e,t,n),Zj("b",e,t,n))];case"Sub":return[r.sub(Zj("a",e,t,n),Zj("b",e,t,n))];case"Minimum":return[r.minimum(Zj("a",e,t,n),Zj("b",e,t,n))];case"Maximum":return[r.maximum(Zj("a",e,t,n),Zj("b",e,t,n))];case"Pow":return[r.pow(Zj("a",e,t,n),Zj("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(Zj("a",e,t,n),Zj("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},DU=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(Zj("x",e,t,n))];case"Acos":return[r.acos(Zj("x",e,t,n))];case"Acosh":return[r.acosh(Zj("x",e,t,n))];case"Asin":return[r.asin(Zj("x",e,t,n))];case"Asinh":return[r.asinh(Zj("x",e,t,n))];case"Atan":return[r.atan(Zj("x",e,t,n))];case"Atan2":return[r.atan2(Zj("x",e,t,n),Zj("y",e,t,n))];case"Atanh":return[r.atanh(Zj("x",e,t,n))];case"Ceil":return[r.ceil(Zj("x",e,t,n))];case"Complex":return[r.complex(Zj("real",e,t,n),Zj("imag",e,t,n))];case"Cos":return[r.cos(Zj("x",e,t,n))];case"Cosh":return[r.cosh(Zj("x",e,t,n))];case"Elu":return[r.elu(Zj("x",e,t,n))];case"Erf":return[r.erf(Zj("x",e,t,n))];case"Exp":return[r.exp(Zj("x",e,t,n))];case"Expm1":return[r.expm1(Zj("x",e,t,n))];case"Floor":return[r.floor(Zj("x",e,t,n))];case"Log":return[r.log(Zj("x",e,t,n))];case"Log1p":return[r.log1p(Zj("x",e,t,n))];case"Imag":return[r.imag(Zj("x",e,t,n))];case"Neg":return[r.neg(Zj("x",e,t,n))];case"Reciprocal":return[r.reciprocal(Zj("x",e,t,n))];case"Real":return[r.real(Zj("x",e,t,n))];case"Relu":return[r.relu(Zj("x",e,t,n))];case"Round":return[r.round(Zj("x",e,t,n))];case"Selu":return[r.selu(Zj("x",e,t,n))];case"Sigmoid":return[r.sigmoid(Zj("x",e,t,n))];case"Sin":return[r.sin(Zj("x",e,t,n))];case"Sign":return[r.sign(Zj("x",e,t,n))];case"Sinh":return[r.sinh(Zj("x",e,t,n))];case"Softplus":return[r.softplus(Zj("x",e,t,n))];case"Sqrt":return[r.sqrt(Zj("x",e,t,n))];case"Square":return[r.square(Zj("x",e,t,n))];case"Tanh":return[r.tanh(Zj("x",e,t,n))];case"Tan":return[r.tan(Zj("x",e,t,n))];case"ClipByValue":return[r.clipByValue(Zj("x",e,t,n),Zj("clipValueMin",e,t,n),Zj("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(Zj("x",e,t,n))];case"Rsqrt":return[r.rsqrt(Gj(e.inputNames[0],t,n))];case"Prod":return[r.prod(Zj("x",e,t,n),Zj("axes",e,t,n))];case"LeakyRelu":return[r.leakyRelu(Zj("x",e,t,n),Zj("alpha",e,t,n))];case"Prelu":return[r.prelu(Zj("x",e,t,n),Zj("alpha",e,t,n))];case"IsNan":return[r.isNaN(Gj(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function FU(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){gb(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],i=t[r];gb(a<0||i<0||a===i,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function PU(e){return"number"!==typeof e&&!e.some((function(e){return e<0}))}function LU(e,t,n){var r=zU(e,n),a=!PU(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=zU(e.shape,r)})),!PU(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function zU(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var BU=function(){function e(t,n,r,a,i,o,s){N(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=VN(0),hA(this.idTensor)}return(0,C.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),FU(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,hA(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return l_([],[0].concat(this.elementShape));var r=this.readMany(e);return FU(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),jE(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return l_([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return FU(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),LI(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,(0,I.Z)(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,tA(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:t.size/r,o=[];lA((function(){t=DI(t,[1,r,i]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,e[s],i];o[s]=DI(VI(t,u,c),n.elementShape)}return o}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,o)}}]),e}(),WU=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;N(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));FU(n,e.shape,"TensorList shape mismatch: "),hA(e)})),this.idTensor=VN(0),this.maxNumElements=a,hA(this.idTensor)}return(0,C.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e((0,I.Z)(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));FU(e,this.elementShape,"TensorList shape mismatch: ");var a=LU(this.elementShape,this.tensors,e);return lA((function(){var e=n.tensors.map((function(e){return DI(e,a)}));return jE(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=LU(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,FU(r.shape,e,"TensorList shape mismatch: "),DI(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(FU(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");hA(e),this.tensors.push(e)}},{key:"resize",value:function(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(t));if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error("TensorListResize input size ".concat(t," is greater maxNumElement ").concat(this.maxNumElements,"."));var n=new e([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(var r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));FU(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=LU(this.elementShape,this.tensors,t);return DI(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));FU(this.elementShape,t.shape,"TensorList shape mismatch: "),hA(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));FU(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=LU(this.elementShape,this.tensors,n);return 0===e.length?l_([],[0].concat(a)):lA((function(){var t=e.map((function(e){return DI(r.tensors[e],a)}));return jE(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));FU(this.elementShape,t,"TensorList shape mismatch: ");var r=LU(this.elementShape,this.tensors,t);return 0===this.size()?l_([],[0].concat(r)):lA((function(){var e=n.tensors.map((function(e){return DI(e,r)}));return LI(e,0)}))}}]),e}();function VU(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));FU(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=tA(e);return new WU(a,t,r)}function jU(e,t,n,r){return new WU([],e,t,r)}function UU(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,(0,I.Z)(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var i=new WU([],n,e.dtype,r),o=tA(e,0);return t.forEach((function(e,t){i.setItem(e,o[t])})),i}function HU(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var i=zU(e.shape.slice(1),n),o=0===r?0:e.size/r,s=lA((function(){var n=[];e=DI(e,[1,r,o]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,t[s],o];n[s]=DI(VI(e,u,c),i)}return e.dispose(),n})),u=new WU([],n,e.dtype,t.length),c=0;c<s.length;c++)u.setItem(c,s[c]);return u}var ZU=function(){var e=Tn(Sn().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,p,d,m,v,g,y,b,x,w,k,S,_,T,I,N,C,E,A,R,O,M,D,F,P,L,z,B,W,V,j,U,H,Z,G,q,K,X,Y,$,Q,J,ee,te,ne,re,ae,ie,oe,se,ue,ce,le,fe,he,pe,de,me,ve,ge,ye,be,xe,we,ke,Se,_e,Te,Ie,Ne,Ce,Ee,Ae,Re,Oe,Me,De,Fe,Pe,Le,ze,Be,We,Ve,je,Ue,He,Ze,Ge,qe,Ke,Xe,Ye,$e,Qe;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?15:"LoopCond"===e.t0?19:"Switch"===e.t0?21:"Merge"===e.t0?32:"Enter"===e.t0?37:"Exit"===e.t0?41:"NextIteration"===e.t0?44:"TensorArrayV3"===e.t0?47:"TensorArrayWriteV3"===e.t0?57:"TensorArrayReadV3"===e.t0?63:"TensorArrayGatherV3"===e.t0?67:"TensorArrayScatterV3"===e.t0?72:"TensorArrayConcatV3"===e.t0?78:"TensorArraySplitV3"===e.t0?82:"TensorArraySizeV3"===e.t0?88:"TensorArrayCloseV3"===e.t0?91:"TensorListSetItem"===e.t0?95:"TensorListGetItem"===e.t0?101:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?107:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?114:"TensorListGather"===e.t0?122:"TensorListStack"===e.t0?128:"TensorListFromTensor"===e.t0?134:"TensorListConcat"===e.t0||"TensorListConcatV2"===e.t0?140:"TensorListPushBack"===e.t0?145:"TensorListPopBack"===e.t0?150:"TensorListSplit"===e.t0?155:"TensorListLength"===e.t0?161:"TensorListResize"===e.t0?164:170;break;case 3:return a=Zj("thenBranch",t,n,r),i=Zj("elseBranch",t,n,r),o=Zj("cond",t,n,r),s=Zj("args",t,n,r),e.next=9,o.data();case 9:if(!e.sent[0]){e.next=14;break}return e.abrupt("return",r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 14:return e.abrupt("return",r.functionMap[i].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 15:return e.delegateYield(Sn().mark((function e(){var a,i,o,s,u,c,l,f;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Zj("body",t,n,r),i=Zj("cond",t,n,r),o=Zj("args",t,n,r),e.next=5,r.functionMap[i].executeFunctionAsync(o,r.tensorArrayMap,r.tensorListMap);case 5:return s=e.sent,u=o.map((function(e){return e.id})),e.next=9,s[0].data();case 9:c=e.sent,s.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||e.dispose()})),l=o,f=Sn().mark((function e(){var t,n,o;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l,e.next=3,r.functionMap[a].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 3:return l=e.sent,n=l.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[i].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 8:return o=e.sent,e.next=11,o[0].data();case 11:c=e.sent,o.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 13:if(!c[0]){e.next=17;break}return e.delegateYield(f(),"t0",15);case 15:e.next=13;break;case 17:return e.abrupt("return",{v:l});case 18:case"end":return e.stop()}}),e)}))(),"t1",16);case 16:if("object"!==typeof(u=e.t1)){e.next=19;break}return e.abrupt("return",u.v);case 19:return c=Zj("pred",t,n,r),e.abrupt("return",[$j(c)]);case 21:return l=Zj("pred",t,n,r),(f=Zj("data",t,n,r)).kept||(f=$j(f)),e.next=26,l.data();case 26:if(!e.sent[0]){e.next=30;break}e.t2=[void 0,f],e.next=31;break;case 30:e.t2=[f,void 0];case 31:return e.abrupt("return",e.t2);case 32:if(h=t.inputNames.find((function(e){return void 0!==Gj(e,n,r)})),!h){e.next=36;break}return p=Gj(h,n,r),e.abrupt("return",[$j(p)]);case 36:return e.abrupt("return",void 0);case 37:return d=Zj("frameName",t,n,r),m=Zj("tensor",t,n,r),r.enterFrame(d),e.abrupt("return",[$j(m)]);case 41:return v=Zj("tensor",t,n,r),r.exitFrame(),e.abrupt("return",[$j(v)]);case 44:return g=Zj("tensor",t,n,r),r.nextIteration(),e.abrupt("return",[$j(g)]);case 47:return y=Zj("size",t,n,r),b=Zj("dtype",t,n,r),x=Zj("elementShape",t,n,r),w=Zj("dynamicSize",t,n,r),k=Zj("clearAfterRead",t,n,r),S=Zj("identicalElementShapes",t,n,r),_=Zj("name",t,n,r),T=new BU(_,b,y,x,S,w,k),r.addTensorArray(T),e.abrupt("return",[T.idTensor,VN(1)]);case 57:return I=Zj("tensorArrayId",t,n,r),N=Zj("index",t,n,r),C=Zj("tensor",t,n,r),(E=r.getTensorArray(I.id)).write(N,C),e.abrupt("return",[E.idTensor]);case 63:return A=Zj("tensorArrayId",t,n,r),R=Zj("index",t,n,r),O=r.getTensorArray(A.id),e.abrupt("return",[O.read(R)]);case 67:return M=Zj("tensorArrayId",t,n,r),D=Zj("indices",t,n,r),F=Zj("dtype",t,n,r),P=r.getTensorArray(M.id),e.abrupt("return",[P.gather(D,F)]);case 72:return L=Zj("tensorArrayId",t,n,r),z=Zj("indices",t,n,r),B=Zj("tensor",t,n,r),(W=r.getTensorArray(L.id)).scatter(z,B),e.abrupt("return",[W.idTensor]);case 78:return V=Zj("tensorArrayId",t,n,r),j=r.getTensorArray(V.id),U=Zj("dtype",t,n,r),e.abrupt("return",[j.concat(U)]);case 82:return H=Zj("tensorArrayId",t,n,r),Z=Zj("tensor",t,n,r),G=Zj("lengths",t,n,r),(q=r.getTensorArray(H.id)).split(G,Z),e.abrupt("return",[q.idTensor]);case 88:return K=Zj("tensorArrayId",t,n,r),X=r.getTensorArray(K.id),e.abrupt("return",[VN(X.size(),"int32")]);case 91:return Y=Zj("tensorArrayId",t,n,r),($=r.getTensorArray(Y.id)).clearAndClose(),e.abrupt("return",[$.idTensor]);case 95:return Q=Zj("tensorListId",t,n,r),J=Zj("index",t,n,r),ee=Zj("tensor",t,n,r),(te=r.getTensorList(Q.id)).setItem(J,ee),e.abrupt("return",[te.idTensor]);case 101:return ne=Zj("tensorListId",t,n,r),re=Zj("index",t,n,r),ae=Zj("elementShape",t,n,r),ie=Zj("elementDType",t,n,r),oe=r.getTensorList(ne.id),e.abrupt("return",[oe.getItem(re,ae,ie)]);case 107:return se=Zj("indices",t,n,r),ue=Zj("tensor",t,n,r),ce=Zj("elementShape",t,n,r),le=Zj("numElements",t,n,r),fe=UU(ue,se,ce,le),r.addTensorList(fe),e.abrupt("return",[fe.idTensor]);case 114:return he=Zj("elementShape",t,n,r),pe=Zj("elementDType",t,n,r),de="TensorListReserve"===t.op?"numElements":"maxNumElements",me=Zj(de,t,n,r),ve="TensorListReserve"===t.op?-1:me,ge=jU(he,pe,0,ve),r.addTensorList(ge),e.abrupt("return",[ge.idTensor]);case 122:return ye=Zj("tensorListId",t,n,r),be=Zj("indices",t,n,r),xe=Zj("elementShape",t,n,r),we=Zj("elementDType",t,n,r),ke=r.getTensorList(ye.id),e.abrupt("return",[ke.gather(be,we,xe)]);case 128:return Se=Zj("tensorListId",t,n,r),_e=Zj("elementShape",t,n,r),Te=Zj("elementDType",t,n,r),Ie=Zj("numElements",t,n,r),Ne=r.getTensorList(Se.id),e.abrupt("return",[Ne.stack(_e,Te,Ie)]);case 134:return Ce=Zj("tensor",t,n,r),Ee=Zj("elementShape",t,n,r),Ae=Zj("elementDType",t,n,r),Re=VU(Ce,Ee,Ae),r.addTensorList(Re),e.abrupt("return",[Re.idTensor]);case 140:return Oe=Zj("tensorListId",t,n,r),Me=r.getTensorList(Oe.id),De=Zj("dtype",t,n,r),Fe=Zj("elementShape",t,n,r),e.abrupt("return",[Me.concat(De,Fe)]);case 145:return Pe=Zj("tensorListId",t,n,r),Le=Zj("tensor",t,n,r),(ze=r.getTensorList(Pe.id)).pushBack(Le),e.abrupt("return",[ze.idTensor]);case 150:return Be=Zj("tensorListId",t,n,r),We=Zj("elementShape",t,n,r),Ve=Zj("elementDType",t,n,r),je=r.getTensorList(Be.id),e.abrupt("return",[je.popBack(We,Ve)]);case 155:return Ue=Zj("tensor",t,n,r),He=Zj("elementShape",t,n,r),Ze=Zj("lengths",t,n,r),Ge=HU(Ue,Ze,He),r.addTensorList(Ge),e.abrupt("return",[Ge.idTensor]);case 161:return qe=Zj("tensorListId",t,n,r),Ke=r.getTensorList(qe.id),e.abrupt("return",[VN(Ke.size(),"int32")]);case 164:return Xe=Zj("tensorListId",t,n,r),Ye=Zj("size",t,n,r),$e=r.getTensorList(Xe.id),Qe=$e.resize(Ye),r.addTensorList(Qe),e.abrupt("return",[Qe.idTensor]);case 170:throw TypeError("Node type ".concat(t.op," is not implemented"));case 171:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function GU(e,t,n){var r=Zj("fusedOps",e,t,n),a=(0,T.Z)(r,2),i=a[0],o=a[1],s="biasadd"===i,u=!s,c="prelu"===o,l="fusedbatchnorm"===i,f=Zj("numArgs",e,t,n);if(s){if(c&&2!==f)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&s&&1!==f)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var h=Zj("strides",e,t,n),p=Yj(e,t,n),d=Zj("dataFormat",e,t,n).toUpperCase(),m=Zj("dilations",e,t,n),v=Zj("args",e,t,n),g=(0,T.Z)(v,2),y=g[0],b=g[1];return u&&(b=y,y=void 0),{stride:h,pad:p,dataFormat:d,dilations:m,biasArg:y,preluArg:b,activationFunc:o,leakyreluAlpha:Zj("leakyreluAlpha",e,t,n)}}var qU=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Conv1D":var a=Zj("stride",e,t,n),i=Zj("pad",e,t,n),o=Zj("dataFormat",e,t,n).toUpperCase(),s=Zj("dilation",e,t,n);return[r.conv1d(Zj("x",e,t,n),Zj("filter",e,t,n),a,i,o,s)];case"Conv2D":var u=Zj("strides",e,t,n),c=Yj(e,t,n),l=Zj("dataFormat",e,t,n).toUpperCase(),f=Zj("dilations",e,t,n);return[r.conv2d(Zj("x",e,t,n),Zj("filter",e,t,n),[u[1],u[2]],c,l,[f[1],f[2]])];case"_FusedConv2D":var h=GU(e,t,n),p=h.stride,d=h.pad,m=h.dataFormat,v=h.dilations,g=h.biasArg,y=h.preluArg,b=h.activationFunc,x=h.leakyreluAlpha;return[r.fused.conv2d({x:Zj("x",e,t,n),filter:Zj("filter",e,t,n),strides:[p[1],p[2]],pad:d,dataFormat:m,dilations:[v[1],v[2]],bias:g,activation:b,preluActivationWeights:y,leakyreluAlpha:x})];case"FusedDepthwiseConv2dNative":var w=GU(e,t,n),S=w.stride,_=w.pad,T=w.dataFormat,I=w.dilations,N=w.biasArg,C=w.preluArg,E=w.activationFunc,A=w.leakyreluAlpha;return[r.fused.depthwiseConv2d({x:Zj("x",e,t,n),filter:Zj("filter",e,t,n),strides:[S[1],S[2]],pad:_,dataFormat:T,dilations:[I[1],I[2]],bias:N,activation:E,preluActivationWeights:C,leakyreluAlpha:A})];case"Conv2DBackpropInput":case"Conv2dTranspose":var R=Zj("outputShape",e,t,n),O=Zj("strides",e,t,n),M=Yj(e,t,n);return[r.conv2dTranspose(Zj("x",e,t,n),Zj("filter",e,t,n),R,[O[1],O[2]],M)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var D=Zj("strides",e,t,n),F=Yj(e,t,n),P=Zj("dilations",e,t,n),L=Zj("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(Zj("input",e,t,n),Zj("filter",e,t,n),[D[1],D[2]],F,L,[P[1],P[2]])];case"Conv3D":var z=Zj("strides",e,t,n),B=Zj("pad",e,t,n),W=Zj("dataFormat",e,t,n).toUpperCase(),V=Zj("dilations",e,t,n);return[r.conv3d(Zj("x",e,t,n),Zj("filter",e,t,n),[z[1],z[2],z[3]],B,W,[V[1],V[2],V[3]])];case"AvgPool":var j=Zj("strides",e,t,n),U=Zj("pad",e,t,n),H=Zj("kernelSize",e,t,n);return[r.avgPool(Zj("x",e,t,n),[H[1],H[2]],[j[1],j[2]],U)];case"MaxPool":var Z=Zj("strides",e,t,n),G=Zj("pad",e,t,n),q=Zj("kernelSize",e,t,n);return[r.maxPool(Zj("x",e,t,n),[q[1],q[2]],[Z[1],Z[2]],G)];case"MaxPoolWithArgmax":var K=Zj("strides",e,t,n),X=Zj("pad",e,t,n),Y=Zj("kernelSize",e,t,n),$=Zj("includeBatchInIndex",e,t,n),Q=r.maxPoolWithArgmax(Zj("x",e,t,n),[Y[1],Y[2]],[K[1],K[2]],X,$),J=Q.result,ee=Q.indexes;return[J,ee];case"AvgPool3D":var te=Zj("strides",e,t,n),ne=Zj("pad",e,t,n),re=Zj("kernelSize",e,t,n);return[r.avgPool3d(Zj("x",e,t,n),[re[1],re[2],re[3]],[te[1],te[2],te[3]],ne)];case"MaxPool3D":var ae=Zj("strides",e,t,n),ie=Zj("pad",e,t,n),oe=Zj("kernelSize",e,t,n);return[r.maxPool3d(Zj("x",e,t,n),[oe[1],oe[2],oe[3]],[ae[1],ae[2],ae[3]],ie)];case"Dilation2D":var se=Zj("strides",e,t,n),ue=Zj("pad",e,t,n),ce=Zj("dilations",e,t,n),le=se[1],fe=se[2],he=ce[1],pe=ce[2];return[r.dilation2d(Zj("x",e,t,n),Zj("filter",e,t,n),[le,fe],ue,[he,pe],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},KU=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Fill":var a=Zj("shape",e,t,n),i=Zj("dtype",e,t,n),o=Zj("value",e,t,n);return[r.fill(a,o,i)];case"LinSpace":var s=Zj("start",e,t,n),u=Zj("stop",e,t,n),c=Zj("num",e,t,n);return[r.linspace(s,u,c)];case"Multinomial":var l=Zj("logits",e,t,n),f=Zj("numSamples",e,t,n),h=Zj("seed",e,t,n);return[r.multinomial(l,f,h)];case"OneHot":var p=Zj("indices",e,t,n),d=Zj("depth",e,t,n),m=Zj("onValue",e,t,n),v=Zj("offValue",e,t,n),g=Zj("dtype",e,t,n);return[r.oneHot(p,d,m,v,g)];case"Ones":return[r.ones(Zj("shape",e,t,n),Zj("dtype",e,t,n))];case"OnesLike":return[r.onesLike(Zj("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(Zj("shape",e,t,n),Zj("dtype",e,t,n),Zj("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(Zj("shape",e,t,n),Zj("minval",e,t,n),Zj("maxval",e,t,n),Zj("dtype",e,t,n))];case"Range":var y=Zj("start",e,t,n),b=Zj("stop",e,t,n),x=Zj("step",e,t,n);return[r.range(y,b,x,Zj("dtype",e,t,n))];case"TruncatedNormal":var w=Zj("shape",e,t,n),S=Zj("mean",e,t,n),_=Zj("stdDev",e,t,n),T=Zj("seed",e,t,n);return[r.truncatedNormal(w,S,_,Zj("dtype",e,t,n),T)];case"Zeros":return[r.zeros(Zj("shape",e,t,n),Zj("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(Zj("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function XU(e,t,n){return{boxes:Zj("boxes",e,t,n),scores:Zj("scores",e,t,n),maxOutputSize:Zj("maxOutputSize",e,t,n),iouThreshold:Zj("iouThreshold",e,t,n),scoreThreshold:Zj("scoreThreshold",e,t,n),softNmsSigma:Zj("softNmsSigma",e,t,n)}}var YU=function(){var e=Tn(Sn().mark((function e(t,n,r,a){var i,o,s,u,c,l,f,h,p,d,m,v,g,y,b,x,w,S,_,T,I,N,C,E,A,R=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=R.length>4&&void 0!==R[4]?R[4]:k,e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?4:"NonMaxSuppressionV4"===e.t0?9:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?15:"Where"===e.t0?20:"ListDiff"===e.t0?27:28;break;case 4:return o=XU(t,n,r),s=o.boxes,u=o.scores,c=o.maxOutputSize,l=o.iouThreshold,f=o.scoreThreshold,h=o.softNmsSigma,e.next=7,i.image.nonMaxSuppressionWithScoreAsync(s,u,c,l,f,h);case 7:return p=e.sent,e.abrupt("return",[p.selectedIndices,p.selectedScores]);case 9:return d=XU(t,n,r),m=d.boxes,v=d.scores,g=d.maxOutputSize,y=d.iouThreshold,b=d.scoreThreshold,x=Zj("padToMaxOutputSize",t,n,r),e.next=13,i.image.nonMaxSuppressionPaddedAsync(m,v,g,y,b,x);case 13:return w=e.sent,e.abrupt("return",[w.selectedIndices,w.validOutputs]);case 15:return S=XU(t,n,r),_=S.boxes,T=S.scores,I=S.maxOutputSize,N=S.iouThreshold,C=S.scoreThreshold,e.next=18,i.image.nonMaxSuppressionAsync(_,T,I,N,C);case 18:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 20:return E=i.cast(Zj("condition",t,n,r),"bool"),e.next=23,i.whereAsync(E);case 23:return e.t2=e.sent,A=[e.t2],E.dispose(),e.abrupt("return",A);case 27:return e.abrupt("return",i.setdiff1dAsync(Zj("x",t,n,r),Zj("y",t,n,r)));case 28:throw TypeError("Node type ".concat(t.op," is not implemented"));case 29:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),$U=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"LowerBound":var a=Zj("sortedSequence",e,t,n),i=Zj("values",e,t,n);return[r.lowerBound(a,i)];case"TopKV2":var o=Zj("x",e,t,n),s=Zj("k",e,t,n),u=Zj("sorted",e,t,n),c=r.topk(o,s,u);return[c.values,c.indices];case"UpperBound":var l=Zj("sortedSequence",e,t,n),f=Zj("values",e,t,n);return[r.upperBound(l,f)];case"Unique":var h=Zj("x",e,t,n),p=r.unique(h);return[p.values,p.indices];case"UniqueV2":var d=Zj("x",e,t,n),m=Zj("axis",e,t,n),v=r.unique(d,m);return[v.values,v.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},QU=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var a=Zj("default",e,t,n);return[Gj(e.name,t,n)||a];case"Placeholder":return[Gj(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":var i=Zj("x",e,t,n);return[$j(i)];case"IdentityN":return Zj("x",e,t,n).map((function(e){return $j(e)}));case"Snapshot":var o=Zj("x",e,t,n);return[$j(o)];case"Shape":return[r.tensor1d(Zj("x",e,t,n).shape,"int32")];case"ShapeN":return Zj("x",e,t,n).map((function(e){return r.tensor1d(e.shape)}));case"Size":return[r.scalar(Zj("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(Zj("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":var s=Zj("x",e,t,n),u=Zj("data",e,t,n),c=Zj("message",e,t,n),l=Zj("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(c);for(var f=0;f<u.length;f++)console.log(Array.prototype.slice.call(u[f].dataSync()).slice(0,l));return[s];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},JU=function(){function e(t,n){N(this,e),this.keyDType=t,this.valueDType=n,this.handle=VN(0),this.tensorMap=new Map,hA(this.handle)}return(0,C.Z)(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return VN(this.size(),"int32")}},{key:"import",value:function(){var e=Tn(Sn().mark((function e(t,n){var r,a=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),e.abrupt("return",lA((function(){var e=tA(n),t=r.length,i=e.length;gb(t===i,(function(){return"The number of elements doesn't match, keys has "+"".concat(t," elements, the values has ").concat(i," ")+"elements."}));for(var o=0;o<t;o++){var s=r[o],u=e[o];hA(u),a.tensorMap.set(s,u)}return a.handle})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=Tn(Sn().mark((function e(t,n){var r,a=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",lA((function(){for(var e=[],t=0;t<r.length;t++){var i=r[t],o=a.findWithDefault(i,n);e.push(o)}return jE(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}]),e}(),eH=function(){var e=Tn(Sn().mark((function e(t,n,r,a){var i,o,s,u,c,l,f,h,p,d,m,v,g;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?8:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?16:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?24:27;break;case 3:return i=Zj("keyDType",t,n,r),o=Zj("valueDType",t,n,r),s=new JU(i,o),a.addHashTable(t.name,s),e.abrupt("return",[s.handle]);case 8:return u=Zj("tableHandle",t,n,r,a),c=Zj("keys",t,n,r),l=Zj("values",t,n,r),f=a.getHashTableById(u.id),e.next=14,f.import(c,l);case 14:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 16:return h=Zj("tableHandle",t,n,r,a),p=Zj("keys",t,n,r),d=Zj("defaultValue",t,n,r),m=a.getHashTableById(h.id),e.next=22,m.find(p,d);case 22:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 24:return v=Zj("tableHandle",t,n,r,a),g=a.getHashTableById(v.id),e.abrupt("return",[g.tensorSize()]);case 27:throw TypeError("Node type ".concat(t.op," is not implemented"));case 28:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),tH=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"ResizeBilinear":var a=Zj("images",e,t,n),i=Zj("size",e,t,n),o=Zj("alignCorners",e,t,n),s=Zj("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(a,[i[0],i[1]],o,s)];case"ResizeNearestNeighbor":var u=Zj("images",e,t,n),c=Zj("size",e,t,n),l=Zj("alignCorners",e,t,n),f=Zj("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(u,[c[0],c[1]],l,f)];case"CropAndResize":var h=Zj("image",e,t,n),p=Zj("boxes",e,t,n),d=Zj("boxInd",e,t,n),m=Zj("cropSize",e,t,n),v=Zj("method",e,t,n),g=Zj("extrapolationValue",e,t,n);return[r.image.cropAndResize(h,p,d,m,v,g)];case"ImageProjectiveTransformV3":var y=Zj("images",e,t,n),b=Zj("transforms",e,t,n),x=Zj("outputShape",e,t,n),w=Zj("fillValue",e,t,n),S=Zj("interpolation",e,t,n),_=Zj("fillMode",e,t,n);return[r.image.transform(y,b,S.toLowerCase(),_.toLowerCase(),w,x)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},nH=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Equal":return[r.equal(Zj("a",e,t,n),Zj("b",e,t,n))];case"NotEqual":return[r.notEqual(Zj("a",e,t,n),Zj("b",e,t,n))];case"Greater":return[r.greater(Zj("a",e,t,n),Zj("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(Zj("a",e,t,n),Zj("b",e,t,n))];case"Less":return[r.less(Zj("a",e,t,n),Zj("b",e,t,n))];case"LessEqual":return[r.lessEqual(Zj("a",e,t,n),Zj("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(Zj("a",e,t,n),Zj("b",e,t,n))];case"LogicalNot":return[r.logicalNot(Zj("a",e,t,n))];case"LogicalOr":return[r.logicalOr(Zj("a",e,t,n),Zj("b",e,t,n))];case"Select":case"SelectV2":return[r.where(Zj("condition",e,t,n),Zj("a",e,t,n),Zj("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},rH=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(Zj("a",e,t,n),Zj("b",e,t,n),Zj("transposeA",e,t,n),Zj("transposeB",e,t,n))];case"Einsum":return[r.einsum.apply(r,[Zj("equation",e,t,n)].concat((0,I.Z)(Zj("tensors",e,t,n))))];case"Transpose":return[r.transpose(Zj("x",e,t,n),Zj("perm",e,t,n))];case"_FusedMatMul":var a=Zj("fusedOps",e,t,n),i=(0,T.Z)(a,2),o=i[0],s=i[1],u="biasadd"===o,c="prelu"===s,l=Zj("numArgs",e,t,n),f=Zj("leakyreluAlpha",e,t,n);if(u){if(c&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var h=Zj("args",e,t,n),p=(0,T.Z)(h,2),d=p[0],m=p[1];return[r.fused.matMul({a:Zj("a",e,t,n),b:Zj("b",e,t,n),transposeA:Zj("transposeA",e,t,n),transposeB:Zj("transposeB",e,t,n),bias:d,activation:s,preluActivationWeights:m,leakyreluAlpha:f})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},aH=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(Zj("x",e,t,n),Zj("axis",e,t,n),Zj("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(Zj("x",e,t,n),Zj("mean",e,t,n),Zj("variance",e,t,n),Zj("offset",e,t,n),Zj("scale",e,t,n),Zj("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(Zj("x",e,t,n),Zj("radius",e,t,n),Zj("bias",e,t,n),Zj("alpha",e,t,n),Zj("beta",e,t,n))];case"Softmax":return[r.softmax(Zj("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(Zj("x",e,t,n))];case"SparseToDense":return[r.sparseToDense(Zj("sparseIndices",e,t,n),Zj("outputShape",e,t,n),Zj("sparseValues",e,t,n),Zj("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},iH=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Max":var a=Zj("axis",e,t,n),i=Zj("keepDims",e,t,n);return[r.max(Zj("x",e,t,n),a,i)];case"Mean":var o=Zj("axis",e,t,n),s=Zj("keepDims",e,t,n);return[r.mean(Zj("x",e,t,n),o,s)];case"Min":var u=Zj("axis",e,t,n),c=Zj("keepDims",e,t,n);return[r.min(Zj("x",e,t,n),u,c)];case"Sum":var l=Zj("axis",e,t,n),f=Zj("keepDims",e,t,n);return[r.sum(Zj("x",e,t,n),l,f)];case"All":var h=Zj("axis",e,t,n),p=Zj("keepDims",e,t,n);return[r.all(Zj("x",e,t,n),h,p)];case"Any":var d=Zj("axis",e,t,n),m=Zj("keepDims",e,t,n);return[r.any(Zj("x",e,t,n),d,m)];case"ArgMax":var v=Zj("axis",e,t,n);return[r.argMax(Zj("x",e,t,n),v)];case"ArgMin":var g=Zj("axis",e,t,n);return[r.argMin(Zj("x",e,t,n),g)];case"Prod":var y=Zj("axis",e,t,n),b=Zj("keepDims",e,t,n);return[r.prod(Zj("x",e,t,n),y,b)];case"Cumprod":var x=Zj("axis",e,t,n),w=Zj("exclusive",e,t,n),S=Zj("reverse",e,t,n);return[r.cumprod(Zj("x",e,t,n),x,w,S)];case"Cumsum":var _=Zj("axis",e,t,n),T=Zj("exclusive",e,t,n),I=Zj("reverse",e,t,n);return[r.cumsum(Zj("x",e,t,n),_,T,I)];case"Bincount":var N=Zj("x",e,t,n),C=Zj("weights",e,t,n),E=Zj("size",e,t,n);return[r.bincount(N,C,E)];case"DenseBincount":var A=Zj("x",e,t,n),R=Zj("weights",e,t,n),O=Zj("size",e,t,n),M=Zj("binaryOutput",e,t,n);return[r.denseBincount(A,R,O,M)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},oH=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"ConcatV2":case"Concat":var a=Zj("n",e,t,n),i=Zj("axis",e,t,n),o=Zj("tensors",e,t,n);return o=o.slice(0,a),[r.concat(o,i)];case"Gather":var s=Zj("x",e,t,n),u=Zj("indices",e,t,n);return[r.gather(s,r.cast(u,"int32"),0)];case"GatherV2":var c=Zj("axis",e,t,n),l=Zj("batchDims",e,t,n),f=Zj("x",e,t,n),h=Zj("indices",e,t,n);return[r.gather(f,r.cast(h,"int32"),c,l)];case"Reverse":for(var p=Zj("dims",e,t,n),d=[],m=0;m<p.length;m++)p[m]&&d.push(m);var v=Zj("x",e,t,n);return[r.reverse(v,d)];case"ReverseV2":var g=Zj("axis",e,t,n),y=Zj("x",e,t,n);return[r.reverse(y,g)];case"Slice":var b=Zj("begin",e,t,n),x=Zj("size",e,t,n);return[r.slice(Zj("x",e,t,n),b,x)];case"StridedSlice":var w=Zj("begin",e,t,n),S=Zj("end",e,t,n),_=Zj("strides",e,t,n),T=Zj("beginMask",e,t,n),I=Zj("endMask",e,t,n),N=Zj("ellipsisMask",e,t,n),C=Zj("newAxisMask",e,t,n),E=Zj("shrinkAxisMask",e,t,n),A=Zj("x",e,t,n);return[r.stridedSlice(A,w,S,_,T,I,N,C,E)];case"Pack":return lA((function(){var a=Zj("axis",e,t,n),i=Zj("tensors",e,t,n),o=i[0].shape,s=r.squeeze(i[0]).shape,u=i.map((function(e){var t=kb(e.shape,o);if(!t&&!kb(r.squeeze(e).shape,s))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,o)}));return[r.stack(u,a)]}));case"Unpack":var R=Zj("axis",e,t,n),O=Zj("tensor",e,t,n);return r.unstack(O,R);case"Tile":var M=Zj("reps",e,t,n);return[r.tile(Zj("x",e,t,n),M)];case"Split":case"SplitV":var D=Zj("axis",e,t,n),F=Zj("numOrSizeSplits",e,t,n),P=Zj("x",e,t,n);return r.split(P,F,D);case"ScatterNd":var L=Zj("indices",e,t,n),z=Zj("values",e,t,n),B=Zj("shape",e,t,n);return[r.scatterND(L,z,B)];case"GatherNd":var W=Zj("x",e,t,n),V=Zj("indices",e,t,n);return[r.gatherND(W,V)];case"SparseToDense":var j=Zj("sparseIndices",e,t,n),U=Zj("outputShape",e,t,n),H=Zj("sparseValues",e,t,n),Z=Zj("defaultValue",e,t,n);return[r.sparseToDense(j,H,U,H.dtype===Z.dtype?Z:r.cast(Z,H.dtype))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},sH=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"SparseFillEmptyRows":var a=r.sparse.sparseFillEmptyRows(Zj("indices",e,t,n),Zj("values",e,t,n),Zj("denseShape",e,t,n),Zj("defaultValue",e,t,n)),i=a.outputIndices,o=a.outputValues,s=a.emptyRowIndicator,u=a.reverseIndexMap;return[i,o,s,u];case"SparseReshape":var c=r.sparse.sparseReshape(Zj("inputIndices",e,t,n),Zj("inputShape",e,t,n),Zj("newShape",e,t,n)),l=c.outputIndices,f=c.outputShape;return[l,f];case"SparseSegmentMean":var h=r.sparse.sparseSegmentMean(Zj("data",e,t,n),Zj("indices",e,t,n),Zj("segmentIds",e,t,n));return[h];case"SparseSegmentSum":var p=r.sparse.sparseSegmentSum(Zj("data",e,t,n),Zj("indices",e,t,n),Zj("segmentIds",e,t,n));return[p];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},uH=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"FFT":return[r.fft(Zj("x",e,t,n))];case"IFFT":return[r.ifft(Zj("x",e,t,n))];case"RFFT":return[r.rfft(Zj("x",e,t,n))];case"IRFFT":return[r.irfft(Zj("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},cH=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"StringNGrams":var a=r.string.stringNGrams(Zj("data",e,t,n),Zj("dataSplits",e,t,n),Zj("separator",e,t,n),Zj("nGramWidths",e,t,n),Zj("leftPad",e,t,n),Zj("rightPad",e,t,n),Zj("padWidth",e,t,n),Zj("preserveShortSequences",e,t,n)),i=a.nGrams,o=a.nGramsSplits;return[i,o];case"StringSplit":var s=r.string.stringSplit(Zj("input",e,t,n),Zj("delimiter",e,t,n),Zj("skipEmpty",e,t,n)),u=s.indices,c=s.values,l=s.shape;return[u,c,l];case"StringToHashBucketFast":var f=r.string.stringToHashBucketFast(Zj("input",e,t,n),Zj("numBuckets",e,t,n));return[f];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},lH=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Cast":return[r.cast(Zj("x",e,t,n),Zj("dtype",e,t,n))];case"ExpandDims":var a=Zj("axis",e,t,n);return[r.expandDims(Zj("x",e,t,n),a)];case"Squeeze":var i=Zj("axis",e,t,n);return[r.squeeze(Zj("x",e,t,n),i)];case"Reshape":return[r.reshape(Zj("x",e,t,n),Zj("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(Zj("x",e,t,n),Zj("padding",e,t,n),Zj("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(Zj("x",e,t,n),Zj("padding",e,t,n),Zj("constantValue",e,t,n))];case"SpaceToBatchND":var o=Zj("blockShape",e,t,n),s=Zj("paddings",e,t,n);return[r.spaceToBatchND(Zj("x",e,t,n),o,s)];case"BatchToSpaceND":var u=Zj("blockShape",e,t,n),c=Zj("crops",e,t,n);return[r.batchToSpaceND(Zj("x",e,t,n),u,c)];case"DepthToSpace":var l=Zj("blockSize",e,t,n),f=Zj("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(Zj("x",e,t,n),l,f)];case"BroadcastTo":return[r.broadcastTo(Zj("x",e,t,n),Zj("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(Zj("s0",e,t,n),Zj("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function fH(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:lA,i=function(e,t,n){switch(e.category){case"arithmetic":return a((function(){return MU(e,t,n)}));case"basic_math":return a((function(){return DU(e,t,n)}));case"control":return ZU(e,t,n);case"convolution":return a((function(){return qU(e,t,n)}));case"creation":return a((function(){return KU(e,t,n)}));case"dynamic":return YU(e,t,n);case"evaluation":return a((function(){return $U(e,t,n)}));case"image":return a((function(){return tH(e,t,n)}));case"graph":return a((function(){return QU(e,t,n)}));case"logical":return a((function(){return nH(e,t,n)}));case"matrices":return a((function(){return rH(e,t,n)}));case"normalization":return a((function(){return aH(e,t,n)}));case"reduction":return a((function(){return iH(e,t,n)}));case"slice_join":return a((function(){return oH(e,t,n)}));case"sparse":return a((function(){return sH(e,t,n)}));case"spectral":return a((function(){return uH(e,t,n)}));case"string":return a((function(){return cH(e,t,n)}));case"transformation":return a((function(){return lH(e,t,n)}));case"hash_table":return eH(e,t,n,r);case"custom":var i=Hj(e.op);if(i&&i.customExecutor)return i.customExecutor(new OU(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return Gb(i)?i.then((function(e){return[].concat(e)})):[].concat(i)}var hH=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};N(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return(0,C.Z)(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function pH(e,t,n,r){var a=new Set,i=[],o=null,s=null,u=new Set,c=Object.keys(e).map((function(e){return Xj(e)[0]})),l=[];null!=r&&(l=r.map((function(e){return Xj(e.name)[0]})));for(var f=(0,I.Z)(t);f.length>0;){var h=f.pop();(gH(h)||yH(h)||bH(h))&&null==o&&(s=(o=h).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(h.name),null==n[h.name]&&(-1===c.indexOf(h.name)&&-1===l.indexOf(h.name)&&(0!==h.inputs.length?h.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),f.push(e))})):i.push(h.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}var dH=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],mH=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],vH=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function gH(e){return dH.indexOf(e.op)>=0}function yH(e){return mH.indexOf(e.op)>=0}function bH(e){return vH.indexOf(e.op)>=0}var xH=function(){function e(t,n){var r=this;N(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}return(0,C.Z)(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,(0,I.Z)(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(e,t){var n=pH(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,i=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(i,"]"));if(r.length>0){var o=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(o,"] from the provided inputs ")+"[".concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(e,t,n){var r=n.usedNodes,a=n.inputs,i=[],o=Object.keys(a).map((function(e){return Xj(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;o.forEach((function(e){r.has(e.name)&&i.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&i.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&i.push(e)}));for(var u=new Set,c=[];i.length>0;){var l=i.pop();u.add(l.name),t[l.name]||c.push(l),l.children.forEach((function(e){!u.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return u.has(e.name)}))&&i.push(e)}))}return c}(this.graph,this.weightMap,n)}},{key:"execute",value:function(e,t){var n=this;e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[Xj(e)[0]]})),i=t.map((function(e){return Xj(e)[0]})),o=i.map((function(e){return n.graph.nodes[e]}));this.resetIntermediateTensors(),0===o.length&&(o=this._outputs);var s=this.getCompilationKey(a,o),u=this.compiledMap.get(s);null==u&&(u=this.compile(e,o),this.compiledMap.set(s,u));var c={},l={};return lA((function(){var r=new hH(n.weightMap,c,l,n.functionExecutorMap),a=Object.assign({},n.weightMap);Object.keys(e).forEach((function(t){var n=Xj(t),r=(0,T.Z)(n,2),i=r[0],o=[];o[r[1]]=e[t],a[i]=o}));for(var o=n.getFrozenTensorIds(a),s={},f=0;f<u.length;f++){var h=u[f];if(!a[h.name]){var p=fH(h,a,r,n._resourceManager);if(Gb(p))throw new Error("The execution of the op '".concat(h.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");a[h.name]=p,n.checkTensorForDisposal(h.name,h,a,r,o,i,s)}}return null==n.parent&&r.dispose(o),t.map((function(e){return Gj(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,i,o){var s=this;"control"!==t.category&&-1===i.indexOf(e)&&(n[e].forEach((function(e){null!=e&&(o[e.id]=(o[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var i=function(e,t,n){return t[Kj(e,n.currentContextId)]}(e.name,n,r);null!=i&&i.forEach((function(e){if(e&&!e.kept&&!a.has(e.id)){var n=o[e.id];if(1===n){if(s.keepTensorForDebug){var i=qj(t.name,r),u=(0,T.Z)(i,2),c=u[0],l=u[1];s.intermediateTensors[c]||(s.intermediateTensors[c]=[]),s.intermediateTensors[c][l]=e}else e.dispose();delete o[e.id]}else null!=n&&o[e.id]--}}))}})))}},{key:"executeAsync",value:function(){var e=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"disposeIntermediateTensors",value:function(){var e=this;this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach((function(t){return e.intermediateTensors[t].forEach((function(e){return e.dispose()}))})),this.disposeTensorsMap())}},{key:"disposeTensorsMap",value:function(){var e=this;this.tensorsMap&&Object.keys(this.tensorsMap).forEach((function(t){e.tensorsMap[t].forEach((function(t){!t||t.kept||t.isDisposed||e.keepIds.has(t.id)||t.dispose()}))}))}},{key:"getIntermediateTensors",value:function(){return this.tensorsMap}},{key:"resetIntermediateTensors",value:function(){for(var e in this.intermediateTensors)this.intermediateTensors[e].forEach((function(e){return e.dispose()})),delete this.intermediateTensors[e]}},{key:"_executeAsync",value:function(){var e=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u,c,l=this,f=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=f.length>2&&void 0!==f[2]&&f[2],a=f.length>3&&void 0!==f[3]?f[3]:{},i=f.length>4&&void 0!==f[4]?f[4]:{},r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=$b().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){console.warn(h.message)}return this.resetIntermediateTensors(),o=new hH(this.weightMap,a,i,this.functionExecutorMap),e.next=9,this.executeWithControlFlow(t,o,n,r);case 9:return this.tensorsMap=e.sent,s=n.map((function(e){return Gj(e,l.tensorsMap,o)})),u=s.map((function(e){return e.id})),c=Object.keys(t).map((function(e){return t[e].id})),this.keepIds=new Set([].concat((0,I.Z)(u),(0,I.Z)(c),(0,I.Z)(this.weightIds))),this.keepTensorForDebug||this.disposeTensorsMap(),null==this.parent&&o.dispose(this.keepIds),e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var e=Tn(Sn().mark((function e(t,n,r){var a,i=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[i.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var e=Tn(Sn().mark((function e(t,n,r,a){var i,o,s,u,c,l,f,h,p,d,m,v,g,y,b,x,w,k=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object.keys(t),o=i.map((function(e){return k.graph.nodes[Xj(e)[0]]})),s=r.map((function(e){return Xj(e)[0]})),0===(u=s.map((function(e){return k.graph.nodes[e]}))).length&&(u=this._outputs),c=pH(t,u,this.weightMap,this._initNodes),l=c.usedNodes,f=c.missingInputs,h=c.dynamicNode,p=c.syncInputs,d=[].concat((0,I.Z)(o),(0,I.Z)(this.graph.weights),(0,I.Z)(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),m=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=Xj(e),r=(0,T.Z)(n,2),a=r[0],i=[];i[r[1]]=t[e],m[a]=i})),v={},g=this.getFrozenTensorIds(m),y={};case 12:if(!(d.length>0)){e.next=18;break}return b=this.processStack(o,d,n,m,y,g,s,v,l),e.next=16,Promise.all(b);case 16:e.next=12;break;case 18:if(null!=h||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),x=u.filter((function(e){return!gH(e)&&!Gj(e.name,m,n)})).map((function(e){return e.name})),!(x.length>0)){e.next=24;break}throw w="",null!=h&&(w="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(p,"]")),new Error("Cannot compute the outputs [".concat(x,"] from the provided ")+"inputs [".concat(i,"]. Consider providing the following inputs: ")+"[".concat(f,"]. ").concat(w));case 24:return e.abrupt("return",m);case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"processStack",value:function(e,t,n,r,a,i,o,s,u){for(var c=this,l=[],f=function(){var e=t.pop();n.currentContext=e.contexts;var f="";if("Enter"===e.node.op&&Zj("isConstant",e.node,r,n)){var h=qj(e.node.name,n),p=(0,T.Z)(h,1);f=p[0]}if(null==r[e.node.name]){var d=fH(e.node,r,n,c._resourceManager);if(!f){var m=qj(e.node.name,n),v=(0,T.Z)(m,1);f=v[0]}var g=n.currentContext;Gb(d)?l.push(d.then((function(l){return r[f]=l,n.currentContext=g,c.checkTensorForDisposal(f,e.node,r,n,i,o,s),c.processChildNodes(e.node,t,n,r,a,u),l}))):(r[f]=d,c.checkTensorForDisposal(f,e.node,r,n,i,o,s),c.processChildNodes(e.node,t,n,r,a,u))}else c.processChildNodes(e.node,t,n,r,a,u)};t.length>0;)f();return l}},{key:"processChildNodes",value:function(e,t,n,r,a,i){e.children.forEach((function(e){var o=qj(e.name,n),s=(0,T.Z)(o,1)[0];!a[s]&&i.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!Gj(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!Gj(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=Xj(n),i=(0,T.Z)(a,1)[0],o=t.graph.nodes[i];if(o.attrParams.shape&&o.attrParams.shape.value){var s=o.attrParams.shape.value,u=s.length===r.shape.length&&r.shape.every((function(e,t){return-1===s[t]||s[t]===e}));gb(u,(function(){return"The shape of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be [".concat(s,"], but was ")+"[".concat(r.shape,"]")}))}o.attrParams.dtype&&o.attrParams.dtype.value&&gb(r.dtype===o.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(o.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t={};for(var n in e){if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n])t[this._signature.inputs[n].name]=e[n];else t[n]=e[n]}return t}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=Xj(e),r=(0,T.Z)(n,1)[0];return null==t.graph.nodes[r]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=Xj(e),r=(0,T.Z)(n,1)[0];if(!t.graph.nodes[r])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),wH=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};N(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return(0,C.Z)(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),kH=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;N(this,t),this.modelUrl=n,this.loadOptions=r,this.version="n/a",this.io=a,null==r&&(this.loadOptions={}),this.resourceManager=new wH}return(0,C.Z)(t,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"modelStructuredOutputKeys",get:function(){return this.structuredOutputKeys}},{key:"findIOHandler",value:function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{var t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}},{key:"load",value:function(){var e=this;if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");var t=this.handler.load();return Gb(t)?t.then((function(t){return e.loadSync(t)})):this.loadSync(t)}},{key:"loadSync",value:function(e){this.artifacts=e;var t=this.artifacts.modelTopology,n=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){var r=this.artifacts.userDefinedMetadata;null!=r.signature&&(n=r.signature),null!=r.structuredOutputKeys&&(this.structuredOutputKeys=r.structuredOutputKeys)}this.signature=n,this.version="".concat(t.versions.producer,".").concat(t.versions.minConsumer);var a=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new xH(gU.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(a),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var i=gU.Instance.transformGraph(e.modelInitializer);this.initializer=new xH(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}},{key:"save",value:function(){var e=Tn(Sn().mark((function e(t,n){var r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=this.io.getSaveHandlers(t)).length){e.next=6;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Error("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.abrupt("return",t.save(this.artifacts));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e,t){var n=this,r=this.execute(e,this.outputNodes);if(this.structuredOutputKeys){var a={};return(r instanceof AS?[r]:r).forEach((function(e,t){return a[n.structuredOutputKeys[t]]=e})),a}return r}},{key:"normalizeInputs",value:function(e){if(!(e instanceof AS)&&!Array.isArray(e))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+"the graph model has ".concat(this.inputNodes.length," placeholders, ")+"while there are ".concat(e.length," input tensors."));return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"execute",value:function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var e=Tn(Sn().mark((function e(t,n){var r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=4,this.executor.executeAsync(t,n);case 4:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getIntermediateTensors",value:function(){return this.executor.getIntermediateTensors()}},{key:"disposeIntermediateTensors",value:function(){this.executor.disposeIntermediateTensors()}},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}]),t}();function SH(e){return _H.apply(this,arguments)}function _H(){return _H=Tn(Sn().mark((function t(n){var r,a,i,o=arguments;return Sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},a=o.length>2&&void 0!==o[2]?o[2]:e,null!=n){t.next=4;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 4:return null==r&&(r={}),r.fromTFHub&&"string"===typeof n&&(n=TH(n)),i=new kH(n,r,a),t.next=9,i.load();case 9:return t.abrupt("return",i);case 10:case"end":return t.stop()}}),t)}))),_H.apply(this,arguments)}function TH(e){return e.endsWith("/")||(e+="/"),"".concat(e).concat("model.json").concat("?tfjs-format=file")}function IH(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function NH(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var CH=function(e){return{startEndTensor:e,startPoint:VI(e,[0,0],[-1,2]),endPoint:VI(e,[0,2],[-1,2])}},EH={strides:[8,16],anchors:[2,6]};function AH(e,t){var n,r,a;if(e.topLeft instanceof AS&&e.bottomRight instanceof AS){var i=lA((function(){return[LI([VI(yC(t-1,e.topLeft),0,1),VI(e.topLeft,1,1)]),LI([yC(t-1,VI(e.bottomRight,0,1)),VI(e.bottomRight,1,1)])]}));n=i[0],r=i[1],null!=e.landmarks&&(a=lA((function(){var n=yC(GE([t-1,0]),e.landmarks),r=GE([1,-1]);return BI(n,r)})))}else{var o=e.topLeft,s=o[0],u=o[1],c=e.bottomRight,l=c[0],f=c[1];n=[t-1-s,u],r=[t-1-l,f],null!=e.landmarks&&(a=e.landmarks.map((function(e){return[t-1-e[0],e[1]]})))}var h={topLeft:n,bottomRight:r};return null!=a&&(h.landmarks=a),null!=e.probability&&(h.probability=e.probability instanceof AS?e.probability.clone():e.probability),h}function RH(e,t){return lA((function(){var n;return n=e.hasOwnProperty("box")?e.box:e,VE(function(e,t){var n=BI(e.startPoint,t),r=BI(e.endPoint,t),a=nN([n,r],1);return CH(a)}(n,t).startEndTensor)}))}var OH=function(){function e(e,t,n,r,a,i){this.blazeFaceModel=e,this.width=t,this.height=n,this.maxFaces=r,this.anchorsData=function(e,t,n){for(var r=[],a=0;a<n.strides.length;a++)for(var i=n.strides[a],o=Math.floor((t+i-1)/i),s=Math.floor((e+i-1)/i),u=n.anchors[a],c=0;c<o;c++)for(var l=i*(c+.5),f=0;f<s;f++)for(var h=i*(f+.5),p=0;p<u;p++)r.push([h,l]);return r}(t,n,EH),this.anchors=qE(this.anchorsData),this.inputSizeData=[t,n],this.inputSize=GE([t,n]),this.iouThreshold=a,this.scoreThreshold=i}return e.prototype.getBoundingBoxes=function(e,t,n){return void 0===n&&(n=!0),IH(this,void 0,void 0,(function(){var r,a,i,o,s,u,c,l,f,h,p,d,m,v,g=this;return NH(this,(function(y){switch(y.label){case 0:return r=lA((function(){var t=HR.resizeBilinear(e,[g.width,g.height]),n=BI(yC(kN(t,255),.5),2),r=g.blazeFaceModel.predict(n),a=VE(r),i=function(e,t,n){var r=VI(e,[0,1],[-1,2]),a=uI(r,t),i=VI(e,[0,3],[-1,2]),o=kN(i,n),s=kN(a,n),u=kN(o,2),c=yC(s,u),l=uI(s,u),f=BI(c,n),h=BI(l,n);return nN([f,h],1)}(a,g.anchors,g.inputSize),o=VI(a,[0,0],[-1,1]);return[a,i,VE(WI(o))]})),a=r[0],i=r[1],o=r[2],s=console.warn,console.warn=function(){},u=HR.nonMaxSuppression(i,o,this.maxFaces,this.iouThreshold,this.scoreThreshold),console.warn=s,[4,u.array()];case 1:return c=y.sent(),u.dispose(),l=c.map((function(e){return VI(i,[e,0],[1,-1])})),t?[3,3]:[4,Promise.all(l.map((function(e){return IH(g,void 0,void 0,(function(){var t;return NH(this,(function(n){switch(n.label){case 0:return[4,e.array()];case 1:return t=n.sent(),e.dispose(),[2,t]}}))}))})))];case 2:l=y.sent(),y.label=3;case 3:for(f=e.shape[1],h=e.shape[2],p=t?kN([h,f],this.inputSize):[h/this.inputSizeData[0],f/this.inputSizeData[1]],d=[],m=function(e){var r=l[e],i=lA((function(){var i=CH(r instanceof AS?r:qE(r));if(!n)return i;var s,u=c[e];return s=t?VI(g.anchors,[u,0],[1,2]):g.anchorsData[u],{box:i,landmarks:DI(VE(VI(a,[u,5],[1,-1])),[6,-1]),probability:VI(o,[u],[1]),anchor:s}}));d.push(i)},v=0;v<l.length;v++)m(v);return i.dispose(),o.dispose(),a.dispose(),[2,{boxes:d,scaleFactor:p}]}}))}))},e.prototype.estimateFaces=function(e,t,n,r){return void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=!0),IH(this,void 0,void 0,(function(){var a,i,o,s,u,c,l=this;return NH(this,(function(f){switch(f.label){case 0:return a=function(e){return e instanceof AS?[e.shape[0],e.shape[1]]:[e.height,e.width]}(e),i=a[1],o=lA((function(){return e instanceof AS||(e=QT(e)),XN(bT(e,"float32"),0)})),[4,this.getBoundingBoxes(o,t,r)];case 1:return s=f.sent(),u=s.boxes,c=s.scaleFactor,o.dispose(),t?[2,u.map((function(e){var t=RH(e,c),a={topLeft:VI(t,[0],[2]),bottomRight:VI(t,[2],[2])};if(r){var o=e,s=o.landmarks,u=o.probability,l=o.anchor,f=BI(uI(s,l),c);a.landmarks=f,a.probability=u}return n&&(a=AH(a,i)),a}))]:[2,Promise.all(u.map((function(e){return IH(l,void 0,void 0,(function(){var t,a,o,s,u,l,f,h,p,d,m,v=this;return NH(this,(function(g){switch(g.label){case 0:return t=RH(e,c),r?[3,2]:[4,t.array()];case 1:return u=g.sent(),a={topLeft:u.slice(0,2),bottomRight:u.slice(2)},[3,4];case 2:return[4,Promise.all([e.landmarks,t,e.probability].map((function(e){return IH(v,void 0,void 0,(function(){return NH(this,(function(t){return[2,e.array()]}))}))})))];case 3:o=g.sent(),s=o[0],u=o[1],l=o[2],f=e.anchor,p=(h=c)[0],d=h[1],m=s.map((function(e){return[(e[0]+f[0])*p,(e[1]+f[1])*d]})),a={topLeft:u.slice(0,2),bottomRight:u.slice(2),landmarks:m,probability:l},function(e){e.startEndTensor.dispose(),e.startPoint.dispose(),e.endPoint.dispose()}(e.box),e.landmarks.dispose(),e.probability.dispose(),g.label=4;case 4:return t.dispose(),n&&(a=AH(a,i)),[2,a]}}))}))})))]}}))}))},e}();function MH(e){var t=void 0===e?{}:e,n=t.maxFaces,r=void 0===n?10:n,a=t.inputWidth,i=void 0===a?128:a,o=t.inputHeight,s=void 0===o?128:o,u=t.iouThreshold,c=void 0===u?.3:u,l=t.scoreThreshold,f=void 0===l?.75:l,h=t.modelUrl;return IH(this,void 0,void 0,(function(){var e;return NH(this,(function(t){switch(t.label){case 0:return null==h?[3,2]:[4,SH(h)];case 1:return e=t.sent(),[3,4];case 2:return[4,SH("https://tfhub.dev/tensorflow/tfjs-model/blazeface/1/default/1",{fromTFHub:!0})];case 3:e=t.sent(),t.label=4;case 4:return[2,new OH(e,i,s,r,c,f)]}}))}))}var DH=n(4525),FH=function(){return FH=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},FH.apply(this,arguments)};function PH(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function LH(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var zH=["rightEye","leftEye","noseTip","mouthCenter","rightEarTragion","leftEarTragion"],BH={modelType:"short",runtime:"mediapipe",maxFaces:1},WH=function(){function e(e){var t=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceDetectorSolution=new DH.FaceDetection({locateFile:function(t,n){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+t:n+"/"+t}}),this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode,model:e.modelType}),this.faceDetectorSolution.onResults((function(e){if(t.height=e.image.height,t.width=e.image.width,t.faces=[],null!==e.detections)for(var n=0,r=e.detections;n<r.length;n++){var a=r[n];t.faces.push(t.normalizedToAbsolute(a.landmarks,(void 0,void 0,void 0,{xMin:o=(i=a.boundingBox).xCenter-i.width/2,xMax:o+i.width,yMin:s=i.yCenter-i.height/2,yMax:s+i.height,width:i.width,height:i.height})))}var i,o,s}))}return e.prototype.normalizedToAbsolute=function(e,t){var n=this;return{keypoints:e.map((function(e,t){return{x:e.x*n.width,y:e.y*n.height,name:zH[t]}})),box:{xMin:t.xMin*this.width,yMin:t.yMin*this.height,xMax:t.xMax*this.width,yMax:t.yMax*this.height,width:t.width*this.width,height:t.height*this.height}}},e.prototype.estimateFaces=function(e,t){return PH(this,void 0,void 0,(function(){var n,r;return LH(this,(function(a){switch(a.label){case 0:return t&&t.flipHorizontal&&t.flipHorizontal!==this.selfieMode&&(this.selfieMode=t.flipHorizontal,this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode})),e instanceof AS?(r=ImageData.bind,[4,YT(e)]):[3,2];case 1:return n=new(r.apply(ImageData,[void 0,a.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:n=e,a.label=3;case 3:return e=n,[4,this.faceDetectorSolution.send({image:e})];case 4:return a.sent(),[2,this.faces]}}))}))},e.prototype.dispose=function(){this.faceDetectorSolution.close()},e.prototype.reset=function(){this.faceDetectorSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},e.prototype.initialize=function(){return this.faceDetectorSolution.initialize()},e}();function VH(e){return PH(this,void 0,void 0,(function(){var t,n;return LH(this,(function(r){switch(r.label){case 0:return t=function(e){if(null==e)return FH({},BH);var t=FH({},e);return t.runtime="mediapipe",null==t.modelType&&(t.modelType=BH.modelType),null==t.maxFaces&&(t.maxFaces=BH.maxFaces),t}(e),[4,(n=new WH(t)).initialize()];case 1:return r.sent(),[2,n]}}))}))}function jH(e){return e instanceof AS?{height:e.shape[0],width:e.shape[1]}:{height:e.height,width:e.width}}function UH(e){return e instanceof AS?e:QT(e)}function HH(e,t){gb(0!==e.width,(function(){return t+" width cannot be 0."})),gb(0!==e.height,(function(){return t+" height cannot be 0."}))}function ZH(e,t,n){var r=t.outputTensorSize,a=t.keepAspectRatio,i=t.borderMode,o=t.outputTensorFloatRange,s=jH(e),u=function(e,t){return t?{xCenter:t.xCenter*e.width,yCenter:t.yCenter*e.height,width:t.width*e.width,height:t.height*e.height,rotation:t.rotation}:{xCenter:.5*e.width,yCenter:.5*e.height,width:e.width,height:e.height,rotation:0}}(s,n),c=function(e,t,n){if(void 0===n&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var r=t.height,a=t.width;HH(t,"targetSize"),HH(e,"roi");var i,o,s=r/a,u=e.height/e.width,c=0,l=0;return s>u?(i=e.width,o=e.width*s,l=(1-u/s)/2):(i=e.height/s,o=e.height,c=(1-s/u)/2),e.width=i,e.height=o,{top:l,left:c,right:c,bottom:l}}(u,r,a),l=function(e,t,n,r){var a=e.width,i=e.height,o=r?-1:1,s=Math.cos(e.rotation),u=Math.sin(e.rotation),c=e.xCenter,l=e.yCenter,f=1/t,h=1/n,p=new Array(16);return p[0]=a*s*o*f,p[1]=-i*u*f,p[2]=0,p[3]=(-.5*a*s*o+.5*i*u+c)*f,p[4]=a*u*o*h,p[5]=i*s*h,p[6]=0,p[7]=(-.5*i*s-.5*a*u*o+l)*h,p[8]=0,p[9]=0,p[10]=a*f,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,function(e){if(16!==e.length)throw new Error("Array length must be 16 but got "+e.length);return[[e[0],e[1],e[2],e[3]],[e[4],e[5],e[6],e[7]],[e[8],e[9],e[10],e[11]],[e[12],e[13],e[14],e[15]]]}(p)}(u,s.width,s.height,!1),f=lA((function(){var t=UH(e),n=qE(function(e,t,n){return HH(n,"inputResolution"),[1/n.width*e[0][0]*t.width,1/n.height*e[0][1]*t.width,e[0][3]*t.width,1/n.width*e[1][0]*t.height,1/n.height*e[1][1]*t.height,e[1][3]*t.height,0,0]}(l,s,r),[1,8]),a="zero"===i?"constant":"nearest",u=HR.transform(XN(bT(t,"float32")),n,"bilinear",a,0,[r.height,r.width]);return null!=o?function(e,t){var n=function(e,t,n,r){var a=(r-n)/255;return{scale:a,offset:n-0*a}}(0,0,t[0],t[1]);return lA((function(){return uI(BI(e,n.scale),n.offset)}))}(u,o):u}));return{imageTensor:f,padding:c,transformationMatrix:l}}function GH(e){null==e.reduceBoxesInLowestLayer&&(e.reduceBoxesInLowestLayer=!1),null==e.interpolatedScaleAspectRatio&&(e.interpolatedScaleAspectRatio=1),null==e.fixedAnchorSize&&(e.fixedAnchorSize=!1);for(var t=[],n=0;n<e.numLayers;){for(var r=[],a=[],i=[],o=[],s=n;s<e.strides.length&&e.strides[s]===e.strides[n];){var u=qH(e.minScale,e.maxScale,s,e.strides.length);if(0===s&&e.reduceBoxesInLowestLayer)i.push(1),i.push(2),i.push(.5),o.push(.1),o.push(u),o.push(u);else{for(var c=0;c<e.aspectRatios.length;++c)i.push(e.aspectRatios[c]),o.push(u);if(e.interpolatedScaleAspectRatio>0){var l=s===e.strides.length-1?1:qH(e.minScale,e.maxScale,s+1,e.strides.length);o.push(Math.sqrt(u*l)),i.push(e.interpolatedScaleAspectRatio)}}s++}for(var f=0;f<i.length;++f){var h=Math.sqrt(i[f]);r.push(o[f]/h),a.push(o[f]*h)}var p=0,d=0;if(e.featureMapHeight.length>0)p=e.featureMapHeight[n],d=e.featureMapWidth[n];else{var m=e.strides[n];p=Math.ceil(e.inputSizeHeight/m),d=Math.ceil(e.inputSizeWidth/m)}for(var v=0;v<p;++v)for(var g=0;g<d;++g)for(var y=0;y<r.length;++y){var b={xCenter:(g+e.anchorOffsetX)/d,yCenter:(v+e.anchorOffsetY)/p,width:0,height:0};e.fixedAnchorSize?(b.width=1,b.height=1):(b.width=a[y],b.height=r[y]),t.push(b)}n=s}return t}function qH(e,t,n,r){return 1===r?.5*(e+t):e+(t-e)*n/(r-1)}function KH(e,t){var n=t[0],r=t[1];return[n*e[0]+r*e[1]+e[3],n*e[4]+r*e[5]+e[7]]}function XH(e,t,n,r){return PH(this,void 0,void 0,(function(){var r,a,i,o,s;return LH(this,(function(u){switch(u.label){case 0:return e.sort((function(e,t){return Math.max.apply(Math,t.score)-Math.max.apply(Math,e.score)})),r=qE(e.map((function(e){return[e.locationData.relativeBoundingBox.yMin,e.locationData.relativeBoundingBox.xMin,e.locationData.relativeBoundingBox.yMax,e.locationData.relativeBoundingBox.xMax]}))),a=GE(e.map((function(e){return e.score[0]}))),[4,HR.nonMaxSuppressionAsync(r,a,t,n)];case 1:return[4,(i=u.sent()).array()];case 2:return o=u.sent(),s=e.filter((function(e,t){return o.indexOf(t)>-1})),fA([r,a,i]),[2,s]}}))}))}function YH(e,t,n){return PH(this,void 0,void 0,(function(){var r,a,i,o,s;return LH(this,(function(u){switch(u.label){case 0:return r=e[0],a=e[1],i=function(e,t,n){return lA((function(){var r,a,i,o;n.reverseOutputOrder?(a=VE(VI(e,[0,n.boxCoordOffset+0],[-1,1])),r=VE(VI(e,[0,n.boxCoordOffset+1],[-1,1])),o=VE(VI(e,[0,n.boxCoordOffset+2],[-1,1])),i=VE(VI(e,[0,n.boxCoordOffset+3],[-1,1]))):(r=VE(VI(e,[0,n.boxCoordOffset+0],[-1,1])),a=VE(VI(e,[0,n.boxCoordOffset+1],[-1,1])),i=VE(VI(e,[0,n.boxCoordOffset+2],[-1,1])),o=VE(VI(e,[0,n.boxCoordOffset+3],[-1,1]))),a=uI(BI(kN(a,n.xScale),t.w),t.x),r=uI(BI(kN(r,n.yScale),t.h),t.y),n.applyExponentialOnBoxSize?(i=BI(KN(kN(i,n.hScale)),t.h),o=BI(KN(kN(o,n.wScale)),t.w)):(i=BI(kN(i,n.hScale),t.h),o=BI(kN(o,n.wScale),t.h));var s=yC(r,kN(i,2)),u=yC(a,kN(o,2)),c=uI(r,kN(i,2)),l=uI(a,kN(o,2)),f=LI([DI(s,[n.numBoxes,1]),DI(u,[n.numBoxes,1]),DI(c,[n.numBoxes,1]),DI(l,[n.numBoxes,1])],1);if(n.numKeypoints)for(var h=0;h<n.numKeypoints;++h){var p=n.keypointCoordOffset+h*n.numValuesPerKeypoint,d=void 0,m=void 0;n.reverseOutputOrder?(d=VE(VI(e,[0,p],[-1,1])),m=VE(VI(e,[0,p+1],[-1,1]))):(m=VE(VI(e,[0,p],[-1,1])),d=VE(VI(e,[0,p+1],[-1,1])));var v=uI(BI(kN(d,n.xScale),t.w),t.x),g=uI(BI(kN(m,n.yScale),t.h),t.y);f=LI([f,DI(v,[n.numBoxes,1]),DI(g,[n.numBoxes,1])],1)}return f}))}(a,t,n),o=lA((function(){var e=r;return n.sigmoidScore?(null!=n.scoreClippingThresh&&(e=eN(r,-n.scoreClippingThresh,n.scoreClippingThresh)),e=WI(e)):e})),[4,$H(i,o,n)];case 1:return s=u.sent(),fA([i,o]),[2,s]}}))}))}function $H(e,t,n){return PH(this,void 0,void 0,(function(){var r,a,i,o,s,u,c,l,f,h,p,d;return LH(this,(function(m){switch(m.label){case 0:return r=[],[4,e.data()];case 1:return a=m.sent(),[4,t.data()];case 2:for(i=m.sent(),o=0;o<n.numBoxes;++o)if(!(null!=n.minScoreThresh&&i[o]<n.minScoreThresh||(s=o*n.numCoords,u=QH(a[s+0],a[s+1],a[s+2],a[s+3],i[o],n.flipVertically,o),(c=u.locationData.relativeBoundingBox).width<0||c.height<0))){if(n.numKeypoints>0)for((l=u.locationData).relativeKeypoints=[],f=n.numKeypoints*n.numValuesPerKeypoint,h=0;h<f;h+=n.numValuesPerKeypoint)p=s+n.keypointCoordOffset+h,d={x:a[p+0],y:n.flipVertically?1-a[p+1]:a[p+1]},l.relativeKeypoints.push(d);r.push(u)}return[2,r]}}))}))}function QH(e,t,n,r,a,i,o){return{score:[a],ind:o,locationData:{relativeBoundingBox:{xMin:t,yMin:i?1-n:e,xMax:r,yMax:i?1-e:n,width:r-t,height:n-e}}}}var JH,eZ={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:128,inputSizeWidth:128,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},tZ={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:0,featureMapHeight:[],featureMapWidth:[],numLayers:1,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[4],aspectRatios:[1],fixedAnchorSize:!0},nZ={runtime:"tfjs",modelType:"short",maxFaces:1,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"},rZ={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:896,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:128,yScale:128,hScale:128,wScale:128,minScoreThresh:.5},aZ={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2304,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.6},iZ={outputTensorSize:{width:128,height:128},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},oZ={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},sZ=function(){function e(e,t,n){this.detectorModel=t,this.maxFaces=n,"full"===e?(this.imageToTensorConfig=oZ,this.tensorsToDetectionConfig=aZ,this.anchors=GH(tZ)):(this.imageToTensorConfig=iZ,this.tensorsToDetectionConfig=rZ,this.anchors=GH(eZ));var r=GE(this.anchors.map((function(e){return e.width}))),a=GE(this.anchors.map((function(e){return e.height}))),i=GE(this.anchors.map((function(e){return e.xCenter}))),o=GE(this.anchors.map((function(e){return e.yCenter})));this.anchorTensor={x:i,y:o,w:r,h:a}}return e.prototype.dispose=function(){this.detectorModel.dispose(),fA([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},e.prototype.reset=function(){},e.prototype.detectFaces=function(e,t){return void 0===t&&(t=!1),PH(this,void 0,void 0,(function(){var n,r,a,i,o,s,u,c,l,f,h;return LH(this,(function(p){switch(p.label){case 0:return null==e?(this.reset(),[2,[]]):(n=lA((function(){var n=bT(UH(e),"float32");return t&&(n=VE(HR.flipLeftRight(XN(n,0)),[0])),n})),r=ZH(n,this.imageToTensorConfig),a=r.imageTensor,i=r.transformationMatrix,o=this.detectorModel.execute(a,"Identity:0"),s=function(e){return lA((function(){var t=function(e){return lA((function(){return[VI(e,[0,0,0],[1,-1,1]),VI(e,[0,0,1],[1,-1,-1])]}))}(e),n=t[0],r=t[1];return{boxes:VE(r),logits:VE(n)}}))}(o),u=s.boxes,[4,YH([c=s.logits,u],this.anchorTensor,this.tensorsToDetectionConfig)]);case 1:return 0===(l=p.sent()).length?(fA([n,a,o,c,u]),[2,l]):[4,XH(l,this.maxFaces,.3)];case 2:return f=p.sent(),h=function(e,t){void 0===e&&(e=[]);var n,r=(n=t,[].concat.apply([],n));return e.forEach((function(e){var t=e.locationData;t.relativeKeypoints.forEach((function(e){var t=KH(r,[e.x,e.y]),n=t[0],a=t[1];e.x=n,e.y=a}));var n=t.relativeBoundingBox,a=Number.MAX_VALUE,i=Number.MAX_VALUE,o=Number.MIN_VALUE,s=Number.MIN_VALUE;[[n.xMin,n.yMin],[n.xMin+n.width,n.yMin],[n.xMin+n.width,n.yMin+n.height],[n.xMin,n.yMin+n.height]].forEach((function(e){var t=KH(r,e),n=t[0],u=t[1];a=Math.min(a,n),o=Math.max(o,n),i=Math.min(i,u),s=Math.max(s,u)})),t.relativeBoundingBox={xMin:a,xMax:o,yMin:i,yMax:s,width:o-a,height:s-i}})),e}(f,i),fA([n,a,o,c,u]),[2,h]}}))}))},e.prototype.estimateFaces=function(e,t){return PH(this,void 0,void 0,(function(){var n,r;return LH(this,(function(a){return n=jH(e),r=!!t&&t.flipHorizontal,[2,this.detectFaces(e,r).then((function(e){return e.map((function(e){for(var t=e.locationData.relativeKeypoints.map((function(e,t){return FH(FH({},e),{x:e.x*n.width,y:e.y*n.height,name:zH[t]})})),r=e.locationData.relativeBoundingBox,a=0,i=["width","xMax","xMin"];a<i.length;a++)r[i[a]]*=n.width;for(var o=0,s=["height","yMax","yMin"];o<s.length;o++)r[s[o]]*=n.height;return{keypoints:t,box:r}}))}))]}))}))},e}();function uZ(e){return PH(this,void 0,void 0,(function(){var t,n,r;return LH(this,(function(a){switch(a.label){case 0:return t=function(e){if(null==e)return FH({},nZ);var t=FH({},e);return null==t.modelType&&(t.modelType=nZ.modelType),null==t.maxFaces&&(t.maxFaces=nZ.maxFaces),null==t.detectorModelUrl&&("full"===t.modelType?t.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/full/1":t.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"),t}(e),n="string"==typeof t.detectorModelUrl&&t.detectorModelUrl.indexOf("https://tfhub.dev")>-1,[4,SH(t.detectorModelUrl,{fromTFHub:n})];case 1:return r=a.sent(),[2,new sZ(t.modelType,r,t.maxFaces)]}}))}))}function cZ(e,t){return PH(this,void 0,void 0,(function(){var n,r;return LH(this,(function(a){if(e===JH.MediaPipeFaceDetector){if(r=void 0,null!=(n=t)){if("tfjs"===n.runtime)return[2,uZ(n)];if("mediapipe"===n.runtime)return[2,VH(n)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+r)}throw new Error(e+" is not a supported model name.")}))}))}!function(e){e.MediaPipeFaceDetector="MediaPipeFaceDetector"}(JH||(JH={}));var lZ="/index.js",fZ=Object.defineProperty,hZ=n(6741),pZ=function(e,t){for(var n in t)fZ(e,n,{get:t[n],enumerable:!0})};pZ({},{Abs:function(){return $G},Acos:function(){return QG},Acosh:function(){return JG},AdadeltaOptimizer:function(){return q6},AdagradOptimizer:function(){return K6},AdamOptimizer:function(){return X6},AdamaxOptimizer:function(){return Y6},Add:function(){return eq},AddN:function(){return tq},All:function(){return nq},Any:function(){return rq},ArgMax:function(){return aq},ArgMin:function(){return iq},Asin:function(){return oq},Asinh:function(){return sq},Atan:function(){return uq},Atan2:function(){return lq},Atanh:function(){return cq},AvgPool:function(){return fq},AvgPool3D:function(){return pq},AvgPool3DGrad:function(){return dq},AvgPoolGrad:function(){return hq},BackendWasm:function(){return jOe},BatchMatMul:function(){return mq},BatchToSpaceND:function(){return vq},Bincount:function(){return gq},BroadcastArgs:function(){return bq},BroadcastTo:function(){return yq},Callback:function(){return Due},CallbackList:function(){return ore},Cast:function(){return xq},Ceil:function(){return wq},ClipByValue:function(){return kq},Complex:function(){return Sq},ComplexAbs:function(){return _q},Concat:function(){return Tq},Conv2D:function(){return Iq},Conv2DBackpropFilter:function(){return Nq},Conv2DBackpropInput:function(){return Cq},Conv3D:function(){return Eq},Conv3DBackpropFilterV2:function(){return Aq},Conv3DBackpropInputV2:function(){return Rq},Cos:function(){return Oq},Cosh:function(){return Mq},CropAndResize:function(){return Pq},Cumprod:function(){return Dq},Cumsum:function(){return Fq},CustomCallback:function(){return cre},DataStorage:function(){return ZZ},DenseBincount:function(){return Lq},DepthToSpace:function(){return zq},DepthwiseConv2dNative:function(){return Bq},DepthwiseConv2dNativeBackpropFilter:function(){return Wq},DepthwiseConv2dNativeBackpropInput:function(){return Vq},Diag:function(){return jq},Dilation2D:function(){return Uq},Dilation2DBackpropFilter:function(){return Zq},Dilation2DBackpropInput:function(){return Hq},ENV:function(){return KG},EarlyStopping:function(){return Lue},Einsum:function(){return qq},Elu:function(){return Kq},EluGrad:function(){return Xq},Environment:function(){return UG},Equal:function(){return $q},Erf:function(){return Yq},Exp:function(){return Qq},ExpandDims:function(){return Jq},Expm1:function(){return eK},FFT:function(){return tK},Fill:function(){return nK},FlipLeftRight:function(){return rK},Floor:function(){return aK},FloorDiv:function(){return iK},FromPixels:function(){return iY},FusedBatchNorm:function(){return oK},FusedConv2D:function(){return uY},FusedDepthwiseConv2D:function(){return cY},GPGPUContext:function(){return cwe},GatherNd:function(){return uK},GatherV2:function(){return sK},GraphModel:function(){return jle},Greater:function(){return cK},GreaterEqual:function(){return lK},History:function(){return ure},IFFT:function(){return hK},Identity:function(){return fK},Imag:function(){return pK},InputSpec:function(){return sne},IsFinite:function(){return dK},IsInf:function(){return mK},IsNan:function(){return vK},KernelBackend:function(){return GZ},LRN:function(){return EK},LRNGrad:function(){return AK},LayerVariable:function(){return ane},LayersModel:function(){return Tae},LeakyRelu:function(){return gK},Less:function(){return yK},LessEqual:function(){return bK},LinSpace:function(){return xK},Log:function(){return wK},Log1p:function(){return kK},LogSoftmax:function(){return NK},LogicalAnd:function(){return SK},LogicalNot:function(){return _K},LogicalOr:function(){return TK},LogicalXor:function(){return IK},LowerBound:function(){return CK},MathBackendWebGL:function(){return Ake},Max:function(){return RK},MaxPool:function(){return MK},MaxPool3D:function(){return FK},MaxPool3DGrad:function(){return PK},MaxPoolGrad:function(){return DK},MaxPoolWithArgmax:function(){return LK},Maximum:function(){return OK},Mean:function(){return zK},Min:function(){return BK},Minimum:function(){return WK},MirrorPad:function(){return VK},Mod:function(){return jK},MomentumOptimizer:function(){return Q6},Multinomial:function(){return UK},Multiply:function(){return HK},Neg:function(){return ZK},NonMaxSuppressionV3:function(){return qK},NonMaxSuppressionV4:function(){return KK},NonMaxSuppressionV5:function(){return XK},NotEqual:function(){return GK},OP_SCOPE_SUFFIX:function(){return W$},OneHot:function(){return $K},OnesLike:function(){return YK},Optimizer:function(){return G6},OptimizerConstructors:function(){return e8},Pack:function(){return QK},PadV2:function(){return JK},Pool:function(){return eX},Pow:function(){return tX},Prelu:function(){return nX},Prod:function(){return rX},RMSPropOptimizer:function(){return J6},RNN:function(){return Pie},RaggedGather:function(){return aX},RaggedRange:function(){return iX},RaggedTensorToTensor:function(){return oX},Range:function(){return sX},Rank:function(){return u$},Real:function(){return uX},RealDiv:function(){return Gq},Reciprocal:function(){return cX},Reduction:function(){return b6},Relu:function(){return lX},Relu6:function(){return vX},Reshape:function(){return fX},ResizeBilinear:function(){return dX},ResizeBilinearGrad:function(){return mX},ResizeNearestNeighbor:function(){return hX},ResizeNearestNeighborGrad:function(){return pX},Reverse:function(){return gX},RotateWithOffset:function(){return oY},Round:function(){return yX},Rsqrt:function(){return bX},SGDOptimizer:function(){return $6},ScatterNd:function(){return xX},SearchSorted:function(){return wX},Select:function(){return kX},Selu:function(){return SX},Sequential:function(){return Dae},Sigmoid:function(){return CX},Sign:function(){return NX},Sin:function(){return TX},Sinh:function(){return IX},Slice:function(){return _X},Softmax:function(){return DX},Softplus:function(){return EX},SpaceToBatchND:function(){return OX},SparseFillEmptyRows:function(){return FX},SparseReshape:function(){return PX},SparseSegmentMean:function(){return LX},SparseSegmentSum:function(){return zX},SparseToDense:function(){return BX},SplitV:function(){return MX},Sqrt:function(){return AX},Square:function(){return VX},SquaredDifference:function(){return WX},Step:function(){return aY},StridedSlice:function(){return jX},StringNGrams:function(){return UX},StringSplit:function(){return HX},StringToHashBucketFast:function(){return ZX},Sub:function(){return GX},Sum:function(){return RX},SymbolicTensor:function(){return une},Tan:function(){return qX},Tanh:function(){return KX},Tensor:function(){return i$},TensorBuffer:function(){return n$},Tile:function(){return XX},TopK:function(){return YX},Transform:function(){return $X},Transpose:function(){return QX},Unique:function(){return JX},Unpack:function(){return eY},UnsortedSegmentSum:function(){return tY},UpperBound:function(){return nY},Variable:function(){return s$},ZerosLike:function(){return rY},_FusedMatMul:function(){return sY},abs:function(){return f1},acos:function(){return h1},acosh:function(){return p1},add:function(){return s1},addN:function(){return d1},all:function(){return m1},any:function(){return v1},argMax:function(){return g1},argMin:function(){return y1},asin:function(){return b1},asinh:function(){return x1},atan:function(){return w1},atan2:function(){return k1},atanh:function(){return S1},avgPool:function(){return V1},avgPool3d:function(){return j1},backend:function(){return YJ},backend_util:function(){return i8},basicLSTMCell:function(){return q1},batchNorm:function(){return Y1},batchNorm2d:function(){return $1},batchNorm3d:function(){return Q1},batchNorm4d:function(){return J1},batchToSpaceND:function(){return K1},bincount:function(){return e2},booleanMaskAsync:function(){return v5},broadcastArgs:function(){return t2},broadcastTo:function(){return n2},broadcast_util:function(){return r0},browser:function(){return u0},buffer:function(){return eJ},callbacks:function(){return Wue},cast:function(){return tJ},ceil:function(){return r2},clipByValue:function(){return i2},clone:function(){return nJ},complex:function(){return j$},concat:function(){return U1},concat1d:function(){return o2},concat2d:function(){return s2},concat3d:function(){return u2},concat4d:function(){return c2},constraints:function(){return Sne},conv1d:function(){return f2},conv2d:function(){return l2},conv2dTranspose:function(){return p2},conv3d:function(){return d2},conv3dTranspose:function(){return v2},copyRegisteredKernels:function(){return wY},cos:function(){return g2},cosh:function(){return y2},cosineWindow:function(){return _5},cumprod:function(){return b2},cumsum:function(){return x2},customGrad:function(){return k3},data:function(){return Kle},denseBincount:function(){return w2},deprecationWarn:function(){return DJ},depthToSpace:function(){return k2},depthwiseConv2d:function(){return S2},deregisterOp:function(){return Hue},device_util:function(){return A$},diag:function(){return _2},dilation2d:function(){return T2},disableDeprecationWarnings:function(){return MJ},dispose:function(){return WJ},disposeVariables:function(){return FJ},div:function(){return c1},divNoNan:function(){return E2},dot:function(){return A2},dropout:function(){return k5},einsum:function(){return R2},elu:function(){return O2},enableDebugMode:function(){return OJ},enableProdMode:function(){return RJ},enclosingPowerOfTwo:function(){return S5},engine:function(){return PJ},env:function(){return GG},equal:function(){return I2},erf:function(){return M2},euclideanNorm:function(){return $2},exp:function(){return Q2},expandDims:function(){return J2},expm1:function(){return e3},eye:function(){return n3},fft:function(){return U4},fill:function(){return a2},findBackend:function(){return qJ},findBackendFactory:function(){return KJ},floor:function(){return r3},floorDiv:function(){return u1},forceHalfFloat:function(){return Oke},fused:function(){return N5},gather:function(){return a3},gatherND:function(){return w5},gather_util:function(){return g0},getBackend:function(){return ZJ},getGradient:function(){return mY},getKernel:function(){return dY},getKernelsForBackend:function(){return vY},getThreadsCount:function(){return aMe},gpgpu_util:function(){return Wxe},grad:function(){return g3},grads:function(){return y3},greater:function(){return i3},greaterEqual:function(){return o3},ifft:function(){return H4},imag:function(){return QJ},image:function(){return V6},inTopKAsync:function(){return I5},initializers:function(){return zne},input:function(){return Lae},io:function(){return aJ},irfft:function(){return Z4},isFinite:function(){return s3},isInf:function(){return u3},isNaN:function(){return c3},keep:function(){return VJ},kernel_impls:function(){return c7},layers:function(){return tre},leakyRelu:function(){return l3},less:function(){return f3},lessEqual:function(){return h3},linalg:function(){return j6},linspace:function(){return p3},loadGraphModel:function(){return Ule},loadGraphModelSync:function(){return Zle},loadLayersModel:function(){return Eae},localResponseNormalization:function(){return d3},log:function(){return m3},log1p:function(){return v3},logSigmoid:function(){return T3},logSoftmax:function(){return N3},logSumExp:function(){return C3},logicalAnd:function(){return E3},logicalNot:function(){return A3},logicalOr:function(){return R3},logicalXor:function(){return O3},losses:function(){return U6},lowerBound:function(){return F3},matMul:function(){return EJ},math:function(){return CJ},max:function(){return j2},maxPool:function(){return P3},maxPool3d:function(){return L3},maxPoolWithArgmax:function(){return z3},maximum:function(){return B3},mean:function(){return W3},memory:function(){return LJ},meshgrid:function(){return U3},metrics:function(){return pue},min:function(){return U2},minimum:function(){return H3},mirrorPad:function(){return Z3},mod:function(){return G3},model:function(){return Fae},models:function(){return Eue},moments:function(){return q3},movingAverage:function(){return g5},mul:function(){return l1},multiRNNCell:function(){return K3},multinomial:function(){return X3},neg:function(){return JJ},nextFrame:function(){return r8},norm:function(){return Y2},notEqual:function(){return Y3},oneHot:function(){return AJ},ones:function(){return j3},onesLike:function(){return $3},op:function(){return V$},outerProduct:function(){return Q3},pad:function(){return J3},pad1d:function(){return e4},pad2d:function(){return t4},pad3d:function(){return n4},pad4d:function(){return r4},pool:function(){return i4},pow:function(){return H2},prelu:function(){return o4},print:function(){return rJ},prod:function(){return s4},profile:function(){return zJ},raggedGather:function(){return u4},raggedRange:function(){return c4},raggedTensorToTensor:function(){return l4},rand:function(){return f4},randomGamma:function(){return v4},randomNormal:function(){return g4},randomStandardNormal:function(){return y4},randomUniform:function(){return b4},range:function(){return x4},ready:function(){return HJ},real:function(){return e0},reciprocal:function(){return w4},registerBackend:function(){return XJ},registerCallbackConstructor:function(){return zae},registerGradient:function(){return yY},registerKernel:function(){return gY},registerOp:function(){return jue},regularizers:function(){return Aue},relu:function(){return k4},relu6:function(){return S4},removeBackend:function(){return GJ},reshape:function(){return W1},reverse:function(){return _4},reverse1d:function(){return T4},reverse2d:function(){return I4},reverse3d:function(){return N4},reverse4d:function(){return C4},rfft:function(){return q4},round:function(){return E4},rsqrt:function(){return A4},scalar:function(){return Z2},scatterND:function(){return y5},scatter_util:function(){return b0},searchSorted:function(){return D3},selu:function(){return R4},separableConv2d:function(){return O4},sequential:function(){return Pae},serialization:function(){return V0},setBackend:function(){return UJ},setPlatform:function(){return $J},setThreadsCount:function(){return rMe},setWasmPath:function(){return JOe},setWasmPaths:function(){return eMe},setWebGLContext:function(){return Xye},setdiff1dAsync:function(){return D4},sigmoid:function(){return H1},sign:function(){return F4},signal:function(){return W6},sin:function(){return P4},sinh:function(){return L4},slice:function(){return Z1},slice1d:function(){return z4},slice2d:function(){return B4},slice3d:function(){return W4},slice4d:function(){return V4},slice_util:function(){return S0},softmax:function(){return j4},softplus:function(){return _3},spaceToBatchND:function(){return a4},sparse:function(){return H6},sparseToDense:function(){return x5},spectral:function(){return B6},split:function(){return G4},sqrt:function(){return G2},square:function(){return q2},squaredDifference:function(){return K4},squeeze:function(){return X4},stack:function(){return Y4},step:function(){return $4},stridedSlice:function(){return Q4},string:function(){return Z6},sub:function(){return I3},sum:function(){return K2},sumOutType:function(){return v$},tan:function(){return J4},tanh:function(){return G1},tensor:function(){return H$},tensor1d:function(){return e5},tensor2d:function(){return t5},tensor3d:function(){return c0},tensor4d:function(){return n5},tensor5d:function(){return r5},tensor6d:function(){return a5},tensor_util:function(){return p$},test_util:function(){return Z0},tidy:function(){return BJ},tile:function(){return t3},time:function(){return jJ},topk:function(){return i5},train:function(){return t8},transpose:function(){return t0},truncatedNormal:function(){return o5},unique:function(){return s5},unregisterGradient:function(){return xY},unregisterKernel:function(){return bY},unsortedSegmentSum:function(){return u5},unstack:function(){return c5},upcastType:function(){return m$},upperBound:function(){return l5},util:function(){return SY},valueAndGrad:function(){return b3},valueAndGrads:function(){return x3},variable:function(){return f5},variableGrads:function(){return w3},version:function(){return sMe},version_converter:function(){return qle},version_core:function(){return o1},version_layers:function(){return qre},version_wasm:function(){return iMe},version_webgl:function(){return Rke},webgl:function(){return Mke},webgl_util:function(){return Uye},where:function(){return N2},whereAsync:function(){return d5},zeros:function(){return V3},zerosLike:function(){return C2}});var dZ=Object.create,mZ=Object.defineProperty,vZ=Object.getOwnPropertyDescriptor,gZ=Object.getOwnPropertyNames,yZ=Object.getPrototypeOf,bZ=Object.prototype.hasOwnProperty,xZ=function(e){return"undefined"!=typeof hZ?hZ:"undefined"!=typeof Proxy?new Proxy(e,{get:function(e,t){return("undefined"!=typeof hZ?hZ:e)[t]}}):e}((function(e){if("undefined"!=typeof hZ)return hZ.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')})),wZ=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},kZ=function(e,t){for(var n in t)mZ(e,n,{get:t[n],enumerable:!0})},SZ=function(e,t,n){return n=null!=e?dZ(yZ(e)):{},function(e,t,n,r){if(t&&"object"==typeof t||"function"==typeof t){var a,i=Oo(gZ(t));try{var o=function(){var i=a.value;!bZ.call(e,i)&&i!==n&&mZ(e,i,{get:function(){return t[i]},enumerable:!(r=vZ(t,i))||r.enumerable})};for(i.s();!(a=i.n()).done;)o()}catch(cBe){i.e(cBe)}finally{i.f()}}return e}(!t&&e&&e.__esModule?n:mZ(n,"default",{value:e,enumerable:!0}),e)},_Z=wZ((function(e,t){t.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(ql){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function a(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=a;var i={},o={};function s(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=c(e,(0|e)<0?-1:0,!0),a&&(o[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=c(e,e<0?-1:0,!1),a&&(i[e]=n),n)}function u(e,t){if(isNaN(e))return t?y:g;if(t){if(e<0)return y;if(e>=d)return S}else{if(e<=-m)return _;if(e+1>=m)return k}return e<0?u(-e,t).neg():c(e%p|0,e/p|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=s,r.fromNumber=u,r.fromBits=c;var l=Math.pow;function f(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return f(e.substring(1),t,n).neg();for(var a=u(l(n,8)),i=g,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),c=parseInt(e.substring(o,o+s),n);if(s<8){var h=u(l(n,s));i=i.mul(h).add(u(c))}else i=(i=i.mul(a)).add(u(c))}return i.unsigned=t,i}function h(e,t){return"number"==typeof e?u(e,t):"string"==typeof e?f(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=f,r.fromValue=h;var p=4294967296,d=p*p,m=d/2,v=s(1<<24),g=s(0);r.ZERO=g;var y=s(0,!0);r.UZERO=y;var b=s(1);r.ONE=b;var x=s(1,!0);r.UONE=x;var w=s(-1);r.NEG_ONE=w;var k=c(-1,2147483647,!1);r.MAX_VALUE=k;var S=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=S;var _=c(0,-2147483648,!1);r.MIN_VALUE=_;var T=r.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},T.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(_)){var t=u(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=u(l(e,6),this.unsigned),i=this,o="";;){var s=i.div(a),c=(i.sub(s.mul(a)).toInt()>>>0).toString(e);if((i=s).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1===(1&this.low)},T.isEven=function(){return 0===(1&this.low)},T.equals=function(e){return a(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},T.eq=T.equals,T.notEquals=function(e){return!this.eq(e)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(e){return this.comp(e)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(e){return this.comp(e)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(e){return this.comp(e)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(e){return this.comp(e)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(e){if(a(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(_)?_:this.not().add(b)},T.neg=T.negate,T.add=function(e){a(e)||(e=h(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,u=e.low>>>16,l=0,f=0,p=0,d=0;return p+=(d+=i+(65535&e.low))>>>16,f+=(p+=r+u)>>>16,l+=(f+=n+s)>>>16,l+=t+o,c((p&=65535)<<16|(d&=65535),(l&=65535)<<16|(f&=65535),this.unsigned)},T.subtract=function(e){return a(e)||(e=h(e)),this.add(e.neg())},T.sub=T.subtract,T.multiply=function(e){if(this.isZero())return g;if(a(e)||(e=h(e)),n)return c(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(_))return e.isOdd()?_:g;if(e.eq(_))return this.isOdd()?_:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return u(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,l=65535&e.high,f=e.low>>>16,p=65535&e.low,d=0,m=0,y=0,b=0;return y+=(b+=o*p)>>>16,m+=(y+=i*p)>>>16,y&=65535,m+=(y+=o*f)>>>16,d+=(m+=r*p)>>>16,m&=65535,d+=(m+=i*f)>>>16,m&=65535,d+=(m+=o*l)>>>16,d+=t*p+r*f+i*l+o*s,c((y&=65535)<<16|(b&=65535),(d&=65535)<<16|(m&=65535),this.unsigned)},T.mul=T.multiply,T.divide=function(e){if(a(e)||(e=h(e)),e.isZero())throw Error("division by zero");var t,r,i;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return x;i=y}else{if(this.eq(_))return e.eq(b)||e.eq(w)?_:e.eq(_)?b:(t=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?b:w:(r=this.sub(e.mul(t)),i=t.add(r.div(e)));if(e.eq(_))return this.unsigned?y:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=g}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),s=o<=48?1:l(2,o-48),f=u(t),p=f.mul(e);p.isNegative()||p.gt(r);)p=(f=u(t-=s,this.unsigned)).mul(e);f.isZero()&&(f=b),i=i.add(f),r=r.sub(p)}return i},T.div=T.divide,T.modulo=function(e){return a(e)||(e=h(e)),n?c((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return c(~this.low,~this.high,this.unsigned)},T.and=function(e){return a(e)||(e=h(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},T.or=function(e){return a(e)||(e=h(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},T.xor=function(e){return a(e)||(e=h(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},T.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},T.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},T.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}})),TZ=wZ((function(){})),IZ=wZ((function(){})),NZ=wZ((function(e,t){!function(e,t,n){function r(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){var n=new r(e),i=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.alea=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)})),CZ=wZ((function(e,t){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xor128=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)})),EZ=wZ((function(e,t){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xorwow=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)})),AZ=wZ((function(e,t){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&(i.x&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xorshift7=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)})),RZ=wZ((function(e,t){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&(i.X&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xor4096=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)})),OZ=wZ((function(e,t){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.tychei=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)})),MZ=wZ((function(){})),DZ=wZ((function(e,t){!function(e,r,a){var i,o=256,s="random",u=a.pow(o,6),c=a.pow(2,52),l=2*c,f=255;function h(t,n,f){var h=[],y=v(m((n=1==n?{entropy:!0}:n||{}).entropy?[t,g(r)]:null==t?function(){try{var t;return i&&(t=i.randomBytes)?t=t(o):(t=new Uint8Array(o),(e.crypto||e.msCrypto).getRandomValues(t)),g(t)}catch(h){var n=e.navigator,a=n&&n.plugins;return[+new Date,e,a,e.screen,g(r)]}}():t,3),h),b=new p(h),x=function(){for(var e=b.g(6),t=u,n=0;e<c;)e=(e+n)*o,t*=o,n=b.g(1);for(;e>=l;)e/=2,t/=2,n>>>=1;return(e+n)/t};return x.int32=function(){return 0|b.g(4)},x.quick=function(){return b.g(4)/4294967296},x.double=x,v(g(b.S),r),(n.pass||f||function(e,t,n,r){return r&&(r.S&&d(r,b),e.state=function(){return d(b,{})}),n?(a[s]=e,t):e})(x,y,"global"in n?n.global:this==a,n.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);a<o;)s[a]=a++;for(a=0;a<o;a++)s[a]=s[i=f&i+e[a%n]+(t=s[a])],s[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,s=r.S;e--;)t=s[a=f&a+1],n=n*o+s[f&(s[a]=s[i=f&i+t])+(s[i]=t)];return r.i=a,r.j=i,n})(o)}function d(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(uf){}return r.length?r:"string"==a?e:e+"\0"}function v(e,t){for(var n,r=e+"",a=0;a<r.length;)t[f&a]=f&(n^=19*t[f&a])+r.charCodeAt(a++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(v(a.random(),r),"object"==typeof t&&t.exports){t.exports=h;try{i=MZ()}catch(Ql){}}else"function"==typeof define&&n.amdO?define((function(){return h})):a["seed"+s]=h}("undefined"!=typeof self?self:e,[],Math)})),FZ=wZ((function(e,t){var n=NZ(),r=CZ(),a=EZ(),i=AZ(),o=RZ(),s=OZ(),u=DZ();u.alea=n,u.xor128=r,u.xorwow=a,u.xorshift7=i,u.xor4096=o,u.tychei=s,t.exports=u})),PZ=wZ((function(){})),LZ=wZ((function(){})),zZ=wZ((function(){})),BZ=wZ((function(){})),WZ=wZ((function(){})),VZ=wZ((function(){})),jZ=wZ((function(e,t){var r=function(){var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||lZ,function(t){function r(){return O.buffer!=P&&Z(O.buffer),z}function a(){return O.buffer!=P&&Z(O.buffer),B}function i(){return O.buffer!=P&&Z(O.buffer),W}function o(){return O.buffer!=P&&Z(O.buffer),V}var s,u,c,l="undefined"!=typeof(t=t||{})?t:{};l.ready=new Promise((function(e,t){s=e,u=t})),"undefined"!=typeof process&&process.listeners&&(c={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var f,h,p,d=Object.assign({},l),m=[],v=function(e,t){throw t},g="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,x=l.ENVIRONMENT_IS_PTHREAD||!1,w="";function k(e){return l.locateFile?l.locateFile(e,w):w+e}if(b){var S,_,T;w=y?zZ().dirname(w)+"/":"//","function"==typeof xZ&&(S=LZ(),_=zZ()),f=function(e,t){return e=_.normalize(e),S.readFileSync(e,t?void 0:"utf8")},p=function(e){var t=f(e,!0);return t.buffer||(t=new Uint8Array(t)),t},h=function(e,t,n){e=_.normalize(e),S.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),m=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof le))throw e})),process.on("unhandledRejection",(function(e){throw e})),v=function(e,t){if($())throw process.exitCode=e,t;(function(e){e instanceof le||E("exiting due to exception: "+e)})(t),process.exit(e)},l.inspect=function(){return"[Emscripten Module object]"};try{T=BZ()}catch(Yl){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),Yl}n.g.Worker=T.Worker}else(g||y)&&(y?w=self.location.href:"undefined"!=typeof document&&document.currentScript&&(w=document.currentScript.src),"undefined"!=typeof e&&e&&(w=e),w=0!==w.indexOf("blob:")?w.substr(0,w.replace(/[?#].*/,"").lastIndexOf("/")+1):"",b||(f=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},y&&(p=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),h=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}),function(e){return document.title=e});b&&"undefined"==typeof performance&&(n.g.performance=WZ().performance);var I=console.log.bind(console),N=console.warn.bind(console);b&&(I=function(e){return S.writeSync(1,e+"\n")},N=function(e){return S.writeSync(2,e+"\n")});var C=l.print||I,E=l.printErr||N;Object.assign(l,d),d=null,l.arguments&&(m=l.arguments),l.thisProgram&&l.thisProgram,l.quit&&(v=l.quit);var A;Atomics.load,Atomics.store,Atomics.compareExchange;l.wasmBinary&&(A=l.wasmBinary);var R=l.noExitRuntime||!0;"object"!=typeof WebAssembly&&ae("no native wasm support detected");var O,M,D,F=!1;var P,L,z,B,W,V,j="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function U(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.buffer&&j)return j.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,a):e.subarray(t,a));for(var i="";t<a;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var u=63&e[t++];if((o=224==(240&o)?(15&o)<<12|s<<6|u:(7&o)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(o);else{var c=o-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&o)<<6|s)}else i+=String.fromCharCode(o)}return i}function H(e,t){return e?U(r(),e,t):""}function Z(e){P=e,l.HEAP8=L=new Int8Array(e),l.HEAP16=new Int16Array(e),l.HEAP32=B=new Int32Array(e),l.HEAPU8=z=new Uint8Array(e),l.HEAPU16=new Uint16Array(e),l.HEAPU32=W=new Uint32Array(e),l.HEAPF32=new Float32Array(e),l.HEAPF64=V=new Float64Array(e)}x&&(P=l.buffer);var G=l.INITIAL_MEMORY||16777216;if(x)O=l.wasmMemory,P=l.buffer;else if(l.wasmMemory)O=l.wasmMemory;else if(!((O=new WebAssembly.Memory({initial:G/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw E("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),b&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");O&&(P=O.buffer),G=P.byteLength,Z(P);var q,K=[],X=[],Y=[];function $(){return R}function Q(){!0,!x&&ve(X)}function J(e){K.unshift(e)}function ee(e){Y.unshift(e)}var te=0,ne=null,re=null;function ae(e){x?postMessage({cmd:"onAbort",arg:e}):l.onAbort&&l.onAbort(e),E(e="Aborted("+e+")"),F=!0,D=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw u(t),t}var ie;function oe(e){return e.startsWith("data:application/octet-stream;base64,")}function se(e){return e.startsWith("file://")}function ue(e){try{if(e==ie&&A)return new Uint8Array(A);if(p)return p(e);throw"both async and sync fetching of the wasm failed"}catch(Yl){ae(Yl)}}oe(ie="tfjs-backend-wasm-threaded-simd.wasm")||(ie=k(ie));var ce={};function le(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function fe(e){var t=me.pthreads[e];(function(e,t){e||ae(t)})(t),me.returnWorkerToPool(t)}function he(e){var t=me.getNewWorker();if(!t)return 6;me.runningWorkers.push(t),me.pthreads[e.pthread_ptr]=t,t.pthread_ptr=e.pthread_ptr;var n={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return t.runPthread=function(){n.time=performance.now(),t.postMessage(n,e.transferList)},t.loaded&&(t.runPthread(),delete t.runPthread),0}function pe(e){if(x)return Ie(1,1,e);D=e,$()||(me.terminateAllThreads(),l.onExit&&l.onExit(e),F=!0),v(e,new le(e))}var de=function(e,t){if(D=e,!t&&x)throw ye(e),"unwind";pe(e)};var me={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){x?me.initWorker():me.initMainThread()},initMainThread:function(){for(var e=8;e--;)me.allocateUnusedWorker()},initWorker:function(){R=!1},setExitStatus:function(e){D=e},terminateAllThreads:function(){for(var e=0,t=Object.values(me.pthreads);e<t.length;e++){var n=t[e];me.returnWorkerToPool(n)}var r,a=Oo(me.unusedWorkers);try{for(a.s();!(r=a.n()).done;){(n=r.value).terminate()}}catch(cBe){a.e(cBe)}finally{a.f()}me.unusedWorkers=[]},returnWorkerToPool:function(e){var t=e.pthread_ptr;delete me.pthreads[t],me.unusedWorkers.push(e),me.runningWorkers.splice(me.runningWorkers.indexOf(e),1),e.pthread_ptr=0,Ze(t)},receiveObjectTransfer:function(e){},threadInitTLS:function(){me.tlsInitFunctions.forEach((function(e){return e()}))},loadWasmModuleToWorker:function(t,n){t.onmessage=function(e){var r=e.data,a=r.cmd;if(t.pthread_ptr&&(me.currentProxiedOperationCallerThread=t.pthread_ptr),r.targetThread&&r.targetThread!=Ve()){var i=me.pthreads[r.targetThread];return i?i.postMessage(r,r.transferList):E('Internal error! Worker sent a message "'+a+'" to target pthread '+r.targetThread+", but that thread no longer exists!"),void(me.currentProxiedOperationCallerThread=void 0)}"processProxyingQueue"===a?_e(r.queue):"spawnThread"===a?he(r):"cleanupThread"===a?fe(r.thread):"killThread"===a?function(e){var t=me.pthreads[e];delete me.pthreads[e],t.terminate(),Ze(e),me.runningWorkers.splice(me.runningWorkers.indexOf(t),1),t.pthread_ptr=0}(r.thread):"cancelThread"===a?function(e){me.pthreads[e].postMessage({cmd:"cancel"})}(r.thread):"loaded"===a?(t.loaded=!0,n&&n(t),t.runPthread&&(t.runPthread(),delete t.runPthread)):"print"===a?C("Thread "+r.threadId+": "+r.text):"printErr"===a?E("Thread "+r.threadId+": "+r.text):"alert"===a?alert("Thread "+r.threadId+": "+r.text):"setimmediate"===r.target?t.postMessage(r):"onAbort"===a?l.onAbort&&l.onAbort(r.arg):a&&E("worker sent an unknown command "+a),me.currentProxiedOperationCallerThread=void 0},t.onerror=function(e){throw E("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},b&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:l.mainScriptUrlOrBlob||e,wasmMemory:O,wasmModule:M})},allocateUnusedWorker:function(){var e=k("tfjs-backend-wasm-threaded-simd.worker.js");me.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return 0==me.unusedWorkers.length&&(me.allocateUnusedWorker(),me.loadWasmModuleToWorker(me.unusedWorkers[0])),me.unusedWorkers.pop()}};function ve(e){for(;e.length>0;)e.shift()(l)}function ge(e){var t=Ke(),n=e();return Xe(t),n}function ye(e){if(x)return Ie(2,0,e);try{de(e)}catch(Yl){!function(e){if(e instanceof le||"unwind"==e)return D;v(1,e)}(Yl)}}l.PThread=me,l.establishStackSpace=function(){var e=Ve(),t=a()[e+44>>2],n=a()[e+48>>2];qe(t,t-n),Xe(t)};var be=[];function xe(e,t){(O.buffer!=P&&Z(O.buffer),L).set(e,t)}function we(e,t,n,r){return x?Ie(3,1,e,t,n,r):ke(e,t,n,r)}function ke(e,t,n,r){if("undefined"==typeof SharedArrayBuffer)return E("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];if(x&&0===a.length)return we(e,t,n,r);var i={startRoutine:n,pthread_ptr:e,arg:r,transferList:a};return x?(i.cmd="spawnThread",postMessage(i,a),0):he(i)}l.invokeEntryPoint=function(e,t){var n=function(e){var t=be[e];return t||(e>=be.length&&(be.length=e+1),be[e]=t=q.get(e)),t}(e)(t);$()?me.setExitStatus(n):Ge(n)};var Se;function _e(e){Atomics.store(a(),e>>2,1),Ve()&&He(e),Atomics.compareExchange(a(),e>>2,1,0)}function Te(e){Te.shown||(Te.shown={}),Te.shown[e]||(Te.shown[e]=1,b&&(e="warning: "+e),E(e))}function Ie(e,t){var n=arguments.length-2,r=arguments;return ge((function(){for(var a=n,i=Ye(8*a),s=i>>3,u=0;u<n;u++){var c=r[2+u];o()[s+u]=c}return Ue(e,a,i,t)}))}l.executeNotifiedProxyingQueue=_e,Se=b?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:x?function(){return performance.now()-l.__performance_now_clock_drift}:function(){return performance.now()};var Ne=[];function Ce(e){try{return O.grow(e-P.byteLength+65535>>>16),Z(O.buffer),1}catch(Yl){}}function Ee(e){return x?Ie(4,1,e):52}function Ae(e,t,n,r,a){return x?Ie(5,1,e,t,n,r,a):70}var Re=[null,[],[]];function Oe(e,t){var n=Re[e];0===t||10===t?((1===e?C:E)(U(n,0)),n.length=0):n.push(t)}function Me(e,t,n,a){if(x)return Ie(6,1,e,t,n,a);for(var o=0,s=0;s<n;s++){var u=i()[t>>2],c=i()[t+4>>2];t+=8;for(var l=0;l<c;l++)Oe(e,r()[u+l]);o+=c}return i()[a>>2]=o,0}function De(e){return l["_"+e]}function Fe(e,t,n,a,i){var o={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);(function(e,t,n){(function(e,t,n,r){if(!(r>0))return 0;for(var a=n,i=n+r-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}t[n]=0})(e,r(),t,n)})(e,t=Ye(n),n)}return t},array:function(e){var t=Ye(e.length);return xe(e,t),t}};var s=De(e),u=[],c=0;if(a)for(var l=0;l<a.length;l++){var f=o[n[l]];f?(0===c&&(c=Ke()),u[l]=f(a[l])):u[l]=a[l]}var h,p=s.apply(null,u);return h=p,0!==c&&Xe(c),p=function(e){return"string"===t?H(e):"boolean"===t?Boolean(e):e}(h),p}me.init();var Pe,Le,ze,Be=[null,pe,ye,we,Ee,Ae,Me],We={__emscripten_init_main_thread_js:function(e){je(e,!y,1,!g),me.threadInitTLS()},__emscripten_thread_cleanup:function(e){x?postMessage({cmd:"cleanupThread",thread:e}):fe(e)},__pthread_create_js:ke,_emscripten_default_pthread_stack_size:function(){return 2097152},_emscripten_get_now_is_monotonic:function(){return true},_emscripten_notify_task_queue:function(e,t,n,r){if(e==t)setTimeout((function(){return _e(r)}));else if(x)postMessage({targetThread:e,cmd:"processProxyingQueue",queue:r});else{var a=me.pthreads[e];if(!a)return;a.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},_emscripten_set_offscreencanvas_size:function(e,t,n){return-1},abort:function(){ae("")},emscripten_check_blocking_allowed:function(){b||y||Te("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},emscripten_date_now:function(){return Date.now()},emscripten_get_heap_max:function(){return 2147483648},emscripten_get_now:Se,emscripten_memcpy_big:function(e,t,n){r().copyWithin(e,t,t+n)},emscripten_num_logical_cores:function(){return b?VZ().cpus().length:navigator.hardwareConcurrency},emscripten_receive_on_main_thread_js:function(e,t,n){Ne.length=t;for(var r=n>>3,a=0;a<t;a++)Ne[a]=o()[r+a];return(e<0?ce[-e-1]:Be[e]).apply(null,Ne)},emscripten_resize_heap:function(e){var t=r().length;if((e>>>=0)<=t)return!1;var n=2147483648;if(e>n)return!1;for(var a,i,o=1;o<=4;o*=2){var s=t*(1+.2/o);if(s=Math.min(s,e+100663296),Ce(Math.min(n,(a=Math.max(e,s))+((i=65536)-a%i)%i)))return!0}return!1},emscripten_unwind_to_js_event_loop:function(){throw"unwind"},exit:de,fd_close:Ee,fd_seek:Ae,fd_write:Me,memory:O||l.wasmMemory},Ve=(function(){var e={env:We,wasi_snapshot_preview1:We};function t(e,t){var n=e.exports;if(l.asm=n,function(e){me.tlsInitFunctions.push(e)}(l.asm._emscripten_tls_init),q=l.asm.__indirect_function_table,function(e){X.unshift(e)}(l.asm.__wasm_call_ctors),M=t,!x){var r=me.unusedWorkers.length;me.unusedWorkers.forEach((function(e){me.loadWasmModuleToWorker(e,(function(){--r||function(e){if(te--,l.monitorRunDependencies&&l.monitorRunDependencies(te),0==te&&(null!==ne&&(clearInterval(ne),ne=null),re)){var t=re;re=null,t()}}()}))}))}}function n(e){t(e.instance,e.module)}function r(t){return function(){if(!A&&(g||y)){if("function"==typeof fetch&&!se(ie))return fetch(ie,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ie+"'";return e.arrayBuffer()})).catch((function(){return ue(ie)}));if(h)return new Promise((function(e,t){h(ie,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return ue(ie)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){E("failed to asynchronously prepare wasm: "+e),ae(e)}))}if(x||(te++,l.monitorRunDependencies&&l.monitorRunDependencies(te)),l.instantiateWasm)try{return l.instantiateWasm(e,t)}catch(nze){E("Module.instantiateWasm callback failed with error: "+nze),u(nze)}(A||"function"!=typeof WebAssembly.instantiateStreaming||oe(ie)||se(ie)||b||"function"!=typeof fetch?r(n):fetch(ie,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return E("wasm streaming compile failed: "+e),E("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(u)}(),l.___wasm_call_ctors=function(){return(l.___wasm_call_ctors=l.asm.__wasm_call_ctors).apply(null,arguments)},l._init=function(){return(l._init=l.asm.init).apply(null,arguments)},l._init_with_threads_count=function(){return(l._init_with_threads_count=l.asm.init_with_threads_count).apply(null,arguments)},l._get_threads_count=function(){return(l._get_threads_count=l.asm.get_threads_count).apply(null,arguments)},l._register_tensor=function(){return(l._register_tensor=l.asm.register_tensor).apply(null,arguments)},l._dispose_data=function(){return(l._dispose_data=l.asm.dispose_data).apply(null,arguments)},l._dispose=function(){return(l._dispose=l.asm.dispose).apply(null,arguments)},l._Abs=function(){return(l._Abs=l.asm.Abs).apply(null,arguments)},l._Add=function(){return(l._Add=l.asm.Add).apply(null,arguments)},l._AddN=function(){return(l._AddN=l.asm.AddN).apply(null,arguments)},l._All=function(){return(l._All=l.asm.All).apply(null,arguments)},l._Any=function(){return(l._Any=l.asm.Any).apply(null,arguments)},l._ArgMax=function(){return(l._ArgMax=l.asm.ArgMax).apply(null,arguments)},l._AvgPool=function(){return(l._AvgPool=l.asm.AvgPool).apply(null,arguments)},l._BatchMatMul=function(){return(l._BatchMatMul=l.asm.BatchMatMul).apply(null,arguments)},l._Ceil=function(){return(l._Ceil=l.asm.Ceil).apply(null,arguments)},l._ClipByValue=function(){return(l._ClipByValue=l.asm.ClipByValue).apply(null,arguments)},l._Conv2D=function(){return(l._Conv2D=l.asm.Conv2D).apply(null,arguments)},l._Conv2DBackpropInput=function(){return(l._Conv2DBackpropInput=l.asm.Conv2DBackpropInput).apply(null,arguments)},l._Cos=function(){return(l._Cos=l.asm.Cos).apply(null,arguments)},l._Cosh=function(){return(l._Cosh=l.asm.Cosh).apply(null,arguments)},l._CropAndResize=function(){return(l._CropAndResize=l.asm.CropAndResize).apply(null,arguments)},l._Cumprod=function(){return(l._Cumprod=l.asm.Cumprod).apply(null,arguments)},l._Cumsum=function(){return(l._Cumsum=l.asm.Cumsum).apply(null,arguments)},l._DepthToSpace=function(){return(l._DepthToSpace=l.asm.DepthToSpace).apply(null,arguments)},l._DepthwiseConv2dNative=function(){return(l._DepthwiseConv2dNative=l.asm.DepthwiseConv2dNative).apply(null,arguments)},l._Elu=function(){return(l._Elu=l.asm.Elu).apply(null,arguments)},l._Equal=function(){return(l._Equal=l.asm.Equal).apply(null,arguments)},l._Exp=function(){return(l._Exp=l.asm.Exp).apply(null,arguments)},l._FlipLeftRight=function(){return(l._FlipLeftRight=l.asm.FlipLeftRight).apply(null,arguments)},l._Floor=function(){return(l._Floor=l.asm.Floor).apply(null,arguments)},l._FloorDiv=function(){return(l._FloorDiv=l.asm.FloorDiv).apply(null,arguments)},l._FusedBatchNorm=function(){return(l._FusedBatchNorm=l.asm.FusedBatchNorm).apply(null,arguments)},l._FusedConv2D=function(){return(l._FusedConv2D=l.asm.FusedConv2D).apply(null,arguments)},l._FusedDepthwiseConv2D=function(){return(l._FusedDepthwiseConv2D=l.asm.FusedDepthwiseConv2D).apply(null,arguments)},l._Gather=function(){return(l._Gather=l.asm.Gather).apply(null,arguments)},l._GatherNd=function(){return(l._GatherNd=l.asm.GatherNd).apply(null,arguments)},l._Greater=function(){return(l._Greater=l.asm.Greater).apply(null,arguments)},l._GreaterEqual=function(){return(l._GreaterEqual=l.asm.GreaterEqual).apply(null,arguments)},l._LeakyRelu=function(){return(l._LeakyRelu=l.asm.LeakyRelu).apply(null,arguments)},l._Less=function(){return(l._Less=l.asm.Less).apply(null,arguments)},l._LessEqual=function(){return(l._LessEqual=l.asm.LessEqual).apply(null,arguments)},l._Log=function(){return(l._Log=l.asm.Log).apply(null,arguments)},l._LogicalAnd=function(){return(l._LogicalAnd=l.asm.LogicalAnd).apply(null,arguments)},l._LogicalNot=function(){return(l._LogicalNot=l.asm.LogicalNot).apply(null,arguments)},l._LogicalOr=function(){return(l._LogicalOr=l.asm.LogicalOr).apply(null,arguments)},l._LogicalXor=function(){return(l._LogicalXor=l.asm.LogicalXor).apply(null,arguments)},l._Max=function(){return(l._Max=l.asm.Max).apply(null,arguments)},l._MaxPool=function(){return(l._MaxPool=l.asm.MaxPool).apply(null,arguments)},l._Maximum=function(){return(l._Maximum=l.asm.Maximum).apply(null,arguments)},l._Mean=function(){return(l._Mean=l.asm.Mean).apply(null,arguments)},l._Min=function(){return(l._Min=l.asm.Min).apply(null,arguments)},l._Minimum=function(){return(l._Minimum=l.asm.Minimum).apply(null,arguments)},l._MirrorPad=function(){return(l._MirrorPad=l.asm.MirrorPad).apply(null,arguments)},l._Multiply=function(){return(l._Multiply=l.asm.Multiply).apply(null,arguments)},l._Neg=function(){return(l._Neg=l.asm.Neg).apply(null,arguments)},l._NonMaxSuppressionV3=function(){return(l._NonMaxSuppressionV3=l.asm.NonMaxSuppressionV3).apply(null,arguments)},l._NonMaxSuppressionV4=function(){return(l._NonMaxSuppressionV4=l.asm.NonMaxSuppressionV4).apply(null,arguments)},l._NonMaxSuppressionV5=function(){return(l._NonMaxSuppressionV5=l.asm.NonMaxSuppressionV5).apply(null,arguments)},l._NotEqual=function(){return(l._NotEqual=l.asm.NotEqual).apply(null,arguments)},l._OneHot=function(){return(l._OneHot=l.asm.OneHot).apply(null,arguments)},l._PadV2=function(){return(l._PadV2=l.asm.PadV2).apply(null,arguments)},l._Pow=function(){return(l._Pow=l.asm.Pow).apply(null,arguments)},l._Prelu=function(){return(l._Prelu=l.asm.Prelu).apply(null,arguments)},l._Prod=function(){return(l._Prod=l.asm.Prod).apply(null,arguments)},l._RealDiv=function(){return(l._RealDiv=l.asm.RealDiv).apply(null,arguments)},l._Relu=function(){return(l._Relu=l.asm.Relu).apply(null,arguments)},l._Relu6=function(){return(l._Relu6=l.asm.Relu6).apply(null,arguments)},l._ResizeBilinear=function(){return(l._ResizeBilinear=l.asm.ResizeBilinear).apply(null,arguments)},l._ResizeNearestNeighbor=function(){return(l._ResizeNearestNeighbor=l.asm.ResizeNearestNeighbor).apply(null,arguments)},l._Reverse=function(){return(l._Reverse=l.asm.Reverse).apply(null,arguments)},l._RotateWithOffset=function(){return(l._RotateWithOffset=l.asm.RotateWithOffset).apply(null,arguments)},l._Round=function(){return(l._Round=l.asm.Round).apply(null,arguments)},l._Rsqrt=function(){return(l._Rsqrt=l.asm.Rsqrt).apply(null,arguments)},l._ScatterNd=function(){return(l._ScatterNd=l.asm.ScatterNd).apply(null,arguments)},l._SelectV2=function(){return(l._SelectV2=l.asm.SelectV2).apply(null,arguments)},l._Sigmoid=function(){return(l._Sigmoid=l.asm.Sigmoid).apply(null,arguments)},l._Sin=function(){return(l._Sin=l.asm.Sin).apply(null,arguments)},l._Softmax=function(){return(l._Softmax=l.asm.Softmax).apply(null,arguments)},l._SparseFillEmptyRows=function(){return(l._SparseFillEmptyRows=l.asm.SparseFillEmptyRows).apply(null,arguments)},l._SparseReshape=function(){return(l._SparseReshape=l.asm.SparseReshape).apply(null,arguments)},l._SparseSegmentReduction=function(){return(l._SparseSegmentReduction=l.asm.SparseSegmentReduction).apply(null,arguments)},l._Sqrt=function(){return(l._Sqrt=l.asm.Sqrt).apply(null,arguments)},l._Square=function(){return(l._Square=l.asm.Square).apply(null,arguments)},l._SquaredDifference=function(){return(l._SquaredDifference=l.asm.SquaredDifference).apply(null,arguments)},l._Step=function(){return(l._Step=l.asm.Step).apply(null,arguments)},l._StridedSlice=function(){return(l._StridedSlice=l.asm.StridedSlice).apply(null,arguments)},l._Sub=function(){return(l._Sub=l.asm.Sub).apply(null,arguments)},l._Sum=function(){return(l._Sum=l.asm.Sum).apply(null,arguments)},l._Tan=function(){return(l._Tan=l.asm.Tan).apply(null,arguments)},l._Tanh=function(){return(l._Tanh=l.asm.Tanh).apply(null,arguments)},l._Tile=function(){return(l._Tile=l.asm.Tile).apply(null,arguments)},l._TopK=function(){return(l._TopK=l.asm.TopK).apply(null,arguments)},l._Transform=function(){return(l._Transform=l.asm.Transform).apply(null,arguments)},l._Transpose=function(){return(l._Transpose=l.asm.Transpose).apply(null,arguments)},l.__FusedMatMul=function(){return(l.__FusedMatMul=l.asm._FusedMatMul).apply(null,arguments)},l._malloc=function(){return(l._malloc=l.asm.malloc).apply(null,arguments)},l._free=function(){return(l._free=l.asm.free).apply(null,arguments)},l.__emscripten_tls_init=function(){return(l.__emscripten_tls_init=l.asm._emscripten_tls_init).apply(null,arguments)},l._pthread_self=function(){return(Ve=l._pthread_self=l.asm.pthread_self).apply(null,arguments)}),je=(l.___errno_location=function(){return(l.___errno_location=l.asm.__errno_location).apply(null,arguments)},l.__emscripten_thread_init=function(){return(je=l.__emscripten_thread_init=l.asm._emscripten_thread_init).apply(null,arguments)}),Ue=(l.__emscripten_thread_crashed=function(){return(l.__emscripten_thread_crashed=l.asm._emscripten_thread_crashed).apply(null,arguments)},l._emscripten_main_thread_process_queued_calls=function(){return(l._emscripten_main_thread_process_queued_calls=l.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},l._emscripten_main_browser_thread_id=function(){return(l._emscripten_main_browser_thread_id=l.asm.emscripten_main_browser_thread_id).apply(null,arguments)},l._emscripten_run_in_main_runtime_thread_js=function(){return(Ue=l._emscripten_run_in_main_runtime_thread_js=l.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)}),He=(l._emscripten_dispatch_to_thread_=function(){return(l._emscripten_dispatch_to_thread_=l.asm.emscripten_dispatch_to_thread_).apply(null,arguments)},l.__emscripten_proxy_execute_task_queue=function(){return(He=l.__emscripten_proxy_execute_task_queue=l.asm._emscripten_proxy_execute_task_queue).apply(null,arguments)}),Ze=l.__emscripten_thread_free_data=function(){return(Ze=l.__emscripten_thread_free_data=l.asm._emscripten_thread_free_data).apply(null,arguments)},Ge=l.__emscripten_thread_exit=function(){return(Ge=l.__emscripten_thread_exit=l.asm._emscripten_thread_exit).apply(null,arguments)},qe=l._emscripten_stack_set_limits=function(){return(qe=l._emscripten_stack_set_limits=l.asm.emscripten_stack_set_limits).apply(null,arguments)},Ke=l.stackSave=function(){return(Ke=l.stackSave=l.asm.stackSave).apply(null,arguments)},Xe=l.stackRestore=function(){return(Xe=l.stackRestore=l.asm.stackRestore).apply(null,arguments)},Ye=l.stackAlloc=function(){return(Ye=l.stackAlloc=l.asm.stackAlloc).apply(null,arguments)};l.dynCall_iijjiiii=function(){return(l.dynCall_iijjiiii=l.asm.dynCall_iijjiiii).apply(null,arguments)},l.dynCall_jiji=function(){return(l.dynCall_jiji=l.asm.dynCall_jiji).apply(null,arguments)};function $e(e){if(e=e||m,!(te>0)){if(x)return s(l),Q(),void postMessage({cmd:"loaded"});(function(){if(l.preRun)for("function"==typeof l.preRun&&(l.preRun=[l.preRun]);l.preRun.length;)J(l.preRun.shift());ve(K)})(),te>0||(l.setStatus?(l.setStatus("Running..."),setTimeout((function(){setTimeout((function(){l.setStatus("")}),1),t()}),1)):t())}function t(){Pe||(Pe=!0,l.calledRun=!0,!F&&(Q(),s(l),l.onRuntimeInitialized&&l.onRuntimeInitialized(),function(){if(!x){if(l.postRun)for("function"==typeof l.postRun&&(l.postRun=[l.postRun]);l.postRun.length;)ee(l.postRun.shift());ve(Y)}}()))}}if(l.keepRuntimeAlive=$,l.wasmMemory=O,l.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e||"boolean"===e}));return"string"!==t&&a&&!r?De(e):function(){return Fe(e,t,n,arguments)}},l.ExitStatus=le,l.PThread=me,re=function e(){Pe||$e(),Pe||(re=e)},l.preInit)for("function"==typeof l.preInit&&(l.preInit=[l.preInit]);l.preInit.length>0;)l.preInit.pop()();if($e(),c&&(Le={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!c.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!c.unhandledRejection.indexOf(e)>-1}))}),"undefined"!=typeof WasmBackendModule)ze=WasmBackendModule;else{if("undefined"==typeof t)throw new Error("Could not find wasm module in post.js");ze=t}if(Le){var Qe=ze._dispose;ze._dispose=function(){Qe(),Le.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),Le.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return t.ready}}();"object"==typeof e&&"object"==typeof t?t.exports=r:"function"==typeof define&&n.amdO?define([],(function(){return r})):"object"==typeof e&&(e.WasmBackendModuleThreadedSimd=r)})),UZ=wZ((function(e,t){t.exports.wasmWorkerContents='"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",data=>onmessage({data:data}));var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8"))},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}var initializedJS=false;var pendingNotifiedProxyingQueues=[];function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"\n");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=(info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports};self.onunhandledrejection=e=>{throw e.reason??e};self.onmessage=e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob=="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module).then(function(instance){Module=instance})}else if(e.data.cmd==="run"){Module["__performance_now_clock_drift"]=performance.now()-e.data.time;Module["__emscripten_thread_init"](e.data.pthread_ptr,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInitTLS();if(!initializedJS){pendingNotifiedProxyingQueues.forEach(queue=>{Module["executeNotifiedProxyingQueue"](queue)});pendingNotifiedProxyingQueues=[];initializedJS=true}try{Module["invokeEntryPoint"](e.data.start_routine,e.data.arg)}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processProxyingQueue"){if(initializedJS){Module["executeNotifiedProxyingQueue"](e.data.queue)}else{pendingNotifiedProxyingQueues.push(e.data.queue)}}else if(e.data.cmd){err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}};'})),HZ=wZ((function(e,t){var r=function(){var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||lZ,function(t){var n,r,a,i="undefined"!=typeof(t=t||{})?t:{};i.ready=new Promise((function(e,t){n=e,r=t})),"undefined"!=typeof process&&process.listeners&&(a={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var o,s,u,c,l,f=Object.assign({},i),h=[],p="object"==typeof window,d="function"==typeof importScripts,m="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,v="";m?(v=d?zZ().dirname(v)+"/":"//","function"==typeof xZ&&(c=LZ(),l=zZ()),o=function(e,t){return e=l.normalize(e),c.readFileSync(e,t?void 0:"utf8")},u=function(e){var t=o(e,!0);return t.buffer||(t=new Uint8Array(t)),t},s=function(e,t,n){e=l.normalize(e),c.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),h=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof H))throw e})),process.on("unhandledRejection",(function(e){throw e})),i.inspect=function(){return"[Emscripten Module object]"}):(p||d)&&(d?v=self.location.href:"undefined"!=typeof document&&document.currentScript&&(v=document.currentScript.src),e&&(v=e),v=0!==v.indexOf("blob:")?v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},d&&(u=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),s=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var g=i.print||console.log.bind(console),y=i.printErr||console.warn.bind(console);Object.assign(i,f),f=null,i.arguments&&(h=i.arguments),i.thisProgram&&i.thisProgram,i.quit&&i.quit;var b;i.wasmBinary&&(b=i.wasmBinary);var x=i.noExitRuntime||!0;"object"!=typeof WebAssembly&&B("no native wasm support detected");var w,k=!1;var S,_,T,I,N="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function C(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.buffer&&N)return N.decode(e.subarray(t,a));for(var i="";t<a;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var u=63&e[t++];if((o=224==(240&o)?(15&o)<<12|s<<6|u:(7&o)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(o);else{var c=o-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&o)<<6|s)}else i+=String.fromCharCode(o)}return i}function E(e,t){return e?C(T,e,t):""}function A(e){S=e,i.HEAP8=_=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAP32=new Int32Array(e),i.HEAPU8=T=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=I=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=new Float64Array(e)}i.INITIAL_MEMORY;var R=[],O=[],M=[];function D(e){R.unshift(e)}function F(e){M.unshift(e)}var P=0,L=null,z=null;function B(e){i.onAbort&&i.onAbort(e),y(e="Aborted("+e+")"),k=!0,1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw r(t),t}var W;function V(e){return e.startsWith("data:application/octet-stream;base64,")}function j(e){return e.startsWith("file://")}function U(e){try{if(e==W&&b)return new Uint8Array(b);if(u)return u(e);throw"both async and sync fetching of the wasm failed"}catch(PLe){B(PLe)}}function H(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Z(e){for(;e.length>0;)e.shift()(i)}function G(e){try{return w.grow(e-S.byteLength+65535>>>16),A(w.buffer),1}catch(PLe){}}V(W="tfjs-backend-wasm.wasm")||(W=function(e){return i.locateFile?i.locateFile(e,v):v+e}(W));var q=[null,[],[]];function K(e,t){var n=q[e];0===t||10===t?((1===e?g:y)(C(n,0)),n.length=0):n.push(t)}function X(e){return i["_"+e]}function Y(e,t,n,r,a){var i={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);(function(e,t,n){(function(e,t,n,r){if(!(r>0))return 0;for(var a=n,i=n+r-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}t[n]=0})(e,T,t,n)})(e,t=re(n),n)}return t},array:function(e){var t=re(e.length);return function(e,t){_.set(e,t)}(e,t),t}};var o=X(e),s=[],u=0;if(r)for(var c=0;c<r.length;c++){var l=i[n[c]];l?(0===u&&(u=te()),s[c]=l(r[c])):s[c]=r[c]}var f,h=o.apply(null,s);return f=h,0!==u&&ne(u),h=function(e){return"string"===t?E(e):"boolean"===t?Boolean(e):e}(f),h}var $,Q,J,ee={abort:function(){B("")},emscripten_get_heap_max:function(){return 2147483648},emscripten_memcpy_big:function(e,t,n){T.copyWithin(e,t,t+n)},emscripten_resize_heap:function(e){var t=T.length,n=2147483648;if((e>>>=0)>n)return!1;for(var r,a,i=1;i<=4;i*=2){var o=t*(1+.2/i);if(o=Math.min(o,e+100663296),G(Math.min(n,(r=Math.max(e,o))+((a=65536)-r%a)%a)))return!0}return!1},fd_close:function(e){return 52},fd_seek:function(e,t,n,r,a){return 70},fd_write:function(e,t,n,r){for(var a=0,i=0;i<n;i++){var o=I[t>>2],s=I[t+4>>2];t+=8;for(var u=0;u<s;u++)K(e,T[o+u]);a+=s}return I[r>>2]=a,0}},te=(function(){var e={env:ee,wasi_snapshot_preview1:ee};function t(e,t){var n=e.exports;i.asm=n,A((w=i.asm.memory).buffer),i.asm.__indirect_function_table,function(e){O.unshift(e)}(i.asm.__wasm_call_ctors),function(e){if(P--,i.monitorRunDependencies&&i.monitorRunDependencies(P),0==P&&(null!==L&&(clearInterval(L),L=null),z)){var t=z;z=null,t()}}()}function n(e){t(e.instance)}function a(t){return function(){if(!b&&(p||d)){if("function"==typeof fetch&&!j(W))return fetch(W,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+W+"'";return e.arrayBuffer()})).catch((function(){return U(W)}));if(s)return new Promise((function(e,t){s(W,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return U(W)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){y("failed to asynchronously prepare wasm: "+e),B(e)}))}if(P++,i.monitorRunDependencies&&i.monitorRunDependencies(P),i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(o){y("Module.instantiateWasm callback failed with error: "+o),r(o)}(b||"function"!=typeof WebAssembly.instantiateStreaming||V(W)||j(W)||m||"function"!=typeof fetch?a(n):fetch(W,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return y("wasm streaming compile failed: "+e),y("falling back to ArrayBuffer instantiation"),a(n)}))}))).catch(r)}(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.__wasm_call_ctors).apply(null,arguments)},i._init=function(){return(i._init=i.asm.init).apply(null,arguments)},i._init_with_threads_count=function(){return(i._init_with_threads_count=i.asm.init_with_threads_count).apply(null,arguments)},i._get_threads_count=function(){return(i._get_threads_count=i.asm.get_threads_count).apply(null,arguments)},i._register_tensor=function(){return(i._register_tensor=i.asm.register_tensor).apply(null,arguments)},i._dispose_data=function(){return(i._dispose_data=i.asm.dispose_data).apply(null,arguments)},i._dispose=function(){return(i._dispose=i.asm.dispose).apply(null,arguments)},i._Abs=function(){return(i._Abs=i.asm.Abs).apply(null,arguments)},i._Add=function(){return(i._Add=i.asm.Add).apply(null,arguments)},i._AddN=function(){return(i._AddN=i.asm.AddN).apply(null,arguments)},i._All=function(){return(i._All=i.asm.All).apply(null,arguments)},i._Any=function(){return(i._Any=i.asm.Any).apply(null,arguments)},i._ArgMax=function(){return(i._ArgMax=i.asm.ArgMax).apply(null,arguments)},i._AvgPool=function(){return(i._AvgPool=i.asm.AvgPool).apply(null,arguments)},i._BatchMatMul=function(){return(i._BatchMatMul=i.asm.BatchMatMul).apply(null,arguments)},i._Ceil=function(){return(i._Ceil=i.asm.Ceil).apply(null,arguments)},i._ClipByValue=function(){return(i._ClipByValue=i.asm.ClipByValue).apply(null,arguments)},i._Conv2D=function(){return(i._Conv2D=i.asm.Conv2D).apply(null,arguments)},i._Conv2DBackpropInput=function(){return(i._Conv2DBackpropInput=i.asm.Conv2DBackpropInput).apply(null,arguments)},i._Cos=function(){return(i._Cos=i.asm.Cos).apply(null,arguments)},i._Cosh=function(){return(i._Cosh=i.asm.Cosh).apply(null,arguments)},i._CropAndResize=function(){return(i._CropAndResize=i.asm.CropAndResize).apply(null,arguments)},i._Cumprod=function(){return(i._Cumprod=i.asm.Cumprod).apply(null,arguments)},i._Cumsum=function(){return(i._Cumsum=i.asm.Cumsum).apply(null,arguments)},i._DepthToSpace=function(){return(i._DepthToSpace=i.asm.DepthToSpace).apply(null,arguments)},i._DepthwiseConv2dNative=function(){return(i._DepthwiseConv2dNative=i.asm.DepthwiseConv2dNative).apply(null,arguments)},i._Elu=function(){return(i._Elu=i.asm.Elu).apply(null,arguments)},i._Equal=function(){return(i._Equal=i.asm.Equal).apply(null,arguments)},i._Exp=function(){return(i._Exp=i.asm.Exp).apply(null,arguments)},i._FlipLeftRight=function(){return(i._FlipLeftRight=i.asm.FlipLeftRight).apply(null,arguments)},i._Floor=function(){return(i._Floor=i.asm.Floor).apply(null,arguments)},i._FloorDiv=function(){return(i._FloorDiv=i.asm.FloorDiv).apply(null,arguments)},i._FusedBatchNorm=function(){return(i._FusedBatchNorm=i.asm.FusedBatchNorm).apply(null,arguments)},i._FusedConv2D=function(){return(i._FusedConv2D=i.asm.FusedConv2D).apply(null,arguments)},i._FusedDepthwiseConv2D=function(){return(i._FusedDepthwiseConv2D=i.asm.FusedDepthwiseConv2D).apply(null,arguments)},i._Gather=function(){return(i._Gather=i.asm.Gather).apply(null,arguments)},i._GatherNd=function(){return(i._GatherNd=i.asm.GatherNd).apply(null,arguments)},i._Greater=function(){return(i._Greater=i.asm.Greater).apply(null,arguments)},i._GreaterEqual=function(){return(i._GreaterEqual=i.asm.GreaterEqual).apply(null,arguments)},i._LeakyRelu=function(){return(i._LeakyRelu=i.asm.LeakyRelu).apply(null,arguments)},i._Less=function(){return(i._Less=i.asm.Less).apply(null,arguments)},i._LessEqual=function(){return(i._LessEqual=i.asm.LessEqual).apply(null,arguments)},i._Log=function(){return(i._Log=i.asm.Log).apply(null,arguments)},i._LogicalAnd=function(){return(i._LogicalAnd=i.asm.LogicalAnd).apply(null,arguments)},i._LogicalNot=function(){return(i._LogicalNot=i.asm.LogicalNot).apply(null,arguments)},i._LogicalOr=function(){return(i._LogicalOr=i.asm.LogicalOr).apply(null,arguments)},i._LogicalXor=function(){return(i._LogicalXor=i.asm.LogicalXor).apply(null,arguments)},i._Max=function(){return(i._Max=i.asm.Max).apply(null,arguments)},i._MaxPool=function(){return(i._MaxPool=i.asm.MaxPool).apply(null,arguments)},i._Maximum=function(){return(i._Maximum=i.asm.Maximum).apply(null,arguments)},i._Mean=function(){return(i._Mean=i.asm.Mean).apply(null,arguments)},i._Min=function(){return(i._Min=i.asm.Min).apply(null,arguments)},i._Minimum=function(){return(i._Minimum=i.asm.Minimum).apply(null,arguments)},i._MirrorPad=function(){return(i._MirrorPad=i.asm.MirrorPad).apply(null,arguments)},i._Multiply=function(){return(i._Multiply=i.asm.Multiply).apply(null,arguments)},i._Neg=function(){return(i._Neg=i.asm.Neg).apply(null,arguments)},i._NonMaxSuppressionV3=function(){return(i._NonMaxSuppressionV3=i.asm.NonMaxSuppressionV3).apply(null,arguments)},i._NonMaxSuppressionV4=function(){return(i._NonMaxSuppressionV4=i.asm.NonMaxSuppressionV4).apply(null,arguments)},i._NonMaxSuppressionV5=function(){return(i._NonMaxSuppressionV5=i.asm.NonMaxSuppressionV5).apply(null,arguments)},i._NotEqual=function(){return(i._NotEqual=i.asm.NotEqual).apply(null,arguments)},i._OneHot=function(){return(i._OneHot=i.asm.OneHot).apply(null,arguments)},i._PadV2=function(){return(i._PadV2=i.asm.PadV2).apply(null,arguments)},i._Pow=function(){return(i._Pow=i.asm.Pow).apply(null,arguments)},i._Prelu=function(){return(i._Prelu=i.asm.Prelu).apply(null,arguments)},i._Prod=function(){return(i._Prod=i.asm.Prod).apply(null,arguments)},i._RealDiv=function(){return(i._RealDiv=i.asm.RealDiv).apply(null,arguments)},i._Relu=function(){return(i._Relu=i.asm.Relu).apply(null,arguments)},i._Relu6=function(){return(i._Relu6=i.asm.Relu6).apply(null,arguments)},i._ResizeBilinear=function(){return(i._ResizeBilinear=i.asm.ResizeBilinear).apply(null,arguments)},i._ResizeNearestNeighbor=function(){return(i._ResizeNearestNeighbor=i.asm.ResizeNearestNeighbor).apply(null,arguments)},i._Reverse=function(){return(i._Reverse=i.asm.Reverse).apply(null,arguments)},i._RotateWithOffset=function(){return(i._RotateWithOffset=i.asm.RotateWithOffset).apply(null,arguments)},i._Round=function(){return(i._Round=i.asm.Round).apply(null,arguments)},i._Rsqrt=function(){return(i._Rsqrt=i.asm.Rsqrt).apply(null,arguments)},i._ScatterNd=function(){return(i._ScatterNd=i.asm.ScatterNd).apply(null,arguments)},i._SelectV2=function(){return(i._SelectV2=i.asm.SelectV2).apply(null,arguments)},i._Sigmoid=function(){return(i._Sigmoid=i.asm.Sigmoid).apply(null,arguments)},i._Sin=function(){return(i._Sin=i.asm.Sin).apply(null,arguments)},i._Softmax=function(){return(i._Softmax=i.asm.Softmax).apply(null,arguments)},i._SparseFillEmptyRows=function(){return(i._SparseFillEmptyRows=i.asm.SparseFillEmptyRows).apply(null,arguments)},i._SparseReshape=function(){return(i._SparseReshape=i.asm.SparseReshape).apply(null,arguments)},i._SparseSegmentReduction=function(){return(i._SparseSegmentReduction=i.asm.SparseSegmentReduction).apply(null,arguments)},i._Sqrt=function(){return(i._Sqrt=i.asm.Sqrt).apply(null,arguments)},i._Square=function(){return(i._Square=i.asm.Square).apply(null,arguments)},i._SquaredDifference=function(){return(i._SquaredDifference=i.asm.SquaredDifference).apply(null,arguments)},i._Step=function(){return(i._Step=i.asm.Step).apply(null,arguments)},i._StridedSlice=function(){return(i._StridedSlice=i.asm.StridedSlice).apply(null,arguments)},i._Sub=function(){return(i._Sub=i.asm.Sub).apply(null,arguments)},i._Sum=function(){return(i._Sum=i.asm.Sum).apply(null,arguments)},i._Tan=function(){return(i._Tan=i.asm.Tan).apply(null,arguments)},i._Tanh=function(){return(i._Tanh=i.asm.Tanh).apply(null,arguments)},i._Tile=function(){return(i._Tile=i.asm.Tile).apply(null,arguments)},i._TopK=function(){return(i._TopK=i.asm.TopK).apply(null,arguments)},i._Transform=function(){return(i._Transform=i.asm.Transform).apply(null,arguments)},i._Transpose=function(){return(i._Transpose=i.asm.Transpose).apply(null,arguments)},i.__FusedMatMul=function(){return(i.__FusedMatMul=i.asm._FusedMatMul).apply(null,arguments)},i._malloc=function(){return(i._malloc=i.asm.malloc).apply(null,arguments)},i._free=function(){return(i._free=i.asm.free).apply(null,arguments)},i.___errno_location=function(){return(i.___errno_location=i.asm.__errno_location).apply(null,arguments)},i.stackSave=function(){return(te=i.stackSave=i.asm.stackSave).apply(null,arguments)}),ne=i.stackRestore=function(){return(ne=i.stackRestore=i.asm.stackRestore).apply(null,arguments)},re=i.stackAlloc=function(){return(re=i.stackAlloc=i.asm.stackAlloc).apply(null,arguments)};i.dynCall_iijjiiii=function(){return(i.dynCall_iijjiiii=i.asm.dynCall_iijjiiii).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.dynCall_jiji).apply(null,arguments)};function ae(e){function t(){$||($=!0,i.calledRun=!0,!k&&(!0,Z(O),n(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),function(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)F(i.postRun.shift());Z(M)}()))}e=e||h,P>0||(function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)D(i.preRun.shift());Z(R)}(),P>0)||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),t()}),1)):t())}if(i.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e||"boolean"===e}));return"string"!==t&&a&&!r?X(e):function(){return Y(e,t,n,arguments)}},z=function e(){$||ae(),$||(z=e)},i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();if(ae(),a&&(Q={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!a.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!a.unhandledRejection.indexOf(e)>-1}))}),"undefined"!=typeof t)J=t;else{if("undefined"==typeof WasmBackendModuleThreadedSimd)throw new Error("Could not find wasm module in post.js");J=WasmBackendModuleThreadedSimd}if(Q){var ie=J._dispose;J._dispose=function(){ie(),Q.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),Q.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return t.ready}}();"object"==typeof e&&"object"==typeof t?t.exports=r:"function"==typeof define&&n.amdO?define([],(function(){return r})):"object"==typeof e&&(e.WasmBackendModule=r)})),ZZ=function(){function e(t,n){N(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return(0,C.Z)(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),GZ=function(){function e(){N(this,e)}return(0,C.Z)(e,[{key:"refCount",value:function(e){return qZ("refCount")}},{key:"incRef",value:function(e){return qZ("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return qZ("time")}},{key:"read",value:function(e){return qZ("read")}},{key:"readSync",value:function(e){return qZ("readSync")}},{key:"readToGPU",value:function(e,t){return qZ("readToGPU")}},{key:"numDataIds",value:function(){return qZ("numDataIds")}},{key:"disposeData",value:function(e,t){return qZ("disposeData")}},{key:"write",value:function(e,t,n){return qZ("write")}},{key:"move",value:function(e,t,n,r,a){return qZ("move")}},{key:"createTensorFromTexture",value:function(e,t,n){return qZ("createTensorFromTexture")}},{key:"memory",value:function(){return qZ("memory")}},{key:"floatPrecision",value:function(){return qZ("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return qZ("dispose")}}]),e}();function qZ(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen"))}function KZ(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,QZ(e,--t,n)}function XZ(e,t){if(e.length!==t.length)throw new Error("Array sizes must match to be shuffled together First array length was ".concat(e.length,"Second array length was ").concat(t.length));for(var n=e.length,r=0;n>0;)r=Math.random()*n|0,QZ(e,--n,r),QZ(t,n,r)}function YZ(e,t,n){return Math.max(e,Math.min(t,n))}function $Z(e){return e%2===0?e:e+1}function QZ(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function JZ(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function eG(e,t){var n=Math.random();return t*n+(1-n)*e}function tG(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n}function nG(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function rG(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";nG(uG(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function aG(e){nG(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function iG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||SG(e)&&!n)for(var r=0;r<e.length;++r)iG(e[r],t,n);else t.push(e);return t}function oG(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function sG(e){return 0===e.length}function uG(e,t){if(e===t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function cG(e){return e%1===0}function lG(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function fG(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function hG(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return KZ(t),t}function pG(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function dG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise((function(a,i){var o=0;!function s(){if(e())a();else{o++;var u=t(o);null!=n&&o>=n?i():null!=r?r(s,u):setTimeout(s,u)}}()}))}function mG(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when there are 0 elements"));if(t%n!==0)throw Error("The implicit shape can't be a fractional number. Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function vG(e,t){var n=t.length;return nG((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but got axis ").concat(e)})),nG(e.every((function(e){return cG(e)})),(function(){return"All values in axis param must be integers but got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function gG(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:vG(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function yG(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function bG(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function xG(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function wG(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function kG(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function SG(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function _G(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function TG(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function IG(e){return"string"==typeof e||e instanceof String}function NG(e){return"boolean"==typeof e}function CG(e){return"number"==typeof e}function EG(e){return Array.isArray(e)?EG(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":CG(e)?"float32":IG(e)?"string":NG(e)?"bool":"float32"}function AG(e){return!!(e&&e.constructor&&e.call&&e.apply)}function RG(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function OG(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function MG(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var s=t[0],u=t.slice(1),c=u.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<s;l++)a[l]=MG(e+l*c,u,n,r);return a}function DG(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return MG(0,e,t,n)}function FG(e,t){for(var n=PG(e,t),r=0;r<n.length;r++)n[r]=1;return n}function PG(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function LG(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return DG(e,new Float32Array(n));if("int32"===t)return DG(e,new Int32Array(n));if("bool"===t)return DG(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function zG(e){e.forEach((function(t){nG(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape [".concat(e,"].")}))}))}function BG(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function WG(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function VG(e){return e&&e.then&&"function"==typeof e.then}var jG="tfjsflags",UG=function(){function e(t){N(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=HG,this.populateURLFlags()}return(0,C.Z)(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(GG().getBool("IS_TEST")||GG().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. Overwriting the platform with ").concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];GG().getBool("IS_TEST")||GG().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=4;break}e.t0=this.flags[t],e.next=8;break;case 4:return e.next=6,this.evaluateFlag(t);case 6:this.flags[t]=e.sent,e.t0=this.flags[t];case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(VG(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. Please use getAsync() instead."));return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!=typeof this.global&&"undefined"!=typeof this.global.location&&"undefined"!=typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);jG in t&&t[jG].split(",").forEach((function(t){var n=t.split(":"),r=(0,T.Z)(n,2),a=r[0],i=r[1];e.urlFlags[a]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(a,i)}))}}}]),e}();function HG(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return ZG(t,r[0],r[1]),r.join("=")})),t}function ZG(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function GG(){return KG}var qG,KG=null;function XG(){if(null==qG){var e;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}qG=e}return qG}function YG(e,t){var n=function(){var e=XG();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var $G="Abs",QG="Acos",JG="Acosh",eq="Add",tq="AddN",nq="All",rq="Any",aq="ArgMax",iq="ArgMin",oq="Asin",sq="Asinh",uq="Atan",cq="Atanh",lq="Atan2",fq="AvgPool",hq="AvgPoolGrad",pq="AvgPool3D",dq="AvgPool3DGrad",mq="BatchMatMul",vq="BatchToSpaceND",gq="Bincount",yq="BroadcastTo",bq="BroadcastArgs",xq="Cast",wq="Ceil",kq="ClipByValue",Sq="Complex",_q="ComplexAbs",Tq="Concat",Iq="Conv2D",Nq="Conv2DBackpropFilter",Cq="Conv2DBackpropInput",Eq="Conv3D",Aq="Conv3DBackpropFilterV2",Rq="Conv3DBackpropInputV2",Oq="Cos",Mq="Cosh",Dq="Cumprod",Fq="Cumsum",Pq="CropAndResize",Lq="DenseBincount",zq="DepthToSpace",Bq="DepthwiseConv2dNative",Wq="DepthwiseConv2dNativeBackpropFilter",Vq="DepthwiseConv2dNativeBackpropInput",jq="Diag",Uq="Dilation2D",Hq="Dilation2DBackpropInput",Zq="Dilation2DBackpropFilter",Gq="RealDiv",qq="Einsum",Kq="Elu",Xq="EluGrad",Yq="Erf",$q="Equal",Qq="Exp",Jq="ExpandDims",eK="Expm1",tK="FFT",nK="Fill",rK="FlipLeftRight",aK="Floor",iK="FloorDiv",oK="FusedBatchNorm",sK="GatherV2",uK="GatherNd",cK="Greater",lK="GreaterEqual",fK="Identity",hK="IFFT",pK="Imag",dK="IsFinite",mK="IsInf",vK="IsNan",gK="LeakyRelu",yK="Less",bK="LessEqual",xK="LinSpace",wK="Log",kK="Log1p",SK="LogicalAnd",_K="LogicalNot",TK="LogicalOr",IK="LogicalXor",NK="LogSoftmax",CK="LowerBound",EK="LRN",AK="LRNGrad",RK="Max",OK="Maximum",MK="MaxPool",DK="MaxPoolGrad",FK="MaxPool3D",PK="MaxPool3DGrad",LK="MaxPoolWithArgmax",zK="Mean",BK="Min",WK="Minimum",VK="MirrorPad",jK="Mod",UK="Multinomial",HK="Multiply",ZK="Neg",GK="NotEqual",qK="NonMaxSuppressionV3",KK="NonMaxSuppressionV4",XK="NonMaxSuppressionV5",YK="OnesLike",$K="OneHot",QK="Pack",JK="PadV2",eX="Pool",tX="Pow",nX="Prelu",rX="Prod",aX="RaggedGather",iX="RaggedRange",oX="RaggedTensorToTensor",sX="Range",uX="Real",cX="Reciprocal",lX="Relu",fX="Reshape",hX="ResizeNearestNeighbor",pX="ResizeNearestNeighborGrad",dX="ResizeBilinear",mX="ResizeBilinearGrad",vX="Relu6",gX="Reverse",yX="Round",bX="Rsqrt",xX="ScatterNd",wX="SearchSorted",kX="Select",SX="Selu",_X="Slice",TX="Sin",IX="Sinh",NX="Sign",CX="Sigmoid",EX="Softplus",AX="Sqrt",RX="Sum",OX="SpaceToBatchND",MX="SplitV",DX="Softmax",FX="SparseFillEmptyRows",PX="SparseReshape",LX="SparseSegmentMean",zX="SparseSegmentSum",BX="SparseToDense",WX="SquaredDifference",VX="Square",jX="StridedSlice",UX="StringNGrams",HX="StringSplit",ZX="StringToHashBucketFast",GX="Sub",qX="Tan",KX="Tanh",XX="Tile",YX="TopK",$X="Transform",QX="Transpose",JX="Unique",eY="Unpack",tY="UnsortedSegmentSum",nY="UpperBound",rY="ZerosLike",aY="Step",iY="FromPixels",oY="RotateWithOffset",sY="_FusedMatMul",uY="FusedConv2D",cY="FusedDepthwiseConv2D";function lY(){var e;GG().getBool("IS_TEST")||GG().getBool("PROD")||(e=console).warn.apply(e,arguments)}function fY(){var e;GG().getBool("IS_TEST")||GG().getBool("PROD")||(e=console).log.apply(e,arguments)}var hY=YG("kernelRegistry",(function(){return new Map})),pY=YG("gradRegistry",(function(){return new Map}));function dY(e,t){var n=kY(e,t);return hY.get(n)}function mY(e){return pY.get(e)}function vY(e){for(var t=hY.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=(0,T.Z)(i,2),s=o[0],u=o[1],c=s.split("_");(0,T.Z)(c,1)[0]===e&&n.push(u)}return n}function gY(e){var t=e.kernelName,n=e.backendName,r=kY(t,n);hY.has(r)&&lY("The kernel '".concat(t,"' for backend '").concat(n,"' is already registered")),hY.set(r,e)}function yY(e){var t=e.kernelName;pY.has(t)&&GG().getBool("DEBUG")&&lY("Overriding the gradient for '".concat(t,"'")),pY.set(t,e)}function bY(e,t){var n=kY(e,t);if(!hY.has(n))throw new Error("The kernel '".concat(e,"' for backend '").concat(t,"' is not registered"));hY.delete(n)}function xY(e){if(!pY.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));pY.delete(e)}function wY(e,t){vY(e).forEach((function(e){gY(Object.assign({},e,{backendName:t}))}))}function kY(e,t){return"".concat(t,"_").concat(e)}var SY={};kZ(SY,{arraysEqual:function(){return uG},assert:function(){return nG},assertNonNegativeIntegerDimensions:function(){return zG},assertNonNull:function(){return aG},assertShapesMatch:function(){return rG},bytesFromStringArray:function(){return TG},bytesPerElement:function(){return _G},checkConversionForErrors:function(){return xG},clamp:function(){return YZ},computeStrides:function(){return OG},createScalarValue:function(){return VY},createShuffledIndices:function(){return hG},decodeString:function(){return GY},distSquared:function(){return tG},encodeString:function(){return ZY},fetch:function(){return HY},fingerPrint64:function(){return WY},flatten:function(){return iG},getArrayFromDType:function(){return bG},getTypedArrayFromDType:function(){return yG},hasEncodingLoss:function(){return kG},hexToLong:function(){return IY},indexToLoc:function(){return WG},inferDtype:function(){return EG},inferFromImplicitShape:function(){return mG},isBoolean:function(){return NG},isFunction:function(){return AG},isInt:function(){return cG},isNumber:function(){return CG},isPromise:function(){return VG},isScalarShape:function(){return sG},isString:function(){return IG},isTypedArray:function(){return SG},isValidDtype:function(){return wG},locToIndex:function(){return BG},makeOnesTypedArray:function(){return FG},makeZerosNestedTypedArray:function(){return LG},makeZerosTypedArray:function(){return PG},nearestDivisor:function(){return RG},nearestLargerEven:function(){return $Z},now:function(){return UY},parseAxisParam:function(){return vG},randUniform:function(){return eG},repeatedTry:function(){return dG},rightPad:function(){return pG},shuffle:function(){return KZ},shuffleCombo:function(){return XZ},sizeFromShape:function(){return oG},sizeToSquarishShape:function(){return fG},squeezeShape:function(){return gG},sum:function(){return JZ},swap:function(){return QZ},tanh:function(){return lG},toNestedArray:function(){return DG},toTypedArray:function(){return jY}});var _Y=SZ(_Z()),TY=_Y.default||_Y;function IY(e){return TY.fromString(e,!0,16)}var NY=IY("c3a5c85c97cb3127"),CY=IY("b492b66fbe98f273"),EY=IY("9ae16a3b2f90404f");function AY(e){return e.xor(e.shru(47))}function RY(e,t,n){var r=e.slice(t,t+n);return TY.fromBytes(Array.from(r),!0,!0)}function OY(e,t){return RY(e,t,8)}function MY(e,t){return RY(e,t,4)}function DY(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function FY(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:IY("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function PY(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=DY(i.add(a).add(r),21);var o=a;return a=(a=a.add(t)).add(n),i=i.add(DY(a,44)),[a.add(r),i.add(o)]}(OY(e,t),OY(e,t+8),OY(e,t+16),OY(e,t+24),n,r)}function LY(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=EY.add(2*t),r=OY(e,0).add(EY),a=OY(e,t-8),i=DY(a,37).mul(n).add(r),o=DY(r,25).add(a).mul(n);return FY(i,o,n)}if(t>=4){var s=EY.add(2*t),u=MY(e,0);return FY(u.shl(3).add(t),MY(e,t-4),s)}if(t>0){var c=e[0],l=e[t>>1],f=e[t-1],h=c+(l<<8),p=t+(f<<2);return AY(EY.mul(h).xor(NY.mul(p))).mul(EY)}return EY}function zY(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=EY.add(2*t),r=OY(e,0).mul(CY),a=OY(e,8),i=OY(e,t-8).mul(n),o=OY(e,t-16).mul(EY);return FY(DY(r.add(a),43).add(DY(i,30)).add(o),r.add(DY(a.add(EY),18)).add(i),n)}function BY(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=EY.add(2*t),r=OY(e,0).mul(EY),a=OY(e,8),i=OY(e,t-8).mul(n),o=OY(e,t-16).mul(EY),s=DY(r.add(a),43).add(DY(i,30)).add(o),u=FY(s,r.add(DY(a.add(EY),18)).add(i),n),c=OY(e,16).mul(n),l=OY(e,24),f=s.add(OY(e,t-32)).mul(n),h=u.add(OY(e,t-24)).mul(n);return FY(DY(c.add(l),43).add(DY(f,30)).add(h),c.add(DY(l.add(r),18)).add(f),n)}function WY(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,r=TY.fromNumber(81,!0);if(n<=32)return n<=16?LY(e,n):zY(e,n);if(n<=64)return BY(e,n);var a=r,i=r.mul(CY).add(113),o=AY(i.mul(EY).add(113)).mul(EY),s=[TY.UZERO,TY.UZERO],u=[TY.UZERO,TY.UZERO];a=a.mul(EY).add(OY(e,0));var c=0,l=64*(n-1>>6),f=l+(n-1&63)-63;do{var h;a=DY(a.add(i).add(s[0]).add(OY(e,c+8)),37).mul(CY),i=DY(i.add(s[1]).add(OY(e,c+48)),42).mul(CY),a=a.xor(u[1]),i=i.add(s[0]).add(OY(e,c+40)),o=DY(o.add(u[0]),33).mul(CY),s=PY(e,c,s[1].mul(CY),a.add(u[0])),u=PY(e,c+32,o.add(u[1]),i.add(OY(e,c+16))),o=(h=[a,o])[0],a=h[1],c+=64}while(c!==l);var p=CY.add(o.and(255).shl(1));return c=f,u[0]=u[0].add(n-1&63),s[0]=s[0].add(u[0]),u[0]=u[0].add(s[0]),a=DY(a.add(i).add(s[0]).add(OY(e,c+8)),37).mul(p),i=DY(i.add(s[1]).add(OY(e,c+48)),42).mul(p),a=a.xor(u[1].mul(9)),i=i.add(s[0].mul(9).add(OY(e,c+40))),o=DY(o.add(u[0]),33).mul(p),s=PY(e,c,s[1].mul(p),a.add(u[0])),u=PY(e,c+32,o.add(u[1]),i.add(OY(e,c+16))),o=(t=[a,o])[0],a=t[1],FY(FY(s[0],u[0],p).add(AY(i).mul(NY)).add(o),FY(s[1],u[1],p).add(a),p)}function VY(e,t){return"string"===t?ZY(e):jY([e],t)}function jY(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=iG(e)),GG().getBool("DEBUG")&&xG(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function UY(){return GG().platform.now()}function HY(e,t){return GG().platform.fetch(e,t)}function ZY(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",GG().platform.encode(e,t)}function GY(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",GG().platform.decode(e,t)}var qY=function(){function e(t,n){N(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new KY)}return(0,C.Z)(e,[{key:"profileKernel",value:function(e,t,n){var r,a,i=function(){r=n()},o=UY();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();var s,u=Oo(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(cBe){u.e(cBe)}finally{u.f()}a=Promise.resolve({kernelMs:UY()-o})}if(GG().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var c=function(t){var n=r[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},l=0;l<r.length;l++)c(l);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var KY=function(){function e(){N(this,e)}return(0,C.Z)(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"==typeof r?pG("".concat(r,"ms"),9):r.error,s=pG(e,25),u=t.rank,c=t.size,l=pG(t.shape.toString(),14),f="";for(var h in a){var p=a[h];if(null!=p){var d=p.shape||t.shape,m=d.length;f+="".concat(h,": ").concat(m,"D ").concat(m>0?d:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(f,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function XY(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var c in u){for(var l=u[c],f=!1,h=0;h<t.length;h++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),f=!0,a[s.id]=!0;break}if(f)break}}var p={};p[n.id]=!0;for(var d={},m=e.length-1;m>=0;m--)for(var v=e[m],g=v.inputs,y=0;y<v.outputs.length;y++)if(p[v.outputs[y].id]){for(var b in g)p[g[b].id]=!0,d[v.id]=!0;break}for(var x=[],w=0;w<e.length;w++){var k=e[w];if(a[k.id]&&d[k.id]){var S={};for(var _ in k.inputs){var T=k.inputs[_];r[T.id]&&(S[_]=T)}var I=Object.assign({},k);I.inputs=S,I.outputs=k.outputs,x.push(I)}}return x}function YY(e,t,n,r){for(var a=function(a){var i=t[a],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found for ".concat(i.kernelName,"."));var s=i.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". Available gradients found: ").concat(Object.keys(s),"."));var a=n((function(){return s[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ").concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var o=i.inputs[t];if(!uG(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input '").concat(t,"' has shape '").concat(a.shape,"', which does not match the shape of the input '").concat(o.shape,"'"));if(null==e[o.id])e[o.id]=a;else{var u=e[o.id];e[o.id]=r(u,a),u.dispose()}};for(var c in i.inputs)u(c)},i=t.length-1;i>=0;i--)a(i)}function $Y(e,t,n,r){var a=OG(t),i=function(e,t,n,r){var a=oG(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?t$(e):e;if(s>1)for(var c=0;c<a/i;c++)for(var l=c*i,f=0;f<i;f++)o[f]=Math.max(o[f],QY(u[l+f],0,n).length);return o}(e,t,n,a),o=t.length,s=e$(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function QY(e,t,n){return pG(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ").concat(parseFloat(e[1].toFixed(7)),"j"):IG(e)?"'".concat(e,"'"):"bool"===n?JY(e):parseFloat(e.toFixed(7)).toString(),t)}function JY(e){return 0===e?"false":"true"}function e$(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u){if("complex64"===n){var c=t$(e);return[QY(c[0],0,n)]}return"bool"===n?[JY(e[0])]:[e[0].toString()]}if(1===u){if(s>20){var l=3*o,f=Array.from(e.slice(0,l)),h=Array.from(e.slice((s-3)*o,s*o));return"complex64"===n&&(f=t$(f),h=t$(h)),["["+f.map((function(e,t){return QY(e,a[t],n)})).join(", ")+", ..., "+h.map((function(e,t){return QY(e,a[s-3+t],n)})).join(", ")+"]"]}var p="complex64"===n?t$(e):Array.from(e);return["["+p.map((function(e,t){return QY(e,a[t],n)})).join(", ")+"]"]}var d=t.slice(1),m=r.slice(1),v=r[0]*o,g=[];if(s>20){for(var y=0;y<3;y++){var b=y*v,x=b+v;g.push.apply(g,(0,I.Z)(e$(e.slice(b,x),d,n,m,a,!1)))}g.push("...");for(var w=s-3;w<s;w++){var k=w*v,S=k+v;g.push.apply(g,(0,I.Z)(e$(e.slice(k,S),d,n,m,a,w===s-1)))}}else for(var _=0;_<s;_++){var T=_*v,N=T+v;g.push.apply(g,(0,I.Z)(e$(e.slice(T,N),d,n,m,a,_===s-1)))}var C=2===u?",":"";g[0]="["+g[0]+C;for(var E=1;E<g.length-1;E++)g[E]=" "+g[E]+C;for(var A=",\n",R=2;R<u;R++)A+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(i?"":A),g}function t$(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var n$=function(){function e(t,n,r){var a=this;if(N(this,e),this.dtype=n,this.shape=t.slice(),this.size=oG(t),null!=r){var i=r.length;nG(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size inferred by the shape '").concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||bG(n,this.size),this.strides=OG(t)}return(0,C.Z)(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),nG(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must match the rank (").concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,".   Buffer shape=").concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return r$().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),r$=null,a$=null;var i$=function(){function e(t,n,r,a){N(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=oG(t),this.strides=OG(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return(0,C.Z)(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=Tn(Sn().mark((function e(){var t;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",a$.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return a$.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=Tn(Sn().mark((function e(){var t;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",DG(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return DG(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=Tn(Sn().mark((function e(){var t,n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=r$().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return GY(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),r$().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=r$().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return GY(e)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=Tn(Sn().mark((function e(){var t;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,r$().read(this.dataId);case 3:return t=e.sent,e.abrupt("return","string"===this.dtype?t:new Uint8Array(t.buffer));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(r$().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return a$.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),a$.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return $Y(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),a$.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),r$().makeVariable(this,e,t,n)}}]),e}();function o$(){return YG("Tensor",(function(){return i$}))}Object.defineProperty(i$,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),o$();var s$=function(e){A(n,e);var t=L(n);function n(e,r,a,i){var o;return N(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return(0,C.Z)(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and previous value (").concat(this.dtype,") must match"));if(!uG(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and previous value (").concat(this.shape,") must match"));r$().disposeTensor(this),this.dataId=e.dataId,r$().incRef(this,null)}},{key:"dispose",value:function(){r$().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(i$);Object.defineProperty(s$,Symbol.hasInstance,{value:function(e){return e instanceof i$&&null!=e.assign&&e.assign instanceof Function}});var u$,c$,l$,f$,h$,p$={};kZ(p$,{assertTypesMatch:function(){return y$},getTensorsInContainer:function(){return x$},isTensorInList:function(){return b$},makeTypesMatch:function(){return g$}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(u$||(u$={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(c$||(c$={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(l$||(l$={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(f$||(f$={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(h$||(h$={}));var d$={float32:f$,int32:c$,bool:l$,complex64:h$};function m$(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return d$[e][t]}function v$(e){return m$(e,"int32")}function g$(e,t){if(e.dtype===t.dtype)return[e,t];var n=m$(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function y$(e,t){nG(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and second(").concat(t.dtype,") input must match")}))}function b$(e,t){return t.some((function(t){return t.id===e.id}))}function x$(e){var t=[];return w$(e,t,new Set),t}function w$(e,t,n){if(null!=e)if(e instanceof i$)t.push(e);else if(function(e){return Array.isArray(e)||"object"==typeof e}(e)){var r=e;for(var a in r){var i=r[a];n.has(i)||(n.add(i),w$(i,t,n))}}}function k$(e){return null!=e.kernelName}var S$=function(){function e(){N(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return(0,C.Z)(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),_$=function(){function e(t){N(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new S$}return(0,C.Z)(e,[{key:"ready",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=17;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=14;break}return e.next=13,this.setBackend(r);case 13:return e.abrupt("return");case 14:n++,e.next=6;break;case 17:throw new Error("Could not initialize any backends, all backend initializations failed.");case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(lY("".concat(e," backend was already registered. Reusing existing backend factory.")),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=Tn(Sn().mark((function e(t){var n,r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=14;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=11;break}return e.next=8,r;case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=r;case 12:if(e.t0){e.next=14;break}return e.abrupt("return",!1);case 14:return e.abrupt("return",(this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new qY(this.backendInstance),!0));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;vY(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;vY(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof GZ||"function"!=typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,lY("Initialization of backend ".concat(e," failed")),lY(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(r){return lY("Initialization of backend ".concat(e," failed")),lY(r.stack||r.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(r){throw t(),r}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=N$.runKernel(fK,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return N$.runKernel(xq,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,null==dY(e,this.backendName))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak (").concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r=this,a=[],i=this.isTapeOn(),o=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var u,c=k$(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(k$(e)){var l=e.kernelName,f=e.inputs,h=e.attrs;null==this.backendName&&this.backend;var p=dY(l,this.backendName);nG(null!=p,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(r.backendName,"'")})),n=function(){var e=r.backend.numDataIds();u=p.kernelFunc({inputs:f,attrs:h,backend:r.backend});var t=Array.isArray(u)?u:[u];r.shouldCheckForMemLeaks()&&r.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){return null!=e.rank?e:r.makeTensorFromTensorInfo(e)}));if(i){var o=r.getTensorsForGradient(l,f,n);a=r.saveTensorsForBackwardMode(o)}return n}}else{var d=e.forwardFunc,m=function(e){!i||(a=e.map((function(e){return r.keep(r.clone(e))})))};n=function(){var e=r.backend.numDataIds();u=r.tidy((function(){return d(r.backend,m)}));var t=Array.isArray(u)?u:[u];return r.shouldCheckForMemLeaks()&&r.checkKernelForMemLeak(c,e,t),t}}var v,g=e.inputs,y=e.attrs,b=k$(e)?null:e.backwardsFunc;return this.scopedRun((function(){return r.state.kernelDepth++}),(function(){return r.state.kernelDepth--}),(function(){r.ENV.getBool("DEBUG")||r.state.profiling?(v=r.profiler.profileKernel(c,g,(function(){return n()})),r.ENV.getBool("DEBUG")&&r.profiler.logKernelProfile(v),t=v.outputs):t=n()})),i&&this.addTapeNode(c,g,t,b,a,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(g).map((function(e){return null!=g[e]?g[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:v.timeMs,extraInfo:v.extraInfo}),Array.isArray(u)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=mY(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(nG(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&IG(e[0])&&(a=e.map((function(e){return ZY(e)})));var i=r.write(a,t,n),o=new i$(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=TG(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}},{key:"makeTensorFromTensorInfo",value:function(e,t){var n=e.dataId,r=e.shape,a=e.dtype,i=new i$(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new s$(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*_G(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof s$||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*_G(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i,o;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=5,t();case 5:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,(0,I.Z)(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=Oo(this.state.activeProfile.kernels),e.prev=11,a.s();case 13:if((i=a.n()).done){e.next=23;break}return o=i.value,e.next=17,o.kernelTimeMs;case 17:return o.kernelTimeMs=e.sent,e.next=20,o.extraInfo;case 20:o.extraInfo=e.sent;case 21:e.next=13;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(11),a.e(e.t0);case 28:return e.prev=28,a.f(),e.finish(28);case 31:return e.abrupt("return",this.state.activeProfile);case 32:case"end":return e.stop()}}),e,this,[[11,25,28,31]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=mY(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=PG(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=x$(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];!i.kept&&!r.has(i.id)&&i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){!e.kept&&e.scopeId===o.id&&t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(nG(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));nG(i instanceof i$,(function(){return"The result y returned by f() must be a tensor."}));var o=XY(this.state.activeTape,t,i);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?T$(i.shape):n,YY(e,o,(function(e){return r.tidy(e)}),C$);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=Oo(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(cBe){n.e(cBe)}finally{n.f()}})),r.state.activeTape=null),{value:i,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return nG(AG(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];nG(r.every((function(e){return e instanceof i$})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i,o={};r.forEach((function(e,t){o[t]=e}));var s=function(t,n){return nG((i=e.apply(void 0,r.concat([n]))).value instanceof i$,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),nG(AG(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},u=function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];nG(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),nG(a.every((function(e){return e instanceof i$})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o};return t.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=Tn(Sn().mark((function e(t){var n,r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=UY(),e.next=3,this.backend.time(t);case 3:return r=e.sent,e.abrupt("return",(r.wallMs=UY()-n,r));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new S$,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function T$(e){var t=FG(oG(e),"float32");return N$.makeTensor(t,e,"float32")}function I$(){var e=XG();if(null==e._tfengine){var t=new UG(e);e._tfengine=new _$(t)}return function(e){KG=e}(e._tfengine.ENV),function(e){r$=e}((function(){return e._tfengine})),e._tfengine}_$.nextTensorId=0,_$.nextVariableId=0;var N$=I$();function C$(e,t){var n={a:e,b:t};return N$.runKernel(eq,n)}var E$,A$={};function R$(e){E$=e}function O$(e){if(void 0!==E$)return E$;if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!=typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function M$(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}kZ(A$,{isBrowser:function(){return M$},isMobile:function(){return O$},mockIsMobile:function(){return R$}});var D$=GG();function F$(e,t){var n=e;if(SG(e))return"string"===t?[]:[e.length];if("object"==typeof e&&"texture"in e){var r=e.channels||"RGBA";return[e.height,e.width*r.length]}if(!Array.isArray(e))return[];for(var a=[];Array.isArray(n)||SG(n)&&"string"!==t;)a.push(n.length),n=n[0];return Array.isArray(e)&&GG().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&P$(e,a,[]),a}function P$(e,t,n){if(n=n||[],Array.isArray(e)||SG(e)){nG(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, but is an array of ").concat(e.length," elements")})),nG(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," elements, but has ").concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)P$(e[a],r,n.concat(a))}else nG(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, but should be an array/TypedArray of ").concat(t[0]," elements")}))}function L$(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must be ").concat(e," tensor, but got ").concat(t," tensor"))}}function z$(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof i$)return L$(r,e.dtype,t,n),e;var a=EG(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),L$(r,a,t,n),null==e||!SG(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a Tensor or TensorLike, but got '").concat(i,"'"))}var o=F$(e,a);!SG(e)&&!Array.isArray(e)&&(e=[e]);var s="string"!==a?jY(e,a):iG(e,[],!0);return N$.makeTensor(s,o,a)}function B$(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a `Tensor[]` or `TensorLike[]`"));return e.map((function(e,a){return z$(e,"".concat(t,"[").concat(a,"]"),n,r)}))}D$.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),D$.registerFlag("IS_BROWSER",(function(){return M$()})),D$.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&"undefined"!=typeof process.versions&&"undefined"!=typeof process.versions.node})),D$.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),D$.registerFlag("PROD",(function(){return!1})),D$.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return D$.getBool("DEBUG")})),D$.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),D$.registerFlag("IS_TEST",(function(){return!1})),D$.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),D$.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),D$.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1})),D$.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(function(){return!1})),D$.registerFlag("USE_SETTIMEOUTCUSTOM",(function(){return!1}));var W$="__op";function V$(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with ".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=W$;var a=function(){N$.startScope(n);try{var e=r.apply(void 0,arguments);return VG(e)&&console.error("Cannot return a Promise inside of tidy."),N$.endScope(e),e}catch(e){throw N$.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var j$=V$({complex_:function(e,t){var n=z$(e,"real","complex"),r=z$(t,"imag","complex");rG(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", must match in call to tf.complex()."));var a={real:n,imag:r};return N$.runKernel(Sq,a)}});function U$(e,t,n,r){if(null==r&&(r=EG(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if("object"==typeof e&&"texture"in e){if("float32"!==r&&"int32"!==r)throw new Error("Creating tensor from texture only supports 'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return e.channels=e.channels||"RGBA",N$.backend.createTensorFromTexture(e,t||n,r)}if(!SG(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){zG(t);var a=oG(t),i=oG(n);nG(a===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ").concat(a," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==oG(t.slice(o));nG(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape (".concat(n,") does not match the provided shape (").concat(t,"). ")}))}}return!SG(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e="string"!==r?jY(e,r):iG(e,[],!0),N$.makeTensor(e,t,r)}function H$(e,t,n){return U$(e,t,F$(e,n),n)}var Z$={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};function G$(e,t){return q$.apply(this,arguments)}function q$(){return q$=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=[],i=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),o=function(e){var o=i[e],s=Array.isArray(t)?t[e].tensor:t[o];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(s.dtype));var u={name:o,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){var c=new Promise(function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i,o,u,c;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,a=new Uint8Array(r),i=0,o=0;o<n.length;o++)u=n[o],c=new Uint8Array(new Uint32Array([u.length]).buffer),a.set(c,i),i+=4,a.set(u,i),i+=u.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.push(c)}else a.push(s.data());null!=n&&(u.group=n),r.push(u)},s=0;s<i.length;++s)o(s);return e.next=5,Promise.all(a);case 5:return u=e.sent,e.abrupt("return",{data:X$(u),specs:r});case 7:case"end":return e.stop()}}),e)}))),q$.apply(this,arguments)}function K$(e,t){var n,r,a={},i=0,o=Oo(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.name,c=s.dtype,l=s.shape,f=oG(l),h=void 0;if("quantization"in s){var p=s.quantization;if("uint8"===p.dtype||"uint16"===p.dtype){if(!("min"in p)||!("scale"in p))throw new Error("Weight ".concat(s.name," with quantization ").concat(p.dtype," doesn't have corresponding metadata min and scale."))}else{if("float16"!==p.dtype)throw new Error("Weight ".concat(s.name," has unknown quantization dtype ").concat(p.dtype,". Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'."));if("float32"!==c)throw new Error("Weight ".concat(s.name," is quantized with ").concat(p.dtype," which only supports weights of type float32 not ").concat(c,"."))}var d=Z$[p.dtype],m=e.slice(i,i+f*d),v="uint8"===p.dtype?new Uint8Array(m):new Uint16Array(m);if("float32"===c)if("uint8"===p.dtype||"uint16"===p.dtype){h=new Float32Array(v.length);for(var g=0;g<v.length;g++){var y=v[g];h[g]=y*p.scale+p.min}}else{if("float16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," for weight type float32."));void 0===n&&(n=uQ()),h=n(v)}else{if("int32"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));if("uint8"!==p.dtype&&"uint16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," for weight type int32."));h=new Int32Array(v.length);for(var b=0;b<v.length;b++){var x=v[b];h[b]=Math.round(x*p.scale+p.min)}}i+=f*d}else if("string"===c){var w=oG(s.shape);h=[];for(var k=0;k<w;k++){var S=new Uint32Array(e.slice(i,i+4))[0];i+=4;var _=new Uint8Array(e.slice(i,i+S));h.push(_),i+=S}}else{var T=Z$[c],I=e.slice(i,i+f*T);if("float32"===c)h=new Float32Array(I);else if("int32"===c)h=new Int32Array(I);else if("bool"===c)h=new Uint8Array(I);else{if("complex64"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));h=new Float32Array(I);for(var N=new Float32Array(h.length/2),C=new Float32Array(h.length/2),E=0;E<N.length;E++)N[E]=h[2*E],C[E]=h[2*E+1];var A=H$(N,l,"float32"),R=H$(C,l,"float32");a[u]=j$(A,R),A.dispose(),R.dispose()}i+=f*T}"complex64"!==c&&(a[u]=H$(h,l,c))}}catch(cBe){o.e(cBe)}finally{o.f()}return a}function X$(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var Y$="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function $$(e){return Y$?Buffer.byteLength(e):new Blob([e]).size}function Q$(e){if(Y$)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function J$(e){if(Y$){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function eQ(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function tQ(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function nQ(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function rQ(e,t,n){var r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}function aQ(e,t){return iQ.apply(this,arguments)}function iQ(){return iQ=Tn(Sn().mark((function e(t,n){var r,a,i,o;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null!=t.weightsManifest,!e.t0){e.next=9;break}return e.next=4,n(t.weightsManifest);case 4:r=e.sent,a=(0,T.Z)(r,2),i=a[0],o=a[1];case 9:return e.abrupt("return",rQ(t,i,o));case 10:case"end":return e.stop()}}),e)}))),iQ.apply(this,arguments)}function oQ(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:$$(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:$$(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function sQ(e){var t,n=[],r=Oo(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push.apply(n,(0,I.Z)(a.weights))}}catch(cBe){r.e(cBe)}finally{r.f()}return n}function uQ(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=u}return new Float32Array(a)}}var cQ=function(){function e(){N(this,e),this.saveRouters=[],this.loadRouters=[]}return(0,C.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),lQ=function(e){return cQ.registerSaveRouter(e)},fQ=function(e){return cQ.registerLoadRouter(e)},hQ=function(e){return cQ.getSaveHandlers(e)},pQ=function(e,t){return cQ.getLoadHandlers(e,t)},dQ="tensorflowjs",mQ="models_store",vQ="model_info_store";function gQ(){if(!GG().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function yQ(e){var t=e.result;t.createObjectStore(mQ,{keyPath:"modelPath"}),t.createObjectStore(vQ,{keyPath:"modelPath"})}var bQ=function(){function e(t){if(N(this,e),this.indexedDB=gQ(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return(0,C.Z)(e,[{key:"save",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(dQ,1);a.onupgradeneeded=function(){return yQ(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(mQ,"readonly"),s=o.objectStore(mQ).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' in IndexedDB.")));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,c=oQ(t),l=i.transaction(vQ,"readwrite"),f=l.objectStore(vQ),h=f.put({modelPath:n.modelPath,modelArtifactsInfo:c});h.onsuccess=function(){var a=(u=i.transaction(mQ,"readwrite")).objectStore(mQ).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(f=l.objectStore(vQ)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},h.onerror=function(e){return i.close(),r(h.error)},l.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();bQ.URL_SCHEME="indexeddb://";var xQ=function(e){return GG().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(bQ.URL_SCHEME)?function(e){return new bQ(e)}(e.slice(bQ.URL_SCHEME.length)):null};function wQ(e){return e.startsWith(bQ.URL_SCHEME)?e.slice(bQ.URL_SCHEME.length):e}cQ.registerSaveRouter(xQ),cQ.registerLoadRouter(xQ);var kQ=function(){function e(){N(this,e),this.indexedDB=gQ()}return(0,C.Z)(e,[{key:"listModels",value:function(){var e=Tn(Sn().mark((function e(){var t=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(dQ,1);r.onupgradeneeded=function(){return yQ(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(vQ,"readonly"),i=a.objectStore(vQ).getAll();i.onsuccess=function(){var t,n={},r=Oo(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(cBe){r.e(cBe)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Tn(Sn().mark((function e(t){var n=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(t=wQ(t),new Promise((function(e,r){var a=n.indexedDB.open(dQ,1);a.onupgradeneeded=function(){return yQ(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(vQ,"readwrite"),s=o.objectStore(vQ),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' in IndexedDB.")));var a=s.delete(t),o=function(){var a=(n=i.transaction(mQ,"readwrite")).objectStore(mQ).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),SQ="/",_Q="tensorflowjs_models",TQ="info",IQ="model_topology",NQ="weight_specs",CQ="weight_data",EQ="model_metadata";function AQ(e){return{info:[_Q,e,TQ].join(SQ),topology:[_Q,e,IQ].join(SQ),weightSpecs:[_Q,e,NQ].join(SQ),weightData:[_Q,e,CQ].join(SQ),modelMetadata:[_Q,e,EQ].join(SQ)}}function RQ(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function OQ(e){var t=e.split(SQ);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(SQ)}function MQ(e){return e.startsWith(DQ.URL_SCHEME)?e.slice(DQ.URL_SCHEME.length):e}var DQ=function(){function e(t){if(N(this,e),!GG().getBool("IS_BROWSER")||"undefined"==typeof window||"undefined"==typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=AQ(this.modelPath)}return(0,C.Z)(e,[{key:"save",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=oQ(t),e.prev=3,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Q$(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,initializerSignature:null!=t.initializerSignature?t.initializerSignature:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},e.abrupt("return",(this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:a}));case 9:throw e.prev=9,e.t0=e.catch(3),RQ(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=").concat(a.modelTopologyBytes,", weightSpecsBytes=").concat(a.weightSpecsBytes,", weightDataBytes=").concat(a.weightDataBytes,"."));case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r,a,i,o,s;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=8;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' is missing."));case 8:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=12;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' are missing."));case 12:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.initializerSignature&&(n.initializerSignature=o.initializerSignature),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=18;break}throw new Error("In local storage, the binary weight values of model '".concat(this.modelPath,"' are missing."));case 18:return e.abrupt("return",(n.weightData=J$(s),n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();DQ.URL_SCHEME="localstorage://";var FQ=function(e){return GG().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(DQ.URL_SCHEME)?function(e){return new DQ(e)}(e.slice(DQ.URL_SCHEME.length)):null};cQ.registerSaveRouter(FQ),cQ.registerLoadRouter(FQ);var PQ=function(){function e(){N(this,e),nG(GG().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),nG("undefined"==typeof window||"undefined"!=typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return(0,C.Z)(e,[{key:"listModels",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r,a,i,o;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=_Q+SQ,r=SQ+TQ,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=OQ(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Tn(Sn().mark((function e(t){var n,r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=MQ(t),n=AQ(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),e.abrupt("return",(RQ(n),r));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),LQ="://",zQ=function(){function e(){N(this,e),this.managers={}}return(0,C.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){nG(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(LQ)&&(t=t.slice(0,t.indexOf(LQ))),nG(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();nG(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(t){var n=e.getInstance().managers[t];if(null==n)throw new Error("Cannot find model manager for scheme '".concat(t,"'"));return n}},{key:"getSchemes",value:function(){return Object.keys(e.getInstance().managers)}}]),e}();function BQ(e){if(-1===e.indexOf(LQ))throw new Error("The url string provided does not contain a scheme. Supported schemes are: ".concat(zQ.getSchemes().join(",")));return{scheme:e.split(LQ)[0],path:e.split(LQ)[1]}}function WQ(e,t){return VQ.apply(this,arguments)}function VQ(){return VQ=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u,c,l,f,h,p=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]&&p[2],nG(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),nG((a=cQ.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),nG(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") load handlers for source URL ").concat(t,".")})),i=a[0],nG((o=cQ.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination URL ".concat(n,".")})),nG(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") save handlers for destination URL ").concat(n,".")})),s=o[0],u=BQ(t).scheme,c=BQ(t).path,l=u===BQ(t).scheme,e.next=12,i.load();case 12:if(f=e.sent,e.t0=r&&l,!e.t0){e.next=17;break}return e.next=17,zQ.getManager(u).removeModel(c);case 17:return e.next=19,s.save(f);case 19:if(h=e.sent,e.t1=r&&!l,!e.t1){e.next=24;break}return e.next=24,zQ.getManager(u).removeModel(c);case 24:return e.abrupt("return",h.modelArtifactsInfo);case 25:case"end":return e.stop()}}),e)}))),VQ.apply(this,arguments)}function jQ(){return UQ.apply(this,arguments)}function UQ(){return UQ=Tn(Sn().mark((function e(){var t,n,r,a,i,o,s;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=zQ.getSchemes(),n={},r=Oo(t),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=12;break}return i=a.value,e.next=8,zQ.getManager(i).listModels();case 8:for(s in o=e.sent)n[i+LQ+s]=o[s];case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])}))),UQ.apply(this,arguments)}function HQ(e){return ZQ.apply(this,arguments)}function ZQ(){return ZQ=Tn(Sn().mark((function e(t){var n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=BQ(t),e.abrupt("return",zQ.getManager(n.scheme).removeModel(n.path));case 2:case"end":return e.stop()}}),e)}))),ZQ.apply(this,arguments)}function GQ(e,t){return qQ.apply(this,arguments)}function qQ(){return qQ=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WQ(t,n,!1));case 1:case"end":return e.stop()}}),e)}))),qQ.apply(this,arguments)}function KQ(e,t){return XQ.apply(this,arguments)}function XQ(){return XQ=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WQ(t,n,!0));case 1:case"end":return e.stop()}}),e)}))),XQ.apply(this,arguments)}var YQ=function(){function e(){N(this,e),this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}return(0,C.Z)(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}},{key:"setTimeoutCustom",value:function(e,t){var n=this;"undefined"!=typeof window&&GG().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((function(){window.postMessage({name:n.messageName,index:n.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(function(e){e.source===window&&e.data.name===n.messageName&&(e.stopPropagation(),(0,n.functionRefs[e.data.index])(),n.handledMessageCount++,n.handledMessageCount===n.functionRefs.length&&(n.functionRefs=[],n.handledMessageCount=0))}),!0))):setTimeout(e,t)}}]),e}();if(GG().get("IS_BROWSER")){GG().setPlatform("browser",new YQ);try{zQ.registerManager(DQ.URL_SCHEME,new PQ)}catch(lBe){}try{zQ.registerManager(bQ.URL_SCHEME,new kQ)}catch(lBe){}}var $Q,QQ=function(){return TZ()},JQ=function(){function e(){N(this,e),this.util=IZ(),this.textEncoder=new this.util.TextEncoder}return(0,C.Z)(e,[{key:"fetch",value:function(e,t){return null!=GG().global.fetch?GG().global.fetch(e,t):(null==$Q&&($Q=QQ()),$Q(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();function eJ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",zG(e),new n$(e,t,n)}GG().get("IS_NODE")&&!GG().get("IS_BROWSER")&&GG().setPlatform("node",new JQ);var tJ=V$({cast_:function(e,t){var n=z$(e,"x","cast");if(!wG(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return N$.runKernel(xq,r,a)}});var nJ=V$({clone_:function(e){var t={x:z$(e,"x","clone","string_or_numeric")};return N$.runKernel(fK,t)}});function rJ(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}I$(),function(e){a$=e}({buffer:eJ,cast:tJ,clone:nJ,print:rJ});var aJ={};kZ(aJ,{browserFiles:function(){return uJ},browserHTTPRequest:function(){return xJ},concatenateArrayBuffers:function(){return eQ},copyModel:function(){return GQ},decodeWeights:function(){return K$},encodeWeights:function(){return G$},fromMemory:function(){return _J},fromMemorySync:function(){return TJ},getLoadHandlers:function(){return pQ},getModelArtifactsForJSON:function(){return aQ},getModelArtifactsForJSONSync:function(){return rQ},getModelArtifactsInfoForJSON:function(){return oQ},getSaveHandlers:function(){return hQ},getWeightSpecs:function(){return sQ},http:function(){return bJ},isHTTPScheme:function(){return gJ},listModels:function(){return jQ},loadWeights:function(){return hJ},moveModel:function(){return KQ},registerLoadRouter:function(){return fQ},registerSaveRouter:function(){return lQ},removeModel:function(){return HQ},weightsLoaderFactory:function(){return dJ},withSaveHandler:function(){return IJ},withSaveHandlerSync:function(){return NJ}});function iJ(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var oJ=function(){function e(t){if(N(this,e),!GG().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),(null==t||0===t.length)&&(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return(0,C.Z)(e,[{key:"save",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i,o,s;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=5;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 5:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=nQ(t,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,o.href=i,e.next=10,iJ((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 10:if(null==t.weightData){e.next=16;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=16,iJ((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 16:return e.abrupt("return",{modelArtifactsInfo:oQ(t)});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();oJ.URL_SCHEME="downloads://";var sJ=function(){function e(t){if(N(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return(0,C.Z)(e,[{key:"load",value:function(){var e=Tn(Sn().mark((function e(){var t=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),i=a.modelTopology;if(null!=i)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var o=aQ(a,(function(e){return t.loadWeights(e)}));e(o)}else e({modelTopology:i});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading Keras-style tf.Model artifacts only."))},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],i=Oo(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push.apply(r,(0,I.Z)(o.weights)),a.push.apply(a,(0,I.Z)(o.paths))}}catch(cBe){i.e(cBe)}finally{i.f()}var s=this.checkManifestAndWeightFiles(e),u=a.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(u).then((function(e){return[r,eQ(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return tQ(e.name)})),i={},o=Oo(e);try{for(o.s();!(t=o.n()).done;){t.value.paths.forEach((function(e){var t=tQ(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: '".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));i[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(cBe){o.e(cBe)}finally{o.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest (".concat(r.length,") and the number of weight files provided (").concat(this.weightsFiles.length,")."));return i}}]),e}();function uJ(e){return new sJ(e)}function cJ(e,t,n,r){var a;nG(null!=(a=e)&&Array.isArray(a)&&a.length>0,(function(){return"promises must be a none empty array"})),function(e,t){nG(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction ".concat(e)})),nG(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction ".concat(t)})),nG(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction ".concat(e," and endFraction ").concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var i=0;return Promise.all(e.map((function(a){return a.then((function(a){var o=n+ ++i/e.length*(r-n);return t(o),a})),a})))}function lJ(e,t){return fJ.apply(this,arguments)}function fJ(){return fJ=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u,c;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?GG().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,cJ(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0.map((function(e){return e.arrayBuffer()})),u=.5,c=1,null!=n.onProgress){e.next=23;break}return e.next=20,Promise.all(s);case 20:e.t1=e.sent,e.next=26;break;case 23:return e.next=25,cJ(s,n.onProgress,u,c);case 25:e.t1=e.sent;case 26:return e.abrupt("return",e.t1);case 27:case"end":return e.stop()}}),e)}))),fJ.apply(this,arguments)}function hJ(e){return pJ.apply(this,arguments)}function pJ(){return pJ=Tn(Sn().mark((function e(t){var n,r,a,i=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"",r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,e.abrupt("return",dJ((function(e){return lJ(e,{requestInit:a})}))(t,n,r));case 4:case"end":return e.stop()}}),e)}))),pJ.apply(this,arguments)}function dJ(e){return function(){var t=Tn(Sn().mark((function t(n){var r,a,i,o,s,u,c,l,f,h,p,d,m=arguments;return Sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:"",a=m.length>2?m[2]:void 0,i=n.map((function(){return!1})),o={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,c=Z$[r]*oG(e.shape),l=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),s[n]=!0)})):l(),u.push(e.name),n+=c}))})),s.every((function(e){return e}))){t.next=6;break}throw c=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: ".concat(c.join(", "),". \nManifest JSON has weights with names: ").concat(u.join(", "),"."));case 6:return l=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),f=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;f.push(t)}))})),t.next=10,e(f);case 10:return h=t.sent,p={},d=0,t.abrupt("return",(l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=h[d+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,c=0;c<t;c++){var l=new Uint8Array(h[d+c]);s.set(l,u),u+=l.byteLength}o[e].forEach((function(e){var t=K$(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)p[n]=t[n]})),d+=t})),p));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}cQ.registerSaveRouter((function(e){return GG().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(oJ.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new oJ(e)}(e.slice(oJ.URL_SCHEME.length)):null}));var mJ=function(){function e(t,n){if(N(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(nG("function"==typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=GG().platform.fetch,nG(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&nG(2===t.length,(function(){return"URL paths for http must have a length of 2, (actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return(0,C.Z)(e,[{key:"save",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=nQ(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=8,this.fetch(this.path,n);case 8:if(!(i=e.sent).ok){e.next=11;break}return e.abrupt("return",{modelArtifactsInfo:oQ(t),responses:[i]});case 11:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status ".concat(i.status,"."));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r,a,i,o=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ").concat(t.status,". Please verify this URL points to the model JSON of the model to load."));case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 15:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=18;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model topology or manifest for weights."));case 18:return e.abrupt("return",aQ(n,(function(e){return o.loadWeights(e)})));case 19:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i,o,s,u,c,l,f,h,p,d,m,v,g;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=vJ(n),a=(0,T.Z)(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,u=sQ(t),c=[],l=[],f=Oo(t);try{for(f.s();!(h=f.n()).done;){p=h.value,d=Oo(p.paths);try{for(d.s();!(m=d.n()).done;)v=m.value,null!=this.weightUrlConverter?l.push(this.weightUrlConverter(v)):c.push(s+v+o)}catch(cBe){d.e(cBe)}finally{d.f()}}}catch(cBe){f.e(cBe)}finally{f.f()}if(e.t0=this.weightUrlConverter,!e.t0){e.next=13;break}return e.t1=c.push,e.t2=c,e.t3=I.Z,e.next=10,Promise.all(l);case 10:e.t4=e.sent,e.t5=(0,e.t3)(e.t4),e.t1.apply.call(e.t1,e.t2,e.t5);case 13:return e.next=15,lJ(c,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 15:return g=e.sent,e.abrupt("return",[u,eQ(g)]);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function vJ(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function gJ(e){return null!=e.match(mJ.URL_SCHEME_REGEX)}mJ.URL_SCHEME_REGEX=/^https?:\/\//;var yJ=function(e,t){if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return gJ(e)})):gJ(e))?bJ(e,t):null};function bJ(e,t){return new mJ(e,t)}function xJ(e,t){return bJ(e,t)}cQ.registerSaveRouter(yJ),cQ.registerLoadRouter(yJ);var wJ=function(){function e(t){N(this,e),this.modelArtifacts=t}return(0,C.Z)(e,[{key:"load",value:function(){return this.modelArtifacts}}]),e}(),kJ=function(){function e(t){N(this,e),this.saveHandler=t}return(0,C.Z)(e,[{key:"save",value:function(e){return this.saveHandler(e)}}]),e}(),SJ=(0,C.Z)((function e(t){N(this,e),t.load&&(this.load=function(){return Promise.resolve(t.load())}),t.save&&(this.save=function(e){return Promise.resolve(t.save(e))})}));function _J(e,t,n,r){var a=arguments;return new SJ(TJ.apply(void 0,(0,I.Z)(a)))}function TJ(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new wJ(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new wJ({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new wJ({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function IJ(e){return new kJ(e)}function NJ(e){return new kJ(e)}var CJ={};kZ(CJ,{confusionMatrix:function(){return n0}});var EJ=V$({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=z$(e,"a","matMul"),i=z$(t,"b","matMul"),o=g$(a,i),s=(0,T.Z)(o,2),u={a:a=s[0],b:i=s[1]},c={transposeA:n,transposeB:r};return N$.runKernel(mq,u,c)}});var AJ=V$({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var i={indices:z$(e,"indices","oneHot","int32")},o={dtype:a,depth:t,onValue:n,offValue:r};return N$.runKernel($K,i,o)}});function RJ(){GG().set("PROD",!0)}function OJ(){GG().set("DEBUG",!0)}function MJ(){GG().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function DJ(e){GG().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function FJ(){N$.disposeVariables()}function PJ(){return N$}function LJ(){return N$.memory()}function zJ(e){return N$.profile(e)}function BJ(e,t){return N$.tidy(e,t)}function WJ(e){x$(e).forEach((function(e){return e.dispose()}))}function VJ(e){return N$.keep(e)}function jJ(e){return N$.time(e)}function UJ(e){return N$.setBackend(e)}function HJ(){return N$.ready()}function ZJ(){return N$.backendName}function GJ(e){N$.removeBackend(e)}function qJ(e){return N$.findBackend(e)}function KJ(e){return N$.findBackendFactory(e)}function XJ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return N$.registerBackend(e,t,n)}function YJ(){return N$.backend}function $J(e,t){GG().setPlatform(e,t)}!function(e){e}(DJ);var QJ=V$({imag_:function(e){var t={input:z$(e,"input","imag")};return N$.runKernel(pK,t)}});var JJ=V$({neg_:function(e){var t={x:z$(e,"x","neg")};return N$.runKernel(ZK,t)}});var e0=V$({real_:function(e){var t={input:z$(e,"input","real")};return N$.runKernel(uX,t)}});var t0=V$({transpose_:function(e,t,n){var r=z$(e,"x","transpose");if(null==t&&(t=r.shape.map((function(e,t){return t})).reverse()),nG(r.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(r.rank," must match length of perm ").concat(t,".")})),t.forEach((function(e){nG(e>=0&&e<r.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(r.rank-1," but got ").concat(t)}))})),r.rank<=1)return r.clone();var a={x:r},i={perm:t};return"complex64"===r.dtype?BJ((function(){var e=e0(r),t=QJ(r);return e=N$.runKernel(QX,{x:e},i),t=N$.runKernel(QX,{x:t},i),n&&(t=JJ(t)),j$(e,t)})):N$.runKernel(QX,a,i)}});var n0=V$({confusionMatrix_:function(e,t,n){var r=z$(e,"labels","confusionMatrix"),a=z$(t,"predictions","confusionMatrix");nG(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got ".concat(n)})),nG(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got ".concat(r.rank)})),nG(1===a.rank,(function(){return"Expected the rank of predictions to be 1, but got ".concat(a.rank)})),nG(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: ".concat(r.shape[0]," vs. ").concat(a.shape[0],". Labels and predictions should have the same number of elements.")})),nG(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got ".concat(n)}));var i=AJ(tJ(r,"int32"),n),o=AJ(tJ(a,"int32"),n),s=t0(i),u=EJ(s,o);return tJ(u,"int32")}}),r0={};function a0(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function i0(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function o0(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes ".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(i)}}return n}kZ(r0,{assertAndGetBroadcastShape:function(){return o0},getBroadcastDims:function(){return a0},getReductionAxes:function(){return i0}});var s0,u0={};function c0(e,t,n){if(aG(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=F$(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return U$(e,t,r,n)}function l0(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ".concat(e.constructor.name));s=!0}if(null!=dY(iY,N$.backendName)){var u={pixels:e},c={numChannels:t};return N$.runKernel(iY,u,c)}var l,f,h=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],p=(0,T.Z)(h,2),d=p[0],m=p[1];if(o)l=e.getContext("2d").getImageData(0,0,d,m).data;else if(r||n)l=e.data;else if(i||a||s){if(null==s0)if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas||"undefined"==typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");s0=new OffscreenCanvas(1,1).getContext("2d")}else s0=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});s0.canvas.width=d,s0.canvas.height=m,s0.drawImage(e,0,0,d,m),l=s0.getImageData(0,0,d,m).data}if(4===t)f=new Int32Array(l);else{u=d*m;f=new Int32Array(u*t);for(c=0;c<u;c++)for(var v=0;v<t;++v)f[c*t+v]=l[4*c+v]}return c0(f,[m,d,t],"int32")}function f0(e){return"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}function h0(e){return p0.apply(this,arguments)}function p0(){return p0=Tn(Sn().mark((function e(t){var n,r,a,i=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:3,r=null,!GG().getBool("WRAP_TO_IMAGEBITMAP")||!f0(t)){e.next=15;break}return e.prev=3,e.next=6,createImageBitmap(t,{premultiplyAlpha:"none"});case 6:a=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a=null;case 12:r=null!=a&&a.width===t.width&&a.height===t.height?a:t,e.next=16;break;case 15:r=t;case 16:return e.abrupt("return",l0(r,n));case 17:case"end":return e.stop()}}),e,null,[[3,9]])}))),p0.apply(this,arguments)}function d0(e,t){return m0.apply(this,arguments)}function m0(){return m0=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u,c,l,f,h,p,d,m,v,g,y;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=z$(t,"img","toPixels"),t instanceof i$||(r=tJ(a=r,"int32"),a.dispose()),2===r.rank||3===r.rank){e.next=4;break}throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(r.rank,"."));case 4:if(i=r.shape.slice(0,2),o=(0,T.Z)(i,2),s=o[0],u=o[1],!((c=2===r.rank?1:r.shape[2])>4||2===c)){e.next=7;break}throw new Error("toPixels only supports depth of size 1, 3 or 4 but got ".concat(c));case 7:if("float32"===r.dtype||"int32"===r.dtype){e.next=9;break}throw new Error("Unsupported type for toPixels: ".concat(r.dtype,". Please use float32 or int32 tensors."));case 9:return e.next=11,r.data();case 11:l=e.sent,f="float32"===r.dtype?255:1,h=new Uint8ClampedArray(u*s*4),a=0;case 15:if(!(a<s*u)){e.next=36;break}p=[0,0,0,255],d=0;case 18:if(!(d<c)){e.next=31;break}if(m=l[a*c+d],"float32"!==r.dtype){e.next=25;break}if(!(m<0||m>1)){e.next=23;break}throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ".concat(m,"."));case 23:e.next=27;break;case 25:if("int32"!==r.dtype||!(m<0||m>255)){e.next=27;break}throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ".concat(m,"."));case 27:1===c?(p[0]=m*f,p[1]=m*f,p[2]=m*f):p[d]=m*f;case 28:d++,e.next=18;break;case 31:h[(v=4*a)+0]=Math.round(p[0]),h[v+1]=Math.round(p[1]),h[v+2]=Math.round(p[2]),h[v+3]=Math.round(p[3]);case 33:++a,e.next=15;break;case 36:return null!=n&&(n.width=u,n.height=s,g=n.getContext("2d"),y=new ImageData(h,u,s),g.putImageData(y,0,0)),e.abrupt("return",(r!==t&&r.dispose(),h));case 38:case"end":return e.stop()}}),e)}))),m0.apply(this,arguments)}kZ(u0,{fromPixels:function(){return v0},fromPixelsAsync:function(){return h0},toPixels:function(){return d0}});var v0=V$({fromPixels_:l0}),g0={};function y0(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: ".concat(t.shape[r-1]," vs. ").concat(n));if(0===oG(e.shape))throw new Error("Requested more than 0 entries, but input is empty. Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,f=i;f<n;++f)l*=u[f],c.push(u[f]);var h=[].concat((0,I.Z)(OG(e.shape).map((function(e){return e/l}))),[1]).slice(0,i);return[c,o,l,h]}kZ(g0,{prepareAndValidate:function(){return y0}});var b0={};function x0(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ".concat(n.shape,", indices.shape: ").concat(t.shape,", shape: ").concat(e,", sliceDim: ").concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function w0(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}x0(n,t,e)}function k0(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:oG(t.shape)/u,sliceSize:o,strides:[].concat((0,I.Z)(OG(n.slice(0,a))),[1]),outputSize:oG(n)}}kZ(b0,{calculateShapes:function(){return k0},validateInput:function(){return w0},validateUpdateShape:function(){return x0}});var S0={};kZ(S0,{assertParamsValid:function(){return _0},computeFlatOffset:function(){return L0},computeOutShape:function(){return I0},getNormalizedAxes:function(){return A0},isSliceContinous:function(){return P0},maskToAxes:function(){return T0},parseSliceParams:function(){return z0},sliceInfo:function(){return B0},startForAxis:function(){return D0},startIndicesWithElidedDims:function(){return R0},stopForAxis:function(){return F0},stopIndicesWithElidedDims:function(){return O0},stridesForAxis:function(){return M0},stridesWithElidedDims:function(){return N0}});function _0(e,t,n){var r=e.shape.length;nG(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must match the rank of the array (").concat(r,").")})),nG(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must match the rank of the array (").concat(r,").")}));for(var a=function(a){nG(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] (").concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},i=0;i<r;++i)a(i)}function T0(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function I0(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function N0(e,t,n,r){for(var a=(0,I.Z)(e),i=a.length;i<r.length;i++)a.push(1);for(var o=0;o<n;o++)0===o?a[t]=1:(a.splice(t,0,1),a.pop());return a}function C0(e,t,n){return n<=e?n:n-(t-1)}function E0(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function A0(e,t,n,r,a,i,o,s,u){var c=e.length,l=new Array(c),f=new Array(c),h=new Array(c);if(t.length&&n>0){var p=t[0],d=n+1;l=R0(o,p,d,r,e),f=O0(s,p,d,a,e),h=N0(i,p,d,e)}else for(var m=0;m<c;m++)l[m]=D0(o,r,i,e,m,u),f[m]=F0(s,a,i,e,m,u),h[m]=M0(i,m,u);return{begin:l,end:f,strides:h}}function R0(e,t,n,r,a){for(var i=(0,I.Z)(a),o=E0(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=0;else{var u=C0(t,n,s),c=r[u];e&1<<u&&(c=0),i[s]=c}return i}function O0(e,t,n,r,a){for(var i=(0,I.Z)(a),o=E0(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=Number.MAX_SAFE_INTEGER;else{var u=C0(t,n,s),c=r[u];e&1<<u&&(c=Number.MAX_SAFE_INTEGER),i[s]=c}for(var l=0;l<i.length;l++){var f=a[l];i[l]<0&&(i[l]+=f),i[l]=YZ(0,i[l],a[l])}return i}function M0(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function D0(e,t,n,r,a,i){var o=t[a],s=n[a]||1;(e&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[a];return o<0&&(o+=u),o=YZ(0,o,u-1)}function F0(e,t,n,r,a,i){var o=t[a],s=n[a]||1;(e&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[a];return o<0&&(o+=u),o=s>0?YZ(0,o,u):YZ(-1,o,u-1)}function P0(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function L0(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function z0(e,t,n){var r,a,i=e.shape.length;return(r="number"==typeof t?[t].concat((0,I.Z)(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){nG(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"==typeof n?[n].concat((0,I.Z)(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(nG(-1===t,(function(){return"Negative size values should be exactly -1 but got ".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function B0(e,t,n,r,a,i,o,s,u){var c;if(null==r?(c=new Array(t.length)).fill(1):c=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var l=!1,f={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u},h=0;h<f.dims;h++)l&&0!==(1<<h&s)&&f.numAddAxisAfterEllipsis++,1<<h&o&&(l=!0);l||(f.ellipsisMask|=1<<f.dims,f.dims++);var p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input has only ").concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(f,p);for(var d=!0,m=!0,v=!0,g=[],y=[],b=0;b<e.length;++b){if(0===p.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(p.shrinkAxisMask&1<<b),w=e[b];if(-1!==w){var k=[p.beginMask&1<<b,p.endMask&1<<b],S=[p.strides[b]>0?0:-1,p.strides[b]>0?w:w-1];if(x&&p.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&1===p.strides[b];var _=!!(p.beginMask&1<<b&&p.endMask&1<<b);if(p.beginValid&&p.endValid){if(x){var T=p.begin[b]<0?w+p.begin[b]:p.begin[b];if(p.begin[b]=T,p.end[b]=p.begin[b]+1,T<0||T>=w)throw Error("slice index ".concat(p.begin[b]," of dimension ").concat(b," out of bounds."))}else p.begin[b]=W0(p.begin[b],0,p.strides[b],w,k,S),p.end[b]=W0(p.end[b],1,p.strides[b],w,k,S);var I=1===p.strides[b]&&0===p.begin[b]&&p.end[b]===w;d=d&&I,m=m&&(0===b&&1===p.strides[b]||I)}else d=d&&1===p.strides[b]&&_,m=m&&(0===b&&1===p.strides[b]||_);var N=void 0,C=!1;if(p.beginValid&&p.endValid?(N=p.end[b]-p.begin[b],C=!0):x?(N=1,C=!0):_&&w>=0&&(N=p.strides[b]<0?-w:w,C=!0),C){var E=void 0;E=0===N||N<0!=p.strides[b]<0?0:Math.trunc(N/p.strides[b])+(N%p.strides[b]!==0?1:0),g.push(E)}else g.push(-1)}else g.push(x?1:-1)}for(var A=0;A<p.finalShapeGatherIndices.length;++A){var R=p.finalShapeGatherIndices[A];R>=0?y.push(g[R]):-2===R&&y.push(1)}return{finalShapeSparse:y.filter((function(e,t){return-2!==p.finalShapeGatherIndices[t]})),finalShape:y,isIdentity:d,sliceDim0:m,isSimpleSlice:v,begin:p.begin,end:p.end,strides:p.strides}}function W0(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}var V0={};kZ(V0,{Serializable:function(){return j0},SerializationMap:function(){return U0},registerClass:function(){return H0}});var j0=function(){function e(){N(this,e)}return(0,C.Z)(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),U0=function(){function e(){N(this,e),this.classNameMap={}}return(0,C.Z)(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function H0(e){nG(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),nG("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),nG(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),U0.register(e)}var Z0={};kZ(Z0,{TEST_EPSILON_FLOAT16:function(){return G0},createVideoElement:function(){return r1},encodeStrings:function(){return n1},expectArrayBuffersEqual:function(){return t1},expectArraysClose:function(){return q0},expectArraysEqual:function(){return $0},expectNumbersClose:function(){return Q0},expectPromiseToFail:function(){return Y0},expectValuesInRange:function(){return e1},play:function(){return a1},testEpsilon:function(){return K0}});var G0=.1;function q0(e,t,n){return null==n&&(n=K0()),X0(e,t,(function(e,t){return J0(e,t,n)}))}function K0(){return 32===N$.backend.floatPrecision()?.001:G0}function X0(e,t,n){var r=!0;if((SG(e)||SG(t))&&(r=!1),SG(e)&&SG(t)&&(r=!0),r){var a=e.constructor.name,i=t.constructor.name;if(a!==i)throw new Error("Arrays are of different type. Actual: ".concat(a,". Expected: ").concat(i))}if(Array.isArray(e)&&Array.isArray(t)){var o=F$(e),s=F$(t);if(!uG(o,s))throw new Error("Arrays have different shapes. Actual: [".concat(o,"]. Expected: [").concat(s,"]"))}var u=SG(e)?e:iG(e),c=SG(t)?t:iG(t);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: ".concat(u.length," vs expected: ").concat(c.length,".\nActual:   ").concat(u,".\nExpected: ").concat(c,"."));for(var l=0;l<c.length;++l){var f=u[l],h=c[l];if(!n(f,h))throw new Error("Arrays differ: actual[".concat(l,"] = ").concat(f,", expected[").concat(l,"] = ").concat(h,".\nActual:   ").concat(u,".\nExpected: ").concat(c,"."))}"undefined"!=typeof expect&&expect().nothing()}function Y0(e,t){e().then((function(){return t.fail()}),(function(){return t()})),"undefined"!=typeof expect&&expect().nothing()}function $0(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return IG(e)||IG(e[0])||IG(t)||IG(t[0])?X0(e,n,(function(e,t){return e==t})):X0(e,t,(function(e,t){return J0(e,t,0)}))}function Q0(e,t,n){if(null==n&&(n=K0()),!J0(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t));"undefined"!=typeof expect&&expect().nothing()}function J0(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function e1(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))}function t1(e,t){var n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error("Expected ArrayBuffer to be of length ".concat(r.length,", but it was ").concat(n.length));for(var a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error("Expected ArrayBuffer value at ".concat(a," to be ").concat(r[a]," but got ").concat(n[a]," instead"))}function n1(e){for(var t=0;t<e.length;t++){var n=e[t];Array.isArray(n)?n1(n):e[t]=ZY(n)}return e}function r1(e){var t=document.createElement("video");return"playsInline"in t&&(t.playsInline=!0),t.muted=!0,t.loop=!0,t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.preload="auto",t.appendChild(e),new Promise((function(e){t.addEventListener("loadeddata",(function(n){return e(t)})),t.load()}))}function a1(e){return i1.apply(this,arguments)}function i1(){return i1=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.play();case 2:if(e.t0="requestVideoFrameCallback"in t,!e.t0){e.next=6;break}return e.next=6,new Promise((function(e){t.requestVideoFrameCallback(e)}));case 6:case"end":return e.stop()}}),e)}))),i1.apply(this,arguments)}var o1="4.0.0";var s1=V$({add_:function(e,t){var n=z$(e,"a","add"),r=z$(t,"b","add"),a=g$(n,r),i=(0,T.Z)(a,2),o={a:n=i[0],b:r=i[1]};return N$.runKernel(eq,o)}});var u1=V$({floorDiv_:function(e,t){var n=z$(e,"a","floorDiv"),r=z$(t,"b","floorDiv"),a=g$(n,r),i=(0,T.Z)(a,2),o={a:n=i[0],b:r=i[1]};return N$.runKernel(iK,o)}});var c1=V$({div_:function(e,t){var n,r,a=z$(e,"a","div"),i=z$(t,"b","div");if(n=g$(a,i),a=(r=(0,T.Z)(n,2))[0],i=r[1],"int32"===a.dtype&&"int32"===i.dtype)return u1(a,i);var o={a:a,b:i};return N$.runKernel(Gq,o,{})}});var l1=V$({mul_:function(e,t){var n=z$(e,"a","mul"),r=z$(t,"b","mul"),a=g$(n,r),i=(0,T.Z)(a,2),o={a:n=i[0],b:r=i[1]};return N$.runKernel(HK,o)}});var f1=V$({abs_:function(e){var t=z$(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return N$.runKernel(_q,n)}var r={x:t};return N$.runKernel($G,r)}});var h1=V$({acos_:function(e){var t={x:z$(e,"x","acos")};return N$.runKernel(QG,t)}});var p1=V$({acosh_:function(e){var t={x:z$(e,"x","acosh")};return N$.runKernel(JG,t)}});var d1=V$({addN_:function(e){nG(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),nG(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got ".concat(e.length)}));var t=e.map((function(e,t){return z$(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!uG(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return N$.runKernel(tq,r)}});var m1=V$({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:z$(e,"x","all","bool")},a={axis:t,keepDims:n};return N$.runKernel(nq,r,a)}});var v1=V$({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:z$(e,"x","any","bool")},a={axis:t,keepDims:n};return N$.runKernel(rq,r,a)}});var g1=V$({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:z$(e,"x","argMax")},r={axis:t};return N$.runKernel(aq,n,r)}});var y1=V$({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:z$(e,"x","argMin")},r={axis:t};return N$.runKernel(iq,n,r)}});var b1=V$({asin_:function(e){var t={x:z$(e,"x","asin")};return N$.runKernel(oq,t)}});var x1=V$({asinh_:function(e){var t={x:z$(e,"x","asinh")};return N$.runKernel(sq,t)}});var w1=V$({atan_:function(e){var t={x:z$(e,"x","atan")};return N$.runKernel(uq,t)}});var k1=V$({atan2_:function(e,t){var n=z$(e,"a","atan2"),r=z$(t,"b","atan2"),a=g$(n,r),i=(0,T.Z)(a,2),o={a:n=i[0],b:r=i[1]};return N$.runKernel(lq,o)}});var S1=V$({atanh_:function(e){var t={x:z$(e,"x","atanh")};return N$.runKernel(cq,t)}});function _1(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0,o=e[3],s=[].concat((0,I.Z)(t),[o]),u=z1(a);return N1(e,s,n,i,r,null,null,u)}function T1(e,t,n,r,a,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=A1(t),c=(0,T.Z)(u,2),l=c[0],f=c[1];if("channelsLast"===s)o=[l,f,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[l,f,e[1],e[1]]}return N1(e,o,n,r,a,i,!1,s)}function I1(e,t,n,r,a,i){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",c=R1(t),l=(0,T.Z)(c,3),f=l[0],h=l[1],p=l[2];if("NDHWC"===u)s="channelsLast",o=[f,h,p,e[4],e[4]];else{if("NCDHW"!==u)throw new Error("Unknown dataFormat ".concat(u));s="channelsFirst",o=[f,h,p,e[1],e[1]]}return C1(e,o,n,r,a,!1,s,i)}function N1(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,c=-1,l=-1,f=-1;if("channelsLast"===s){var h=(0,T.Z)(e,4);u=h[0],c=h[1],l=h[2],f=h[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var p=(0,T.Z)(e,4);u=p[0],f=p[1],c=p[2],l=p[3]}var d,m=(0,T.Z)(t,4),v=m[0],g=m[1],y=m[3],b=A1(n),x=(0,T.Z)(b,2),w=x[0],k=x[1],S=A1(r),_=(0,T.Z)(S,2),I=_[0],N=_[1],C=O1(v,I),E=O1(g,N),A=M1(a,c,l,w,k,C,E,i,s),R=A.padInfo,O=A.outHeight,M=A.outWidth,D=o?y*f:y;return"channelsFirst"===s?d=[u,D,O,M]:"channelsLast"===s&&(d=[u,O,M,D]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:l,inChannels:f,outHeight:O,outWidth:M,outChannels:D,padInfo:R,strideHeight:w,strideWidth:k,filterHeight:v,filterWidth:g,effectiveFilterHeight:C,effectiveFilterWidth:E,dilationHeight:I,dilationWidth:N,inShape:e,outShape:d,filterShape:t}}function C1(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,u=-1,c=-1,l=-1,f=-1,h=-1;if("channelsLast"===o){var p=(0,T.Z)(e,5);u=p[0],c=p[1],l=p[2],f=p[3],h=p[4]}else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));var d=(0,T.Z)(e,5);u=d[0],h=d[1],c=d[2],l=d[3],f=d[4]}var m,v=(0,T.Z)(t,5),g=v[0],y=v[1],b=v[2],x=v[4],w=R1(n),k=(0,T.Z)(w,3),S=k[0],_=k[1],I=k[2],N=R1(r),C=(0,T.Z)(N,3),E=C[0],A=C[1],R=C[2],O=O1(g,E),M=O1(y,A),D=O1(b,R),F=D1(a,c,l,f,S,_,I,O,M,D,s),P=F.padInfo,L=F.outDepth,z=F.outHeight,B=F.outWidth,W=i?x*h:x;return"channelsFirst"===o?m=[u,W,L,z,B]:"channelsLast"===o&&(m=[u,L,z,B,W]),{batchSize:u,dataFormat:o,inDepth:c,inHeight:l,inWidth:f,inChannels:h,outDepth:L,outHeight:z,outWidth:B,outChannels:W,padInfo:P,strideDepth:S,strideHeight:_,strideWidth:I,filterDepth:g,filterHeight:y,filterWidth:b,effectiveFilterDepth:O,effectiveFilterHeight:M,effectiveFilterWidth:D,dilationDepth:E,dilationHeight:A,dilationWidth:R,inShape:e,outShape:m,filterShape:t}}function E1(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=O1(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function A1(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function R1(e){return"number"==typeof e?[e,e,e]:e}function O1(e,t){return t<=1?e:e+(e-1)*(t-1)}function M1(e,t,n,r,a,i,o,s,u){var c,l,f;if("number"==typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var h=function(e,t,n,r,a){null==r&&(r=E1(e,t,n));var i=e[0],o=e[1];return[F1((i-t+2*r)/n+1,a),F1((o-t+2*r)/n+1,a)]}([t,n],i,r,e,s);l=h[0],f=h[1]}else if("same"===e){l=Math.ceil(t/r),f=Math.ceil(n/a);var p=Math.max(0,(l-1)*r+i-t),d=Math.max(0,(f-1)*a+o-n),m=Math.floor(p/2),v=p-m,g=Math.floor(d/2);c={top:m,bottom:v,left:g,right:d-g,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-i+1)/r),f=Math.ceil((n-o+1)/a);else{if("object"!=typeof e)throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],x="channelsLast"===u?e[2][0]:e[3][0],w="channelsLast"===u?e[2][1]:e[3][1];c={top:y,bottom:b,left:x,right:w,type:0===y&&0===b&&0===x&&0===w?"VALID":"EXPLICIT"},l=F1((t-i+y+b)/r+1,s),f=F1((n-o+x+w)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:f}}function D1(e,t,n,r,a,i,o,s,u,c,l){var f,h,p,d;if("number"==typeof e){f={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,a,i){null==a&&(a=E1(e,t,r));var o=e[0],s=e[1],u=e[2];return[F1((o-t+2*a)/r+1,i),F1((s-t+2*a)/r+1,i),F1((u-t+2*a)/r+1,i),n]}([t,n,r,1],s,1,a,e,l);h=m[0],p=m[1],d=m[2]}else if("same"===e){var v=((h=Math.ceil(t/a))-1)*a+s-t,g=((p=Math.ceil(n/i))-1)*i+u-n,y=((d=Math.ceil(r/o))-1)*o+c-r,b=Math.floor(v/2),x=v-b,w=Math.floor(g/2),k=g-w,S=Math.floor(y/2);f={top:w,bottom:k,left:S,right:y-S,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));f={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((t-s+1)/a),p=Math.ceil((n-u+1)/i),d=Math.ceil((r-c+1)/o)}return{padInfo:f,outDepth:h,outHeight:p,outWidth:d}}function F1(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function P1(e){var t=A1(e),n=(0,T.Z)(t,3),r=n[0],a=n[1],i=n[2];return 1===r&&1===a&&1===i}function L1(e,t){return P1(e)||P1(t)}function z1(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function B1(e,t,n){if(null!=n){if("string"==typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using dimRoundingMode ").concat(n," but got pad ").concat(t,"."));if("number"==typeof t)nG(cG(t),(function(){return"Error in ".concat(e,": pad must be an integer when using dimRoundingMode ").concat(n," but got pad ").concat(t,".")}));else{if("object"!=typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){nG(cG(t),(function(){return"Error in ".concat(e,": pad must be an integer when using dimRoundingMode ").concat(n," but got pad ").concat(t,".")}))}))}))}}}var W1=V$({reshape_:function(e,t){var n={x:z$(e,"x","reshape","string_or_numeric")},r={shape:t};return N$.runKernel(fX,n,r)}});var V1=V$({avgPool_:function(e,t,n,r,a){var i=z$(e,"x","avgPool","float32");nG(L1(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(1,"'")}));var o=i,s=!1;3===i.rank&&(s=!0,o=W1(i,[1,i.shape[0],i.shape[1],i.shape[2]])),nG(4===o.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")})),B1("avgPool",r,a);var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=N$.runKernel(fq,u,c);return l=tJ(l,i.dtype),s?W1(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var j1=V$({avgPool3d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=z$(e,"x","avgPool3d","float32"),s=o,u=!1;4===o.rank&&(u=!0,s=W1(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),nG(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),nG("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ".concat(i)})),B1("avgPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},f=N$.runKernel(pq,c,l);return f=tJ(f,s.dtype),u?W1(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var U1=V$({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;nG(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=B$(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return nJ(n[0]);var r=n,a={axis:t};return N$.runKernel(Tq,r,a)}});var H1=V$({sigmoid_:function(e){var t={x:z$(e,"x","sigmoid","float32")};return N$.runKernel(CX,t)}});var Z1=V$({slice_:function(e,t,n){var r=z$(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return N$.runKernel(_X,a,i)}});var G1=V$({tanh_:function(e){var t={x:z$(e,"x","tanh","float32")};return N$.runKernel(KX,t)}});var q1=V$({basicLSTMCell_:function(e,t,n,r,a,i){var o=z$(e,"forgetBias","basicLSTMCell"),s=z$(t,"lstmKernel","basicLSTMCell"),u=z$(n,"lstmBias","basicLSTMCell"),c=z$(r,"data","basicLSTMCell"),l=z$(a,"c","basicLSTMCell"),f=z$(i,"h","basicLSTMCell"),h=U1([c,f],1),p=EJ(h,s),d=s1(p,u),m=d.shape[0],v=d.shape[1]/4,g=[m,v],y=Z1(d,[0,0],g),b=Z1(d,[0,v],g),x=Z1(d,[0,2*v],g),w=Z1(d,[0,3*v],g),k=s1(l1(H1(y),G1(b)),l1(l,H1(s1(o,x))));return[k,l1(G1(k),H1(w))]}});var K1=V$({batchToSpaceND_:function(e,t,n){var r=z$(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));nG(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),nG(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),nG(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of the elements of blockShape ").concat(t.join(" * ")," === ").concat(a)}));var i={x:r},o={blockShape:t,crops:n};return N$.runKernel(vq,i,o)}});function X1(e){return 0===e.rank||1===e.rank?W1(e,[1,1,1,e.size]):2===e.rank?W1(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?W1(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}var Y1=V$({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);var o,s,u=z$(e,"x","batchNorm"),c=z$(t,"mean","batchNorm"),l=z$(n,"variance","batchNorm");null!=a&&(o=z$(a,"scale","batchNorm")),null!=r&&(s=z$(r,"offset","batchNorm")),nG(c.rank===l.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),nG(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),nG(null==o||c.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var f={x:X1(u),scale:o,offset:s,mean:c,variance:l},h={varianceEpsilon:i},p=N$.runKernel(oK,f,h);return W1(p,u.shape)}});var $1=V$({batchNorm2d_:function(e,t,n,r,a,i){var o,s,u=z$(e,"x","batchNorm"),c=z$(t,"mean","batchNorm"),l=z$(n,"variance","batchNorm");return null!=a&&(o=z$(a,"scale","batchNorm")),null!=r&&(s=z$(r,"offset","batchNorm")),nG(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank ".concat(u.rank,".")})),nG(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ".concat(c.rank,".")})),nG(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ".concat(l.rank,".")})),null!=o&&nG(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ".concat(o.rank,".")})),null!=s&&nG(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ".concat(s.rank,".")})),Y1(u,c,l,s,o,i)}});var Q1=V$({batchNorm3d_:function(e,t,n,r,a,i){var o,s,u=z$(e,"x","batchNorm"),c=z$(t,"mean","batchNorm"),l=z$(n,"variance","batchNorm");return null!=a&&(o=z$(a,"scale","batchNorm")),null!=r&&(s=z$(r,"offset","batchNorm")),nG(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank ".concat(u.rank,".")})),nG(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ".concat(c.rank,".")})),nG(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ".concat(l.rank,".")})),null!=o&&nG(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ".concat(o.rank,".")})),null!=s&&nG(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ".concat(s.rank,".")})),Y1(u,c,l,s,o,i)}});var J1=V$({batchNorm4d_:function(e,t,n,r,a,i){var o,s,u=z$(e,"x","batchNorm"),c=z$(t,"mean","batchNorm"),l=z$(n,"variance","batchNorm");return null!=a&&(o=z$(a,"scale","batchNorm")),null!=r&&(s=z$(r,"offset","batchNorm")),nG(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank ".concat(u.rank,".")})),nG(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ".concat(c.rank,".")})),nG(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ".concat(l.rank,".")})),null!=o&&nG(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ".concat(o.rank,".")})),null!=s&&nG(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ".concat(s.rank,".")})),Y1(u,c,l,s,o,i)}});var e2=V$({bincount_:function(e,t,n){var r=z$(e,"x","bincount"),a=z$(t,"weights","bincount");nG("int32"===r.dtype,(function(){return"Error in bincount: input dtype must be int32, but got ".concat(r.dtype)})),nG(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),nG(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or0-length, but got input shape: ".concat(r.shape,", weights shape: ").concat(a.shape,".")}));var i={x:r,weights:a},o={size:n};return N$.runKernel(gq,i,o)}});var t2=V$({broadcastArgs_:function(e,t){var n=z$(e,"s0","broadcastArgs","int32"),r=z$(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). Has rank ".concat(r.rank));var a={s0:n,s1:r};return N$.runKernel(bq,a)}});var n2=V$({broadcastTo_:function(e,t){var n=z$(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=W1(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));if(0===o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0})).length)return nJ(n);var u={x:n},c={reps:o};return N$.runKernel(XX,u,c)}});var r2=V$({ceil_:function(e){var t={x:z$(e,"x","ceil","float32")};return N$.runKernel(wq,t)}});function a2(e,t,n){var r={shape:e,value:t,dtype:n};return N$.runKernel(nK,{},r)}var i2=V$({clipByValue_:function(e,t,n){var r=z$(e,"x","clipByValue");if(nG(t<=n,(function(){return"Error in clip: min (".concat(t,") must be less than or equal to max (").concat(n,").")})),t===n)return a2(r.shape,t,r.dtype);var a={x:r},i={clipValueMin:t,clipValueMax:n};return N$.runKernel(kq,a,i)}});var o2=V$({concat1d_:function(e){return U1(e,0)}});var s2=V$({concat2d_:function(e,t){return U1(e,t)}});var u2=V$({concat3d_:function(e,t){return U1(e,t)}});var c2=V$({concat4d_:function(e,t){return U1(e,t)}});var l2=V$({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=z$(e,"x","conv2d","float32"),u=z$(t,"filter","conv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=W1(s,[1,s.shape[0],s.shape[1],s.shape[2]])),nG(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),nG(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank ".concat(u.rank,".")})),B1("conv2d",r,o);var f="NHWC"===a?c.shape[3]:c.shape[1];nG(f===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(f,") must match input depth for filter ").concat(u.shape[2],".")})),nG(L1(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(i,"'")}));var h={x:c,filter:u},p={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},d=N$.runKernel(Iq,h,p);return l?W1(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var f2=V$({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0,s=z$(e,"x","conv1d"),u=z$(t,"filter","conv1d"),c=s,l=!1;2===s.rank&&(l=!0,c=W1(s,[1,s.shape[0],s.shape[1]])),nG(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")})),nG(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank ".concat(u.rank,".")})),B1("conv1d",r,o),nG(c.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(c.shape[2],") must match input depth for filter ").concat(u.shape[1],".")})),nG(L1(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride ".concat(n," and dilation '").concat(i,"'")})),nG("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var f=W1(u,[1,u.shape[0],u.shape[1],u.shape[2]]),h=W1(c,[c.shape[0],1,c.shape[1],c.shape[2]]),p=l2(h,f,[1,n],r,"NHWC",[1,i],o);return W1(p,l?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}});var h2=V$({conv2DBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0;nG(e.length===t.rank,(function(){return"Length of inShape (".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,c=!1;3===t.rank&&(c=!0,u=W1(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),nG(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length ".concat(s.length,".")})),nG(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank ".concat(u.rank)})),nG(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank ".concat(n.rank)}));var l="NHWC"===i?s[3]:s[1],f="NHWC"===i?u.shape[3]:u.shape[1];nG(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(l,") must match input depth for filter ").concat(n.shape[2],".")})),nG(f===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(f,") must match output depth for filter ").concat(n.shape[3],".")})),B1("conv2dDerInput",a,o);var h={dy:u,filter:n},p={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},d=N$.runKernel(Cq,h,p);return c?W1(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var p2=V$({conv2dTranspose_:function(e,t,n,r,a,i){var o=z$(e,"x","conv2dTranspose"),s=z$(t,"filter","conv2dTranspose");return h2(n,o,s,r,a,"NHWC",i)}});var d2=V$({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=z$(e,"x","conv3d"),s=z$(t,"filter","conv3d"),u=o,c=!1;4===o.rank&&(c=!0,u=W1(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),nG(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),nG(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank ".concat(s.rank,".")})),nG(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match input depth for filter ").concat(s.shape[3],".")})),nG(L1(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(i,"'")})),nG("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var l={x:u,filter:s},f={strides:n,pad:r,dataFormat:a,dilations:i},h=N$.runKernel(Eq,l,f);return c?W1(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var m2=V$({conv3DBackpropInput_:function(e,t,n,r,a){nG(e.length===t.rank,(function(){return"Length of inShape (".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=W1(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],c=o.shape[4];nG(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length ".concat(i.length,".")})),nG(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank ".concat(o.rank)})),nG(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank ".concat(n.rank)})),nG(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must match input depth for filter ").concat(n.shape[3],".")})),nG(c===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(c,") must match output depth for filter ").concat(n.shape[4],".")}));var l={dy:o,filter:n},f={pad:a,strides:r,inputShape:i},h=N$.runKernel(Rq,l,f);return s?W1(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var v2=V$({conv3dTranspose_:function(e,t,n,r,a){var i=z$(e,"x","conv3dTranspose"),o=z$(t,"filter","conv3dTranspose");return m2(n,i,o,r,a)}});var g2=V$({cos_:function(e){var t={x:z$(e,"x","cos","float32")};return N$.runKernel(Oq,t)}});var y2=V$({cosh_:function(e){var t={x:z$(e,"x","cosh","float32")};return N$.runKernel(Mq,t)}});var b2=V$({cumprod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:z$(e,"x","cumprod")},i={axis:t,exclusive:n,reverse:r};return N$.runKernel(Dq,a,i)}});var x2=V$({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:z$(e,"x","cumsum")},i={axis:t,exclusive:n,reverse:r};return N$.runKernel(Fq,a,i)}});var w2=V$({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=z$(e,"x","denseBincount"),i=z$(t,"weights","denseBincount");nG("int32"===a.dtype,(function(){return"Error in denseBincount: input dtype must be int32, but got ".concat(a.dtype)})),nG(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got rank ".concat(a.rank,".")})),nG(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),nG(i.size===a.size||0===i.size,(function(){return"Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ".concat(a.shape,", weights shape: ").concat(i.shape,".")}));var o={x:a,weights:i},s={size:n,binaryOutput:r};return N$.runKernel(Lq,o,s)}});var k2=V$({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=z$(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];nG(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),nG(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),nG(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),nG(o%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},u={blockSize:t,dataFormat:n};return N$.runKernel(zq,s,u)}});var S2=V$({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=z$(e,"x","depthwiseConv2d","float32"),u=z$(t,"filter","depthwiseConv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=W1(s,[1,s.shape[0],s.shape[1],s.shape[2]])),nG(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),nG(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank ".concat(u.rank,".")}));var f="NHWC"===a?c.shape[3]:c.shape[1];nG(f===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels (".concat(f,") must match the inChannels dimension in filter ").concat(u.shape[2],".")})),B1("depthwiseConv2d",r,o);var h={x:c,filter:u},p={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},d=N$.runKernel(Bq,h,p);return l?W1(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var _2=V$({diag_:function(e){var t={x:z$(e,"x","diag")};return N$.runKernel(jq,t)}});var T2=V$({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=z$(e,"x","dilation2d"),s=z$(t,"filter","dilation2d");nG(3===o.rank||4===o.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank ".concat(o.rank,".")})),nG(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank ".concat(s.rank,".")})),nG("NHWC"===i,(function(){return"Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ".concat(i)}));var u=o,c=!1;3===o.rank&&(u=W1(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0);var l={x:u,filter:s},f={strides:n,pad:r,dilations:a},h=N$.runKernel(Uq,l,f);return c?W1(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var I2=V$({equal_:function(e,t){var n,r,a=z$(e,"a","equal","string_or_numeric"),i=z$(t,"b","equal","string_or_numeric");n=g$(a,i),a=(r=(0,T.Z)(n,2))[0],i=r[1],o0(a.shape,i.shape);var o={a:a,b:i};return N$.runKernel($q,o)}});var N2=V$({where_:function(e,t,n){var r=z$(t,"a","where"),a=z$(n,"b","where"),i=z$(e,"condition","where","bool"),o=o0(o0(i.shape,r.shape),a.shape),s={condition:n2(i,o),t:n2(r,o),e:n2(a,o)};return N$.runKernel(kX,s)}});var C2=V$({zerosLike_:function(e){var t={x:z$(e,"x","zerosLike")};return N$.runKernel(rY,t)}});var E2=V$({divNoNan_:function(e,t){var n=z$(e,"a","div"),r=z$(t,"b","div"),a=g$(n,r),i=(0,T.Z)(a,2);n=i[0],r=i[1];var o=c1(n,r),s=C2(o),u=I2(r,s);return N2(u,s,o)}});var A2=V$({dot_:function(e,t){var n=z$(e,"t1","dot"),r=z$(t,"t2","dot");nG((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks ".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(nG(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got ".concat(a," and ").concat(i,".")})),1===n.rank&&1===r.rank){var o=W1(n,[1,-1]),s=W1(r,[-1,1]),u=EJ(o,s);return W1(u,[])}if(1===n.rank&&2===r.rank){var c=W1(n,[1,-1]),l=W1(r,[r.shape[0],r.shape[1]]),f=EJ(c,l);return W1(f,[f.size])}if(2===n.rank&&1===r.rank){var h=W1(r,[-1,1]),p=EJ(n,h);return W1(p,[p.size])}var d=W1(r,[r.shape[0],r.shape[1]]);return EJ(n,d)}});var R2=V$({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map((function(e,t){return z$(e,"tensors".concat(t),"einsum")})),i={equation:e};return N$.runKernel(qq,a,i)}});var O2=V$({elu_:function(e){var t={x:z$(e,"x","elu","float32")};return N$.runKernel(Kq,t)}});var M2=V$({erf_:function(e){var t=z$(e,"x","erf");nG("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=tJ(t,"float32"));var n={x:t};return N$.runKernel(Yq,n)}});function D2(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function F2(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}function P2(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function L2(e,t){return F2(e,t.map((function(e){return 1})),t)}function z2(e,t,n){nG(D2(t,n),(function(){return"".concat(e," supports only inner-most axes for now. Got axes ").concat(t," and rank-").concat(n," input.")}))}function B2(e,t){if(D2(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function W2(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function V2(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var j2=V$({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:z$(e,"x","max")},a={reductionIndices:t,keepDims:n};return N$.runKernel(RK,r,a)}});var U2=V$({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:z$(e,"x","min")},a={axis:t,keepDims:n};return N$.runKernel(BK,r,a)}});var H2=V$({pow_:function(e,t){var n=z$(e,"base","pow"),r=z$(t,"exp","pow"),a=g$(n,r),i=(0,T.Z)(a,2),o={a:n=i[0],b:r=i[1]};return N$.runKernel(tX,o)}});function Z2(e,t){if((SG(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&SG(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return U$(e,[],[],t)}var G2=V$({sqrt_:function(e){var t={x:z$(e,"x","sqrt","float32")};return N$.runKernel(AX,t)}});var q2=V$({square_:function(e){var t=z$(e,"x","square");return N$.runKernel("Square",{x:t},{})}});var K2=V$({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=z$(e,"x","sum");"bool"===r.dtype&&(r=tJ(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return N$.runKernel(RX,a,i)}});function X2(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return f1(e);if(1!==e.rank&&null===n)return X2(W1(e,[-1]),t,n);if(1===e.rank||"number"==typeof n||Array.isArray(n)&&1===n.length){if(1===t)return K2(f1(e),n);if(t===1/0)return j2(f1(e),n);if(t===-1/0)return U2(f1(e),n);if("euclidean"===t||2===t)return G2(K2(H2(f1(e),Z2(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return j2(K2(f1(e),n[0]),n[1]-1);if(t===1/0)return j2(K2(f1(e),n[1]),n[0]);if(t===-1/0)return U2(K2(f1(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return G2(K2(q2(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var Y2=V$({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=X2(e=z$(e,"x","norm"),t,n),i=a.shape;if(r){var o=vG(n,e.shape);i=L2(a.shape,o)}return W1(a,i)}});var $2=V$({euclideanNorm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Y2(e,"euclidean",t,n)}});var Q2=V$({exp_:function(e){var t={x:z$(e,"x","exp")};return N$.runKernel(Qq,t)}});var J2=V$({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=z$(e,"x","expandDims","string_or_numeric");nG(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return N$.runKernel(Jq,r,a)}});var e3=V$({expm1_:function(e){var t={x:z$(e,"x","expm1")};return N$.runKernel(eK,t)}});var t3=V$({tile_:function(e,t){var n=z$(e,"x","tile","string_or_numeric");nG(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," must match length of reps ").concat(t,".")}));var r={x:n},a={reps:t};return N$.runKernel(XX,r,a)}});var n3=V$({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=eJ([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=W1(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return t3(J2(s,0),[n[0],1,1]);if(2===n.length)return t3(J2(J2(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return t3(J2(J2(J2(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received ".concat(n.length,"D."))}});var r3=V$({floor_:function(e){var t={x:z$(e,"x","floor","float32")};return N$.runKernel(aK,t)}});var a3=V$({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=z$(e,"x","gather"),i=z$(t,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return N$.runKernel(sK,o,s)}});var i3=V$({greater_:function(e,t){var n,r,a=z$(e,"a","greater","string_or_numeric"),i=z$(t,"b","greater","string_or_numeric");n=g$(a,i),a=(r=(0,T.Z)(n,2))[0],i=r[1],o0(a.shape,i.shape);var o={a:a,b:i};return N$.runKernel(cK,o)}});var o3=V$({greaterEqual_:function(e,t){var n,r,a=z$(e,"a","greaterEqual","string_or_numeric"),i=z$(t,"b","greaterEqual","string_or_numeric");n=g$(a,i),a=(r=(0,T.Z)(n,2))[0],i=r[1],o0(a.shape,i.shape);var o={a:a,b:i};return N$.runKernel(lK,o)}});var s3=V$({isFinite_:function(e){var t={x:z$(e,"x","isFinite")};return N$.runKernel(dK,t)}});var u3=V$({isInf_:function(e){var t={x:z$(e,"x","isInf")};return N$.runKernel(mK,t)}});var c3=V$({isNaN_:function(e){var t={x:z$(e,"x","isNaN")};return N$.runKernel(vK,t)}});var l3=V$({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n={x:z$(e,"x","leakyRelu")},r={alpha:t};return N$.runKernel(gK,n,r)}});var f3=V$({less_:function(e,t){var n,r,a=z$(e,"a","less","string_or_numeric"),i=z$(t,"b","less","string_or_numeric");n=g$(a,i),a=(r=(0,T.Z)(n,2))[0],i=r[1],o0(a.shape,i.shape);var o={a:a,b:i};return N$.runKernel(yK,o)}});var h3=V$({lessEqual_:function(e,t){var n,r,a=z$(e,"a","lessEqual","string_or_numeric"),i=z$(t,"b","lessEqual","string_or_numeric");n=g$(a,i),a=(r=(0,T.Z)(n,2))[0],i=r[1],o0(a.shape,i.shape);var o={a:a,b:i};return N$.runKernel(bK,o)}});function p3(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return N$.runKernel(xK,{},r)}var d3=V$({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=z$(e,"x","localResponseNormalization");nG(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")})),nG(cG(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ".concat(t,".")}));var o=i,s=!1;3===i.rank&&(s=!0,o=W1(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var u={x:o},c={depthRadius:t,bias:n,alpha:r,beta:a},l=N$.runKernel(EK,u,c);return s?W1(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var m3=V$({log_:function(e){var t={x:z$(e,"x","log","float32")};return N$.runKernel(wK,t)}});var v3=V$({log1p_:function(e){var t={x:z$(e,"x","log1p")};return N$.runKernel(kK,t)}});function g3(e){return nG(AG(e),(function(){return"The f passed in grad(f) must be a function"})),function(t,n){var r=z$(t,"x","tf.grad","string_or_numeric"),a=null!=n?z$(n,"dy","tf.grad"):null;return N$.tidy((function(){var t=N$.gradients((function(){return e(r)}),[r],a),n=t.value,i=t.grads;return null!=a&&rG(n.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),S3(i),i[0]}))}}function y3(e){return nG(AG(e),(function(){return"The f passed in grads(f) must be a function"})),function(t,n){nG(Array.isArray(t),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var r=B$(t,"args","tf.grads","string_or_numeric"),a=null!=n?z$(n,"dy","tf.grads"):null;return N$.tidy((function(){var t=N$.gradients((function(){return e.apply(void 0,(0,I.Z)(r))}),r,a),n=t.value,i=t.grads;return null!=a&&rG(n.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),S3(i),i}))}}function b3(e){return nG(AG(e),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(t,n){nG(t instanceof i$,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),nG(null==n||n instanceof i$,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=N$.gradients((function(){return e(t)}),[t],n),a=r.grads,i=r.value;return S3(a),{grad:a[0],value:i}}}function x3(e){return nG(AG(e),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(t,n){nG(Array.isArray(t)&&t.every((function(e){return e instanceof i$})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),nG(null==n||n instanceof i$,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var r=N$.gradients((function(){return e.apply(void 0,(0,I.Z)(t))}),t,n);return null!=n&&rG(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),S3(r.grads),r}}function w3(e,t){nG(AG(e),(function(){return"The f passed in variableGrads(f) must be a function"})),nG(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof s$})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],N$.registeredVariables)t.push(N$.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,i=t.length;t=t.filter((function(e){return e.trainable})),nG(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the ".concat(i," variables is trainable.")}));var o=N$.gradients(e,t,null,!0),s=o.value,u=o.grads;nG(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),nG(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-".concat(s.rank," tensor")}));var c={};return t.forEach((function(e,t){null!=u[t]&&(c[e.name]=u[t])})),null!=a&&a.forEach((function(e){return c[e.name]=null})),{value:s,grads:c}}function k3(e){return N$.customGrad(e)}function S3(e){if(e.filter((function(e){return null==e})).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}var _3=V$({softplus_:function(e){var t={x:z$(e,"x","softplus")};return N$.runKernel(EX,t)}});var T3=V$({logSigmoid_:function(e){var t=z$(e,"x","logSigmoid");return k3((function(e){return{value:JJ(_3(JJ(e))),gradFunc:function(t){return l1(t,H1(JJ(e)))}}}))(t)}});var I3=V$({sub_:function(e,t){var n=z$(e,"a","sub"),r=z$(t,"b","sub"),a=g$(n,r),i=(0,T.Z)(a,2),o={a:n=i[0],b:r=i[1]};return N$.runKernel(GX,o)}});var N3=V$({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=z$(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(n.rank," and axis was ").concat(t));return k3((function(e,n){var r=j2(e,t,!0),a=I3(e,r),i=I3(tJ(a,"float32"),m3(K2(Q2(a),t,!0)));return n([i]),{value:i,gradFunc:function(e,n){var r=(0,T.Z)(n,1)[0],a=Q2(r);return I3(e,l1(K2(e,t,!0),a))}}}))(n)}});var C3=V$({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=z$(e,"x","logSumExp"),a=vG(t,r.shape),i=j2(r,a,!0),o=I3(r,i),s=Q2(o),u=K2(s,a),c=m3(u),l=s1(W1(i,c.shape),c);if(n){var f=L2(l.shape,a);return W1(l,f)}return l}});var E3=V$({logicalAnd_:function(e,t){var n=z$(e,"a","logicalAnd","bool"),r=z$(t,"b","logicalAnd","bool");o0(n.shape,r.shape);var a={a:n,b:r};return N$.runKernel(SK,a)}});var A3=V$({logicalNot_:function(e){var t={x:z$(e,"x","logicalNot","bool")};return N$.runKernel(_K,t)}});var R3=V$({logicalOr_:function(e,t){var n=z$(e,"a","logicalOr","bool"),r=z$(t,"b","logicalOr","bool");o0(n.shape,r.shape);var a={a:n,b:r};return N$.runKernel(TK,a)}});var O3=V$({logicalXor_:function(e,t){var n=z$(e,"a","logicalXor","bool"),r=z$(t,"b","logicalXor","bool");return o0(n.shape,r.shape),E3(R3(e,t),A3(E3(e,t)))}}),M3=2147483648;var D3=V$({searchSorted_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",r=z$(e,"sortedSequence","searchSorted"),a=z$(t,"values","searchSorted"),i=r.shape[r.shape.length-1],o=a.shape[a.shape.length-1],s=W1(r,[-1,i]),u=W1(a,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(oG(u.shape)>=M3)throw new Error("values tensor size must less than ".concat(M3));if(s.shape[1]>=M3)throw new Error("trailing dim_size must less than ".concat(M3," for int32 output type, was ").concat(s.shape[1]));var c={sortedSequence:s,values:u},l={side:n};return N$.runKernel(wX,c,l)}});function F3(e,t){return D3(e,t,"left")}var P3=V$({maxPool_:function(e,t,n,r,a){var i=z$(e,"x","maxPool"),o=i,s=!1;3===i.rank&&(s=!0,o=W1(i,[1,i.shape[0],i.shape[1],i.shape[2]])),nG(4===o.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")})),nG(L1(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(1,"'")})),B1("maxPool",r,a);var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=N$.runKernel(MK,u,c);return s?W1(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var L3=V$({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=z$(e,"x","maxPool3d"),s=o,u=!1;4===o.rank&&(u=!0,s=W1(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),nG(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),nG("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ".concat(i)})),B1("maxPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},f=N$.runKernel(FK,c,l);return u?W1(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var z3=V$({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i={x:z$(e,"x","maxPoolWithArgmax")},o={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},s=N$.runKernel(LK,i,o);return{result:s[0],indexes:s[1]}}});var B3=V$({maximum_:function(e,t){var n,r,a=z$(e,"a","maximum"),i=z$(t,"b","maximum");n=g$(a,i),a=(r=(0,T.Z)(n,2))[0],i=r[1],"bool"===a.dtype&&(a=tJ(a,"int32"),i=tJ(i,"int32")),o0(a.shape,i.shape);var o={a:a,b:i};return N$.runKernel(OK,o)}});var W3=V$({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:z$(e,"x","mean")},a={axis:t,keepDims:n};return N$.runKernel(zK,r,a)}});function V3(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=V3(e,"float32"),r=V3(e,"float32");return j$(n,r)}var a=PG(oG(e),t);return N$.makeTensor(a,e,t)}function j3(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=j3(e,"float32"),r=V3(e,"float32");return j$(n,r)}var a=FG(oG(e),t);return N$.makeTensor(a,e,t)}function U3(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.indexing,a=void 0===r?"xy":r;if("xy"!==a&&"ij"!==a)throw new TypeError("".concat(a," is not a valid third argument to meshgrid"));if(void 0===e)return[];var i=z$(e,"x","meshgrid",e instanceof i$?e.dtype:"float32");if(void 0===t)return[i];var o=z$(t,"y","meshgrid",t instanceof i$?t.dtype:"float32"),s=oG(i.shape),u=oG(o.shape);return"xy"===a?(i=W1(i,[1,-1]),o=W1(o,[-1,1]),[EJ(j3([u,1],i.dtype),i),EJ(o,j3([1,s],o.dtype))]):(i=W1(i,[-1,1]),o=W1(o,[1,-1]),[EJ(i,j3([1,u],i.dtype)),EJ(j3([s,1],o.dtype),o)])}var H3=V$({minimum_:function(e,t){var n,r,a=z$(e,"a","minimum"),i=z$(t,"b","minimum");n=g$(a,i),a=(r=(0,T.Z)(n,2))[0],i=r[1],"bool"===a.dtype&&(a=tJ(a,"int32"),i=tJ(i,"int32")),o0(a.shape,i.shape);var o={a:a,b:i};return N$.runKernel(WK,o)}});var Z3=V$({mirrorPad_:function(e,t,n){nG("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. Got ".concat(n,".")}));var r=z$(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");nG(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". Got ").concat(t.length,".")}));for(var a="reflect"===n?1:0,i=function(e){nG(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),nG(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal to ").concat(r.shape[e]-a," or less than 0 for input of shape ").concat(r.shape)}))},o=0;o<r.rank;o++)i(o);var s={paddings:t,mode:n},u={x:r};return N$.runKernel(VK,u,s)}});var G3=V$({mod_:function(e,t){var n=z$(e,"a","mod"),r=z$(t,"b","mod"),a=g$(n,r),i=(0,T.Z)(a,2),o={a:n=i[0],b:r=i[1]};return N$.runKernel(jK,o)}});var q3=V$({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=vG(t,(e=z$(e,"x","moments")).shape),a=W3(e,r,n),i=a.shape;n||(i=L2(a.shape,r));var o=q2(I3(tJ(e,"float32"),W1(a,i))),s=W3(o,r,n);return{mean:a,variance:s}}});var K3=V$({multiRNNCell_:function(e,t,n,r){for(var a=z$(t,"data","multiRNNCell"),i=B$(n,"c","multiRNNCell"),o=B$(r,"h","multiRNNCell"),s=a,u=[],c=0;c<e.length;c++){var l=e[c](s,i[c],o[c]);u.push(l[0]),u.push(l[1]),s=l[1]}for(var f=[],h=[],p=0;p<u.length;p+=2)f.push(u[p]),h.push(u[p+1]);return[f,h]}});var X3=V$({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=z$(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got ".concat(i,"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(o));n=n||Math.random();var s={logits:1===o?W1(a,[1,-1]):a},u={numSamples:t,seed:n,normalized:r},c=N$.runKernel(UK,s,u);return 1===o?W1(c,[c.size]):c}});var Y3=V$({notEqual_:function(e,t){var n,r,a=z$(e,"a","notEqual","string_or_numeric"),i=z$(t,"b","notEqual","string_or_numeric");n=g$(a,i),a=(r=(0,T.Z)(n,2))[0],i=r[1],o0(a.shape,i.shape);var o={a:a,b:i};return N$.runKernel(GK,o)}});var $3=V$({onesLike_:function(e){var t={x:z$(e,"x","onesLike")};return N$.runKernel(YK,t)}});var Q3=V$({outerProduct_:function(e,t){var n=z$(e,"v1","outerProduct"),r=z$(t,"v2","outerProduct");nG(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks ".concat(n.rank," and ").concat(r.rank,".")}));var a=W1(n,[-1,1]),i=W1(r,[1,-1]);return EJ(a,i)}});var J3=V$({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=z$(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},i={x:r};return N$.runKernel(JK,i,a)}});var e4=V$({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return nG(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),J3(e,[t],n)}});var t4=V$({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return nG(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),J3(e,t,n)}});var n4=V$({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return nG(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),J3(e,t,n)}});var r4=V$({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return nG(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),J3(e,t,n)}});var a4=V$({spaceToBatchND_:function(e,t,n){var r=z$(e,"x","spaceToBatchND");nG(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),nG(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),nG(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},i={blockShape:t,paddings:n};return N$.runKernel(OX,a,i)}});var i4=V$({pool_:function(e,t,n,r,a,i,o){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var s=z$(e,"x","maxPool"),u=s,c=!1;3===s.rank&&(c=!0,u=W1(s,[1,s.shape[0],s.shape[1],s.shape[2]])),nG(L1(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(a,"'")}));var l,f=T1(u.shape,t,i,a,r),h=[f.dilationHeight,f.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([f.filterHeight,f.filterWidth],h):[[0,0],[0,0]];var p=1===h[0]&&1===h[1],d=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),c=t.map((function(e,t){return[0,o[t]]}));return[u,c]}([f.inHeight,f.inWidth],h,l),m=(0,T.Z)(d,2),v=m[0],g=m[1],y=p?r:"valid",b=p?u:a4(u,h,v),x=("avg"===n?function(){return V1(b,t,i,y,o)}:function(){return P3(b,t,i,y,o)})(),w=p?x:K1(x,h,g);return c?W1(w,[w.shape[1],w.shape[2],w.shape[3]]):w}});var o4=V$({prelu_:function(e,t){var n={x:z$(e,"x","prelu"),alpha:z$(t,"alpha","prelu")};return N$.runKernel(nX,n)}});var s4=V$({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=z$(e,"x","prod");"bool"===r.dtype&&(r=tJ(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return N$.runKernel(rX,a,i)}});var u4=V$({raggedGather_:function(e,t,n,r){var a={paramsNestedSplits:e.map((function(e,t){return z$(e,"tensors".concat(t),"raggedGather","int32")})),paramsDenseValues:z$(t,"paramsDenseValues","raggedGather"),indices:z$(n,"indices","raggedGather","int32")},i={outputRaggedRank:r},o=N$.runKernel(aX,a,i);return{outputNestedSplits:o.slice(0,o.length-1),outputDenseValues:o[o.length-1]}}});var c4=V$({raggedRange_:function(e,t,n){var r=z$(e,"starts","raggedRange"),a={starts:r,limits:z$(t,"limits","raggedRange",r.dtype),deltas:z$(n,"deltas","raggedRange",r.dtype)},i=N$.runKernel(iX,a);return{rtNestedSplits:i[0],rtDenseValues:i[1]}}});var l4=V$({raggedTensorToTensor_:function(e,t,n,r,a){var i=z$(e,"shape","raggedTensorToTensor","int32"),o=z$(t,"values","raggedTensorToTensor"),s={shape:i,values:o,defaultValue:z$(n,"defaultValue","raggedTensorToTensor",o.dtype),rowPartitionTensors:r.map((function(e,t){return z$(e,"tensors".concat(t),"raggedTensorToTensor","int32")}))},u={rowPartitionTypes:a};return N$.runKernel(oX,s,u)}});var f4=V$({rand_:function(e,t,n){var r=oG(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return N$.makeTensor(a,e,n)}}),h4=SZ(FZ()),p4=function(){function e(t,n,r,a,i){N(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=h4.alea(o.toString())}return(0,C.Z)(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,(!this.truncated||this.isValidTruncated(t))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),d4=function(){function e(t,n,r,a){N(this,e),this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=h4.alea(i.toString()),this.randn=new p4(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return(0,C.Z)(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),m4=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(N(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==i&&(i=Math.random()),"number"==typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=h4.alea(i)}return(0,C.Z)(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var v4=V$({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new d4(t,n,r,a),o=eJ(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var g4=V$({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new p4(t,n,r,!1,a),o=eJ(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var y4=V$({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error("Unsupported data type ".concat(t));return g4(e,0,1,t,n)}});var b4=V$({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0,i=eJ(e,r),o=new m4(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});function x4(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return N$.runKernel(sX,{},a)}var w4=V$({reciprocal_:function(e){var t={x:z$(e,"x","reciprocal")};return N$.runKernel(cX,t)}});var k4=V$({relu_:function(e){var t={x:z$(e,"x","relu")};return N$.runKernel(lX,t)}});var S4=V$({relu6_:function(e){var t={x:z$(e,"x","relu6")};return N$.runKernel(vX,t)}});var _4=V$({reverse_:function(e,t){var n={x:z$(e,"x","reverse")},r={dims:t};return N$.runKernel(gX,n,r)}});var T4=V$({reverse1d_:function(e){var t=z$(e,"x","reverse");return nG(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),_4(t,0)}});var I4=V$({reverse2d_:function(e,t){var n=z$(e,"x","reverse");return nG(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),_4(n,t)}});var N4=V$({reverse3d_:function(e,t){var n=z$(e,"x","reverse");return nG(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),_4(n,t)}});var C4=V$({reverse4d_:function(e,t){var n=z$(e,"x","reverse");return nG(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),_4(n,t)}});var E4=V$({round_:function(e){var t={x:z$(e,"x","round")};return N$.runKernel(yX,t)}});var A4=V$({rsqrt_:function(e){var t={x:z$(e,"x","rsqrt","float32")};return N$.runKernel(bX,t)}});var R4=V$({selu_:function(e){var t={x:z$(e,"x","selu")};return N$.runKernel(SX,t)}});var O4=V$({separableConv2d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=z$(e,"x","separableConv2d"),u=z$(t,"depthwiseFilter","separableConv2d"),c=z$(n,"pointwiseFilter","separableConv2d"),l=s,f=!1;if(3===s.rank&&(f=!0,l=W1(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");nG(4===l.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank ".concat(l.rank,".")})),nG(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank ".concat(u.rank,".")})),nG(4===c.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank ".concat(u.rank,".")})),nG(1===c.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ".concat(c.shape[0],".")})),nG(1===c.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ".concat(c.shape[1],".")}));var h=u.shape[2],p=u.shape[3];nG(c.shape[2]===h*p,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be ".concat(h*p,", but got ").concat(c.shape[2],".")}));var d=S2(l,u,r,a,o,i),m=l2(d,c,1,"valid",o);return f?W1(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});function M4(){return M4=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u,c,l,f,h,p;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=z$(t,"x","setdiff1d"),a=z$(n,"y","setdiff1d"),nG(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),nG(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),nG(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=4,r.data();case 4:return i=e.sent,e.next=7,a.data();case 7:for(o=e.sent,s=new Set(o),u=0,c=0;c<i.length;c++)s.has(i[c])||u++;for(l=new n$([u],r.dtype),f=new n$([u],"int32"),h=0,p=0;h<i.length;h++)s.has(i[h])||(l.values[p]=i[h],f.values[p]=h,p++);return e.abrupt("return",[l.toTensor(),f.toTensor()]);case 14:case"end":return e.stop()}}),e)}))),M4.apply(this,arguments)}var D4=function(e,t){return M4.apply(this,arguments)};var F4=V$({sign_:function(e){var t={x:z$(e,"x","sign")};return N$.runKernel(NX,t)}});var P4=V$({sin_:function(e){var t={x:z$(e,"x","sin","float32")};return N$.runKernel(TX,t)}});var L4=V$({sinh_:function(e){var t={x:z$(e,"x","sinh")};return N$.runKernel(IX,t)}});var z4=V$({slice1d_:function(e,t,n){var r=z$(e,"x","slice1d");return nG(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),Z1(r,[t],[n])}});var B4=V$({slice2d_:function(e,t,n){var r=z$(e,"x","slice2d");return nG(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),Z1(r,t,n)}});var W4=V$({slice3d_:function(e,t,n){var r=z$(e,"x","slice3d");return nG(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),Z1(r,t,n)}});var V4=V$({slice4d_:function(e,t,n){var r=z$(e,"x","slice4d");return nG(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),Z1(r,t,n)}});var j4=V$({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=z$(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return N$.runKernel(DX,r,a)}});var U4=V$({fft_:function(e){nG("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got ".concat(e.dtype,".")}));var t={input:e};return N$.runKernel(tK,t)}});var H4=V$({ifft_:function(e){nG("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got ".concat(e.dtype,".")}));var t={input:e};return N$.runKernel(hK,t)}});var Z4=V$({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=W1(e,[r,n]);t=H4(a)}else{var i=[r,2*(n-1)],o=W1(e0(e),[r,n]),s=W1(QJ(e),[r,n]),u=_4(Z1(o,[0,1],[r,n-2]),1),c=l1(_4(Z1(s,[0,1],[r,n-2]),1),Z2(-1)),l=U1([o,u],1),f=U1([s,c],1),h=W1(j$(l,f),[i[0],i[1]]);t=H4(h)}if(t=e0(t),3===e.rank&&0!==e.shape[0]){var p=t,d=e.shape[0];t=W1(t,[d,t.shape[0]/d,t.shape[1]]),p.dispose()}return t}});var G4=V$({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={x:z$(e,"x","split")},a={numOrSizeSplits:t,axis:n};return N$.runKernel(MX,r,a)}});var q4=V$({rfft_:function(e,t){nG("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=Z1(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=U1([e,V3(s)],e.shape.length-1),r=t}else n=e;var u=C2(n),c=W1(j$(n,u),[a,r]),l=U4(c),f=Math.floor(r/2)+1,h=e0(l),p=QJ(l),d=G4(h,[f,r-f],h.shape.length-1),m=G4(p,[f,r-f],p.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=f,W1(j$(d[0],m[0]),v)}});var K4=V$({squaredDifference_:function(e,t){var n,r,a=z$(e,"a","squaredDifference"),i=z$(t,"b","squaredDifference");n=g$(a,i),a=(r=(0,T.Z)(n,2))[0],i=r[1],o0(a.shape,i.shape);var o={a:a,b:i};return N$.runKernel(WX,o,{})}});var X4=V$({squeeze_:function(e,t){var n=z$(e,"x","squeeze","string_or_numeric");return W1(n,gG(n.shape,t).newShape)}});var Y4=V$({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=B$(e,"tensors","stack","string_or_numeric");nG(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&nG(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return N$.runKernel(QK,r,a)}});var $4=V$({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:z$(e,"x","step")},r={alpha:t};return N$.runKernel(aY,n,r)}});var Q4=V$({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c={x:z$(e,"x","stridedSlice","string_or_numeric")},l={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return N$.runKernel(jX,c,l)}});var J4=V$({tan_:function(e){var t={x:z$(e,"x","tan","float32")};return N$.runKernel(qX,t)}});function e5(e,t){aG(e);var n=F$(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return U$(e,null,n,t)}function t5(e,t,n){if(aG(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=F$(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return U$(e,t,r,n)}function n5(e,t,n){if(aG(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=F$(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return U$(e,t,r,n)}function r5(e,t,n){if(aG(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=F$(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return U$(e,t,r,n)}function a5(e,t,n){if(aG(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=F$(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return U$(e,t=t||r,r,n)}var i5=V$({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=z$(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") but got ").concat(t));var i={x:r},o={k:t,sorted:n},s=N$.runKernel(YX,i,o),u=(0,T.Z)(s,2),c=u[0],l=u[1];return{values:c,indices:l}}});var o5=V$({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new p4(t,n,r,!0,a),o=eJ(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var s5=V$({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=z$(e,"x","unique","string_or_numeric");nG(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},i=N$.runKernel(JX,r,a),o=(0,T.Z)(i,2),s=o[0],u=o[1];return{values:s,indices:u}}});var u5=V$({unsortedSegmentSum_:function(e,t,n){var r=z$(e,"x","unsortedSegmentSum"),a=z$(t,"segmentIds","unsortedSegmentSum","int32");nG(cG(n),(function(){return"numSegments must be of dtype int"}));var i={x:r,segmentIds:a},o={numSegments:n};return N$.runKernel(tY,i,o)}});var c5=V$({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=z$(e,"x","unstack","string_or_numeric");nG(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return N$.runKernel(eY,r,a)}});function l5(e,t){return D3(e,t,"right")}function f5(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return N$.makeVariable(e,t,n,r)}function h5(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=eJ(e,"int32"),i=eJ([n.length,e.length],"int32"),o=0;o<n.length;o++){var s=a.indexToLoc(n[o]),u=o*e.length;i.values.set(s,u)}return i.toTensor()}function p5(){return p5=Tn(Sn().mark((function e(t){var n,r,a;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=z$(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=h5(n.shape,r),e.abrupt("return",(t!==n&&n.dispose(),a));case 6:case"end":return e.stop()}}),e)}))),p5.apply(this,arguments)}var d5=function(e){return p5.apply(this,arguments)};function m5(){return m5=Tn(Sn().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,p,d,m,v;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=z$(t,"tensor","boolMask"),i=z$(n,"mask","boolMask","bool"),o=null==r?0:r,s=i.rank,u=a.shape,nG(s>0,(function(){return"mask cannot be scalar"})),rG(u.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=o;l<o+s;l++)c*=u[l];return f=u.slice(0,o).concat([c],u.slice(o+s)),h=W1(a,f),p=W1(i,[-1]),e.next=9,d5(p);case 9:return d=e.sent,m=X4(d,[1]),v=a3(h,m,o),e.abrupt("return",(t!==a&&a.dispose(),n!==i&&i.dispose(),m.dispose(),h.dispose(),p.dispose(),d.dispose(),v));case 13:case"end":return e.stop()}}),e)}))),m5.apply(this,arguments)}var v5=function(e,t,n){return m5.apply(this,arguments)};var g5=V$({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=z$(e,"v","movingAverage"),o=z$(t,"x","movingAverage"),s=z$(n,"decay","movingAverage");y$(i,o),nG(uG(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var u=Z2(1),c=I3(u,s),l=l1(I3(o,i),c);if(a){nG(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var f=z$(r,"step","movingAverage");l=c1(l,I3(u,H2(s,f)))}return s1(i,l)}});var y5=V$({scatterND_:function(e,t,n){var r=z$(e,"indices","scatterND","int32"),a=z$(t,"updates","scatterND");w0(a,r,n);var i={indices:r,updates:a},o={shape:n};return N$.runKernel(xX,i,o)}});function b5(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:, ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape ".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var x5=V$({sparseToDense_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=z$(e,"sparseIndices","sparseToDense","int32"),i=z$(t,"sparseValues","sparseToDense","string_or_numeric"),o=z$(r,"defaultValue","sparseToDense",i.dtype);b5(a,i,n,o);var s={sparseIndices:a,sparseValues:i,defaultValue:o},u={outputShape:n};return N$.runKernel(BX,s,u)}});var w5=V$({gatherND_:function(e,t){var n=z$(t,"indices","gatherND","int32"),r={params:z$(e,"x","gatherND","string_or_numeric"),indices:n};return N$.runKernel(uK,r)}});var k5=V$({dropout_:function(e,t,n,r){var a=z$(e,"x","dropout");if(nG("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a ".concat(a.dtype," tensor instead.")})),nG(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof i$?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(uG(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=c1(r3(s1(b4(i,0,1,"float32",r),o)),o);return l1(a,s)}});function S5(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function _5(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return e5(a,"float32")}function T5(){return T5=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u,c,l,f,h,p,d,m,v,g,y=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>2&&void 0!==y[2]?y[2]:1,a=z$(t,"predictions","inTopK"),i=z$(n,"targets","inTopK"),nG(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got ".concat(a.rank)})),nG(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank ".concat(a.rank," and targets rank ").concat(i.rank)})),rG(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],nG(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension (".concat(o,"), but got ").concat(r)})),e.next=7,a.data();case 7:return s=e.sent,e.next=10,i.data();case 10:u=e.sent,c=s.length/o,l=o,f=yG("bool",c),h=0;case 15:if(!(h<c)){e.next=30;break}for(p=h*l,d=s.subarray(p,p+l),m=[],v=0;v<d.length;v++)m.push({value:d[v],index:v});m.sort((function(e,t){return t.value-e.value})),f[h]=0,g=0;case 20:if(!(g<r)){e.next=27;break}if(m[g].index!==u[h]){e.next=24;break}return f[h]=1,e.abrupt("break",27);case 24:g++,e.next=20;break;case 27:h++,e.next=15;break;case 30:return e.abrupt("return",(t!==a&&a.dispose(),n!==i&&i.dispose(),H$(f,i.shape,"bool")));case 31:case"end":return e.stop()}}),e)}))),T5.apply(this,arguments)}var I5=function(e,t){return T5.apply(this,arguments)},N5={};kZ(N5,{conv2d:function(){return M5},depthwiseConv2d:function(){return P5},matMul:function(){return L5}});var C5=V$({conv2DBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=W1(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=W1(t,[1,t.shape[0],t.shape[1],t.shape[2]])),nG(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape ".concat(s.shape,".")})),nG(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape ".concat(u.shape,".")})),nG(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got ".concat(n,".")}));var c="NHWC"===i?s.shape[3]:s.shape[1],l="NHWC"===i?u.shape[3]:u.shape[1];nG(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(c,") must match input depth in filter (").concat(n[2],".")})),nG(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(l,") must match output depth for filter (").concat(n[3],").")})),B1("conv2dDerFilter",a,o);var f={x:s,dy:u},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return N$.runKernel(Nq,f,h)}});function E5(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return l1(e,$4(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function A5(e,t){var n=t,r=i0(e.shape,t.shape);return r.length>0&&(n=K2(n,r)),W1(n,e.shape)}function R5(e,t,n,r){if("linear"===t)return e;if("relu"===t)return k4(e);if("elu"===t)return O2(e);if("relu6"===t)return S4(e);if("prelu"===t)return o4(e,n);if("leakyrelu"===t)return l3(e,r);if("sigmoid"===t)return H1(e);throw new Error("Unknown fused activation ".concat(t,"."))}var O5=function(e,t){return!(e>0)||"linear"===t};var M5=V$({fusedConv2d_:function(e){var t,n,r=e.x,a=e.filter,i=e.strides,o=e.pad,s=e.dataFormat,u=void 0===s?"NHWC":s,c=e.dilations,l=void 0===c?[1,1]:c,f=e.dimRoundingMode,h=e.bias,p=e.activation,d=void 0===p?"linear":p,m=e.preluActivationWeights,v=e.leakyreluAlpha;if(d=d||"linear",!1===O5(N$.state.gradientDepth,d)){nG("NHWC"===u,(function(){return"Error in fused conv2d: got dataFormat of ".concat(u," but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.")}));var g=l2(r,a,i,o,u,l,f);return null!=h&&(g=s1(g,h)),R5(g,d,m,v)}var y=z$(r,"x","conv2d","float32"),b=z$(a,"filter","conv2d","float32"),x=y,w=!1;3===y.rank&&(w=!0,x=W1(y,[1,y.shape[0],y.shape[1],y.shape[2]])),nG(4===x.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank ".concat(x.rank,".")})),nG(4===b.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank ".concat(b.rank,".")})),B1("fused conv2d",o,f);var k="NHWC"===u?x.shape[3]:x.shape[1];nG(b.shape[2]===k,(function(){return"Error in conv2d: depth of input (".concat(k,") must match input depth for filter ").concat(b.shape[2],".")})),nG(L1(i,l),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(l,"'")}));var S,_,I=N1(x.shape,b.shape,i,l,o,f);if(null!=h&&(t=g$(S=z$(h,"bias","fused conv2d"),y),n=(0,T.Z)(t,1),S=n[0],"NHWC"===u?o0(I.outShape,S.shape):(nG(S.shape.length<=1,(function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-".concat(S.shape.length,".")})),nG(0===S.shape.length||S.shape[0]===I.outChannels||1===S.shape[0],(function(){return"Error in fused conv2d: bias shape (".concat(S.shape,") is not compatible with the number of output channels (").concat(I.outChannels,")")})))),null!=m){if(nG((g=m.shape).length<=1||3===g.length,(function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-".concat(g.length,".")})),1===g.length)nG(1===g[0]||g[0]===I.outChannels,(function(){return"Error in fused conv2d: PReLU activation weights (".concat(g,") is not compatible with the number of output channels (").concat(I.outChannels,").")}));else if(3===g.length)try{o0(g,I.outShape)}catch(tf){var N="Error in fused conv2d: PReLU activation weights (".concat(g,") is not compatible with the output shape of the conv2d (").concat(I.outShape,").");throw Error(N)}_=z$(m,"prelu weights","fused conv2d")}var C=function(e,t){nG("NHWC"===u,(function(){return"Error in gradient of fused conv2D: got dataFormat of ".concat(u," but only NHWC is currently supported.")}));var n=(0,T.Z)(t,4),r=n[0],a=n[1],s=n[2],c=n[3],f=E5(e,s,d);nG(P1(l),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(l,"'")}));var h=[h2(a.shape,f,r,i,o),C5(a,f,r.shape,i,o)];if(null!=c){var p=A5(c,f);h.push(p)}return h},E={x:x,filter:b,bias:S,preluActivationWeights:_},A={strides:i,pad:o,dataFormat:u,dilations:l,dimRoundingMode:f,activation:d,leakyreluAlpha:v};return null==h?k3((function(e,t,n){var r=N$.runKernel(uY,E,A);return n([t,e,r]),w&&(r=W1(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:C}}))(x,b):k3((function(e,t,n,r){var a=N$.runKernel(uY,E,A);return r([t,e,a,n]),w&&(a=W1(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:C}}))(x,b,S)}});var D5=V$({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=W1(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=W1(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={x:s,dy:u},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return N$.runKernel(Wq,c,l)}});var F5=V$({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=W1(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={dy:s,filter:n},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},f=N$.runKernel(Vq,c,l);return u?W1(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var P5=V$({fusedDepthwiseConv2d_:function(e){var t,n,r=e.x,a=e.filter,i=e.strides,o=e.pad,s=e.dataFormat,u=void 0===s?"NHWC":s,c=e.dilations,l=void 0===c?[1,1]:c,f=e.dimRoundingMode,h=e.bias,p=e.activation,d=void 0===p?"linear":p,m=e.preluActivationWeights,v=e.leakyreluAlpha;if(!1===O5(N$.state.gradientDepth,d)){var g=S2(r,a,i,o,u,l,f);return null!=h&&(g=s1(g,h)),R5(g,d,m,v)}var y=z$(r,"x","depthwiseConv2d","float32"),b=z$(a,"filter","depthwiseConv2d","float32"),x=y,w=!1;3===y.rank&&(w=!0,x=W1(y,[1,y.shape[0],y.shape[1],y.shape[2]])),nG(4===x.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank ".concat(x.rank,".")})),nG(4===b.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank ".concat(b.rank,".")})),nG(x.shape[3]===b.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels (".concat(x.shape[3],") must match the inChannels dimension in filter ").concat(b.shape[2],".")})),null==l&&(l=[1,1]),nG(L1(i,l),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(l,"'")})),B1("fused depthwiseConv2d",o,f);var k,S,_=N1(x.shape,b.shape,i,l,o,f,!0);null!=h&&(t=g$(k=z$(h,"bias","fused conv2d"),y),n=(0,T.Z)(t,1),k=n[0],o0(_.outShape,k.shape)),null!=m&&(S=z$(m,"prelu weights","fused depthwiseConv2d"));var I=function(e,t){nG(P1(l),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '".concat(l,"'")}));var n=(0,T.Z)(t,4),r=n[0],a=n[1],s=n[2],u=n[3],c=E5(e,s,d),h=F5(a.shape,c,r,i,o,l,f),p=D5(a,c,r.shape,i,o,l,f);return null!=u?[h,p,A5(k,c)]:[h,p]},N={x:x,filter:b,bias:k,preluActivationWeights:S},C={strides:i,pad:o,dataFormat:u,dilations:l,dimRoundingMode:f,activation:d,leakyreluAlpha:v};return null==h?k3((function(e,t,n){var r=N$.runKernel(cY,N,C);return n([t,e,r]),w&&(r=W1(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:I}}))(x,b):k3((function(e,t,n,r){var a=N$.runKernel(cY,N,C);return r([t,e,a,n]),w&&(a=W1(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:I}}))(x,b,k)}});var L5=V$({fusedMatMul_:function(e){var t,n=e.a,r=e.b,a=e.transposeA,i=void 0!==a&&a,o=e.transposeB,s=void 0!==o&&o,u=e.bias,c=e.activation,l=void 0===c?"linear":c,f=e.preluActivationWeights,h=e.leakyreluAlpha,p=void 0===h?.2:h;if(!1===O5(N$.state.gradientDepth,l)){var d=EJ(n,r,i,s);return null!=u&&(d=s1(d,u)),R5(d,l,f,p)}var m=z$(n,"a","fused matMul"),v=z$(r,"b","fused matMul"),g=g$(m,v),y=(0,T.Z)(g,2);m=y[0],v=y[1];var b=i?m.shape[m.rank-2]:m.shape[m.rank-1],x=s?v.shape[v.rank-1]:v.shape[v.rank-2],w=i?m.shape[m.rank-1]:m.shape[m.rank-2],k=s?v.shape[v.rank-2]:v.shape[v.rank-1],S=m.shape.slice(0,-2),_=v.shape.slice(0,-2),I=oG(S),N=oG(_);nG(b===x,(function(){return"Error in fused matMul: inner shapes (".concat(b,") and (").concat(x,") of Tensors with shapes ").concat(m.shape," and ").concat(v.shape," and transposeA=").concat(i," and transposeB=").concat(s," must match.")}));var C,E,A=o0(m.shape.slice(0,-2),v.shape.slice(0,-2)).concat([w,k]),R=W1(m,i?[I,b,w]:[I,w,b]),O=W1(v,s?[N,k,x]:[N,x,k]);null!=u&&(t=g$(C=z$(u,"bias","fused matMul"),m),C=(0,T.Z)(t,1)[0],o0(A,C.shape)),null!=f&&(E=z$(f,"prelu weights","fused matMul"));var M=function(e,t){var n,r,a=(0,T.Z)(t,4),o=a[0],c=a[1],f=a[2],h=a[3],p=E5(W1(e,f.shape),f,l);return i||s?!i&&s?(n=EJ(p,c,!1,!1),r=EJ(p,o,!0,!1)):i&&!s?(n=EJ(c,p,!1,!0),r=EJ(o,p,!1,!1)):(n=EJ(c,p,!0,!0),r=EJ(p,o,!0,!0)):(n=EJ(p,c,!1,!0),r=EJ(o,p,!0,!1)),null!=u?[n,r,A5(h,p)]:[n,r]},D={a:R,b:O,bias:C,preluActivationWeights:E},F={transposeA:i,transposeB:s,activation:l,leakyreluAlpha:p};return null==u?k3((function(e,t,n){var r=N$.runKernel(sY,D,F);return n([e,t,r]),{value:W1(r,A),gradFunc:M}}))(R,O):k3((function(e,t,n,r){var a=N$.runKernel(sY,D,F);return r([e,t,a,n]),{value:W1(a,A),gradFunc:M}}))(R,O,C)}});var z5=V$({hammingWindow_:function(e){return _5(e,.54,.46)}});var B5=V$({hannWindow_:function(e){return _5(e,.5,.5)}});var W5=V$({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(Z1(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=U1([Z1(e,i,t-s),a2([s],a)]);o.push(u),i+=n}return 0===o.length?t5([],[0,t]):W1(U1(o),[o.length,t])}});var V5=V$({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:B5;null==r&&(r=S5(t));var i=W5(e,t,n),o=l1(i,a(t));return q4(o,r)}});var j5=V$({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=z$(e,"image","cropAndResize"),s=z$(t,"boxes","cropAndResize","float32"),u=z$(n,"boxInd","cropAndResize","int32"),c=s.shape[0];nG(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank ".concat(o.rank,".")})),nG(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] but had shape ").concat(s.shape,".")})),nG(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] but had shape ").concat(s.shape,".")})),nG(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length ".concat(r.length,".")})),nG(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),nG("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:o,boxes:s,boxInd:u},f={method:a,extrapolationValue:i,cropSize:r};return N$.runKernel(Pq,l,f)}});var U5=V$({flipLeftRight_:function(e){var t=z$(e,"image","flipLeftRight","float32");nG(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,but got rank ".concat(t.rank,".")}));var n={image:t};return N$.runKernel(rK,n,{})}});var H5=V$({grayscaleToRGB_:function(e){var t=z$(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];nG(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, but got rank ".concat(t.rank,".")})),nG(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,t3(t,a)}});var Z5=V$({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=z$(e,"image","rotateWithOffset","float32");nG(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r};return N$.runKernel(oY,i,o)}});function G5(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),nG(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),nG(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),nG(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),nG(1===t.rank,(function(){return"scores must be a 1D tensor"})),nG(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", but was ").concat(t.shape[0])})),nG(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var q5=V$({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=z$(e,"boxes","nonMaxSuppression","float32"),o=z$(t,"scores","nonMaxSuppression","float32"),s=G5(i,o,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return N$.runKernel(qK,{boxes:i,scores:o},u)}});function K5(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,a=e.length,i=0,o=!1;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||X5)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function X5(e,t){return e>t?1:e<t?-1:0}function Y5(e,t,n,r,a){return J5(e,t,n,r,a,0)}function $5(e,t,n,r,a,i){return J5(e,t,n,r,a,0,!1,i,!0)}function Q5(e,t,n,r,a,i){return J5(e,t,n,r,a,i,!0)}function J5(e,t,n,r,a,i){for(var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=[],l=0;l<t.length;l++)t[l]>a&&c.push({score:t[l],boxIndex:l,suppressBeginIndex:0});c.sort(n6);for(var f=i>0?-.5/i:0,h=[],p=[];h.length<n&&c.length>0;){var d=c.pop(),m=d.score,v=d.boxIndex,g=d.suppressBeginIndex;if(m<a)break;for(var y=!1,b=h.length-1;b>=g;--b){var x=e6(e,v,h[b]);if(x>=r){y=!0;break}if(d.score=d.score*t6(r,f,x),d.score<=a)break}d.suppressBeginIndex=h.length,y||(d.score===m?(h.push(v),p.push(d.score)):d.score>a&&K5(c,d,n6))}var w=h.length,k=n-w;s&&k>0&&(h.push.apply(h,(0,I.Z)(new Array(k).fill(0))),p.push.apply(p,(0,I.Z)(new Array(k).fill(0))));var S={selectedIndices:h};return o&&(S.selectedScores=p),u&&(S.validOutputs=w),S}function e6(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),f=Math.max(a[0],a[2]),h=Math.max(a[1],a[3]),p=(s-i)*(u-o),d=(f-c)*(h-l);if(p<=0||d<=0)return 0;var m=Math.max(i,c),v=Math.max(o,l),g=Math.min(s,f),y=Math.min(u,h),b=Math.max(g-m,0)*Math.max(y-v,0);return b/(p+d-b)}function t6(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function n6(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function r6(){return r6=Tn(Sn().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,p,d=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:.5,i=d.length>4&&void 0!==d[4]?d[4]:Number.NEGATIVE_INFINITY,o=z$(t,"boxes","nonMaxSuppressionAsync"),s=z$(n,"scores","nonMaxSuppressionAsync"),u=G5(o,s,r,a,i),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,e.next=6,Promise.all([o.data(),s.data()]);case 6:return c=e.sent,l=c[0],f=c[1],h=Y5(l,f,r,a,i),p=h.selectedIndices,e.abrupt("return",(o!==t&&o.dispose(),s!==n&&s.dispose(),e5(p,"int32")));case 12:case"end":return e.stop()}}),e)}))),r6.apply(this,arguments)}var a6=function(e,t,n){return r6.apply(this,arguments)};var i6=V$({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=z$(e,"boxes","nonMaxSuppression"),s=z$(t,"scores","nonMaxSuppression"),u=G5(o,s,n,r,a,i),c={boxes:o,scores:s},l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},f=N$.runKernel(XK,c,l);return{selectedIndices:f[0],selectedScores:f[1]}}});function o6(){return o6=Tn(Sn().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,p,d,m,v=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>3&&void 0!==v[3]?v[3]:.5,i=v.length>4&&void 0!==v[4]?v[4]:Number.NEGATIVE_INFINITY,o=v.length>5&&void 0!==v[5]?v[5]:0,s=z$(t,"boxes","nonMaxSuppressionAsync"),u=z$(n,"scores","nonMaxSuppressionAsync"),c=G5(s,u,r,a,i,o),r=c.maxOutputSize,a=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma,e.next=7,Promise.all([s.data(),u.data()]);case 7:return l=e.sent,f=l[0],h=l[1],p=Q5(f,h,r,a,i,o),d=p.selectedIndices,m=p.selectedScores,e.abrupt("return",(s!==t&&s.dispose(),u!==n&&u.dispose(),{selectedIndices:e5(d,"int32"),selectedScores:e5(m)}));case 14:case"end":return e.stop()}}),e)}))),o6.apply(this,arguments)}var s6=function(e,t,n){return o6.apply(this,arguments)};var u6=V$({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=z$(e,"boxes","nonMaxSuppression"),s=z$(t,"scores","nonMaxSuppression"),u=G5(o,s,n,r,a,null),c=u.maxOutputSize,l=u.iouThreshold,f=u.scoreThreshold,h={boxes:o,scores:s},p={maxOutputSize:c,iouThreshold:l,scoreThreshold:f,padToMaxOutputSize:i},d=N$.runKernel(KK,h,p);return{selectedIndices:d[0],validOutputs:d[1]}}});function c6(){return c6=Tn(Sn().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,p,d,m,v,g,y,b,x=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.length>3&&void 0!==x[3]?x[3]:.5,i=x.length>4&&void 0!==x[4]?x[4]:Number.NEGATIVE_INFINITY,o=x.length>5&&void 0!==x[5]&&x[5],s=z$(t,"boxes","nonMaxSuppressionAsync"),u=z$(n,"scores","nonMaxSuppressionAsync"),c=G5(s,u,r,a,i,null),l=c.maxOutputSize,f=c.iouThreshold,h=c.scoreThreshold,e.next=11,Promise.all([s.data(),u.data()]);case 11:return p=e.sent,d=(0,T.Z)(p,2),m=d[0],v=d[1],g=$5(m,v,l,f,h,o),y=g.selectedIndices,b=g.validOutputs,e.abrupt("return",(s!==t&&s.dispose(),u!==n&&u.dispose(),{selectedIndices:e5(y,"int32"),validOutputs:Z2(b,"int32")}));case 19:case"end":return e.stop()}}),e)}))),c6.apply(this,arguments)}var l6=function(e,t,n){return c6.apply(this,arguments)};var f6=V$({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=z$(e,"images","resizeBilinear");nG(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank ".concat(a.rank,".")})),nG(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape ".concat(t,".")})),nG(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=W1(a,[1,a.shape[0],a.shape[1],a.shape[2]])),hR(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=N$.runKernel(dX,s,u);return o?W1(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var h6=V$({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=z$(e,"images","resizeNearestNeighbor");nG(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ".concat(a.rank,".")})),nG(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape ".concat(t,".")})),nG("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),nG(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=W1(a,[1,a.shape[0],a.shape[1],a.shape[2]])),hR(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=N$.runKernel(hX,s,u);return o?W1(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});function p6(e,t){for(var n,r,a,i,o,s,u=e5([-1]),c=e5([0]),l=e5([0]),f=0;f<e.size-1;f++){n=Z1(e,0,f+1),r=Z1(e,f+1),o=c1(K2(n),t),s=c1(K2(r),t);var h=K2(l1(n,x4(0,n.size)));a=c1(h,K2(n));var p=a2(r.shape,n.size),d=s1(x4(0,r.size),p),m=l1(r,d);i=c1(K2(m),K2(r));var v=I3(a,i),g=I3(a,i),y=l1(o,s);l=l1(l1(y,v),g);var b=i3(l,c);c=N2(b,l,c),u=N2(b,e5([f]),u)}return u}var d6=V$({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,u=z$(e,"image","threshold"),c=.2989,l=.587,f=.114,h=u.shape[0]*u.shape[1],p=l1(e5([s]),255);if(nG(3===u.rank,(function(){return"Error in threshold: image must be rank 3,but got rank ".concat(u.rank,".")})),nG(3===u.shape[2]||1===u.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1but got ".concat(u.shape[2],".")})),nG("int32"===u.dtype||"float32"===u.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,but got dtype ".concat(u.dtype,".")})),nG("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===u.shape[2]){var d=G4(u,[1,1,1],-1),m=(0,T.Z)(d,3);t=m[0],n=m[1],r=m[2];var v=l1(t,c),g=l1(n,l),y=l1(r,f);a=s1(s1(v,g),y)}else a=e;if("otsu"===i){var b=e2(tJ(E4(a),"int32"),H$([]),256);p=p6(b,h)}var x=o?h3(a,p):i3(a,p);return tJ(l1(x,255),"int32")}});var m6=V$({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=z$(e,"image","transform","float32"),s=z$(t,"transforms","transform","float32");nG(4===o.rank,(function(){return"Error in transform: image must be rank 4,but got rank ".concat(o.rank,".")})),nG(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),nG(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, but got ".concat(i,".")}));var u={image:o,transforms:s},c={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return N$.runKernel($X,u,c)}});var v6=V$({bandPart_:function(e,t,n){nG(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),nG(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=z$(e,"a","bandPart");nG(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=r.shape.slice(-2),o=(0,T.Z)(i,2),s=o[0],u=o[1];if(!(t<=s))throw new Error("bandPart(): numLower (".concat(t,") must not be greater than the number of rows (").concat(s,")."));if(!(n<=u))throw new Error("bandPart(): numUpper (".concat(n,") must not be greater than the number of columns (").concat(u,")."));t<0&&(t=s),n<0&&(n=u);var c=W1(x4(0,s,1,"int32"),[-1,1]),l=x4(0,u,1,"int32"),f=I3(c,l),h=E3(h3(f,Z2(+t,"int32")),o3(f,Z2(-n,"int32"))),p=V3([s,u],r.dtype);return W1(Y4(c5(W1(r,[-1,s,u])).map((function(e){return N2(h,e,p)}))),a)}});var g6=V$({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,nG(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){nG(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: (".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=G4(e,e.shape[0],0).map((function(e){return X4(e,[0])}))),nG(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds number of dimensions (").concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(N$.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=l1(K2(l1(n[a],t)),n[a]);t=I3(t,i)}return c1(t,Y2(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?Y4(n,0):n}});function y6(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return N$.tidy((function(){nG(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=n3(n),i=nJ(e),o=t5([[1]],[1,1]),s=nJ(o),u=n>=r?r:n,c=function(e){var t,u,c=i,l=s,f=a;t=N$.tidy((function(){var t=Z1(i,[e,e],[n-e,1]),u=Y2(t),c=Z1(i,[e,e],[1,1]),l=N2(i3(c,0),t5([[-1]]),t5([[1]])),f=I3(c,l1(l,u)),h=c1(t,f);s=1===h.shape[0]?nJ(o):U1([o,Z1(h,[1,0],[h.shape[0]-1,h.shape[1]])],0);var p=JJ(c1(EJ(l,f),u)),d=Z1(i,[e,0],[n-e,r]),m=l1(p,s),v=t0(s);if(0===e)i=I3(d,EJ(m,EJ(v,d)));else{var g=I3(d,EJ(m,EJ(v,d)));i=U1([Z1(i,[0,0],[e,r]),g],0)}var y=t0(m),b=Z1(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=I3(b,EJ(EJ(b,s),y));else{var x=I3(b,EJ(EJ(b,s),y));a=U1([Z1(a,[0,0],[n,e]),x],1)}return[s,i,a]})),u=(0,T.Z)(t,3),s=u[0],i=u[1],a=u[2],WJ([c,l,f])},l=0;l<u;++l)c(l);return!t&&n>r&&(a=Z1(a,[0,0],[n,r]),i=Z1(i,[0,0],[r,r])),[a,i]}))}var b6,x6=V$({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(nG(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return y6(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=c5(W1(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach((function(e){var n=y6(e,t),r=(0,T.Z)(n,2),o=r[0],s=r[1];a.push(o),i.push(s)}));var o=W1(Y4(a,0),e.shape),s=W1(Y4(i,0),e.shape);return[o,s]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(b6||(b6={}));var w6=V$({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b6.SUM_BY_NONZERO_WEIGHTS,r=z$(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=z$(t,"weights","computeWeightedLoss"));var i=null==a?r:l1(r,a);if(n===b6.NONE)return i;if(n===b6.SUM)return K2(i);if(n===b6.MEAN){if(null==a)return W3(i);var o=r.size/a.size,s=c1(K2(i),K2(a));return o>1?c1(s,Z2(o)):s}if(n===b6.SUM_BY_NONZERO_WEIGHTS){if(null==a)return c1(K2(i),Z2(r.size));var u=l1(a,j3(r.shape)),c=tJ(K2(Y3(u,Z2(0))),"float32");return c1(K2(i),c)}throw Error("Unknown reduction: ".concat(n))}});var k6=V$({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b6.SUM_BY_NONZERO_WEIGHTS,a=z$(e,"labels","absoluteDifference"),i=z$(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=z$(n,"weights","absoluteDifference")),rG(a.shape,i.shape,"Error in absoluteDifference: ");var s=f1(I3(a,i));return w6(s,o,r)}});var S6=V$({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:b6.SUM_BY_NONZERO_WEIGHTS,i=z$(e,"labels","cosineDistance"),o=z$(t,"predictions","cosineDistance"),s=null;null!=r&&(s=z$(r,"weights","cosineDistance")),rG(i.shape,o.shape,"Error in cosineDistance: ");var u=Z2(1),c=I3(u,K2(l1(i,o),n,!0));return w6(c,s,a)}});var _6=V$({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b6.SUM_BY_NONZERO_WEIGHTS,a=z$(e,"labels","hingeLoss"),i=z$(t,"predictions","hingeLoss"),o=null;null!=n&&(o=z$(n,"weights","hingeLoss")),rG(a.shape,i.shape,"Error in hingeLoss: ");var s=Z2(1);a=I3(l1(Z2(2),a),s);var u=k4(I3(s,l1(a,i)));return w6(u,o,r)}});var T6=V$({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:b6.SUM_BY_NONZERO_WEIGHTS,i=z$(e,"labels","huberLoss"),o=z$(t,"predictions","huberLoss"),s=null;null!=n&&(s=z$(n,"weights","huberLoss")),rG(i.shape,o.shape,"Error in huberLoss: ");var u=Z2(r),c=f1(I3(o,i)),l=H3(c,u),f=I3(c,l),h=s1(l1(Z2(.5),q2(l)),l1(u,f));return w6(h,s,a)}});var I6=V$({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:b6.SUM_BY_NONZERO_WEIGHTS,i=z$(e,"labels","logLoss"),o=z$(t,"predictions","logLoss"),s=null;null!=n&&(s=z$(n,"weights","logLoss")),rG(i.shape,o.shape,"Error in logLoss: ");var u=Z2(1),c=Z2(r),l=JJ(l1(i,m3(s1(o,c)))),f=l1(I3(u,i),m3(s1(I3(u,o),c))),h=I3(l,f);return w6(h,s,a)}});var N6=V$({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b6.SUM_BY_NONZERO_WEIGHTS,a=z$(e,"labels","meanSquaredError"),i=z$(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=z$(n,"weights","meanSquaredError")),rG(a.shape,i.shape,"Error in meanSquaredError: ");var s=K4(a,i);return w6(s,o,r)}});function C6(e,t){var n=z$(e,"labels","sigmoidCrossEntropyWithLogits"),r=z$(t,"logits","sigmoidCrossEntropyWithLogits");rG(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=k4(r),i=l1(r,n),o=v3(Q2(JJ(f1(r))));return s1(I3(a,i),o)}var E6=V$({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:b6.SUM_BY_NONZERO_WEIGHTS,i=z$(e,"multiClassLabels","sigmoidCrossEntropy"),o=z$(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=z$(n,"weights","sigmoidCrossEntropy")),rG(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Z2(r),c=Z2(1),l=Z2(.5);i=s1(l1(i,I3(c,u)),l1(l,u))}var f=C6(i,o);return w6(f,s,a)}});function A6(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ".concat(t.rank," and dim was ").concat(n));return k3((function(e,t,r){var a=C3(t,[n],!0),i=I3(tJ(t,"float32"),a);r([e,i]);var o=JJ(l1(i,e));return{value:K2(o,[n]),gradFunc:function(e,t){var r=(0,T.Z)(t,2),a=r[0],i=r[1],o=L2(e.shape,[n]);return[l1(W1(e,o),I3(tJ(a,"float32"),Q2(i))),l1(W1(e,o),I3(Q2(i),tJ(a,"float32")))]}}}))(e,t)}var R6=V$({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:b6.SUM_BY_NONZERO_WEIGHTS,i=z$(e,"onehotLabels","softmaxCrossEntropy"),o=z$(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=z$(n,"weights","softmaxCrossEntropy")),rG(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Z2(r),c=Z2(1),l=Z2(i.shape[1]);i=s1(l1(i,I3(c,u)),c1(u,l))}var f=A6(i,o);return w6(f,s,a)}});var O6=V$({sparseFillEmptyRows_:function(e,t,n,r){var a=z$(e,"indices","sparseFillEmptyRows","int32"),i=z$(t,"values","sparseFillEmptyRows"),o=z$(n,"denseShape","sparseFillEmptyRows","int32"),s=z$(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:i,denseShape:o,defaultValue:s},c=N$.runKernel(FX,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});var M6=V$({sparseReshape_:function(e,t,n){var r=z$(e,"inputIndices","sparseReshape","int32"),a=z$(t,"inputShape","sparseReshape","int32"),i=z$(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},s=N$.runKernel(PX,o);return{outputIndices:s[0],outputShape:s[1]}}});var D6=V$({sparseSegmentMean_:function(e,t,n){var r=z$(e,"data","sparseSegmentMean"),a=z$(t,"indices","sparseSegmentMean","int32"),i=z$(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return N$.runKernel(LX,o)}});var F6=V$({sparseSegmentSum_:function(e,t,n){var r=z$(e,"data","sparseSegmentSum"),a=z$(t,"indices","sparseSegmentSum","int32"),i=z$(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return N$.runKernel(zX,o)}});var P6=V$({stringNGrams_:function(e,t,n,r,a,i,o,s){var u=z$(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var c=z$(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");var l={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},f={data:u,dataSplits:c},h=N$.runKernel(UX,f,l);return{nGrams:h[0],nGramsSplits:h[1]}}});var L6=V$({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=z$(e,"input","stringSplit","string"),a=z$(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},s=N$.runKernel(HX,o,i);return{indices:s[0],values:s[1],shape:s[2]}}});var z6=V$({stringToHashBucketFast_:function(e,t){var n=z$(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return N$.runKernel(ZX,a,r)}}),B6={fft:U4,ifft:H4,rfft:q4,irfft:Z4},W6={hammingWindow:z5,hannWindow:B5,frame:W5,stft:V5},V6={flipLeftRight:U5,grayscaleToRGB:H5,resizeNearestNeighbor:h6,resizeBilinear:f6,rotateWithOffset:Z5,cropAndResize:j5,nonMaxSuppression:q5,nonMaxSuppressionAsync:a6,nonMaxSuppressionWithScore:i6,nonMaxSuppressionWithScoreAsync:s6,nonMaxSuppressionPadded:u6,nonMaxSuppressionPaddedAsync:l6,threshold:d6,transform:m6},j6={bandPart:v6,gramSchmidt:g6,qr:x6},U6={absoluteDifference:k6,computeWeightedLoss:w6,cosineDistance:S6,hingeLoss:_6,huberLoss:T6,logLoss:I6,meanSquaredError:N6,sigmoidCrossEntropy:E6,softmaxCrossEntropy:R6},H6={sparseFillEmptyRows:O6,sparseReshape:M6,sparseSegmentMean:D6,sparseSegmentSum:F6},Z6={stringNGrams:P6,stringSplit:L6,stringToHashBucketFast:z6},G6=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return WJ(i),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return w3(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&WJ(this.iterations_)}},{key:"saveIterations",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:Z2(this.iterations_,"int32")}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class ".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(j0);Object.defineProperty(G6,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var q6=function(e){A(n,e);var t=L(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return N(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==i&&(a.epsilon=N$.backend.epsilon()),a}return(0,C.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=N$.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:BJ((function(){return C2(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:BJ((function(){return C2(a).variable(false)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;BJ((function(){var e=s1(l1(o,t.rho),l1(q2(i),1-t.rho)),n=l1(c1(G2(s1(s,t.epsilon)),G2(s1(o,t.epsilon))),i),r=s1(l1(s,t.rho),l1(q2(n),1-t.rho));o.assign(e),s.assign(r);var u=s1(l1(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(WJ(this.accumulatedGrads.map((function(e){return e.variable}))),WJ(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=Tn(Sn().mark((function e(){var t;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,I.Z)(this.accumulatedGrads),(0,I.Z)(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Tn(Sn().mark((function e(t){var n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(G6);q6.className="Adadelta",H0(q6);var K6=function(e){A(n,e);var t=L(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return N(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return(0,C.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=N$.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:BJ((function(){return a2(a.shape,t.initialAccumulatorValue).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;BJ((function(){var e=s1(o,q2(i));o.assign(e);var n=s1(l1(c1(i,G2(s1(e,N$.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&WJ(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(G6);K6.className="Adagrad",H0(K6);var X6=function(e){A(n,e);var t=L(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return N(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],BJ((function(){i.accBeta1=Z2(r).variable(),i.accBeta2=Z2(a).variable()})),null==o&&(i.epsilon=N$.backend.epsilon()),i}return(0,C.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);BJ((function(){var r=I3(1,t.accBeta1),a=I3(1,t.accBeta2);n.forEach((function(n,i){var o=N$.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:BJ((function(){return C2(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:BJ((function(){return C2(o).variable(false)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedSecondMoment[i].variable,l=s1(l1(u,t.beta1),l1(s,1-t.beta1)),f=s1(l1(c,t.beta2),l1(q2(s),1-t.beta2)),h=c1(l,r),p=c1(f,a);u.assign(l),c.assign(f);var d=s1(l1(c1(h,s1(G2(p),t.epsilon)),-t.learningRate),o);o.assign(d)}})),t.accBeta1.assign(l1(t.accBeta1,t.beta1)),t.accBeta2.assign(l1(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&WJ(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&WJ(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Tn(Sn().mark((function e(){var t;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,I.Z)(this.accumulatedFirstMoment),(0,I.Z)(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Tn(Sn().mark((function e(t){var n,r=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,BJ((function(){r.accBeta1.assign(H2(r.beta1,r.iterations_+1)),r.accBeta2.assign(H2(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(G6);X6.className="Adam",H0(X6);var Y6=function(e){A(n,e);var t=L(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return N(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.decay=s,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],BJ((function(){i.iteration=Z2(0).variable(),i.accBeta1=Z2(r).variable()})),null==o&&(i.epsilon=N$.backend.epsilon()),i}return(0,C.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);BJ((function(){var r=I3(1,t.accBeta1),a=c1(-t.learningRate,s1(l1(t.iteration,t.decay),1));n.forEach((function(n,i){var o=N$.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:C2(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:C2(o).variable(false)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedWeightedInfNorm[i].variable,l=s1(l1(u,t.beta1),l1(s,1-t.beta1)),f=l1(c,t.beta2),h=f1(s),p=B3(f,h);u.assign(l),c.assign(p);var d=s1(l1(c1(a,r),c1(l,s1(p,t.epsilon))),o);o.assign(d)}})),t.iteration.assign(s1(t.iteration,1)),t.accBeta1.assign(l1(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&WJ(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&WJ(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(G6);Y6.className="Adamax",H0(Y6);var $6=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return(0,C.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=N$.registeredVariables[n];BJ((function(){var e=s1(l1(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=VJ(Z2(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(G6);$6.className="SGD",H0($6);var Q6=function(e){A(n,e);var t=L(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return N(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=Z2(a.momentum),a}return(0,C.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=N$.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:BJ((function(){return C2(a).variable(!1)}))});var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&BJ((function(){var e,n=s1(l1(t.m,i),o);e=t.useNesterov?s1(l1(t.c,s1(o,l1(n,t.m))),a):s1(l1(t.c,n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&WJ(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}($6);Q6.className="Momentum",H0(Q6);var J6=function(e){A(n,e);var t=L(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(N(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=i,r.epsilon=o,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=s,null==o&&(r.epsilon=N$.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return P(r)}return(0,C.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=N$.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:BJ((function(){return C2(a).variable(i)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:BJ((function(){return C2(a).variable(i)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:BJ((function(){return C2(a).variable(i)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var s=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;BJ((function(){var e=s1(l1(s,t.decay),l1(q2(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,i=s1(l1(n,t.decay),l1(o,1-t.decay)),c=c1(l1(o,t.learningRate),G2(I3(e,s1(q2(i),t.epsilon)))),l=s1(l1(u,t.momentum),c);s.assign(e),n.assign(i),u.assign(l);var f=I3(a,l);a.assign(f)}else{var h=s1(l1(s,t.decay),l1(q2(o),1-t.decay)),p=s1(l1(u,t.momentum),c1(l1(o,t.learningRate),G2(s1(h,t.epsilon))));s.assign(h),u.assign(p);var d=I3(a,p);a.assign(d)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&WJ(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&WJ(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&WJ(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Tn(Sn().mark((function e(){var t;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,I.Z)(this.accumulatedMeanSquares),(0,I.Z)(this.accumulatedMoments)),this.centered&&t.push.apply(t,(0,I.Z)(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Tn(Sn().mark((function e(t){var n,r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(G6);J6.className="RMSProp",H0(J6);var e8=function(){function e(){N(this,e)}return(0,C.Z)(e,null,[{key:"sgd",value:function(e){return new $6(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Q6(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new J6(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new X6(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new q6(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new Y6(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new K6(e,t)}}]),e}(),t8={sgd:e8.sgd,momentum:e8.momentum,adadelta:e8.adadelta,adagrad:e8.adagrad,rmsprop:e8.rmsprop,adamax:e8.adamax,adam:e8.adam},n8="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:function(e){return e()};function r8(){return new Promise((function(e){return n8((function(){return e()}))}))}var a8,i8={};function o8(e,t){var n=e[0].length;e.forEach((function(e,t){nG(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same as the rank of the rest (").concat(n,")")}))})),nG(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)nG(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") does not match the shape of the rest (").concat(r,") along the non-concatenated axis ").concat(a,".")}))}))}function s8(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function u8(e,t,n){var r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(var a=1;a<n.length;++a){var i=n[a],o=r[r.length-n.length+a],s=r[o];if(i>=0)if(s>=0){if(s!==i)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(a+e,"] = ").concat(i," but shape[").concat(a+e,"] = ").concat(s))}else r[o]=i}return r}function c8(e){var t,n={FIRST_DIM_SIZE:a8.FIRST_DIM_SIZE,VALUE_ROWIDS:a8.VALUE_ROWIDS,ROW_LENGTHS:a8.ROW_LENGTHS,ROW_SPLITS:a8.ROW_SPLITS,ROW_LIMITS:a8.ROW_LIMITS,ROW_STARTS:a8.ROW_STARTS},r=[],a=Oo(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(!(i in n))break;r.push(n[i])}}catch(cBe){a.e(cBe)}finally{a.f()}return r}function l8(e){return 0===e.length?0:e[0]===a8.FIRST_DIM_SIZE?e.length-1:e.length}function f8(e,t){if(null!=e&&null!=t){var n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(var a=0;a<Math.min(n,r-1);++a){var i=e[a],o=t[a+1];if(i>=0&&o>=0&&1!==i&&i!==o)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(a-e.length,"] = ").concat(i," but ragged tensor input.flatValues.shape[").concat(a-e.length,"] = ").concat(o))}}}kZ(i8,{ERF_A1:function(){return S8},ERF_A2:function(){return _8},ERF_A3:function(){return T8},ERF_A4:function(){return I8},ERF_A5:function(){return N8},ERF_P:function(){return k8},PARALLELIZE_THRESHOLD:function(){return h8},RowPartitionType:function(){return a8},SELU_SCALE:function(){return w8},SELU_SCALEALPHA:function(){return x8},applyActivation:function(){return R5},assertAndGetBroadcastShape:function(){return o0},assertAxesAreInnerMostDims:function(){return z2},assertParamsConsistent:function(){return o8},assignToTypedArray:function(){return M8},axesAreInnerMostDims:function(){return D2},calculateShapes:function(){return k0},checkEinsumDimSizes:function(){return W8},checkPadOnDimRoundingMode:function(){return B1},combineLocations:function(){return F2},combineRaggedTensorToTensorShapes:function(){return u8},complexWithEvenIndex:function(){return A8},complexWithOddIndex:function(){return R8},computeConv2DInfo:function(){return N1},computeConv3DInfo:function(){return C1},computeDefaultPad:function(){return E1},computeDilation2DInfo:function(){return _1},computeOptimalWindowSize:function(){return p8},computeOutAndReduceShapes:function(){return P2},computeOutShape:function(){return s8},computePool2DInfo:function(){return T1},computePool3DInfo:function(){return I1},convertConv2DDataFormat:function(){return z1},decodeEinsumEquation:function(){return z8},eitherStridesOrDilationsAreOne:function(){return L1},expandShapeToKeepDim:function(){return L2},exponent:function(){return F8},exponents:function(){return D8},fromStringArrayToUint8:function(){return u7},fromUint8ToStringArray:function(){return s7},getAxesPermutation:function(){return B2},getBroadcastDims:function(){return a0},getComplexWithIndex:function(){return O8},getEinsumComputePath:function(){return V8},getEinsumPermutation:function(){return B8},getFusedBiasGradient:function(){return A5},getFusedDyActivation:function(){return E5},getImageCenter:function(){return d8},getInnerMostAxes:function(){return V2},getPermuted:function(){return v8},getRaggedRank:function(){return l8},getReductionAxes:function(){return i0},getReshaped:function(){return m8},getReshapedPermuted:function(){return g8},getRowPartitionTypesHelper:function(){return c8},getSliceBeginCoords:function(){return y8},getSliceSize:function(){return b8},getSparseFillEmptyRowsIndicesDenseShapeMismatch:function(){return Z8},getSparseFillEmptyRowsNegativeIndexErrorMessage:function(){return G8},getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:function(){return q8},getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:function(){return Y8},getSparseReshapeInputOutputMismatchErrorMessage:function(){return Q8},getSparseReshapeInputOutputMultipleErrorMessage:function(){return $8},getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:function(){return K8},getSparseReshapeNegativeOutputDimErrorMessage:function(){return X8},getSparseSegmentReductionIndicesOutOfRangeErrorMessage:function(){return n7},getSparseSegmentReductionNegativeSegmentIdsErrorMessage:function(){return J8},getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:function(){return e7},getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:function(){return t7},getUndoAxesPermutation:function(){return W2},isIdentityPermutation:function(){return j8},log:function(){return fY},mergeRealAndImagArrays:function(){return C8},prepareAndValidate:function(){return y0},prepareSplitSize:function(){return H8},segment_util:function(){return r7},shouldFuse:function(){return O5},slice_util:function(){return S0},splitRealAndImagArrays:function(){return E8},tupleValuesAreOne:function(){return P1},upcastType:function(){return m$},validateDefaultValueShape:function(){return f8},validateInput:function(){return w0},validateUpdateShape:function(){return x0},warn:function(){return lY}}),function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(a8||(a8={}));var h8=30;function p8(e){return e<=h8?e:RG(e,Math.floor(Math.sqrt(e)))}function d8(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function m8(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function v8(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2===1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function g8(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function y8(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function b8(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var x8=1.7580993408473768,w8=1.0507009873554805,k8=.3275911,S8=.254829592,_8=-.284496736,T8=1.421413741,I8=-1.453152027,N8=1.061405429;function C8(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function E8(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function A8(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function R8(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function O8(e,t){return{real:e[2*t],imag:e[2*t+1]}}function M8(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function D8(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function F8(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var P8="->",L8=/->/g;function z8(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(L8,"").length)/P8.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(P8,'").'));var r=e.split(P8),a=(0,T.Z)(r,2),i=a[0],o=a[1];nG(-1===i.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var s=i.split(","),u=s.length;if(t!==u)throw new Error("Expected ".concat(u," input tensors, received ").concat(t));if(u>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var c=[],l=function(e){var t=o[e];if(!s.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," not present in the input subscripts."));-1===c.indexOf(t)&&c.push(t)},f=0;f<o.length;++f)l(f);for(var h=0;h<i.length;++h){var p=i[h];-1===c.indexOf(p)&&","!==p&&c.push(p)}for(var d=new Array(s.length),m=0;m<u;++m){if(new Set(s[m].split("")).size!==s[m].length)throw new Error("Found duplicate axes in input component ".concat(s[m],". Support for duplicate axes in input is not implemented yet."));d[m]=[];for(var v=0;v<s[m].length;++v)d[m].push(c.indexOf(s[m][v]))}for(var g=c.length,y=[],b=o.length;b<g;++b)y.push(b);return{allDims:c,summedDims:y,idDims:d}}function B8(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],i=0;i<e;++i)-1===n[i]&&a.push(i);return n=n.filter((function(e){return-1!==e})),{permutationIndices:n,expandDims:a}}function W8(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,i=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:nG(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," of input shaped ").concat(JSON.stringify(a),", but got dimension ").concat(a[n])}))},o=0;o<t[e].length;++o)i(o)},i=0;i<n.length;++i)a(i)}function V8(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var i=0;i<n;++i)a.push([]);for(var o=[],s=0;s<r.length;++s){var u,c=Oo(U8(t,r[s]));try{for(c.s();!(u=c.n()).done;){var l=u.value;-1===o.indexOf(l)&&(a[s].push(l),o.push(l))}}catch(cBe){c.e(cBe)}finally{c.f()}}return{path:r,steps:a}}function j8(e){return e.every((function(e,t){return e===t}))}function U8(e,t){for(var n=[],r=0;r<e.length;++r)(0===e[r].length||-1!==e[r].indexOf(t)||-1===t)&&n.push(r);return n}function H8(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"==typeof t)nG(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);nG(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}nG(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function Z8(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function G8(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function q8(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function K8(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function X8(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function Y8(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function $8(e,t){var n=oG(e),r=oG(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function Q8(e,t){var n=oG(e),r=oG(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function J8(){return"segment ids must be >= 0"}function e7(){return"segment ids are not increasing"}function t7(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function n7(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}var r7={};function a7(e,t){var n,r=!1;for(e<=h8?(n=e,r=!0):n=RG(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=RG(e,n+1);return n}function i7(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}function o7(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],c=1,l=1,f=1,h=0;h<r;++h)u.push(e.shape[h]),c*=e.shape[h];for(var p=r;p<n;p++)u.push(e.shape[p]),l*=e.shape[p];for(var d=r;d<a;d++)u.push(t.shape[d]);for(var m=n+1;m<i;m++)u.push(e.shape[m]),f*=e.shape[m];return{batchSize:c,sliceSize:f,outerSize:l,dimSize:s,outputShape:u}}function s7(e){try{return e.map((function(e){return GY(e)}))}catch(t){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(t))}}function u7(e){return e.map((function(e){return ZY(e)}))}kZ(r7,{collectGatherOpShapeInfo:function(){return o7},computeOutShape:function(){return i7},segOpComputeOptimalWindowSize:function(){return a7}});var c7={};kZ(c7,{nonMaxSuppressionV3Impl:function(){return Y5},nonMaxSuppressionV4Impl:function(){return $5},nonMaxSuppressionV5Impl:function(){return Q5},whereImpl:function(){return h5}});var l7={kernelName:$G,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return l1(e,$4(tJ(n,"float32"),-1))}}}},f7={kernelName:QG,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){var t=q2(tJ(n,"float32")),r=G2(I3(Z2(1),t));return JJ(c1(e,r))}}}},h7={kernelName:JG,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){var t=G2(I3(q2(tJ(n,"float32")),1));return c1(e,t)}}}},p7={kernelName:eq,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,T.Z)(t,2),r=n[0],a=n[1],i=o0(r.shape,a.shape);return{a:function(){var t=e,n=i0(r.shape,i);return n.length>0&&(t=K2(t,n)),W1(t,r.shape)},b:function(){var t=e,n=i0(a.shape,i);return n.length>0&&(t=K2(t,n)),W1(t,a.shape)}}}},d7={kernelName:tq,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},m7={kernelName:aq,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return C2(n)}}}},v7={kernelName:iq,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return C2(n)}}}},g7={kernelName:oq,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return c1(e,G2(I3(Z2(1),q2(tJ(n,"float32")))))}}}},y7={kernelName:sq,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){var t=G2(s1(Z2(1),q2(tJ(n,"float32"))));return c1(e,t)}}}},b7={kernelName:lq,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,T.Z)(t,2),r=n[0],a=n[1],i=o0(r.shape,a.shape);return{a:function(){var t=s1(q2(r),q2(a)),n=l1(e,c1(a,t)),o=i0(r.shape,i);return o.length>0&&(n=K2(n,o)),W1(n,r.shape)},b:function(){var t=s1(q2(r),q2(a)),n=JJ(l1(e,c1(r,t))),o=i0(a.shape,i);return o.length>0&&(n=K2(n,o)),W1(n,a.shape)}}}},x7={kernelName:uq,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return c1(e,s1(q2(tJ(n,"float32")),1))}}}},w7={kernelName:cq,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return c1(e,I3(Z2(1),q2(tJ(n,"float32"))))}}}};var k7=V$({avgPool3dGrad_:function(e,t,n,r,a,i){var o=z$(e,"dy","avgPool3dGrad"),s=z$(t,"input","avgPool3dGrad"),u=o,c=s,l=!1;4===s.rank&&(l=!0,u=W1(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=W1(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),nG(5===u.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank ".concat(u.rank,".")})),nG(5===c.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank ".concat(c.rank,".")})),B1("avgPool3dGrad",a,i);var f={dy:u,input:c},h={filterSize:n,strides:r,pad:a,dimRoundingMode:i},p=N$.runKernel(dq,f,h);return l?W1(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),S7={kernelName:pq,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,T.Z)(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad,s=n.dimRoundingMode;return{x:function(){return k7(e,r,a,i,o,s)}}}};var _7=V$({avgPoolGrad_:function(e,t,n,r,a){var i=z$(e,"dy","avgPoolGrad"),o=z$(t,"input","avgPoolGrad");nG(o.rank===i.rank,(function(){return"Rank of input (".concat(o.rank,") does not match rank of dy (").concat(i.rank,")")}));var s=o,u=i,c=!1;3===o.rank&&(c=!0,s=W1(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=W1(i,[1,i.shape[0],i.shape[1],i.shape[2]])),nG(4===u.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank ".concat(u.rank,".")})),nG(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank ".concat(s.rank,".")}));var l={dy:u,input:s},f={filterSize:n,strides:r,pad:a},h=N$.runKernel(hq,l,f);return c?W1(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),T7={kernelName:fq,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,T.Z)(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad;return{x:function(){return _7(e,r,a,i,o)}}}},I7={kernelName:mq,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=(0,T.Z)(t,2),a=r[0],i=r[1],o=n.transposeA,s=n.transposeB;return o||s?!o&&s?{a:function(){return EJ(e,i,!1,!1)},b:function(){return EJ(e,a,!0,!1)}}:o&&!s?{a:function(){return EJ(i,e,!1,!0)},b:function(){return EJ(a,e,!1,!1)}}:{a:function(){return EJ(i,e,!0,!0)},b:function(){return EJ(e,a,!0,!0)}}:{a:function(){return EJ(e,i,!1,!0)},b:function(){return EJ(a,e,!0,!1)}}}},N7={kernelName:vq,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return a4(e,r,a)}}}},C7={kernelName:yq,gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,i=r.shape,o=Array.from(i),s=a.length-1;s>=0;s--)if(a[s]===i[s])o[s]=1;else if(1!==a[s])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));for(var u=[],c=0;c<o.length;c++)o[c]>1&&u.push(c);return{x:function(){return K2(e,u,!0)}}}},E7={kernelName:xq,gradFunc:function(e){return{x:function(){return e.clone()}}}},A7={kernelName:wq,gradFunc:function(e){return{x:function(){return C2(e)}}}},R7={kernelName:kq,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,T.Z)(t,1)[0],a=n.clipValueMin,i=n.clipValueMax;return{x:function(){return N2(E3(o3(r,a),h3(r,i)),e,C2(e))}}}},O7={kernelName:_q,inputsToSave:["x"],gradFunc:l7.gradFunc},M7={kernelName:Tq,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=vG(n.axis,t[0].shape)[0],i=r.map((function(e){return e[a]}));return G4(e,i,a).map((function(e){return function(){return e}}))}},D7={kernelName:Iq,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,T.Z)(t,2),a=r[0],i=r[1],o=n.dilations,s=n.strides,u=n.pad,c=n.dataFormat;return nG(P1(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(o,"'")})),{x:function(){return h2(a.shape,e,i,s,u,c)},filter:function(){return C5(a,e,i.shape,s,u,c)}}}},F7={kernelName:Cq,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=(0,T.Z)(t,2),a=r[0],i=r[1],o=n.strides,s=n.pad,u=n.dataFormat,c=n.dimRoundingMode;return{dy:function(){return l2(e,i,o,s,u,1,c)},filter:function(){return C5(e,a,i.shape,o,s,u,c)}}}};var P7=V$({conv3DBackpropFilter_:function(e,t,n,r,a){var i=e;4===e.rank&&(i=W1(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var o=t;4===o.rank&&(o=W1(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),nG(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape ".concat(i.shape,".")})),nG(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape ".concat(o.shape,".")})),nG(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got ".concat(n,".")})),nG(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must match input depth in filter (").concat(n[3],".")})),nG(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(o.shape[4],") must match output depth for filter (").concat(n[4],").")}));var s={x:i,dy:o},u={strides:r,pad:a,filterShape:n};return N$.runKernel(Aq,s,u)}}),L7={kernelName:Eq,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad;nG(P1(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(r,"'")}));var o=(0,T.Z)(t,2),s=o[0],u=o[1];return{x:function(){return m2(s.shape,e,u,a,i)},filter:function(){return P7(s,e,u.shape,a,i)}}}},z7={kernelName:Oq,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return l1(JJ(P4(tJ(n,"float32"))),e)}}}},B7={kernelName:Mq,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return l1(L4(tJ(n,"float32")),e)}}}},W7={kernelName:Fq,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,T.Z)(t,1)[0],a=n.axis,i=n.exclusive,o=n.reverse;return{x:function(){var t=B2([a],r.rank),n=x2(e,a,i,!o);return null!=t&&(n=t0(n,t)),n}}}},V7={kernelName:Bq,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad,o=n.dimRoundingMode,s=null==r?[1,1]:r;nG(P1(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '".concat(s,"'")}));var u=(0,T.Z)(t,2),c=u[0],l=u[1];return nG(4===c.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ".concat(c.rank,".")})),nG(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ".concat(l.rank,".")})),nG(c.shape[3]===l.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input channels (".concat(c.shape[3],") must match the inChannels dimension in filter ").concat(l.shape[2],".")})),nG(L1(a,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ".concat(a," and dilations '").concat(s,"'.")})),B1("depthwiseConv2d",i,o),{x:function(){return F5(c.shape,e,l,a,i,s,o)},filter:function(){return D5(c,e,l.shape,a,i,s,o)}}}},j7={kernelName:Uq,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,T.Z)(t,2),a=r[0],i=r[1],o={x:a,filter:i,dy:e},s={x:a,filter:i,dy:e};return{x:function(){return N$.runKernel(Hq,o,n)},filter:function(){return N$.runKernel(Zq,s,n)}}}},U7={kernelName:Kq,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:(0,T.Z)(t,1)[0]};return{x:function(){return N$.runKernel(Xq,n)}}}},H7={kernelName:Yq,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0],r=l1(Q2(JJ(q2(n))),2/Math.sqrt(Math.PI));return{x:function(){return l1(e,r)}}}},Z7={kernelName:Qq,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return l1(e,n)}}}},G7={kernelName:Jq,inputsToSave:["input"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{input:function(){return W1(e,n.shape)}}}},q7={kernelName:eK,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return l1(e,Q2(n))}}}},K7={kernelName:aK,gradFunc:function(e){return{x:function(){return C2(e)}}}},X7={kernelName:iK,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,T.Z)(t,2),r=n[0],a=n[1],i=o0(r.shape,a.shape);return{a:function(){var t=c1(e,tJ(a,"float32")),n=i0(r.shape,i);return n.length>0?W1(K2(t,n),r.shape):t},b:function(){var t=l1(e,tJ(r,"float32")),n=i0(a.shape,i);n.length>0&&(t=W1(K2(t,n),a.shape));var o=q2(a);return JJ(c1(t,tJ(o,"float32")))}}}},Y7={kernelName:oK,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=(0,T.Z)(t,4),i=a[0],o=a[1],s=a[2],u=a[3],c=null==u?Z2(1):u,l=i0(o.shape,i.shape),f=[];if(1===o.rank){for(var h=0;h<i.shape.length-1;++h)f.push(i.shape[h]);f.push(1)}var p=I3(i,o),d=l1(e,c),m=A4(s1(s,Z2(r))),v=l1(l1(l1(m,m),m),Z2(-.5));return{x:function(){return 1===o.rank?W1(l1(l1(e,t3(W1(m,[1,1,1,o.shape[0]]),f)),c),i.shape):W1(l1(l1(e,m),c),i.shape)},mean:function(){var e=l1(l1(m,Z2(-1)),d);return 1===o.rank&&(e=K2(e,l)),W1(e,o.shape)},variance:function(){var e=l1(l1(v,p),d);return 1===o.rank&&(e=K2(e,l)),W1(e,o.shape)},scale:function(){var t=l1(p,m),n=l1(e,t);return 1===o.rank&&(n=K2(n,l)),W1(n,o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=K2(t,l)),W1(t,o.shape)}}}},$7={kernelName:sK,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=(0,T.Z)(t,2),a=r[0],i=r[1],o=n.axis,s=vG(o,a.shape)[0];return{x:function(){var t=a.shape,n=i.size,r=t.slice(0,s),u=r.length,c=t.slice(o,t.length).slice(1),l=c.length,f=Q7(0,u),h=Q7(u+1,u+1+l),p=J7([r,[n],c]),d=W1(e,p),m=W1(i,[n]),v=J7([[u],f,h]),g=t0(d,v),y=u5(g,m,a.shape[s]),b=W2(v);return y=t0(y,b)},indices:function(){return i}}}};function Q7(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function J7(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var e9={kernelName:lK,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,T.Z)(t,2),r=n[0],a=n[1];return{a:function(){return C2(r)},b:function(){return C2(a)}}}},t9={kernelName:fK,gradFunc:function(e){return{x:function(){return tJ(e,"float32")}}}},n9={kernelName:dK,gradFunc:function(e){return{x:function(){return C2(e)}}}},r9={kernelName:mK,gradFunc:function(e){return{x:function(){return C2(e)}}}},a9={kernelName:vK,gradFunc:function(e){return{x:function(){return C2(e)}}}},i9={kernelName:gK,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,T.Z)(t,1)[0],a=n.alpha,i=i3(r,0);return{x:function(){return N2(i,e,l1(e,a))}}}},o9={kernelName:kK,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return c1(e,s1(n,1))}}}},s9={kernelName:wK,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return c1(e,tJ(n,"float32"))}}}},u9={kernelName:NK,inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,T.Z)(t,1)[0],a=n.axis;return{logits:function(){var t=Q2(r);return I3(e,l1(K2(e,a,!0),t))}}}};var c9=V$({localResponseNormalizationBackprop_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,s={x:e,y:t,dy:n},u={depthRadius:r,bias:a,alpha:i,beta:o};return N$.runKernel(AK,s,u)}}),l9={kernelName:EK,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,T.Z)(t,2),a=r[0],i=r[1],o=n.depthRadius,s=n.bias,u=n.alpha,c=n.beta;return{x:function(){return c9(a,i,e,o,s,u,c)}}}};function f9(e,t,n,r){return t.rank<n.rank&&(t=W1(t,L2(t.shape,r))),e.rank<n.rank&&(e=W1(e,L2(e.shape,r))),{x:function(){return l1(e,tJ(I2(n,t),e.dtype))}}}var h9={kernelName:RK,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],i=f9(e,t[1],a,vG(r,a.shape));return{x:function(){return i.x()}}}},p9={kernelName:OK,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,T.Z)(t,2),r=n[0],a=n[1];return{a:function(){return l1(e,tJ(o3(r,a),"float32"))},b:function(){return l1(e,tJ(f3(r,a),"float32"))}}}};var d9=V$({maxPool3dGrad_:function(e,t,n,r,a,i,o){var s=z$(e,"dy","maxPool3dGrad"),u=z$(t,"input","maxPool3dGrad"),c=z$(n,"output","maxPool3dGrad"),l=s,f=u,h=c,p=!1;4===u.rank&&(p=!0,l=W1(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),f=W1(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),h=W1(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),nG(5===l.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank ".concat(l.rank,".")})),nG(5===f.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank ".concat(f.rank,".")})),nG(5===h.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank ".concat(h.rank,".")})),B1("maxPool3dGrad",i,o);var d={dy:l,input:f,output:h},m={filterSize:r,strides:a,pad:i,dimRoundingMode:o},v=N$.runKernel(PK,d,m);return p?W1(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}}),m9={kernelName:FK,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,T.Z)(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode;return{x:function(){return d9(e,a,i,o,s,u,c)}}}};var v9=V$({maxPoolGrad_:function(e,t,n,r,a,i,o){var s=z$(e,"dy","maxPoolGrad"),u=z$(t,"input","maxPoolGrad"),c=z$(n,"output","maxPoolGrad");nG(u.rank===s.rank,(function(){return"Rank of input (".concat(u.rank,") does not match rank of dy (").concat(s.rank,")")})),nG(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank ".concat(s.rank,".")})),nG(4===u.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank ".concat(u.rank,".")})),B1("maxPoolGrad",i,o);var l={dy:s,input:u,output:c},f={filterSize:r,strides:a,pad:i,dimRoundingMode:o};return N$.runKernel(DK,l,f)}}),g9={kernelName:MK,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,T.Z)(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad;return{x:function(){return v9(e,a,i,o,s,u)}}}},y9={kernelName:zK,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,T.Z)(t,1)[0],a=vG(n.axis,r.shape),i=oG(P2(r.shape,a)[1]);return{x:function(){var t=r.shape.slice();a.forEach((function(e){t[e]=1}));var n=W1(e,t);return c1(l1(n,j3(r.shape,"float32")),i)}}}},b9={kernelName:BK,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=(0,T.Z)(t,2),i=a[0],o=f9(e,a[1],i,vG(r,i.shape));return{x:function(){return o.x()}}}},x9={kernelName:WK,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,T.Z)(t,2),r=n[0],a=n[1];return{a:function(){return l1(e,tJ(h3(r,a),"float32"))},b:function(){return l1(e,tJ(i3(r,a),"float32"))}}}},w9={kernelName:VK,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Z1(e,a,r.shape)}}}},k9={kernelName:jK,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,T.Z)(t,2),r=n[0],a=n[1],i=o0(r.shape,a.shape);return{a:function(){var t=i0(r.shape,i);return t.length>0?W1(K2(e,t),r.shape):e},b:function(){var t=l1(e,JJ(r3(c1(r,a)))),n=i0(a.shape,i);return n.length>0?W1(K2(t,n),a.shape):t}}}},S9={kernelName:HK,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,T.Z)(t,2),r=n[0],a=n[1],i=o0(r.shape,a.shape);return{a:function(){var t=l1(e,tJ(a,"float32")),n=i0(r.shape,i);return n.length>0?W1(K2(t,n),r.shape):t},b:function(){var t=l1(e,tJ(r,"float32")),n=i0(a.shape,i);return n.length>0?W1(K2(t,n),a.shape):t}}}},_9={kernelName:ZK,gradFunc:function(e){return{x:function(){return JJ(e)}}}},T9={kernelName:$K,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return V3(n.shape,"float32")}}}},I9={kernelName:YK,gradFunc:function(e){return{x:function(){return C2(e)}}}},N9={kernelName:QK,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return c5(e,r).map((function(e){return function(){return e}}))}},C9={kernelName:JK,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Z1(e,a,r.shape)}}}},E9={kernelName:tX,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=(0,T.Z)(t,3),r=n[0],a=n[1],i=n[2],o=r,s=a,u=o0(o.shape,s.shape);return{a:function(){var t=tJ(s,"float32"),n=l1(e,l1(t,H2(o,I3(t,Z2(1))))),r=i0(o.shape,u);return r.length>0&&(n=K2(n,r)),W1(n,o.shape)},b:function(){var t=i3(o,0),n=N2(t,m3(o),C2(o)),r=l1(e,l1(i,n)),a=i0(s.shape,u);return a.length>0&&(r=K2(r,a)),W1(r,s.shape)}}}},A9={kernelName:nX,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=(0,T.Z)(t,2),r=n[0],a=n[1],i=i3(r,0);return{x:function(){return N2(i,e,l1(e,a))},alpha:function(){var t=N2(i,C2(e),l1(e,r)),n=i0(a.shape,e.shape);return n.length>0&&(t=K2(t,n)),W1(t,a.shape)}}}};function R9(e,t,n){var r=e.shape.length,a=r-n.length,i=i8.getAxesPermutation(n,r),o=e;null!=i&&(o=t0(e,i));var s=o.shape.slice(),u=s.splice(r-n.length,n.length).reduce((function(e,t){return e*t}),1);s.push(u);var c=function(e,t,n){var r=e.shape.slice();r[n]=1;var a=W1(t,r),i=b2(e,n,!0,!1),o=b2(e,n,!0,!0),s=l1(i,o);return l1(a,s)}(o.reshape(s),t,a);if(c=c.reshape(o.shape),null!=i){var l=i8.getUndoAxesPermutation(i);c=t0(c,l)}return c}var O9={kernelName:rX,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,T.Z)(t,1)[0],a=n.axis,i=[];return i=null==a?r.shape.map((function(e,t){return t})):"number"==typeof a?[a]:a,{x:function(){return R9(r,e,i)}}}},M9={kernelName:Gq,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,T.Z)(t,2),r=n[0],a=n[1],i=o0(r.shape,a.shape);return{a:function(){var t=c1(e,tJ(a,"float32")),n=i0(r.shape,i);return n.length>0?W1(K2(t,n),r.shape):t},b:function(){var t=l1(e,tJ(r,"float32")),n=i0(a.shape,i);n.length>0&&(t=W1(K2(t,n),a.shape));var o=q2(a);return JJ(c1(t,tJ(o,"float32")))}}}},D9={kernelName:cX,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return c1(e,JJ(q2(n)))}}}},F9={kernelName:vX,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0],r=l1(h3(n,6),$4(n));return{x:function(){return l1(e,tJ(r,"float32"))}}}},P9={kernelName:lX,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return l1(e,tJ($4(n),"float32"))}}}},L9={kernelName:fX,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return W1(e,n.shape)}}}},z9={kernelName:dX,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,T.Z)(t,1)[0]};return{images:function(){return N$.runKernel(mX,r,n)}}}},B9={kernelName:hX,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,T.Z)(t,1)[0]};return{images:function(){return N$.runKernel(pX,r,n)}}}},W9={kernelName:gX,gradFunc:function(e,t,n){var r=vG(n.dims,e.shape);return{x:function(){return _4(e,r)}}}},V9={kernelName:yX,gradFunc:function(e){return{x:function(){return C2(e)}}}},j9={kernelName:bX,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return JJ(c1(e,l1(H2(n,1.5),2)))}}}},U9={kernelName:kX,inputsToSave:["condition"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{condition:function(){return tJ(C2(n),"float32")},t:function(){return l1(e,tJ(n,e.dtype))},e:function(){return l1(e,tJ(A3(n),e.dtype))}}}},H9={kernelName:SX,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){var t=i3(n,Z2(0)),r=Z2(x8),a=Z2(w8),i=l1(e,a),o=l1(l1(e,r),Q2(tJ(n,"float32")));return N2(t,i,o)}}}},Z9={kernelName:CX,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return l1(e,l1(n,I3(Z2(1),n)))}}}},G9={kernelName:NX,gradFunc:function(e){return{x:function(){return C2(e)}}}},q9={kernelName:TX,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return l1(g2(tJ(n,"float32")),e)}}}},K9={kernelName:IX,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return l1(y2(tJ(n,"float32")),e)}}}},X9={kernelName:_X,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=(0,T.Z)(t,1)[0],a=n.begin,i=n.size,o=r.shape,s=z0(r,a,i),u=(0,T.Z)(s,2),c=u[0],l=u[1],f=[],h=0;h<e.rank;h++)f.push([c[h],o[h]-c[h]-l[h]]);return{x:function(){return J3(e,f)}}}},Y9={kernelName:DX,outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,T.Z)(t,1)[0],a=n.dim,i=l1(e,r);return{logits:function(){return I3(i,l1(K2(i,[a],true),r))}}}},$9={kernelName:EX,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return l1(e,H1(n))}}}},Q9={kernelName:OX,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return K1(e,r,a)}}}},J9={kernelName:MX,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return U1(e,r)}}}},eee={kernelName:AX,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return c1(e,l1(G2(tJ(n,"float32")),2))}}}},tee={kernelName:VX,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return l1(e,l1(tJ(n,"float32"),2))}}}},nee={kernelName:WX,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,T.Z)(t,2),r=n[0],a=n[1],i=Z2(2);return{a:function(){return l1(e,l1(i,I3(r,a)))},b:function(){return l1(e,l1(i,I3(a,r)))}}}},ree={kernelName:aY,gradFunc:function(e){return{x:function(){return C2(e)}}}},aee={kernelName:GX,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,T.Z)(t,2),r=n[0],a=n[1],i=o0(r.shape,a.shape);return{a:function(){var t=e,n=i0(r.shape,i);return n.length>0&&(t=K2(t,n)),W1(t,r.shape)},b:function(){var t=e,n=i0(a.shape,i);return n.length>0&&(t=K2(t,n)),W1(JJ(t),a.shape)}}}},iee={kernelName:RX,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,T.Z)(t,1)[0],a=r.shape.slice();vG(n.axis,r.shape).forEach((function(e){a[e]=1}));var i=W1(e,a),o=l1(i,j3(r.shape,"float32"));return{x:function(){return o}}}},oee={kernelName:qX,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return c1(e,q2(g2(n)))}}}},see={kernelName:KX,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return l1(I3(Z2(1),q2(n)),e)}}}},uee={kernelName:XX,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,T.Z)(t,1)[0],a=n.reps;return{x:function(){var t=C2(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=s1(t,Z1(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var i=0;i<a[0];++i)for(var o=0;o<a[1];++o)t=s1(t,Z1(e,[i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var s=0;s<a[0];++s)for(var u=0;u<a[1];++u)for(var c=0;c<a[2];++c)t=s1(t,Z1(e,[s*r.shape[0],u*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-".concat(r.rank," tensors yet."));for(var l=0;l<a[0];++l)for(var f=0;f<a[1];++f)for(var h=0;h<a[2];++h)for(var p=0;p<a[3];++p)t=s1(t,Z1(e,[l*r.shape[0],f*r.shape[1],h*r.shape[2],p*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},cee={kernelName:QX,gradFunc:function(e,t,n){var r=W2(n.perm);return{x:function(){return t0(e,r)}}}},lee={kernelName:eY,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return Y4(e,r)}}}},fee={kernelName:tY,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=(0,T.Z)(t,1)[0];return{x:function(){return function(e,t){for(var n=B3(t,C2(t)),r=a3(e,n),a=o3(t,Z2(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=J2(a,o+1);a=E3(a,j3(r.shape,"bool"));var s=C2(r);return N2(a,r,s)}(e,n)}}}};for(var hee={kernelName:rY,gradFunc:function(e){return{x:function(){return C2(e)}}}},pee=0,dee=[l7,f7,h7,p7,d7,m7,v7,g7,y7,b7,x7,w7,S7,T7,I7,N7,C7,E7,A7,R7,O7,M7,F7,D7,L7,z7,B7,W7,V7,j7,M9,U7,H7,Z7,G7,q7,X7,K7,Y7,$7,e9,t9,n9,r9,a9,i9,o9,s9,u9,l9,h9,h9,p9,m9,g9,y9,b9,x9,w9,k9,S9,_9,T9,I9,N9,C9,C9,E9,A9,O9,D9,F9,P9,L9,z9,B9,W9,V9,j9,U9,H9,Z9,G9,q9,K9,X9,Y9,$9,Q9,Q9,J9,J9,eee,nee,tee,ree,aee,iee,oee,see,uee,cee,lee,fee,hee];pee<dee.length;pee++){yY(dee[pee])}o$().prototype.abs=function(){return this.throwIfDisposed(),f1(this)},o$().prototype.acos=function(){return this.throwIfDisposed(),h1(this)},o$().prototype.acosh=function(){return this.throwIfDisposed(),p1(this)},o$().prototype.add=function(e){return this.throwIfDisposed(),s1(this,e)},o$().prototype.all=function(e,t){return this.throwIfDisposed(),m1(this,e,t)},o$().prototype.any=function(e,t){return this.throwIfDisposed(),v1(this,e,t)},o$().prototype.argMax=function(e){return this.throwIfDisposed(),g1(this,e)},o$().prototype.argMin=function(e){return this.throwIfDisposed(),y1(this,e)},o$().prototype.asScalar=function(){return this.throwIfDisposed(),nG(1===this.size,(function(){return"The array must have only 1 element."})),W1(this,[])},o$().prototype.asType=function(e){return this.throwIfDisposed(),tJ(this,e)},o$().prototype.as1D=function(){return this.throwIfDisposed(),W1(this,[this.size])},o$().prototype.as2D=function(e,t){return this.throwIfDisposed(),W1(this,[e,t])},o$().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),W1(this,[e,t,n])},o$().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),W1(this,[e,t,n,r])},o$().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),W1(this,[e,t,n,r,a])},o$().prototype.asin=function(){return this.throwIfDisposed(),b1(this)},o$().prototype.asinh=function(){return this.throwIfDisposed(),x1(this)},o$().prototype.atan=function(){return this.throwIfDisposed(),w1(this)},o$().prototype.atan2=function(e){return this.throwIfDisposed(),k1(this,e)},o$().prototype.atanh=function(){return this.throwIfDisposed(),S1(this)},o$().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),V1(this,e,t,n,r)},o$().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),K1(this,e,t)},o$().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),Y1(this,e,t,n,r,a)},o$().prototype.broadcastTo=function(e){return this.throwIfDisposed(),n2(this,e)},o$().prototype.cast=function(e){return this.throwIfDisposed(),tJ(this,e)},o$().prototype.ceil=function(){return this.throwIfDisposed(),r2(this)},o$().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),i2(this,e,t)},o$().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof i$&&(e=[e]),U1([this].concat((0,I.Z)(e)),t)},o$().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),f2(this,e,t,n,r,a,i)},o$().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),p2(this,e,t,n,r,a)},o$().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),l2(this,e,t,n,r,a,i)},o$().prototype.cos=function(){return this.throwIfDisposed(),g2(this)},o$().prototype.cosh=function(){return this.throwIfDisposed(),y2(this)},o$().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),b2(this,e,t,n)},o$().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),x2(this,e,t,n)},o$().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),k2(this,e,t)},o$().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),S2(this,e,t,n,r,a,i)},o$().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),T2(this,e,t,n,r,a)},o$().prototype.divNoNan=function(e){return this.throwIfDisposed(),E2(this,e)},o$().prototype.div=function(e){return this.throwIfDisposed(),c1(this,e)},o$().prototype.dot=function(e){return this.throwIfDisposed(),A2(this,e)},o$().prototype.elu=function(){return this.throwIfDisposed(),O2(this)},o$().prototype.equal=function(e){return this.throwIfDisposed(),I2(this,e)},o$().prototype.erf=function(){return this.throwIfDisposed(),M2(this)},o$().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),$2(this,e,t)},o$().prototype.exp=function(){return this.throwIfDisposed(),Q2(this)},o$().prototype.expandDims=function(e){return this.throwIfDisposed(),J2(this,e)},o$().prototype.expm1=function(){return this.throwIfDisposed(),e3(this)},o$().prototype.fft=function(){return this.throwIfDisposed(),U4(this)},o$().prototype.flatten=function(){return this.throwIfDisposed(),W1(this,[this.size])},o$().prototype.floor=function(){return this.throwIfDisposed(),r3(this)},o$().prototype.floorDiv=function(e){return this.throwIfDisposed(),u1(this,e)},o$().prototype.gather=function(e,t){return this.throwIfDisposed(),a3(this,e,t)},o$().prototype.greaterEqual=function(e){return this.throwIfDisposed(),o3(this,e)},o$().prototype.greater=function(e){return this.throwIfDisposed(),i3(this,e)},o$().prototype.ifft=function(){return this.throwIfDisposed(),H4(this)},o$().prototype.irfft=function(){return this.throwIfDisposed(),Z4(this)},o$().prototype.isFinite=function(){return this.throwIfDisposed(),s3(this)},o$().prototype.isInf=function(){return this.throwIfDisposed(),u3(this)},o$().prototype.isNaN=function(){return this.throwIfDisposed(),c3(this)},o$().prototype.leakyRelu=function(e){return this.throwIfDisposed(),l3(this,e)},o$().prototype.lessEqual=function(e){return this.throwIfDisposed(),h3(this,e)},o$().prototype.less=function(e){return this.throwIfDisposed(),f3(this,e)},o$().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),d3(this,e,t,n,r)},o$().prototype.logSigmoid=function(){return this.throwIfDisposed(),T3(this)},o$().prototype.logSoftmax=function(e){return this.throwIfDisposed(),N3(this,e)},o$().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),C3(this,e,t)},o$().prototype.log=function(){return this.throwIfDisposed(),m3(this)},o$().prototype.log1p=function(){return this.throwIfDisposed(),v3(this)},o$().prototype.logicalAnd=function(e){return this.throwIfDisposed(),E3(this,e)},o$().prototype.logicalNot=function(){return this.throwIfDisposed(),A3(this)},o$().prototype.logicalOr=function(e){return this.throwIfDisposed(),R3(this,e)},o$().prototype.logicalXor=function(e){return this.throwIfDisposed(),O3(this,e)},o$().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),EJ(this,e,t,n)},o$().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),P3(this,e,t,n,r)},o$().prototype.max=function(e,t){return this.throwIfDisposed(),j2(this,e,t)},o$().prototype.maximum=function(e){return this.throwIfDisposed(),B3(this,e)},o$().prototype.mean=function(e,t){return this.throwIfDisposed(),W3(this,e,t)},o$().prototype.min=function(e,t){return this.throwIfDisposed(),U2(this,e,t)},o$().prototype.minimum=function(e){return this.throwIfDisposed(),H3(this,e)},o$().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),Z3(this,e,t)},o$().prototype.mod=function(e){return this.throwIfDisposed(),G3(this,e)},o$().prototype.mul=function(e){return this.throwIfDisposed(),l1(this,e)},o$().prototype.neg=function(){return this.throwIfDisposed(),JJ(this)},o$().prototype.norm=function(e,t,n){return this.throwIfDisposed(),Y2(this,e,t,n)},o$().prototype.notEqual=function(e){return this.throwIfDisposed(),Y3(this,e)},o$().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),AJ(this,e,t,n)},o$().prototype.onesLike=function(){return this.throwIfDisposed(),$3(this)},o$().prototype.pad=function(e,t){return this.throwIfDisposed(),J3(this,e,t)},o$().prototype.pool=function(e,t,n,r,a,i){return this.throwIfDisposed(),i4(this,e,t,n,r,a,i)},o$().prototype.pow=function(e){return this.throwIfDisposed(),H2(this,e)},o$().prototype.prelu=function(e){return this.throwIfDisposed(),o4(this,e)},o$().prototype.prod=function(e,t){return this.throwIfDisposed(),s4(this,e,t)},o$().prototype.reciprocal=function(){return this.throwIfDisposed(),w4(this)},o$().prototype.relu=function(){return this.throwIfDisposed(),k4(this)},o$().prototype.relu6=function(){return this.throwIfDisposed(),S4(this)},o$().prototype.reshapeAs=function(e){return this.throwIfDisposed(),W1(this,e.shape)},o$().prototype.reshape=function(e){return this.throwIfDisposed(),W1(this,e)},o$().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),f6(this,e,t,n)},o$().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),h6(this,e,t,n)},o$().prototype.reverse=function(e){return this.throwIfDisposed(),_4(this,e)},o$().prototype.rfft=function(){return this.throwIfDisposed(),q4(this)},o$().prototype.round=function(){return this.throwIfDisposed(),E4(this)},o$().prototype.rsqrt=function(){return this.throwIfDisposed(),A4(this)},o$().prototype.selu=function(){return this.throwIfDisposed(),R4(this)},o$().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),O4(this,e,t,n,r,a,i)},o$().prototype.sigmoid=function(){return this.throwIfDisposed(),H1(this)},o$().prototype.sign=function(){return this.throwIfDisposed(),F4(this)},o$().prototype.sin=function(){return this.throwIfDisposed(),P4(this)},o$().prototype.sinh=function(){return this.throwIfDisposed(),L4(this)},o$().prototype.slice=function(e,t){return this.throwIfDisposed(),Z1(this,e,t)},o$().prototype.softmax=function(e){return this.throwIfDisposed(),j4(this,e)},o$().prototype.softplus=function(){return this.throwIfDisposed(),_3(this)},o$().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),a4(this,e,t)},o$().prototype.split=function(e,t){return this.throwIfDisposed(),G4(this,e,t)},o$().prototype.sqrt=function(){return this.throwIfDisposed(),G2(this)},o$().prototype.square=function(){return this.throwIfDisposed(),q2(this)},o$().prototype.squaredDifference=function(e){return this.throwIfDisposed(),K4(this,e)},o$().prototype.squeeze=function(e){return this.throwIfDisposed(),X4(this,e)},o$().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof i$?[this,e]:[this].concat((0,I.Z)(e));return Y4(n,t)},o$().prototype.step=function(e){return this.throwIfDisposed(),$4(this,e)},o$().prototype.stridedSlice=function(e,t,n,r,a,i,o,s){return this.throwIfDisposed(),Q4(this,e,t,n,r,a,i,o,s)},o$().prototype.sub=function(e){return this.throwIfDisposed(),I3(this,e)},o$().prototype.sum=function(e,t){return this.throwIfDisposed(),K2(this,e,t)},o$().prototype.tan=function(){return this.throwIfDisposed(),J4(this)},o$().prototype.tanh=function(){return this.throwIfDisposed(),G1(this)},o$().prototype.tile=function(e){return this.throwIfDisposed(),t3(this,e)},o$().prototype.toBool=function(){return this.throwIfDisposed(),tJ(this,"bool")},o$().prototype.toFloat=function(){return this.throwIfDisposed(),tJ(this,"float32")},o$().prototype.toInt=function(){return this.throwIfDisposed(),tJ(this,"int32")},o$().prototype.topk=function(e,t){return this.throwIfDisposed(),i5(this,e,t)},o$().prototype.transpose=function(e){return this.throwIfDisposed(),t0(this,e)},o$().prototype.unique=function(e){return this.throwIfDisposed(),s5(this,e)},o$().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),u5(this,e,t)},o$().prototype.unstack=function(e){return this.throwIfDisposed(),c5(this,e)},o$().prototype.where=function(e,t){return this.throwIfDisposed(),N2(e,this,t)},o$().prototype.zerosLike=function(){return this.throwIfDisposed(),C2(this)};var mee=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),r=t.call(this,e),Object.setPrototypeOf((0,F.Z)(r),n.prototype),r}return(0,C.Z)(n)}(B(Error)),vee=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),r=t.call(this,e),Object.setPrototypeOf((0,F.Z)(r),n.prototype),r}return(0,C.Z)(n)}(B(Error)),gee=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),r=t.call(this,e),Object.setPrototypeOf((0,F.Z)(r),n.prototype),r}return(0,C.Z)(n)}(B(Error)),yee=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),r=t.call(this,e),Object.setPrototypeOf((0,F.Z)(r),n.prototype),r}return(0,C.Z)(n)}(B(Error)),bee=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),r=t.call(this,e),Object.setPrototypeOf((0,F.Z)(r),n.prototype),r}return(0,C.Z)(n)}(B(Error)),xee=function(){function e(t){N(this,e),this.maxEntries=t||100,this.cache=new Map}return(0,C.Z)(e,[{key:"get",value:function(e){var t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}},{key:"put",value:function(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}},{key:"getMaxEntries",value:function(){return this.maxEntries}},{key:"setMaxEntries",value:function(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(var t=0;t<this.maxEntries-e;t++){var n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=e}}]),e}();function wee(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function kee(e,t){if(!e)throw new bee(t)}function See(e,t){var n,r=0,a=Oo(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(cBe){a.e(cBe)}finally{a.f()}return r}function _ee(e){return 1===e.length?e[0]:e}function Tee(e){return Array.isArray(e)?e:[e]}function Iee(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function Nee(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var Cee={};function Eee(e){if(null==e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function Aee(e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))e.forEach((function(e){return Aee(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"==typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!=typeof a.value?Aee(a):e[r]=a.value)}}function Ree(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"==typeof e){var i,o=e;if(o in n)i=n[o];else if(o in Cee)i=Cee[o];else if(null==(i=t[o]))throw new gee("Unknown ".concat(r,": ").concat(e,". This may be due to one of the following reasons:\n1. The ").concat(r," is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ").concat(r," is defined in JavaScript, but is not registered properly with tf.serialization.registerClass()."));return i}var s,u,c,l,f,h,p=e;if(null==p.className||null==p.config)throw new gee("".concat(r,": Improper config format: ").concat(JSON.stringify(p),".\n'className' and 'config' must set."));var d,m,v=p.className;if(v in n?(s=n[v],d=(u=(0,T.Z)(s,2))[0],m=u[1]):v in Cee?(c=Cee.className,d=(l=(0,T.Z)(c,2))[0],m=l[1]):v in t&&(f=t[v],d=(h=(0,T.Z)(f,2))[0],m=h[1]),null==d)throw new gee("Unknown ".concat(r,": ").concat(v,". This may be due to one of the following reasons:\n1. The ").concat(r," is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ").concat(r," is defined in JavaScript, but is not registered properly with tf.serialization.registerClass()."));if(null!=m){for(var g={},y=0,b=Object.keys(Cee);y<b.length;y++){var x=b[y];g[x]=Cee[x]}for(var w=0,k=Object.keys(n);w<k.length;w++){var S=k[w];g[S]=n[S]}var _=p.config;_.customObjects=g;for(var I=Object.assign({},Cee),N=0,C=Object.keys(n);N<C.length;N++){var E=C[N];Cee[E]=n[E]}Aee(p.config);var A=m(d,p.config,n,a);return Cee=Object.assign({},I),A}for(var R=Object.assign({},Cee),O=0,M=Object.keys(n);O<M.length;O++){var D=M[O];Cee[D]=n[D]}var F=new d(p.config);return Cee=Object.assign({},R),F}function Oee(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function Mee(e){if(null==e)return e;var t,n=[],r=Oo(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(cBe){r.e(cBe)}finally{r.f()}return n}function Dee(e){if(null==e)throw new gee("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Fee(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new gee("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function Pee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return kee(n>=0),kee(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function Lee(e,t){Array.isArray(e)?(SY.assert(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return Lee(e,"element ".concat(n+1," of ").concat(t))}))):SY.assert(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ").concat(zee(e),".")}))}function zee(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return zee(e)})).join(",")+"]":"string"==typeof e?'"'.concat(e,'"'):"".concat(e)}function Bee(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}var Wee=0;function Vee(){return Wee++}var jee={};function Uee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in jee||(jee[e]=0),jee[e]+=1,e+jee[e].toString()}var Hee=["channelsFirst","channelsLast"],Zee=["nearest","bilinear"],Gee=["valid","same","causal"],qee=["max","avg"],Kee=["sum","mul","concat","ave"],Xee=new Map;function Yee(e){Fee(Hee,"DataFormat",e)}function $ee(e){Fee(Gee,"PaddingMode",e)}function Qee(e){Fee(qee,"PoolMode",e)}var Jee=[];function ete(e,t){Jee.push(e);try{var n=t();return Jee.pop(),n}catch(n){throw Jee.pop(),n}}function tte(e){if(!ite(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===Jee.length?"":Jee.join("/")+"/")+e}function nte(e){if(!ite(e))throw new Error("Not a valid tensor name: '"+e+"'");Xee.has(e)||Xee.set(e,0);var t=Xee.get(e);if(Xee.set(e,Xee.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return Xee.set(n,1),n}return e}var rte,ate=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function ite(e){return!!e.match(ate)}function ote(e){return e===parseInt(e.toString(),10)}function ste(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function ute(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function cte(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function lte(e,t){if(t<e)throw new gee("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function fte(){return null==rte&&(rte=YJ().epsilon()),rte}function hte(e,t){return tJ(e,t)}function pte(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),W1(e,n)}function dte(e){var t=[ste(e.shape)];return W1(e,t)}function mte(e,t,n){return BJ((function(){switch(e.rank){case 1:return z4(e,t,n);case 2:return B4(e,[t,0],[n,e.shape[1]]);case 3:return W4(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return V4(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Z1(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Z1(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new gee("sliceAlongFirstAxis() received an unsupported tensor rank: ".concat(e.rank))}}))}function vte(e,t,n){return BJ((function(){switch(e.rank){case 1:return z4(e,t,n);case 2:return B4(e,[0,t],[e.shape[0],n]);case 3:return W4(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return V4(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new gee("sliceAlongLastAxis() received an unsupported tensor rank: ".concat(e.rank))}}))}function gte(e,t,n,r){return BJ((function(){switch(e.rank){case 1:return z4(e,t,n);case 2:switch(r){case 1:return mte(e,t,n);case 2:return vte(e,t,n);default:throw new gee("The axis is not within the rank of the tensor ".concat(r))}case 3:switch(r){case 1:return mte(e,t,n);case 2:return W4(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return vte(e,t,n);default:throw new gee("The axis is not within the rank of the tensor ".concat(r))}case 4:switch(r){case 1:return mte(e,t,n);case 2:return V4(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return V4(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return vte(e,t,n);default:throw new gee("The axis is not within the rank of the tensor ".concat(r))}default:throw new gee("sliceAlongLastAxis() received an unsupported tensor rank: ".concat(e.rank))}}))}function yte(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),U1(e,n)}function bte(e,t){switch(e.rank){case 1:return o2([e,t]);case 2:return s2([e,t],0);case 3:return u2([e,t],0);case 4:return c2([e,t],0);default:throw new gee("concatAlongFirstAxis() received an unsupported tensor rank: ".concat(e.rank))}}function xte(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new gee("The length of input n (".concat(t.length,") does not match the number of dimensions in input x (").concat(e.rank,")"));return t3(e,t)}function wte(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return g4(e,t,n,r,a)}function kte(e,t,n,r){if(e.rank<2||t.rank<2)throw new yee("dot requires both inputs to be rank >= 2 but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new yee("If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ".concat(e.shape," and  y shape = ").concat(t.shape));if(2===e.rank&&2===t.rank)return N5.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Tte(e.rank,r,"channelsLast"):null,activation:n});var a=e.shape.slice(),i=a.pop();e=W1(e,[-1,i]);var o=t.shape.slice(),s=o.pop(),u=o.pop(),c=[].concat((0,I.Z)(o),[s]),l=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=W1(t0(t,l),[u,-1]);var f=[].concat((0,I.Z)(a),(0,I.Z)(c));return W1(N5.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Tte(e.rank,r,"channelsLast"):null,activation:n}),f)}function Ste(e,t,n){return BJ((function(){return t=Array.isArray(t)?e5(t,"int32"):tJ(t,"int32"),a3(e,t,n)}))}function _te(e){return l1(e,e)}function Tte(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new gee("Unexpected bias dimensions: ".concat(t.rank,"; expected it to be 1 or ").concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?W1(t,[1,r[0],1,1,1]):W1(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?W1(t,[1,1,1,1,r[0]]):W1(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?W1(t,[1,r[0],1,1]):W1(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?W1(t,[1,1,1,r[0]]):W1(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?W1(t,[1,r[0],1]):W1(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?W1(t,[1,1,r[0]]):W1(t,[1].concat(r))}else if(e<3)return t;throw new gee("Unsupported input rank by biasAdd: ".concat(t.rank))}function Ite(e,t,n){return BJ((function(){return null==n&&(n="channelsLast"),Yee(n),s1(e,Tte(e.rank,t,n))}))}function Nte(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new yee("Support for alpha values other than 1 (".concat(t,") is not implemented yet."));return O2(e)}function Cte(e,t,n,r){return BJ((function(){return k5(e,t,n,r)}))}function Ete(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e():t()}var Ate=["fanIn","fanOut","fanAvg"],Rte=["normal","uniform","truncatedNormal"];var Ote=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(V0.Serializable),Mte=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"apply",value:function(e,t){return V3(e,t)}}]),n}(Ote);Mte.className="Zeros",V0.registerClass(Mte);var Dte=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"apply",value:function(e,t){return j3(e,t)}}]),n}(Ote);Dte.className="Ones",V0.registerClass(Dte);var Fte=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),r=t.call(this),"object"!=typeof e)throw new gee("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new gee("config must have value set but got ".concat(e));return r.value=e.value,P(r)}return(0,C.Z)(n,[{key:"apply",value:function(e,t){var n=this;return BJ((function(){return l1(Z2(n.value),j3(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(Ote);Fte.className="Constant",V0.registerClass(Fte);var Pte=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return(0,C.Z)(n,[{key:"apply",value:function(e,t){return b4(e,this.minval,this.maxval,t)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(Ote);Pte.className="RandomUniform",V0.registerClass(Pte);var Lte=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return(0,C.Z)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new yee("randomNormal does not support dType ".concat(t,"."));return wte(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(Ote);Lte.className="RandomNormal",V0.registerClass(Lte);var zte=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return(0,C.Z)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new yee("truncatedNormal does not support dType ".concat(t,"."));return o5(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(Ote);zte.className="TruncatedNormal",V0.registerClass(zte);var Bte=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return(0,C.Z)(n,[{key:"apply",value:function(e,t){var n=this;return BJ((function(){if(2!==e.length||e[0]!==e[1])throw new gee("Identity matrix initializer can only be used for 2D square matrices.");return l1(n.gain,n3(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(Ote);Bte.className="Identity",V0.registerClass(Bte);var Wte=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),r=t.call(this),e.scale<0)throw new gee("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,function(e){Fee(Ate,"FanMode",e)}(r.mode),r.distribution=null==e.distribution?"normal":e.distribution,function(e){Fee(Rte,"Distribution",e)}(r.distribution),r.seed=e.seed,P(r)}return(0,C.Z)(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(Yee(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=ste(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var i=ste(e,0,e.length-2);t=e[e.length-2]*i,n=e[e.length-1]*i}}else{var o=ste(e);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}(e),r=n[0],a=n[1],i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new yee("".concat(this.getClassName()," does not support dType ").concat(t,"."));return o5(e,0,o,t,this.seed)}var s=Math.sqrt(3*i);return b4(e,-s,s,t)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(Ote);Wte.className="VarianceScaling",V0.registerClass(Wte);var Vte=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return(0,C.Z)(n,[{key:"getClassName",value:function(){return Wte.className}}]),n}(Wte);Vte.className="GlorotUniform",V0.registerClass(Vte);var jte=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return(0,C.Z)(n,[{key:"getClassName",value:function(){return Wte.className}}]),n}(Wte);jte.className="GlorotNormal",V0.registerClass(jte);var Ute=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return(0,C.Z)(n,[{key:"getClassName",value:function(){return Wte.className}}]),n}(Wte);Ute.className="HeNormal",V0.registerClass(Ute);var Hte=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return(0,C.Z)(n,[{key:"getClassName",value:function(){return Wte.className}}]),n}(Wte);Hte.className="HeUniform",V0.registerClass(Hte);var Zte=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return(0,C.Z)(n,[{key:"getClassName",value:function(){return Wte.className}}]),n}(Wte);Zte.className="LeCunNormal",V0.registerClass(Zte);var Gte=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return(0,C.Z)(n,[{key:"getClassName",value:function(){return Wte.className}}]),n}(Wte);Gte.className="LeCunNormal",V0.registerClass(Gte);var qte=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,null!=r.seed)throw new yee("Random seed is not implemented for Orthogonal Initializer yet.");return P(r)}return(0,C.Z)(n,[{key:"apply",value:function(e,t){var n=this;return BJ((function(){if(e.length<2)throw new yee("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more than 2000 (".concat(e[0]*e[1],") elements: Slowness may result."));var t=wte(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=j6.gramSchmidt(t);return e[0]>e[1]&&(r=t0(r)),l1(n.gain,r)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(Ote);qte.className="Orthogonal",V0.registerClass(qte);var Kte={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Xte(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ree(e,V0.SerializationMap.getMap().classNameMap,t,"initializer")}function Yte(e){return Eee(e)}function $te(e){if("string"==typeof e){var t=e in Kte?Kte[e]:e;if("GlorotNormal"===t)return new jte;if("GlorotUniform"===t)return new Vte;if("HeNormal"===t)return new Ute;if("HeUniform"===t)return new Hte;if("LeCunNormal"===t)return new Zte;if("LeCunUniform"===t)return new Gte;var n={};return n.className=t,n.config={},Xte(n)}return e instanceof Ote?e:Xte(e)}function Qte(e){return Array.isArray(e)&&Array.isArray(e[0])}function Jte(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function ene(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new gee("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function tne(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new gee("Expected exactly 1 Shape; got ".concat(e.length))}return e}function nne(e){var t,n=0,r=Oo(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(cBe){r.e(cBe)}finally{r.f()}return n}var rne="Variable",ane=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rne,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;N(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=Vee(),r=null==r?rne:r,this.originalName=tte(r),this.name=nte(this.originalName),this.trainable_=a,this.constraint=i,this.val=f5(t,this.trainable_,this.name,this.dtype)}return(0,C.Z)(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function ine(e){return e.map((function(e){return e.read()}))}function one(e){e.forEach((function(e){e[0].write(e[1])}))}var sne=(0,C.Z)((function e(t){N(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),une=(0,C.Z)((function e(t,n,r,a,i,o,s){N(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=s,this.id=Vee(),null!=o&&(this.originalName=tte(o),this.name=nte(this.originalName)),this.rank=n.length})),cne=0,lne=function(){function e(t,n){N(this,e),this.callArgs=n,this.id=cne++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=Oo(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&i.outboundNodes.push(this)}}catch(cBe){a.e(cBe)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return(0,C.Z)(e,[{key:"getConfig",value:function(){var e,t=[],n=Oo(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(cBe){n.e(cBe)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),fne=0,hne=function(e){A(n,e);var t=L(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};N(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=fne++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var i=e.getClassName();a=Iee(i)+"_"+Uee(i)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var o;if(null!=r.batchInputShape)o=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),o=[s].concat(r.inputShape)}e.batchInputShape=o;var u=r.dtype;null==u&&(u=r.inputDType),null==u&&(u="float32"),e.dtype=u}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return(0,C.Z)(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new vee("The layer has never been called and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new gee("Asked to get ".concat(t," at node ").concat(e,", but the layer has only ").concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return _ee(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return _ee(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new mee("Layer ".concat(this.name,' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.'));if(0===this.inboundNodes.length)throw new mee("Layer ".concat(this.name," is not connected, no input to return."));return _ee(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new mee("Layer ".concat(this.name," has no inbound nodes."));if(this.inboundNodes.length>1)throw new mee("Layer ".concat(this.name,' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.'));return _ee(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=Tee(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=Tee(this.inputSpec);if(e.length!==t.length)throw new gee("Layer ".concat(this.name," expects ").concat(t.length," inputs, but it received ").concat(e.length," input tensors. Input received: ").concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new gee("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected ndim=").concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new gee("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected max_ndim=").concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new gee("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected min_ndim=").concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new gee("Input ".concat(n," is incompatible with layer ").concat(this.name," : expected dtype=").concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var o=r.shape;for(var s in a.axes){var u=Number(s),c=a.axes[s],l=u>=0?o[u]:o[o.length+u];if(null!=c&&-1===[c,null].indexOf(l))throw new gee("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected axis ").concat(u," of input shape to have value ").concat(c," but got shape ").concat(o,"."))}}if(null!=a.shape)for(var f=0;f<a.shape.length;++f){var h=a.shape[f],p=r.shape[f];if(null!=h&&null!=p&&h!==p)throw new gee("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected shape=").concat(a.shape,", found shape=").concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=Tee(e),i=!0,o=Oo(a);try{for(o.s();!(r=o.n()).done;){if(!(r.value instanceof une)){i=!1;break}}}catch(cBe){o.e(cBe)}finally{o.f()}var s,u=!0,c=Oo(a);try{for(c.s();!(s=c.n()).done;){if(s.value instanceof une){u=!1;break}}}catch(cBe){c.e(cBe)}finally{c.f()}if(i===u)throw new gee("Arguments to apply() must be all SymbolicTensors or all Tensors");return ete(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,i=[],o=Oo(Tee(e));try{for(o.s();!(r=o.n()).done;){var s=r.value;i.push(s.shape)}}catch(cBe){o.e(cBe)}finally{o.f()}n.build(_ee(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&u&&(n._refCount=1)}if(n.assertInputCompatibility(e),u){var c,l=n.call(e,t),f=[],h=Oo(Tee(l));try{for(h.s();!(c=h.n()).done;){var p=c.value;-1!==a.indexOf(p)&&(p=p.clone()),f.push(p)}}catch(cBe){h.e(cBe)}finally{h.f()}if(l=_ee(f),null!=n.activityRegularizer)throw new yee("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}var d,m=function(e){e=Tee(e);var t,n=[],r=Oo(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(cBe){r.e(cBe)}finally{r.f()}return _ee(n)}(e),v=n.computeOutputShape(m),g="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?m[0]:m),d=null!=v&&v.length>0&&Array.isArray(v[0])?v.map((function(r,a){return new une(g,r,n,Tee(e),t,n.name,a)})):new une(g,v,n,Tee(e),t,n.name),n.addInboundNode(e,d,null,null,m,v,t),n._refCount++,null!=n.activityRegularizer)throw new yee("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return d}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: ".concat(JSON.stringify(e),") does not match that of the batchInputShape (").concat(JSON.stringify(this.batchInputShape),") of the layer ").concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor (".concat(JSON.stringify(e),") does not match the expectation of layer ").concat(this.name,": ").concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new mee("The layer ".concat(this.name," has never been called and thus has no defined output shape."));var e,t=[],n=Oo(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(cBe){n.e(cBe)}finally{n.f()}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new mee("The layer ".concat(this.name,' has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.'))}},{key:"countParams",value:function(){if(!this.built)throw new vee("You tried to call countParams() on ".concat(this.name,", but the layer is not built yet. Build it first by calling build(batchInputShape)."));return nne(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ine(e?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;BJ((function(){var n=t.weights;if(n.length!==e.length)throw new gee('You called setWeights(weights) on layer "'.concat(t.name,'" with a weight list of length ').concat(e.length,", but the layer was expecting ").concat(n.length," weights. Provided weights: ").concat(e,"..."));if(0!==n.length){for(var r=[],a=ine(n),i=0;i<a.length;++i){var o=a[i],s=n[i],u=e[i];if(!SY.arraysEqual(o.shape,u.shape))throw new gee("Layer weight shape ".concat(o.shape," not compatible with provided weight shape ").concat(u.shape));r.push([s,u])}one(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,i,o,s){if(-1!==this._addedWeightNames.indexOf(e))throw new gee("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():$te("zeros"));var u=r.apply(t,n),c=new ane(u,n,e,i,o);return u.dispose(),null!=a&&this.addLoss((function(){return a.apply(c.read())})),null==i&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=Tee(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,(0,I.Z)(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, but was passed an inputMask."));t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, but was passed an inputMask."))}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=Tee(e);t=Tee(t),n=Tee(n),r=Tee(r),a=Jte(a),i=Jte(i);var u,c=[],l=[],f=[],h=Oo(s);try{for(h.s();!(u=h.n()).done;){var p=u.value;c.push(p.sourceLayer),l.push(p.nodeIndex),f.push(p.tensorIndex)}}catch(cBe){h.e(cBe)}finally{h.f()}new lne({outboundLayer:this,inboundLayers:c,nodeIndices:l,tensorIndices:f,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var d=0;d<t.length;d++)t[d].sourceLayer=this,t[d].nodeIndex=this.inboundNodes.length-1,t[d].tensorIndex=d}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been built yet."));if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used yet."));this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(V0.Serializable);function pne(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++){var o,s=Oo(pne(r.inputTensors[i],r.inboundLayers[i],r.nodeIndices[i]));try{for(s.s();!(o=s.n()).done;){var u=o.value;-1===a.indexOf(u)&&a.push(u)}}catch(cBe){s.e(cBe)}finally{s.f()}}return a}var dne=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:Uee("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new gee("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new gee("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new gee("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";r.batchInputShape=a,r.dtype=i,r.inputSpec=[{shape:a}];var o=new une(r.dtype,r.batchInputShape,(0,F.Z)(r),[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new lne({outboundLayer:(0,F.Z)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),P(r)}return(0,C.Z)(n,[{key:"apply",value:function(e,t){throw new gee("Cannot pass any input to an InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(hne);function mne(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new gee("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new dne({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}dne.className="InputLayer",V0.registerClass(dne);var vne=function(){function e(t){if(N(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=Oo(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.add(i.key,i.value)}}catch(cBe){a.e(cBe)}finally{a.f()}}}return(0,C.Z)(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new gee("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return tJ(t,e.dtype)}catch(n){throw new gee("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype of the key '").concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof une){if(null==this.id2Value[e.id])throw new gee("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new gee("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof une){if(null==this.id2Value[e.id])throw new gee("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new gee("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&WJ(this.id2Mask)}}]),e}(),gne=new xee,yne=new xee;function bne(e,t,n,r){var a,i=null!=n&&n.training,o=Array.isArray(e),s=o?e:[e],u=s.map((function(e){return e.name})),c=[],l=t.names(),f=Oo(u);try{for(f.s();!(a=f.n()).done;){var h=a.value;-1!==l.indexOf(h)?c.push(t.getValue(h)):c.push(null)}}catch(cBe){f.e(cBe)}finally{f.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var p,d=u.join(",")+"|"+t.names().sort().join(","),m=gne.get(d);if(null==m){var v=function(e,t){SY.assert(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=wne(e[0],t);n=a.sorted,r=a.recipientMap}else{var i,o=new Set,s=Oo(e);try{for(s.s();!(i=s.n()).done;){var u,c=wne(i.value,t),l=c.sorted,f=c.recipientMap,h=Oo(l);try{for(h.s();!(u=h.n()).done;){var p=u.value;o.has(p.name)||(n.push(p),o.add(p.name))}}catch(cBe){h.e(cBe)}finally{h.f()}var d=function(e){null==r[e]&&(r[e]=new Set),f[e].forEach((function(t){return r[e].add(t)}))};for(var m in f)d(m)}}catch(cBe){s.e(cBe)}finally{s.f()}}return{sorted:n,recipientCounts:xne(r)}}(s,t);m=v.sorted,p=v.recipientCounts,gne.put(d,m),yne.put(d,p)}p={},i||Object.assign(p,yne.get(d));for(var g=new vne(t),y=0;y<m.length;++y){if(null!=r){var b=LJ().numTensors;b>r.maxNumTensors&&(r.maxNumTensors=b),b<r.minNumTensors&&(r.minNumTensors=b)}var x=m[y],w=x.sourceLayer;if(!(w instanceof dne)){var k,S=[],_=[],T=[],I=!1,N=Oo(x.inputs);try{for(N.s();!(k=N.n()).done;){var C=k.value,E=g.getValue(C),A=g.getMask(C);S.push(E),_.push(A),null!=A&&(I=!0),i||(p[C.name]--,0===p[C.name]&&!t.hasKey(C)&&-1===u.indexOf(C.name)&&!E.isDisposed&&!0!==C.sourceLayer.stateful&&T.push(E))}}catch(cBe){N.e(cBe)}finally{N.f()}I&&((n=n||{}).mask=_[0]);var R=Tee(w.apply(S,n)),O=null;w.supportsMasking&&(O=w.computeMask(S,_));for(var M=kne(x),D=Array.isArray(M)?M:[M],F=0;F<D.length;++F){g.hasKey(D[F])||g.add(D[F],R[F],Array.isArray(O)?O[0]:O);var P=u.indexOf(D[F].name);-1!==P&&(c[P]=R[F])}i||WJ(T)}}return g.disposeMasks(),o?c:c[0]}function xne(e){var t={};for(var n in e)t[n]=e[n].size;return t}function wne(e,t){var n,r=new Set,a=[],i={},o=Oo(t.names());try{for(o.s();!(n=o.n()).done;){var s=n.value;r.add(s)}}catch(cBe){o.e(cBe)}finally{o.f()}var u=[],c=[];for(u.push(e);u.length>0;){var l=u[u.length-1];if(r.has(l.name))u.pop();else{var f=c[c.length-1]===u.length-1;if(0===l.inputs.length||f)u.pop(),a.push(l),r.add(l.name),f&&c.pop();else{c.push(u.length-1);var h,p=Oo(l.inputs);try{for(p.s();!(h=p.n()).done;){var d=h.value;null==i[d.name]&&(i[d.name]=new Set),i[d.name].add(l.name),!r.has(d.name)&&u.push(d)}}catch(cBe){p.e(cBe)}finally{p.f()}}}}return{sorted:a,recipientMap:i}}function kne(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,i=Oo(e.sourceLayer.inboundNodes[r].outputTensors);try{for(i.s();!(a=i.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(cBe){i.e(cBe)}finally{i.f()}}t=e.sourceLayer.getOutputAt(n)}return t}GG().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(function(){return 100}),(function(e){null!=gne&&gne.setMaxEntries(e),null!=yne&&yne.setMaxEntries(e)}));var Sne={};function _ne(e,t){return BJ((function(){return G2(K2(l1(e,e),t,!0))}))}kZ(Sne,{maxNorm:function(){return Dne},minMaxNorm:function(){return Lne},nonNeg:function(){return Pne},unitNorm:function(){return Fne}});var Tne=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(V0.Serializable),Ine=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,C.Z)(n,[{key:"apply",value:function(e){var t=this;return BJ((function(){var n=_ne(e,t.axis),r=i2(n,0,t.maxValue);return l1(e,c1(r,s1(fte(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(Tne);Ine.className="MaxNorm",V0.registerClass(Ine);var Nne=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,C.Z)(n,[{key:"apply",value:function(e){var t=this;return BJ((function(){return c1(e,s1(fte(),_ne(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(Tne);Nne.className="UnitNorm",V0.registerClass(Nne);var Cne=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"apply",value:function(e){return k4(e)}}]),n}(Tne);Cne.className="NonNeg",V0.registerClass(Cne);var Ene=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,C.Z)(n,[{key:"apply",value:function(e){var t=this;return BJ((function(){var n=_ne(e,t.axis),r=s1(l1(t.rate,i2(n,t.minValue,t.maxValue)),l1(1-t.rate,n));return l1(e,c1(r,s1(fte(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(Tne);Ene.className="MinMaxNorm",V0.registerClass(Ene);var Ane={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Rne(e){return Eee(e)}function One(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ree(e,V0.SerializationMap.getMap().classNameMap,t,"constraint")}function Mne(e){return null==e?null:"string"==typeof e?One({className:e in Ane?Ane[e]:e,config:{}}):e instanceof Tne?e:One(e)}function Dne(e){return new Ine(e)}function Fne(e){return new Nne(e)}function Pne(){return new Cne}function Lne(e){return new Ene(e)}var zne={};function Bne(){return new Mte}function Wne(){return new Dte}function Vne(e){return new Fte(e)}function jne(e){return new Pte(e)}function Une(e){return new Lte(e)}function Hne(e){return new zte(e)}function Zne(e){return new Bte(e)}function Gne(e){return new Wte(e)}function qne(e){return new Vte(e)}function Kne(e){return new jte(e)}function Xne(e){return new Ute(e)}function Yne(e){return new Hte(e)}function $ne(e){return new Zte(e)}function Qne(e){return new Gte(e)}function Jne(e){return new qte(e)}kZ(zne,{constant:function(){return Vne},glorotNormal:function(){return Kne},glorotUniform:function(){return qne},heNormal:function(){return Xne},heUniform:function(){return Yne},identity:function(){return Zne},leCunNormal:function(){return $ne},leCunUniform:function(){return Qne},ones:function(){return Wne},orthogonal:function(){return Jne},randomNormal:function(){return Une},randomUniform:function(){return jne},truncatedNormal:function(){return Hne},varianceScaling:function(){return Gne},zeros:function(){return Bne}});var ere,tre={};function nre(e){return rre.apply(this,arguments)}function rre(){return rre=Tn(Sn().mark((function e(t){var n,r,a,i,o,s,u,c;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(i in n=[],r=[],a=[],t)"number"!=typeof(o=t[i])&&(s=o,n.push(s.data()),r.push(i),a.push(s));if(!(n.length>0)){e.next=10;break}return e.next=7,Promise.all(n);case 7:for(u=e.sent,c=0;c<u.length;++c)t[r[c]]=u[c][0];WJ(a);case 10:case"end":return e.stop()}}),e)}))),rre.apply(this,arguments)}function are(e){if(null!=e)for(var t in e){var n=e[t];"number"!=typeof n&&n.dispose()}}kZ(tre,{Layer:function(){return hne},RNN:function(){return Pie},RNNCell:function(){return Lie},activation:function(){return cse},add:function(){return yse},alphaDropout:function(){return uue},average:function(){return bse},averagePooling1d:function(){return Cse},averagePooling2d:function(){return Rse},averagePooling3d:function(){return Dse},avgPool1d:function(){return Ese},avgPool2d:function(){return Ose},avgPool3d:function(){return Fse},avgPooling1d:function(){return Ase},avgPooling2d:function(){return Mse},avgPooling3d:function(){return Pse},batchNormalization:function(){return Tse},bidirectional:function(){return eue},categoryEncoding:function(){return hue},concatenate:function(){return xse},conv1d:function(){return ese},conv2d:function(){return tse},conv2dTranspose:function(){return nse},conv3d:function(){return rse},conv3dTranspose:function(){return ase},convLstm2d:function(){return Yse},convLstm2dCell:function(){return $se},cropping2D:function(){return ose},dense:function(){return lse},depthwiseConv2d:function(){return use},dot:function(){return _se},dropout:function(){return fse},elu:function(){return Koe},embedding:function(){return gse},flatten:function(){return pse},gaussianDropout:function(){return sue},gaussianNoise:function(){return oue},globalAveragePooling1d:function(){return Lse},globalAveragePooling2d:function(){return zse},globalMaxPool1d:function(){return nue},globalMaxPool2d:function(){return rue},globalMaxPooling1d:function(){return Bse},globalMaxPooling2d:function(){return Wse},gru:function(){return Hse},gruCell:function(){return Zse},input:function(){return Lae},inputLayer:function(){return qoe},layerNormalization:function(){return Ise},leakyReLU:function(){return Yoe},lstm:function(){return Gse},lstmCell:function(){return qse},masking:function(){return cue},maxPool1d:function(){return aue},maxPool2d:function(){return iue},maxPooling1d:function(){return Vse},maxPooling2d:function(){return jse},maxPooling3d:function(){return Use},maximum:function(){return wse},minimum:function(){return kse},multiply:function(){return Sse},permute:function(){return vse},prelu:function(){return $oe},reLU:function(){return Xoe},repeatVector:function(){return dse},rescaling:function(){return lue},reshape:function(){return mse},resizing:function(){return fue},rnn:function(){return Qse},separableConv2d:function(){return ise},simpleRNN:function(){return Kse},simpleRNNCell:function(){return Xse},softmax:function(){return Qoe},spatialDropout1d:function(){return hse},stackedRNNCells:function(){return Jse},thresholdedReLU:function(){return Joe},timeDistributed:function(){return tue},upSampling2d:function(){return sse},zeroPadding2d:function(){return Nse}}),function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(ere||(ere={}));var ire=function(){function e(){N(this,e),this.validationData=null}return(0,C.Z)(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),ore=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;N(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return(0,C.Z)(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=Oo(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(cBe){n.e(cBe)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=Oo(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(cBe){n.e(cBe)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=Tn(Sn().mark((function e(t,n){var r,a,i;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Oo(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Tn(Sn().mark((function e(t,n){var r,a,i;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Oo(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Tn(Sn().mark((function e(t,n){var r,a,i;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Oo(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Tn(Sn().mark((function e(t,n){var r,a,i;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Oo(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=Oo(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=Oo(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),sre=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.call(this)}return(0,C.Z)(n,[{key:"onEpochBegin",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Tn(Sn().mark((function e(t,n){var r,a,i,o=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=function(e){var t=n[e];if("number"==typeof t)o.totals.hasOwnProperty(e)||(o.totals[e]=0),o.totals[e]=o.totals[e]+t*r;else{var a;e in o.totals?a=o.totals[e]:o.totals[e]=0;var i=BJ((function(){return s1(o.totals[e],l1(t,r))}));o.totals[e]=i,null!=a&&a.dispose()}},n)a(i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Tn(Sn().mark((function e(t,n){var r,a,i,o=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n){r=Oo(this.params.metrics);try{for(i=function(){var e=a.value;null!=o.totals[e]&&("number"==typeof o.totals[e]?n[e]=o.totals[e]/o.seen:BJ((function(){var t=l1(c1(1,o.seen),o.totals[e]);n[e]=t,o.totals[e].dispose(),VJ(n[e])})))},r.s();!(a=r.n()).done;)i()}catch(cBe){r.e(cBe)}finally{r.f()}}case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(ire),ure=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"onTrainBegin",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Tn(Sn().mark((function e(t,n){var r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r,a,i,o,s,u,c;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(i=this.history[a],o=0;o<i.length;++o)"number"!=typeof i[o]&&(s=i[o],t.push(s.data()),n.push(a),r.push(o));return e.next=4,Promise.all(t);case 4:for(u=e.sent,c=0;c<u.length;++c)this.history[n[c]][r[c]].dispose(),this.history[n[c]][r[c]]=u[c][0];case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(ire),cre=function(e){A(n,e);var t=L(n);function n(e,r){var a;if(N(this,n),(a=t.call(this)).currentEpoch=0,a.nowFunc=e.nowFunc,a.nextFrameFunc=e.nextFrameFunc||r8,a.yieldEvery=r||"auto","auto"===a.yieldEvery&&(a.yieldEvery=125),"never"===a.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return SY.isNumber(a.yieldEvery)&&(a.maybeWait=function(e,t,n){var r,a=null!=n?n():SY.now();return function(){var i=null!=n?n():SY.now();return i-a<t||(a=i,r=e.apply(void 0,arguments)),r}}(a.maybeWait.bind((0,F.Z)(a)),a.yieldEvery,a.nowFunc)),a.trainBegin=e.onTrainBegin,a.trainEnd=e.onTrainEnd,a.epochBegin=e.onEpochBegin,a.epochEnd=e.onEpochEnd,a.batchBegin=e.onBatchBegin,a.batchEnd=e.onBatchEnd,a.yield=e.onYield,P(a)}return(0,C.Z)(n,[{key:"maybeWait",value:function(){var e=Tn(Sn().mark((function e(t,n,r){var a;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],e.t0=null!=this.yield,!e.t0){e.next=6;break}return e.next=5,nre(r);case 5:a.push(this.yield(t,n,r));case 6:return a.push(this.nextFrameFunc()),e.next=9,Promise.all(a);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,e.t0=null!=this.epochBegin,!e.t0){e.next=7;break}return e.next=5,nre(n);case 5:return e.next=7,this.epochBegin(t,n);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Tn(Sn().mark((function e(t,n){var r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],e.t0=null!=this.epochEnd,!e.t0){e.next=6;break}return e.next=5,nre(n);case 5:r.push(this.epochEnd(t,n));case 6:return"epoch"===this.yieldEvery&&r.push(this.nextFrameFunc()),e.next=9,Promise.all(r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null!=this.batchBegin,!e.t0){e.next=6;break}return e.next=4,nre(n);case 4:return e.next=6,this.batchBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Tn(Sn().mark((function e(t,n){var r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],e.t0=null!=this.batchEnd,!e.t0){e.next=6;break}return e.next=5,nre(n);case 5:r.push(this.batchEnd(t,n));case 6:return"batch"===this.yieldEvery?r.push(this.nextFrameFunc()):SY.isNumber(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=9,Promise.all(r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null!=this.trainBegin,!e.t0){e.next=6;break}return e.next=4,nre(t);case 4:return e.next=6,this.trainBegin(t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null!=this.trainEnd,!e.t0){e.next=6;break}return e.next=4,nre(t);case 4:return e.next=6,this.trainEnd(t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ire);function lre(e,t){return null==e&&(e={}),e instanceof ire?[e]:Array.isArray(e)&&e[0]instanceof ire?e:Tee(e).map((function(e){return new cre(e,t)}))}var fre=function(){function e(){N(this,e)}return(0,C.Z)(e,null,[{key:"registerCallbackConstructor",value:function(t,n){SY.assert(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors)e.constructors[+n].forEach((function(e){if(e===t)throw new gee("Duplicate callback constructor.")}))}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,(0,I.Z)(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function hre(e,t,n,r,a,i,o,s,u){var c=new ure,l=[new sre].concat((0,I.Z)(fre.createCallbacks(t)));null!=e&&l.push.apply(l,(0,I.Z)(e)),l.push(c);var f=new ore(l);return f.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:u}),{callbackList:f,history:c}}function pre(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ree(e,V0.SerializationMap.getMap().classNameMap,t,"layer",n)}function dre(e,t){return BJ((function(){"float32"!==e.dtype&&(e=tJ(e,"float32"));var n=K2(_te(e),t,!0),r=a2(n.shape,fte()),a=G2(B3(n,r));return c1(e,a)}))}function mre(e,t){return BJ((function(){return W3(_te(I3(t,e)),-1)}))}function vre(e,t){return BJ((function(){return W3(f1(I3(t,e)),-1)}))}function gre(e,t){return BJ((function(){var n=I3(e,t),r=i2(f1(e),fte(),Number.MAX_VALUE),a=f1(c1(n,r));return l1(100,W3(a,-1))}))}function yre(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return BJ((function(){if(n)t=j4(t);else{var r=K2(t,t.shape.length-1,!0);t=c1(t,r)}return t=i2(t,fte(),1-fte()),JJ(K2(l1(tJ(e,"float32"),m3(t)),t.shape.length-1))}))}function bre(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return BJ((function(){var r=tJ(r3(dte(e)),"int32"),a=(t=i2(t,fte(),1-fte())).shape;return yre(W1(AJ(r,a[a.length-1]),a),t,n)}))}function xre(e,t){return BJ((function(){var n;return n=i2(t,fte(),1-fte()),n=m3(c1(n,I3(1,n))),W3(function(e,t){if(!SY.arraysEqual(e.shape,t.shape))throw new gee("logits and labels must have the same shape, but got shapes ".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return BJ((function(){var n=k4(t),r=JJ(f1(t));return s1(I3(n,l1(t,e)),v3(Q2(r)))}))}(e,n),-1)}))}function wre(e,t){return BJ((function(){var n=dre(e,-1),r=dre(t,-1),a=l1(n,r);return JJ(K2(a,-1))}))}fre.constructors={};var kre={meanSquaredError:mre,meanAbsoluteError:vre,meanAbsolutePercentageError:gre,meanSquaredLogarithmicError:function(e,t){return BJ((function(){var n=i2(t,fte(),Number.MAX_VALUE),r=m3(s1(1,n)),a=i2(e,fte(),Number.MAX_VALUE),i=m3(s1(1,a));return W3(_te(I3(r,i)),-1)}))},squaredHinge:function(e,t){return BJ((function(){var n=B3(0,I3(1,l1(e,t)));return W3(_te(n),-1)}))},hinge:function(e,t){return BJ((function(){var n=B3(0,I3(1,l1(e,t)));return W3(n,-1)}))},categoricalHinge:function(e,t){return BJ((function(){var n=K2(l1(e,t),-1),r=j2(l1(I3(1,e),t),-1);return B3(0,s1(1,I3(r,n)))}))},logcosh:function(e,t){return BJ((function(){var n=Math.log(2),r=I3(t,e),a=I3(s1(r,_3(l1(-2,r))),n);return W3(a,-1)}))},categoricalCrossentropy:yre,sparseCategoricalCrossentropy:bre,binaryCrossentropy:xre,kullbackLeiblerDivergence:function(e,t){return BJ((function(){var n=i2(e,fte(),1),r=i2(t,fte(),1);return K2(l1(e,m3(c1(n,r))),-1)}))},poisson:function(e,t){return BJ((function(){var n=m3(s1(fte(),t));return W3(I3(t,l1(e,n)),-1)}))},cosineProximity:wre};function Sre(e){if("string"==typeof e){if(e in kre)return kre[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,'. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy')),new gee(t)}return e}function _re(e,t){return BJ((function(){var n=l1(.5,$3(t)),r=hte(i3(t,n),e.dtype);return W3(I2(e,r),-1)}))}function Tre(e,t){return BJ((function(){return hte(I2(g1(e,-1),g1(t,-1)),"float32")}))}function Ire(e,t){return BJ((function(){return tJ(K2(E3(I2(e,1),I2(t,1))),"float32")}))}function Nre(e,t){return BJ((function(){var n=Ire(e,t),r=function(e,t){return BJ((function(){return tJ(K2(E3(I2(e,0),I2(t,1))),"float32")}))}(e,t),a=s1(n,r);return tJ(N2(i3(a,0),c1(n,a),0),"float32")}))}function Cre(e,t){return BJ((function(){var n=Ire(e,t),r=function(e,t){return BJ((function(){return tJ(K2(E3(I2(e,1),I2(t,0))),"float32")}))}(e,t),a=s1(n,r);return tJ(N2(i3(a,0),c1(n,a),0),"float32")}))}function Ere(e,t){return xre(e,t)}function Are(e,t){return e.rank===t.rank&&(e=X4(e,[e.rank-1])),(t=g1(t,-1)).dtype!==e.dtype&&(t=tJ(t,e.dtype)),tJ(I2(e,t),"float32")}var Rre=yre,Ore=bre,Mre={binaryAccuracy:_re,categoricalAccuracy:Tre,precision:Nre,categoricalCrossentropy:Rre,sparseCategoricalCrossentropy:Ore,mse:mre,MSE:mre,mae:vre,MAE:vre,mape:gre,MAPE:gre,cosine:wre};function Dre(e){if("string"==typeof e&&e in Mre)return Mre[e];if("string"!=typeof e&&null!=e)return e;throw new gee("Unknown metric ".concat(e))}function Fre(e){if(kee(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"==typeof e)return e;for(var t,n=0,r=Object.keys(kre);n<r.length;n++){var a=r[n];if(kre[a]===e){t=a;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(Mre);i<o.length;i++){var s=o[i];if(Mre[s]===e){t=s;break}}return void 0!==t?t:e.name}function Pre(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!Lre(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>1048576&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in size (length=').concat(r.length," when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ",1048576,"."))}}function Lre(e){if(null===e)return!0;if("object"==typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!=typeof r||!Lre(e[r]))return!1}return!0}if(Array.isArray(e)){var a,i=Oo(e);try{for(i.s();!(a=i.n()).done;){if(!Lre(a.value))return!1}}catch(cBe){i.e(cBe)}finally{i.f()}return!0}return!1}var o=typeof e;return"string"===o||"number"===o||"boolean"===o}function zre(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=Wre(e),o=["Layer (type)","Input Shape","Output shape","Param #"];if(i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var s in o.push("Receives inputs"),r=[],e.nodesByDepth){var u;(u=r).push.apply(u,(0,I.Z)(e.nodesByDepth[s]))}a("_".repeat(t)),Vre(o,n,a),a("=".repeat(t));for(var c=e.layers,l=0;l<c.length;++l)i?jre(c[l],n,a):Ure(c[l],n,r,a),a((l===c.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var f=Bre(e),h=nne(e.nonTrainableWeights);a("Total params: ".concat(f+h)),a("Trainable params: ".concat(f)),a("Non-trainable params: ".concat(h)),a("_".repeat(t))}function Bre(e){return null!=e.collectedTrainableWeights?nne(e.collectedTrainableWeights):nne(e.trainableWeights)}function Wre(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var s=o[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,(0,I.Z)(s))}if(t){var u,c=Oo(e.layers);try{for(c.s();!(u=c.n()).done;){var l,f=u.value,h=!1,p=Oo(f.inboundNodes);try{for(p.s();!(l=p.n()).done;){var d=l.value;if(-1!==r.indexOf(d)){if(h){t=!1;break}h=!0}}}catch(cBe){p.e(cBe)}finally{p.f()}if(!t)break}}catch(cBe){c.e(cBe)}finally{c.f()}}return t}function Vre(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function jre(e,t,n){var r,a;try{a=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(s){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(s){r="multiple"}var i=e.name,o=e.getClassName();Vre(["".concat(i," (").concat(o,")"),a,r,e.countParams().toString()],t,n)}function Ure(e,t,n,r){var a,i;try{i=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(g){i="multiple"}try{a=JSON.stringify(e.outputShape)}catch(g){a="multiple"}var o,s=[],u=Oo(e.inboundNodes);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(c)))for(var l=0;l<c.inboundLayers.length;++l){var f=c.inboundLayers[l].name,h=c.nodeIndices[l],p=c.tensorIndices[l];s.push("".concat(f,"[").concat(h,"][").concat(p,"]"))}}}catch(cBe){u.e(cBe)}finally{u.f()}var d=e.name,m=e.getClassName(),v=0===s.length?"":s[0];Vre(["".concat(d," (").concat(m,")"),i,a,e.countParams().toString(),v],t,r);for(var g=1;g<s.length;++g)Vre(["","","","",s[g]],t,r)}function Hre(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function Zre(e,t){if(null===e)return null;if("string"==typeof e)return Nee(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];Hre(t,a,i)?n.push(i):n.push(Zre(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var c=u[s],l=e[c];if("name"===c&&"string"==typeof l)o[c]=l;else{var f=Nee(c);o[f]=Zre(l,f)}}return o}function Gre(e,t){if(null==e)return null;if("string"==typeof e)return Iee(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];Hre(t,a,i)?n.push(i):n.push(Gre(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var c=u[s],l=e[c],f=Iee(c);o[f]="name"!==c&&"className"!==c||"string"!=typeof l?Gre(l,c):l}return o}var qre="4.0.0",Kre=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=Uee(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],Mee(r.inputs).length!==r.inputs.length)throw new gee("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ".concat(r.inputs.map((function(e){return e.name}))));Mee(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var i,o=Oo(r.outputs);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.sourceLayer,c=s.nodeIndex,l=s.tensorIndex;r.outputLayers.push(u),r.outputLayersNodeIndices.push(c),r.outputLayersTensorIndices.push(l)}}catch(cBe){o.e(cBe)}finally{o.f()}var f,h=Oo(r.inputs);try{for(h.s();!(f=h.n()).done;){var p=f.value,d=p.sourceLayer,m=p.nodeIndex,v=p.tensorIndex;kee(0===m,"input layer has >1 nodes"),kee(0===v,"input layer has >1 tensors"),r.inputLayers.push(d),r.inputLayersNodeIndices.push(m),r.inputLayersTensorIndices.push(v)}}catch(cBe){h.e(cBe)}finally{h.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var g=0;g<r.inputLayers.length;g++){var y=r.inputLayers[g];if(!(y instanceof dne))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. Received inputs: ".concat(e.inputs,". Input ").concat(g," (0-based) originates from layer type ").concat(y.getClassName(),"."));r.inputNames.push(y.name),r.feedInputShapes.push(y.batchInputShape),r.feedInputNames.push(y.name)}var b,x=Oo(r.outputLayers);try{for(x.s();!(b=x.n()).done;){var w=b.value;r.outputNames.push(w.name)}}catch(cBe){x.e(cBe)}finally{x.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var k,S={},_={},T={},I={},C={},E=[],A=function e(t,a,i,o,s,u){(null==o||null==s||null==u)&&(o=t.sourceLayer,s=t.nodeIndex,u=t.tensorIndex);var c=o.inboundNodes[s];if(-1!==i.indexOf(c))throw new vee("The tensor ".concat(t.name,' at layer "').concat(o.name,'" is part of a cycle.'));if(-1===a.indexOf(c)){r.containerNodes.add(n.nodeKey(o,s)),o.id in C||(C[o.id]=Object.keys(C).length),-1===i.indexOf(c)&&i.push(c);for(var l=c.inboundLayers.length,f=0;f<l;f++){e(c.inputTensors[f],a,i,c.inboundLayers[f],c.nodeIndices[f],c.tensorIndices[f])}for(a.push(c);i.indexOf(c)>=0;)i.splice(i.indexOf(c),1);E.push(c)}},R=[],O=[],M=Oo(r.outputs);try{for(M.s();!(k=M.n()).done;){A(k.value,R,O)}}catch(cBe){M.e(cBe)}finally{M.f()}var D,L=Oo(E.slice().reverse());try{for(L.s();!(D=L.n()).done;){var z=D.value;_[z.id]=z,z.id in S||(S[z.id]=0);var B=S[z.id],W=null==T[z.outboundLayer.id]?0:T[z.outboundLayer.id];B=Math.max(B,W),T[z.outboundLayer.id]=B,I[z.outboundLayer.id]=z.outboundLayer,S[z.id]=B;for(var V=0;V<z.inboundLayers.length;V++){var j=z.inboundLayers[V],U=z.nodeIndices[V],H=j.inboundNodes[U],Z=null==S[H.id]?0:S[H.id];S[H.id]=Math.max(B+1,Z),_[H.id]=H}}}catch(cBe){L.e(cBe)}finally{L.f()}var G={};for(var q in S){var K=S[q];K in G||(G[K]=[]),G[K].push(_[q])}var X={};for(var Y in T){var $=T[Y];$ in X||(X[$]=[]),X[$].push(I[Y])}var Q=Object.keys(X).map((function(e){return parseInt(e,10)})).sort(Oee);r.layers=[];var J,ee=Oo(Q);try{for(ee.s();!(J=ee.n()).done;){var te=X[J.value];te.sort((function(e,t){var n=C[e.id],r=C[t.id];return n<r?-1:n>r?1:0}));var ne,re=Oo(te);try{for(re.s();!(ne=re.n()).done;){var ae=ne.value;ae instanceof n&&r.internalContainerRefs.push(ae),r.layers.push(ae)}}catch(cBe){re.e(cBe)}finally{re.f()}}}catch(cBe){ee.e(cBe)}finally{ee.f()}r.layersByDepth=X,Q=Object.keys(G).map((function(e){return parseInt(e,10)})).sort(Oee);var ie,oe=r.inputs.slice(),se=[],ue=Oo(Q);try{for(ue.s();!(ie=ue.n()).done;){var ce,le=Oo(G[ie.value]);try{for(le.s();!(ce=le.n()).done;){var fe=ce.value,he=fe.outboundLayer;if(null!=he){var pe,de=Oo(fe.inputTensors);try{for(de.s();!(pe=de.n()).done;){var me=pe.value;if(-1===oe.indexOf(me))throw new vee("Graph disconnected: cannot obtain value for tensor ".concat(me,' at layer "').concat(he.name,'". The following previous layers were accessed without issue: ').concat(se))}}catch(cBe){de.e(cBe)}finally{de.f()}var ve,ge=Oo(fe.outputTensors);try{for(ge.s();!(ve=ge.n()).done;){var ye=ve.value;oe.push(ye)}}catch(cBe){ge.e(cBe)}finally{ge.f()}se.push(he.name)}}}catch(cBe){le.e(cBe)}finally{le.f()}}}catch(cBe){ue.e(cBe)}finally{ue.f()}r.nodesByDepth=G;var be,xe=r.layers.map((function(e){return e.name})),we=Oo(xe);try{var ke=function(){var e=be.value,t=xe.filter((function(t){return t===e})).length;if(1!==t)throw new vee('The name "'.concat(e,'" is used ').concat(t," times in the model. All layer names should be unique. Layer names: ")+JSON.stringify(xe))};for(we.s();!(be=we.n()).done;)ke()}catch(cBe){we.e(cBe)}finally{we.f()}return r.outboundNodes=[],r.inboundNodes=[],new lne({outboundLayer:(0,F.Z)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,P(r)}return(0,C.Z)(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=Oo(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(cBe){n.e(cBe)}finally{n.f()}var a,i=Oo(this.internalContainerRefs);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}catch(cBe){i.e(cBe)}finally{i.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new gee("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=Oo(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(cBe){n.e(cBe)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=Oo(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,I.Z)(r.nonTrainableWeights))}}catch(cBe){n.e(cBe)}finally{n.f()}if(!this.trainable){var a,i=[],o=Oo(this.layers);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,(0,I.Z)(s.trainableWeights))}}catch(cBe){o.e(cBe)}finally{o.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,i=Oo(this.layers);try{for(i.s();!(t=i.n()).done;){var o,s=t.value,u=Oo(s.weights);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(null!=r[c.originalName])throw new gee("Duplicate weight name: ".concat(c.originalName));r[c.originalName]=c,a++}}catch(cBe){u.e(cBe)}finally{u.f()}}}catch(cBe){i.e(cBe)}finally{i.f()}var l=[];for(var f in e){var h=f;if(null==r[f]){var p=f.split("/");h=p.slice(0,-2).concat([p[p.length-1]]).join("/")}if(null!=r[h])l.push([r[h],e[f]]);else if(n)throw new gee("Provided weight data has no target variable: ".concat(f));delete r[h]}if(n){var d=[];for(var m in r)d.push(m);if(d.length>0)throw new gee("".concat(d.length," of ").concat(a," weights are not set: ").concat(d))}one(l)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(qre),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Gre(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return BJ((function(){e=Tee(e);for(var r=new vne,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return bne(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return BJ((function(){var r;return e=Tee(e),r=null==t?wee(null,e.length):Tee(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=Jte(e);if(t.length!==this.inputLayers.length)throw new gee("Invalid inputShape argument ".concat(e,": model has ").concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],i=t[r];n[a.name+"_0_0"]=i}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(Oee);if(o.length>1){var s,u=Oo(o);try{for(u.s();!(s=u.n()).done;){var c,l=s.value,f=Oo(this.nodesByDepth[l]);try{for(f.s();!(c=f.n()).done;){var h=c.value,p=h.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(p.id)){for(var d=[],m=0;m<h.inboundLayers.length;m++){var v=h.inboundLayers[m],g=h.nodeIndices[m],y=h.tensorIndices[m],b=n["".concat(v.name,"_").concat(g,"_").concat(y)];d.push(b)}for(var x=Jte(p.computeOutputShape(_ee(d))),w=p.inboundNodes.indexOf(h),k=0;k<x.length;k++){n["".concat(p.name,"_").concat(w,"_").concat(k)]=x[k]}}}}catch(cBe){f.e(cBe)}finally{f.f()}}}catch(cBe){u.e(cBe)}finally{u.f()}}for(var S=[],_=[],T=0;T<this.outputLayers.length;T++){var I=this.outputLayers[T],N=this.outputLayersNodeIndices[T],C=this.outputLayersTensorIndices[T],E="".concat(I.name,"_").concat(N,"_").concat(C);_.push(E)}for(var A=0;A<_.length;A++){var R=_[A];kee(R in n),S.push(n[R])}return _ee(S)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=wee(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],i=e[r],o=t[r];n[a.id]=[i,o]}var s,u=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(Oee),c=Oo(u);try{for(c.s();!(s=c.n()).done;){var l,f=s.value,h=Oo(this.nodesByDepth[f]);try{for(h.s();!(l=h.n()).done;){var p,d=l.value,m=d.outboundLayer,v=d.inputTensors,g=d.outputTensors,y=new Array,b=Oo(v);try{for(b.s();!(p=b.n()).done;){var x=p.value;x.id in n&&y.push(n[x.id])}}catch(cBe){b.e(cBe)}finally{b.f()}if(y.length===v.length){var w={},k=void 0,S=void 0,_=void 0,I=void 0;if(null!=d.callArgs&&(w=d.callArgs),1===y.length){var N=(0,T.Z)(y[0],2),C=N[0],E=N[1];null==w.mask&&(w.mask=E),_=Tee(m.call(C,w)),I=Tee(m.computeMask(C,E)),k=[C],S=[E]}else k=y.map((function(e){return e[0]})),S=y.map((function(e){return e[1]})),null==w.mask&&(w.mask=S),_=Tee(m.call(k,w)),I=Tee(m.computeMask(k,S));if(m.activityRegularizer)throw new yee("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var A=0;A<g.length;++A){var R=g[A],O=_[A],M=I[A];n[R.id]=[O,M]}}}}catch(cBe){h.e(cBe)}finally{h.f()}}}catch(cBe){c.e(cBe)}finally{c.f()}var D,F=[],P=[],L=[],z=Oo(this.outputs);try{for(z.s();!(D=z.n()).done;){var B=D.value;kee(B.id in n,"Could not compute output ".concat(B.name," : ").concat(B.id));var W=(0,T.Z)(n[B.id],2),V=W[0],j=W[1];L.push(V.shape),F.push(V),P.push(j)}}catch(cBe){z.e(cBe)}finally{z.f()}return[F,P,L]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},i=Oo(this.layers);try{for(i.s();!(r=i.n()).done;){var o=r.value;t=o instanceof n?1:0;for(var s=0;s<o.inboundNodes.length;s++){var u=n.nodeKey(o,s);this.containerNodes.has(u)&&(a[u]=t,t+=1)}}}catch(cBe){i.e(cBe)}finally{i.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new gee("Was asked to retrieve layer at index ".concat(t,", but model only has ").concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new gee("Provide either a layer name or layer index");var n,r=Oo(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(cBe){r.e(cBe)}finally{r.f()}throw new gee("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return BJ((function(){var t,r=[],a=Oo(e.layers);try{for(a.s();!(t=a.n()).done;)for(var i=t.value,o=0;o<i.inboundNodes.length;++o){var s=n.nodeKey(i,o);e.containerNodes.has(s)&&r.push.apply(r,(0,I.Z)(i.calculateLosses()))}}catch(cBe){a.e(cBe)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],i=Oo(this.layers);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,s=o.getClassName(),u=o.getConfig(),c=[],l=0;l<o.inboundNodes.length;l++){var f=o.inboundNodes[l],h=n.nodeKey(o,l),p={};if(this.containerNodes.has(h)){if(f.callArgs)try{JSON.stringify(f.callArgs),p=f.callArgs}catch(d){console.warn("Layer ".concat(o.name," was passed non-serializable keyword arguments: ").concat(f.callArgs,". They will not be included in the serialized model (and thus will be missing at deserialization time).")),p={}}if(f.inboundLayers.length>0){for(var d=[],m=0;m<f.inboundLayers.length;m++){var v=f.inboundLayers[m],g=f.nodeIndices[m],y=f.tensorIndices[m],b=r[n.nodeKey(v,g)];null==b&&(b=0),d.push([v.name,b,y,p])}c.push(d)}}}var x={};x.name=o.name,x.className=s,x.config=u,x.inboundNodes=c,a.push(x)}}catch(cBe){i.e(cBe)}finally{i.f()}t.layers=a;for(var w=[],k=0;k<this.inputLayers.length;k++){var S=this.inputLayers[k],_=this.inputLayersNodeIndices[k],T=n.nodeKey(S,_);if(this.containerNodes.has(T)){var I=r[T];null==I&&(I=0);var N=this.inputLayersTensorIndices[k];w.push([S.name,I,N])}}t.inputLayers=w;for(var C=[],E=0;E<this.outputLayers.length;E++){var A=this.outputLayers[E],R=this.outputLayersNodeIndices[E],O=n.nodeKey(A,R);if(this.containerNodes.has(O)){var M=r[O];null==M&&(M=0);var D=this.outputLayersTensorIndices[E];C.push([A.name,M,D])}}return t.outputLayers=C,t}},{key:"stateful",get:function(){if(this._stateful)throw new gee("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=Oo(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(cBe){t.e(cBe)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;BJ((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function o(e,t){var n,a,o=[],s=Oo(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=u[0],l=u[1],f=u[2];if(n=null==u[3]?{}:u[3],!(c in r))return void i(e,t);var h=r[c];if(h.inboundNodes.length<=l)return void i(e,t);var p=h.inboundNodes[l];o.push(p.outputTensors[f])}}catch(cBe){s.e(cBe)}finally{s.f()}o.length>0&&e.apply(_ee(o),n)}function s(e){var a=e.name,o=pre(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),r[a]=o,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new gee("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)}))}var u,c=t.name,l=t.layers,f=Oo(l);try{for(f.s();!(u=f.n()).done;){var h=u.value;s(h)}}catch(cBe){f.e(cBe)}finally{f.f()}for(;!Dee(a);){var p,d=Oo(l);try{for(d.s();!(p=d.n()).done;){var m=p.value,v=r[m.name];if(v.name in a){var g=a[v.name];delete a[v.name];var y,b=Oo(g);try{for(b.s();!(y=b.n()).done;){var x=y.value;o(v,x)}}catch(cBe){b.e(cBe)}finally{b.f()}}}}catch(cBe){d.e(cBe)}finally{d.f()}}var w,k=[],S=[],_=t.inputLayers,T=Oo(_);try{for(T.s();!(w=T.n()).done;){var I=w.value,N=I[0],C=I[1],E=I[2];kee(N in r);var A=r[N].inboundNodes[C].outputTensors;k.push(A[E])}}catch(cBe){T.e(cBe)}finally{T.f()}var R,O=t.outputLayers,M=Oo(O);try{for(M.s();!(R=M.n()).done;){var D=R.value,F=D[0],P=D[1],L=D[2];kee(F in r);var z=r[F].inboundNodes[P].outputTensors;S.push(z[L])}}catch(cBe){M.e(cBe)}finally{M.f()}return new e({inputs:k,outputs:S,name:c})}}]),n}(hne);function Xre(e,t){return function(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," element(s), but the model has ").concat(r," outputs. Make sure a set of weights is provided for each model output."));return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, so ").concat(n," must be either an array with ").concat(r," elements or an object with ").concat(t," keys. Provided ").concat(n," not understood: ").concat(JSON.stringify(e)))}(e,t,"classWeight")}function Yre(e,t,n,r){return $re.apply(this,arguments)}function $re(){return $re=Tn(Sn().mark((function e(t,n,r,a){var i,o,s;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=14;break}return i=BJ((function(){if(1===t.shape.length)return nJ(t);if(2===t.shape.length){if(t.shape[1]>1)return g1(t,1);if(1===t.shape[1])return W1(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") during handling of class weights. The size is expected to be >= 1."))}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during handling of class weights. The rank is expected to be 1 or 2."))})),e.t0=Array,e.next=7,i.data();case 7:return e.t1=e.sent,o=e.t0.from.call(e.t0,e.t1),WJ(i),s=[],e.abrupt("return",(o.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. The class ".concat(e," exists in the data but not in classWeight"));s.push(r[e])})),e5(s,"float32")));case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e)}))),$re.apply(this,arguments)}function Qre(e,t){return l1(e,t)}function Jre(e,t){var n,r,a=t;n=a.xs,r=a.ys,SY.assert(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ".concat(t)}));var i=eae("input",e.inputNames,n),o=eae("output",e.outputNames,r),s=i[0].shape[0];SY.assert(i.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset provides ").concat(i.length," inputs.  (Expected input keys: ").concat(JSON.stringify(e.inputNames),")")})),SY.assert(o.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset provides ").concat(o.length," outputs.  (Expected output keys: ").concat(JSON.stringify(e.outputNames),")")}));for(var u=function(t){SY.assert(i[t].shape[0]===s,(function(){return"Batch size mismatch: input ".concat(e.inputNames[t]," has ").concat(i[t].shape[0],"; expected  ").concat(s," based on input ").concat(e.inputNames[0],".")}))},c=0;c<i.length;c++)u(c);for(var l=function(t){SY.assert(o[t].shape[0]===s,(function(){return"Batch size mismatch: output ".concat(e.outputNames[t]," has ").concat(o[t].shape[0],"; expected  ").concat(s," based on input ").concat(e.inputNames[0],".")}))},f=0;f<o.length;f++)l(f);return{xs:i,ys:o}}function eae(e,t,n){if(n instanceof i$)return[n];if(Array.isArray(n))return SY.assert(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,a=[],i=Oo(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(null==n[o])throw new gee("The feature data generated by the dataset lacks the required ".concat(e," key '").concat(o,"'."));a.push(n[o])}}catch(cBe){i.e(cBe)}finally{i.f()}return a}function tae(e){if(3===e.length)throw new yee("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function nae(e,t,n){return rae.apply(this,arguments)}function rae(){return rae=Tn(Sn().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,p,d,m,v,g,y,b,x,w,k,S,_,T,I,N,C,E,A,R,O,M,D,F,P;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,SY.assert(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),SY.assert(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),SY.assert(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive integer, but got ".concat(r.epochs)})),SY.assert(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ".concat(r.batchesPerEpoch)})),SY.assert(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,(i=null!=r.validationData)&&(iae(r.validationData)?SY.assert(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ".concat(r.validationBatches)})):(u=tae(r.validationData),o=u.xs,s=u.ys)),c=t.makeTrainFunction(),l=t.getDedupedMetricsNames(),f=i?l.slice().concat(l.map((function(e){return"val_"+e}))):l.slice(),h=lre(r.callbacks,r.yieldEvery),p=null==r.verbose?1:r.verbose,d=hre(h,p,r.epochs,null,null,aae(n,r),null,i,f),m=d.callbackList,v=d.history,m.setModel(t),t.history=v,e.next=14,m.onTrainBegin();case 14:return t.stopTraining_=!1,g=null==r.initialEpoch?0:r.initialEpoch,e.next=18,n.iterator();case 18:y=e.sent;case 19:if(!(g<r.epochs)){e.next=88;break}return b={},e.next=23,m.onEpochBegin(g);case 23:if(x=0,w=0,e.t0=a,e.t0){e.next=29;break}return e.next=28,n.iterator();case 28:y=e.sent;case 29:if(a&&!(x<r.batchesPerEpoch)){e.next=81;break}return e.next=32,y.next();case 32:if(k=e.sent,!a||!k.done){e.next=36;break}return console.warn("You provided `batchesPerEpoch` as ".concat(r.batchesPerEpoch,", but your dataset iterator ran out of data after ").concat(x," batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, ").concat(r.batchesPerEpoch*r.epochs," batches). You may need to use the repeat() function when building your dataset.")),e.abrupt("break",81);case 36:if(null==k.value){e.next=63;break}return S=Jre(t,k.value),_=S.xs,T=S.ys,(I={}).batch=w,I.size=_[0].shape[0],e.next=42,m.onBatchBegin(w,I);case 42:if(N=[],null==r.classWeight){e.next=55;break}C=Xre(r.classWeight,t.outputNames),E=0;case 46:if(!(E<C.length)){e.next=55;break}return e.t1=N,e.next=50,Yre(T[E],null,C[E]);case 50:e.t2=e.sent,e.t1.push.call(e.t1,e.t2);case 52:++E,e.next=46;break;case 55:for(A=_.concat(T).concat(N),R=c(A),WJ(A),O=0;O<l.length;++O)M=l[O],D=R[O],I[M]=D,VJ(D);return e.next=60,m.onBatchEnd(w,I);case 60:are(I),w++,x++;case 63:if(!(a?x>=r.batchesPerEpoch:k.done)){e.next=77;break}if(!i){e.next=76;break}if(F=void 0,!iae(r.validationData)){e.next=74;break}return e.t3=Tee,e.next=70,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 70:e.t4=e.sent,F=(0,e.t3)(e.t4),e.next=75;break;case 74:F=Tee(t.evaluate(o,s,{batchSize:null==r.validationBatchSize?32:r.validationBatchSize,verbose:0}));case 75:for(P=0;P<t.metricsNames.length;++P)b["val_".concat(t.metricsNames[P])]=F[P];case 76:return e.abrupt("break",81);case 77:if(!t.stopTraining_){e.next=79;break}return e.abrupt("break",81);case 79:e.next=29;break;case 81:return e.next=83,m.onEpochEnd(g,b);case 83:if(g++,!t.stopTraining_){e.next=86;break}return e.abrupt("break",88);case 86:e.next=19;break;case 88:return e.next=90,m.onTrainEnd();case 90:return e.next=92,t.history.syncData();case 92:return e.abrupt("return",t.history);case 93:return e.prev=93,t.isTraining=!1,e.finish(93);case 96:case"end":return e.stop()}}),e,null,[[4,,93,96]])}))),rae.apply(this,arguments)}function aae(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function iae(e){return"function"==typeof e.iterator}function oae(e){return"function"==typeof e.next}function sae(e,t,n){return uae.apply(this,arguments)}function uae(){return uae=Tn(Sn().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,i=t.testFunction,o=[],!(r.verbose>0)){e.next=4;break}throw new yee("Verbose mode is not implemented yet.");case 4:if(SY.assert(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but received ".concat(JSON.stringify(r.batches))})),!oae(n)){e.next=9;break}e.t0=n,e.next=12;break;case 9:return e.next=11,n.iterator();case 11:e.t0=e.sent;case 12:s=e.t0,u=0,c=0,l=Sn().mark((function e(){var n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,o=BJ((function(){return n.value&&function(){var e=Jre(t,n.value),r=e.xs,a=e.ys,s=r.concat(a),l=BJ((function(){return i(s)}));if(WJ(s),0===c)for(var f=0;f<l.length;++f)o.push(Z2(0));for(var h=s[0].shape[0],p=function(e){var t=l[e],n=o[e];o[e]=BJ((function(){return s1(o[e],l1(h,t))})),c>0&&WJ(n)},d=0;d<l.length;++d)p(d);WJ(l),u+=h,++c}(),o})),!n.done){e.next=6;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` batches (in this case, ".concat(r.batches," batches). You may need to use the repeat() function when building your dataset.")),e.abrupt("return","break");case 6:case"end":return e.stop()}}),e)}));case 16:if(a&&!(c<r.batches)){e.next=23;break}return e.delegateYield(l(),"t1",18);case 18:if("break"!==e.t1){e.next=21;break}return e.abrupt("break",23);case 21:e.next=16;break;case 23:for(f=0;f<o.length;++f)h=o[f],o[f]=c1(o[f],u),WJ(h);return e.abrupt("return",_ee(o));case 25:case"end":return e.stop()}}),e)}))),uae.apply(this,arguments)}function cae(e){SY.assert(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function lae(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return mte(e,t,n-t)})):mte(e,t,n-t)}function fae(e,t){return BJ((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return fae(e,t)})):Ste(e,"int32"===t.dtype?t:tJ(t,"int32"))}))}function hae(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function pae(e,t,n,r,a,i,o,s,u,c,l,f,h,p,d){return dae.apply(this,arguments)}function dae(){return dae=Tn(Sn().mark((function e(t,n,r,a,i,o,s,u,c,l,f,h,p,d,m){var v,g,y,b,x,w,k,S;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==i&&(i=32),null==o&&(o=1),null==f&&(f=!0),null==p&&(p=0),v=!1,null!=c&&null!=l&&(v=!0),null==m||(v=!0,null!=d)){e.next=4;break}throw new gee("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 4:return null!=(g=t.checkNumSamples(r,i,d,"steps_per_epoch"))&&(y=lte(0,g)),null==s&&(s=1),b=hre(u,s,o,p,g,d,i,v,h),x=b.callbackList,w=b.history,x.setModel(t),t.history=w,e.next=11,x.onTrainBegin();case 11:t.stopTraining_=!1,k=Sn().mark((function e(o){var s;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.onEpochBegin(o);case 2:if(s={},null==d){e.next=5;break}throw new yee("stepsPerEpoch mode is not implemented yet.");case 5:return e.delegateYield(Sn().mark((function e(){var o,u,h,p;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("batch"!==f){e.next=2;break}throw new yee("batch shuffling is not implemneted yet");case 2:f&&SY.shuffle(y),o=e5(y),u=hae(g,i),h=Sn().mark((function e(f){var h;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h={},e.next=3,x.onBatchBegin(f,h);case 3:return BJ((function(){var e=u[f][0],p=u[f][1],d=mte(o,e,p-e);h.batch=f,h.size=p-e;for(var m=fae(r,d),g=n(m),y=0;y<a.length;++y){var b=a[y],x=g[y];h[b]=x,VJ(x)}if(f===u.length-1&&v)for(var w=t.testLoop(c,l,i),k=0;k<a.length;++k){var S=a[k],_=w[k];VJ(_),s["val_"+S]=_}})),e.next=6,x.onBatchEnd(f,h);case 6:if(are(h),!t.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),p=0;case 6:if(!(p<u.length)){e.next=14;break}return e.delegateYield(h(p),"t0",8);case 8:if("break"!==e.t0){e.next=11;break}return e.abrupt("break",14);case 11:++p,e.next=6;break;case 14:o.dispose();case 15:case"end":return e.stop()}}),e)}))(),"t0",6);case 6:return e.next=8,x.onEpochEnd(o,s);case 8:if(!t.stopTraining_){e.next=10;break}return e.abrupt("return","break");case 10:case"end":return e.stop()}}),e)})),S=p;case 14:if(!(S<o)){e.next=22;break}return e.delegateYield(k(S),"t0",16);case 16:if("break"!==e.t0){e.next=19;break}return e.abrupt("break",22);case 19:++S,e.next=14;break;case 22:return e.next=24,x.onTrainEnd();case 24:return e.next=26,t.history.syncData();case 26:return e.abrupt("return",t.history);case 27:case"end":return e.stop()}}),e)}))),dae.apply(this,arguments)}function mae(e,t,n){return vae.apply(this,arguments)}function vae(){return vae=Tn(Sn().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,p,d,m,v,g,y,b,x,w,k,S,_,T,I,N,C,E=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=E.length>3&&void 0!==E[3]?E[3]:{},!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,cae(d=null==a.batchSize?32:a.batchSize),m=!1,e.next=10,t.standardizeUserData(n,r,a.sampleWeight,a.classWeight,m,d);case 10:if(v=e.sent,i=v[0],o=v[1],p=v[2],g=!1,!(null!=a.validationData&&a.validationData.length>0)){e.next=26;break}if(g=!0,2!==a.validationData.length){e.next=18;break}c=a.validationData[0],l=a.validationData[1],e.next=19;break;case 18:throw 3===a.validationData.length?new yee("validationData including sample weights is not supported yet."):new gee("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ".concat(a.validationData," is invalid."));case 19:return b=!0,e.next=22,t.standardizeUserData(c,l,null,null,b,d);case 22:x=e.sent,f=x[0],h=x[1],y=f.concat(h),e.next=27;break;case 26:null!=a.validationSplit&&a.validationSplit>0&&a.validationSplit<1?(g=!0,w=Math.floor(i[0].shape[0]*(1-a.validationSplit)),k=i[0].shape[0],f=lae(i,w,k),s=i,i=lae(i,0,w),h=lae(o,w,k),u=o,o=lae(o,0,w),y=f.concat(h)):null!=a.validationSteps&&(g=!0);case 27:return S=i.concat(o).concat(p),t.checkTrainableWeightsConsistency(),_=t.makeTrainFunction(),T=t.getDedupedMetricsNames(),g?(t.makeTestFunction(),I=t.testFunction,N=T.slice().concat(T.map((function(e){return"val_"+e})))):(I=null,y=[],N=T.slice()),C=lre(a.callbacks,a.yieldEvery),e.next=34,pae(t,_,S,T,d,a.epochs,a.verbose,C,I,y,a.shuffle,N,a.initialEpoch,null,null);case 34:return e.abrupt("return",e.sent);case 35:return e.prev=35,t.isTraining=!1,yae(i,n),yae(o,r),yae(s,n),yae(u,r),yae(f,c),yae(h,l),null!=p&&WJ(p),e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[4,,35,38]])}))),vae.apply(this,arguments)}function gae(e){var t=[];e instanceof i$&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(pte(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function yae(e,t){if(null!=e){var n=[];if(t instanceof i$)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var i=[];if(e instanceof i$)-1===n.indexOf(e.id)&&i.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&i.push(e)}));else if(null!=e)for(var o in e){var s=e[o];-1===n.indexOf(s.id)&&i.push(s)}i.forEach((function(e){e.isDisposed||e.dispose()}))}}function bae(e){return Array.isArray(e)}function xae(e){return!function(e){return e instanceof i$}(e)&&!bae(e)}function wae(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var o=!1;if(bae(e)&&e.length>0)o=!0;else if(xae(e)){for(var s in e)if(e.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new gee("Error when checking model ".concat(i," expected no data, but got ").concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(xae(e)){r=[];var u,c=Oo(t);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(null==e[l])throw new gee('No data provided for "'.concat(l,'". Need data for each key in: ').concat(t));r.push(e[l])}}catch(cBe){c.e(cBe)}finally{c.f()}}else if(bae(e)){if(e.length!==t.length)throw new gee("Error when checking model ".concat(i,": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ").concat(t.length," Tensor(s), but instead got the following list of Tensor(s): ").concat(e));r=e}else{if(t.length>1)throw new gee("The model ".concat(i," expects ").concat(t.length," Tensor(s), but only received one Tensor. Found: Tensor with shape ").concat(e.shape));r=[e]}if(r=gae(r),null!=n)for(var f=0;f<t.length;++f)if(null!=n[f]){var h=r[f];if(h.shape.length!==n[f].length)throw new gee("Error when checking ".concat(i,": expected ").concat(t[f]," to have ").concat(n[f].length," dimension(s). but got array with shape ").concat(h.shape));for(var p=0;p<n[f].length;++p)if(0!==p||a){var d=h.shape[p],m=n[f][p];if(null!=m&&m>=0&&d!==m)throw new gee("".concat(i," expected a batch of elements where each example has shape [").concat(n[f].slice(1,n[f].length),"] (i.e.,tensor shape [*,").concat(n[f].slice(1,n[f].length),"]) but the ").concat(i," received an input with ").concat(h.shape[0]," examples, each with shape [").concat(h.shape.slice(1,h.shape.length),"] (tensor shape [").concat(h.shape,"])"))}}return r}function kae(e,t,n){var r=Mee(e.map((function(e){return e.shape[0]})));r.sort();var a=Mee(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new gee("All input Tensors (x) should have the same number of samples. Got array shapes: ".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(a.length>1)throw new gee("All target Tensors (y) should have the same number of samples. Got array shapes: ".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&a.length>0&&!SY.arraysEqual(r,a))throw new gee("Input Tensors should have the same number of samples as target Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target sample(s)."))}function Sae(e,t,n){for(var r=[mre,xre,yre],a=0;a<e.length;++a){var i=e[a],o=t[a],s=n[a];if(null!=o){if(o===yre&&1===i.shape[i.shape.length-1])throw new gee("You are passing a target array of shape ".concat(i.shape," while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes]."));if(-1!==r.indexOf(o))for(var u=i.shape.slice(1),c=s.slice(1),l=0;l<u.length;++l){var f=u[l],h=c[l];if(null!=h&&f!==h)throw new gee("A target Tensor with shape ".concat(i.shape," was passed for an output of shape ").concat(s,", while using a loss function that expects targets to have the same shape as the output."))}}}}function _ae(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new gee("Error when checking model ".concat(i,": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ").concat(t.length," Tensor(s), but instead got ").concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new gee("The model expects ".concat(t.length," ").concat(i," Tensors, but only received one Tensor. Found: array with shape ").concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var s=r[o];if(s.shape.length!==n[o].length)throw new gee("Error when checking ".concat(i,": expected ").concat(t[o]," to have ").concat(n[o].length," dimension(s), but got array with shape ").concat(JSON.stringify(s.shape)));for(var u=0;u<n[o].length;++u)if(0!==u||a){var c=s.shape[u],l=n[o][u];if(null!=l&&l!==c)throw new gee("Error when checking ".concat(i,": expected ").concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but got array with shape ").concat(JSON.stringify(s.shape),"."))}}}var Tae=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).isTraining=!1,r}return(0,C.Z)(n,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new gee("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");zre(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return t8.adagrad(.01)},Adadelta:function(){return t8.adadelta(1,.95,fte())},Adam:function(){return t8.adam(.001,.9,.999,fte())},Adamax:function(){return t8.adamax(.002,.9,.999,fte(),0)},RMSProp:function(){return t8.rmsprop(.001,.9,0,fte())},SGD:function(){return t8.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new gee("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof G6))throw new gee("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new gee("When passing an Array as loss, it should have one entry per model output. The model has ".concat(this.outputs.length," output(s), but you passed loss=").concat(e.loss,"."));n=e.loss.map((function(e){return Sre(e)}))}else{var r=Sre(e.loss);this.outputs.forEach((function(e){n.push(r)}))}else{for(var a in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(a))throw new gee('Unknown entry in loss dictionary: "'.concat(a,'". Only expected the following keys: ').concat(this.outputNames));var i,o=Oo(this.outputNames);try{for(o.s();!(i=o.n()).done;){var s=i.value;null==e.loss[s]&&console.warn('Output "'.concat(s,'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ').concat(s," during training")),n.push(Sre(e.loss[s]))}}catch(cBe){o.e(cBe)}finally{o.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var u=0;u<this.outputs.length;++u){var c=this.internalOutputShapes[u],l=this.outputNames[u];this.feedOutputNames.push(l),this.feedOutputShapes.push(c),this.feedLossFns.push(this.lossFunctions[u])}var f=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],ete("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===f.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var h=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"==typeof e||"function"==typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],i=Oo(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),a.push(s)}}catch(cBe){i.e(cBe)}finally{i.f()}return a}(e.metrics,this.outputNames),p=function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])};ete("metric",(function(){for(var e=function(e){if(-1!==f.indexOf(e))return"continue";!function(n){var r,a,i,o,s=Oo(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;if("string"==typeof u&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(u)){var c=t.internalOutputShapes[e];1===c[c.length-1]||t.lossFunctions[e]===xre?-1!==["accuracy","acc"].indexOf(u)?a=_re:-1!==["crossentropy","ce"].indexOf(u)&&(a=Ere):t.lossFunctions[e]===bre?-1!==["accuracy","acc"].indexOf(u)?a=Are:-1!==["crossentropy","ce"].indexOf(u)&&(a=Ore):-1!==["accuracy","acc"].indexOf(u)?a=Tre:-1!==["crossentropy","ce"].indexOf(u)&&(a=Rre);var l=void 0;-1!==["accuracy","acc"].indexOf(u)?l="acc":-1!==["crossentropy","ce"].indexOf(u)&&(l="ce"),i=a,r=""+l}else i=Dre(u),r=""+Fre(u);var f=void 0;ete(r,(function(){f=i})),p(e,r,f)}}catch(cBe){s.e(cBe)}finally{s.f()}}(h[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;cae(r);var a=!0,i=this.standardizeUserDataXY(e,t,a,r);try{var o=i[0].concat(i[1]);this.makeTestFunction();var s=this.testFunction,u=this.testLoop(s,o,r,n.verbose,n.steps);return _ee(u)}finally{yae(i[0],e),yae(i[1],t)}}},{key:"evaluateDataset",value:function(){var e=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.makeTestFunction(),sae(this,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new gee("If ".concat(a," is set, batchSize must be null or undefined.Got batchSize = ").concat(t))}else{if(null==e)throw new gee("Either the input data should have a defined shape, or ".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new gee("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new vne;if(e instanceof i$&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new gee("The number of inputs provided (".concat(e.length,") does not match the number of inputs of this model (").concat(this.inputs.length,")."));for(var o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else{var s,u=Oo(this.inputs);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=e[c.name];if(null==l)throw new gee("No value is provided for the model's input ".concat(c.name));i.add(c,l)}}catch(cBe){u.e(cBe)}finally{u.f()}}var f=bne(a,i);return n?f:f[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=wee(null,e.length),r=e.length,a=Oo(this.layers);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],s=o.map((function(e){return e.name})),u=0;u<e.length;++u){var c=s.indexOf(e[u]);if(-1!==c&&(n[u]=o[c],r--),0===r)break}if(0===r)break}}catch(cBe){a.e(cBe)}finally{a.f()}if(r>0){var l=[];throw n.forEach((function(t,n){null==t&&l.push(e[n])})),new gee("Cannot find SymbolicTensors for output name(s): ".concat(JSON.stringify(l)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return BJ((function(){var a=t.checkNumSamples(e);if(r)throw new yee("Verbose predictLoop() is not implemented yet.");for(var i=hae(a,n),o=t.outputs.map((function(e){return[]})),s=function(n){BJ((function(){var r=i[n][0],a=i[n][1],o=lae(e,r,a),s=[];if(Array.isArray(o))for(var u=0;u<o.length;++u)s.push({key:t.inputs[u],value:o[u]});else s.push({key:t.inputs[0],value:o});var c=new vne(s);return bne(t.outputs,c)})).forEach((function(e,t){return o[t].push(e)}))},u=0;u<i.length;++u)s(u);return _ee(o.map((function(e){return U1(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=gae(e);_ae(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return cae(r),this.predictLoop(n,r)}finally{yae(n,e)}}},{key:"predictOnBatch",value:function(e){_ae(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new vee("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var i=this.feedOutputShapes[a];this.feedLossFns[a]===bre?r.push(i.slice(0,i.length-1).concat([1])):r.push(i)}if(kae(e=wae(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=wae(t,this.feedOutputNames,r,!1,"target")),Sae(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new gee("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=Tn(Sn().mark((function e(t,n,r,a){var i,o,s,u,c,l,f,h,p,d=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(d.length>4&&void 0!==d[4])||d[4],o=d.length>5?d[5]:void 0,s=this.standardizeUserDataXY(t,n,i,o),u=(0,T.Z)(s,2),c=u[0],l=u[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(f=null,null==a){e.next=19;break}h=Xre(a,this.outputNames),f=[],p=0;case 10:if(!(p<h.length)){e.next=19;break}return e.t0=f,e.next=14,Yre(l[p],null,h[p]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++p,e.next=10;break;case 19:return e.abrupt("return",[c,l,f]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return BJ((function(){var o=r.checkNumSamples(t,n,i,"steps"),s=[];if(a>0)throw new yee("Verbose mode is not implemented yet.");if(null!=i)throw new yee("steps mode in testLoop() is not implemented yet");for(var u=hae(o,n),c=e5(lte(0,o)),l=0;l<u.length;++l){var f=u[l][0],h=u[l][1],p=mte(c,f,h-f),d=fae(t,p),m=e(d);if(0===l)for(var v=0;v<m.length;++v)s.push(Z2(0));for(var g=0;g<m.length;++g){var y=m[g];s[g]=s1(s[g],l1(h-f,y))}}for(var b=0;b<s.length;++b)s[b]=c1(s[b],o);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;See(e,r)>1&&(a+="_".concat(See(e.slice(0,n),r))),t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),o=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var u,c=new vne(t),l=bne(e.outputs,c,{training:!0}),f=0;f<e.lossFunctions.length;++f){var h=(0,e.lossFunctions[f])(a[f],l[f]);null!=i[f]&&(h=Qre(h,i[f]));var p=W3(h);n.push(p),u=0===f?h:s1(u,h)}for(var d=0;d<e.metricsTensors.length;++d){var m=void 0;if(e.outputs.length>1&&d<e.outputs.length)m=n[d];else{var v=e.metricsTensors[d][0],g=e.metricsTensors[d][1];m=W3(v(a[g],l[g]))}VJ(m),o.push(m)}return u=W3(u),e.calculateLosses().forEach((function(e){u=s1(u,e)})),u}),!0,s)].concat(o)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return BJ((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],s=0;s<e.inputs.length;++s)o.push({key:e.inputs[s],value:a[s]});for(var u=new vne(o),c=bne(e.outputs,u),l=0;l<e.lossFunctions.length;++l){var f=e.lossFunctions[l],h=W3(f(i[l],c[l]));n=0===l?h:s1(n,h),r.push(n)}for(var p=0;p<e.metricsTensors.length;++p){var d=e.metricsTensors[p][0],m=e.metricsTensors[p][1],v=W3(d(i[m],c[m]));r.push(v)}return r}))}}},{key:"fit",value:function(){var e=Tn(Sn().mark((function e(t,n){var r,a=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",mae(this,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nae(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u,c,l,f;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],i=r[1],o=this.makeTrainFunction()(a.concat(i)),s=[],u=Oo(o),e.prev=8,u.s();case 10:if((c=u.n()).done){e.next=18;break}return l=c.value,e.next=14,l.data();case 14:f=e.sent,s.push(f[0]);case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),u.e(e.t0);case 23:return e.prev=23,u.f(),e.finish(23);case 26:return e.abrupt("return",(WJ(o),yae(r[0],t),yae(r[1],n),_ee(s)));case 27:case"end":return e.stop()}}),e,this,[[8,20,23,26]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=bf(R(n.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=LJ().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-LJ().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"==typeof this.loss)e=Iee(this.loss);else if(Array.isArray(this.loss)){var t,n=Oo(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!=typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(cBe){n.e(cBe)}finally{n.f()}e=this.loss.map((function(e){return Iee(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var s=o[i];if("string"!=typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=Iee(a[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[Iee(Fre(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return Iee(Fre(e))}));var e={};for(var t in this.metrics)e[t]=Iee(Fre(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=pre(Zre(e.optimizer_config));if("string"==typeof e.loss)t=Nee(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return Nee(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=Nee(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return Nee(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=Nee(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var e=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u,c,l;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=7;break}if(0!==(r=aJ.getSaveHandlers(t)).length){e.next=4;break}throw new gee("Cannot find any save handlers for URL '".concat(t,"'"));case 4:if(!(r.length>1)){e.next=6;break}throw new gee("Found more than one (".concat(r.length,") save handlers for URL '").concat(t,"'"));case 6:t=r[0];case 7:if(null!=t.save){e.next=9;break}throw new gee("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 9:return e.next=11,aJ.encodeWeights(this.getNamedWeights(n));case 11:if(a=e.sent,!1,null,i={modelTopology:this.toJSON(null,false),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(qre),convertedBy:null},null==n||!n.includeOptimizer||null==this.optimizer){e.next=29;break}return i.trainingConfig=this.getTrainingConfig(),s="optimizer",e.t0=aJ,e.next=21,this.optimizer.getWeights();case 21:return e.t1=e.sent,e.t2=s,e.next=25,e.t0.encodeWeights.call(e.t0,e.t1,e.t2);case 25:u=e.sent,c=u.data,l=u.specs,(o=a.specs).push.apply(o,(0,I.Z)(l)),a.data=aJ.concatenateArrayBuffers([a.data,c]);case 29:return e.abrupt("return",(null!=this.userDefinedMetadata&&(Pre(this.userDefinedMetadata,this.name,!0),i.userDefinedMetadata=this.userDefinedMetadata),i.weightData=a.data,i.weightSpecs=a.specs,t.save(i)));case 30:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){Pre(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),n}(Kre);Tae.className="Model",V0.registerClass(Tae);var Iae=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n)}(Tae);function Nae(e,t){return Cae.apply(this,arguments)}function Cae(){return Cae=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u,c,l;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("modelTopology"in t||(t={modelTopology:t}),null!=(r=t.modelTopology).model_config&&(r=r.model_config),a=Zre(r),i=pre(a,n),null==t.weightsManifest){e.next=12;break}return e.next=7,aJ.loadWeights(t.weightsManifest,t.pathPrefix,i.weights.map((function(e){return e.originalName})));case 7:o=e.sent,s={},u=Oo(i.weights);try{for(u.s();!(c=u.n()).done;)l=c.value,s[l.originalName]=o[l.originalName]}catch(cBe){u.e(cBe)}finally{u.f()}i.loadWeights(s),WJ(o);case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)}))),Cae.apply(this,arguments)}function Eae(e,t){return Aae.apply(this,arguments)}function Aae(){return Aae=Tn(Sn().mark((function e(t,n){var r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),"string"!=typeof t){e.next=9;break}if(0!==(r=aJ.getLoadHandlers(t,n)).length){e.next=6;break}r.push(aJ.browserHTTPRequest(t,n)),e.next=8;break;case 6:if(!(r.length>1)){e.next=8;break}throw new gee("Found more than one (".concat(r.length,") load handlers for URL '").concat(t,"'"));case 8:t=r[0];case 9:return e.abrupt("return",Rae(t,void 0,n));case 10:case"end":return e.stop()}}),e)}))),Aae.apply(this,arguments)}function Rae(e,t,n){return Oae.apply(this,arguments)}function Oae(){return Oae=Tn(Sn().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r&&(r={}),null!=t.load){e.next=2;break}throw new gee("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 2:return e.next=4,t.load();case 4:if(a=e.sent,null!=(i=a.modelTopology).model_config&&(i=i.model_config),o=null==r.strict||r.strict,s=null!=a.weightData&&null!=a.weightSpecs&&o,u=pre(Zre(i),n,s),null!=(c=a.trainingConfig)&&u.loadTrainingConfig(c),null!=a.userDefinedMetadata&&u.setUserDefinedMetadata(a.userDefinedMetadata),null==a.weightData){e.next=19;break}if(null!=a.weightSpecs){e.next=11;break}throw new gee("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");case 11:if(l=Mae(a.weightData,a.weightSpecs),f=l.modelWeights,h=l.optimizerWeights,u.loadWeights(f,o),e.t0=null!=u.optimizer&&h.length>0,!e.t0){e.next=17;break}return e.next=17,u.optimizer.setWeights(h);case 17:WJ(f),WJ(h.map((function(e){return e.tensor})));case 19:return e.abrupt("return",u);case 20:case"end":return e.stop()}}),e)}))),Oae.apply(this,arguments)}function Mae(e,t){var n=aJ.decodeWeights(e,t),r={},a=[];return t.forEach((function(e){"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]})),{modelWeights:r,optimizerWeights:a}}Iae.className="Functional",V0.registerClass(Iae);var Dae=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:Uee("sequential_"),null!=e.layers){var a,i=Oo(e.layers);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.add(o)}}catch(cBe){i.e(cBe)}finally{i.f()}}return P(r)}return(0,C.Z)(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new gee("Negative dimension size caused by adding layer ".concat(e.name," with input shape [").concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof Tae;if(r){if(1!==(t=e).outputs.length)throw new gee("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new gee("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new gee("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=mne({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new gee("A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ".concat(e.name," which has ").concat(e.inboundNodes.length," pre-existing inbound connections."));if(1!==e.inboundNodes[0].outputTensors.length)throw new gee("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=pne(this.outputs[0])}this.inboundNodes=[],new lne({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:wee(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(tne(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Tae({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),bf(R(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),bf(R(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new vee("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new vee("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=Tn(Sn().mark((function e(t,n){var r,a=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new vee("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new vee("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new gee("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new gee("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=Oo(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(cBe){n.e(cBe)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new gee("Legacy serialization format not supported yet.");r=t}else SY.assert(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,i=t;var o=new e(i);if(!(o instanceof n))throw new yee("Sequential.fromConfig called on non-Sequential input: ".concat(o));var s,u=Oo(r);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=pre(c,void 0,a);a&&l.setFastWeightInitDuringBuild(!0),o.add(l)}}catch(cBe){u.e(cBe)}finally{u.f()}return o}}]),n}(Tae);function Fae(e){return new Tae(e)}function Pae(e){return new Dae(e)}function Lae(e){return mne(e)}function zae(e,t){fre.registerCallbackConstructor(e,t)}Dae.className="Sequential",V0.registerClass(Dae);var Bae=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(V0.Serializable),Wae=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Nte(e,t)}}]),n}(Bae);Wae.className="elu",V0.registerClass(Wae);var Vae=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"apply",value:function(e){return R4(e)}}]),n}(Bae);Vae.className="selu",V0.registerClass(Vae);var jae=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"apply",value:function(e){return k4(e)}}]),n}(Bae);jae.className="relu",V0.registerClass(jae);var Uae=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"apply",value:function(e){return BJ((function(){return H3(6,k4(e))}))}}]),n}(Bae);Uae.className="relu6",V0.registerClass(Uae);var Hae=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"apply",value:function(e){return e}}]),n}(Bae);Hae.className="linear",V0.registerClass(Hae);var Zae=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"apply",value:function(e){return H1(e)}}]),n}(Bae);Zae.className="sigmoid",V0.registerClass(Zae);var Gae=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"apply",value:function(e){return function(e){return BJ((function(){var t=s1(.5,l1(.2,e));return i2(t,0,1)}))}(e)}}]),n}(Bae);Gae.className="hardSigmoid",V0.registerClass(Gae);var qae=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"apply",value:function(e){return _3(e)}}]),n}(Bae);qae.className="softplus",V0.registerClass(qae);var Kae=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"apply",value:function(e){return function(e){return BJ((function(){return c1(e,s1(f1(e),1))}))}(e)}}]),n}(Bae);Kae.className="softsign",V0.registerClass(Kae);var Xae=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"apply",value:function(e){return G1(e)}}]),n}(Bae);Xae.className="tanh",V0.registerClass(Xae);var Yae=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return j4(e,t)}}]),n}(Bae);Yae.className="softmax",V0.registerClass(Yae);var $ae=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return N3(e,t)}}]),n}(Bae);$ae.className="logSoftmax",V0.registerClass($ae);var Qae=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return BJ((function(){return l1(H1(l1(e,t)),e)}))}}]),n}(Bae);Qae.className="swish",V0.registerClass(Qae);var Jae=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"apply",value:function(e){return BJ((function(){return l1(e,G1(_3(e)))}))}}]),n}(Bae);function eie(e){return e.getClassName()}function tie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ree(e,V0.SerializationMap.getMap().classNameMap,t,"activation")}function nie(e){if(null==e){var t={className:"linear",config:{}};return tie(t)}if("string"==typeof e){var n={};return n.className=e,n.config={},tie(n)}return e instanceof Bae?e:tie(e)}function rie(e){if(null!=e&&"object"!=typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: ".concat(e))}Jae.className="mish",V0.registerClass(Jae);var aie=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n)}(V0.Serializable),iie=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),r=t.call(this),rie(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return(0,C.Z)(n,[{key:"apply",value:function(e){var t=this;return BJ((function(){var n=V3([1]);return t.hasL1&&(n=s1(n,K2(l1(t.l1,f1(e))))),t.hasL2&&(n=s1(n,K2(l1(t.l2,_te(e))))),W1(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(aie);iie.className="L1L2",V0.registerClass(iie);var oie={l1l2:"L1L2"};function sie(e){return Eee(e)}function uie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ree(e,V0.SerializationMap.getMap().classNameMap,t,"regularizer")}function cie(e){return null==e?null:"string"==typeof e?uie({className:e in oie?oie[e]:e,config:{}}):e instanceof aie?e:uie(e)}var lie=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return(0,C.Z)(n,[{key:"call",value:function(e,t){e=ene(e);var n=k4(e);return null!=this.maxValue&&(n=i2(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne);lie.className="ReLU",V0.registerClass(lie);var fie=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return(0,C.Z)(n,[{key:"call",value:function(e,t){var n=ene(e);return l3(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne);fie.className="LeakyReLU",V0.registerClass(fie);var hie=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=$te(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=cie(e.alphaRegularizer),r.alphaConstraint=Mne(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new gee("Expected sharedAxes to be a number or an array of numbers, but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return P(r)}return(0,C.Z)(n,[{key:"build",value:function(e){var t=(e=tne(e)).slice(1);if(null!=this.sharedAxes){var n,r=Oo(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(cBe){r.e(cBe)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)a[i]=e[i];this.inputSpec=[new sne({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=ene(e),o4(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:Yte(this.alphaInitializer),alphaRegularizer:sie(this.alphaRegularizer),alphaConstraint:Rne(this.alphaConstraint),sharedAxes:this.sharedAxes},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne);hie.className="PReLU",V0.registerClass(hie);var pie=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new yee("Non-default alpha value (".concat(e.alpha,") is not supported by the ELU layer yet."));return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,P(r)}return(0,C.Z)(n,[{key:"call",value:function(e,t){var n=ene(e);return O2(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne);pie.className="ELU",V0.registerClass(pie);var die=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return(0,C.Z)(n,[{key:"call",value:function(e,t){var n=ene(e);return l1(n,tJ(i3(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne);die.className="ThresholdedReLU",V0.registerClass(die);var mie=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new Yae).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return(0,C.Z)(n,[{key:"call",value:function(e,t){var n=ene(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne);function vie(e,t,n){if("number"==typeof e)return wee(e,t);if(e.length!==t)throw new gee("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers. Received: ").concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if(!ote(a))throw new gee("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers. Received: ").concat(JSON.stringify(e)," including a non-integer number ").concat(a))}return e}function gie(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(null==e)return e;var i,o=t+(t-1)*(a-1);return i="same"===n?e:e-o+1,Math.floor((i+r-1)/r)}function yie(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+cte([n-t,0]);else{if("same"!==r)throw new gee("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function bie(e,t){return BJ((function(){return Yee(t),"channelsFirst"===t?t0(e,[0,2,3,1]):e}))}function xie(e,t){return BJ((function(){return Yee(t),"channelsFirst"===t?t0(e,[0,2,3,4,1]):e}))}function wie(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return BJ((function(){if(null==i&&(i="channelsLast"),Yee(i),3!==e.rank&&4!==e.rank)throw new gee("conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new gee("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ".concat(e.rank,"."));var u=bie(e,i);if("causal"===a)throw new yee("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=N5.conv2d({x:u,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(u=t0(u,[0,3,1,2])),u}))}mie.className="Softmax",V0.registerClass(mie);var kie=function(e){A(n,e);var t=L(n);function n(e,r){var a;if(N(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,Lee(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new yee("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is not implemented yet."));if(a.kernelSize=vie(r.kernelSize,e,"kernelSize"),a.strides=vie(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,$ee(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,Yee(a.dataFormat),a.activation=nie(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=$te(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=Mne(r.biasConstraint),a.biasRegularizer=cie(r.biasRegularizer),a.activityRegularizer=cie(r.activityRegularizer),a.dilationRate=vie(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new gee("dilationRate must be a number or an array of a single number for 1D convolution, but received ".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"==typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new gee("dilationRate must be a number or array of two numbers for 2D convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"==typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new gee("dilationRate must be a number or array of three numbers for 3D convolution, but received ".concat(JSON.stringify(a.dilationRate)));return P(a)}return(0,C.Z)(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:eie(this.activation),useBias:this.useBias,biasInitializer:Yte(this.biasInitializer),biasRegularizer:sie(this.biasRegularizer),activityRegularizer:sie(this.activityRegularizer),biasConstraint:Rne(this.biasConstraint)},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(kee("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!Pee(e.kernelSize,"number",1,3))throw new gee("BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(hne),Sie=function(e){A(n,e);var t=L(n);function n(e,r){var a;return N(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,Lee(a.filters,"filters"),a.kernelInitializer=$te(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=Mne(r.kernelConstraint),a.kernelRegularizer=cie(r.kernelRegularizer),a}return(0,C.Z)(n,[{key:"build",value:function(e){e=tne(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new gee("The channel dimension of the input should be defined. Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(0,Ft.Z)({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return BJ((function(){e=ene(e);var t,r=null==n.bias?null:n.bias.read(),a=Bee(n.activation.getClassName());if(null!=a&&2===n.rank)t=wie(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return BJ((function(){if(null==i&&(i="channelsLast"),Yee(i),3!==e.shape.length)throw new gee("The input of a conv1dWithBias operation should be 3, but is ".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new gee("The kernel for a conv1dWithBias operation should be 3, but is ".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new gee("The bias for a conv1dWithBias operation should be 1, but is ".concat(t.shape.length," instead"));if("channelsFirst"===i&&(e=t0(e,[0,2,1])),"causal"===a)throw new yee("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=f2(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(s=Ite(s,n)),s}))}(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=wie(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new yee("convolutions greater than 3D are not implemented yet.");t=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return BJ((function(){if(null==i&&(i="channelsLast"),Yee(i),4!==e.rank&&5!==e.rank)throw new gee("conv3dWithBias expects input to be of rank 4 or 5, but received ".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new gee("conv3dWithBias expects kernel to be of rank 4 or 5, but received ".concat(e.rank,"."));var s=xie(e,i);if("causal"===a)throw new yee("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=d2(s,t,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(s=Ite(s,n)),"channelsFirst"===i&&(s=t0(s,[0,4,1,2,3])),s}))}(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=tne(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=gie(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:Yte(this.kernelInitializer),kernelRegularizer:sie(this.kernelRegularizer),kernelConstraint:Rne(this.kernelConstraint)},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new gee("Convolution layer expected config.filters to be a 'number' > 0 but got ".concat(JSON.stringify(e.filters)))}}]),n}(kie),_ie=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return(0,C.Z)(n,[{key:"getConfig",value:function(){var e=bf(R(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!=typeof e.kernelSize&&!Pee(e.kernelSize,"number",1,2))throw new gee("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(Sie);_ie.className="Conv2D",V0.registerClass(_ie);var Tie=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return(0,C.Z)(n,[{key:"getConfig",value:function(){var e=bf(R(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new gee("Conv3D expects config.kernelSize to be number or [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(Sie);Tie.className="Conv3D",V0.registerClass(Tie);var Iie=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),(r=t.call(this,e)).inputSpec=[new sne({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new gee("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ".concat(r.padding));return P(r)}return(0,C.Z)(n,[{key:"build",value:function(e){if(4!==(e=tne(e)).length)throw new gee("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new gee("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new sne({ndim:4,axes:(0,Ft.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return BJ((function(){var t=ene(e);if(4!==t.shape.length)throw new gee("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-".concat(t.shape.length));var r,a,i=t.shape,o=i[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=i[r],u=i[a],c=n.kernelSize[0],l=n.kernelSize[1],f=n.strides[0],h=n.strides[1],p=[o,yie(s,f,c,n.padding),yie(u,h,l,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=t0(t,[0,2,3,1]));var d=p2(t,n.kernel.read(),p,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(d=t0(d,[0,3,1,2])),null!=n.bias&&(d=Ite(d,n.bias.read(),n.dataFormat)),null!=n.activation&&(d=n.activation.apply(d)),d}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=tne(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=yie(a[n],s,i,this.padding),a[r]=yie(a[r],u,o,this.padding),a}},{key:"getConfig",value:function(){var e=bf(R(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(_ie);Iie.className="Conv2DTranspose",V0.registerClass(Iie);var Nie=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),(r=t.call(this,e)).inputSpec=[new sne({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new gee("Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ".concat(r.padding));return P(r)}return(0,C.Z)(n,[{key:"build",value:function(e){if(5!==(e=tne(e)).length)throw new gee("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new gee("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new sne({ndim:5,axes:(0,Ft.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return BJ((function(){var t=ene(e);if(5!==t.shape.length)throw new gee("Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-".concat(t.shape.length));var r,a,i,o=t.shape,s=o[0];"channelsFirst"===n.dataFormat?(i=2,r=3,a=4):(i=1,r=2,a=3);var u=o[i],c=o[r],l=o[a],f=n.kernelSize[0],h=n.kernelSize[1],p=n.kernelSize[2],d=n.strides[0],m=n.strides[1],v=n.strides[2],g=[s,yie(u,d,f,n.padding),yie(c,m,h,n.padding),yie(l,v,p,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=t0(t,[0,2,3,4,1]));var y=v2(t,n.kernel.read(),g,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(y=t0(y,[0,4,1,2,3])),null!==n.bias&&(y=Ite(y,n.bias.read(),n.dataFormat)),null!==n.activation&&(y=n.activation.apply(y)),y}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a,i=(e=tne(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);var o=this.kernelSize[0],s=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],l=this.strides[1],f=this.strides[2];return i[t]=this.filters,i[n]=yie(i[n],c,o,this.padding),i[r]=yie(i[r],l,s,this.padding),i[a]=yie(i[a],f,u,this.padding),i}},{key:"getConfig",value:function(){var e=bf(R(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(Tie);Nie.className="Conv3DTranspose",V0.registerClass(Nie);var Cie=function(e){A(n,e);var t=L(n);function n(e,r){var a;if(N(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new gee("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new gee("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new gee("SeparableConv".concat(a.rank,"D supports only padding modes: 'same' and 'valid', but received ").concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=$te(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=cie(r.depthwiseRegularizer),a.depthwiseConstraint=Mne(r.depthwiseConstraint),a.pointwiseInitializer=$te(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=cie(r.pointwiseRegularizer),a.pointwiseConstraint=Mne(r.pointwiseConstraint),P(a)}return(0,C.Z)(n,[{key:"build",value:function(e){if((e=tne(e)).length<this.rank+2)throw new gee("Inputs to SeparableConv".concat(this.rank,"D should have rank ").concat(this.rank+2,", but received input shape: ").concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new gee("The channel dimension of the inputs should be defined, but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters);var o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new sne({ndim:this.rank+2,axes:(0,Ft.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return BJ((function(){var t;if(e=ene(e),1===n.rank)throw new yee("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=t0(e,[0,2,3,1])),t=O4(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=Ite(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=t0(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=bf(R(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Yte(this.depthwiseInitializer),e.pointwiseInitializer=Yte(this.pointwiseInitializer),e.depthwiseRegularizer=sie(this.depthwiseRegularizer),e.pointwiseRegularizer=sie(this.pointwiseRegularizer),e.depthwiseConstraint=Rne(this.depthwiseConstraint),e.pointwiseConstraint=Rne(this.pointwiseConstraint),e}}]),n}(Sie);Cie.className="SeparableConv";var Eie=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,2,e)}return(0,C.Z)(n)}(Cie);Eie.className="SeparableConv2D",V0.registerClass(Eie);var Aie=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return(0,C.Z)(n,[{key:"getConfig",value:function(){var e=bf(R(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!=typeof e.kernelSize&&!Pee(e.kernelSize,"number",1,1))throw new gee("Conv1D expects config.kernelSize to be number or number[] with length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(Sie);Aie.className="Conv1D",V0.registerClass(Aie);var Rie=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),r=t.call(this,e),"number"==typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return(0,C.Z)(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return BJ((function(){if(e=ene(e),"channelsLast"===n.dataFormat){var t=gte(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return gte(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=gte(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return gte(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne);Rie.className="Cropping2D",V0.registerClass(Rie);var Oie=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Yee(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,function(e){Fee(Zee,"InterpolationFormat",e)}(r.interpolation),r}return(0,C.Z)(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return BJ((function(){var t=ene(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=t0(t,[0,2,3,1]);var a=n.size[0]*r[2],i=n.size[1]*r[3],o="nearest"===n.interpolation?V6.resizeNearestNeighbor(t,[a,i]):V6.resizeBilinear(t,[a,i]);return t0(o,[0,3,1,2])}var s=n.size[0]*r[1],u=n.size[1]*r[2];return"nearest"===n.interpolation?V6.resizeNearestNeighbor(t,[s,u]):V6.resizeBilinear(t,[s,u])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne);Oie.className="UpSampling2D",V0.registerClass(Oie);var Mie=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=$te(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=Mne(e.depthwiseConstraint),r.depthwiseRegularizer=cie(e.depthwiseRegularizer),r}return(0,C.Z)(n,[{key:"build",value:function(e){if((e=tne(e)).length<4)throw new gee("Inputs to DepthwiseConv2D should have rank 4. Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new gee("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return BJ((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return BJ((function(){null==a&&(a="channelsLast"),Yee(a);var o=bie(e,a);if(4!==e.rank)throw new gee("Input for depthwiseConv2d is required to be 4-D, but is instead ".concat(e.rank,"-D"));if(4!==t.rank)throw new gee("depthwiseKernel is required to be 4-D, but is instead ".concat(t.rank,"-D"));return o=S2(o,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(o=t0(o,[0,3,1,2])),o}))}(e=ene(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=Ite(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=tne(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=gie(t,this.kernelSize[0],this.padding,this.strides[0]),i=gie(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}},{key:"getConfig",value:function(){var e=bf(R(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Yte(this.depthwiseInitializer),e.depthwiseRegularizer=sie(this.depthwiseRegularizer),e.depthwiseConstraint=Rne(this.depthwiseRegularizer),e}}]),n}(kie);function Die(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new gee("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function Fie(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return BJ((function(){var u=t.shape.length;if(u<3)throw new gee("Input should be at least 3D, but is ".concat(u,"D."));var c=[1,0].concat(lte(2,u));if(t=t0(t,c),null!=i)throw new yee("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=tJ(tJ(a,"bool"),"float32")).rank===u-1&&(a=J2(a,-1)),a=t0(a,c)),r&&(t=_4(t,0),null!=a&&(a=_4(a,0)));var l,f,h=[],p=n,d=t.shape[0],m=c5(t);null!=a&&(f=c5(a));for(var v,g=function(t){var n=m[t],r=BJ((function(){return e(n,p)}));if(null==a)l=r[0],p=r[1];else{var i=BJ((function(){var e=f[t],n=I3($3(e),e),a=s1(l1(r[0],e),l1(p[0],n)),i=p.map((function(t,a){return s1(l1(r[1][a],e),l1(t,n))}));return{output:a,newStates:i}}));l=i.output,p=i.newStates}s&&h.push(l)},y=0;y<d;++y)g(y);return s&&(v=Y4(h,1)),[l,v,p]}))}Mie.className="DepthwiseConv2D",V0.registerClass(Mie);var Pie=function(e){A(n,e);var t=L(n);function n(e){var r,a;if(N(this,n),r=t.call(this,e),null==e.cell)throw new gee("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new Hie({cells:e.cell}):e.cell).stateSize)throw new gee("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new sne({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return(0,C.Z)(n,[{key:"getStates",value:function(){return null==this.states_?lte(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){Qte(e)&&(e=e[0]);var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,i=[],o=Oo(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push([e[0],s])}}catch(cBe){o.e(cBe)}finally{o.f()}return[n].concat(i)}return n}},{key:"computeMask",value:function(e,t){var n=this;return BJ((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new yee("Constants support is not implemented in RNN yet.");Qte(e)&&(e=e[0]);var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new sne({shape:[t,null].concat((0,I.Z)(n))});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!SY.arraysEqual(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new gee("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; However cell.stateSize is ").concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new sne({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];BJ((function(){if(!t.stateful)throw new mee("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new gee("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return V3([r,e])})):t.states_=[V3([r,t.cell.stateSize])];else if(null==e)WJ(t.states_),null!=t.keptStates&&(WJ(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return V3([r,e])})):t.states_[0]=V3([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new gee("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), but it received ").concat(e.length," state value(s). Input received: ").concat(e));!0===n?t.keptStates.push(t.states_.slice()):WJ(t.states_);for(var a=0;a<t.states_.length;++a){var i=e[a],o=Array.isArray(t.cell.stateSize)?t.cell.stateSize[a]:t.cell.stateSize,s=[r,o];if(!SY.arraysEqual(i.shape,s))throw new gee("State ".concat(a," is incompatible with layer ").concat(t.name,": expected shape=").concat(s,", received shape=").concat(i.shape));t.states_[a]=i}}t.states_=t.states_.map((function(e){return VJ(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=Die(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;var o=[],s=[];if(null!=r){t.initialState=r,o=o.concat(r),this.stateSpec=[];var u,c=Oo(r);try{for(c.s();!(u=c.n()).done;){var l=u.value;this.stateSpec.push(new sne({shape:l.shape}))}}catch(cBe){c.e(cBe)}finally{c.f()}s=s.concat(this.stateSpec)}if(null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof une){var f=[e].concat(o),h=this.inputSpec.concat(s),p=this.inputSpec;this.inputSpec=h;var d=bf(R(n.prototype),"apply",this).call(this,f,t);return this.inputSpec=p,d}return bf(R(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return BJ((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;e=ene(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new gee("RNN Layer has ".concat(o," state(s) but was passed ").concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},u=Fie((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,i,n.goBackwards,r,null,n.unroll,n.returnSequences),c=u[0],l=u[1],f=u[2];n.stateful&&n.resetStates(f,a);var h=n.returnSequences?l:c;return n.returnState?[h].concat(f):h}))}},{key:"getInitialState",value:function(e){var t=this;return BJ((function(){var n=V3(e.shape);return n=pte(n=K2(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?xte(n,[1,e]):n})):t.cell.stateSize>1?[xte(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){bf(R(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=bf(R(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.cell,a=pre(r,n);return new e(Object.assign(t,{cell:a}))}}]),n}(hne);Pie.className="RNN",V0.registerClass(Pie);var Lie=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n)}(hne),zie=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,Lee(r.units,"units"),r.activation=nie(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=$te(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=$te(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=$te(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=cie(e.kernelRegularizer),r.recurrentRegularizer=cie(e.recurrentRegularizer),r.biasRegularizer=cie(e.biasRegularizer),r.kernelConstraint=Mne(e.kernelConstraint),r.recurrentConstraint=Mne(e.recurrentConstraint),r.biasConstraint=Mne(e.biasConstraint),r.dropout=ute([1,cte([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=ute([1,cte([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,C.Z)(n,[{key:"build",value:function(e){e=tne(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return BJ((function(){if(2!==e.length)throw new gee("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Zie({ones:function(){return $3(e)},rate:n.dropout,training:a,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Zie({ones:function(){return $3(r)},rate:n.recurrentDropout,training:a,dropoutFunc:n.dropoutFunc}));var i,o=n.dropoutMask,s=n.recurrentDropoutMask;i=kte(null!=o?l1(e,o):e,n.kernel.read()),null!=n.bias&&(i=Ite(i,n.bias.read())),null!=s&&(r=l1(r,s));var u=s1(i,kte(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))}},{key:"getConfig",value:function(){var e=bf(R(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:eie(this.activation),useBias:this.useBias,kernelInitializer:Yte(this.kernelInitializer),recurrentInitializer:Yte(this.recurrentInitializer),biasInitializer:Yte(this.biasInitializer),kernelRegularizer:sie(this.kernelRegularizer),recurrentRegularizer:sie(this.recurrentRegularizer),biasRegularizer:sie(this.biasRegularizer),activityRegularizer:sie(this.activityRegularizer),kernelConstraint:Rne(this.kernelConstraint),recurrentConstraint:Rne(this.recurrentConstraint),biasConstraint:Rne(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}]),n}(Lie);zie.className="SimpleRNNCell",V0.registerClass(zie);var Bie=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),e.cell=new zie(e),t.call(this,e)}return(0,C.Z)(n,[{key:"call",value:function(e,t){var r=this;return BJ((function(){null!=r.cell.dropoutMask&&(WJ(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(WJ(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return bf(R(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(Pie);Bie.className="SimpleRNN",V0.registerClass(Bie);var Wie=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new gee("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,Lee(r.units,"units"),r.activation=nie(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=nie(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=$te(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=$te(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=$te(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=cie(e.kernelRegularizer),r.recurrentRegularizer=cie(e.recurrentRegularizer),r.biasRegularizer=cie(e.biasRegularizer),r.kernelConstraint=Mne(e.kernelConstraint),r.recurrentConstraint=Mne(e.recurrentConstraint),r.biasConstraint=Mne(e.biasConstraint),r.dropout=ute([1,cte([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=ute([1,cte([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,P(r)}return(0,C.Z)(n,[{key:"build",value:function(e){var t=(e=tne(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return BJ((function(){if(2!==e.length)throw new gee("GRUCell expects 2 input Tensors (inputs, h, c), got ".concat(e.length,"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Zie({ones:function(){return $3(e)},rate:n.dropout,training:r,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Zie({ones:function(){return $3(a)},rate:n.recurrentDropout,training:r,count:3,dropoutFunc:n.dropoutFunc}));var i,o,s,u=n.dropoutMask,c=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=l1(e,u[0]));var l=kte(e,n.kernel.read());n.useBias&&(l=Ite(l,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=l1(a,c[0]));var f=n.recurrentKernel.read(),h=G4(f,[2*n.units,n.units],f.rank-1),p=(0,T.Z)(h,2),d=p[0],m=p[1],v=kte(a,d),g=G4(l,3,l.rank-1),y=(0,T.Z)(g,3),b=y[0],x=y[1],w=y[2],k=G4(v,2,v.rank-1),S=(0,T.Z)(k,2),_=S[0],I=S[1];i=n.recurrentActivation.apply(s1(b,_)),o=n.recurrentActivation.apply(s1(x,I));var N=kte(l1(o,a),m);s=n.activation.apply(s1(w,N));var C=s1(l1(i,a),l1(s1(1,JJ(i)),s));return[C,C]}))}},{key:"getConfig",value:function(){var e=bf(R(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:eie(this.activation),recurrentActivation:eie(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Yte(this.kernelInitializer),recurrentInitializer:Yte(this.recurrentInitializer),biasInitializer:Yte(this.biasInitializer),kernelRegularizer:sie(this.kernelRegularizer),recurrentRegularizer:sie(this.recurrentRegularizer),biasRegularizer:sie(this.biasRegularizer),activityRegularizer:sie(this.activityRegularizer),kernelConstraint:Rne(this.kernelConstraint),recurrentConstraint:Rne(this.recurrentConstraint),biasConstraint:Rne(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}]),n}(Lie);Wie.className="GRUCell",V0.registerClass(Wie);var Vie=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Wie(e),t.call(this,e)}return(0,C.Z)(n,[{key:"call",value:function(e,t){var r=this;return BJ((function(){null!=r.cell.dropoutMask&&(WJ(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(WJ(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return bf(R(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(Pie);Vie.className="GRU",V0.registerClass(Vie);var jie=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,Lee(r.units,"units"),r.activation=nie(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=nie(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=$te(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=$te(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=$te(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=cie(e.kernelRegularizer),r.recurrentRegularizer=cie(e.recurrentRegularizer),r.biasRegularizer=cie(e.biasRegularizer),r.kernelConstraint=Mne(e.kernelConstraint),r.recurrentConstraint=Mne(e.recurrentConstraint),r.biasConstraint=Mne(e.biasConstraint),r.dropout=ute([1,cte([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=ute([1,cte([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,C.Z)(n,[{key:"build",value:function(e){var t,n,r=(e=tne(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,i=this.units;n=new(t=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"apply",value:function(e,t){var n=a.apply([i]),r=(new Dte).apply([i]),o=a.apply([2*i]);return bte(bte(n,r),o)}}]),n}(Ote),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return BJ((function(){var r=null!=t.training&&t.training;if(3!==e.length)throw new gee("LSTMCell expects 3 input Tensors (inputs, h, c), got ".concat(e.length,"."));var a=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Zie({ones:function(){return $3(e)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Zie({ones:function(){return $3(a)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var o,s,u,c,l=n.dropoutMask,f=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=l1(e,l[0]));var h=kte(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=l1(a,f[0])),h=s1(h,kte(a,n.recurrentKernel.read())),n.useBias&&(h=Ite(h,n.bias.read()));var p=G4(h,4,h.rank-1),d=(0,T.Z)(p,4),m=d[0],v=d[1],g=d[2],y=d[3];o=n.recurrentActivation.apply(m),s=n.recurrentActivation.apply(v),u=s1(l1(s,i),l1(o,n.activation.apply(g))),c=n.recurrentActivation.apply(y);var b=l1(c,n.activation.apply(u));return[b,b,u]}))}},{key:"getConfig",value:function(){var e=bf(R(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:eie(this.activation),recurrentActivation:eie(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Yte(this.kernelInitializer),recurrentInitializer:Yte(this.recurrentInitializer),biasInitializer:Yte(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:sie(this.kernelRegularizer),recurrentRegularizer:sie(this.recurrentRegularizer),biasRegularizer:sie(this.biasRegularizer),activityRegularizer:sie(this.activityRegularizer),kernelConstraint:Rne(this.kernelConstraint),recurrentConstraint:Rne(this.recurrentConstraint),biasConstraint:Rne(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}]),n}(Lie);jie.className="LSTMCell",V0.registerClass(jie);var Uie=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new jie(e),t.call(this,e)}return(0,C.Z)(n,[{key:"call",value:function(e,t){var r=this;return BJ((function(){null!=r.cell.dropoutMask&&(WJ(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(WJ(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return bf(R(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(Pie);Uie.className="LSTM",V0.registerClass(Uie);var Hie=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).cells=e.cells,r}return(0,C.Z)(n,[{key:"stateSize",get:function(){var e,t=[],n=Oo(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,(0,I.Z)(r.stateSize)):t.push(r.stateSize)}}catch(cBe){n.e(cBe)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return BJ((function(){var r,a=e.slice(1),i=[],o=Oo(n.cells.slice().reverse());try{for(o.s();!(r=o.n()).done;){var s=r.value;Array.isArray(s.stateSize)?i.push(a.splice(0,s.stateSize.length)):i.push(a.splice(0,1))}}catch(cBe){o.e(cBe)}finally{o.f()}i.reverse();for(var u,c=[],l=0;l<n.cells.length;++l){var f=n.cells[l];a=i[l],u=0===l?[e[0]].concat(a):[u[0]].concat(a),u=f.call(u,t),c.push(u.slice(1))}a=[];var h,p=Oo(c.slice().reverse());try{for(p.s();!(h=p.n()).done;){var d,m=h.value;(d=a).push.apply(d,(0,I.Z)(m))}}catch(cBe){p.e(cBe)}finally{p.f()}return[u[0]].concat(a)}))}},{key:"build",value:function(e){var t;Qte(e)&&(e=e[0]),this.cells.forEach((function(n,r){ete("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=bf(R(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign(Object.assign({},e),t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=Oo(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,I.Z)(r.trainableWeights))}}catch(cBe){n.e(cBe)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=Oo(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,I.Z)(r.nonTrainableWeights))}}catch(cBe){n.e(cBe)}finally{n.f()}if(!this.trainable){var a,i=[],o=Oo(this.cells);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,(0,I.Z)(s.trainableWeights))}}catch(cBe){o.e(cBe)}finally{o.f()}return i.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=Oo(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,I.Z)(r.weights))}}catch(cBe){n.e(cBe)}finally{n.f()}return ine(t)}},{key:"setWeights",value:function(e){var t,n=[],r=Oo(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,i=a.weights.length,o=e.splice(i),s=0;s<a.weights.length;++s)n.push([a.weights[s],o[s]])}catch(cBe){r.e(cBe)}finally{r.f()}one(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],i=Oo(t.cells);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(pre(o,r))}}catch(cBe){i.e(cBe)}finally{i.f()}return new e({cells:a})}}]),n}(Lie);function Zie(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,i=e.count,o=void 0===i?1:i,s=e.dropoutFunc,u=function(){return null!=s?s(t(),n):Cte(t(),n)},c=function(){return Ete(u,t,a)};return!o||o<=1?VJ(c().clone()):Array(o).fill(void 0).map(c).map((function(e){return VJ(e.clone())}))}Hie.className="StackedRNNCells",V0.registerClass(Hie);var Gie=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),e.unroll)throw new yee("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new yee("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new sne({ndim:5})],r}return(0,C.Z)(n,[{key:"call",value:function(e,t){var r=this;return BJ((function(){if(null!=r.cell.dropoutMask&&(WJ(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(WJ(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new gee("ConvRNN2D cell does not support constants");var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return bf(R(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat((0,I.Z)(t.slice(2)))),this.returnState&&(t=[t].concat((0,I.Z)(Array(2).fill([e[0]].concat((0,I.Z)(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return BJ((function(){var n=t.cell.stateSize,r=e.shape,a=t.computeSingleOutputShape(r),i=V3([a[0]].concat((0,I.Z)(a.slice(2))));return Array.isArray(n)?Array(n.length).fill(i):[i]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];BJ((function(){if(!t.stateful)throw new mee("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,a=t.computeSingleOutputShape(r),i=[a[0]].concat((0,I.Z)(a.slice(2)));if(null==r[0])throw new gee("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return V3(i)})):t.states_=[V3(i)];else if(null==e)WJ(t.states_),null!=t.keptStates&&(WJ(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return V3(i)})):t.states_[0]=V3(i);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new gee("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), but it received ").concat(e.length," state value(s). Input received: ").concat(e));n?t.keptStates.push(t.states_.slice()):WJ(t.states_);for(var o=0;o<t.states_.length;++o){var s=e[o],u=i;if(!SY.arraysEqual(s.shape,u))throw new gee("State ".concat(o," is incompatible with layer ").concat(t.name,": expected shape=").concat(u,", received shape=").concat(s.shape));t.states_[o]=s}}t.states_=t.states_.map((function(e){return VJ(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,i=t.padding,o=t.strides,s=t.dilationRate,u="channelsFirst"===n,c=e[u?3:2],l=e[u?4:3],f=gie(c,a[0],i,o[0],s[0]),h=gie(l,a[1],i,o[1],s[1]);return[].concat((0,I.Z)(e.slice(0,2)),(0,I.Z)(u?[r,f,h]:[f,h,r]))}}]),n}(Pie);Gie.className="ConvRNN2D";var qie=function(e){A(n,e);var t=L(n);function n(e){var r;N(this,n);var a=e.filters,i=e.kernelSize,o=e.strides,s=e.padding,u=e.dataFormat,c=e.dilationRate;return(r=t.call(this,Object.assign(Object.assign({},e),{units:a}))).filters=a,Lee(r.filters,"filters"),r.kernelSize=vie(i,2,"kernelSize"),r.kernelSize.forEach((function(e){return Lee(e,"kernelSize")})),r.strides=vie(o||1,2,"strides"),r.strides.forEach((function(e){return Lee(e,"strides")})),r.padding=s||"valid",$ee(r.padding),r.dataFormat=u||"channelsLast",Yee(r.dataFormat),r.dilationRate=vie(c||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return Lee(e,"dilationRate")})),r}return(0,C.Z)(n,[{key:"build",value:function(e){var t;e=tne(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new gee("The channel dimension of the input should be defined. Found ".concat(e[n]));var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var o;if(this.unitForgetBias){var s=this.biasInitializer,u=this.filters;o=new(t=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"apply",value:function(e,t){return yte([s.apply([u]),j3([u]),s.apply([2*u])])}}]),n}(Ote),t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return BJ((function(){if(3!==e.length)throw new gee("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ".concat(e.length,"."));var r=t.training||!1,a=e[0],i=e[1],o=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Zie({ones:function(){return $3(a)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var s=n.dropoutMask,u=function(e,t,n){return t&&t[n]?l1(t[n],e):e},c=u(a,s,0),l=u(a,s,1),f=u(a,s,2),h=u(a,s,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Zie({ones:function(){return $3(i)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var p=n.recurrentDropoutMask,d=u(i,p,0),m=u(i,p,1),v=u(i,p,2),g=u(i,p,3),y=G4(n.kernel.read(),4,3),b=(0,T.Z)(y,4),x=b[0],w=b[1],k=b[2],S=b[3],_=n.useBias?G4(n.bias.read(),4):[null,null,null,null],I=(0,T.Z)(_,4),N=I[0],C=I[1],E=I[2],A=I[3];c=n.inputConv(c,x,N,n.padding),l=n.inputConv(l,w,C,n.padding),f=n.inputConv(f,k,E,n.padding),h=n.inputConv(h,S,A,n.padding);var R=G4(n.recurrentKernel.read(),4,3),O=(0,T.Z)(R,4),M=O[0],D=O[1],F=O[2],P=O[3];d=n.recurrentConv(d,M),m=n.recurrentConv(m,D),v=n.recurrentConv(v,F),g=n.recurrentConv(g,P);var L=n.recurrentActivation.apply(s1(c,d)),z=n.recurrentActivation.apply(s1(l,m)),B=s1(l1(z,o),l1(L,n.activation.apply(s1(f,v)))),W=l1(n.recurrentActivation.apply(s1(h,g)),n.activation.apply(B));return[W,W,B]}))}},{key:"getConfig",value:function(){var e=bf(R(n.prototype),"getConfig",this).call(this),t=(e.units,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},t),r)}},{key:"inputConv",value:function(e,t,n,r){var a=l2(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?Ite(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return l2(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(jie);qie.className="ConvLSTM2DCell",V0.registerClass(qie);var Kie=function(e){A(n,e);var t=L(n);function n(e){N(this,n);var r=new qie(e);return t.call(this,Object.assign(Object.assign({},e),{cell:r}))}return(0,C.Z)(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(Gie);Kie.className="ConvLSTM2D",V0.registerClass(Kie);var Xie=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return(0,C.Z)(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return BJ((function(){n.invokeCallHook(e,t);var r=ene(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return Ete((function(){return Cte(r,n.rate,i,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return bf(R(n.prototype),"dispose",this).call(this)}}]),n}(hne);Xie.className="Dropout",V0.registerClass(Xie);var Yie=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return(0,C.Z)(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(Xie);Yie.className="SpatialDropout1D",V0.registerClass(Yie);var $ie=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,Lee(r.units,"units"),r.activation=nie(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=$te(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=$te(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=Mne(e.kernelConstraint),r.biasConstraint=Mne(e.biasConstraint),r.kernelRegularizer=cie(e.kernelRegularizer),r.biasRegularizer=cie(e.biasRegularizer),r.activityRegularizer=cie(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],P(r)}return(0,C.Z)(n,[{key:"build",value:function(e){var t=(e=tne(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(0,Ft.Z)({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=tne(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return BJ((function(){n.invokeCallHook(e,t);var r,a=ene(e),i=Bee(n.activation.getClassName());return null!=i?r=kte(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=kte(a,n.kernel.read()),null!=n.bias&&(r=Ite(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:eie(this.activation),useBias:this.useBias,kernelInitializer:Yte(this.kernelInitializer),biasInitializer:Yte(this.biasInitializer),kernelRegularizer:sie(this.kernelRegularizer),biasRegularizer:sie(this.biasRegularizer),activityRegularizer:sie(this.activityRegularizer),kernelConstraint:Rne(this.kernelConstraint),biasConstraint:Rne(this.biasConstraint)},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne);$ie.className="Dense",V0.registerClass($ie);var Qie=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return(0,C.Z)(n,[{key:"computeOutputShape",value:function(e){var t,n=Oo((e=tne(e)).slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new gee('The shape of the input to "Flatten" is not fully defined (got '.concat(e.slice(1),'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.'))}}catch(cBe){n.e(cBe)}finally{n.f()}return[e[0],ste(e,1)]}},{key:"call",value:function(e,t){var n=this;return BJ((function(){n.invokeCallHook(e,t);var r=ene(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],i=2;i<r.rank;++i)a.push(i);a.push(1),r=t0(r,a)}return function(e){if(e.rank<=1)throw new gee("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],ste(e.shape,1)];return W1(e,t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne);Qie.className="Flatten",V0.registerClass(Qie);var Jie=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=nie(e.activation),r}return(0,C.Z)(n,[{key:"call",value:function(e,t){var n=this;return BJ((function(){n.invokeCallHook(e,t);var r=ene(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:eie(this.activation)},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne);Jie.className="Activation",V0.registerClass(Jie);var eoe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return(0,C.Z)(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return BJ((function(){return function(e,t){return BJ((function(){if(2!==e.shape.length)throw new gee("repeat() expects a rank-2 tensor, but received a rank-".concat(e.shape.length," tensor."));return xte(pte(e,1),[1,t,1])}))}(e=ene(e),n.n)}))}},{key:"getConfig",value:function(){var e={n:this.n},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne);eoe.className="RepeatVector",V0.registerClass(eoe);var toe=function(e){A(n,e);var t=L(n);function n(e){var r;N(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return(0,C.Z)(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==i)throw new gee("Can only specifiy one unknown dimension.");i=o}else a*=s}var u=ste(e);if(null!==i){if(0===a||u%a!==0)throw new gee(n);r[i]=u/a}else if(u!==a)throw new gee(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return BJ((function(){n.invokeCallHook(e,t);var r=ene(e),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return W1(r,i)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne);toe.className="Reshape",V0.registerClass(toe);var noe=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received ".concat(e.dims," instead."));var a=lte(1,e.dims.length+1);if(!SY.arraysEqual(e.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new sne({ndim:r.dims.length+1})],P(r)}return(0,C.Z)(n,[{key:"computeOutputShape",value:function(e){var t=(e=tne(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return t0(ene(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne);noe.className="Permute",V0.registerClass(noe);var roe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return(0,C.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=bf(R(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=ene(e);return v1(Y3(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return BJ((function(){n.invokeCallHook(e,t);var r=ene(e),a=v1(Y3(r,n.maskValue),-1,!0);return l1(r,tJ(a,r.dtype))}))}}]),n}(hne);roe.className="Masking",V0.registerClass(roe);var aoe=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(Tee(e.inputLength))}return r.inputDim=e.inputDim,Lee(r.inputDim,"inputDim"),r.outputDim=e.outputDim,Lee(r.outputDim,"outputDim"),r.embeddingsInitializer=$te(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=cie(e.embeddingsRegularizer),r.activityRegularizer=cie(e.activityRegularizer),r.embeddingsConstraint=Mne(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,P(r)}return(0,C.Z)(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return BJ((function(){return n.maskZero?(e=ene(e),Y3(e,C2(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=tne(e),null==this.inputLength)return[].concat((0,I.Z)(e),[this.outputDim]);var t=Tee(this.inputLength);if(t.length!==e.length-1)throw new gee('"inputLength" is '.concat(this.inputLength,", but received input shape has shape ").concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new gee('"inputLength" is '.concat(this.inputLength,", but received input shape has shape ").concat(e));null==a&&(t[n]=i),n++}return[e[0]].concat((0,I.Z)(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return BJ((function(){n.invokeCallHook(e,t);var r=ene(e);"int32"!==r.dtype&&(r=hte(r,"int32"));var a=Ste(n.embeddings.read(),W1(r,[r.size]));return W1(a,tne(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Yte(this.embeddingsInitializer),embeddingsRegularizer:sie(this.embeddingsRegularizer),activityRegularizer:sie(this.activityRegularizer),embeddingsConstraint:Rne(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne);aoe.className="Embedding",V0.registerClass(aoe);var ioe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return(0,C.Z)(n,[{key:"mergeFunction",value:function(e){throw new yee}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new gee("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[tne(e)]),e.length<2)throw new gee("A merge layer should be called on an Array of at least 2 inputs. Got ".concat(e.length," input(s)."));var t,n=[],r=Oo(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(cBe){r.e(cBe)}finally{r.f()}if((n=Mee(n)).length>1)throw new gee("Can not merge tensors with different batch sizes. Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var s=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}var u=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===Mee(u).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return BJ((function(){if(n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,i=cte(r),o=Oo(e);try{for(o.s();!(a=o.n()).done;){for(var s=a.value,u=s.rank,c=0;c<i-u;++c)s=pte(s,1);t.push(s)}}catch(cBe){o.e(cBe)}finally{o.f()}return n.mergeFunction(t)}var l,f=!1,h=Oo(e);try{for(h.s();!(l=h.n()).done;){var p=l.value,d=p.rank;if(null==d){var m=p.shape,v=m[0],g=m.slice(1).concat([v]),y=W1(p,[v].concat(ste(m.slice(1))));y=t0(y,[1,0]),y=W1(y,g),t.push(y),f=!0}else if(d>1){var b=lte(1,d).concat([0]);t.push(t0(p,b)),f=!0}else t.push(p)}}catch(cBe){h.e(cBe)}finally{h.f()}var x=n.mergeFunction(t),w=x.rank;if(f)if(null==w){var k=x.shape,S=k[k.length-1],_=[S].concat(k.slice(0,k.length-1));x=W1(t0(W1(x,[-1,S]),[1,0]),_)}else if(w>1){var T=[w-1].concat(lte(0,w-1));x=t0(x,T)}return x}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==e[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,i=[],o=Oo(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;null!=s&&null!==s[0]&&i.push(s[0])}}catch(cBe){o.e(cBe)}finally{o.f()}return t=1===(i=Mee(i)).length?i.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return BJ((function(){if(null==t)return null;if(!Array.isArray(t))throw new gee("`mask` should be an Array");if(!Array.isArray(e))throw new gee("`inputs` should be an Array");if(t.length!==e.length)throw new gee("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;t=t.map((function(e){return null==e?e:J2(e,0)}));for(var n=t[0],r=1;r<t.length-1;++r)n=E3(n,t[r]);return n}))}}]),n}(hne),ooe=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,e)}return(0,C.Z)(n,[{key:"mergeFunction",value:function(e){return BJ((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=s1(t,e[n]);return t}))}}]),n}(ioe);ooe.className="Add",V0.registerClass(ooe);var soe=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,e)}return(0,C.Z)(n,[{key:"mergeFunction",value:function(e){return BJ((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=l1(t,e[n]);return t}))}}]),n}(ioe);soe.className="Multiply",V0.registerClass(soe);var uoe=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,e)}return(0,C.Z)(n,[{key:"mergeFunction",value:function(e){return BJ((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=s1(t,e[n]);return l1(1/e.length,t)}))}}]),n}(ioe);uoe.className="Average",V0.registerClass(uoe);var coe=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,e)}return(0,C.Z)(n,[{key:"mergeFunction",value:function(e){return BJ((function(){for(var t=e[0],n=1;n<e.length;++n)t=B3(t,e[n]);return t}))}}]),n}(ioe);coe.className="Maximum",V0.registerClass(coe);var loe=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,e)}return(0,C.Z)(n,[{key:"mergeFunction",value:function(e){return BJ((function(){for(var t=e[0],n=1;n<e.length;++n)t=H3(t,e[n]);return t}))}}]),n}(ioe);loe.className="Minimum",V0.registerClass(loe);var foe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,C.Z)(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new gee("A `Concatenate` layer should be called on a list of at least 2 inputs");var t,n=!0,r=Oo(e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(cBe){r.e(cBe)}finally{r.f()}if(!n){for(var a=[],i=0;i<e.length;++i){var o=e[i].slice();o.splice(this.axis,1);var s,u=!1,c=Oo(a);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(SY.arraysEqual(l,o)){u=!0;break}}}catch(cBe){c.e(cBe)}finally{c.f()}u||a.push(o)}if(a.length>1)throw new gee("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return BJ((function(){return yte(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new gee("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,i=Oo(n.slice(1));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null==r[a]||null==o[a]){r[a]=null;break}r[a]+=o[a]}}catch(cBe){i.e(cBe)}finally{i.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new gee("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new gee("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new gee("Mismatch in the length of mask (".concat(t.length,") and the legnth of inputs (").concat(e.length,")"));return BJ((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],i=0;i<e.length;++i)null==t[i]?a.push(tJ($3(e[i]),"bool")):t[i].rank<e[i].rank?a.push(J2(t[i],-1)):a.push(t[i]);var o=U1(a,n.axis);return m1(o,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ioe);function hoe(e,t){for(;e<0;)e+=t;return e}foe.className="Concatenate",V0.registerClass(foe);var poe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,C.Z)(n,[{key:"build",value:function(e){SY.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new yee("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new gee("Dimension incompatibility: ".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new gee("A `Dot` layer must be called on exactly 2 inputs, but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return hoe(t,e[n].shape.length)})):[hoe(this.axes,n.shape.length),hoe(this.axes,r.shape.length)],this.normalize&&(n=dre(n,t[0]),r=dre(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new yee("batchDot is not implemented for tensors of 4D or higher rank yet");if(SY.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, but got ".concat(e.shape.length)})),SY.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, but got ".concat(t.shape.length)})),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new yee("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var i=n;return BJ((function(){var n,o;if(r>a){n=r-a;for(var s=[],u=0;u<n;++u)s.push(1);t=W1(t,t.shape.concat(s))}else if(a>r){n=a-r;for(var c=[],l=0;l<n;++l)c.push(1);e=W1(e,e.shape.concat(c))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=i[0]===i[1]?K2(l1(e,t),i[0]):K2(l1(t0(e,[1,0]),t),i[1]);else{var f=i[0]!==e.shape.length-1,h=i[1]===t.shape.length-1;o=EJ(e,t,f,h)}if(n>0){for(var p,d=[],m=p=r>a?r+a-3:r-1;m<p+n;++m)d.push(m);o=X4(o,d)}return 1===o.shape.length&&(o=J2(o,1)),o}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[hoe(this.axes,e.length),hoe(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){SY.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new yee("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ioe);poe.className="Dot",V0.registerClass(poe);var doe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return(0,C.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=bf(R(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return BJ((function(){n.invokeCallHook(e,t);var r=ene(e);return Ete((function(){return s1(wte(r.shape,0,n.stddev),r)}),(function(){return r}),t.training||!1)}))}}]),n}(hne);doe.className="GaussianNoise",V0.registerClass(doe);var moe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return(0,C.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=bf(R(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return BJ((function(){n.invokeCallHook(e,t);var r=ene(e);return n.rate>0&&n.rate<1?Ete((function(){var e=Math.sqrt(n.rate/(1-n.rate));return l1(r,wte(r.shape,1,e))}),(function(){return r}),t.training||!1):r}))}}]),n}(hne);moe.className="GaussianDropout",V0.registerClass(moe);var voe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return(0,C.Z)(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||ene(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=bf(R(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return BJ((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return Ete((function(){var t=ene(e),a=-1.7580993408473766,i=o3(b4(r),n.rate);i=hte(i,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-o*a*n.rate,u=s1(l1(t,i),l1(s1(i,-1),a));return s1(l1(u,o),s)}),(function(){return ene(e)}),t.training||!1)}return e}))}}]),n}(hne);function goe(e,t,n,r,a){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=$1(e,t,n,r,a,o);else if(3===e.rank)i=Q1(e,t,n,r,a,o);else{if(4!==e.rank)throw new yee("batchNormalization is not implemented for array of rank ".concat(e.rank," yet"));i=J1(e,t,n,r,a,o)}return i}function yoe(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return BJ((function(){var i=q3(e,r),o=i.mean,s=i.variance;return[goe(e,o,s,n,t,a),o,s]}))}function boe(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return BJ((function(){var i,o=q3(e,r),s=o.mean,u=o.variance,c=[],l=Oo(lte(0,e.rank));try{for(l.s();!(i=l.n()).done;){var f=i.value;-1!==r.indexOf(f)?c.push(1):c.push(e.shape[f])}}catch(cBe){l.e(cBe)}finally{l.f()}var h=W1(s,c),p=W1(u,c),d=null==t?null:W1(t,c),m=null==n?null:W1(n,c);return[goe(e,h,p,m,d,a),s,u]}))}voe.className="AlphaDropout",V0.registerClass(voe);var xoe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=$te(e.betaInitializer||"zeros"),r.gammaInitializer=$te(e.gammaInitializer||"ones"),r.movingMeanInitializer=$te(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=$te(e.movingVarianceInitializer||"ones"),r.betaConstraint=Mne(e.betaConstraint),r.gammaConstraint=Mne(e.gammaConstraint),r.betaRegularizer=cie(e.betaRegularizer),r.gammaRegularizer=cie(e.gammaRegularizer),r}return(0,C.Z)(n,[{key:"build",value:function(e){e=tne(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new gee("Axis ".concat(t," of input tensor should have a defined dimension but the layer received an input with shape ").concat(JSON.stringify(e),"."));this.inputSpec=[new sne({ndim:e.length,axes:(0,Ft.Z)({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return BJ((function(){var r=null!=t.training&&t.training,a=ene(e),i=a.shape,o=i.length,s=lte(0,o),u=n.axis>=0?n.axis:n.axis+o;s.splice(u,1);var c=wee(1,o);c[u]=i[u];var l=s.slice();l.sort();var f=!SY.arraysEqual(l,lte(0,o).slice(0,o-1));if(!r)return function(){if(f){var e=W1(n.movingMean.read(),c),t=W1(n.movingVariance.read(),c),r=n.center?W1(n.beta.read(),c):null,i=n.scale?W1(n.gamma.read(),c):null;return goe(a,e,t,r,i,n.epsilon)}return goe(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var h=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return SY.arraysEqual(r.slice().sort(),lte(0,e.rank-1))?yoe(e,t,n,r,a):boe(e,t,n,r,a)}(a,n.gamma.read(),n.beta.read(),s,n.epsilon),p=(0,T.Z)(h,3),d=p[0],m=p[1],v=p[2],g=function(e,t,n){BJ((function(){var r=1-n,a=e.read(),i=l1(I3(a,t),r);e.write(I3(a,i))}))};return g(n.movingMean,m,n.momentum),g(n.movingVariance,v,n.momentum),d}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Yte(this.betaInitializer),gammaInitializer:Yte(this.gammaInitializer),movingMeanInitializer:Yte(this.movingMeanInitializer),movingVarianceInitializer:Yte(this.movingVarianceInitializer),betaRegularizer:sie(this.betaRegularizer),gammaRegularizer:sie(this.gammaRegularizer),betaConstraint:Rne(this.betaConstraint),gammaConstraint:Rne(this.gammaConstraint)},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne);xoe.className="BatchNormalization",V0.registerClass(xoe);var woe=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"==typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, but received ".concat(JSON.stringify(r.axis)));var a,i=Oo(r.axis);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, but received ".concat(JSON.stringify(r.axis)))}}catch(cBe){i.e(cBe)}finally{i.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=$te(e.betaInitializer||"zeros"),r.gammaInitializer=$te(e.gammaInitializer||"ones"),r.betaRegularizer=cie(e.betaRegularizer),r.gammaRegularizer=cie(e.gammaRegularizer),r.supportsMasking=!0,P(r)}return(0,C.Z)(n,[{key:"build",value:function(e){var t=(e=tne(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=Oo(this.axis);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i))}}catch(cBe){a.e(cBe)}finally{a.f()}if(this.axis.length!==Mee(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=ene(e),a=r.shape,i=a.length;return BJ((function(){var e,t=q3(r,n.axis,!0),o=t.mean,s=t.variance,u=wee(1,i),c=Oo(n.axis);try{for(c.s();!(e=c.n()).done;){var l=e.value;u[l]=a[l]}}catch(cBe){c.e(cBe)}finally{c.f()}for(var f=function(e){return null!=e&&e.shape.length!==i?W1(e,u):e},h=n.scale?f(n.gamma.read()):null,p=n.center?f(n.beta.read()):null,d=[],m=[],v=0;v<i;++v)-1!==n.axis.indexOf(v)?(d.push(a[v]),m.push(1)):(d.push(1),m.push(a[v]));return o=t3(o,d),s=t3(s,d),null!=h&&(h=t3(h,m)),null!=p&&(p=t3(p,m)),goe(r,o,s,p,h,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Yte(this.betaInitializer),gammaInitializer:Yte(this.gammaInitializer),betaRegularizer:sie(this.betaRegularizer),gammaRegularizer:sie(this.gammaRegularizer)},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne);woe.className="LayerNormalization",V0.registerClass(woe);var koe=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new gee("ZeroPadding2D expects padding to be a length-2 array, but received a length-".concat(e.padding.length," array."));var a,i;if("number"==typeof e.padding[0])a=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new gee("ZeroPadding2D expects height padding to be a length-2 array, but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new gee("ZeroPadding2D expects width padding to be a length-2 array, but received a length-".concat(e.padding[1].length," array."));i=e.padding[1]}r.padding=[a,i]}return r.inputSpec=[new sne({ndim:4})],P(r)}return(0,C.Z)(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=tne(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return BJ((function(){return function(e,t,n){return BJ((function(){if(4!==e.rank)throw new gee("temporalPadding expects input tensor to be 4-D, but received a ".concat(e.rank,"-D tensor."));if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new gee("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new gee("Unknown data format: ".concat(n,". Supported data formats are 'channelsLast' and 'channelsFirst."));var r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],J3(e,r)}))}(ene(e),n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne);function Soe(e,t,n,r,a,i){return BJ((function(){Yee(a),Qee(i),$ee(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=bie(e,a);var o,s="same"===r?"same":"valid";return o="max"===i?P3(e,t,n,s):V1(e,t,n,s),"channelsFirst"===a&&(o=t0(o,[0,3,1,2])),o}))}function _oe(e,t,n,r,a,i){return BJ((function(){Yee(a),Qee(i),$ee(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=xie(e,a);var o,s="same"===r?"same":"valid";return o="max"===i?L3(e,t,n,s):j1(e,t,n,s),"channelsFirst"===a&&(o=t0(o,[0,4,1,2,3])),o}))}koe.className="ZeroPadding2D",V0.registerClass(koe);var Toe=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"==typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new gee("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(Lee(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"==typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new gee("strides for 1D convolutional layer must be a number or an Array of a single number, but received ".concat(JSON.stringify(e.strides)));r.strides=e.strides}return Lee(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,$ee(r.padding),r.inputSpec=[new sne({ndim:3})],P(r)}return(0,C.Z)(n,[{key:"computeOutputShape",value:function(e){var t=gie((e=tne(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return BJ((function(){n.invokeCallHook(e,t),e=pte(ene(e),2);var r=n.poolingFunction(ene(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return X4(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne),Ioe=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,e)}return(0,C.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Yee(a),$ee(r),Soe(e,t,n,r,a,"max")}}]),n}(Toe);Ioe.className="MaxPooling1D",V0.registerClass(Ioe);var Noe=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,e)}return(0,C.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Yee(a),$ee(r),Soe(e,t,n,r,a,"avg")}}]),n}(Toe);Noe.className="AveragePooling1D",V0.registerClass(Noe);var Coe=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new gee("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return Lee(r.poolSize,"poolSize"),Lee(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Yee(r.dataFormat),$ee(r.padding),r.inputSpec=[new sne({ndim:4})],P(r)}return(0,C.Z)(n,[{key:"computeOutputShape",value:function(e){e=tne(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=gie(t,this.poolSize[0],this.padding,this.strides[0]),n=gie(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return BJ((function(){return n.invokeCallHook(e,t),n.poolingFunction(ene(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne),Eoe=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,e)}return(0,C.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Yee(a),$ee(r),Soe(e,t,n,r,a,"max")}}]),n}(Coe);Eoe.className="MaxPooling2D",V0.registerClass(Eoe);var Aoe=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,e)}return(0,C.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Yee(a),$ee(r),Soe(e,t,n,r,a,"avg")}}]),n}(Coe);Aoe.className="AveragePooling2D",V0.registerClass(Aoe);var Roe=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new gee("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return Lee(r.poolSize,"poolSize"),Lee(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Yee(r.dataFormat),$ee(r.padding),r.inputSpec=[new sne({ndim:5})],P(r)}return(0,C.Z)(n,[{key:"computeOutputShape",value:function(e){e=tne(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=gie(t,this.poolSize[0],this.padding,this.strides[0]),n=gie(n,this.poolSize[1],this.padding,this.strides[1]),r=gie(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return BJ((function(){return n.invokeCallHook(e,t),n.poolingFunction(ene(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne),Ooe=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,e)}return(0,C.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Yee(a),$ee(r),_oe(e,t,n,r,a,"max")}}]),n}(Roe);Ooe.className="MaxPooling3D",V0.registerClass(Ooe);var Moe=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,e)}return(0,C.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Yee(a),$ee(r),_oe(e,t,n,r,a,"avg")}}]),n}(Roe);Moe.className="AveragePooling3D",V0.registerClass(Moe);var Doe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).inputSpec=[new sne({ndim:3})],r}return(0,C.Z)(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new yee}}]),n}(hne),Foe=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,e||{})}return(0,C.Z)(n,[{key:"call",value:function(e,t){return BJ((function(){var t=ene(e);return W3(t,1)}))}}]),n}(Doe);Foe.className="GlobalAveragePooling1D",V0.registerClass(Foe);var Poe=function(e){A(n,e);var t=L(n);function n(e){return N(this,n),t.call(this,e||{})}return(0,C.Z)(n,[{key:"call",value:function(e,t){return BJ((function(){var t=ene(e);return j2(t,1)}))}}]),n}(Doe);Poe.className="GlobalMaxPooling1D",V0.registerClass(Poe);var Loe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Yee(r.dataFormat),r.inputSpec=[new sne({ndim:4})],r}return(0,C.Z)(n,[{key:"computeOutputShape",value:function(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new yee}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hne),zoe=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"call",value:function(e,t){var n=this;return BJ((function(){var t=ene(e);return"channelsLast"===n.dataFormat?W3(t,[1,2]):W3(t,[2,3])}))}}]),n}(Loe);zoe.className="GlobalAveragePooling2D",V0.registerClass(zoe);var Boe=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"call",value:function(e,t){var n=this;return BJ((function(){var t=ene(e);return"channelsLast"===n.dataFormat?j2(t,[1,2]):j2(t,[2,3])}))}}]),n}(Loe);Boe.className="GlobalMaxPooling2D",V0.registerClass(Boe);var Woe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).layer=e.layer,r}return(0,C.Z)(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){bf(R(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.layer,a=pre(r,n);delete t.layer;var i={layer:a};return Object.assign(i,t),new e(i)}}]),n}(hne),Voe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return(0,C.Z)(n,[{key:"build",value:function(e){if((e=tne(e)).length<3)throw new gee("TimeDistributed layer expects an input shape >= 3D, but received input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),bf(R(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=tne(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return BJ((function(){return Fie((function(e,r){return[ene(n.layer.call(e,t)),[]]}),e=ene(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(Woe);Voe.className="TimeDistributed",V0.registerClass(Voe);var joe=function(e){A(n,e);var t=L(n);function n(e){var r;N(this,n),r=t.call(this,e);var a=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=a,r.forwardLayer=pre(i),a.goBackwards=!0!==a.goBackwards;var o={};if(o.className=e.layer.getClassName(),o.config=a,r.backwardLayer=pre(o),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function(e){Fee(Kee,"BidirectionalMergeMode",e)}(r.mergeMode),e.weights)throw new yee("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return(0,C.Z)(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState&&(r=a.slice(1)),t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):_ee(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=Die(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return bf(R(n.prototype),"apply",this).call(this,e,t);var o=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new gee("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push.apply(o,(0,I.Z)(r));var c=r.map((function(e){return new sne({shape:e.shape})}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),s.push.apply(s,(0,I.Z)(c))}if(null!=a)throw new yee("Support for constants in Bidirectional layers is not implemented yet.");for(var l=o[0]instanceof une,f=0,h=o;f<h.length;f++){if(h[f]instanceof une!==l)throw new gee("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(l){var p=[e].concat(o),d=this.inputSpec.concat(s),m=this.inputSpec;this.inputSpec=d;var v=bf(R(n.prototype),"apply",this).call(this,p,t);return this.inputSpec=m,v}return bf(R(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return BJ((function(){var r,a,i,o,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var u=s.slice(0,s.length/2),c=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:c}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=_4(a,1)),"concat"===n.mergeMode?o=yte([r,a]):"sum"===n.mergeMode?o=s1(r,a):"ave"===n.mergeMode?o=l1(.5,s1(r,a)):"mul"===n.mergeMode?o=l1(r,a):null==n.mergeMode&&(o=[r,a]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;ete(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),ete(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){bf(R(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=pre(t.layer);if(delete t.layer,null!=t.numConstants)throw new yee("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(Woe);joe.className="Bidirectional",V0.registerClass(joe);var Uoe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).scale=e.scale,e.offset?r.offset=e.offset:r.offset=0,r}return(0,C.Z)(n,[{key:"getConfig",value:function(){var e={scale:this.scale,offset:this.offset},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"call",value:function(e,t){var n=this;return BJ((function(){return"float32"!==(e=ene(e)).dtype&&(e=hte(e,"float32")),s1(l1(e,n.scale),n.offset)}))}}]),n}(hne);Uoe.className="Rescaling",V0.registerClass(Uoe);var Hoe=new Set(["bilinear","nearest"]),Zoe=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),(r=t.call(this,e)).height=e.height,r.width=e.width,e.interpolation){if(!Hoe.has(e.interpolation))throw new gee("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));r.interpolation=e.interpolation}else r.interpolation="bilinear";return r.cropToAspectRatio=Boolean(e.cropToAspectRatio),P(r)}return(0,C.Z)(n,[{key:"computeOutputShape",value:function(e){var t=(e=tne(e))[2];return[this.height,this.width,t]}},{key:"getConfig",value:function(){var e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"call",value:function(e,t){var n=this;return BJ((function(){var t=[n.height,n.width];if("bilinear"===n.interpolation)return V6.resizeBilinear(e,t,!n.cropToAspectRatio);if("nearest"===n.interpolation)return V6.resizeNearestNeighbor(e,t,!n.cropToAspectRatio);throw new Error("Interpolation is ".concat(n.interpolation," but only ").concat((0,I.Z)(Hoe)," are supported"))}))}}]),n}(hne);Zoe.className="Resizing",V0.registerClass(Zoe);var Goe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).numTokens=e.numTokens,e.outputMode?r.outputMode=e.outputMode:r.outputMode="multiHot",r}return(0,C.Z)(n,[{key:"getConfig",value:function(){var e={numTokens:this.numTokens,outputMode:this.outputMode},t=bf(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"computeOutputShape",value:function(e){return null==(e=tne(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}},{key:"call",value:function(e,t){var n=this;return BJ((function(){var r;if("int32"!==(e=ene(e)).dtype&&(e=hte(e,"int32")),"undefined"!=typeof t.countWeights){if("count"!==n.outputMode)throw new gee("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));r=ene(t.countWeights)}var a=j2(e),i=U2(e),o=i3(n.numTokens,a).bufferSync().get(0),s=o3(i,0).bufferSync().get(0);if(!o||!s)throw new gee("Input values must be between 0 < values <= numTokens with numTokens=".concat(n.numTokens));return function(e,t,n,r){var a=ene(e);if("int32"!==a.dtype&&(a=hte(a,"int32")),"int"===t)return a;var i=a.shape;if(0===a.rank&&(a=J2(a,-1)),"oneHot"===t&&1!==a.shape[a.shape.length-1]&&(a=J2(a,-1)),a.rank>2)throw new gee("When outputMode is not int, maximum output rank is 2 Received outputMode ".concat(t," and input shape ").concat(i," which would result in output rank ").concat(a.rank,"."));var o,s=["multiHot","oneHot"].includes(t);if(o=w2(a,"undefined"!=typeof r&&"count"===t?r:[],n,s),"tfIdf"!==t)return o;if(r)return l1(o,r);throw new gee("When outputMode is 'tfIdf', weights must be provided.")}(e,n.outputMode,n.numTokens,r)}))}}]),n}(hne);function qoe(e){return new dne(e)}function Koe(e){return new pie(e)}function Xoe(e){return new lie(e)}function Yoe(e){return new fie(e)}function $oe(e){return new hie(e)}function Qoe(e){return new mie(e)}function Joe(e){return new die(e)}function ese(e){return new Aie(e)}function tse(e){return new _ie(e)}function nse(e){return new Iie(e)}function rse(e){return new Tie(e)}function ase(e){return new Nie(e)}function ise(e){return new Eie(e)}function ose(e){return new Rie(e)}function sse(e){return new Oie(e)}function use(e){return new Mie(e)}function cse(e){return new Jie(e)}function lse(e){return new $ie(e)}function fse(e){return new Xie(e)}function hse(e){return new Yie(e)}function pse(e){return new Qie(e)}function dse(e){return new eoe(e)}function mse(e){return new toe(e)}function vse(e){return new noe(e)}function gse(e){return new aoe(e)}function yse(e){return new ooe(e)}function bse(e){return new uoe(e)}function xse(e){return new foe(e)}function wse(e){return new coe(e)}function kse(e){return new loe(e)}function Sse(e){return new soe(e)}function _se(e){return new poe(e)}function Tse(e){return new xoe(e)}function Ise(e){return new woe(e)}function Nse(e){return new koe(e)}function Cse(e){return new Noe(e)}function Ese(e){return Cse(e)}function Ase(e){return Cse(e)}function Rse(e){return new Aoe(e)}function Ose(e){return Rse(e)}function Mse(e){return Rse(e)}function Dse(e){return new Moe(e)}function Fse(e){return Dse(e)}function Pse(e){return Dse(e)}function Lse(e){return new Foe(e)}function zse(e){return new zoe(e)}function Bse(e){return new Poe(e)}function Wse(e){return new Boe(e)}function Vse(e){return new Ioe(e)}function jse(e){return new Eoe(e)}function Use(e){return new Ooe(e)}function Hse(e){return new Vie(e)}function Zse(e){return new Wie(e)}function Gse(e){return new Uie(e)}function qse(e){return new jie(e)}function Kse(e){return new Bie(e)}function Xse(e){return new zie(e)}function Yse(e){return new Kie(e)}function $se(e){return new qie(e)}function Qse(e){return new Pie(e)}function Jse(e){return new Hie(e)}function eue(e){return new joe(e)}function tue(e){return new Voe(e)}Goe.className="CategoryEncoding",V0.registerClass(Goe);var nue=Bse,rue=Wse,aue=Vse,iue=jse;function oue(e){return new doe(e)}function sue(e){return new moe(e)}function uue(e){return new voe(e)}function cue(e){return new roe(e)}function lue(e){return new Uoe(e)}function fue(e){return new Zoe(e)}function hue(e){return new Goe(e)}var pue={};function due(e,t){return _re(e,t)}function mue(e,t){return Ere(e,t)}function vue(e,t){return Are(e,t)}function gue(e,t){return Tre(e,t)}function yue(e,t){return Rre(e,t)}function bue(e,t){return Nre(e,t)}function xue(e,t){return Cre(e,t)}function wue(e,t){return wre(e,t)}function kue(e,t){return vre(e,t)}function Sue(e,t){return gre(e,t)}function _ue(e,t){return gre(e,t)}function Tue(e,t){return gre(e,t)}function Iue(e,t){return mre(e,t)}function Nue(e,t){return mre(e,t)}function Cue(e,t){return mre(e,t)}kZ(pue,{MAPE:function(){return _ue},MSE:function(){return Nue},binaryAccuracy:function(){return due},binaryCrossentropy:function(){return mue},categoricalAccuracy:function(){return gue},categoricalCrossentropy:function(){return yue},cosineProximity:function(){return wue},mape:function(){return Tue},meanAbsoluteError:function(){return kue},meanAbsolutePercentageError:function(){return Sue},meanSquaredError:function(){return Iue},mse:function(){return Cue},precision:function(){return bue},recall:function(){return xue},sparseCategoricalAccuracy:function(){return vue}});var Eue={};kZ(Eue,{modelFromJSON:function(){return Nae}});var Aue={};function Rue(e){return new iie(e)}function Oue(e){return function(e){return rie(e),new iie({l1:null!=e?e.l1:null,l2:0})}(e)}function Mue(e){return function(e){return rie(e),new iie({l2:null!=e?e.l2:null,l1:0})}(e)}kZ(Aue,{l1:function(){return Oue},l1l2:function(){return Rue},l2:function(){return Mue}});var Due=function(e){A(n,e);var t=L(n);function n(){var e;return N(this,n),(e=t.apply(this,arguments)).model=null,e}return(0,C.Z)(n,[{key:"setModel",value:function(e){if(!(e instanceof Tae))throw new Error("model must be a LayersModel, not some other Container");this.model=e}}]),n}(ire);function Fue(e,t){return e<t}function Pue(e,t){return e>t}var Lue=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),r=t.call(this),null==e&&(e={}),e.restoreBestWeights)throw new yee("restoreBestWeights = True is not implemented in EarlyStopping yet.");return r.monitor=e.monitor||"val_loss",r.minDelta=Math.abs(e.minDelta||0),r.patience=e.patience||0,r.verbose=e.verbose||0,r.mode=e.mode||"auto",r.baseline=e.baseline,-1===["auto","min","max"].indexOf(r.mode)&&(console.warn("EarlyStopping mode '".concat(r.mode,"' is invalid. Falling back to mode 'auto'.")),r.mode="auto"),"min"===r.mode?r.monitorFunc=Fue:"max"===r.mode||-1!==r.monitor.indexOf("acc")?r.monitorFunc=Pue:r.monitorFunc=Fue,r.monitorFunc===Fue&&(r.minDelta*=-1),P(r)}return(0,C.Z)(n,[{key:"onTrainBegin",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===Fue?1/0:-1/0;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Tn(Sn().mark((function e(t,n){var r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nre(n);case 2:null!=(r=this.getMonitorValue(n))&&(this.monitorFunc(r-this.minDelta,this.best)?(this.best=r,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=t,this.model.stopTraining=!0)));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.stoppedEpoch>0&&this.verbose&&console.log("Epoch ".concat(this.stoppedEpoch,": early stopping."));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMonitorValue",value:function(e){null==e&&(e={});var t=e[this.monitor];return null==t&&console.warn("Metric for EarlyStopping ".concat(this.monitor," is not available. Available metrics are: ").concat(Object.keys(e))),t}}]),n}(Due);var zue,Bue,Wue={earlyStopping:function(e){return new Lue(e)}};GG().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(zue||(zue={})),function(e){var t;(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"}(Bue||(Bue={}));var Vue={};function jue(e,t){var n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};Vue[e]=n}function Uue(e){return Vue[e]}function Hue(e){delete Vue[e]}function Zue(e,t,n,r,a){var i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){var o=i.inputIndexStart,s=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?o+1:i.inputIndexEnd;if("tensor"===i.type)return Gue(t.inputNames[i.inputIndexStart],n,r,a);if("tensors"===i.type)return t.inputNames.slice(o,s).map((function(e){return Gue(e,n,r,a)}));var u=Gue(t.inputNames.slice(o)[0],n,r,a),c=u.dataSync();return"number"===i.type?c[0]:SY.toNestedArray(u.shape,c)}var l=t.attrParams[e];return l&&l.value}function Gue(e,t,n,r){var a=Xue(e),i=(0,T.Z)(a,2),o=i[0],s=i[1];if(null!=r){var u=r.getHashTableHandleByName(o);if(null!=u)return u}var c=n.currentContextIds.find((function(e){return!!t[Kue(o,e)]}));return void 0!==c?t[Kue(o,c)][s]:void 0}function que(e,t){var n=Xue(e),r=(0,T.Z)(n,3),a=r[0],i=r[1],o=r[2];return[Kue(a,t&&t.currentContextId),i,o]}function Kue(e,t){return t?"".concat(e,"-").concat(t):e}function Xue(e){var t=e.split(":");if(1===t.length)return[e,0,void 0];var n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function Yue(e,t,n){var r=Zue("pad",e,t,n);if("explicit"===r){r=Zue("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],i=0;i<4;i++)a[i][0]=r[2*i],a[i][1]=r[2*i+1];return a}return r}function $ue(e){return e.kept?e:nJ(e)}var Que={};kZ(Que,{json:function(){return Jue}});var Jue=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],ece={};kZ(ece,{json:function(){return tce}});var tce=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],nce={};kZ(nce,{json:function(){return rce}});var rce=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],ace={};kZ(ace,{json:function(){return ice}});var ice=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],oce={};kZ(oce,{json:function(){return sce}});var sce=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],uce={};kZ(uce,{json:function(){return cce}});var cce=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],lce={};kZ(lce,{json:function(){return fce}});var fce=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],hce={};kZ(hce,{json:function(){return pce}});var pce=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],dce={};kZ(dce,{json:function(){return mce}});var mce=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],vce={};kZ(vce,{json:function(){return gce}});var gce=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],yce={};kZ(yce,{json:function(){return bce}});var bce=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],xce={};kZ(xce,{json:function(){return wce}});var wce=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],kce={};kZ(kce,{json:function(){return Sce}});var Sce=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],_ce={};kZ(_ce,{json:function(){return Tce}});var Tce=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Ice={};kZ(Ice,{json:function(){return Nce}});var Nce=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],Cce={};kZ(Cce,{json:function(){return Ece}});var Ece=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Ace={};kZ(Ace,{json:function(){return Rce}});var Rce=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Oce={};kZ(Oce,{json:function(){return Mce}});var Mce=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],Dce={};kZ(Dce,{json:function(){return Fce}});var Fce=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],Pce=function(){function e(){var t;N(this,e);var n=[Que,ece,nce,ace,oce,uce,lce,hce,dce,vce,yce,xce,kce,_ce,Ice,Cce,Ace,Oce,Dce],r=(t=[]).concat.apply(t,(0,I.Z)(n.map((function(e){return e.json}))));this.opMappers=r.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return(0,C.Z)(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],i=[],o=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?i.push(e[n.name]):(null==n.input||0===n.input.length)&&o.push(e[n.name]),e}),{}),u=[],c=[],l={},f={};null!=n&&(l=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));var h=Object.keys(s);h.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e,n){var r=que(e),a=(0,T.Z)(r,3),i=a[0],o=a[2],u=s[i];if(null!=u.outputs){var c=u.outputs.indexOf(o);if(-1!==c){var l="".concat(i,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))})),0===Object.keys(f).length?h.forEach((function(e){var t=s[e];0===t.children.length&&c.push(t)})):Object.keys(f).forEach((function(e){var t=que(e),n=(0,T.Z)(t,1)[0],r=s[n];null!=r&&(r.signatureKey=f[e],c.push(r))})),Object.keys(l).length>0?Object.keys(l).forEach((function(e){var t=que(e),n=(0,T.Z)(t,1)[0],r=s[n];r&&(r.signatureKey=l[e],u.push(r))})):u=a;var p={};null!=e.library&&null!=e.library.function&&(p=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var d={nodes:s,inputs:u,outputs:c,weights:i,placeholders:a,signature:n,functions:p};return o.length>0&&(d.initNodes=o),d}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=Uue(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.slice(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r,a=n.type;switch(n.type){case"string":void 0===(r=zce(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=zce(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(r=Kce(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=Kce(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(r=Wce(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(r=Wce(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(r=qce(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=qce(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(r=Bce(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=Bce(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(r=Yce(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=Yce(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(r=Gce(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=Gce(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(r=Xce(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=Xce(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(r=Uce(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=Uce(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(r=Hce(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=Hce(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(r=jce(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=jce(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:r,type:a},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var i=[],o=[];e.signature.inputArg.forEach((function(e){var t=que(e.name),n=(0,T.Z)(t,1)[0],r={name:n,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:Vce(e.type),type:"dtype"}},children:[]};r.signatureKey=e.name,i.push(r),a[n]=r})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=que(e),i=(0,T.Z)(r,3),o=i[0],s=i[2],u=a[o];if(null!=u.outputs){var c=u.outputs.indexOf(s);if(-1!==c){var l="".concat(o,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=que(s[e.name]),n=(0,T.Z)(t,2),r=n[0],i=n[1],u=a[r];null!=u&&(u.defaultOutput=i,o.push(u))}));var u=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:r,placeholders:[],signature:u}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function Lce(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=GG().global;if("undefined"!=typeof t.atob)return t.atob(e);if("undefined"!=typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function zce(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?Lce(a.s,r):n}function Bce(e,t,n){var r=e[t];return r?r.b:n}function Wce(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof a?a:parseInt(a,10)}function Vce(e){switch("string"==typeof e&&(e=zue[e]),e){case zue.DT_FLOAT:case zue.DT_HALF:return"float32";case zue.DT_INT32:case zue.DT_INT64:case zue.DT_INT8:case zue.DT_UINT8:return"int32";case zue.DT_BOOL:return"bool";case zue.DT_DOUBLE:return"float32";case zue.DT_STRING:return"string";default:return null}}function jce(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function Uce(e,t,n){var r=e[t];return r&&r.type?Vce(r.type):n}function Hce(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return Vce(e)})):n}function Zce(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"==typeof e.size?e.size:parseInt(e.size,10)})):[]}function Gce(e,t,n){var r=e[t];return r&&r.shape?Zce(r.shape):n}function qce(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"==typeof e?e:parseInt(e,10)})):n}function Kce(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return Lce(e,r)})):n}function Xce(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return Zce(e)})):n}function Yce(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var $ce=function(){function e(t,n,r){var a=this;N(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return(0,C.Z)(e,[{key:"getInput",value:function(e){return Gue(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return Gue(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return Wce(this.node.rawAttrs,e,t);if(null!=n.s)return zce(this.node.rawAttrs,e,t);if(null!=n.b)return Bce(this.node.rawAttrs,e,t);if(null!=n.shape)return Gce(this.node.rawAttrs,e,t);if(null!=n.type)return Uce(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return qce(this.node.rawAttrs,e,t);if(null!=n.list.s)return Kce(this.node.rawAttrs,e,t);if(null!=n.list.shape)return Xce(this.node.rawAttrs,e,t);if(null!=n.list.b)return Yce(this.node.rawAttrs,e,t);if(null!=n.list.type)return Hce(this.node.rawAttrs,e,t)}return t}}]),e}(),Qce={};kZ(Qce,{OP_SCOPE_SUFFIX:function(){return W$},abs:function(){return f1},acos:function(){return h1},acosh:function(){return p1},add:function(){return s1},addN:function(){return d1},all:function(){return m1},any:function(){return v1},argMax:function(){return g1},argMin:function(){return y1},asin:function(){return b1},asinh:function(){return x1},atan:function(){return w1},atan2:function(){return k1},atanh:function(){return S1},avgPool:function(){return V1},avgPool3d:function(){return j1},basicLSTMCell:function(){return q1},batchNorm:function(){return Y1},batchNorm2d:function(){return $1},batchNorm3d:function(){return Q1},batchNorm4d:function(){return J1},batchToSpaceND:function(){return K1},bincount:function(){return e2},booleanMaskAsync:function(){return v5},broadcastArgs:function(){return t2},broadcastTo:function(){return n2},buffer:function(){return eJ},cast:function(){return tJ},ceil:function(){return r2},clipByValue:function(){return i2},clone:function(){return nJ},complex:function(){return j$},concat:function(){return U1},concat1d:function(){return o2},concat2d:function(){return s2},concat3d:function(){return u2},concat4d:function(){return c2},conv1d:function(){return f2},conv2d:function(){return l2},conv2dTranspose:function(){return p2},conv3d:function(){return d2},conv3dTranspose:function(){return v2},cos:function(){return g2},cosh:function(){return y2},cosineWindow:function(){return _5},cumprod:function(){return b2},cumsum:function(){return x2},denseBincount:function(){return w2},depthToSpace:function(){return k2},depthwiseConv2d:function(){return S2},diag:function(){return _2},dilation2d:function(){return T2},div:function(){return c1},divNoNan:function(){return E2},dot:function(){return A2},dropout:function(){return k5},einsum:function(){return R2},elu:function(){return O2},enclosingPowerOfTwo:function(){return S5},equal:function(){return I2},erf:function(){return M2},euclideanNorm:function(){return $2},exp:function(){return Q2},expandDims:function(){return J2},expm1:function(){return e3},eye:function(){return n3},fft:function(){return U4},fill:function(){return a2},floor:function(){return r3},floorDiv:function(){return u1},fused:function(){return N5},gather:function(){return a3},gatherND:function(){return w5},greater:function(){return i3},greaterEqual:function(){return o3},ifft:function(){return H4},imag:function(){return QJ},image:function(){return V6},inTopKAsync:function(){return I5},irfft:function(){return Z4},isFinite:function(){return s3},isInf:function(){return u3},isNaN:function(){return c3},leakyRelu:function(){return l3},less:function(){return f3},lessEqual:function(){return h3},linalg:function(){return j6},linspace:function(){return p3},localResponseNormalization:function(){return d3},log:function(){return m3},log1p:function(){return v3},logSigmoid:function(){return T3},logSoftmax:function(){return N3},logSumExp:function(){return C3},logicalAnd:function(){return E3},logicalNot:function(){return A3},logicalOr:function(){return R3},logicalXor:function(){return O3},losses:function(){return U6},lowerBound:function(){return F3},matMul:function(){return EJ},max:function(){return j2},maxPool:function(){return P3},maxPool3d:function(){return L3},maxPoolWithArgmax:function(){return z3},maximum:function(){return B3},mean:function(){return W3},meshgrid:function(){return U3},min:function(){return U2},minimum:function(){return H3},mirrorPad:function(){return Z3},mod:function(){return G3},moments:function(){return q3},movingAverage:function(){return g5},mul:function(){return l1},multiRNNCell:function(){return K3},multinomial:function(){return X3},neg:function(){return JJ},norm:function(){return Y2},notEqual:function(){return Y3},oneHot:function(){return AJ},ones:function(){return j3},onesLike:function(){return $3},op:function(){return V$},outerProduct:function(){return Q3},pad:function(){return J3},pad1d:function(){return e4},pad2d:function(){return t4},pad3d:function(){return n4},pad4d:function(){return r4},pool:function(){return i4},pow:function(){return H2},prelu:function(){return o4},print:function(){return rJ},prod:function(){return s4},raggedGather:function(){return u4},raggedRange:function(){return c4},raggedTensorToTensor:function(){return l4},rand:function(){return f4},randomGamma:function(){return v4},randomNormal:function(){return g4},randomStandardNormal:function(){return y4},randomUniform:function(){return b4},range:function(){return x4},real:function(){return e0},reciprocal:function(){return w4},relu:function(){return k4},relu6:function(){return S4},reshape:function(){return W1},reverse:function(){return _4},reverse1d:function(){return T4},reverse2d:function(){return I4},reverse3d:function(){return N4},reverse4d:function(){return C4},rfft:function(){return q4},round:function(){return E4},rsqrt:function(){return A4},scalar:function(){return Z2},scatterND:function(){return y5},searchSorted:function(){return D3},selu:function(){return R4},separableConv2d:function(){return O4},setdiff1dAsync:function(){return D4},sigmoid:function(){return H1},sign:function(){return F4},signal:function(){return W6},sin:function(){return P4},sinh:function(){return L4},slice:function(){return Z1},slice1d:function(){return z4},slice2d:function(){return B4},slice3d:function(){return W4},slice4d:function(){return V4},softmax:function(){return j4},softplus:function(){return _3},spaceToBatchND:function(){return a4},sparse:function(){return H6},sparseToDense:function(){return x5},spectral:function(){return B6},split:function(){return G4},sqrt:function(){return G2},square:function(){return q2},squaredDifference:function(){return K4},squeeze:function(){return X4},stack:function(){return Y4},step:function(){return $4},stridedSlice:function(){return Q4},string:function(){return Z6},sub:function(){return I3},sum:function(){return K2},tan:function(){return J4},tanh:function(){return G1},tensor:function(){return H$},tensor1d:function(){return e5},tensor2d:function(){return t5},tensor3d:function(){return c0},tensor4d:function(){return n5},tensor5d:function(){return r5},tensor6d:function(){return a5},tile:function(){return t3},topk:function(){return i5},transpose:function(){return t0},truncatedNormal:function(){return o5},unique:function(){return s5},unsortedSegmentSum:function(){return u5},unstack:function(){return c5},upperBound:function(){return l5},variable:function(){return f5},where:function(){return N2},whereAsync:function(){return d5},zeros:function(){return V3},zerosLike:function(){return C2}});var Jce=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qce;switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(Zue("a",e,t,n),Zue("b",e,t,n))];case"AddN":return[r.addN(Zue("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(Zue("a",e,t,n),Zue("b",e,t,n))];case"Mul":return[r.mul(Zue("a",e,t,n),Zue("b",e,t,n))];case"RealDiv":case"Div":return[r.div(Zue("a",e,t,n),Zue("b",e,t,n))];case"DivNoNan":return[r.divNoNan(Zue("a",e,t,n),Zue("b",e,t,n))];case"FloorDiv":return[r.floorDiv(Zue("a",e,t,n),Zue("b",e,t,n))];case"Sub":return[r.sub(Zue("a",e,t,n),Zue("b",e,t,n))];case"Minimum":return[r.minimum(Zue("a",e,t,n),Zue("b",e,t,n))];case"Maximum":return[r.maximum(Zue("a",e,t,n),Zue("b",e,t,n))];case"Pow":return[r.pow(Zue("a",e,t,n),Zue("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(Zue("a",e,t,n),Zue("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},ele=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qce;switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(Zue("x",e,t,n))];case"Acos":return[r.acos(Zue("x",e,t,n))];case"Acosh":return[r.acosh(Zue("x",e,t,n))];case"Asin":return[r.asin(Zue("x",e,t,n))];case"Asinh":return[r.asinh(Zue("x",e,t,n))];case"Atan":return[r.atan(Zue("x",e,t,n))];case"Atan2":return[r.atan2(Zue("x",e,t,n),Zue("y",e,t,n))];case"Atanh":return[r.atanh(Zue("x",e,t,n))];case"Ceil":return[r.ceil(Zue("x",e,t,n))];case"Complex":return[r.complex(Zue("real",e,t,n),Zue("imag",e,t,n))];case"Cos":return[r.cos(Zue("x",e,t,n))];case"Cosh":return[r.cosh(Zue("x",e,t,n))];case"Elu":return[r.elu(Zue("x",e,t,n))];case"Erf":return[r.erf(Zue("x",e,t,n))];case"Exp":return[r.exp(Zue("x",e,t,n))];case"Expm1":return[r.expm1(Zue("x",e,t,n))];case"Floor":return[r.floor(Zue("x",e,t,n))];case"Log":return[r.log(Zue("x",e,t,n))];case"Log1p":return[r.log1p(Zue("x",e,t,n))];case"Imag":return[r.imag(Zue("x",e,t,n))];case"Neg":return[r.neg(Zue("x",e,t,n))];case"Reciprocal":return[r.reciprocal(Zue("x",e,t,n))];case"Real":return[r.real(Zue("x",e,t,n))];case"Relu":return[r.relu(Zue("x",e,t,n))];case"Round":return[r.round(Zue("x",e,t,n))];case"Selu":return[r.selu(Zue("x",e,t,n))];case"Sigmoid":return[r.sigmoid(Zue("x",e,t,n))];case"Sin":return[r.sin(Zue("x",e,t,n))];case"Sign":return[r.sign(Zue("x",e,t,n))];case"Sinh":return[r.sinh(Zue("x",e,t,n))];case"Softplus":return[r.softplus(Zue("x",e,t,n))];case"Sqrt":return[r.sqrt(Zue("x",e,t,n))];case"Square":return[r.square(Zue("x",e,t,n))];case"Tanh":return[r.tanh(Zue("x",e,t,n))];case"Tan":return[r.tan(Zue("x",e,t,n))];case"ClipByValue":return[r.clipByValue(Zue("x",e,t,n),Zue("clipValueMin",e,t,n),Zue("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(Zue("x",e,t,n))];case"Rsqrt":return[r.rsqrt(Gue(e.inputNames[0],t,n))];case"Prod":return[r.prod(Zue("x",e,t,n),Zue("axes",e,t,n))];case"LeakyRelu":return[r.leakyRelu(Zue("x",e,t,n),Zue("alpha",e,t,n))];case"Prelu":return[r.prelu(Zue("x",e,t,n),Zue("alpha",e,t,n))];case"IsNan":return[r.isNaN(Gue(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function tle(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!=typeof e&&"number"!=typeof t){SY.assert(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],i=t[r];SY.assert(a<0||i<0||a===i,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function nle(e){return!("number"==typeof e||e.some((function(e){return e<0})))}function rle(e,t,n){var r=ale(e,n),a=!nle(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=ale(e.shape,r)})),!nle(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function ale(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var ile=function(){function e(t,n,r,a,i,o,s){N(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=Z2(0),VJ(this.idTensor)}return(0,C.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){(null==e||!e.has(t.tensor.id))&&t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?)."));return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0===this.size()&&(null==this.elementShape||0===this.elementShape.length)&&(this.elementShape=t.shape),tle(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,VJ(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,because the index size: ").concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return H$([],[0].concat(this.elementShape));var r=this.readMany(e);return tle(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Y4(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return H$([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return tle(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),U1(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,(0,I.Z)(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,c5(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), and the TensorArray is not marked as dynamically resizeable"));var i=0===r?0:t.size/r,o=[];BJ((function(){t=W1(t,[1,r,i]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,e[s],i];o[s]=W1(Z1(t,u,c),n.elementShape)}return o}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,o)}}]),e}(),ole=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;N(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));tle(n,e.shape,"TensorList shape mismatch: "),VJ(e)})),this.idTensor=Z2(0),this.maxNumElements=a,VJ(this.idTensor)}return(0,C.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e((0,I.Z)(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){(null==e||!e.has(t.id))&&t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));tle(e,this.elementShape,"TensorList shape mismatch: ");var a=rle(this.elementShape,this.tensors,e);return BJ((function(){var e=n.tensors.map((function(e){return W1(e,a)}));return Y4(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=rle(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,tle(r.shape,e,"TensorList shape mismatch: "),W1(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(tle(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");VJ(e),this.tensors.push(e)}},{key:"resize",value:function(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(t));if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error("TensorListResize input size ".concat(t," is greater maxNumElement ").concat(this.maxNumElements,"."));var n=new e([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(var r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));tle(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=rle(this.elementShape,this.tensors,t);return W1(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));tle(this.elementShape,t.shape,"TensorList shape mismatch: "),VJ(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));tle(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=rle(this.elementShape,this.tensors,n);return 0===e.length?H$([],[0].concat(a)):BJ((function(){var t=e.map((function(e){return W1(r.tensors[e],a)}));return Y4(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));tle(this.elementShape,t,"TensorList shape mismatch: ");var r=rle(this.elementShape,this.tensors,t);return 0===this.size()?H$([],[0].concat(r)):BJ((function(){var e=n.tensors.map((function(e){return W1(e,r)}));return U1(e,0)}))}}]),e}();function sle(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));tle(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=c5(e);return new ole(a,t,r)}function ule(e,t,n,r){return new ole([],e,t,r)}function cle(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,(0,I.Z)(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var i=new ole([],n,e.dtype,r),o=c5(e,0);return t.forEach((function(e,t){i.setItem(e,o[t])})),i}function lle(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var i=ale(e.shape.slice(1),n),o=0===r?0:e.size/r,s=BJ((function(){var n=[];e=W1(e,[1,r,o]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,t[s],o];n[s]=W1(Z1(e,u,c),i)}return e.dispose(),n})),u=new ole([],n,e.dtype,t.length),c=0;c<s.length;c++)u.setItem(c,s[c]);return u}var fle=function(){var e=Tn(Sn().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,p,d,m,v,g,y,b,x,w,k,S,_,T,I,N,C,E,A,R,O,M,D,F,P,L,z,B,W,V,j,U,H,Z,G,q,K,X,Y,$,Q,J,ee,te,ne,re,ae,ie,oe,se,ue,ce,le,fe,he,pe,de,me,ve,ge,ye,be,xe,we,ke,Se,_e,Te,Ie,Ne,Ce,Ee,Ae,Re,Oe,Me,De,Fe,Pe,Le,ze,Be,We,Ve,je,Ue,He,Ze;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?12:"LoopCond"===e.t0?16:"Switch"===e.t0?18:"Merge"===e.t0?28:"Enter"===e.t0?33:"Exit"===e.t0?35:"NextIteration"===e.t0?37:"TensorArrayV3"===e.t0?39:"TensorArrayWriteV3"===e.t0?41:"TensorArrayReadV3"===e.t0?43:"TensorArrayGatherV3"===e.t0?45:"TensorArrayScatterV3"===e.t0?47:"TensorArrayConcatV3"===e.t0?49:"TensorArraySplitV3"===e.t0?51:"TensorArraySizeV3"===e.t0?53:"TensorArrayCloseV3"===e.t0?55:"TensorListSetItem"===e.t0?57:"TensorListGetItem"===e.t0?59:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?61:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?63:"TensorListGather"===e.t0?67:"TensorListStack"===e.t0?69:"TensorListFromTensor"===e.t0?71:"TensorListConcat"===e.t0||"TensorListConcatV2"===e.t0?73:"TensorListPushBack"===e.t0?75:"TensorListPopBack"===e.t0?77:"TensorListSplit"===e.t0?79:"TensorListLength"===e.t0?81:"TensorListResize"===e.t0?83:85;break;case 3:return a=Zue("thenBranch",t,n,r),i=Zue("elseBranch",t,n,r),o=Zue("cond",t,n,r),s=Zue("args",t,n,r),e.next=6,o.data();case 6:if(!e.sent[0]){e.next=10;break}e.t1=r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap),e.next=11;break;case 10:e.t1=r.functionMap[i].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap);case 11:return e.abrupt("return",e.t1);case 12:return e.delegateYield(Sn().mark((function e(){var a,i,o,s,u,c,l,f;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Zue("body",t,n,r),i=Zue("cond",t,n,r),o=Zue("args",t,n,r),e.next=5,r.functionMap[i].executeFunctionAsync(o,r.tensorArrayMap,r.tensorListMap);case 5:return s=e.sent,u=o.map((function(e){return e.id})),e.next=9,s[0].data();case 9:c=e.sent,s.forEach((function(e){!e.kept&&-1===u.indexOf(e.id)&&e.dispose()})),l=o,f=Sn().mark((function e(){var t,n,o;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l,e.next=3,r.functionMap[a].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 3:return l=e.sent,n=l.map((function(e){return e.id})),t.forEach((function(e){!e.kept&&-1===u.indexOf(e.id)&&-1===n.indexOf(e.id)&&e.dispose()})),e.next=8,r.functionMap[i].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 8:return o=e.sent,e.next=11,o[0].data();case 11:c=e.sent,o.forEach((function(e){!e.kept&&-1===u.indexOf(e.id)&&-1===n.indexOf(e.id)&&e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 13:if(!c[0]){e.next=17;break}return e.delegateYield(f(),"t0",15);case 15:e.next=13;break;case 17:return e.abrupt("return",{v:l});case 18:case"end":return e.stop()}}),e)}))(),"t2",13);case 13:if("object"!==typeof(u=e.t2)){e.next=16;break}return e.abrupt("return",u.v);case 16:return c=Zue("pred",t,n,r),e.abrupt("return",[$ue(c)]);case 18:return l=Zue("pred",t,n,r),(f=Zue("data",t,n,r)).kept||(f=$ue(f)),e.next=22,l.data();case 22:if(!e.sent[0]){e.next=26;break}e.t3=[void 0,f],e.next=27;break;case 26:e.t3=[f,void 0];case 27:return e.abrupt("return",e.t3);case 28:if(h=t.inputNames.find((function(e){return void 0!==Gue(e,n,r)})),!h){e.next=32;break}return p=Gue(h,n,r),e.abrupt("return",[$ue(p)]);case 32:return e.abrupt("return");case 33:return d=Zue("frameName",t,n,r),m=Zue("tensor",t,n,r),e.abrupt("return",(r.enterFrame(d),[$ue(m)]));case 35:return v=Zue("tensor",t,n,r),e.abrupt("return",(r.exitFrame(),[$ue(v)]));case 37:return g=Zue("tensor",t,n,r),e.abrupt("return",(r.nextIteration(),[$ue(g)]));case 39:return y=Zue("size",t,n,r),b=Zue("dtype",t,n,r),x=Zue("elementShape",t,n,r),w=Zue("dynamicSize",t,n,r),k=Zue("clearAfterRead",t,n,r),S=Zue("identicalElementShapes",t,n,r),_=Zue("name",t,n,r),T=new ile(_,b,y,x,S,w,k),e.abrupt("return",(r.addTensorArray(T),[T.idTensor,Z2(1)]));case 41:return I=Zue("tensorArrayId",t,n,r),N=Zue("index",t,n,r),C=Zue("tensor",t,n,r),E=r.getTensorArray(I.id),e.abrupt("return",(E.write(N,C),[E.idTensor]));case 43:return A=Zue("tensorArrayId",t,n,r),R=Zue("index",t,n,r),e.abrupt("return",[r.getTensorArray(A.id).read(R)]);case 45:return O=Zue("tensorArrayId",t,n,r),M=Zue("indices",t,n,r),D=Zue("dtype",t,n,r),e.abrupt("return",[r.getTensorArray(O.id).gather(M,D)]);case 47:return F=Zue("tensorArrayId",t,n,r),P=Zue("indices",t,n,r),L=Zue("tensor",t,n,r),z=r.getTensorArray(F.id),e.abrupt("return",(z.scatter(P,L),[z.idTensor]));case 49:return B=Zue("tensorArrayId",t,n,r),W=r.getTensorArray(B.id),V=Zue("dtype",t,n,r),e.abrupt("return",[W.concat(V)]);case 51:return j=Zue("tensorArrayId",t,n,r),U=Zue("tensor",t,n,r),H=Zue("lengths",t,n,r),Z=r.getTensorArray(j.id),e.abrupt("return",(Z.split(H,U),[Z.idTensor]));case 53:return G=Zue("tensorArrayId",t,n,r),q=r.getTensorArray(G.id),e.abrupt("return",[Z2(q.size(),"int32")]);case 55:return K=Zue("tensorArrayId",t,n,r),X=r.getTensorArray(K.id),e.abrupt("return",(X.clearAndClose(),[X.idTensor]));case 57:return Y=Zue("tensorListId",t,n,r),$=Zue("index",t,n,r),Q=Zue("tensor",t,n,r),J=r.getTensorList(Y.id),e.abrupt("return",(J.setItem($,Q),[J.idTensor]));case 59:return ee=Zue("tensorListId",t,n,r),te=Zue("index",t,n,r),ne=Zue("elementShape",t,n,r),re=Zue("elementDType",t,n,r),e.abrupt("return",[r.getTensorList(ee.id).getItem(te,ne,re)]);case 61:return ae=Zue("indices",t,n,r),ie=Zue("tensor",t,n,r),oe=Zue("elementShape",t,n,r),se=Zue("numElements",t,n,r),ue=cle(ie,ae,oe,se),e.abrupt("return",(r.addTensorList(ue),[ue.idTensor]));case 63:return ce=Zue("elementShape",t,n,r),le=Zue("elementDType",t,n,r),fe="TensorListReserve"===t.op?"numElements":"maxNumElements",he=Zue(fe,t,n,r),pe="TensorListReserve"===t.op?-1:he,de=ule(ce,le,0,pe),e.abrupt("return",(r.addTensorList(de),[de.idTensor]));case 67:return me=Zue("tensorListId",t,n,r),ve=Zue("indices",t,n,r),ge=Zue("elementShape",t,n,r),ye=Zue("elementDType",t,n,r),e.abrupt("return",[r.getTensorList(me.id).gather(ve,ye,ge)]);case 69:return be=Zue("tensorListId",t,n,r),xe=Zue("elementShape",t,n,r),we=Zue("elementDType",t,n,r),ke=Zue("numElements",t,n,r),e.abrupt("return",[r.getTensorList(be.id).stack(xe,we,ke)]);case 71:return Se=Zue("tensor",t,n,r),_e=Zue("elementShape",t,n,r),Te=Zue("elementDType",t,n,r),Ie=sle(Se,_e,Te),e.abrupt("return",(r.addTensorList(Ie),[Ie.idTensor]));case 73:return Ne=Zue("tensorListId",t,n,r),Ce=r.getTensorList(Ne.id),Ee=Zue("dtype",t,n,r),Ae=Zue("elementShape",t,n,r),e.abrupt("return",[Ce.concat(Ee,Ae)]);case 75:return Re=Zue("tensorListId",t,n,r),Oe=Zue("tensor",t,n,r),Me=r.getTensorList(Re.id),e.abrupt("return",(Me.pushBack(Oe),[Me.idTensor]));case 77:return De=Zue("tensorListId",t,n,r),Fe=Zue("elementShape",t,n,r),Pe=Zue("elementDType",t,n,r),e.abrupt("return",[r.getTensorList(De.id).popBack(Fe,Pe)]);case 79:return Le=Zue("tensor",t,n,r),ze=Zue("elementShape",t,n,r),Be=Zue("lengths",t,n,r),We=lle(Le,Be,ze),e.abrupt("return",(r.addTensorList(We),[We.idTensor]));case 81:return Ve=Zue("tensorListId",t,n,r),je=r.getTensorList(Ve.id),e.abrupt("return",[Z2(je.size(),"int32")]);case 83:return Ue=Zue("tensorListId",t,n,r),He=Zue("size",t,n,r),Ze=r.getTensorList(Ue.id).resize(He),e.abrupt("return",(r.addTensorList(Ze),[Ze.idTensor]));case 85:throw TypeError("Node type ".concat(t.op," is not implemented"));case 86:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function hle(e,t,n){var r=Zue("fusedOps",e,t,n),a=(0,T.Z)(r,2),i=a[0],o=a[1],s="biasadd"===i,u=!s,c="prelu"===o,l="fusedbatchnorm"===i,f=Zue("numArgs",e,t,n);if(s){if(c&&2!==f)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&s&&1!==f)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var h=Zue("strides",e,t,n),p=Yue(e,t,n),d=Zue("dataFormat",e,t,n).toUpperCase(),m=Zue("dilations",e,t,n),v=Zue("args",e,t,n),g=(0,T.Z)(v,2),y=g[0],b=g[1];return u&&(b=y,y=void 0),{stride:h,pad:p,dataFormat:d,dilations:m,biasArg:y,preluArg:b,activationFunc:o,leakyreluAlpha:Zue("leakyreluAlpha",e,t,n)}}var ple=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qce;switch(e.op){case"Conv1D":var a=Zue("stride",e,t,n),i=Zue("pad",e,t,n),o=Zue("dataFormat",e,t,n).toUpperCase(),s=Zue("dilation",e,t,n);return[r.conv1d(Zue("x",e,t,n),Zue("filter",e,t,n),a,i,o,s)];case"Conv2D":var u=Zue("strides",e,t,n),c=Yue(e,t,n),l=Zue("dataFormat",e,t,n).toUpperCase(),f=Zue("dilations",e,t,n);return[r.conv2d(Zue("x",e,t,n),Zue("filter",e,t,n),[u[1],u[2]],c,l,[f[1],f[2]])];case"_FusedConv2D":var h=hle(e,t,n),p=h.stride,d=h.pad,m=h.dataFormat,v=h.dilations,g=h.biasArg,y=h.preluArg,b=h.activationFunc,x=h.leakyreluAlpha;return[r.fused.conv2d({x:Zue("x",e,t,n),filter:Zue("filter",e,t,n),strides:[p[1],p[2]],pad:d,dataFormat:m,dilations:[v[1],v[2]],bias:g,activation:b,preluActivationWeights:y,leakyreluAlpha:x})];case"FusedDepthwiseConv2dNative":var w=hle(e,t,n),k=w.stride,S=w.pad,_=w.dataFormat,T=w.dilations,I=w.biasArg,N=w.preluArg,C=w.activationFunc,E=w.leakyreluAlpha;return[r.fused.depthwiseConv2d({x:Zue("x",e,t,n),filter:Zue("filter",e,t,n),strides:[k[1],k[2]],pad:S,dataFormat:_,dilations:[T[1],T[2]],bias:I,activation:C,preluActivationWeights:N,leakyreluAlpha:E})];case"Conv2DBackpropInput":case"Conv2dTranspose":var A=Zue("outputShape",e,t,n),R=Zue("strides",e,t,n),O=Yue(e,t,n);return[r.conv2dTranspose(Zue("x",e,t,n),Zue("filter",e,t,n),A,[R[1],R[2]],O)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var M=Zue("strides",e,t,n),D=Yue(e,t,n),F=Zue("dilations",e,t,n),P=Zue("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(Zue("input",e,t,n),Zue("filter",e,t,n),[M[1],M[2]],D,P,[F[1],F[2]])];case"Conv3D":var L=Zue("strides",e,t,n),z=Zue("pad",e,t,n),B=Zue("dataFormat",e,t,n).toUpperCase(),W=Zue("dilations",e,t,n);return[r.conv3d(Zue("x",e,t,n),Zue("filter",e,t,n),[L[1],L[2],L[3]],z,B,[W[1],W[2],W[3]])];case"AvgPool":var V=Zue("strides",e,t,n),j=Zue("pad",e,t,n),U=Zue("kernelSize",e,t,n);return[r.avgPool(Zue("x",e,t,n),[U[1],U[2]],[V[1],V[2]],j)];case"MaxPool":var H=Zue("strides",e,t,n),Z=Zue("pad",e,t,n),G=Zue("kernelSize",e,t,n);return[r.maxPool(Zue("x",e,t,n),[G[1],G[2]],[H[1],H[2]],Z)];case"MaxPoolWithArgmax":var q=Zue("strides",e,t,n),K=Zue("pad",e,t,n),X=Zue("kernelSize",e,t,n),Y=Zue("includeBatchInIndex",e,t,n),$=r.maxPoolWithArgmax(Zue("x",e,t,n),[X[1],X[2]],[q[1],q[2]],K,Y),Q=$.result,J=$.indexes;return[Q,J];case"AvgPool3D":var ee=Zue("strides",e,t,n),te=Zue("pad",e,t,n),ne=Zue("kernelSize",e,t,n);return[r.avgPool3d(Zue("x",e,t,n),[ne[1],ne[2],ne[3]],[ee[1],ee[2],ee[3]],te)];case"MaxPool3D":var re=Zue("strides",e,t,n),ae=Zue("pad",e,t,n),ie=Zue("kernelSize",e,t,n);return[r.maxPool3d(Zue("x",e,t,n),[ie[1],ie[2],ie[3]],[re[1],re[2],re[3]],ae)];case"Dilation2D":var oe=Zue("strides",e,t,n),se=Zue("pad",e,t,n),ue=Zue("dilations",e,t,n),ce=oe[1],le=oe[2],fe=ue[1],he=ue[2];return[r.dilation2d(Zue("x",e,t,n),Zue("filter",e,t,n),[ce,le],se,[fe,he],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},dle=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qce;switch(e.op){case"Fill":var a=Zue("shape",e,t,n),i=Zue("dtype",e,t,n),o=Zue("value",e,t,n);return[r.fill(a,o,i)];case"LinSpace":var s=Zue("start",e,t,n),u=Zue("stop",e,t,n),c=Zue("num",e,t,n);return[r.linspace(s,u,c)];case"Multinomial":var l=Zue("logits",e,t,n),f=Zue("numSamples",e,t,n),h=Zue("seed",e,t,n);return[r.multinomial(l,f,h)];case"OneHot":var p=Zue("indices",e,t,n),d=Zue("depth",e,t,n),m=Zue("onValue",e,t,n),v=Zue("offValue",e,t,n),g=Zue("dtype",e,t,n);return[r.oneHot(p,d,m,v,g)];case"Ones":return[r.ones(Zue("shape",e,t,n),Zue("dtype",e,t,n))];case"OnesLike":return[r.onesLike(Zue("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(Zue("shape",e,t,n),Zue("dtype",e,t,n),Zue("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(Zue("shape",e,t,n),Zue("minval",e,t,n),Zue("maxval",e,t,n),Zue("dtype",e,t,n))];case"Range":var y=Zue("start",e,t,n),b=Zue("stop",e,t,n),x=Zue("step",e,t,n);return[r.range(y,b,x,Zue("dtype",e,t,n))];case"TruncatedNormal":var w=Zue("shape",e,t,n),k=Zue("mean",e,t,n),S=Zue("stdDev",e,t,n),_=Zue("seed",e,t,n);return[r.truncatedNormal(w,k,S,Zue("dtype",e,t,n),_)];case"Zeros":return[r.zeros(Zue("shape",e,t,n),Zue("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(Zue("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function mle(e,t,n){return{boxes:Zue("boxes",e,t,n),scores:Zue("scores",e,t,n),maxOutputSize:Zue("maxOutputSize",e,t,n),iouThreshold:Zue("iouThreshold",e,t,n),scoreThreshold:Zue("scoreThreshold",e,t,n),softNmsSigma:Zue("softNmsSigma",e,t,n)}}var vle=function(){var e=Tn(Sn().mark((function e(t,n,r,a){var i,o,s,u,c,l,f,h,p,d,m,v,g,y,b,x,w,k,S,_,T,I,N,C,E,A=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=A.length>4&&void 0!==A[4]?A[4]:Qce,e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?4:"NonMaxSuppressionV4"===e.t0?15:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?26:"Where"===e.t0?31:"ListDiff"===e.t0?37:38;break;case 4:return o=mle(t,n,r),s=o.boxes,u=o.scores,c=o.maxOutputSize,l=o.iouThreshold,f=o.scoreThreshold,h=o.softNmsSigma,e.next=13,i.image.nonMaxSuppressionWithScoreAsync(s,u,c,l,f,h);case 13:return p=e.sent,e.abrupt("return",[p.selectedIndices,p.selectedScores]);case 15:return d=mle(t,n,r),m=d.boxes,v=d.scores,g=d.maxOutputSize,y=d.iouThreshold,b=d.scoreThreshold,x=Zue("padToMaxOutputSize",t,n,r),e.next=24,i.image.nonMaxSuppressionPaddedAsync(m,v,g,y,b,x);case 24:return w=e.sent,e.abrupt("return",[w.selectedIndices,w.validOutputs]);case 26:return k=mle(t,n,r),S=k.boxes,_=k.scores,T=k.maxOutputSize,I=k.iouThreshold,N=k.scoreThreshold,e.next=29,i.image.nonMaxSuppressionAsync(S,_,T,I,N);case 29:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 31:return C=i.cast(Zue("condition",t,n,r),"bool"),e.next=34,i.whereAsync(C);case 34:return e.t2=e.sent,E=[e.t2],e.abrupt("return",(C.dispose(),E));case 37:return e.abrupt("return",i.setdiff1dAsync(Zue("x",t,n,r),Zue("y",t,n,r)));case 38:throw TypeError("Node type ".concat(t.op," is not implemented"));case 39:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),gle=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qce;switch(e.op){case"LowerBound":var a=Zue("sortedSequence",e,t,n),i=Zue("values",e,t,n);return[r.lowerBound(a,i)];case"TopKV2":var o=Zue("x",e,t,n),s=Zue("k",e,t,n),u=Zue("sorted",e,t,n),c=r.topk(o,s,u);return[c.values,c.indices];case"UpperBound":var l=Zue("sortedSequence",e,t,n),f=Zue("values",e,t,n);return[r.upperBound(l,f)];case"Unique":var h=Zue("x",e,t,n),p=r.unique(h);return[p.values,p.indices];case"UniqueV2":var d=Zue("x",e,t,n),m=Zue("axis",e,t,n),v=r.unique(d,m);return[v.values,v.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},yle=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qce;switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var a=Zue("default",e,t,n);return[Gue(e.name,t,n)||a];case"Placeholder":return[Gue(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":var i=Zue("x",e,t,n);return[$ue(i)];case"IdentityN":return Zue("x",e,t,n).map((function(e){return $ue(e)}));case"Snapshot":var o=Zue("x",e,t,n);return[$ue(o)];case"Shape":return[r.tensor1d(Zue("x",e,t,n).shape,"int32")];case"ShapeN":return Zue("x",e,t,n).map((function(e){return r.tensor1d(e.shape)}));case"Size":return[r.scalar(Zue("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(Zue("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":var s=Zue("x",e,t,n),u=Zue("data",e,t,n),c=Zue("message",e,t,n),l=Zue("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(c);for(var f=0;f<u.length;f++)console.log(Array.prototype.slice.call(u[f].dataSync()).slice(0,l));return[s];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},ble=function(){function e(t,n){N(this,e),this.keyDType=t,this.valueDType=n,this.handle=Z2(0),this.tensorMap=new Map,VJ(this.handle)}return(0,C.Z)(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return Z2(this.size(),"int32")}},{key:"import",value:function(){var e=Tn(Sn().mark((function e(t,n){var r,a=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",(this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),BJ((function(){var e=c5(n),t=r.length,i=e.length;SY.assert(t===i,(function(){return"The number of elements doesn't match, keys has ".concat(t," elements, the values has ").concat(i," elements.")}));for(var o=0;o<t;o++){var s=r[o],u=e[o];VJ(u),a.tensorMap.set(s,u)}return a.handle}))));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=Tn(Sn().mark((function e(t,n){var r,a=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",BJ((function(){for(var e=[],t=0;t<r.length;t++){var i=r[t],o=a.findWithDefault(i,n);e.push(o)}return Y4(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ").concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ").concat(t.dtype))}}]),e}(),xle=function(){var e=Tn(Sn().mark((function e(t,n,r,a){var i,o,s,u,c,l,f,h,p,d,m;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?8:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?13:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?18:20;break;case 3:if(null==(i=a.getHashTableHandleByName(t.name))){e.next=6;break}return e.abrupt("return",[i]);case 6:return o=Zue("keyDType",t,n,r),s=Zue("valueDType",t,n,r),u=new ble(o,s),e.abrupt("return",(a.addHashTable(t.name,u),[u.handle]));case 8:return c=Zue("tableHandle",t,n,r,a),l=Zue("keys",t,n,r),f=Zue("values",t,n,r),e.next=11,a.getHashTableById(c.id).import(l,f);case 11:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 13:return h=Zue("tableHandle",t,n,r,a),p=Zue("keys",t,n,r),d=Zue("defaultValue",t,n,r),e.next=16,a.getHashTableById(h.id).find(p,d);case 16:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 18:return m=Zue("tableHandle",t,n,r,a),e.abrupt("return",[a.getHashTableById(m.id).tensorSize()]);case 20:throw TypeError("Node type ".concat(t.op," is not implemented"));case 21:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),wle=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qce;switch(e.op){case"ResizeBilinear":var a=Zue("images",e,t,n),i=Zue("size",e,t,n),o=Zue("alignCorners",e,t,n),s=Zue("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(a,[i[0],i[1]],o,s)];case"ResizeNearestNeighbor":var u=Zue("images",e,t,n),c=Zue("size",e,t,n),l=Zue("alignCorners",e,t,n),f=Zue("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(u,[c[0],c[1]],l,f)];case"CropAndResize":var h=Zue("image",e,t,n),p=Zue("boxes",e,t,n),d=Zue("boxInd",e,t,n),m=Zue("cropSize",e,t,n),v=Zue("method",e,t,n),g=Zue("extrapolationValue",e,t,n);return[r.image.cropAndResize(h,p,d,m,v,g)];case"ImageProjectiveTransformV3":var y=Zue("images",e,t,n),b=Zue("transforms",e,t,n),x=Zue("outputShape",e,t,n),w=Zue("fillValue",e,t,n),k=Zue("interpolation",e,t,n),S=Zue("fillMode",e,t,n);return[r.image.transform(y,b,k.toLowerCase(),S.toLowerCase(),w,x)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},kle=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qce;switch(e.op){case"Equal":return[r.equal(Zue("a",e,t,n),Zue("b",e,t,n))];case"NotEqual":return[r.notEqual(Zue("a",e,t,n),Zue("b",e,t,n))];case"Greater":return[r.greater(Zue("a",e,t,n),Zue("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(Zue("a",e,t,n),Zue("b",e,t,n))];case"Less":return[r.less(Zue("a",e,t,n),Zue("b",e,t,n))];case"LessEqual":return[r.lessEqual(Zue("a",e,t,n),Zue("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(Zue("a",e,t,n),Zue("b",e,t,n))];case"LogicalNot":return[r.logicalNot(Zue("a",e,t,n))];case"LogicalOr":return[r.logicalOr(Zue("a",e,t,n),Zue("b",e,t,n))];case"Select":case"SelectV2":return[r.where(Zue("condition",e,t,n),Zue("a",e,t,n),Zue("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Sle=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qce;switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(Zue("a",e,t,n),Zue("b",e,t,n),Zue("transposeA",e,t,n),Zue("transposeB",e,t,n))];case"Einsum":return[r.einsum.apply(r,[Zue("equation",e,t,n)].concat((0,I.Z)(Zue("tensors",e,t,n))))];case"Transpose":return[r.transpose(Zue("x",e,t,n),Zue("perm",e,t,n))];case"_FusedMatMul":var a=Zue("fusedOps",e,t,n),i=(0,T.Z)(a,2),o=i[0],s=i[1],u="biasadd"===o,c="prelu"===s,l=Zue("numArgs",e,t,n),f=Zue("leakyreluAlpha",e,t,n);if(u){if(c&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var h=Zue("args",e,t,n),p=(0,T.Z)(h,2),d=p[0],m=p[1];return[r.fused.matMul({a:Zue("a",e,t,n),b:Zue("b",e,t,n),transposeA:Zue("transposeA",e,t,n),transposeB:Zue("transposeB",e,t,n),bias:d,activation:s,preluActivationWeights:m,leakyreluAlpha:f})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},_le=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qce;switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(Zue("x",e,t,n),Zue("axis",e,t,n),Zue("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(Zue("x",e,t,n),Zue("mean",e,t,n),Zue("variance",e,t,n),Zue("offset",e,t,n),Zue("scale",e,t,n),Zue("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(Zue("x",e,t,n),Zue("radius",e,t,n),Zue("bias",e,t,n),Zue("alpha",e,t,n),Zue("beta",e,t,n))];case"Softmax":return[r.softmax(Zue("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(Zue("x",e,t,n))];case"SparseToDense":return[r.sparseToDense(Zue("sparseIndices",e,t,n),Zue("outputShape",e,t,n),Zue("sparseValues",e,t,n),Zue("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Tle=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qce;switch(e.op){case"Max":var a=Zue("axis",e,t,n),i=Zue("keepDims",e,t,n);return[r.max(Zue("x",e,t,n),a,i)];case"Mean":var o=Zue("axis",e,t,n),s=Zue("keepDims",e,t,n);return[r.mean(Zue("x",e,t,n),o,s)];case"Min":var u=Zue("axis",e,t,n),c=Zue("keepDims",e,t,n);return[r.min(Zue("x",e,t,n),u,c)];case"Sum":var l=Zue("axis",e,t,n),f=Zue("keepDims",e,t,n);return[r.sum(Zue("x",e,t,n),l,f)];case"All":var h=Zue("axis",e,t,n),p=Zue("keepDims",e,t,n);return[r.all(Zue("x",e,t,n),h,p)];case"Any":var d=Zue("axis",e,t,n),m=Zue("keepDims",e,t,n);return[r.any(Zue("x",e,t,n),d,m)];case"ArgMax":var v=Zue("axis",e,t,n);return[r.argMax(Zue("x",e,t,n),v)];case"ArgMin":var g=Zue("axis",e,t,n);return[r.argMin(Zue("x",e,t,n),g)];case"Prod":var y=Zue("axis",e,t,n),b=Zue("keepDims",e,t,n);return[r.prod(Zue("x",e,t,n),y,b)];case"Cumprod":var x=Zue("axis",e,t,n),w=Zue("exclusive",e,t,n),k=Zue("reverse",e,t,n);return[r.cumprod(Zue("x",e,t,n),x,w,k)];case"Cumsum":var S=Zue("axis",e,t,n),_=Zue("exclusive",e,t,n),T=Zue("reverse",e,t,n);return[r.cumsum(Zue("x",e,t,n),S,_,T)];case"Bincount":var I=Zue("x",e,t,n),N=Zue("weights",e,t,n),C=Zue("size",e,t,n);return[r.bincount(I,N,C)];case"DenseBincount":var E=Zue("x",e,t,n),A=Zue("weights",e,t,n),R=Zue("size",e,t,n),O=Zue("binaryOutput",e,t,n);return[r.denseBincount(E,A,R,O)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Ile=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qce;switch(e.op){case"ConcatV2":case"Concat":var a=Zue("n",e,t,n),i=Zue("axis",e,t,n),o=Zue("tensors",e,t,n);return o=o.slice(0,a),[r.concat(o,i)];case"Gather":var s=Zue("x",e,t,n),u=Zue("indices",e,t,n);return[r.gather(s,r.cast(u,"int32"),0)];case"GatherV2":var c=Zue("axis",e,t,n),l=Zue("batchDims",e,t,n),f=Zue("x",e,t,n),h=Zue("indices",e,t,n);return[r.gather(f,r.cast(h,"int32"),c,l)];case"Reverse":for(var p=Zue("dims",e,t,n),d=[],m=0;m<p.length;m++)p[m]&&d.push(m);var v=Zue("x",e,t,n);return[r.reverse(v,d)];case"ReverseV2":var g=Zue("axis",e,t,n),y=Zue("x",e,t,n);return[r.reverse(y,g)];case"Slice":var b=Zue("begin",e,t,n),x=Zue("size",e,t,n);return[r.slice(Zue("x",e,t,n),b,x)];case"StridedSlice":var w=Zue("begin",e,t,n),k=Zue("end",e,t,n),S=Zue("strides",e,t,n),_=Zue("beginMask",e,t,n),T=Zue("endMask",e,t,n),I=Zue("ellipsisMask",e,t,n),N=Zue("newAxisMask",e,t,n),C=Zue("shrinkAxisMask",e,t,n),E=Zue("x",e,t,n);return[r.stridedSlice(E,w,k,S,_,T,I,N,C)];case"Pack":return BJ((function(){var a=Zue("axis",e,t,n),i=Zue("tensors",e,t,n),o=i[0].shape,s=r.squeeze(i[0]).shape,u=i.map((function(e){var t=SY.arraysEqual(e.shape,o);if(!t&&!SY.arraysEqual(r.squeeze(e).shape,s))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,o)}));return[r.stack(u,a)]}));case"Unpack":var A=Zue("axis",e,t,n),R=Zue("tensor",e,t,n);return r.unstack(R,A);case"Tile":var O=Zue("reps",e,t,n);return[r.tile(Zue("x",e,t,n),O)];case"Split":case"SplitV":var M=Zue("axis",e,t,n),D=Zue("numOrSizeSplits",e,t,n),F=Zue("x",e,t,n);return r.split(F,D,M);case"ScatterNd":var P=Zue("indices",e,t,n),L=Zue("values",e,t,n),z=Zue("shape",e,t,n);return[r.scatterND(P,L,z)];case"GatherNd":var B=Zue("x",e,t,n),W=Zue("indices",e,t,n);return[r.gatherND(B,W)];case"SparseToDense":var V=Zue("sparseIndices",e,t,n),j=Zue("outputShape",e,t,n),U=Zue("sparseValues",e,t,n),H=Zue("defaultValue",e,t,n);return[r.sparseToDense(V,U,j,U.dtype===H.dtype?H:r.cast(H,U.dtype))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Nle=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qce;switch(e.op){case"SparseFillEmptyRows":var a=r.sparse.sparseFillEmptyRows(Zue("indices",e,t,n),Zue("values",e,t,n),Zue("denseShape",e,t,n),Zue("defaultValue",e,t,n)),i=a.outputIndices,o=a.outputValues,s=a.emptyRowIndicator,u=a.reverseIndexMap;return[i,o,s,u];case"SparseReshape":var c=r.sparse.sparseReshape(Zue("inputIndices",e,t,n),Zue("inputShape",e,t,n),Zue("newShape",e,t,n)),l=c.outputIndices,f=c.outputShape;return[l,f];case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(Zue("data",e,t,n),Zue("indices",e,t,n),Zue("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(Zue("data",e,t,n),Zue("indices",e,t,n),Zue("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Cle=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qce;switch(e.op){case"FFT":return[r.fft(Zue("x",e,t,n))];case"IFFT":return[r.ifft(Zue("x",e,t,n))];case"RFFT":return[r.rfft(Zue("x",e,t,n))];case"IRFFT":return[r.irfft(Zue("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Ele=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qce;switch(e.op){case"StringNGrams":var a=r.string.stringNGrams(Zue("data",e,t,n),Zue("dataSplits",e,t,n),Zue("separator",e,t,n),Zue("nGramWidths",e,t,n),Zue("leftPad",e,t,n),Zue("rightPad",e,t,n),Zue("padWidth",e,t,n),Zue("preserveShortSequences",e,t,n)),i=a.nGrams,o=a.nGramsSplits;return[i,o];case"StringSplit":var s=r.string.stringSplit(Zue("input",e,t,n),Zue("delimiter",e,t,n),Zue("skipEmpty",e,t,n)),u=s.indices,c=s.values,l=s.shape;return[u,c,l];case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(Zue("input",e,t,n),Zue("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Ale=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qce;switch(e.op){case"Cast":return[r.cast(Zue("x",e,t,n),Zue("dtype",e,t,n))];case"ExpandDims":var a=Zue("axis",e,t,n);return[r.expandDims(Zue("x",e,t,n),a)];case"Squeeze":var i=Zue("axis",e,t,n);return[r.squeeze(Zue("x",e,t,n),i)];case"Reshape":return[r.reshape(Zue("x",e,t,n),Zue("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(Zue("x",e,t,n),Zue("padding",e,t,n),Zue("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(Zue("x",e,t,n),Zue("padding",e,t,n),Zue("constantValue",e,t,n))];case"SpaceToBatchND":var o=Zue("blockShape",e,t,n),s=Zue("paddings",e,t,n);return[r.spaceToBatchND(Zue("x",e,t,n),o,s)];case"BatchToSpaceND":var u=Zue("blockShape",e,t,n),c=Zue("crops",e,t,n);return[r.batchToSpaceND(Zue("x",e,t,n),u,c)];case"DepthToSpace":var l=Zue("blockSize",e,t,n),f=Zue("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(Zue("x",e,t,n),l,f)];case"BroadcastTo":return[r.broadcastTo(Zue("x",e,t,n),Zue("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(Zue("s0",e,t,n),Zue("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function Rle(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:BJ,i=function(e,t,n){switch(e.category){case"arithmetic":return a((function(){return Jce(e,t,n)}));case"basic_math":return a((function(){return ele(e,t,n)}));case"control":return fle(e,t,n);case"convolution":return a((function(){return ple(e,t,n)}));case"creation":return a((function(){return dle(e,t,n)}));case"dynamic":return vle(e,t,n);case"evaluation":return a((function(){return gle(e,t,n)}));case"image":return a((function(){return wle(e,t,n)}));case"graph":return a((function(){return yle(e,t,n)}));case"logical":return a((function(){return kle(e,t,n)}));case"matrices":return a((function(){return Sle(e,t,n)}));case"normalization":return a((function(){return _le(e,t,n)}));case"reduction":return a((function(){return Tle(e,t,n)}));case"slice_join":return a((function(){return Ile(e,t,n)}));case"sparse":return a((function(){return Nle(e,t,n)}));case"spectral":return a((function(){return Cle(e,t,n)}));case"string":return a((function(){return Ele(e,t,n)}));case"transformation":return a((function(){return Ale(e,t,n)}));case"hash_table":return xle(e,t,n,r);case"custom":var i=Uue(e.op);if(i&&i.customExecutor)return i.customExecutor(new $ce(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()"))}}(e,t,n);return SY.isPromise(i)?i.then((function(e){return[].concat(e)})):[].concat(i)}var Ole=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};N(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return(0,C.Z)(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function Mle(e,t,n,r){var a=new Set,i=[],o=null,s=null,u=new Set,c=Object.keys(e).map((function(e){return Xue(e)[0]})),l=[];null!=r&&(l=r.map((function(e){return Xue(e.name)[0]})));for(var f=(0,I.Z)(t);f.length>0;){var h=f.pop();if((Lle(h)||zle(h)||Ble(h))&&null==o&&(s=(o=h).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(h.name),null==n[h.name]&&-1===c.indexOf(h.name)&&-1===l.indexOf(h.name)){if(0===h.inputs.length){i.push(h.name);continue}h.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),f.push(e))}))}}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}var Dle=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],Fle=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],Ple=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function Lle(e){return Dle.indexOf(e.op)>=0}function zle(e){return Fle.indexOf(e.op)>=0}function Ble(e){return Ple.indexOf(e.op)>=0}var Wle=function(){function e(t,n){var r=this;N(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}return(0,C.Z)(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,(0,I.Z)(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(e,t){var n=Mle(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,i=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has the dynamic op '").concat(a.op,"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [").concat(i,"]"));if(r.length>0){var o=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(o,"] from the provided inputs [").concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(e,t,n){var r=n.usedNodes,a=n.inputs,i=[],o=Object.keys(a).map((function(e){return Xue(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;o.forEach((function(e){r.has(e.name)&&i.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&i.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&i.push(e)}));for(var u=new Set,c=[];i.length>0;){var l=i.pop();u.add(l.name),t[l.name]||c.push(l),l.children.forEach((function(e){!u.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return u.has(e.name)}))&&i.push(e)}))}return c}(this.graph,this.weightMap,n)}},{key:"execute",value:function(e,t){var n=this;e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[Xue(e)[0]]})),i=t.map((function(e){return Xue(e)[0]})),o=i.map((function(e){return n.graph.nodes[e]}));this.resetIntermediateTensors(),0===o.length&&(o=this._outputs);var s=this.getCompilationKey(a,o),u=this.compiledMap.get(s);null==u&&(u=this.compile(e,o),this.compiledMap.set(s,u));var c={},l={};return BJ((function(){var r=new Ole(n.weightMap,c,l,n.functionExecutorMap),a=Object.assign({},n.weightMap);Object.keys(e).forEach((function(t){var n=Xue(t),r=(0,T.Z)(n,2),i=r[0],o=[];o[r[1]]=e[t],a[i]=o}));for(var o=n.getFrozenTensorIds(a),s={},f=0;f<u.length;f++){var h=u[f];if(!a[h.name]){var p=Rle(h,a,r,n._resourceManager);if(SY.isPromise(p))throw new Error("The execution of the op '".concat(h.op,"' returned a promise. Please use model.executeAsync() instead."));a[h.name]=p,n.checkTensorForDisposal(h.name,h,a,r,o,i,s)}}return null==n.parent&&r.dispose(o),t.map((function(e){return Gue(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,i,o){var s=this;"control"===t.category||-1!==i.indexOf(e)||(n[e].forEach((function(e){null!=e&&(o[e.id]=(o[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var i=function(e,t,n){return t[Kue(e,n.currentContextId)]}(e.name,n,r);null!=i&&i.forEach((function(e){if(e&&!e.kept&&!a.has(e.id)){var n=o[e.id];if(1===n){if(s.keepTensorForDebug){var i=que(t.name,r),u=(0,T.Z)(i,2),c=u[0],l=u[1];s.intermediateTensors[c]||(s.intermediateTensors[c]=[]),s.intermediateTensors[c][l]=e}else e.dispose();delete o[e.id]}else null!=n&&o[e.id]--}}))}})))}},{key:"executeAsync",value:function(){var e=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"disposeIntermediateTensors",value:function(){var e=this;!this.intermediateTensors||(Object.keys(this.intermediateTensors).forEach((function(t){return e.intermediateTensors[t].forEach((function(e){return e.dispose()}))})),this.disposeTensorsMap())}},{key:"disposeTensorsMap",value:function(){var e=this;!this.tensorsMap||Object.keys(this.tensorsMap).forEach((function(t){e.tensorsMap[t].forEach((function(t){t&&!t.kept&&!t.isDisposed&&!e.keepIds.has(t.id)&&t.dispose()}))}))}},{key:"getIntermediateTensors",value:function(){return this.tensorsMap}},{key:"resetIntermediateTensors",value:function(){for(var e in this.intermediateTensors)this.intermediateTensors[e].forEach((function(e){return e.dispose()})),delete this.intermediateTensors[e]}},{key:"_executeAsync",value:function(){var e=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u,c,l=this,f=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=f.length>2&&void 0!==f[2]&&f[2],a=f.length>3&&void 0!==f[3]?f[3]:{},i=f.length>4&&void 0!==f[4]?f[4]:{},r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=GG().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){console.warn(h.message)}return this.resetIntermediateTensors(),o=new Ole(this.weightMap,a,i,this.functionExecutorMap),e.next=9,this.executeWithControlFlow(t,o,n,r);case 9:return this.tensorsMap=e.sent,s=n.map((function(e){return Gue(e,l.tensorsMap,o)})),u=s.map((function(e){return e.id})),c=Object.keys(t).map((function(e){return t[e].id})),e.abrupt("return",(this.keepIds=new Set([].concat((0,I.Z)(u),(0,I.Z)(c),(0,I.Z)(this.weightIds))),this.keepTensorForDebug||this.disposeTensorsMap(),null==this.parent&&o.dispose(this.keepIds),s));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var e=Tn(Sn().mark((function e(t,n,r){var a,i=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[i.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var e=Tn(Sn().mark((function e(t,n,r,a){var i,o,s,u,c,l,f,h,p,d,m,v,g,y,b,x,w,k=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object.keys(t),o=i.map((function(e){return k.graph.nodes[Xue(e)[0]]})),s=r.map((function(e){return Xue(e)[0]})),u=s.map((function(e){return k.graph.nodes[e]})),0===u.length&&(u=this._outputs),c=Mle(t,u,this.weightMap,this._initNodes),l=c.usedNodes,f=c.missingInputs,h=c.dynamicNode,p=c.syncInputs,d=[].concat((0,I.Z)(o),(0,I.Z)(this.graph.weights),(0,I.Z)(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),m=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=Xue(e),r=(0,T.Z)(n,2),a=r[0],i=[];i[r[1]]=t[e],m[a]=i})),v={},g=this.getFrozenTensorIds(m),y={};case 5:if(!(d.length>0)){e.next=11;break}return b=this.processStack(o,d,n,m,y,g,s,v,l),e.next=9,Promise.all(b);case 9:e.next=5;break;case 11:if(null==h&&!a&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),x=u.filter((function(e){return!Lle(e)&&!Gue(e.name,m,n)})).map((function(e){return e.name})),!(x.length>0)){e.next=16;break}throw w="",null!=h&&(w="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [".concat(p,"]")),new Error("Cannot compute the outputs [".concat(x,"] from the provided inputs [").concat(i,"]. Consider providing the following inputs: [").concat(f,"]. ").concat(w));case 16:return e.abrupt("return",m);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"processStack",value:function(e,t,n,r,a,i,o,s,u){for(var c=this,l=[],f=function(){var e,f,h=t.pop();n.currentContext=h.contexts;var p="";if("Enter"===h.node.op&&Zue("isConstant",h.node,r,n)&&(e=que(h.node.name,n),f=(0,T.Z)(e,1),p=f[0]),null==r[h.node.name]){var d,m,v=Rle(h.node,r,n,c._resourceManager);p||(d=que(h.node.name,n),m=(0,T.Z)(d,1),p=m[0]);var g=n.currentContext;SY.isPromise(v)?l.push(v.then((function(e){return r[p]=e,n.currentContext=g,c.checkTensorForDisposal(p,h.node,r,n,i,o,s),c.processChildNodes(h.node,t,n,r,a,u),e}))):(r[p]=v,c.checkTensorForDisposal(p,h.node,r,n,i,o,s),c.processChildNodes(h.node,t,n,r,a,u))}else c.processChildNodes(h.node,t,n,r,a,u)};t.length>0;)f();return l}},{key:"processChildNodes",value:function(e,t,n,r,a,i){e.children.forEach((function(e){var o=que(e.name,n),s=(0,T.Z)(o,1)[0];a[s]||!i.has(e.name)||("Merge"===e.op?e.inputNames.some((function(e){return!!Gue(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!Gue(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=Xue(n),i=(0,T.Z)(a,1)[0],o=t.graph.nodes[i];if(o.attrParams.shape&&o.attrParams.shape.value){var s=o.attrParams.shape.value,u=s.length===r.shape.length&&r.shape.every((function(e,t){return-1===s[t]||s[t]===e}));SY.assert(u,(function(){return"The shape of dict['".concat(o.name,"'] provided in model.execute(dict) must be [").concat(s,"], but was [").concat(r.shape,"]")}))}o.attrParams.dtype&&o.attrParams.dtype.value&&SY.assert(r.dtype===o.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(o.name,"'] provided in model.execute(dict) must be ").concat(o.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t={};for(var n in e){if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n])t[this._signature.inputs[n].name]=e[n];else t[n]=e[n]}return t}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=Xue(e),r=(0,T.Z)(n,1)[0];return null==t.graph.nodes[r]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=Xue(e),r=(0,T.Z)(n,1)[0];if(!t.graph.nodes[r])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),Vle=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};N(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return(0,C.Z)(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),jle=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:aJ;N(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",this.io=r,null==n&&(this.loadOptions={}),this.resourceManager=new Vle}return(0,C.Z)(e,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"modelStructuredOutputKeys",get:function(){return this.structuredOutputKeys}},{key:"findIOHandler",value:function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{var t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for URL '").concat([e],"'"));this.handler=t[0]}}},{key:"load",value:function(){var e=this;if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");var t=this.handler.load();return SY.isPromise(t)?t.then((function(t){return e.loadSync(t)})):this.loadSync(t)}},{key:"loadSync",value:function(e){this.artifacts=e;var t=this.artifacts.modelTopology,n=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){var r=this.artifacts.userDefinedMetadata;null!=r.signature&&(n=r.signature),null!=r.structuredOutputKeys&&(this.structuredOutputKeys=r.structuredOutputKeys)}this.signature=n,this.version="".concat(t.versions.producer,".").concat(t.versions.minConsumer);var a=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new Wle(Pce.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(a),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var i=Pce.Instance.transformGraph(e.modelInitializer);this.initializer=new Wle(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}},{key:"save",value:function(){var e=Tn(Sn().mark((function e(t,n){var r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=7;break}if(0!==(r=this.io.getSaveHandlers(t)).length){e.next=4;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 4:if(!(r.length>1)){e.next=6;break}throw new Error("Found more than one (".concat(r.length,") save handlers for URL '").concat(t,"'"));case 6:t=r[0];case 7:if(null!=t.save){e.next=9;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 9:return e.abrupt("return",t.save(this.artifacts));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e,t){var n=this,r=this.execute(e,this.outputNodes);if(this.structuredOutputKeys){var a={};return(r instanceof i$?[r]:r).forEach((function(e,t){return a[n.structuredOutputKeys[t]]=e})),a}return r}},{key:"normalizeInputs",value:function(e){var t=this;if(!(e instanceof i$)&&!Array.isArray(e)){if(null!=this.signature&&null!=this.signature.inputs)for(var n in this.signature.inputs){var r=this.signature.inputs[n];null!=r.resourceId&&(e[n]=this.resourceIdToCapturedInput[r.resourceId])}return e}e=Array.isArray(e)?e:[e];var a=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+a!==this.inputNodes.length)throw new Error("Input tensor count mismatch, the graph model has ".concat(this.inputNodes.length-a," non-resource placeholders, while there are ").concat(e.length," input tensors provided."));var i=0;return this.inputNodes.reduce((function(n,r){var a=t.signature?t.signature.inputs[r]:null;return null!=a&&null!=a.resourceId?n[r]=t.resourceIdToCapturedInput[a.resourceId]:n[r]=e[i++],n}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"executeInitializerGraph",value:function(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}},{key:"executeInitializerGraphAsync",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null==this.initializer?[]:null==this.initializerSignature?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs)));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setResourceIdToCapturedInput",value:function(e){if(this.resourceIdToCapturedInput={},this.initializerSignature)for(var t=Object.keys(this.initializerSignature.outputs),n=0;n<t.length;n++){var r=t[n],a=this.initializerSignature.outputs[r];this.resourceIdToCapturedInput[a.resourceId]=e[n]}}},{key:"execute",value:function(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var e=Tn(Sn().mark((function e(t,n){var r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null==this.resourceIdToCapturedInput,!e.t0){e.next=7;break}return e.t1=this,e.next=5,this.executeInitializerGraphAsync();case 5:e.t2=e.sent,e.t1.setResourceIdToCapturedInput.call(e.t1,e.t2);case 7:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=11,this.executor.executeAsync(t,n);case 11:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getIntermediateTensors",value:function(){return this.executor.getIntermediateTensors()}},{key:"disposeIntermediateTensors",value:function(){this.executor.disposeIntermediateTensors()}},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&WJ(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}]),e}();function Ule(e){return Hle.apply(this,arguments)}function Hle(){return Hle=Tn(Sn().mark((function e(t){var n,r,a,i=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{},r=i.length>2&&void 0!==i[2]?i[2]:aJ,null!=t){e.next=4;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 4:return null==n&&(n={}),n.fromTFHub&&"string"==typeof t&&(t=Gle(t)),a=new jle(t,n,r),e.next=8,a.load();case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)}))),Hle.apply(this,arguments)}function Zle(e){if(null==e)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");var t;if(e instanceof Array){var n=(0,T.Z)(e,2),r=n[0],a=n[1];if(!r)throw new Error("modelJSON must be the first element of the array");if(!a||!(a instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");var i=aJ.getWeightSpecs(r.weightsManifest),o=aJ.getModelArtifactsForJSONSync(r,i,a);t=aJ.fromMemorySync(o)}else if("load"in e)t=e;else{if(!("modelTopology"in e&&"weightSpecs"in e&&"weightData"in e))throw new Error("Unknown model format");t=aJ.fromMemorySync(e)}var s=new jle(t);return s.load(),s}function Gle(e){return e.endsWith("/")||(e+="/"),"".concat(e).concat("model.json").concat("?tfjs-format=file")}var qle="4.0.0",Kle={};kZ(Kle,{CSVDataset:function(){return Ufe},Dataset:function(){return Afe},FileDataSource:function(){return ahe},TextLineDataset:function(){return Pfe},URLDataSource:function(){return ihe},array:function(){return Ofe},csv:function(){return ohe},func:function(){return she},generator:function(){return uhe},microphone:function(){return fhe},version_data:function(){return phe},webcam:function(){return che},zip:function(){return Mfe}});var Xle=SZ(FZ()),Yle=SZ(FZ());function $le(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"==typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(rfe(e)){var i=Array.isArray(e)?[]:{};for(var o in r.add(e),e){var s=e[o],u=$le(s,t,n,r);i[o]=u}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function Qle(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:efe;return Jle(e,t)}function Jle(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(rfe(r)){var i=Array.isArray(r)?[]:{};n.add(r);var o=function(r){var a=Jle(e.map((function(e){return e[r]})),t,n);i[r]=a};for(var s in r)o(s);return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function efe(e){return null===e?null:rfe(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function tfe(e,t){return nfe.apply(this,arguments)}function nfe(){return nfe=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Map,$le(t,n,r),a=0,i=Array.from(r.keys());case 3:if(!(a<i.length)){e.next=14;break}if(o=i[a],s=r.get(o),!SY.isPromise(s)){e.next=11;break}return e.next=9,s;case 9:u=e.sent,r.set(o,u);case 11:a++,e.next=3;break;case 14:return e.abrupt("return",$le(t,n,r));case 15:case"end":return e.stop()}}),e)}))),nfe.apply(this,arguments)}function rfe(e){var t=!1;GG().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof PZ().StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof i$)&&!(e instanceof Promise)&&!t)}function afe(e){return function(e,t){return $le(e,t)}(e,ife)}function ife(e){return e instanceof i$?{value:e.clone(),recurse:!1}:rfe(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var ofe=function(){function e(t){if(N(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return(0,C.Z)(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=Oo(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch(cBe){n.e(cBe)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),sfe=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.call(this,n.INITIAL_CAPACITY)}return(0,C.Z)(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){bf(R(n.prototype),"isFull",this).call(this)&&this.expand(),bf(R(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){bf(R(n.prototype),"isFull",this).call(this)&&this.expand(),bf(R(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(ofe);function ufe(e){return new dfe(e)}function cfe(e){return new mfe(e)}function lfe(e,t){return new Ife(e,t)}function ffe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hfe.FAIL;return new Nfe(e,t)}sfe.INITIAL_CAPACITY=32;var hfe,pfe=function(){function e(){N(this,e)}return(0,C.Z)(e,[{key:"toArray",value:function(){var e=Tn(Sn().mark((function e(){var t,n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent;case 9:e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent;case 10:e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=Tn(Sn().mark((function e(){var t;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent;case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=Tn(Sn().mark((function e(t){var n,r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value);case 9:e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new kfe(this,e)}},{key:"filter",value:function(e){return new xfe(this,e)}},{key:"map",value:function(e){return new wfe(this,e)}},{key:"mapAsync",value:function(e){return new Sfe(this,e)}},{key:"serialMapAsync",value:function(e){return new Sfe(this,e).serial()}},{key:"flatmap",value:function(e){return new Tfe(this,e)}},{key:"forEachAsync",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new bfe(this,e,t)}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:efe;return this.rowMajorBatch(e,t).map((function(e){return Qle(e,n)}))}},{key:"concatenate",value:function(e,t){return new Ife(ufe([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new yfe(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new gfe(this,e)}},{key:"prefetch",value:function(e){return new Cfe(this,e)}},{key:"shuffle",value:function(e,t){return new Efe(this,e,t)}},{key:"serial",value:function(){return new vfe(this)}}]),e}(),dfe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).items=e,r.trav=0,r}return(0,C.Z)(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=Tn(Sn().mark((function e(){var t;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],e.abrupt("return",(this.trav++,{value:afe(t),done:!1}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(pfe),mfe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).nextFn=e,r}return(0,C.Z)(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 7:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(pfe),vfe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return(0,C.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=Tn(Sn().mark((function e(){var t=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(pfe),gfe=function(e){A(n,e);var t=L(n);function n(e,r){var a;return N(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,C.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=Tn(Sn().mark((function e(){var t=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Tn(Sn().mark((function e(){var t;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:WJ(t.value);case 7:e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(pfe),yfe=function(e){A(n,e);var t=L(n);function n(e,r){var a;return N(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return(0,C.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(pfe),bfe=function(e){A(n,e);var t=L(n);function n(e,r){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return N(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=i,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,C.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=Tn(Sn().mark((function e(){var t=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Tn(Sn().mark((function e(){var t,n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=10;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=7;break}return e.abrupt("return",this.enableSmallLastBatch&&t.length>0?{value:t,done:!1}:{value:null,done:!0});case 7:t.push(n.value);case 8:e.next=1;break;case 10:return e.abrupt("return",{value:t,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(pfe),xfe=function(e){A(n,e);var t=L(n);function n(e,r){var a;return N(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,C.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=Tn(Sn().mark((function e(){var t=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Tn(Sn().mark((function e(){var t;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=5;break}return e.abrupt("return",t);case 5:WJ(t.value);case 6:e.next=0;break;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(pfe),wfe=function(e){A(n,e);var t=L(n);function n(e,r){var a;return N(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,C.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r,a,i,o,s;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=p$.getTensorsInContainer(t.value),r=this.transform(t.value),a=p$.getTensorsInContainer(r),i=Oo(n);try{for(i.s();!(o=i.n()).done;)s=o.value,p$.isTensorInList(s,a)||s.dispose()}catch(cBe){i.e(cBe)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(pfe),kfe=function(e){A(n,e);var t=L(n);function n(e,r){var a;return N(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,C.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=Tn(Sn().mark((function e(){var t=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.upstream.next();case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),this.handler(e.t0)){e.next=10;break}return e.abrupt("return",{value:null,done:!0});case 10:e.next=0;break;case 12:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()}]),n}(pfe),Sfe=function(e){A(n,e);var t=L(n);function n(e,r){var a;return N(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,C.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r,a,i,o,s;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=p$.getTensorsInContainer(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,a=p$.getTensorsInContainer(r),i=Oo(n);try{for(i.s();!(o=i.n()).done;)s=o.value,p$.isTensorInList(s,a)||s.dispose()}catch(cBe){i.e(cBe)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(pfe),_fe=function(e){A(n,e);var t=L(n);function n(){var e;return N(this,n),(e=t.call(this)).outputQueue=new sfe,e.lastRead=Promise.resolve({value:null,done:!1}),e}return(0,C.Z)(n,[{key:"next",value:function(){var e=Tn(Sn().mark((function e(){var t=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(pfe),Tfe=function(e){A(n,e);var t=L(n);function n(e,r){var a;return N(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,C.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r,a,i,o,s;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=p$.getTensorsInContainer(t.value),r=this.transform(t.value),a=p$.getTensorsInContainer(r),this.outputQueue.pushAll(r),i=Oo(n);try{for(i.s();!(o=i.n()).done;)s=o.value,p$.isTensorInList(s,a)||s.dispose()}catch(cBe){i.e(cBe)}finally{i.f()}return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(_fe),Ife=function(e){A(n,e);var t=L(n);function n(e,r){var a;return N(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return(0,C.Z)(n,[{key:"summary",value:function(){return"TODO: fill in upstream of chained summaries -> Chained"}},{key:"next",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.readFromChain(this.lastRead),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=Tn(Sn().mark((function e(t){var n,r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=9;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 9:return e.next=11,this.iterator.next();case 11:return r=e.sent,e.abrupt("return",r.done?(this.iterator=null,this.readFromChain(t)):r);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(pfe);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(hfe||(hfe={}));var Nfe=function(e){A(n,e);var t=L(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hfe.FAIL;return N(this,n),(r=t.call(this)).iterators=e,r.mismatchMode=a,r.count=0,r.currentPromise=null,r}return(0,C.Z)(n,[{key:"summary",value:function(){return"{TODO: fill in upstream of zip summaries} -> Zip"}},{key:"nextState",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return e instanceof pfe?{value:e.next().then((function(e){return n++,e.done&&r++,e.value})),recurse:!1}:{value:null,recurse:!0}},e.next=3,t;case 3:return n=0,r=0,e.next=6,tfe(this.iterators,a);case 6:if(i=e.sent,n!==r){e.next=9;break}return e.abrupt("return",{value:null,done:!0});case 9:if(!(r>0)){e.next=15;break}e.t0=this.mismatchMode,e.next=e.t0===hfe.FAIL?13:e.t0===hfe.SHORTEST?14:(e.t0,hfe.LONGEST,15);break;case 13:throw new Error("Zipped streams should have the same length. Mismatched at element ".concat(this.count,"."));case 14:return e.abrupt("return",{value:null,done:!0});case 15:return e.abrupt("return",(this.count++,{value:i,done:!1}));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.currentPromise=this.nextState(this.currentPromise),this.currentPromise));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(pfe),Cfe=function(e){A(n,e);var t=L(n);function n(e,r){var a;return N(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new ofe(r),a}return(0,C.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(pfe),Efe=function(e){A(n,e);var t=L(n);function n(e,r,a){var i;return N(this,n),(i=t.call(this,e,r)).upstream=e,i.windowSize=r,i.upstreamExhausted=!1,i.random=Yle.alea(a||SY.now().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return(0,C.Z)(n,[{key:"next",value:function(){var e=Tn(Sn().mark((function e(){var t=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=Tn(Sn().mark((function e(){var t,n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=13;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=11;break;case 10:return e.abrupt("return",(this.refill(),n));case 11:e.next=1;break;case 13:return e.abrupt("return",{value:null,done:!0});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Cfe),Afe=function(){function e(){N(this,e),this.size=null}return(0,C.Z)(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return SY.assert(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),Rfe(Tn(Sn().mark((function t(){return Sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,Dfe));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,Rfe(Tn(Sn().mark((function t(){return Sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,Rfe(Tn(Sn().mark((function t(){return Sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return BJ((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return Rfe(Tn(Sn().mark((function n(){return Sn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return BJ((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return Rfe(Tn(Sn().mark((function n(){return Sn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return Rfe(Tn(Sn().mark((function n(){return Sn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,Rfe(Tn(Sn().mark((function t(){var r;return Sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=cfe(Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.t1=!1,e.abrupt("return",{value:e.t0,done:e.t1});case 5:case"end":return e.stop()}}),e)})))),t.abrupt("return",lfe(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,Rfe(Tn(Sn().mark((function t(){return Sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=Xle.alea(t||SY.now().toString());return Rfe(Tn(Sn().mark((function t(){var i;return Sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.int32(),n&&(i+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,i.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,Rfe(Tn(Sn().mark((function t(){return Sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Rfe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){A(a,n);var r=L(a);function a(){var e;return N(this,a),(e=r.apply(this,arguments)).size=t,e}return(0,C.Z)(a,[{key:"iterator",value:function(){var t=Tn(Sn().mark((function t(){return Sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}(Afe))}function Ofe(e){return Rfe(Tn(Sn().mark((function t(){return Sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ufe(e));case 1:case"end":return t.stop()}}),t)}))),e.length)}function Mfe(e){if(!rfe(e))throw new Error("The argument to zip() must be an object or array.");var t;if(Array.isArray(e))for(var n=0;n<e.length;n++)t=null==t?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(var r in e)t=null==t?e[r].size:Math.min(t,e[r].size);return Rfe(Tn(Sn().mark((function t(){var n;return Sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tfe(e,(function(e){if(e instanceof Afe)return{value:e.iterator(),recurse:!1};if(rfe(e))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")}));case 2:return n=t.sent,t.abrupt("return",ffe(n,hfe.SHORTEST));case 4:case"end":return t.stop()}}),t)}))),t)}function Dfe(e){return null===e?null:function(e){return null==e||function(e){return null===e||"object"!=typeof e&&"function"!=typeof e}(e)||Array.isArray(e)||"object"==typeof e&&e instanceof i$||SY.isTypedArray(e)}(e[0])?{value:Ffe(e),recurse:!1}:{value:null,recurse:!0}}function Ffe(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof i$?Y4(e):H$(e)}Afe.MAX_BUFFER_SIZE=1e4;var Pfe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).input=e,r}return(0,C.Z)(n,[{key:"iterator",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.input.iterator();case 2:return e.abrupt("return",e.sent.decodeUTF8().split("\n").map((function(e){return e.endsWith("\r")&&(e=e.slice(0,-1)),e})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Afe),Lfe='"',zfe=Symbol("out"),Bfe=Symbol("field"),Wfe=Symbol("quote"),Vfe=Symbol("quoteafterquote"),jfe=Symbol("quoteinquote"),Ufe=function(e){A(n,e);var t=L(n);function n(e,r){var a;return N(this,n),(a=t.call(this)).input=e,a.hasHeader=!0,a.fullColumnNames=null,a.columnNamesValidated=!1,a.columnConfigs=null,a.configuredColumnsOnly=!1,a.delimiter=",",a.delimWhitespace=!1,a.base=new Pfe(e),r||(r={}),a.hasHeader=!1!==r.hasHeader,a.fullColumnNames=r.columnNames,a.columnConfigs=r.columnConfigs,a.configuredColumnsOnly=r.configuredColumnsOnly,r.delimWhitespace?(SY.assert(null==r.delimiter,(function(){return"Delimiter should not be provided when delimWhitespace is true."})),a.delimWhitespace=!0,a.delimiter=" "):a.delimiter=r.delimiter?r.delimiter:",",a}return(0,C.Z)(n,[{key:"columnNames",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.columnNamesValidated,e.t0){e.next=4;break}return e.next=4,this.setColumnNames();case 4:return e.abrupt("return",this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setColumnNames",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r,a,i,o,s=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.maybeReadHeaderLine();case 2:if(t=e.sent,this.fullColumnNames||t){e.next=5;break}throw new Error("Column names must be provided if there is no header line.");case 5:if(this.fullColumnNames&&t&&SY.assert(t.length===this.fullColumnNames.length,(function(){return"The length of provided columnNames ("+s.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."})),this.fullColumnNames||(this.fullColumnNames=t),n=this.fullColumnNames.reduce((function(e,t){return e[t]=e[t]+1||1,e}),{}),r=Object.keys(n).filter((function(e){return n[e]>1})),SY.assert(0===r.length,(function(){return"Duplicate column names found: "+r.toString()})),!this.columnConfigs){e.next=16;break}a=0,i=Object.keys(this.columnConfigs);case 9:if(!(a<i.length)){e.next=16;break}if(o=i[a],-1!==this.fullColumnNames.indexOf(o)){e.next=13;break}throw new Error('The key "'+o+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").");case 13:a++,e.next=9;break;case 16:this.columnNamesValidated=!0;case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"maybeReadHeaderLine",value:function(){var e=Tn(Sn().mark((function e(){var t,n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasHeader){e.next=12;break}return e.next=3,this.base.iterator();case 3:return e.next=5,e.sent.next();case 5:if(!(t=e.sent).done){e.next=8;break}throw new Error("No data was found for CSV parsing.");case 8:return n=t.value,e.abrupt("return",this.parseRow(n,!1));case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"iterator",value:function(){var e=Tn(Sn().mark((function e(){var t,n=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.columnNamesValidated,e.t0){e.next=4;break}return e.next=4,this.setColumnNames();case 4:return e.next=6,this.base.iterator();case 6:return t=e.sent,e.abrupt("return",(this.hasHeader&&(t=t.skip(1)),t.map((function(e){return n.makeDataElement(e)}))));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"makeDataElement",value:function(e){for(var t=this.parseRow(e),n={},r={},a=0;a<this.fullColumnNames.length;a++){var i=this.fullColumnNames[a],o=this.columnConfigs?this.columnConfigs[i]:null;if(!this.configuredColumnsOnly||o){var s=t[a],u=null;if(""===s)if(o&&void 0!==o.default)u=o.default;else{if(o&&(o.required||o.isLabel))throw new Error("Required column ".concat(i," is empty in this line: ").concat(e));u=void 0}else{var c=Number(s);if(isNaN(c))u=o&&"bool"===o.dtype?this.getBoolean(s):s;else if(o&&o.dtype)switch(o.dtype){case"float32":default:u=c;break;case"int32":u=Math.floor(c);break;case"bool":u=this.getBoolean(s)}else u=c}o&&o.isLabel?r[i]=u:n[i]=u}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}},{key:"getBoolean",value:function(e){return"1"===e||"true"===e.toLowerCase()?1:0}},{key:"parseRow",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],r=0,a=e.length,i=zfe,o=0;o<a;o++)switch(i){case zfe:switch(e.charAt(o)){case Lfe:r=o+1,i=Wfe;break;case this.delimiter:if(r=o+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),i=zfe;break;default:i=Bfe,r=o}break;case Bfe:if(e.charAt(o)===this.delimiter)n.push(e.substring(r,o)),i=zfe,r=o+1;break;case Wfe:if(e.charAt(o)===Lfe)i=Vfe;break;case Vfe:switch(e.charAt(o)){case this.delimiter:n.push(e.substring(r,o-1)),i=zfe,r=o+1;break;case Lfe:i=Wfe;break;default:i=jfe}break;case jfe:if(e.charAt(o)===Lfe)i=Wfe}if(i===Vfe?n.push(e.substring(r,a-1)):n.push(e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have ".concat(this.fullColumnNames.length," elements in a row, but got ").concat(n));return n}}]),n}(Afe),Hfe=function(e){A(n,e);var t=L(n);function n(e){var r;N(this,n),(r=t.call(this)).microphoneConfig=e,r.isClosed=!1,r.fftSize=e.fftSize||1024;var a=Math.log2(r.fftSize);if(r.fftSize<0||a<4||a>14||!Number.isInteger(a))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ".concat(r.fftSize));if(r.numFrames=e.numFramesPerSpectrogram||43,r.sampleRateHz=e.sampleRateHz,r.columnTruncateLength=e.columnTruncateLength||r.fftSize,r.audioTrackConstraints=e.audioTrackConstraints,r.smoothingTimeConstant=e.smoothingTimeConstant||0,r.includeSpectrogram=!1!==e.includeSpectrogram,r.includeWaveform=!0===e.includeWaveform,!r.includeSpectrogram&&!r.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.");return r}return(0,C.Z)(n,[{key:"summary",value:function(){return"microphone"}},{key:"start",value:function(){var e=Tn(Sn().mark((function e(){var t,n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1});case 3:this.stream=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error thrown while initializing video stream: ".concat(e.t0.message));case 9:if(this.stream){e.next=11;break}throw new Error("Could not obtain audio from microphone.");case 11:if(t=window.AudioContext||window.webkitAudioContext,this.audioContext=new t,this.sampleRateHz){e.next=16;break}this.sampleRateHz=this.audioContext.sampleRate,e.next=18;break;case 16:if(this.audioContext.sampleRate===this.sampleRateHz){e.next=18;break}throw new Error("Mismatch in sampling rate: Expected: ".concat(this.sampleRateHz,"; Actual: ").concat(this.audioContext.sampleRate));case 18:n=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,n.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize);case 20:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r,a,i;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClosed){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.next=4,this.getAudioData();case 4:return r=e.sent,this.includeSpectrogram&&(a=this.flattenQueue(r.freqDataQueue),t=this.getTensorFromAudioDataArray(a,[this.numFrames,this.columnTruncateLength,1])),this.includeWaveform&&(i=this.flattenQueue(r.timeDataQueue),n=this.getTensorFromAudioDataArray(i,[this.numFrames*this.fftSize,1])),e.abrupt("return",{value:{spectrogram:t,waveform:n},done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"capture",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAudioData",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r,a=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],r=0,e.abrupt("return",new Promise((function(e){var i=setInterval((function(){a.includeSpectrogram&&(a.analyser.getFloatFrequencyData(a.freqData),a.freqData[0]===-1/0&&e({freqDataQueue:t,timeDataQueue:n}),t.push(a.freqData.slice(0,a.columnTruncateLength))),a.includeWaveform&&(a.analyser.getFloatTimeDomainData(a.timeData),n.push(a.timeData.slice())),++r===a.numFrames&&(clearInterval(i),e({freqDataQueue:t,timeDataQueue:n}))}),a.fftSize/a.sampleRateHz*1e3)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}},{key:"toArray",value:function(){throw new Error("Can not convert infinite audio stream to array.")}},{key:"getSampleRate",value:function(){return this.sampleRateHz}},{key:"flattenQueue",value:function(e){var t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((function(e,r){return n.set(e,r*t)})),n}},{key:"getTensorFromAudioDataArray",value:function(e,t){var n=new Float32Array(SY.sizeFromShape(t));return n.set(e,n.length-e.length),H$(n,t)}}],[{key:"create",value:function(){var e=Tn(Sn().mark((function e(){var t,r,a=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},GG().get("IS_BROWSER")){e.next=3;break}throw new Error("microphone API is only supported in browser environment.");case 3:return r=new n(t),e.next=6,r.start();case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(pfe),Zfe=function(e){A(n,e);var t=L(n);function n(e,r){var a;if(N(this,n),(a=t.call(this)).webcamVideoElement=e,a.webcamConfig=r,a.isClosed=!0,a.resize=!1,a.needToResize())if(a.resize=!0,a.cropSize=[a.webcamConfig.resizeHeight,a.webcamConfig.resizeWidth],a.cropBoxInd=e5([0],"int32"),a.webcamConfig.centerCrop){var i=1*a.webcamConfig.resizeWidth/a.webcamVideoElement.width,o=1*a.webcamConfig.resizeHeight/a.webcamVideoElement.height,s=(1-i)/2,u=(1-o)/2,c=s+i,l=o+u;a.cropBox=t5([u,s,l,c],[1,4])}else a.cropBox=t5([0,0,1,1],[1,4]);return P(a)}return(0,C.Z)(n,[{key:"summary",value:function(){return"webcam"}},{key:"start",value:function(){var e=Tn(Sn().mark((function e(){var t=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.webcamConfig.facingMode&&SY.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,(function(){return"Invalid webcam facing mode: ".concat(t.webcamConfig.facingMode,". Please provide 'user' or 'environment'")})),e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}});case 4:this.stream=e.sent,e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0.message="Error thrown while initializing video stream: ".concat(e.t0.message),e.t0;case 10:if(this.stream){e.next=12;break}throw new Error("Could not obtain video from webcam.");case 12:try{this.webcamVideoElement.srcObject=this.stream}catch(lBe){console.log(lBe),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return e.abrupt("return",(this.webcamVideoElement.play(),this.isClosed=!1,new Promise((function(e){t.webcamVideoElement.onloadedmetadata=function(){e()}}))));case 14:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=Tn(Sn().mark((function e(){var t;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClosed){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:e.prev=2,t=u0.fromPixels(this.webcamVideoElement),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),new Error("Error thrown converting video to pixels: ".concat(JSON.stringify(e.t0)));case 9:if(!this.resize){e.next=22;break}return e.prev=10,e.abrupt("return",{value:this.cropAndResizeFrame(t),done:!1});case 14:throw e.prev=14,e.t1=e.catch(10),new Error("Error thrown cropping the video: ".concat(e.t1.message));case 17:return e.prev=17,t.dispose(),e.finish(17);case 20:e.next=23;break;case 22:return e.abrupt("return",{value:t,done:!1});case 23:case"end":return e.stop()}}),e,this,[[2,6],[10,14,17,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"needToResize",value:function(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}},{key:"cropAndResizeFrame",value:function(e){var t=this;return BJ((function(){var n,r=J2(tJ(e,"float32"),0),a=(n=V6.cropAndResize(r,t.cropBox,t.cropBoxInd,t.cropSize,"bilinear")).shape;return W1(n,a.slice(1))}))}},{key:"capture",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.stream.getTracks().forEach((function(e){return e.stop()}));try{this.webcamVideoElement.srcObject=null}catch(lBe){console.log(lBe),this.webcamVideoElement.src=null}this.isClosed=!0}},{key:"toArray",value:function(){throw new Error("Can not convert infinite video stream to array.")}}],[{key:"create",value:function(){var e=Tn(Sn().mark((function e(t){var r,a,i=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:{},GG().get("IS_BROWSER")){e.next=3;break}throw new Error("tf.data.webcam is only supported in browser environment.");case 3:if(t){e.next=7;break}if(t=document.createElement("video"),r.resizeWidth&&r.resizeHeight){e.next=6;break}throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");case 6:t.width=r.resizeWidth,t.height=r.resizeHeight;case 7:return a=new n(t,r),e.next=10,a.start();case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(pfe),Gfe=(0,C.Z)((function e(){N(this,e)})),qfe=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"split",value:function(e){return new Kfe(this,e)}}]),n}(pfe),Kfe=function(e){A(n,e);var t=L(n);function n(e,r){var a;return N(this,n),(a=t.call(this)).upstream=e,a.impl=new Xfe(e,r),a}return(0,C.Z)(n,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(qfe),Xfe=function(e){A(n,e);var t=L(n);function n(e,r){var a;return N(this,n),(a=t.call(this)).upstream=e,a.separator=r,a.carryover="",a}return(0,C.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Split('").concat(this.separator,"')")}},{key:"pump",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r,a,i;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0));case 5:(n=t.value.split(this.separator))[0]=this.carryover+n[0],r=Oo(n.slice(0,-1));try{for(r.s();!(a=r.n()).done;)i=a.value,this.outputQueue.push(i)}catch(cBe){r.e(cBe)}finally{r.f()}return e.abrupt("return",(this.carryover=n[n.length-1],!0));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(_fe),Yfe=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"decodeUTF8",value:function(){return new $fe(this)}}]),n}(pfe),$fe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).upstream=e,r.impl=new Qfe(e),r}return(0,C.Z)(n,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(qfe),Qfe=function(e){A(n,e);var t=L(n);function n(e){var r;if(N(this,n),(r=t.call(this)).upstream=e,GG().get("IS_BROWSER"))r.decoder=new TextDecoder("utf-8");else{var a=PZ().StringDecoder;r.decoder=new a("utf8")}return P(r)}return(0,C.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Utf8")}},{key:"pump",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:return n=t.value,e.abrupt("return",(r=GG().get("IS_BROWSER")?this.decoder.decode(n,{stream:!0}):this.decoder.write(Buffer.from(n.buffer)),this.outputQueue.push(r),!0));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(_fe),Jfe=function(e){A(n,e);var t=L(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return N(this,n),(r=t.call(this)).file=e,r.options=a,SY.assert(e instanceof Uint8Array||!!GG().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),(function(){return"FileChunkIterator only supports File, Blob and Uint8Array right now."})),r.offset=a.offset||0,r.chunkSize=a.chunkSize||1048576,r}return(0,C.Z)(n,[{key:"summary",value:function(){return"FileChunks ".concat(this.file)}},{key:"next",value:function(){var e=Tn(Sn().mark((function e(){var t=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))){e.next=4;break}e.t0={value:null,done:!0},e.next=9;break;case 4:return e.next=6,new Promise((function(e,n){var r=t.offset+t.chunkSize;if(t.file instanceof Uint8Array)e(new Uint8Array(t.file.slice(t.offset,r)));else{var a=new FileReader;a.onload=function(t){var r=a.result;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),!(r instanceof Uint8Array))return n(new TypeError("FileReader returned unknown type."));e(r)},a.onabort=function(e){return n(new Error("Aborted"))},a.onerror=function(e){return n(new Error(e.type))};var i=t.file.slice(t.offset,r);a.readAsArrayBuffer(i)}t.offset=r}));case 6:e.t1=e.sent,e.t2=!1,e.t0={value:e.t1,done:e.t2};case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Yfe);function ehe(e){return the.apply(this,arguments)}function the(){return the=Tn(Sn().mark((function e(t){var n,r,a,i,o,s,u=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},r=u.length>2?u[2]:void 0,"string"==typeof t?a=t:(a=t.url,i=nhe(t)),e.next=5,(r||SY.fetch)(a,i);case 5:if(!(o=e.sent).ok){e.next=15;break}return e.t0=Uint8Array,e.next=10,o.arrayBuffer();case 10:return e.t1=e.sent,s=new e.t0(e.t1),e.abrupt("return",new Jfe(s,n));case 15:throw new Error(o.statusText);case 16:case"end":return e.stop()}}),e)}))),the.apply(this,arguments)}var nhe=function(e){return{method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity}};function rhe(e){return"string"==typeof e&&"file://"===e.slice(0,7)}var ahe=function(e){A(n,e);var t=L(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return N(this,n),(r=t.call(this)).input=e,r.options=a,r}return(0,C.Z)(n,[{key:"iterator",value:function(){var e=Tn(Sn().mark((function e(){var t;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rhe(this.input)&&GG().get("IS_NODE")&&(t=LZ(),this.input=t.readFileSync(this.input.slice(7))),e.abrupt("return",new Jfe(this.input,this.options));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Gfe),ihe=function(e){A(n,e);var t=L(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return N(this,n),(r=t.call(this)).url=e,r.fileOptions=a,r}return(0,C.Z)(n,[{key:"iterator",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rhe(this.url)?new ahe(this.url,this.fileOptions).iterator():ehe(this.url,this.fileOptions));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Gfe);function ohe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Ufe(new ihe(e),t)}function she(e){var t=cfe(e);return Rfe(Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))))}function uhe(e){return Rfe(Tn(Sn().mark((function t(){var n;return Sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return n=t.sent,t.abrupt("return",cfe((function(){return n.next()})));case 4:case"end":return t.stop()}}),t)}))))}function che(e,t){return lhe.apply(this,arguments)}function lhe(){return lhe=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zfe.create(t,n));case 1:case"end":return e.stop()}}),e)}))),lhe.apply(this,arguments)}function fhe(e){return hhe.apply(this,arguments)}function hhe(){return hhe=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hfe.create(t));case 1:case"end":return e.stop()}}),e)}))),hhe.apply(this,arguments)}var phe="4.0.0";function dhe(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&SY.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var mhe=c7.whereImpl,vhe=function(e){A(n,e);var t=L(n);function n(){var e;return N(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new ZZ((0,F.Z)(e),PJ()),e}return(0,C.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,GG().get("IS_NODE")&&i8.warn("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&SY.isString(n[0])){var a=n.map((function(e){return SY.encodeString(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;if("complex64"===n){var a=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return i8.mergeRealAndImagArrays(a,i)}return this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return SY.decodeString(e)}));return eJ(e.shape,e.dtype,n)}catch(cFe){throw new Error("Failed to decode encoded string bytes into utf-8")}return eJ(e.shape,e.dtype,t)}},{key:"makeOutput",value:function(e,t,n){return PJ().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=Tn(Sn().mark((function e(t){var n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=SY.now(),e.abrupt("return",(t(),{kernelMs:SY.now()-n}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){dhe([e],"where");var t=this.readSync(e.dataId);return mhe(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return bf(R(n.prototype),"epsilon",this).call(this)}}]),n}(GZ);vhe.nextDataId=0;var ghe={};function yhe(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}kZ(ghe,{addImpl:function(){return Mhe},bincountImpl:function(){return Lhe},bincountReduceImpl:function(){return zhe},castImpl:function(){return Che},ceilImpl:function(){return jhe},concatImpl:function(){return Zhe},equalImpl:function(){return Ghe},expImpl:function(){return Xhe},expm1Impl:function(){return Qhe},floorImpl:function(){return tpe},gatherNdImpl:function(){return ape},gatherV2Impl:function(){return ipe},greaterEqualImpl:function(){return cpe},greaterImpl:function(){return ope},lessEqualImpl:function(){return mpe},lessImpl:function(){return hpe},linSpaceImpl:function(){return ype},logImpl:function(){return bpe},maxImpl:function(){return kpe},maximumImpl:function(){return Spe},minimumImpl:function(){return Ipe},multiplyImpl:function(){return Epe},negImpl:function(){return Mpe},notEqualImpl:function(){return Fpe},prodImpl:function(){return Vpe},raggedGatherImpl:function(){return Gpe},raggedRangeImpl:function(){return Kpe},raggedTensorToTensorImpl:function(){return Jpe},rangeImpl:function(){return ede},rsqrtImpl:function(){return tde},scatterImpl:function(){return ade},sigmoidImpl:function(){return ide},simpleAbsImpl:function(){return yhe},sliceImpl:function(){return ude},sparseFillEmptyRowsImpl:function(){return fde},sparseReshapeImpl:function(){return hde},sparseSegmentReductionImpl:function(){return pde},sqrtImpl:function(){return dde},squaredDifferenceImpl:function(){return gde},stridedSliceImpl:function(){return xde},stringNGramsImpl:function(){return kde},stringSplitImpl:function(){return _de},stringToHashBucketFastImpl:function(){return Tde},subImpl:function(){return Ide},tileImpl:function(){return Ade},topKImpl:function(){return Mde},transposeImpl:function(){return zpe},uniqueImpl:function(){return Dde}});var bhe={kernelName:$G,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;dhe(t,"abs");var r=new Float32Array(SY.sizeFromShape(t.shape));return r=yhe(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}};function xhe(e){return function(t,n,r,a,i){var o=i8.assertAndGetBroadcastShape(t,n),s=o.length,u=SY.computeStrides(o),c=SY.sizeFromShape(o),l=SY.getTypedArrayFromDType(i,c),f=t.length,h=n.length,p=SY.computeStrides(t),d=SY.computeStrides(n),m=i8.getBroadcastDims(t,o),v=i8.getBroadcastDims(n,o);if(m.length+v.length===0)for(var g=0;g<l.length;++g)l[g]=e(r[g%r.length],a[g%a.length]);else for(var y=function(t){var n=SY.indexToLoc(t,s,u),i=n.slice(-f);m.forEach((function(e){return i[e]=0}));var o=SY.locToIndex(i,f,p),c=n.slice(-h);v.forEach((function(e){return c[e]=0}));var g=SY.locToIndex(c,h,d);l[t]=e(r[o],a[g])},b=0;b<l.length;++b)y(b);return[l,o]}}function whe(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}var khe={kernelName:Sq,backendName:"cpu",kernelFunc:whe};function She(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=She(e,t,"float32"),a=She(e,t,"float32");return whe({inputs:{real:r,imag:a},backend:e})}var i=SY.makeZerosTypedArray(SY.sizeFromShape(t),n);return e.makeTensorInfo(t,n,i)}function _he(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var The={kernelName:fK,backendName:"cpu",kernelFunc:_he};function Ihe(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var Nhe={kernelName:uX,backendName:"cpu",kernelFunc:Ihe};function Che(e,t,n,r){if("int32"===r)return[t,"int32",Int32Array.from(e)];if("bool"===r){var a=SY.toTypedArray([0],n),i=xhe((function(e,t){return e!==t?1:0}))(t,[],e,a,"bool"),o=(0,T.Z)(i,2),s=o[0];return[o[1],"bool",s]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function Ehe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if("complex64"===i){if("complex64"===a.dtype)return _he({inputs:{x:a},backend:n});var o=She(n,a.shape,a.dtype),s=Ehe({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=whe({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}if("complex64"===a.dtype){var c=Ihe({inputs:{input:a},backend:n}),l=Ehe({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),l}if(!SY.hasEncodingLoss(a.dtype,i)){var f=_he({inputs:{x:a},backend:n});return{dataId:f.dataId,shape:f.shape,dtype:i}}var h=Che(n.data.get(a.dataId).values,a.shape,a.dtype,i),p=(0,T.Z)(h,3),d=p[0],m=p[1],v=p[2];return n.makeTensorInfo(d,m,v)}var Ahe={kernelName:xq,backendName:"cpu",kernelFunc:Ehe};function Rhe(e,t,n,r){return null==n?function(n){var a=n.inputs,i=n.backend,o=a.a,s=a.b,u=i;dhe([o,s],e);var c=u.data.get(o.dataId).values,l=u.data.get(s.dataId).values,f="string"===o.dtype?i8.fromUint8ToStringArray(c):c,h="string"===o.dtype?i8.fromUint8ToStringArray(l):l,p=r||o.dtype,d=t(o.shape,s.shape,f,h,p),m=(0,T.Z)(d,2),v=m[0],g=m[1];return u.makeTensorInfo(g,p,v)}:function(e){var a=e.inputs,i=e.backend,o=a.a,s=a.b,u=i;if("complex64"===o.dtype||"complex64"===s.dtype){var c=Ehe({inputs:{x:o},backend:u,attrs:{dtype:"complex64"}}),l=u.data.get(c.dataId),f=l.complexTensorInfos.real,h=l.complexTensorInfos.imag,p=u.data.get(f.dataId).values,d=u.data.get(h.dataId).values,m=Ehe({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),v=u.data.get(m.dataId),g=v.complexTensorInfos.real,y=v.complexTensorInfos.imag,b=u.data.get(g.dataId).values,x=u.data.get(y.dataId).values,w=n(o.shape,s.shape,p,d,b,x),k=(0,T.Z)(w,3),S=k[0],_=k[1],I=k[2],N=u.makeTensorInfo(I,"float32",S),C=u.makeTensorInfo(I,"float32",_),E=whe({inputs:{real:N,imag:C},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(m),u.disposeIntermediateTensorInfo(N),u.disposeIntermediateTensorInfo(C),E}var A=u.data.get(o.dataId).values,R=u.data.get(s.dataId).values,O=r||o.dtype,M=t(o.shape,s.shape,A,R,O),D=(0,T.Z)(M,2),F=D[0],P=D[1];return u.makeTensorInfo(P,O,F)}}function Ohe(e){return function(t,n,r,a,i,o){var s=i8.assertAndGetBroadcastShape(t,n),u=SY.sizeFromShape(s),c=s.length,l=SY.computeStrides(s),f=SY.getTypedArrayFromDType("float32",u),h=SY.getTypedArrayFromDType("float32",u),p=i8.getBroadcastDims(t,s),d=i8.getBroadcastDims(n,s),m=i8.mergeRealAndImagArrays(r,a),v=i8.mergeRealAndImagArrays(i,o),g=t.length,y=SY.computeStrides(t),b=n.length,x=SY.computeStrides(n);if(p.length+d.length===0)for(var w=0;w<f.length;w++){var k=w%m.length,S=w%v.length,_=e(m[2*k],m[2*k+1],v[2*S],v[2*S+1]);f[w]=_.real,h[w]=_.imag}else for(var T=function(t){var n=SY.indexToLoc(t,c,l),r=n.slice(-g);p.forEach((function(e){return r[e]=0}));var a=SY.locToIndex(r,g,y),i=n.slice(-b);d.forEach((function(e){return i[e]=0}));var o=SY.locToIndex(i,b,x),s=e(m[2*a],m[2*a+1],v[2*o],v[2*o+1]);f[t]=s.real,h[t]=s.imag},I=0;I<f.length;I++)T(I);return[f,h,s]}}var Mhe=xhe((function(e,t){return e+t})),Dhe=Ohe((function(e,t,n,r){return{real:e+n,imag:t+r}})),Fhe=Rhe(eq,Mhe,Dhe),Phe={kernelName:eq,backendName:"cpu",kernelFunc:Fhe};function Lhe(e,t,n,r,a){for(var i=SY.sizeFromShape(r),o=SY.makeZerosTypedArray(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(o[u]+=i>0?t[s]:1)}return o}function zhe(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],i=e.shape[1],o=eJ([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<i;u++){var c=e.get(s,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,s,c):t.size>0?o.set(o.get(s,c)+t.get(s,u),s,c):o.set(o.get(s,c)+1,s,c))}return o}function Bhe(e){return function(t,n,r){for(var a=SY.getTypedArrayFromDType(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}function Whe(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(dhe(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=o,c=u.data.get(s.dataId).values,l=SY.sizeFromShape(s.shape),f=n||s.dtype,h=SY.getArrayFromDType(f,l),p=0;p<l;++p)h[p]=t(c[p],i);return u.makeTensorInfo(s.shape,f,h)}}function Vhe(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(dhe(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=o,c=u.data.get(s.dataId).values,l=n||s.dtype,f=t(c,l,i);return u.makeTensorInfo(s.shape,l,f)}}var jhe=Bhe((function(e){return Math.ceil(e)})),Uhe=Vhe(wq,jhe),Hhe={kernelName:wq,backendName:"cpu",kernelFunc:Uhe};function Zhe(e,t,n,r){var a=SY.getArrayFromDType(n,SY.sizeFromShape(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=SY.sizeFromShape(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?i8.fromUint8ToStringArray(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+o,c=0;c<e.shape[1];++c)a[u+c]=r[i++];o+=e.shape[1]}))}return a}var Ghe=xhe((function(e,t){return e===t?1:0})),qhe=Rhe($q,Ghe,null,"bool"),Khe={kernelName:$q,backendName:"cpu",kernelFunc:qhe},Xhe=Bhe((function(e){return Math.exp(e)})),Yhe=Vhe(Qq,Xhe,"float32"),$he={kernelName:Qq,backendName:"cpu",kernelFunc:Yhe},Qhe=Bhe((function(e){return Math.expm1(e)})),Jhe=Vhe(eK,Qhe),epe={kernelName:eK,backendName:"cpu",kernelFunc:Jhe},tpe=Bhe((function(e){return Math.floor(e)})),npe=Vhe(aK,tpe),rpe={kernelName:aK,backendName:"cpu",kernelFunc:npe};function ape(e,t,n,r,a,i,o,s,u){for(var c=eJ([r,i],n),l=0;l<r;l++){for(var f=[],h=0,p=0;p<a;p++){var d=e[l*a+p];h+=d*o[p],f.push(d)}if(h<0||h>=u/i)throw new Error("Invalid indices: ".concat(f," does not index into ").concat(s));for(var m=0;m<i;m++)c.values[l*i+m]=t.get.apply(t,(0,I.Z)(t.indexToLoc(h*i+m)))}return c}function ipe(e,t,n){for(var r=eJ(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a).slice(),o=i[0],s=i[2],u=t.locToIndex([o,s]);i[2]=t.values[u];var c=e.locToIndex(i);0<=c&&c<e.values.length&&(r.values[a]=e.values[c])}return r}var ope=xhe((function(e,t){return e>t?1:0})),spe=Rhe(cK,ope,null,"bool"),upe={kernelName:cK,backendName:"cpu",kernelFunc:spe},cpe=xhe((function(e,t){return e>=t?1:0})),lpe=Rhe(lK,cpe,null,"bool"),fpe={kernelName:lK,backendName:"cpu",kernelFunc:lpe},hpe=xhe((function(e,t){return e<t?1:0})),ppe=Rhe(yK,hpe,null,"bool"),dpe={kernelName:yK,backendName:"cpu",kernelFunc:ppe},mpe=xhe((function(e,t){return e<=t?1:0})),vpe=Rhe(bK,mpe,null,"bool"),gpe={kernelName:bK,backendName:"cpu",kernelFunc:vpe};function ype(e,t,n){var r=(t-e)/(n-1),a=SY.makeZerosTypedArray(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}var bpe=Bhe((function(e){return Math.log(e)})),xpe=Vhe(wK,bpe),wpe={kernelName:wK,backendName:"cpu",kernelFunc:xpe};function kpe(e,t,n,r){for(var a=SY.getTypedArrayFromDType(r,SY.sizeFromShape(n)),i=0;i<a.length;++i){for(var o=i*t,s=e[o],u=0;u<t;++u){var c=e[o+u];(Number.isNaN(c)||c>s)&&(s=c)}a[i]=s}return a}var Spe=xhe((function(e,t){return Math.max(e,t)})),_pe=Rhe(OK,Spe),Tpe={kernelName:OK,backendName:"cpu",kernelFunc:_pe},Ipe=xhe((function(e,t){return Math.min(e,t)})),Npe=Rhe(WK,Ipe),Cpe={kernelName:WK,backendName:"cpu",kernelFunc:Npe},Epe=xhe((function(e,t){return e*t})),Ape=Ohe((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),Rpe=Rhe(HK,Epe,Ape),Ope={kernelName:HK,backendName:"cpu",kernelFunc:Rpe};function Mpe(e,t,n){var r=SY.createScalarValue(-1,n);return Epe([],t,r,e,n)}var Dpe={kernelName:ZK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;dhe(r,"neg");var a=Mpe(n.data.get(r.dataId).values,r.shape,r.dtype),i=(0,T.Z)(a,2),o=i[0],s=i[1];return n.makeTensorInfo(s,r.dtype,o)}},Fpe=xhe((function(e,t){return e!==t?1:0})),Ppe=Rhe(GK,Fpe,null,"bool"),Lpe={kernelName:GK,backendName:"cpu",kernelFunc:Ppe};function zpe(e,t,n,r,a){for(var i=t.length,o=SY.sizeFromShape(t),s=SY.computeStrides(t),u=SY.computeStrides(a),c=SY.getTypedArrayFromDType(n,SY.sizeFromShape(a)),l=0;l<o;++l){for(var f=SY.indexToLoc(l,i,s),h=new Array(f.length),p=0;p<h.length;p++)h[p]=f[r[p]];c[SY.locToIndex(h,i,u)]=e[l]}return c}function Bpe(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm;dhe(a,"transpose");for(var o=a.shape.length,s=new Array(o),u=0;u<s.length;u++)s[u]=a.shape[i[u]];var c=zpe(r.data.get(a.dataId).values,a.shape,a.dtype,i,s);return{dataId:r.write(c,s,a.dtype),shape:s,dtype:a.dtype}}var Wpe={kernelName:QX,backendName:"cpu",kernelFunc:Bpe};function Vpe(e,t,n,r){for(var a=i8.computeOutAndReduceShapes(e,r),i=(0,T.Z)(a,2),o=i[0],s=i[1],u=m$(t,"int32"),c=SY.makeZerosTypedArray(SY.sizeFromShape(o),u),l=SY.sizeFromShape(s),f=0;f<c.length;++f){for(var h=f*l,p=1,d=0;d<l;++d)p*=n[h+d];c[f]=p}return{outVals:c,outShape:o,outDtype:u}}var jpe={kernelName:rX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;dhe(a,"prod");var s=a.shape.length,u=SY.parseAxisParam(i,a.shape),c=i8.getAxesPermutation(u,s),l=u,f=a,h=[];null!=c&&(f=Bpe({inputs:{x:a},backend:n,attrs:{perm:c}}),h.push(f),l=i8.getInnerMostAxes(l.length,s));var p=n.data.get(f.dataId).values,d=Vpe(f.shape,f.dtype,p,l),m=d.outVals,v=d.outShape,g=d.outDtype,y=v;return o&&(y=i8.expandShapeToKeepDim(v,u)),h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,g,m)}};function Upe(e,t,n,r){var a=[],i=0,o=t.length-1+n.length,s=new Array(o).fill(null).map((function(){return[0]}));!function(e,t){for(var n=0;n<e.length;++n){var r=e[n],a=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(var i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);for(var u=1,c=0;c<t.length-1;++c){u*=t[c];for(var l=t[c+1],f=1;f<u+1;++f)s[c].push(f*l)}for(var h=0;h<e.length;++h){for(var p=e[h],d=e[h]+1,m=0;m<n.length;++m){var v=n[m],g=m+t.length-1;if(g>=0)for(var y=s[g],b=y[y.length-1]-v[p],x=p;x<d;++x)s[g].push(v[x+1]+b);p=v[p],d=v[d]}d!==p&&(a.push([p,d]),i+=d-p)}return{outSplits:s,valueSlices:a,numValues:i}}function Hpe(e,t){for(var n=e.slice(0,t);n.length<t;)n.push(1);for(var r=t;r<e.length;r++)n[t-1]*=e[r];return n}function Zpe(e,t,n,r,a){var i=t.slice();i[0]=a;var o=SY.getArrayFromDType(n,SY.sizeFromShape(i)),s=e.length;return function(e,t,n,r,a,i){var o,s=Hpe(t,2)[1],u=Hpe(i,2)[1],c=0,l=Oo(n);try{for(l.s();!(o=l.n()).done;)for(var f=o.value,h=f[0];h<f[1];++h){for(var p=0;p<r;++p)a[c*u+p]=e[h*s+p];++c}}catch(cBe){l.e(cBe)}finally{l.f()}}(e,t,r,0===s?0:s/t[0],o,i),[o,i]}function Gpe(e,t,n,r,a,i,o,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach((function(e,r){if(e<0||e>=n){var a=SY.indexToLoc(r,t.length,SY.computeStrides(t)).join(",");throw new Error("indices[".concat(a,"] = ").concat(e," is not in [0, ").concat(n,")"))}}))}(i,o,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");var u=Upe(i,o,e,r[0]),c=u.outSplits,l=u.valueSlices,f=u.numValues,h=function(e){for(var t=[],n=function(n){var r=e[n].length,a=SY.getArrayFromDType("int32",r);t.push(a),e[n].forEach((function(e,t){return a[t]=e}))},r=0;r<e.length;++r)n(r);return t}(c),p=Zpe(n,r,a,l,f);return[h,p[0],p[1]]}var qpe=2147483647;function Kpe(e,t,n,r,a,i,o){if(t.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");var s=0===t.length,u=0===a.length,c=0===o.length,l=[];s||l.push(t[0]),u||l.push(a[0]),c||l.push(o[0]);for(var f=1;f<l.length;++f)if(l[f]!==l[f-1])throw new Error("starts, limits, and deltas must have the same shape");var h=0===l.length?1:l[0],p=SY.getArrayFromDType("int32",h+1);p[0]=0;for(var d=0;d<h;++d){var m=s?e[0]:e[d],v=u?r[0]:r[d],g=c?i[0]:i[d];if(0===g)throw new Error("Requires delta != 0");var y=void 0;if(g>0&&v<m||g<0&&v>m)y=0;else if((y=Math.ceil(Math.abs((v-m)/g)))>qpe)throw new Error("Requires ((limit - start) / delta) <= ".concat(qpe));p[d+1]=p[d]+y}for(var b=p[h],x=SY.getArrayFromDType(n,b),w=0,k=0;k<h;++k)for(var S=p[k+1]-p[k],_=s?e[0]:e[k],T=c?i[0]:i[k],I=0;I<S;++I)x[w++]=_,_+=T;return[p,x]}var Xpe=i8.RowPartitionType,Ype=function(){function e(t,n,r,a,i,o,s,u,c,l){N(this,e),this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=u,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=i8.getRowPartitionTypesHelper(l),this.raggedRank=i8.getRaggedRank(this.rowPartitionTypes)}return(0,C.Z)(e,[{key:"getRowPartitionTypeByDimension",value:function(e){return this.rowPartitionTypes[0]===Xpe.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}},{key:"getRowPartitionTensor",value:function(e){return this.rowPartitionTypes[0]===Xpe.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}},{key:"getMaxWidth",value:function(t){var n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case Xpe.VALUE_ROWIDS:return e.getMaxWidthValueRowID(n);case Xpe.ROW_SPLITS:return e.getMaxWidthRowSplit(n);default:throw new Error("Cannot handle partition type ".concat(Xpe[this.getRowPartitionTypeByDimension(t-1)]))}}},{key:"tensorShapeFromTensor",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Qpe(e,n)}},{key:"calculateOutputSize",value:function(e){var t=this.valuesShape,n=this.defaultValueShape;i8.validateDefaultValueShape(n,t);var r=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=i8.combineRaggedTensorToTensorShapes(this.raggedRank,r,t);a[0]<0&&(a[0]=e);for(var i=1;i<=this.raggedRank;++i)a[i]<0&&(a[i]=this.getMaxWidth(i));return a}},{key:"calculateFirstParentOutputIndex",value:function(e,t,n){for(var r=Math.min(e,n),a=[],i=0,o=0;o<r;++o,i+=t)a.push(i);for(var s=r;s<e;++s)a.push(-1);return SY.assert(a.length===e,(function(){return"Final length of result must be equal to firstDimension."})),a}},{key:"calculateOutputIndexRowSplit",value:function(e,t,n,r){for(var a=e.length,i=[],o=0;o<a-1;++o){var s=e[o+1]-e[o],u=Math.min(r,s),c=t[o];-1===c&&(u=0);for(var l=0;l<u;++l)i.push(c),c+=n;for(var f=0;f<s-u;++f)i.push(-1)}if(a>0&&i.length!==e[a-1])throw new Error("Invalid row split size.");return i}},{key:"calculateOutputIndexValueRowID",value:function(e,t,n,r){var a=e.length,i=[];if(0===a)return[];var o=0,s=e[0];if(s>=t.length)throw new Error("Got currentValueRowId=".concat(s,", which is not less than ").concat(t.length));var u=t[s];i.push(u);for(var c=1;c<a;++c){var l=e[c];if(l===s)u>=0&&(++o<r?u+=n:u=-1);else{if(o=0,s=l,l>=t.length)throw new Error("Got nextValueRowId=".concat(l," which is not less than ").concat(t.length));u=t[l]}i.push(u)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}},{key:"calculateOutputIndex",value:function(e,t,n,r){var a=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case Xpe.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,n,r);case Xpe.ROW_SPLITS:if(a.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(a.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(a,t,n,r);default:throw new Error("Unsupported partition type: ".concat(Xpe[i]))}}},{key:"getFirstDimensionSize",value:function(){var e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");var t=this.rowPartitionTypes[0];switch(t){case Xpe.FIRST_DIM_SIZE:return e[0];case Xpe.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Xpe.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(Xpe[t]))}}},{key:"compute",value:function(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");var e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(var r=n.length-2;r>=0;--r)n[r]=n[r+1]*t[r+1];var a=Qpe(t,!1),i=SY.getArrayFromDType(this.valuesDType,SY.sizeFromShape(a));if(n[0]*t[0]>0){for(var o=this.calculateFirstParentOutputIndex(e,n[0],t[0]),s=1;s<=this.raggedRank;++s)o=this.calculateOutputIndex(s-1,o,n[s],t[s]);this.setOutput(this.raggedRank,o,i,a)}return[a,i]}},{key:"setOutput",value:function(e,t,n,r){if(0!==n.length){var a=this.values,i=n,o=r.slice();o=o.slice(e+1);var s=SY.sizeFromShape(o),u=t.length,c=this.defaultValue;if(c.length!==s&&1!==c.length){var l=this.defaultValueShape;BJ((function(){var e=W1(c,l);c=n2(e,o).dataSync()}))}for(var f=0,h=0,p=0,d=0;d<=u;++d){var m=d<u?t[d]:-1;if(m!==p){if(h<p){var v=a.subarray(f*s);$pe(i.subarray(h*s),v,(p-h)*s)}if(d>=u){var g=n.length;m=Math.floor(g/s)}if(m>p)if(1===this.defaultValue.length)i.subarray(p*s,m*s).fill(this.defaultValue[0]),p=m;else for(;m>p;){$pe(i.slice(p*s),c,s),++p}m<0?(f=d+1,h=p):(f=d,p=(h=p)+1)}else++p}}}}],[{key:"getMaxWidthRowSplit",value:function(e){var t=e.length;if(0===t||1===t)return 0;for(var n=0,r=0;r<t-1;++r){var a=e[r+1]-e[r];a>n&&(n=a)}return n}},{key:"getMaxWidthValueRowID",value:function(e){var t=e.length;if(0===t)return 0;for(var n=0,r=e[0],a=0,i=1;i<t;++i){var o=e[i];o!==r&&(r=o,a=Math.max(i-n,a),n=i)}return Math.max(t-n,a)}}]),e}();function $pe(e,t,n){for(var r=0;r<n;r++)e[r]=t[r]}function Qpe(e,t){var n,r=[],a=Oo(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i<0){if(!t)throw new Error("Dimension ".concat(i," must be >= 0"));if(i<-1)throw new Error("Dimension ".concat(i," must be >= -1"));i=-1}r.push(i)}}catch(cBe){a.e(cBe)}finally{a.f()}return r}function Jpe(e,t,n,r,a,i,o,s,u,c){return new Ype(e,t,n,r,a,i,o,s,u,c).compute()}function ede(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return SY.makeZerosTypedArray(0,r);var a=Math.abs(Math.ceil((t-e)/n)),i=SY.makeZerosTypedArray(a,r);t<e&&1===n&&(n=-1),i[0]=e;for(var o=1;o<i.length;o++)i[o]=i[o-1]+n;return i}var tde=Bhe((function(e){return 1/Math.sqrt(e)})),nde=Vhe(bX,tde),rde={kernelName:bX,backendName:"cpu",kernelFunc:nde};function ade(e,t,n,r,a,i,o,s,u,c){var l=[r/a,a],f=e.values,h=t.values;if(0===r)return eJ(n,t.dtype);var p=eJ(l,t.dtype);"string"==typeof u||"number"==typeof u?p.values.fill(u):"boolean"==typeof u&&p.values.fill(+u);for(var d=0;d<i;d++){for(var m=[],v=0,g=0;g<o;g++){var y=f[d*o+g];m.push(y),v+=y*s[g]}if(v<0||v>=r/a)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(var b=0;b<a;b++)c?p.values[v*a+b]+=h[d*a+b]:p.values[v*a+b]=0===t.rank?h[0]:h[d*a+b]}return p}var ide=Bhe((function(e){return 1/(1+Math.exp(-e))})),ode=Whe(CX,(function(e){return 1/(1+Math.exp(-e))})),sde={kernelName:CX,backendName:"cpu",kernelFunc:ode};function ude(e,t,n,r,a){var i=S0.isSliceContinous(r,t,n),o=SY.sizeFromShape(n),s=SY.computeStrides(r);if(i){var u=S0.computeFlatOffset(t,s);return"string"===a?e.slice(u,u+o):e.subarray(u,u+o)}for(var c=eJ(r,a,"string"===a?i8.fromUint8ToStringArray(e):e),l=eJ(n,a),f=0;f<l.size;++f){var h=l.indexToLoc(f),p=h.map((function(e,n){return e+t[n]}));l.set.apply(l,[c.get.apply(c,(0,I.Z)(p))].concat((0,I.Z)(h)))}return"string"===a?i8.fromStringArrayToUint8(l.values):l.values}function cde(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size;dhe(a,"slice");var s=S0.parseSliceParams(a,i,o),u=(0,T.Z)(s,2),c=u[0],l=u[1];S0.assertParamsValid(a,c,l);var f=ude(n.data.get(a.dataId).values,c,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,f)}var lde={kernelName:_X,backendName:"cpu",kernelFunc:cde};function fde(e,t,n,r,a,i,o){var s=t[0],u=i[0],c=new Array(u),l=new Array(s),f=t[1];if(0===u){if(0!==s)throw new Error(i8.getSparseFillEmptyRowsIndicesDenseShapeMismatch(s));return[SY.getArrayFromDType(n,0),[0,f],SY.getArrayFromDType(a,0),c,l]}for(var h=!0,p=0,d=new Array(u).fill(0),m=0;m<s;++m){var v=e[m*f];if(v<0)throw new Error(i8.getSparseFillEmptyRowsNegativeIndexErrorMessage(m,v));if(v>=u)throw new Error(i8.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(m,v,u));++d[v],h=h&&v>=p,p=v}for(var g=!0,y=0;y<u;++y){var b=0===d[y];c[y]=b,g=g&&!b,d[y]=Math.max(d[y],1),y>0&&(d[y]+=d[y-1])}if(g&&h){for(var x=e,w=r,k=0;k<s;++k)l[k]=k;return[x,[s,f],w,c,l]}for(var S=d[u-1],_=SY.getArrayFromDType(n,S*f),T=SY.getArrayFromDType(a,S),I=new Array(u).fill(0),N=0;N<s;++N){var C=e[N*f],E=I[C],A=(0===C?0:d[C-1])+E;I[C]++;for(var R=0;R<f;++R)_[A*f+R]=e[N*f+R];T[A]=r[N],l[N]=A}for(var O=0;O<u;++O)if(0===I[O]){var M=0===O?0:d[O-1];_[M*f+0]=O;for(var D=1;D<f;++D)_[M*f+D]=0;T[M]=o}return[_,[S,f],T,c,l]}function hde(e,t,n,r,a){for(var i=SY.sizeFromShape(r),o=t[0],s=a.length,u=[],c=1,l=-1,f=0;f<s;++f){var h=a[f];if(-1===h){if(-1!==l)throw new Error(i8.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(l,f));l=f,u.push(1)}else{if(h<0)throw new Error(i8.getSparseReshapeNegativeOutputDimErrorMessage(f,h));c*=h,u.push(h)}}if(-1!==l){if(c<=0)throw new Error(i8.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());var p=Math.trunc(i/c);if(c*p!==i)throw new Error(i8.getSparseReshapeInputOutputMultipleErrorMessage(r,u));u[l]=p}if(SY.sizeFromShape(u)!==i)throw new Error(i8.getSparseReshapeInputOutputMismatchErrorMessage(r,u));var d=r.length,m=[];if(d>0){m[d-1]=1;for(var v=d-2;v>=0;--v)m[v]=m[v+1]*r[v+1]}var g=[];if(s>0){g[s-1]=1;for(var y=s-2;y>=0;--y)g[y]=g[y+1]*u[y+1]}for(var b=SY.getArrayFromDType(n,o*s),x=0;x<o;++x){for(var w=0,k=0;k<d;++k)w+=e[x*d+k]*m[k];for(var S=0;S<s;++S)b[x*s+S]=Math.trunc(w/g[S]),w%=g[S]}return[b,[o,s],u]}function pde(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,u=[t[0],e.length/t[0]],c=u[1],l=s>0?a[s-1]+1:0;if(l<0)throw new Error(i8.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());var f=t.slice();f[0]=l;var h=f.reduce((function(e,t){return e*t}),1),p=SY.getArrayFromDType(n,h);if(0===s)return l>0&&p.fill(o),[p,f];if(l<=0)throw new Error(i8.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());for(var d=0,m=1,v=0,g=a[d];;){var y=0;if(m<s){if(g===(y=a[m])){++m;continue}if(g>=y)throw new Error(i8.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(g<0||g>=l)throw new Error(i8.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(g,l));g>v&&p.fill(o,v*c,g*c);for(var b=d;b<m;++b){var x=r[b];if(x<0||x>=u[0])throw new Error(i8.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(b,r[b],u[0]));for(var w=0;w<c;w++)p[g*c+w]+=e[x*c+w]}if(i)for(var k=0;k<c;k++)p[g*c+k]/=m-d;if(d=m,v=g+1,g=y,++m>s)break}return v<l&&p.fill(o,v*c,l*c),[p,f]}var dde=Bhe((function(e){return Math.sqrt(e)})),mde=Whe(AX,(function(e){return Math.sqrt(e)})),vde={kernelName:AX,backendName:"cpu",kernelFunc:mde},gde=xhe((function(e,t){var n=e-t;return n*n})),yde=Rhe(WX,gde),bde={kernelName:WX,backendName:"cpu",kernelFunc:yde};function xde(e,t,n,r){for(var a=eJ(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),u=0;u<s.length;u++)s[u]=o[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat((0,I.Z)(o)))}return a}var wde=function(){function e(t,n,r,a,i,o){N(this,e),this.separator=SY.encodeString(t),this.nGramWidths=n,this.leftPad=SY.encodeString(r),this.rightPad=SY.encodeString(a),this.padWidth=i,this.preserveShort=o}return(0,C.Z)(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,i){for(var o=this,s=function(s){var u=o.getPadWidth(i),c=Math.max(0,u-s),l=Math.max(0,u-(a-(s+1))),f=i-(c+l),h=t+(c>0?0:s-u),p=0;p+=c*o.leftPad.length;for(var d=0;d<f;++d)p+=e[h+d].length;p+=l*o.rightPad.length,p+=(c+l+f-1)*o.separator.length,n[r+s]=new Uint8Array(p);for(var m=n[r+s],v=0,g=function(e){return e.forEach((function(e){return m[v++]=e}))},y=0;y<c;++y)g(o.leftPad),g(o.separator);for(var b=0;b<f-1;++b)g(e[h+b]),g(o.separator);if(f>0){g(e[h+f-1]);for(var x=0;x<l;++x)g(o.separator),g(o.rightPad)}else{for(var w=0;w<l-1;++w)g(o.rightPad),g(o.separator);g(o.rightPad)}},u=0;u<a;++u)s(u)}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var i=t[0];if(0!==i)throw new Error("First split value must be 0, got ".concat(i));for(var o=1;o<a;++o){var s=t[o]>=i;if(!(s=s&&t[o]<=r))throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(i,", ").concat(r,"]"));i=t[o]}if(i!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(i))}var u=a-1,c=SY.getArrayFromDType("int32",a);if(0===r||0===a){for(var l=new Array(r),f=0;f<=u;++f)c[f]=0;return[l,c]}c[0]=0;for(var h=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),c[e]=c[e-1]+a},p=1;p<=u;++p)h(p);for(var d=new Array(c[u]),m=function(r){var a=t[r],i=c[r];if(n.nGramWidths.forEach((function(o){var s=t[r+1]-t[r],u=n.getNumNGrams(s,o);n.createNGrams(e,a,d,i,u,o),i+=u})),n.preserveShort&&i===c[r]){var o=t[r+1]-t[r];if(0===o)return"continue";var s=o+2*n.padWidth;n.createNGrams(e,a,d,i,1,s)}},v=0;v<u;++v)m(v);return[d,c]}}]),e}();function kde(e,t,n,r,a,i,o,s){return new wde(n,r,a,i,o,s).compute(e,t)}function Sde(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){var o=e.subarray(a,i);(!n||0!==o.length)&&r.push(o),a=i+1}}else{for(var s=t[0],u=e.indexOf(s);-1!==u;){var c=e.subarray(0,u);(!n||0!==c.length)&&r.push(c),u=(e=e.subarray(u+1)).indexOf(s)}(!n||0!==e.length)&&r.push(e)}else for(var l=0;l<e.length;++l)r.push(e.subarray(l,l+1))}function _de(e,t,n){for(var r=e.length,a=[],i=0,o=0,s=new Array(r),u=0;u<r;++u){var c=a.length;Sde(e[u],t,n,a);var l=a.length-c;s[u]=l,i+=l,o=Math.max(o,l)}for(var f=SY.getArrayFromDType("int32",2*i),h=new Array(i),p=[r,o],d=0,m=0;m<r;++m)for(var v=0;v<s[m];++v)f[2*d]=m,f[2*d+1]=v,h[d]=a[d],++d;return[f,h,p]}function Tde(e,t){for(var n=SY.getArrayFromDType("int32",e.length),r=0;r<e.length;++r)n[r]=SY.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}var Ide=xhe((function(e,t){return e-t})),Nde=Ohe((function(e,t,n,r){return{real:e-n,imag:t-r}})),Cde=Rhe(GX,Ide,Nde),Ede={kernelName:GX,backendName:"cpu",kernelFunc:Cde};function Ade(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=eJ(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=o[u]%e.shape[u];var c=e.locToIndex(s);a.values[i]=e.values[c]}return a}var Rde=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function Ode(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,i=t-n+1,o=Math.log(a),s=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*s*(a-s)/a)*Math.sign(i-a/2),c=Math.max(n,Math.floor(t-i*s/a+u)),l=Math.min(r,Math.floor(t+(a-i)*s/a+u));Ode(e,t,c,l)}var f=e[t],h=n,p=r;for(SY.swap(e,n,t),Rde(e[r],f)>0&&SY.swap(e,n,r);h<p;){for(SY.swap(e,h,p),h++,p--;Rde(e[h],f)<0;)h+=1;for(;Rde(e[p],f)>0;)p-=1}0===Rde(e[n],f)?SY.swap(e,n,p):(p+=1,SY.swap(e,p,r)),p<=t&&(n=p+1),t<=p&&(r=p-1)}}function Mde(e,t,n,r,a){for(var i=t[t.length-1],o=e.length/i,s=i,u=SY.getTypedArrayFromDType(n,o*r),c=SY.getTypedArrayFromDType("int32",o*r),l=function(t){var n=t*s,i=e.subarray(n,n+s),o=new Array(i.length);i.forEach((function(e,t){return o[t]={value:e,index:t}})),r<o.length&&(Ode(o,r),o=o.slice(0,r)),a&&o.sort(Rde);for(var l=t*r,f=u.subarray(l,l+r),h=c.subarray(l,l+r),p=0;p<r;p++)f[p]=o[p].value,h[p]=o[p].index},f=0;f<o;f++)l(f);var h=t.slice();return h[h.length-1]=r,[eJ(h,n,u),eJ(h,"int32",c)]}function Dde(e,t,n,r){for(var a=SY.parseAxisParam(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var s=a+1;s<n.length;s++)i[2]*=n[s];for(var u={},c=new Int32Array(n[a]),l=new n$(i,r,e),f=[],h=1===i[0]&&1===i[2],p=0;p<n[a];p++){var d=void 0;if(h)d=e[p].toString();else{for(var m=[],v=0;v<i[0];v++)for(var g=0;g<i[2];g++)m.push(l.get(v,p,g));d=m.join(",")}if(void 0!==u[d])c[p]=u[d];else{var y=Object.keys(u).length;u[d]=y,c[p]=y,f.push(p)}}var b=i.slice();b[1]=Object.keys(u).length;var x=new n$(b,r);f.forEach((function(e,t){for(var n=0;n<i[0];n++)for(var r=0;r<i[2];r++)x.set(l.get(n,e,r),n,t,r)}));var w=n.slice();return w[a]=b[1],{outputValues:x.values,outputShape:w,indices:c}}XJ("cpu",(function(){return new vhe}),1);var Fde=Whe(Kq,(function(e){return e>=0?e:Math.exp(e)-1})),Pde={kernelName:Kq,backendName:"cpu",kernelFunc:Fde};function Lde(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha;dhe([a],"leakyRelu");for(var o=SY.sizeFromShape(a.shape),s=n.data.get(a.dataId).values,u=SY.getTypedArrayFromDType("float32",o),c=0;c<s.length;c++)u[c]=s[c]<0?i*s[c]:s[c];return n.makeTensorInfo(a.shape,"float32",u)}var zde={kernelName:gK,backendName:"cpu",kernelFunc:Lde},Bde=xhe((function(e,t){return e<0?t*e:e}));function Wde(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;dhe([r,a],"prelu");var i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=Bde(r.shape,a.shape,i,o,"float32"),u=(0,T.Z)(s,2),c=u[0],l=u[1];return n.makeTensorInfo(l,"float32",c)}var Vde={kernelName:nX,backendName:"cpu",kernelFunc:Wde},jde=Whe(lX,(function(e){return Math.max(0,e)})),Ude={kernelName:lX,backendName:"cpu",kernelFunc:jde},Hde=Whe(vX,(function(e){return Math.min(Math.max(0,e),6)})),Zde={kernelName:vX,backendName:"cpu",kernelFunc:Hde};function Gde(e,t,n,r,a){if("linear"===n)return _he({inputs:{x:t},backend:e});if("relu"===n)return jde({inputs:{x:t},backend:e});if("elu"===n)return Fde({inputs:{x:t},backend:e});if("relu6"===n)return Hde({inputs:{x:t},backend:e});if("prelu"===n)return Wde({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return Lde({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return ode({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function qde(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=SY.sizeFromShape(a.shape),s=SY.inferFromImplicitShape(i,o),u=SY.sizeFromShape(s);SY.assert(o===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old shape (").concat(a.shape,") has ").concat(o," elements. The new shape and old shape must have the same number of elements.")})),n.incRef(a.dataId);var c=n.data.get(a.dataId);if(null!=c.complexTensorInfos){var l=c.complexTensorInfos.real,f=c.complexTensorInfos.imag;l.shape=s,f.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var Kde={kernelName:fX,backendName:"cpu",kernelFunc:qde};function Xde(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;dhe([a,i],"matMul");var u=a.shape.length,c=i.shape.length,l=o?a.shape[u-2]:a.shape[u-1],f=s?i.shape[c-1]:i.shape[c-2],h=o?a.shape[u-1]:a.shape[u-2],p=s?i.shape[c-2]:i.shape[c-1],d=a.shape.slice(0,-2),m=i.shape.slice(0,-2),v=SY.sizeFromShape(d),g=SY.sizeFromShape(m),y=r0.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([h,p]);SY.assert(l===f,(function(){return"Error in matMul: inner shapes (".concat(l,") and (").concat(f,") of Tensors with shapes ").concat(a.shape," and ").concat(i.shape," and transposeA=").concat(o," and transposeB=").concat(s," must match.")}));for(var b=s?[g,p,f]:[g,f,p],x=qde({inputs:{x:a},backend:n,attrs:{shape:o?[v,l,h]:[v,h,l]}}),w=qde({inputs:{x:i},backend:n,attrs:{shape:b}}),k=o?x.shape[1]:x.shape[2],S=o?x.shape[2]:x.shape[1],_=s?w.shape[1]:w.shape[2],I=Math.max(v,g),N=n.data.get(x.dataId).values,C=n.data.get(w.dataId).values,E=SY.computeStrides(x.shape),A=SY.computeStrides(w.shape),R=o?[E[0],1,E[1]]:[E[0],E[1],1],O=(0,T.Z)(R,3),M=O[0],D=O[1],F=O[2],P=s?[1,A[1],A[0]]:[A[1],1,A[0]],L=(0,T.Z)(P,3),z=L[0],B=L[1],W=L[2],V=S*_,j=eJ([I,S,_],x.dtype),U=j.values,H=n.blockSize,Z=0;Z<I;Z++)for(var G=0;G<S;G+=H)for(var q=0;q<_;q+=H)for(var K=0;K<k;K+=H)for(var X=Math.min(G+H,S),Y=Math.min(q+H,_),$=Math.min(K+H,k),Q=G;Q<X;Q++)for(var J=q;J<Y;J++){for(var ee=0,te=K;te<$;te++){var ne=Math.min(Z,v-1)*M,re=Math.min(Z,g-1)*W;ee+=N[ne+Q*D+te*F]*C[te*z+J*B+re]}U[Z*V+(Q*_+J)]+=ee}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(y,j.dtype,j.values)}var Yde={kernelName:mq,backendName:"cpu",kernelFunc:Xde};var $de={kernelName:sY,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,i=e.backend,o=e.attrs,s=a.a,u=a.b,c=a.bias,l=a.preluActivationWeights,f=o.transposeA,h=o.transposeB,p=o.activation,d=o.leakyreluAlpha,m=[];t=Xde({inputs:{a:s,b:u},attrs:{transposeA:f,transposeB:h},backend:i}),c&&(n=Fhe({inputs:{a:t,b:c},backend:i}),m.push(t),t=n),p&&(r=Gde(i,t,p,l,d),m.push(t),t=r);for(var v=0,g=m;v<g.length;v++){var y=g[v];i.disposeIntermediateTensorInfo(y)}return t}},Qde=Whe(QG,(function(e){return Math.acos(e)})),Jde={kernelName:QG,backendName:"cpu",kernelFunc:Qde},eme=Whe(JG,(function(e){return Math.acosh(e)})),tme={kernelName:JG,backendName:"cpu",kernelFunc:eme};var nme={kernelName:tq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;dhe(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),i=eJ(r[0].shape,r[0].dtype),o=i.values,s=0;s<r.length;s++)for(var u=a[s],c=0;c<o.length;c++)o[c]+=u[c];return n.makeTensorInfo(i.shape,i.dtype,i.values)}};var rme={kernelName:nq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;dhe(a,"all");var s=SY.parseAxisParam(i,a.shape),u=s,c=i8.getAxesPermutation(u,a.shape.length),l=a;null!=c&&(l=Bpe({inputs:{x:a},backend:n,attrs:{perm:c}}),u=i8.getInnerMostAxes(u.length,a.shape.length)),i8.assertAxesAreInnerMostDims("all",u,l.shape.length);for(var f=i8.computeOutAndReduceShapes(l.shape,u),h=(0,T.Z)(f,2),p=h[0],d=h[1],m=SY.sizeFromShape(d),v=SY.makeZerosTypedArray(SY.sizeFromShape(p),l.dtype),g=n.data.get(l.dataId).values,y=0;y<v.length;++y){for(var b=y*m,x=g[b],w=0;w<m;++w){var k=g[b+w];x=x&&k}v[y]=x}null!=c&&n.disposeIntermediateTensorInfo(l);var S=n.makeTensorInfo(p,l.dtype,v);if(o){var _=qde({inputs:{x:S},backend:n,attrs:{shape:i8.expandShapeToKeepDim(p,s)}});return n.disposeIntermediateTensorInfo(S),_}return S}};var ame={kernelName:rq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;dhe(a,"any");var s=SY.parseAxisParam(i,a.shape),u=s,c=i8.getAxesPermutation(u,a.shape.length),l=a;null!=c&&(l=Bpe({inputs:{x:a},backend:n,attrs:{perm:c}}),u=i8.getInnerMostAxes(u.length,a.shape.length)),i8.assertAxesAreInnerMostDims("any",u,l.shape.length);for(var f=i8.computeOutAndReduceShapes(l.shape,u),h=(0,T.Z)(f,2),p=h[0],d=h[1],m=SY.sizeFromShape(d),v=SY.makeZerosTypedArray(SY.sizeFromShape(p),l.dtype),g=n.data.get(l.dataId).values,y=0;y<v.length;++y){for(var b=y*m,x=g[b],w=0;w<m;++w){var k=g[b+w];x=x||k}v[y]=x}null!=c&&n.disposeIntermediateTensorInfo(l);var S=n.makeTensorInfo(p,l.dtype,v);if(o){var _=qde({inputs:{x:S},backend:n,attrs:{shape:i8.expandShapeToKeepDim(p,s)}});return n.disposeIntermediateTensorInfo(S),_}return S}};var ime={kernelName:aq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;dhe(a,"argMax");var o=SY.parseAxisParam(i,a.shape),s=i8.getAxesPermutation(o,a.shape.length),u=a,c=[];null!=s&&(u=Bpe({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),o=i8.getInnerMostAxes(o.length,u.shape.length)),o=[o[0]],i8.assertAxesAreInnerMostDims("argMax",o,u.shape.length);for(var l=i8.computeOutAndReduceShapes(u.shape,o),f=(0,T.Z)(l,2),h=f[0],p=f[1],d=SY.sizeFromShape(h),m=SY.makeZerosTypedArray(d,"int32"),v=SY.sizeFromShape(p),g=n.data.get(u.dataId).values,y=0;y<m.length;++y){for(var b=y*v,x=g[b],w=0,k=0;k<v;++k){var S=g[b+k];S>x&&(x=S,w=k)}m[y]=w}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(h,"int32",m)}};var ome={kernelName:iq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;dhe(a,"argMin");var o=SY.parseAxisParam(i,a.shape),s=i8.getAxesPermutation(o,a.shape.length),u=a,c=[];null!=s&&(u=Bpe({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),o=i8.getInnerMostAxes(o.length,u.shape.length)),o=[o[0]],i8.assertAxesAreInnerMostDims("argMin",o,u.shape.length);for(var l=i8.computeOutAndReduceShapes(u.shape,o),f=(0,T.Z)(l,2),h=f[0],p=f[1],d=SY.sizeFromShape(h),m=SY.makeZerosTypedArray(d,"int32"),v=SY.sizeFromShape(p),g=n.data.get(u.dataId).values,y=0;y<m.length;++y){for(var b=y*v,x=g[b],w=0,k=0;k<v;++k){var S=g[b+k];S<x&&(x=S,w=k)}m[y]=w}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(h,"int32",m)}},sme=Whe(oq,(function(e){return Math.asin(e)})),ume={kernelName:oq,backendName:"cpu",kernelFunc:sme},cme=Whe(sq,(function(e){return Math.asinh(e)})),lme={kernelName:sq,backendName:"cpu",kernelFunc:cme},fme=Whe(uq,(function(e){return Math.atan(e)})),hme={kernelName:uq,backendName:"cpu",kernelFunc:fme},pme=xhe((function(e,t){return Math.atan2(e,t)})),dme=Rhe(lq,pme),mme={kernelName:lq,backendName:"cpu",kernelFunc:dme},vme=Whe(cq,(function(e){return Math.atanh(e)})),gme={kernelName:cq,backendName:"cpu",kernelFunc:vme};function yme(e,t,n,r,a,i){for(var o=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,c=a.dilationWidth,l=a.effectiveFilterHeight,f=a.effectiveFilterWidth,h=a.padInfo.top,p=a.padInfo.left,d="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=eJ(a.outShape,n),v=m.values,g=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var w=x*g,k=x*r[0],S=0;S<a.inChannels;++S)for(var _=0;_<a.outHeight;++_)for(var T=_*o-h,I=Math.max(0,T),N=Math.min(a.inHeight,l+T),C=w+_*y,E=0;E<a.outWidth;++E){for(var A=E*s-p,R=Math.max(0,A),O=Math.min(a.inWidth,f+A),M=d,D=0,F=0,P=I;P<N;P+=u){for(var L=k+P*r[1],z=R;z<O;z+=c){var B=e[L+z*r[2]+S];"max"===i&&B>M?M=B:"avg"===i&&(D+=B,F++)}if(isNaN(M))break}v[C+E*b+S]="avg"===i?D/F:M}return m}function bme(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=eJ(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,d=r.padInfo.left,m=eJ(t,n,e),v=0;v<r.batchSize;++v)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.outHeight;++y){for(var b=y*s-p,x=b;x<0;)x+=c;for(var w=Math.min(r.inHeight,f+b),k=0;k<r.outWidth;++k){for(var S=k*u-d,_=S;_<0;)_+=l;for(var T=Math.min(r.inWidth,h+S),I=Number.NEGATIVE_INFINITY,N=-1,C=x;C<w;C+=c)for(var E=C-b,A=_;A<T;A+=l){var R=A-S,O=m.get(v,C,A,g);O>I&&(I=O,N=a?i?((v*r.inHeight+C)*r.inWidth+A)*r.inChannels+g:(C*r.inWidth+A)*r.inChannels+g:E*h+R)}o.set(N,v,y,k,g)}}return o}function xme(e,t,n,r,a,i){for(var o=a.strideDepth,s=a.strideHeight,u=a.strideWidth,c=a.dilationDepth,l=a.dilationHeight,f=a.dilationWidth,h=a.effectiveFilterDepth,p=a.effectiveFilterHeight,d=a.effectiveFilterWidth,m=a.padInfo.front,v=a.padInfo.top,g=a.padInfo.left,y="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=eJ(a.outShape,n),x=b.values,w=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[2]*a.outShape[3]*a.outShape[4],S=a.outShape[3]*a.outShape[4],_=a.outShape[4],T=0;T<a.batchSize;++T)for(var I=T*w,N=T*r[0],C=0;C<a.inChannels;++C)for(var E=0;E<a.outDepth;++E){for(var A=E*o-m,R=A;R<0;)R+=c;for(var O=Math.min(a.inDepth,h+A),M=I+E*k,D=0;D<a.outHeight;++D){for(var F=D*s-v,P=F;P<0;)P+=l;for(var L=Math.min(a.inHeight,p+F),z=M+D*S,B=0;B<a.outWidth;++B){for(var W=B*u-g,V=W;V<0;)V+=f;for(var j=Math.min(a.inWidth,d+W),U=z+B*_,H=y,Z=0,G=0,q=R;q<O;q+=c){for(var K=N+q*r[1],X=P;X<L;X+=l){for(var Y=K+X*r[2],$=V;$<j;$+=f){var Q=e[Y+$*r[3]+C];if("max"===i&&Q>H?H=Q:"avg"===i&&(Z+=Q,G++),isNaN(H))break}if(isNaN(H))break}if(isNaN(H))break}x[U+C]="avg"===i?Z/G:H}}}return b}var wme={kernelName:fq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;dhe(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;SY.assert(i8.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(1,"'")}));var c,l=i8.computePool2DInfo(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&SY.arraysEqual(l.inShape,l.outShape))c=_he({inputs:{x:a},backend:n});else{var f=n.data.get(a.dataId).values,h=SY.computeStrides(a.shape),p=yme(f,a.shape,a.dtype,h,l,"avg");c=n.makeTensorInfo(l.outShape,a.dtype,p.values)}return c}};var kme={kernelName:pq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;dhe(a,"avgPool3d");var l=i8.computePool3DInfo(a.shape,i,o,1,s,u,c),f=xme(n.data.get(a.dataId).values,a.shape,a.dtype,SY.computeStrides(a.shape),l,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}};var Sme={kernelName:dq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;dhe([a,i],"avgPool3DGrad");for(var l=i8.computePool3DInfo(i.shape,o,s,1,u,c),f=l.strideDepth,h=l.strideHeight,p=l.strideWidth,d=l.filterDepth,m=l.filterHeight,v=l.filterWidth,g=l.dilationDepth,y=l.dilationHeight,b=l.dilationWidth,x=l.effectiveFilterDepth,w=l.effectiveFilterHeight,k=l.effectiveFilterWidth,S=x-1-l.padInfo.front,_=k-1-l.padInfo.left,T=w-1-l.padInfo.top,I=eJ(i.shape,"float32"),N=1/(d*m*v),C=n.bufferSync(a),E=0;E<l.batchSize;++E)for(var A=0;A<l.inChannels;++A)for(var R=0;R<l.inDepth;++R)for(var O=0;O<l.inHeight;++O)for(var M=0;M<l.inWidth;++M){for(var D=R-S,F=O-T,P=M-_,L=0,z=0;z<x;z+=g){var B=(D+z)/f;if(!(B<0||B>=l.outDepth||Math.floor(B)!==B))for(var W=0;W<w;W+=y){var V=(F+W)/h;if(!(V<0||V>=l.outHeight||Math.floor(V)!==V))for(var j=0;j<k;j+=b){var U=(P+j)/p;U<0||U>=l.outWidth||Math.floor(U)!==U||(L+=C.get(E,B,V,U,A))}}}I.set(L*N,E,R,O,M,A)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}};var _me={kernelName:hq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;dhe([a,i],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=i8.computePool2DInfo(o.shape,s,u,1,c),f=l.strideHeight,h=l.strideWidth,p=l.filterHeight,d=l.filterWidth,m=l.dilationHeight,v=l.dilationWidth,g=l.effectiveFilterHeight,y=l.effectiveFilterWidth,b=y-1-l.padInfo.left,x=g-1-l.padInfo.top,w=eJ(o.shape,"float32"),k=1/(p*d),S=n.data.get(a.dataId).values,_=eJ(a.shape,"float32",S),T=0;T<l.batchSize;++T)for(var I=0;I<l.inChannels;++I)for(var N=0;N<l.inHeight;++N)for(var C=0;C<l.inWidth;++C){for(var E=N-x,A=C-b,R=0,O=0;O<g;O+=m){var M=(E+O)/f;if(!(M<0||M>=l.outHeight||Math.floor(M)!==M))for(var D=0;D<y;D+=v){var F=(A+D)/h;F<0||F>=l.outWidth||Math.floor(F)!==F||(R+=_.get(T,M,F,I))}}w.set(R*k,T,N,C,I)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var Tme={kernelName:oK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.scale,o=t.offset,s=t.mean,u=t.variance;SY.assert(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),SY.assert(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),SY.assert(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),dhe([a,s,u,i,o],"batchNorm");var c=r.varianceEpsilon;null==c&&(c=.001);for(var l=n.data.get(a.dataId).values,f=n.data.get(s.dataId).values,h=n.data.get(u.dataId).values,p=i?n.data.get(i.dataId).values:new Float32Array([1]),d=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(l.length),v=d.length,g=p.length,y=h.length,b=f.length,x=0,w=0,k=0,S=0,_=0;_<l.length;++_)m[_]=d[x++]+(l[_]-f[w++])*p[k++]/Math.sqrt(h[S++]+c),x>=v&&(x=0),w>=b&&(w=0),k>=g&&(k=0),S>=y&&(S=0);return n.makeTensorInfo(a.shape,a.dtype,m)}};var Ime={kernelName:vq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;dhe([a],"batchToSpaceND");var s=i.reduce((function(e,t){return e*t})),u=i8.getReshaped(a.shape,i,s),c=i8.getPermuted(u.length,i.length),l=i8.getReshapedPermuted(a.shape,i,s),f=i8.getSliceBeginCoords(o,i.length),h=i8.getSliceSize(l,o,i.length),p=qde({inputs:{x:a},backend:n,attrs:{shape:u}}),d=Bpe({inputs:{x:p},backend:n,attrs:{perm:c}}),m=qde({inputs:{x:d},backend:n,attrs:{shape:l}}),v=cde({inputs:{x:m},backend:n,attrs:{begin:f,size:h}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),v}};var Nme={kernelName:gq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=Lhe(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}};var Cme={kernelName:bq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=i8.assertAndGetBroadcastShape(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},Eme=Whe(kq,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),Ame={kernelName:kq,backendName:"cpu",kernelFunc:Eme},Rme={kernelName:_q,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(SY.sizeFromShape(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,c=0;c<s.length;c++){var l=s[c],f=u[c];r[c]=Math.hypot(l,f)}return n.makeOutput(r,t.shape,"float32")}};function Ome(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var Mme={kernelName:pK,backendName:"cpu",kernelFunc:Ome};function Dme(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,a=SY.parseAxisParam(r,t[0].shape)[0],i=t.map((function(e){return e.shape}));i8.assertParamsConsistent(i,a);var o=i8.computeOutShape(t.map((function(e){return e.shape})),a);if(0===SY.sizeFromShape(o))return n.makeTensorInfo(o,t[0].dtype,[]);var s=t.filter((function(e){return SY.sizeFromShape(e.shape)>0}));if(1===s.length)return _he({inputs:{x:s[0]},backend:n});if("complex64"===s[0].dtype){var u=s.map((function(e){return Ihe({inputs:{input:e},backend:n})})),c=s.map((function(e){return Ome({inputs:{input:e},backend:n})})),l=Dme({inputs:u,backend:n,attrs:{axis:a}}),f=Dme({inputs:c,backend:n,attrs:{axis:a}}),h=whe({inputs:{real:l,imag:f},backend:n});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),h}var p=s.map((function(e){var t=SY.sizeFromShape(e.shape.slice(a));return qde({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),d=p.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));o=i8.computeOutShape(p.map((function(e){return e.shape})),1);var m=1===p[0].shape[0],v=Zhe(d,o,t[0].dtype,m),g=i8.computeOutShape(s.map((function(e){return e.shape})),a),y=n.makeTensorInfo(g,t[0].dtype,v);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}var Fme={kernelName:Tq,backendName:"cpu",kernelFunc:Dme};function Pme(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dilations,l=r.dimRoundingMode;dhe([a,i],"conv2d");for(var f=i8.convertConv2DDataFormat(u),h=i8.computeConv2DInfo(a.shape,i.shape,o,c,s,l,!1,f),p=h.filterHeight,d=h.filterWidth,m=h.dilationHeight,v=h.dilationWidth,g=h.padInfo.left,y=h.padInfo.top,b="channelsLast"===h.dataFormat,x=new n$(h.outShape,a.dtype),w=SY.computeStrides(a.shape),k=SY.computeStrides(i.shape),S=w[0],_=b?w[1]:w[2],T=b?w[2]:1,I=b?1:w[1],N=x.strides[0],C=b?x.strides[1]:x.strides[2],E=b?x.strides[2]:1,A=b?1:x.strides[1],R=n.data.get(a.dataId).values,O=n.data.get(i.dataId).values,M=x.values,D=0;D<h.batchSize;++D)for(var F=D*S,P=D*N,L=0;L<h.outHeight;++L)for(var z=P+L*C,B=L*h.strideHeight-y,W=0;W<p;++W){var V=B+W*m;if(!(V<0||V>=h.inHeight))for(var j=W*k[0],U=F+V*_,H=0;H<h.outWidth;++H)for(var Z=z+H*E,G=H*h.strideWidth-g,q=0;q<d;++q){var K=G+q*v;if(!(K<0||K>=h.inWidth))for(var X=U+K*T,Y=j+q*k[1],$=0;$<h.inChannels;++$){for(var Q=R[X+$*I],J=0;J<h.outChannels;++J)M[Z+J*A]+=Q*O[Y+J];Y+=h.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,M)}var Lme={kernelName:Iq,backendName:"cpu",kernelFunc:Pme};var zme={kernelName:Nq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape;dhe([a,i],"conv2dBackpropFilter");for(var f=i8.convertConv2DDataFormat(u),h=i8.computeConv2DInfo(a.shape,l,o,1,s,c,!1,f),p=h.strideHeight,d=h.strideWidth,m=h.filterHeight,v=h.filterWidth,g="channelsLast"===h.dataFormat,y=new n$(h.filterShape,"float32"),b=h.padInfo.left,x=h.padInfo.top,w=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,S=new n$(a.shape,a.dtype,w),_=new n$(i.shape,i.dtype,k),T=0;T<m;++T)for(var I=Math.max(0,Math.ceil((x-T)/p)),N=Math.min(h.outHeight,(h.inHeight+x-T)/p),C=0;C<v;++C)for(var E=Math.max(0,Math.ceil((b-C)/d)),A=Math.min(h.outWidth,(h.inWidth+b-C)/d),R=0;R<h.inChannels;++R)for(var O=0;O<h.outChannels;++O){for(var M=0,D=0;D<h.batchSize;++D)for(var F=I;F<N;++F)for(var P=T+F*p-x,L=E;L<A;++L){var z=C+L*d-b;M+=g?S.get(D,P,z,R)*_.get(D,F,L,O):S.get(D,R,P,z)*_.get(D,O,F,L)}y.set(M,T,C,R,O)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var Bme={kernelName:Cq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode;dhe([a,i],"conv2dBackpropInput");var f=SY.computeStrides(i.shape),h=SY.computeStrides(a.shape),p=i8.convertConv2DDataFormat(c),d=i8.computeConv2DInfo(o,i.shape,s,1,u,l,!1,p),m=new n$(d.inShape,"float32"),v=m.values,g=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,b=(0,T.Z)(f,3),x=b[0],w=b[1],k=b[2],S=d.batchSize,_=d.filterHeight,I=d.filterWidth,N=d.inChannels,C=d.inHeight,E=d.inWidth,A=d.outChannels,R=d.outHeight,O=d.outWidth,M=d.strideHeight,D=d.strideWidth;p=d.dataFormat;for(var F=_-1-d.padInfo.top,P=I-1-d.padInfo.left,L="channelsLast"===p,z=m.strides[0],B=L?m.strides[1]:m.strides[2],W=L?m.strides[2]:1,V=L?1:m.strides[1],j=h[0],U=L?h[1]:h[2],H=L?h[2]:1,Z=L?1:h[1],G=0;G<S;++G)for(var q=0;q<N;++q)for(var K=0;K<C;++K)for(var X=K-F,Y=Math.max(0,Math.ceil(X/M)),$=Math.min(R,(_+X)/M),Q=0;Q<E;++Q){for(var J=Q-P,ee=Math.max(0,Math.ceil(J/D)),te=Math.min(O,(I+J)/D),ne=0,re=Y;re<$;++re)for(var ae=re*M-X,ie=ee;ie<te;++ie)for(var oe=j*G+U*re+H*ie,se=x*(_-1-ae)+w*(I-1-(ie*D-J))+k*q,ue=0;ue<A;++ue){ne+=g[oe+Z*ue]*y[se+ue]}v[z*G+B*K+W*Q+V*q]=ne}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var Wme={kernelName:Eq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations;dhe([a,i],"conv3d");for(var c=i8.computeConv3DInfo(a.shape,i.shape,o,u,s),l=c.filterDepth,f=c.filterHeight,h=c.filterWidth,p=c.dilationDepth,d=c.dilationHeight,m=c.dilationWidth,v=c.padInfo,g=v.front,y=v.left,b=v.top,x=new n$(c.outShape,a.dtype),w=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,S=x.values,_=SY.computeStrides(a.shape),T=SY.computeStrides(i.shape),I=0;I<c.batchSize;++I)for(var N=I*_[0],C=I*x.strides[0],E=0;E<c.outDepth;++E)for(var A=C+E*x.strides[1],R=E*c.strideDepth-g,O=0;O<l;++O){var M=R+O*p;if(!(M<0||M>=c.inDepth))for(var D=O*T[0],F=N+M*_[1],P=0;P<c.outHeight;++P)for(var L=A+P*x.strides[2],z=P*c.strideHeight-b,B=0;B<f;++B){var W=z+B*d;if(!(W<0||W>=c.inHeight))for(var V=D+B*T[1],j=F+W*_[2],U=0;U<c.outWidth;++U)for(var H=L+U*c.outChannels,Z=U*c.strideWidth-y,G=0;G<h;++G){var q=Z+G*m;if(!(q<0||q>=c.inWidth))for(var K=V+G*T[2],X=j+q*c.inChannels,Y=K,$=0;$<c.inChannels;++$){for(var Q=w[X+$],J=0;J<c.outChannels;++J)S[H+J]+=Q*k[Y+J];Y+=c.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var Vme={kernelName:Aq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape;dhe([a,i],"conv3dBackpropFilterV2");for(var c=SY.computeStrides(a.shape),l=SY.computeStrides(i.shape),f=i8.computeConv3DInfo(a.shape,u,o,1,s),h=f.strideDepth,p=f.strideHeight,d=f.strideWidth,m=f.filterDepth,v=f.filterHeight,g=f.filterWidth,y=new n$(f.filterShape,"float32"),b=y.values,x=(0,T.Z)(y.strides,4),w=x[0],k=x[1],S=x[2],_=x[3],I=n.data.get(i.dataId).values,N=(0,T.Z)(l,4),C=N[0],E=N[1],A=N[2],R=N[3],O=n.data.get(a.dataId).values,M=(0,T.Z)(c,4),D=M[0],F=M[1],P=M[2],L=M[3],z=f.padInfo.front,B=f.padInfo.left,W=f.padInfo.top,V=0;V<m;++V)for(var j=Math.max(0,Math.ceil((z-V)/h)),U=Math.min(f.outDepth,(f.inDepth+z-V)/h),H=V*w,Z=0;Z<v;++Z)for(var G=Math.max(0,Math.ceil((W-Z)/p)),q=Math.min(f.outHeight,(f.inHeight+W-Z)/p),K=Z*k+H,X=0;X<g;++X)for(var Y=Math.max(0,Math.ceil((B-X)/d)),$=Math.min(f.outWidth,(f.inWidth+B-X)/d),Q=X*S+K,J=0;J<f.inChannels;++J)for(var ee=J*_+Q,te=0;te<f.outChannels;++te){for(var ne=0,re=0;re<f.batchSize;++re)for(var ae=re*D,ie=re*C,oe=j;oe<U;++oe)for(var se=(V+oe*h-z)*F+ae,ue=oe*E+ie,ce=G;ce<q;++ce)for(var le=(Z+ce*p-W)*P+se,fe=ce*A+ue,he=Y;he<$;++he){var pe=he*R+fe;ne+=O[(X+he*d-B)*L+le+J]*I[pe+te]}b[ee+te]=ne}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var jme={kernelName:Rq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=r.inputShape;dhe([a],"conv3dBackpropInputV2");for(var c=SY.computeStrides(a.shape),l=SY.computeStrides(i.shape),f=i8.computeConv3DInfo(u,i.shape,s,1,o),h=new n$(f.inShape,"float32"),p=h.values,d=(0,T.Z)(h.strides,4),m=d[0],v=d[1],g=d[2],y=d[3],b=n.data.get(a.dataId).values,x=(0,T.Z)(c,4),w=x[0],k=x[1],S=x[2],_=x[3],I=n.data.get(i.dataId).values,N=(0,T.Z)(l,4),C=N[0],E=N[1],A=N[2],R=N[3],O=f.batchSize,M=f.filterDepth,D=f.filterHeight,F=f.filterWidth,P=f.inChannels,L=f.inDepth,z=f.inHeight,B=f.inWidth,W=f.outChannels,V=f.outDepth,j=f.outHeight,U=f.outWidth,H=f.strideDepth,Z=f.strideHeight,G=f.strideWidth,q=M-1-f.padInfo.front,K=D-1-f.padInfo.top,X=F-1-f.padInfo.left,Y=0;Y<O;++Y)for(var $=0;$<P;++$)for(var Q=0;Q<L;++Q)for(var J=Q-q,ee=Math.max(0,Math.ceil(J/H)),te=Math.min(V,(M+J)/H),ne=0;ne<z;++ne)for(var re=ne-K,ae=Math.max(0,Math.ceil(re/Z)),ie=Math.min(j,(D+re)/Z),oe=0;oe<B;++oe){for(var se=oe-X,ue=Math.max(0,Math.ceil(se/G)),ce=Math.min(U,(F+se)/G),le=0,fe=ee;fe<te;++fe)for(var he=fe*H-J,pe=ae;pe<ie;++pe)for(var de=pe*Z-re,me=ue;me<ce;++me)for(var ve=w*Y+k*fe+S*pe+_*me,ge=C*(M-1-he)+E*(D-1-de)+A*(F-1-(me*G-se))+R*$,ye=0;ye<W;++ye){le+=b[ve+ye]*I[ge+ye]}p[m*Y+v*Q+g*ne+y*oe+$]=le}return n.makeTensorInfo(h.shape,h.dtype,h.values)}},Ume=Whe(Oq,(function(e){return Math.cos(e)})),Hme={kernelName:Oq,backendName:"cpu",kernelFunc:Ume},Zme=Whe(Mq,(function(e){return Math.cosh(e)})),Gme={kernelName:Mq,backendName:"cpu",kernelFunc:Zme};var qme={kernelName:Pq,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=(0,T.Z)(a.shape,4),f=l[0],h=l[1],p=l[2],d=l[3],m=i.shape[0],v=(0,T.Z)(s,2),g=v[0],y=v[1],b=eJ([m,g,y,d],"float32"),x=n.data.get(i.dataId).values,w=n.data.get(o.dataId).values,k=n.data.get(a.dataId).values,S=SY.computeStrides(a.shape),_=SY.computeStrides(b.shape),I=0;I<m;I++){var N=4*I,C=x[N],E=x[N+1],A=x[N+2],R=x[N+3],O=w[I];if(!(O>=f))for(var M=g>1?(A-C)*(h-1)/(g-1):0,D=y>1?(R-E)*(p-1)/(y-1):0,F=0;F<g;F++){var P=g>1?C*(h-1)+F*M:.5*(C+A)*(h-1);if(P<0||P>h-1)for(var L=0;L<y;L++)for(var z=0;z<d;z++){var B=z+L*_[2]+F*_[1]+I*_[0];b.values[B]=c}else if("bilinear"===u)for(var W=Math.floor(P),V=Math.ceil(P),j=P-W,U=0;U<y;U++){var H=y>1?E*(p-1)+U*D:.5*(E+R)*(p-1);if(H<0||H>p-1)for(var Z=0;Z<d;Z++){var G=Z+U*_[2]+F*_[1]+I*_[0];b.values[G]=c}else for(var q=Math.floor(H),K=Math.ceil(H),X=H-q,Y=0;Y<d;Y++){var $=Y+q*S[2]+W*S[1]+O*S[0],Q=k[$],J=k[$=Y+K*S[2]+W*S[1]+O*S[0]],ee=k[$=Y+q*S[2]+V*S[1]+O*S[0]],te=Q+(J-Q)*X,ne=ee+(k[$=Y+K*S[2]+V*S[1]+O*S[0]]-ee)*X;$=Y+U*_[2]+F*_[1]+I*_[0],b.values[$]=te+(ne-te)*j}}else for(var re=0;re<y;++re){var ae=y>1?E*(p-1)+re*D:.5*(E+R)*(p-1);if(ae<0||ae>p-1)for(var ie=0;ie<d;ie++){var oe=ie+re*_[2]+F*_[1]+I*_[0];b.values[oe]=c}else for(var se=Math.round(ae),ue=Math.round(P),ce=0;ce<d;ce++){var le=ce+se*S[2]+ue*S[1]+O*S[0],fe=ce+re*_[2]+F*_[1]+I*_[0];b.values[fe]=k[le]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var Kme={kernelName:Dq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;dhe(a,"cumprod");var u=i8.getAxesPermutation([i],a.shape.length),c=a;null!=u&&(c=Bpe({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=i8.getInnerMostAxes(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var f=m$(c.dtype,"int32"),h=SY.makeOnesTypedArray(SY.sizeFromShape(c.shape),f),p=n.data.get(c.dataId).values,d=c.shape[c.shape.length-1],m=s?function(e,t){return e+d-t-1}:function(e,t){return e+t},v=0;v<p.length;v+=d)for(var g=0;g<d;g++){var y=m(v,g);if(0===g)h[y]=o?1:p[y];else{var b=m(v,g-1);h[y]=o?p[b]*h[b]:p[y]*h[b]}}var x=n.makeTensorInfo(c.shape,f,h);if(null!=u){var w=Bpe({inputs:{x:x},backend:n,attrs:{perm:i8.getUndoAxesPermutation(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),w}return x}};var Xme={kernelName:Fq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;dhe(a,"cumsum");var u=i8.getAxesPermutation([i],a.shape.length),c=a;null!=u&&(c=Bpe({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=i8.getInnerMostAxes(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var f=m$(c.dtype,"int32"),h=SY.makeZerosTypedArray(SY.sizeFromShape(c.shape),f),p=n.data.get(c.dataId).values,d=c.shape[c.shape.length-1],m=s?function(e,t){return e+d-t-1}:function(e,t){return e+t},v=0;v<p.length;v+=d)for(var g=0;g<d;g++){var y=m(v,g);if(0===g)h[y]=o?0:p[y];else{var b=m(v,g-1);h[y]=o?p[b]+h[b]:p[y]+h[b]}}var x=n.makeTensorInfo(c.shape,f,h);if(null!=u){var w=Bpe({inputs:{x:x},backend:n,attrs:{perm:i8.getUndoAxesPermutation(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),w}return x}};var Yme={kernelName:Lq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=Lhe(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}if(2===a.shape.length){var c=zhe(n.bufferSync(a),n.bufferSync(i),o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}};var $me={kernelName:zq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat;SY.assert("NHWC"===o,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(o)}));for(var s=a.shape[0],u=a.shape[1],c=a.shape[2],l=a.shape[3],f=u*i,h=c*i,p=l/(i*i),d=n.data.get(a.dataId).values,m=new Float32Array(s*f*h*p),v=0,g=0;g<s;++g)for(var y=0;y<f;++y)for(var b=Math.floor(y/i),x=y%i,w=0;w<h;++w)for(var k=Math.floor(w/i),S=(x*i+w%i)*p,_=0;_<p;++_){var T=_+S+l*(k+c*(b+u*g));m[v++]=d[T]}return n.makeTensorInfo([s,f,h,p],a.dtype,m)}};function Qme(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode;dhe([a,i],"depthwiseConv2DNative");var l=SY.computeStrides(a.shape),f=SY.computeStrides(i.shape),h=u;null==h&&(h=[1,1]),SY.assert(i8.eitherStridesOrDilationsAreOne(o,h),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(h,"'")}));for(var p=i8.computeConv2DInfo(a.shape,i.shape,o,h,s,c,!0),d=p.filterHeight,m=p.filterWidth,v=p.dilationHeight,g=p.dilationWidth,y=p.padInfo,b=y.left,x=y.top,w=p.outChannels/p.inChannels,k=new n$(p.outShape,a.dtype),S=n.data.get(a.dataId).values,_=n.data.get(i.dataId).values,T=k.values,I=0;I<p.batchSize;++I)for(var N=I*l[0],C=I*k.strides[0],E=0;E<p.outHeight;++E)for(var A=C+E*k.strides[1],R=E*p.strideHeight-x,O=0;O<d;++O){var M=R+O*v;if(!(M<0||M>=p.inHeight))for(var D=O*f[0],F=N+M*l[1],P=0;P<p.outWidth;++P)for(var L=A+P*k.strides[2],z=P*p.strideWidth-b,B=0;B<m;++B){var W=z+B*g;if(!(W<0||W>=p.inWidth))for(var V=D+B*f[1],j=F+W*p.inChannels,U=L,H=V,Z=0;Z<p.inChannels;++Z){for(var G=S[j+Z],q=0;q<w;++q)T[U+q]+=G*_[H+q];U+=w,H+=w}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}var Jme={kernelName:Bq,backendName:"cpu",kernelFunc:Qme};var eve={kernelName:Wq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape;dhe([a,i],"depthwiseConv2dNativeBackpropFilter");for(var f=i8.computeConv2DInfo(a.shape,l,o,s,u,c,!0),h=f.strideHeight,p=f.strideWidth,d=f.filterHeight,m=f.filterWidth,v=new n$(f.filterShape,"float32"),g=f.padInfo.left,y=f.padInfo.top,b=f.outChannels/f.inChannels,x=n.data.get(a.dataId).values,w=new n$(a.shape,a.dtype,x),k=n.data.get(i.dataId).values,S=new n$(i.shape,i.dtype,k),_=0;_<d;++_)for(var T=Math.max(0,Math.ceil((y-_)/h)),I=Math.min(f.outHeight,(f.inHeight+y-_)/h),N=0;N<m;++N)for(var C=Math.max(0,Math.ceil((g-N)/p)),E=Math.min(f.outWidth,(f.inWidth+g-N)/p),A=0;A<f.outChannels;++A){for(var R=Math.trunc(A/b),O=A%b,M=0,D=0;D<f.batchSize;++D)for(var F=T;F<I;++F)for(var P=_+F*h-y,L=C;L<E;++L){var z=N+L*p-g;M+=w.get(D,P,z,R)*S.get(D,F,L,A)}v.set(M,_,N,R,O)}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var tve={kernelName:Vq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.inputShape;dhe([a,i],"depthwiseConv2DNativeBackpropInput");for(var f=SY.computeStrides(a.shape),h=SY.computeStrides(i.shape),p=i8.computeConv2DInfo(l,i.shape,o,s,u,c,!0),d=new n$(p.inShape,"float32"),m=d.values,v=(0,T.Z)(d.strides,3),g=v[0],y=v[1],b=v[2],x=n.data.get(a.dataId).values,w=(0,T.Z)(f,3),k=w[0],S=w[1],_=w[2],I=n.data.get(i.dataId).values,N=(0,T.Z)(h,3),C=N[0],E=N[1],A=N[2],R=p.batchSize,O=p.filterHeight,M=p.filterWidth,D=p.inChannels,F=p.inHeight,P=p.inWidth,L=p.outChannels,z=p.outHeight,B=p.outWidth,W=p.strideHeight,V=p.strideWidth,j=O-1-p.padInfo.top,U=M-1-p.padInfo.left,H=L/D,Z=0;Z<R;++Z)for(var G=0;G<D;++G)for(var q=0;q<F;++q)for(var K=q-j,X=Math.max(0,Math.ceil(K/W)),Y=Math.min(z,(O+K)/W),$=0;$<P;++$){for(var Q=$-U,J=Math.max(0,Math.ceil(Q/V)),ee=Math.min(B,(M+Q)/V),te=0,ne=X;ne<Y;++ne)for(var re=ne*W-K,ae=J;ae<ee;++ae)for(var ie=k*Z+S*ne+_*ae,oe=C*(O-1-re)+E*(M-1-(ae*V-Q))+A*G,se=0;se<H;++se){te+=x[ie+(G*H+se)]*I[oe+se]}m[g*Z+y*q+b*$+G]=te}return n.makeTensorInfo(d.shape,d.dtype,d.values)}};var nve={kernelName:jq,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=SY.sizeFromShape(r.shape),i=n.data.get(r.dataId).values,o=eJ([a,a],r.dtype),s=o.values,u=0;u<i.length;u++)s[u*a+u]=i[u];var c=[].concat((0,I.Z)(r.shape),(0,I.Z)(r.shape));return n.makeTensorInfo(c,o.dtype,o.values)}},rve={kernelName:Uq,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=n,l=c.data.get(a.dataId).values,f=a.shape.length,h=c.data.get(i.dataId).values,p=i.shape.length,d=i8.computeDilation2DInfo(a.shape,i.shape,o,s,"NHWC",u),m=d.batchSize,v=d.inHeight,g=d.inWidth,y=d.inChannels,b=d.outHeight,x=d.outWidth,w=d.padInfo,k=d.strideHeight,S=d.strideWidth,_=d.filterHeight,T=d.filterWidth,I=d.dilationHeight,N=d.dilationWidth,C=d.outShape,E=SY.sizeFromShape(C),A=C.length,R=SY.getArrayFromDType(a.dtype,E),O=0;O<m;++O)for(var M=0;M<b;++M)for(var D=M*k-w.top,F=0;F<x;++F)for(var P=F*S-w.left,L=0;L<y;++L){for(var z=Number.MIN_SAFE_INTEGER,B=0;B<_;++B){var W=D+B*I;if(W>=0&&W<v)for(var V=0;V<T;++V){var j=P+V*N;if(j>=0&&j<g){var U=SY.locToIndex([O,W,j,L],f,SY.computeStrides(a.shape)),H=SY.locToIndex([B,V,L],p,SY.computeStrides(i.shape)),Z=l[U]+h[H];Z>z&&(z=Z)}}}R[SY.locToIndex([O,M,F,L],A,SY.computeStrides(C))]=z}return{dataId:c.write(SY.toTypedArray(R,a.dtype),C,a.dtype),shape:C,dtype:a.dtype}}},ave={kernelName:Zq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,f=SY.toNestedArray(a.shape,l.data.get(a.dataId).values),h=SY.toNestedArray(i.shape,l.data.get(i.dataId).values),p=i8.computeDilation2DInfo(a.shape,i.shape,s,u,"NHWC",c),d=p.batchSize,m=p.inHeight,v=p.inWidth,g=p.inChannels,y=p.outHeight,b=p.outWidth,x=p.padInfo,w=p.strideHeight,k=p.strideWidth,S=p.filterHeight,_=p.filterWidth,T=p.dilationHeight,I=p.dilationWidth,N=p.outShape;SY.assert(o.rank===N.length,(function(){return"Error in ".concat(Zq,", dy must have the same rank as output ").concat(N.length,", but got ").concat(o.rank)}));for(var C=SY.toNestedArray(N,l.data.get(o.dataId).values),E=SY.makeZerosNestedTypedArray(i.shape,i.dtype),A=0;A<d;++A)for(var R=0;R<y;++R)for(var O=R*w-x.top,M=0;M<b;++M)for(var D=M*k-x.left,F=0;F<g;++F){for(var P=Number.MIN_SAFE_INTEGER,L=0,z=0,B=0;B<S;++B){var W=O+B*T;if(W>=0&&W<m)for(var V=0;V<_;++V){var j=D+V*I;if(j>=0&&j<v){var U=f[A][W][j][F]+h[B][V][F];U>P&&(P=U,L=B,z=V)}}}E[L][z][F]+=C[A][R][M][F]}return{dataId:l.write(SY.toTypedArray(E,a.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},ive={kernelName:Hq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,f=SY.toNestedArray(a.shape,l.data.get(a.dataId).values),h=SY.toNestedArray(i.shape,l.data.get(i.dataId).values),p=i8.computeDilation2DInfo(a.shape,i.shape,s,u,"NHWC",c),d=p.batchSize,m=p.inHeight,v=p.inWidth,g=p.inChannels,y=p.outHeight,b=p.outWidth,x=p.padInfo,w=p.strideHeight,k=p.strideWidth,S=p.filterHeight,_=p.filterWidth,T=p.dilationHeight,I=p.dilationWidth,N=p.outShape;SY.assert(o.rank===N.length,(function(){return"Error in ".concat(Hq,", dy must have the same rank as output ").concat(N.length,", but got ").concat(o.rank)}));for(var C=SY.toNestedArray(N,l.data.get(o.dataId).values),E=SY.makeZerosNestedTypedArray(a.shape,a.dtype),A=0;A<d;++A)for(var R=0;R<y;++R)for(var O=R*w-x.top,M=0;M<b;++M)for(var D=M*k-x.left,F=0;F<g;++F){for(var P=Number.MIN_SAFE_INTEGER,L=O<0?0:O,z=D<0?0:D,B=0;B<S;++B){var W=O+B*T;if(W>=0&&W<m)for(var V=0;V<_;++V){var j=D+V*I;if(j>=0&&j<v){var U=f[A][W][j][F]+h[B][V][F];U>P&&(P=U,L=W,z=j)}}}E[A][L][z][F]+=C[A][R][M][F]}return{dataId:l.write(SY.toTypedArray(E,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};function ove(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims;dhe(i,"sum");var u=(t="bool"===i.dtype?Ehe({inputs:{x:i},backend:r,attrs:{dtype:"int32"}}):_he({inputs:{x:i},backend:r})).shape.length,c=SY.parseAxisParam(o,t.shape),l=i8.getAxesPermutation(c,u),f=c,h=t;null!=l&&(h=Bpe({inputs:{x:t},backend:r,attrs:{perm:l}}),f=i8.getInnerMostAxes(f.length,u)),i8.assertAxesAreInnerMostDims("sum",f,h.shape.length);for(var p=i8.computeOutAndReduceShapes(h.shape,f),d=(0,T.Z)(p,2),m=d[0],v=d[1],g=She(r,m,i8.upcastType(h.dtype,"int32")),y=SY.sizeFromShape(v),b=r.data.get(g.dataId).values,x=r.data.get(h.dataId).values,w=0;w<b.length;++w){for(var k=w*y,S=0,_=0;_<y;++_)S+=x[k+_];b[w]=S}if(s){var I=g;g=qde({inputs:{x:g},backend:r,attrs:{shape:i8.expandShapeToKeepDim(g.shape,c)}}),r.disposeIntermediateTensorInfo(I)}return r.disposeIntermediateTensorInfo(t),null!=l&&r.disposeIntermediateTensorInfo(h),g}var sve={kernelName:RX,backendName:"cpu",kernelFunc:ove};var uve={kernelName:qq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,a=t,i=i8.decodeEinsumEquation(r,a.length),o=i.allDims,s=i.summedDims,u=i.idDims;i8.checkEinsumDimSizes(o.length,u,a);for(var c=i8.getEinsumComputePath(s,u),l=c.path,f=c.steps,h=f.length,p=null,d=o.length,m=[],v=0;v<h;++v){var g,y=Oo(f[v]);try{for(y.s();!(g=y.n()).done;){var b=g.value,x=i8.getEinsumPermutation(d,u[b]),w=x.permutationIndices,k=x.expandDims,S=void 0;i8.isIdentityPermutation(w)?S=a[b]:(S=Bpe({inputs:{x:a[b]},backend:n,attrs:{perm:w}}),m.push(S));for(var _=S.shape.slice(),T=0;T<k.length;++T)_.splice(k[T],0,1);SY.arraysEqual(S.shape,_)||(S=qde({inputs:{x:S},backend:n,attrs:{shape:_}}),m.push(S)),null===p?p=S:(p=Rpe({inputs:{a:S,b:p},backend:n}),m.push(p))}}catch(cBe){y.e(cBe)}finally{y.f()}v<h-1&&(l[v]>=0&&(p=ove({inputs:{x:p},backend:n,attrs:{axis:l[v]-(o.length-d),keepDims:!1}}),m.push(p)),d--)}for(var I=0,N=m;I<N.length;I++){var C=N[I];C!==p&&n.disposeIntermediateTensorInfo(C)}return p}};var cve={kernelName:Xq,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;dhe([r,a],"eluGrad");for(var i=new Float32Array(SY.sizeFromShape(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<o.length;++u){var c=o[u];i[u]=c>=1?s[u]:s[u]*(c+1)}return n.makeTensorInfo(a.shape,"float32",i)}},lve=i8.ERF_P,fve=i8.ERF_A1,hve=i8.ERF_A2,pve=i8.ERF_A3,dve=i8.ERF_A4,mve=i8.ERF_A5,vve=Whe(Yq,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+lve*n);return t*(1-((((mve*r+dve)*r+pve)*r+hve)*r+fve)*r*Math.exp(-n*n))})),gve={kernelName:Yq,backendName:"cpu",kernelFunc:vve};function yve(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,i=r.dim,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(SY.assert(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+i+1),s.splice(u,0,1),qde({inputs:{x:a},backend:n,attrs:{shape:s}})}var bve={kernelName:Jq,backendName:"cpu",kernelFunc:yve},xve=xhe((function(e,t){return e/t})),wve=Rhe(Gq,xve),kve={kernelName:Gq,backendName:"cpu",kernelFunc:wve};function Sve(e,t,n){for(var r=e.shape,a=r[0],i=r[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,u=o.complexTensorInfos.imag,c=[a,i],l=SY.sizeFromShape(c),f=SY.getTypedArrayFromDType("float32",l),h=SY.getTypedArrayFromDType("float32",l),p=0;p<a;p++){for(var d=cde({inputs:{x:s},backend:n,attrs:{begin:[p,0],size:[1,i]}}),m=cde({inputs:{x:u},backend:n,attrs:{begin:[p,0],size:[1,i]}}),v=whe({inputs:{real:d,imag:m},backend:n}),g=_ve(v,t,n),y=g.real,b=g.imag,x=i8.mergeRealAndImagArrays(y,b),w=0;w<i;w++){var k=i8.getComplexWithIndex(x,w);f[p*i+w]=k.real,h[p*i+w]=k.imag}n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v)}var S=n.makeTensorInfo(c,"float32",f),_=n.makeTensorInfo(c,"float32",h),T=whe({inputs:{real:S,imag:_},backend:n});return n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(_),T}function _ve(e,t,n){var r=SY.sizeFromShape(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(function(e){return 0===(e&e-1)}(r)){var s=Tve(i,o,r,t,n),u=[e.shape[0],e.shape[1]];if(t){var c=n.makeTensorInfo(u,"float32",s.real),l=n.makeTensorInfo(u,"float32",s.imag),f=n.makeTensorInfo([],"float32",SY.createScalarValue(r,"float32")),h=_he({inputs:{x:f},backend:n}),p=kve.kernelFunc({inputs:{a:c,b:f},backend:n}),d=kve.kernelFunc({inputs:{a:l,b:h},backend:n}),m=n.data.get(p.dataId).values,v=n.data.get(d.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),{real:m,imag:v}}return s}var g=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var u=i8.exponent(a*s,t,n),c=i8.getComplexWithIndex(e,s);i+=c.real*u.real-c.imag*u.imag,o+=c.real*u.imag+c.imag*u.real}n&&(i/=t,o/=t),i8.assignToTypedArray(r,i,o,a)}return r}(i8.mergeRealAndImagArrays(i,o),r,t);return i8.splitRealAndImagArrays(g)}function Tve(e,t,n,r,a){if(1===n)return{real:e,imag:t};var i=i8.mergeRealAndImagArrays(e,t),o=n/2,s=i8.complexWithEvenIndex(i),u=s.real,c=s.imag,l=[u.length],f=a.makeTensorInfo(l,"float32",u),h=a.makeTensorInfo(l,"float32",c),p=whe({inputs:{real:f,imag:h},backend:a}),d=i8.complexWithOddIndex(i),m=d.real,v=d.imag,g=[m.length],y=a.makeTensorInfo(g,"float32",m),b=a.makeTensorInfo(g,"float32",v),x=whe({inputs:{real:y,imag:b},backend:a}),w=Tve(u,c,o,r,a),k=w.real,S=w.imag,_=[k.length],T=a.makeTensorInfo(_,"float32",k),I=a.makeTensorInfo(_,"float32",S),N=whe({inputs:{real:T,imag:I},backend:a}),C=Tve(m,v,o,r,a),E=C.real,A=C.imag,R=[E.length],O=a.makeTensorInfo(R,"float32",E),M=a.makeTensorInfo(R,"float32",A),D=whe({inputs:{real:O,imag:M},backend:a}),F=i8.exponents(n,r),P=[F.real.length],L=a.makeTensorInfo(P,"float32",F.real),z=a.makeTensorInfo(P,"float32",F.imag),B=whe({inputs:{real:L,imag:z},backend:a}),W=Rpe({inputs:{a:B,b:D},backend:a}),V=Fhe({inputs:{a:N,b:W},backend:a}),j=Cde({inputs:{a:N,b:W},backend:a}),U=Ihe({inputs:{input:V},backend:a}),H=Ihe({inputs:{input:j},backend:a}),Z=Ome({inputs:{input:V},backend:a}),G=Ome({inputs:{input:j},backend:a}),q=Dme({inputs:[U,H],backend:a,attrs:{axis:0}}),K=Dme({inputs:[Z,G],backend:a,attrs:{axis:0}}),X=a.data.get(q.dataId).values,Y=a.data.get(K.dataId).values;return a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(T),a.disposeIntermediateTensorInfo(I),a.disposeIntermediateTensorInfo(N),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(Z),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(K),{real:X,imag:Y}}var Ive={kernelName:tK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=SY.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],o=qde({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=Sve(o,!1,n),u=qde({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}};function Nve(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype||SY.inferDtype(a),o=SY.getArrayFromDType(i,SY.sizeFromShape(r));return function(e,t,n){e.fill(t)}(o,a),t.makeTensorInfo(r,i,o)}var Cve={kernelName:nK,backendName:"cpu",kernelFunc:Nve};var Eve={kernelName:rK,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,i=SY.getTypedArrayFromDType(r.dtype,SY.sizeFromShape(r.shape)),o=(0,T.Z)(r.shape,4),s=o[0],u=o[1],c=o[2],l=o[3],f=a.data.get(r.dataId).values,h=0;h<s;h++)for(var p=h*c*u*l,d=0;d<u;d++)for(var m=d*(c*l),v=0;v<c;v++)for(var g=v*l,y=0;y<l;y++){var b=Math.round(c-v-1),x=p+m+g+y,w=f[x];if(b>=0&&b<c)w=f[p+m+b*l+y];i[x]=w}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},Ave=xhe((function(e,t){return Math.floor(e/t)})),Rve=Rhe(iK,Ave,null,"int32"),Ove={kernelName:iK,backendName:"cpu",kernelFunc:Rve};var Mve={kernelName:uY,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,f=r.dilations,h=r.dimRoundingMode,p=r.activation,d=r.leakyreluAlpha,m=Pme({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:f,dimRoundingMode:h}});if(o){var v=m;if("NCHW"===l&&1===o.shape.length&&1!==o.shape[0]){var g=qde({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=Fhe({inputs:{a:m,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else m=Fhe({inputs:{a:m,b:o},backend:n});n.disposeIntermediateTensorInfo(v)}if(p){var y=m;if("NCHW"===l&&"prelu"===p&&1===s.shape.length&&1!==s.shape[0]){var b=qde({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=Gde(n,m,p,b,d),n.disposeIntermediateTensorInfo(b)}else m=Gde(n,m,p,s,d);n.disposeIntermediateTensorInfo(y)}return m}};var Dve={kernelName:cY,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,f=r.dilations,h=r.dimRoundingMode,p=r.activation,d=r.leakyreluAlpha,m=Qme({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:f,dimRoundingMode:h}});if(o){var v=m;m=Fhe({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(p){var g=m;m=Gde(n,m,p,s,d),n.disposeIntermediateTensorInfo(g)}return m}};var Fve={kernelName:uK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=SY.sizeFromShape(r.shape),o=a.shape,s=o[o.length-1],u=i8.prepareAndValidate(r,a),c=(0,T.Z)(u,4),l=c[0],f=c[1],h=c[2],p=c[3];if(0===f)return n.makeTensorInfo(l,r.dtype,[]);var d=ape(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,f,s,h,p,r.shape,i);return n.makeTensorInfo(l,r.dtype,d.values)}};var Pve={kernelName:sK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims;dhe([a,i],"gatherV2");for(var u=SY.parseAxisParam(o,a.shape)[0],c=n.data.get(i.dataId).values,l=a.shape[u],f=function(e){var t=c[e];SY.assert(t<=l-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(l-1,"]")}))},h=0;h<c.length;++h)f(h);var p=s;null==s&&(p=0);var d=SY.sizeFromShape(i.shape),m=i8.segment_util.collectGatherOpShapeInfo(a,i,u,p),v=qde({inputs:{x:a},backend:n,attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]}}),g=qde({inputs:{x:i},backend:n,attrs:{shape:[m.batchSize,d/m.batchSize]}}),y=[m.batchSize,m.outerSize,d/m.batchSize,m.sliceSize],b=n.bufferSync(g),x=ipe(n.bufferSync(v),b,y);return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(m.outputShape,x.dtype,x.values)}};var Lve={kernelName:hK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=SY.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],o=qde({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=Sve(o,!0,n),u=qde({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}},zve=Whe(dK,(function(e){return Number.isFinite(e)?1:0}),"bool"),Bve={kernelName:dK,backendName:"cpu",kernelFunc:zve},Wve=Whe(mK,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),Vve={kernelName:mK,backendName:"cpu",kernelFunc:Wve},jve=Whe(vK,(function(e){return Number.isNaN(e)?1:0}),"bool"),Uve={kernelName:vK,backendName:"cpu",kernelFunc:jve};var Hve={kernelName:xK,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=ype(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},Zve=Whe(kK,(function(e){return Math.log1p(e)})),Gve={kernelName:kK,backendName:"cpu",kernelFunc:Zve},qve=xhe((function(e,t){return e&&t})),Kve=Rhe(SK,qve,null,"bool"),Xve={kernelName:SK,backendName:"cpu",kernelFunc:Kve},Yve=Whe(_K,(function(e){return e?0:1}),"bool"),$ve={kernelName:_K,backendName:"cpu",kernelFunc:Yve},Qve=xhe((function(e,t){return e||t})),Jve=Rhe(TK,Qve,null,"bool"),ege={kernelName:TK,backendName:"cpu",kernelFunc:Jve};var tge={kernelName:EK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta;dhe(a,"LRN");var c=a.shape[3],l=c-1,f=n.data.get(a.dataId).values,h=SY.sizeFromShape(a.shape),p=new Float32Array(h);function d(e){for(var t=e%c,n=e-t+Math.max(0,t-i),r=e-t+Math.min(t+i,l),a=0;n<=r;n++){var o=f[n];a+=o*o}return a}for(var m=0;m<h;m++){var v=d(m),g=f[m]*Math.pow(o+s*v,-u);p[m]=g}return n.makeTensorInfo(a.shape,a.dtype,p)}};var nge={kernelName:AK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta;dhe(o,"LRNGrad");for(var f=SY.sizeFromShape(o.shape),h=o.shape[3],p=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,m=n.data.get(i.dataId).values,v=new Float32Array(f),g=f,y=0;y<g;y++){for(var b=y%h,x=y-b+Math.max(0,b-s),w=y-b+Math.min(h,b+s+1),k=0,S=x;S<w;S++)k+=Math.pow(d[S],2);k=c*k+u;for(var _=x;_<w;_++){var T=-2*c*l*d[_]*m[y]/k;y===_&&(T+=Math.pow(k,-l)),T*=p[y],v[_]+=T}}return n.makeTensorInfo(o.shape,a.dtype,v)}};function rge(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=n,u=a.shape,c=u.length,l=SY.parseAxisParam(i,u),f=l,h=i8.getAxesPermutation(f,c),p=s.data.get(a.dataId).values;if(null!=h){for(var d=new Array(c),m=0;m<d.length;m++)d[m]=u[h[m]];p=zpe(p,u,a.dtype,h,d),f=i8.getInnerMostAxes(f.length,c),u=d}dhe(a,"max"),i8.assertAxesAreInnerMostDims("max",f,c);var v=i8.computeOutAndReduceShapes(u,f),g=(0,T.Z)(v,2),y=g[0],b=g[1],x=kpe(p,SY.sizeFromShape(b),y,a.dtype),w=s.write(x,y,a.dtype),k=y;return o&&(k=i8.expandShapeToKeepDim(y,l)),{dataId:w,shape:k,dtype:a.dtype}}var age={kernelName:RK,backendName:"cpu",kernelFunc:rge};var ige={kernelName:MK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;dhe(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;SY.assert(i8.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(1,"'")}));var c,l=i8.computePool2DInfo(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&SY.arraysEqual(l.inShape,l.outShape))c=_he({inputs:{x:a},backend:n});else{var f=n.data.get(a.dataId).values,h=SY.computeStrides(a.shape),p=yme(f,a.shape,a.dtype,h,l,"max");c=n.makeTensorInfo(l.outShape,a.dtype,p.values)}return c}};var oge={kernelName:FK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;dhe(a,"maxPool3d");var l=i8.computePool3DInfo(a.shape,i,o,1,s,u,c),f=xme(n.data.get(a.dataId).values,a.shape,a.dtype,SY.computeStrides(a.shape),l,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}};var sge={kernelName:PK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;dhe([a,i],"maxPool3DGrad");for(var l=i8.computePool3DInfo(i.shape,o,s,1,u,c),f=function(e,t){for(var n=eJ(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=t.padInfo.front,p=t.padInfo.top,d=t.padInfo.left,m=0;m<t.batchSize;++m)for(var v=0;v<t.inChannels;++v)for(var g=0;g<t.outDepth;++g){for(var y=g*r-h,b=y;b<0;)b+=o;for(var x=Math.min(t.inDepth,c+y),w=0;w<t.outHeight;++w){for(var k=w*a-p,S=k;S<0;)S+=s;for(var _=Math.min(t.inHeight,l+k),T=0;T<t.outWidth;++T){for(var I=T*i-d,N=I;N<0;)N+=u;for(var C=Math.min(t.inWidth,f+I),E=Number.NEGATIVE_INFINITY,A=-1,R=b;R<x;R+=o)for(var O=R-y,M=S;M<_;M+=s)for(var D=M-k,F=N;F<C;F+=u){var P=F-I,L=e.get(m,R,M,F,v);L>=E&&(E=L,A=O*l*f+D*l+P)}n.set(A,m,g,w,T,v)}}}return n}(n.bufferSync(i),l),h=l.strideDepth,p=l.strideHeight,d=l.strideWidth,m=l.dilationDepth,v=l.dilationHeight,g=l.dilationWidth,y=l.effectiveFilterDepth,b=l.effectiveFilterHeight,x=l.effectiveFilterWidth,w=y-1-l.padInfo.front,k=x-1-l.padInfo.left,S=b-1-l.padInfo.top,_=eJ(i.shape,"float32"),T=n.bufferSync(a),I=0;I<l.batchSize;++I)for(var N=0;N<l.inChannels;++N)for(var C=0;C<l.inDepth;++C)for(var E=0;E<l.inHeight;++E)for(var A=0;A<l.inWidth;++A){for(var R=C-w,O=E-S,M=A-k,D=0,F=0;F<y;F+=m){var P=(R+F)/h;if(!(P<0||P>=l.outDepth||Math.floor(P)!==P))for(var L=0;L<b;L+=v){var z=(O+L)/p;if(!(z<0||z>=l.outHeight||Math.floor(z)!==z))for(var B=0;B<x;B+=g){var W=(M+B)/d;if(!(W<0||W>=l.outWidth||Math.floor(W)!==W)){var V=y*b*x-1-f.get(I,P,z,W,N)===F*b*x+L*x+B?1:0;0!==V&&(D+=T.get(I,P,z,W,N)*V)}}}}_.set(D,I,C,E,A,N)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}};var uge={kernelName:DK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;dhe([i,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,f=i8.computePool2DInfo(o.shape,s,u,1,c,l),h=n.data.get(o.dataId).values,p=eJ(f.outShape,o.dtype,bme(h,o.shape,o.dtype,f).values),d=f.strideHeight,m=f.strideWidth,v=f.dilationHeight,g=f.dilationWidth,y=f.effectiveFilterHeight,b=f.effectiveFilterWidth,x=b-1-f.padInfo.left,w=y-1-f.padInfo.top,k=eJ(o.shape,"float32"),S=n.data.get(a.dataId).values,_=eJ(a.shape,"float32",S),T=0;T<f.batchSize;++T)for(var I=0;I<f.inChannels;++I)for(var N=0;N<f.inHeight;++N)for(var C=0;C<f.inWidth;++C){for(var E=N-w,A=C-x,R=0,O=0;O<y;O+=v){var M=(E+O)/d;if(!(M<0||M>=f.outHeight||Math.floor(M)!==M))for(var D=0;D<b;D+=g){var F=(A+D)/m;if(!(F<0||F>=f.outWidth||Math.floor(F)!==F)){var P=y*b-1-p.get(T,M,F,I)===O*b+D?1:0;0!==P&&(R+=_.get(T,M,F,I)*P)}}}k.set(R,T,N,C,I)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var cge={kernelName:LK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;dhe(a,"MaxPoolWithArgmax");var l=c.data.get(a.dataId).values,f=i8.computePool2DInfo(a.shape,i,o,[1,1],s),h=function(e,t,n,r,a){var i=yme(e,0,n,SY.computeStrides(t),a,"max"),o=bme(e,t,n,a,!0,r);return[i.values,o.values]}(l,a.shape,a.dtype,u,f),p=(0,T.Z)(h,2),d=p[0],m=p[1],v=c.write(d,f.outShape,a.dtype),g=c.write(m,f.outShape,a.dtype);return[{dataId:v,shape:f.outShape,dtype:a.dtype},{dataId:g,shape:f.outShape,dtype:"int32"}]}};var lge={kernelName:zK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=SY.parseAxisParam(i,a.shape),u=i8.computeOutAndReduceShapes(a.shape,s)[1],c=SY.sizeFromShape(u),l=[],f=n.makeTensorInfo([],"float32",new Float32Array([c]));l.push(f);var h=Ehe({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});l.push(h);var p=wve({inputs:{a:h,b:f},backend:n});l.push(p);var d=ove({inputs:{x:p},backend:n,attrs:{axis:i,keepDims:o}});return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),d}};var fge={kernelName:BK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;dhe(a,"min");var s=SY.parseAxisParam(i,a.shape),u=s,c=i8.getAxesPermutation(u,a.shape.length),l=a;null!=c&&(l=Bpe({inputs:{x:a},backend:n,attrs:{perm:c}}),u=i8.getInnerMostAxes(u.length,a.shape.length)),i8.assertAxesAreInnerMostDims("min",u,l.shape.length);for(var f=i8.computeOutAndReduceShapes(l.shape,u),h=(0,T.Z)(f,2),p=h[0],d=h[1],m=SY.sizeFromShape(d),v=SY.makeZerosTypedArray(SY.sizeFromShape(p),l.dtype),g=n.data.get(l.dataId).values,y=0;y<v.length;++y){for(var b=y*m,x=g[b],w=0;w<m;++w){var k=g[b+w];(Number.isNaN(k)||k<x)&&(x=k)}v[y]=x}null!=c&&n.disposeIntermediateTensorInfo(l);var S=n.makeTensorInfo(p,l.dtype,v);if(o){var _=qde({inputs:{x:S},backend:n,attrs:{shape:i8.expandShapeToKeepDim(p,s)}});return n.disposeIntermediateTensorInfo(S),_}return S}};var hge={kernelName:VK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode;dhe(a,"mirrorPad");for(var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),c=i.map((function(e,t){return e[0]+a.shape[t]})),l="reflect"===o?0:1,f=n.data.get(a.dataId).values,h=a.shape.length,p=SY.computeStrides(a.shape),d=SY.sizeFromShape(s),m=s.length,v=SY.computeStrides(s),g=SY.getTypedArrayFromDType(a.dtype,d),y=0;y<d;y++){for(var b=SY.indexToLoc(y,m,v),x=0;x<m;x++)b[x]<u[x]?b[x]=2*u[x]-b[x]-l:b[x]>=c[x]&&(b[x]=2*(c[x]-1)-b[x]+l);b=b.map((function(e,t){return e-u[t]}));var w=SY.locToIndex(b,h,p);g[y]=f[w]}return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},pge=xhe((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),dge=Rhe(jK,pge),mge={kernelName:jK,backendName:"cpu",kernelFunc:dge},vge=SZ(FZ());function gge(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=a.shape.length,s=i;if(-1===s&&(s=o-1),s!==o-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(o," and dim was ").concat(s));var u=SY.parseAxisParam([s],a.shape),c=rge({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),l=i8.expandShapeToKeepDim(c.shape,u),f=qde({inputs:{x:c},backend:n,attrs:{shape:l}}),h=Cde({inputs:{a:a,b:f},backend:n}),p=Yhe({inputs:{x:h},backend:n}),d=ove({inputs:{x:p},backend:n,attrs:{axis:u,keepDims:!1}}),m=qde({inputs:{x:d},backend:n,attrs:{shape:l}}),v=wve({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),v}var yge={kernelName:DX,backendName:"cpu",kernelFunc:gge};var bge={kernelName:UK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized;dhe(a,"multinomial");for(var u=s?a:gge({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=u.shape[0],l=u.shape[1],f=n.data.get(u.dataId).values,h=[c,i],p=SY.makeZerosTypedArray(SY.sizeFromShape(h),"int32"),d=0;d<c;++d){var m=d*l,v=new Float32Array(l-1);v[0]=f[m];for(var g=1;g<v.length;++g)v[g]=v[g-1]+f[m+g];for(var y=vge.alea(o.toString()),b=d*i,x=0;x<i;++x){var w=y();p[b+x]=v.length;for(var k=0;k<v.length;k++)if(w<v[k]){p[b+x]=k;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(h,"int32",p)}},xge=c7.nonMaxSuppressionV3Impl;var wge={kernelName:qK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;dhe(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,f=xge(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}},kge=c7.nonMaxSuppressionV4Impl;var Sge={kernelName:KK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize;dhe(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,h=kge(l,f,o,s,u,c),p=h.selectedIndices,d=h.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}},_ge=c7.nonMaxSuppressionV5Impl;var Tge={kernelName:XK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma;dhe(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,h=_ge(l,f,o,s,u,c),p=h.selectedIndices,d=h.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([d.length],"float32",new Float32Array(d))]}};var Ige={kernelName:$K,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.dtype,o=r.depth,s=r.onValue,u=r.offValue;dhe(a,"oneHot");var c=SY.sizeFromShape(a.shape),l=new Float32Array(c*o);l.fill(u);for(var f=n.data.get(a.dataId).values,h=0;h<c;++h)f[h]>=0&&f[h]<o&&(l[h*o+f[h]]=s);return n.makeTensorInfo([].concat((0,I.Z)(a.shape),[o]),i,l)}};function Nge(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=Ihe({inputs:{input:r},backend:n}),i=Nge({inputs:{x:a},backend:n}),o=Ome({inputs:{input:r},backend:n}),s=Nge({inputs:{x:o},backend:n}),u=whe({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return Nve({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var Cge={kernelName:rY,backendName:"cpu",kernelFunc:Nge};var Ege={kernelName:YK,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=Ihe({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=Ome({inputs:{input:a},backend:r}),u=Nge({inputs:{x:s},backend:r}),c=whe({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return Nve({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function Age(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return yve({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){SY.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),SY.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=Dme({inputs:t.map((function(e){var t=yve({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}var Rge={kernelName:QK,backendName:"cpu",kernelFunc:Age};var Oge={kernelName:JK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;dhe(a,"pad");var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),c=n.data.get(a.dataId).values,l=SY.sizeFromShape(a.shape),f=a.shape.length,h=SY.computeStrides(a.shape),p=SY.sizeFromShape(s),d=s.length,m=SY.computeStrides(s),v=SY.getTypedArrayFromDType(a.dtype,p);0!==o&&v.fill(o);for(var g=0;g<l;g++){var y=SY.indexToLoc(g,f,h).map((function(e,t){return e+u[t]}));v[SY.locToIndex(y,d,m)]=c[g]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}},Mge=xhe((function(e,t){return Math.pow(e,t)})),Dge=Rhe(tX,Mge),Fge={kernelName:tX,backendName:"cpu",kernelFunc:Dge};var Pge={kernelName:aX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.paramsNestedSplits,i=t.paramsDenseValues,o=t.indices,s=(r.outputRaggedRank,a.map((function(e){return n.data.get(e.dataId).values}))),u=a.map((function(e){return e.shape})),c=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,f=Gpe(s,u,c,i.shape,i.dtype,l,o.shape),h=(0,T.Z)(f,3),p=h[0],d=h[1],m=h[2],v=p.map((function(e){return n.makeTensorInfo([e.length],"int32",e)})),g=n.makeTensorInfo(m,i.dtype,d);return v.concat([g])}};var Lge={kernelName:iX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.starts,a=t.limits,i=t.deltas,o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=Kpe(o,r.shape,r.dtype,s,a.shape,u,i.shape),l=(0,T.Z)(c,2),f=l[0],h=l[1];return[n.makeTensorInfo([f.length],"int32",f),n.makeTensorInfo([h.length],r.dtype,h)]}};var zge={kernelName:oX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.shape,i=t.values,o=t.defaultValue,s=t.rowPartitionTensors,u=r.rowPartitionTypes,c=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,f=n.data.get(o.dataId).values,h=s.map((function(e){return n.data.get(e.dataId).values})),p=s.map((function(e){return e.shape})),d=Jpe(c,a.shape,l,i.shape,i.dtype,f,o.shape,h,p,u),m=(0,T.Z)(d,2),v=m[0],g=m[1];return n.makeTensorInfo(v,i.dtype,g)}};var Bge={kernelName:sX,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=ede(r,a,n.step,i);return t.makeTensorInfo([o.length],i,o)}},Wge=Whe(cX,(function(e){return 1/e})),Vge={kernelName:cX,backendName:"cpu",kernelFunc:Wge};var jge={kernelName:dX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;dhe(a,"resizeBilinear");for(var u=SY.computeStrides(a.shape),c=(0,T.Z)(s,2),l=c[0],f=c[1],h=(0,T.Z)(a.shape,4),p=h[0],d=h[1],m=h[2],v=h[3],g=n.data.get(a.dataId).values,y=new Float32Array(SY.sizeFromShape([p,l,f,v])),b=[i&&l>1?d-1:d,i&&f>1?m-1:m],x=[i&&l>1?l-1:l,i&&f>1?f-1:f],w=0,k=b[0]/x[0],S=b[1]/x[1],_=0;_<p;_++)for(var I=0;I<l;I++){var N=void 0;N=o?k*(I+.5)-.5:k*I;for(var C=Math.max(0,Math.floor(N)),E=N-C,A=Math.min(d-1,Math.ceil(N)),R=_*u[0]+C*u[1],O=_*u[0]+A*u[1],M=0;M<f;M++){var D=void 0;D=o?S*(M+.5)-.5:S*M;for(var F=Math.max(0,Math.floor(D)),P=D-F,L=Math.min(m-1,Math.ceil(D)),z=R+F*u[2],B=O+F*u[2],W=R+L*u[2],V=O+L*u[2],j=0;j<v;j++){var U=g[z+j],H=g[B+j],Z=U+(g[W+j]-U)*P,G=Z+(H+(g[V+j]-H)*P-Z)*E;y[w++]=G}}}return n.makeTensorInfo([p,l,f,v],"float32",y)}};var Uge={kernelName:mX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;dhe([i,a],"resizeBilinearGrad");for(var s=SY.computeStrides(a.shape),u=(0,T.Z)(a.shape,4),c=u[0],l=u[1],f=u[2],h=u[3],p=(0,T.Z)(i.shape,3),d=p[1],m=p[2],v=new Float32Array(c*l*f*h),g=[o&&d>1?l-1:l,o&&m>1?f-1:f],y=[o&&d>1?d-1:d,o&&m>1?m-1:m],b=g[0]/y[0],x=g[1]/y[1],w=n.data.get(i.dataId).values,k=0,S=0;S<c;S++)for(var _=S*s[0],I=0;I<d;I++)for(var N=I*b,C=Math.floor(N),E=Math.min(Math.ceil(N),l-1),A=_+C*s[1],R=_+E*s[1],O=N-C,M=1-O,D=0;D<m;D++)for(var F=D*x,P=Math.floor(F),L=Math.min(Math.ceil(F),f-1),z=F-P,B=1-z,W=A+P*s[2],V=A+L*s[2],j=R+P*s[2],U=R+L*s[2],H=M*B,Z=M*z,G=O*B,q=O*z,K=0;K<h;K++){var X=w[k++];v[W+K]+=X*H,v[V+K]+=X*Z,v[j+K]+=X*G,v[U+K]+=X*q}return n.makeTensorInfo([c,f,l,h],"float32",v)}};var Hge={kernelName:hX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;dhe(a,"resizeNearestNeighbor");for(var u=SY.computeStrides(a.shape),c=(0,T.Z)(s,2),l=c[0],f=c[1],h=(0,T.Z)(a.shape,4),p=h[0],d=h[1],m=h[2],v=h[3],g=n.data.get(a.dataId).values,y=new Float32Array(p*l*f*v),b=[i&&l>1?d-1:d,i&&f>1?m-1:m],x=[i&&l>1?l-1:l,i&&f>1?f-1:f],w=b[0]/x[0],k=b[1]/x[1],S=0,_=0;_<p;_++)for(var I=_*u[0],N=0;N<l;N++){var C=o?w*(N+.5):w*N,E=Math.min(d-1,i?Math.round(C):Math.floor(C));o&&(E=Math.max(0,E));for(var A=I+E*u[1],R=0;R<f;R++){var O=o?k*(R+.5):k*R,M=Math.min(m-1,i?Math.round(O):Math.floor(O));o&&(M=Math.max(0,M));for(var D=A+M*u[2],F=0;F<v;F++){var P=g[D+F];y[S++]=P}}}return n.makeTensorInfo([p,l,f,v],a.dtype,y)}};var Zge={kernelName:pX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;dhe([i,a],"resizeNearestNeighborGrad");for(var s=SY.computeStrides(a.shape),u=SY.computeStrides(i.shape),c=(0,T.Z)(a.shape,4),l=c[0],f=c[1],h=c[2],p=c[3],d=(0,T.Z)(i.shape,3),m=d[1],v=d[2],g=new Float32Array(l*f*h*p),y=n.data.get(i.dataId).values,b=[o&&m>1?f-1:f,o&&v>1?h-1:h],x=[o&&m>1?m-1:m,o&&v>1?v-1:v],w=b[0]/x[0],k=b[1]/x[1],S=1/w,_=1/k,I=2*Math.ceil(S)+2,N=2*Math.ceil(_)+2,C=0;C<l;C++)for(var E=C*s[0],A=0;A<f;A++)for(var R=E+A*s[1],O=Math.floor(A*S),M=Math.floor(O-I/2),D=0;D<h;D++)for(var F=R+D*s[2],P=Math.floor(D*_),L=Math.floor(P-N/2),z=0;z<p;z++){for(var B=0,W=0;W<I;W++){var V=W+M;if(!(V<0||V>=m)){var j=E+V*u[1],U=V*w;if(A===Math.min(f-1,o?Math.round(U):Math.floor(U)))for(var H=0;H<N;H++){var Z=H+L;if(!(Z<0||Z>=v)){var G=j+Z*u[2],q=Z*k;D===Math.min(h-1,o?Math.round(q):Math.floor(q))&&(B+=y[G+z])}}}}g[F+z]=B}return n.makeTensorInfo(a.shape,a.dtype,g)}};var Gge={kernelName:gX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims;dhe(a,"reverse");var o=a.shape.length,s=SY.parseAxisParam(i,a.shape);if(0===o)return _he({inputs:{x:a},backend:n});for(var u=new n$(a.shape,a.dtype),c=n.bufferSync(a),l=function(e){var t=u.indexToLoc(e),n=t.slice();s.forEach((function(e){return n[e]=a.shape[e]-1-n[e]})),u.set.apply(u,[c.get.apply(c,(0,I.Z)(n))].concat((0,I.Z)(t)))},f=0;f<u.size;f++)l(f);return n.makeTensorInfo(u.shape,u.dtype,u.values)}},qge={kernelName:oY,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,c=SY.getTypedArrayFromDType(a.dtype,SY.sizeFromShape(a.shape)),l=(0,T.Z)(a.shape,4),f=l[0],h=l[1],p=l[2],d=l[3],m=i8.getImageCenter(s,h,p),v=(0,T.Z)(m,2),g=v[0],y=v[1],b=Math.sin(i),x=Math.cos(i),w=u.data.get(a.dataId).values,k=0;k<f;k++)for(var S=k*p*h*d,_=0;_<h;_++)for(var I=_*(p*d),N=0;N<p;N++)for(var C=N*d,E=0;E<d;E++){var A=[f,_,N,E],R=A[2],O=A[1],M=(R-g)*x-(O-y)*b,D=(R-g)*b+(O-y)*x;M=Math.round(M+g),D=Math.round(D+y);var F=o;if("number"!=typeof o&&(F=3===E?255:o[E]),M>=0&&M<p&&D>=0&&D<h)F=w[S+D*(p*d)+M*d+E];c[S+I+C+E]=F}return{dataId:u.write(c,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},Kge=Whe(yX,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),Xge={kernelName:yX,backendName:"cpu",kernelFunc:Kge};var Yge={kernelName:xX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=i8.calculateShapes(i,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,f=s.strides,h=s.outputSize,p=ade(n.bufferSync(a),n.bufferSync(i),o,h,l,c,u,f,0,!0);return n.makeTensorInfo(o,p.dtype,p.values)}};function $ge(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<t?n=a+1:r=a;return r}function Qge(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<=t?n=a+1:r=a;return r}var Jge={kernelName:wX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=function(e,t,n,r,a,i){for(var o=SY.getArrayFromDType("int32",n*a),s=0;s<n;++s)for(var u=e.slice(s*r,(s+1)*r),c=s*a,l=0;l<a;++l)o[c+l]="left"===i?$ge(u,t[l+c]):Qge(u,t[l+c]);return o}(n.data.get(a.dataId).values,n.data.get(i.dataId).values,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",s)}};var eye={kernelName:kX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e;dhe([r,a,i],"select");for(var o=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=m$(a.dtype,i.dtype),f=SY.makeZerosTypedArray(SY.sizeFromShape(a.shape),l),h=0,p=0===o||o>1||1===a.shape.length?1:SY.sizeFromShape(a.shape.slice(1)),d=0;d<s.length;d++)for(var m=0;m<p;m++)1===s[d]?f[h++]=u[d]:f[h++]=c[d];return n.makeTensorInfo(a.shape,l,f)}},tye=i8.SELU_SCALEALPHA,nye=i8.SELU_SCALE,rye=Whe(SX,(function(e){return e>=0?nye*e:tye*(Math.exp(e)-1)})),aye={kernelName:SX,backendName:"cpu",kernelFunc:rye},iye=Whe(NX,(function(e){return e<0?-1:e>0?1:0})),oye={kernelName:NX,backendName:"cpu",kernelFunc:iye},sye=Whe(TX,(function(e){return Math.sin(e)})),uye={kernelName:TX,backendName:"cpu",kernelFunc:sye},cye=Whe(IX,(function(e){return Math.sinh(e)})),lye={kernelName:IX,backendName:"cpu",kernelFunc:cye},fye=Math.log(1.1920928955078125e-7)+2,hye=Whe(EX,(function(e){var t=e>-fye,n=e<fye,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),pye={kernelName:EX,backendName:"cpu",kernelFunc:hye};var dye={kernelName:OX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;dhe([a],"spaceToBatchND");var s=SY.sizeFromShape(i),u=[[0,0]];u.push.apply(u,(0,I.Z)(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=Oge.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),f=i8.getReshaped(l.shape,i,s,!1),h=i8.getPermuted(f.length,i.length,!1),p=i8.getReshapedPermuted(l.shape,i,s,!1),d=qde({inputs:{x:l},backend:n,attrs:{shape:f}}),m=Bpe({inputs:{x:d},backend:n,attrs:{perm:h}}),v=qde({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),v}};var mye={kernelName:FX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],f=fde(s,r.shape,r.dtype,u,a.dtype,c,l),h=(0,T.Z)(f,5),p=h[0],d=h[1],m=h[2],v=h[3],g=h[4];return[n.makeTensorInfo(d,r.dtype,p),n.makeTensorInfo([d[0]],a.dtype,m),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};var vye={kernelName:PX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,u=Array.from(n.data.get(i.dataId).values),c=hde(s,r.shape,r.dtype,o,u),l=(0,T.Z)(c,3),f=l[0],h=l[1],p=l[2];return[n.makeTensorInfo(h,r.dtype,f),n.makeTensorInfo([p.length],i.dtype,new Int32Array(p))]}};var gye={kernelName:LX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=pde(o,r.shape,r.dtype,s,u,!0),l=(0,T.Z)(c,2),f=l[0],h=l[1];return n.makeTensorInfo(h,r.dtype,f)}};var yye={kernelName:zX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=pde(o,r.shape,r.dtype,s,u),l=(0,T.Z)(c,2),f=l[0],h=l[1];return n.makeTensorInfo(h,r.dtype,f)}};var bye={kernelName:BX,backendName:"cpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.sparseIndices,o=n.sparseValues,s=n.defaultValue,u=a.outputShape,c=i8.calculateShapes(o,i,u),l=c.sliceRank,f=c.numUpdates,h=c.sliceSize,p=c.strides,d=c.outputSize,m=!1,v=r.bufferSync(i);switch(o.dtype){case"bool":t=ade(v,r.bufferSync(o),u,d,h,f,l,p,Boolean(r.data.get(s.dataId).values[0]),m);break;case"float32":t=ade(v,r.bufferSync(o),u,d,h,f,l,p,r.data.get(s.dataId).values[0],m);break;case"int32":t=ade(v,r.bufferSync(o),u,d,h,f,l,p,r.data.get(s.dataId).values[0],m);break;case"string":t=ade(v,r.bufferSync(o),u,d,h,f,l,p,SY.decodeString(r.data.get(s.dataId).values[0]),m);break;default:throw new Error("Unsupported type ".concat(o.dtype))}return r.makeTensorInfo(u,t.dtype,t.values)}};var xye={kernelName:MX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=r.axis,s=SY.parseAxisParam(o,a.shape)[0],u=i8.prepareSplitSize(a,i,s),c=new Array(a.shape.length).fill(0),l=a.shape.slice();return u.map((function(e){var t=(0,I.Z)(l);t[s]=e;var r=cde({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[s]+=e,r}))}},wye={kernelName:VX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;dhe(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];o[s]=u*u}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},kye=Whe(aY,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),Sye={kernelName:aY,backendName:"cpu",kernelFunc:kye};var _ye={kernelName:jX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.end,s=r.strides,u=r.beginMask,c=r.endMask,l=r.ellipsisMask,f=r.newAxisMask,h=r.shrinkAxisMask;dhe(a,"stridedSlice");var p,d=S0.sliceInfo(a.shape,i,o,s,u,c,l,f,h),m=d.finalShapeSparse,v=d.finalShape,g=d.isIdentity,y=d.sliceDim0,b=d.isSimpleSlice,x=d.begin,w=d.end,k=d.strides;if(g)p=qde({inputs:{x:a},backend:n,attrs:{shape:v}});else if(y||b){SY.assert(a.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)}));var S=S0.computeOutShape(x,w,k),_=cde({inputs:{x:a},backend:n,attrs:{begin:x,size:S}});p=qde({inputs:{x:_},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(_)}else{var T=xde(m,n.bufferSync(a),k,x);p=n.makeTensorInfo(v,T.dtype,T.values)}return p}};var Tye={kernelName:UX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,f=t.dataSplits,h=kde(n.data.get(l.dataId).values,n.data.get(f.dataId).values,a,i,o,s,u,c),p=(0,T.Z)(h,2),d=p[0],m=p[1];return[n.makeTensorInfo([d.length],"string",d),n.makeTensorInfo(f.shape,"int32",m)]}};var Iye={kernelName:HX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=_de(n.data.get(a.dataId).values,n.data.get(i.dataId).values[0],r),s=(0,T.Z)(o,3),u=s[0],c=s[1],l=s[2],f=c.length;return[n.makeTensorInfo([f,2],"int32",u),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(l))]}};var Nye={kernelName:ZX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=Tde(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",i)}},Cye=Whe(qX,(function(e){return Math.tan(e)})),Eye={kernelName:qX,backendName:"cpu",kernelFunc:Cye},Aye=Whe(KX,(function(e){return Math.tanh(e)}));var Rye={kernelName:XX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;dhe(a,"tile");var o=Ade(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}};var Oye={kernelName:YX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted;dhe(a,"topk");var s=Mde(n.data.get(a.dataId).values,a.shape,a.dtype,i,o),u=(0,T.Z)(s,2),c=u[0],l=u[1];return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}};var Mye={kernelName:$X,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=t.transforms,o=n.interpolation,s=n.fillMode,u=n.fillValue,c=n.outputShape,l=(0,T.Z)(a.shape,4),f=l[0],h=l[1],p=l[2],d=l[3],m=null!=c?c:[h,p],v=(0,T.Z)(m,2),g=v[0],y=v[1],b=[f,g,y,d],x=SY.computeStrides(a.shape),w=x[0],k=x[1],S=x[2],_=SY.computeStrides(b),I=_[0],N=_[1],C=_[2],E=SY.getTypedArrayFromDType(a.dtype,SY.sizeFromShape(b));E.fill(u);for(var A=r.data.get(a.dataId).values,R=r.data.get(i.dataId).values,O=0;O<f;++O){for(var M=1===i.shape[0]?R:R.subarray(8*O,8*O+8),D=0;D<g;++D)for(var F=0;F<y;++F)for(var P=0;P<d;++P){var L=void 0,z=M[6]*F+M[7]*D+1;if(0!==z){var B=(M[0]*F+M[1]*D+M[2])/z,W=(M[3]*F+M[4]*D+M[5])/z,V=Dye(B,p,s),j=Dye(W,h,s);switch(o){case"nearest":L=Pye(A,h,p,w,k,S,O,j,V,P,u);break;case"bilinear":L=Lye(A,h,p,w,k,S,O,j,V,P,u);break;default:throw new Error("Error in Transform: Expect 'nearest' or 'bilinear', but got ".concat(o))}E[O*I+D*N+F*C+P]=L}}return r.makeTensorInfo(b,a.dtype,E)}return{dataId:r.write(E,b,a.dtype),shape:a.shape,dtype:a.dtype}}};function Dye(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return SY.clamp(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return SY.clamp(0,n,t-1)}(e,t);case"nearest":return function(e,t){return SY.clamp(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function Fye(e,t,n,r,a,i,o,s,u,c,l){return 0<=s&&s<t&&0<=u&&u<n?e[o*r+s*a+u*i+c]:l}function Pye(e,t,n,r,a,i,o,s,u,c,l){return Fye(e,t,n,r,a,i,o,Math.round(s),Math.round(u),c,l)}function Lye(e,t,n,r,a,i,o,s,u,c,l){var f=Math.floor(s),h=Math.floor(u),p=f+1,d=h+1;return(p-s)*((d-u)*Fye(e,t,n,r,a,i,o,f,h,c,l)+(u-h)*Fye(e,t,n,r,a,i,o,f,d,c,l))+(s-f)*((d-u)*Fye(e,t,n,r,a,i,o,p,h,c,l)+(u-h)*Fye(e,t,n,r,a,i,o,p,d,c,l))}var zye={kernelName:JX,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;dhe(i,"unique");var o=Dde(r.data.get(i.dataId).values,a,i.shape,i.dtype),s=o.outputValues,u=o.outputShape,c=o.indices;return[r.makeTensorInfo(u,i.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}};var Bye={kernelName:eY,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,s=a.shape[i],u=new Array(o-1),c=0,l=0;l<o;l++)l!==i&&(u[c++]=a.shape[l]);var f=new Array(o).fill(0),h=a.shape.slice();h[i]=1;for(var p=new Array(s),d=0;d<p.length;d++){f[i]=d;var m=cde({inputs:{x:a},backend:n,attrs:{begin:f,size:h}});p[d]=qde({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return p}};for(var Wye={kernelName:tY,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments;dhe(a,"unsortedSegmentSum");for(var s=[],u=[],c=a.shape.length-i.shape.length,l=i,f=0;f<c;++f){var h=yve({inputs:{input:l},backend:n,attrs:{dim:f+1}});l=h,u.push(h)}for(var p=0;p<o;++p){var d=SY.createScalarValue(p,"int32"),m=n.makeTensorInfo([],"int32",d),v=qhe({inputs:{a:m,b:l},backend:n}),g=Ehe({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),y=Rpe({inputs:{a:g,b:a},backend:n}),b=ove({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(m),u.push(v),u.push(g),u.push(y),u.push(b)}var x=Age({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},Vye=0,jye=[$de,bhe,Jde,tme,Phe,nme,rme,ame,ime,ome,ume,lme,hme,mme,gme,wme,kme,Sme,_me,Yde,Tme,Ime,Nme,Cme,Ahe,Hhe,Ame,khe,Rme,Fme,Lme,zme,Bme,Wme,Vme,jme,Hme,Gme,qme,Kme,Xme,Yme,$me,Jme,eve,tve,nve,rve,ave,ive,uve,Pde,cve,Khe,gve,$he,bve,epe,Ive,Cve,Eve,rpe,Ove,Mve,Dve,Fve,Pve,upe,fpe,The,Lve,Mme,Bve,Vve,Uve,zde,dpe,gpe,Hve,wpe,Gve,Xve,$ve,ege,tge,nge,age,Tpe,ige,oge,sge,uge,cge,lge,fge,Cpe,hge,mge,bge,Ope,Dpe,wge,Sge,Tge,Lpe,Ige,Ege,Rge,Oge,Fge,Vde,jpe,Pge,Lge,zge,Bge,Nhe,kve,Vge,Ude,Zde,Kde,jge,Uge,Hge,Zge,Gge,qge,Xge,rde,Yge,Jge,eye,aye,sde,oye,uye,lye,lde,yge,pye,dye,mye,vye,gye,yye,bye,xye,vde,wye,bde,Sye,_ye,Tye,Iye,Nye,Ede,sve,Eye,{kernelName:KX,backendName:"cpu",kernelFunc:Aye},Rye,Oye,Mye,Wpe,zye,Bye,Wye,Cge];Vye<jye.length;Vye++){gY(jye[Vye])}var Uye={};kZ(Uye,{assertNotComplex:function(){return Ybe},bindCanvasToFramebuffer:function(){return Ibe},bindColorTextureToFramebuffer:function(){return Nbe},bindTextureToProgramUniformSampler:function(){return Tbe},bindTextureUnit:function(){return wbe},bindVertexBufferToProgramAttribute:function(){return xbe},callAndCheck:function(){return tbe},canBeRepresented:function(){return nbe},createFragmentShader:function(){return obe},createFramebuffer:function(){return bbe},createProgram:function(){return fbe},createStaticIndexBuffer:function(){return mbe},createStaticVertexBuffer:function(){return dbe},createTexture:function(){return gbe},createVertexShader:function(){return ibe},getBatchDim:function(){return Mbe},getExtensionOrThrow:function(){return abe},getFramebufferErrorMessage:function(){return Abe},getMaxTexturesInShader:function(){return jbe},getNumChannels:function(){return vbe},getProgramUniformLocation:function(){return _be},getProgramUniformLocationOrThrow:function(){return Sbe},getRowsCols:function(){return Dbe},getShapeAs3D:function(){return Fbe},getTextureShapeFromLogicalShape:function(){return Pbe},getWebGLDisjointQueryTimerVersion:function(){return Ube},getWebGLErrorMessage:function(){return rbe},getWebGLMaxTextureSize:function(){return Bbe},hasExtension:function(){return Hbe},isCapableOfRenderingToFloatTexture:function(){return Gbe},isDownloadFloatTextureEnabled:function(){return qbe},isReshapeFree:function(){return zbe},isWebGLFenceEnabled:function(){return Xbe},isWebGLVersionEnabled:function(){return Zbe},linkProgram:function(){return hbe},logShaderSourceAndInfoLog:function(){return lbe},resetMaxTextureSize:function(){return Wbe},resetMaxTexturesInShader:function(){return Vbe},unbindColorTextureFromFramebuffer:function(){return Cbe},unbindTextureUnit:function(){return kbe},validateFramebuffer:function(){return Ebe},validateProgram:function(){return pbe},validateTextureSize:function(){return ybe}});var Hye,Zye,Gye,qye={},Kye={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Xye(e,t){qye[e]=t}function Yye(e,t){if(!(e in qye)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;return n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete qye[e]}),!1),GG().getBool("SOFTWARE_WEBGL_ENABLED")&&(Kye.failIfMajorPerformanceCaveat=!1),1===e?n.getContext("webgl",Kye)||n.getContext("experimental-webgl",Kye):n.getContext("webgl2",Kye)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;qye[e]=n}var r=qye[e];return null==r||r.isContextLost()?(delete qye[e],Yye(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),qye[e])}function $ye(e,t){return[t,e]}function Qye(e){var t=SY.sizeFromShape(e),n=Math.ceil(t/4);return SY.sizeToSquarishShape(n)}function Jye(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function ebe(e,t){var n,r,a,i,o,s,u,c,l,f,h=e;return 2===GG().getNumber("WEBGL_VERSION")?(n=h.R32F,r=h.R16F,a=h.RGBA16F,i=h.RGBA32F,o=h.RED,u=4,c=1,l=h.HALF_FLOAT,f=h.FLOAT,s=h.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=h.RGBA,o=e.RGBA,u=4,c=4,l=null!=t?t.HALF_FLOAT_OES:null,f=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:f}}function tbe(e,t){var n=t();return GG().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+rbe(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(Hye||(Hye={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(Zye||(Zye={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Gye||(Gye={}));function nbe(e){return!!(GG().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function rbe(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}function abe(e,t){return Rbe(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function ibe(e,t){var n=Rbe(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(tbe(e,(function(){return e.shaderSource(n,t)})),tbe(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function obe(e,t){var n=Rbe(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(tbe(e,(function(){return e.shaderSource(n,t)})),tbe(e,(function(){return e.compileShader(n)})),GG().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw lbe(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var sbe,ube,cbe=/ERROR: [0-9]+:([0-9]+):/g;function lbe(e,t){var n=cbe.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return SY.rightPad((t+1).toString(),i)+e})),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var c=o.slice(0,r-1),l=o.slice(r-1,r),f=o.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(SY.rightPad(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}function fbe(e){return Rbe(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function hbe(e,t){if(tbe(e,(function(){return e.linkProgram(t)})),!GG().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function pbe(e,t){if(tbe(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function dbe(e,t){var n=Rbe(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return tbe(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),tbe(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}function mbe(e,t){var n=Rbe(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return tbe(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),tbe(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}function vbe(){return 2===GG().getNumber("WEBGL_VERSION")?1:4}function gbe(e){return Rbe(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function ybe(e,t){var n=GG().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+i+".")}}function bbe(e){return Rbe(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function xbe(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(tbe(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),tbe(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),tbe(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function wbe(e,t,n){Obe(e,n),tbe(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),tbe(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}function kbe(e,t){Obe(e,t),tbe(e,(function(){return e.activeTexture(e.TEXTURE0+t)})),tbe(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function Sbe(e,t,n){return Rbe(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function _be(e,t,n){return e.getUniformLocation(t,n)}function Tbe(e,t,n,r){tbe(e,(function(){return wbe(e,t,r)})),tbe(e,(function(){return e.uniform1i(n,r)}))}function Ibe(e){tbe(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),tbe(e,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),tbe(e,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))}function Nbe(e,t,n){tbe(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),tbe(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function Cbe(e,t){tbe(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),tbe(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Ebe(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Abe(e,t))}function Abe(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}function Rbe(e,t,n){var r=tbe(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function Obe(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function Mbe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return SY.sizeFromShape(e.slice(0,e.length-t))}function Dbe(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Fbe(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[Mbe(e)].concat((0,I.Z)(Dbe(e)))),t}function Pbe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=GG().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=GG().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&GG().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,e=e.map((function(t,n){return n>=e.length-2?SY.nearestLargerEven(e[n]):e[n]})),1===e.length&&(e=[2,e[0]])),2!==e.length&&(e=SY.squeezeShape(e).newShape);var a=SY.sizeFromShape(e),i=null;e.length<=1&&a<=n?i=[1,a]:2===e.length&&e[0]<=n&&e[1]<=n?i=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?i=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?i=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?i=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(i=[e[0],e[1]*e[2]*e[3]]);var o=null!=i&&Math.max.apply(Math,(0,I.Z)(i))>r&&Math.min.apply(Math,(0,I.Z)(i))<=(t?2:1)&&Math.min.apply(Math,(0,I.Z)(i))>0;if(null==i||o)if(t){var s,u,c=Mbe(e),l=2,f=2;e.length&&(s=Dbe(e),l=(u=(0,T.Z)(s,2))[0],f=u[1]),a=c*(l/2)*(f/2),i=SY.sizeToSquarishShape(a).map((function(e){return 2*e}))}else i=SY.sizeToSquarishShape(a);return i}function Lbe(e){return e%2===0}function zbe(e,t){if(e=e.slice(-2),t=t.slice(-2),SY.arraysEqual(e,t)||!e.length||!t.length||0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r||Lbe(n)&&Lbe(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Lbe(e[0])&&Lbe(t[0])}function Bbe(e){if(null==sbe){var t=Yye(e);sbe=t.getParameter(t.MAX_TEXTURE_SIZE)}return sbe}function Wbe(){sbe=null}function Vbe(){ube=null}function jbe(e){if(null==ube){var t=Yye(e);ube=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ube)}function Ube(e){if(0===e)return 0;var t=Yye(e);return Hbe(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Hbe(t,"EXT_disjoint_timer_query")?1:0}function Hbe(e,t){return null!=e.getExtension(t)}function Zbe(e){try{if(null!=Yye(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function Gbe(e){if(0===e)return!1;var t=Yye(e);if(1===e){if(!Hbe(t,"OES_texture_float"))return!1}else if(!Hbe(t,"EXT_color_buffer_float"))return!1;return Kbe(t)}function qbe(e){if(0===e)return!1;var t=Yye(e);if(1!==e){if(Hbe(t,"EXT_color_buffer_float"))return Kbe(t);var n="EXT_color_buffer_half_float";if(Hbe(t,n)){var r=t.getExtension(n);return function(e,t){var n=ebe(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,r)}return!1}return!(!Hbe(t,"OES_texture_float")||!Hbe(t,"WEBGL_color_buffer_float"))&&Kbe(t)}function Kbe(e){var t=ebe(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function Xbe(e){return 2===e&&null!=Yye(e).fenceSync}function Ybe(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&SY.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the WebGL backend.")}))}))}var $be=GG();function Qbe(){var e,t,n,r,a,i,o,s,u,c;return 2===GG().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s=GG().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function Jbe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=SY.computeStrides(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function exe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=SY.computeStrides(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function txe(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}function nxe(e){var t=SY.computeStrides(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}$be.registerFlag("HAS_WEBGL",(function(){return $be.getNumber("WEBGL_VERSION")>0})),$be.registerFlag("WEBGL_VERSION",(function(){return Zbe(2)?2:Zbe(1)?1:0})),$be.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),$be.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===$be.get("WEBGL_VERSION")})),$be.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),$be.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),$be.registerFlag("WEBGL_PACK",(function(){return $be.getBool("HAS_WEBGL")})),$be.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return $be.getBool("WEBGL_PACK")})),$be.registerFlag("WEBGL_PACK_CLIP",(function(){return $be.getBool("WEBGL_PACK")})),$be.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return $be.getBool("WEBGL_PACK")})),$be.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return $be.getBool("WEBGL_PACK")})),$be.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return $be.getBool("WEBGL_PACK")})),$be.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return $be.getBool("WEBGL_PACK")})),$be.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return $be.getBool("WEBGL_PACK")})),$be.registerFlag("WEBGL_PACK_REDUCE",(function(){return $be.getBool("WEBGL_PACK")})),$be.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return $be.getBool("WEBGL_PACK")})),$be.registerFlag("WEBGL_CONV_IM2COL",(function(){return $be.getBool("WEBGL_PACK")})),$be.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return Bbe($be.getNumber("WEBGL_VERSION"))})),$be.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return jbe($be.getNumber("WEBGL_VERSION"))})),$be.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=$be.getNumber("WEBGL_VERSION");return 0===e?0:Ube(e)})),$be.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return $be.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!A$.isMobile()})),$be.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return Gbe($be.getNumber("WEBGL_VERSION"))})),$be.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!$be.getBool("WEBGL_FORCE_F16_TEXTURES")&&$be.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),$be.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return qbe($be.getNumber("WEBGL_VERSION"))})),$be.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return Xbe($be.getNumber("WEBGL_VERSION"))})),$be.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return $be.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),$be.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ".concat(e,"."))})),$be.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return A$.isMobile()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ".concat(e,"."))})),$be.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),$be.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),$be.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),$be.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128})),$be.registerFlag("WEBGL_EXP_CONV",(function(){return!1})),$be.registerFlag("SOFTWARE_WEBGL_ENABLED",(function(){return $be.getBool("IS_TEST")})),$be.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(function(){return 1/0})),$be.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(function(){return!1})),$be.registerFlag("WEBGL2_ISNAN_CUSTOM",(function(){return!1}));var rxe="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",axe=i8.getBroadcastDims;function ixe(e,t,n){var r=[];if(e.forEach((function(e){var t=SY.sizeFromShape(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(_xe(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,i,o=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?sxe(e,r):oxe(e,r);var i=e.shapeInfo.logicalShape,o=t.logicalShape;return i.length<=o.length&&(a+=n?wxe(e,t):kxe(e,t)),a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,c=Qbe(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(c),f=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(uxe,"\n    ").concat(cxe,"\n    ").concat(lxe,"\n  ")}(c);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===r[0]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    "):1===r[1]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    "):n?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(SY.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);return n?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),o=i,s="",u="b, r, c",c=2;c<e.length-1;c++)o*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(o,";\n      index -= b").concat(c," * ").concat(o,";\n    ")+s,u="b".concat(c,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(c)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){return 1===t[0]?n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    "):1===t[1]?n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    "):n?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){return SY.arraysEqual(e,t)?n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    "):1===e[1]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    "):1===e[0]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    "):n?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(exe(["r","c","d"],e),"\n    return ivec3(r, c, d);\n  }\n");var r=Jbe(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(exe(["r","c","d","d2"],e),"\n      return ivec4(r, c, d, d2);\n    }\n  ");var r=Jbe(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=Jbe(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=Jbe(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(c)),n.packedInputs&&(f+=fxe),[f,l,i,o,a,s,n.userCode].join("\n")}function oxe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return pxe(e,t);case 1:return dxe(e,t);case 2:return mxe(e,t);case 3:return vxe(e,t);case 4:return gxe(e,t);case 5:return yxe(e);case 6:return bxe(e);default:throw new Error("".concat(n.length,"-D input sampling is not yet supported"))}}function sxe(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Qbe();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=Qbe();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");var o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],u=Qbe();if(null!=i&&SY.arraysEqual(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],l=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(l,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var s=[1,2],u=Txe(e,n.slice(1)),c=["b","row","col"];return"\n        ".concat(sxe(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(Ixe(c,s),");\n        }\n      ")}var l=Qbe();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");var f=o[0],h=o[1],p=Math.ceil(n[2]/2),d=p*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(f,", ").concat(h,", ").concat(d,", ").concat(p,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Qbe();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var i=e.shapeInfo.logicalShape,o=i.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=u[0],l=u[1],f=Math.ceil(i[o-1]/2),h=f*Math.ceil(i[o-2]/2),p="int b, int row, int col",d="b * ".concat(h," + (row / 2) * ").concat(f," + (col / 2)"),m=2;m<o-1;m++)p="int b".concat(m,", ")+p,h*=i[o-m-1],d="b".concat(m," * ").concat(h," + ")+d;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(d,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var uxe="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",cxe="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",lxe="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",fxe="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function hxe(e){return"offset".concat(e)}function pxe(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=(0,T.Z)(e.shapeInfo.texShape,2),i=a[0],o=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=hxe(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var u=(0,T.Z)(e.shapeInfo.texShape,2),c=u[0],l=u[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(c,", ").concat(l,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function dxe(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(xxe(e),"\n      }\n    ");var a=e.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=hxe(n);return 1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function mxe(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&SY.arraysEqual(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var o=i[0],s=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=SY.squeezeShape(n),c=u.newShape,l=u.keptDims,f=c;if(f.length<n.length){o=Txe(e,f),s=["row","col"];return"\n      ".concat(oxe(o,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(Ixe(s,l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(xxe(e),"\n      }\n    ");var h=i[0],p=i[1],d=hxe(r);return 1===p?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(h,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===h?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(p,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(d,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(d,";\n    vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function vxe(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],s=SY.squeezeShape(n),u=s.newShape,c=s.keptDims,l=u;if(l.length<n.length){var f=Txe(e,l);return"\n        ".concat(oxe(f,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(Ixe(["row","col","depth"],c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(xxe(e),"\n      }\n    ");var h=e.shapeInfo.texShape,p=h[0],d=h[1],m=e.shapeInfo.flatOffset;if(d===i&&null==m)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(d,".0, ").concat(p,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(d===o&&null==m)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(d,".0, ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var v=hxe(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(v,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(p,", ").concat(d,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function gxe(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,u=SY.squeezeShape(n),c=u.newShape,l=u.keptDims;if(c.length<n.length){var f=Txe(e,c);return"\n      ".concat(oxe(f,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(Ixe(["row","col","depth","depth2"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(xxe(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,d=p[0],m=p[1],v="int stride2 = ".concat(r,"Shape[3];"),g="int stride1 = ".concat(r,"Shape[2] * stride2;"),y="int stride0 = ".concat(r,"Shape[1] * stride1;");if(m===s&&null==h)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(v,"\n        ").concat(g,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(d,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(m===i&&null==h)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(d,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var b=hxe(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(v,"\n      ").concat(g,"\n      ").concat(y,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(d,", ").concat(m,", index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function yxe(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,u=SY.squeezeShape(t),c=u.newShape,l=u.keptDims;if(c.length<t.length){var f=Txe(e,c);return"\n      ".concat(oxe(f),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(Ixe(["row","col","depth","depth2","depth3"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(o,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(xxe(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,d=p[0],m=p[1];if(m===s&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(d,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===a&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(d,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var v=hxe(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(v,";\n      vec2 uv = uvFromFlat(").concat(d,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function bxe(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=SY.squeezeShape(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var s=Txe(e,i);return"\n      ".concat(oxe(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(Ixe(["row","col","depth","depth2","depth3","depth4"],o),");\n      }\n    ")}var u=t[5],c=t[4]*u,l=t[3]*c,f=t[2]*l,h=t[1]*f;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(h,", ").concat(f,", ").concat(l,", ").concat(c,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(u,", 1)));\n        ").concat(xxe(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,m=d[0],v=d[1];if(v===h&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(f,", ").concat(l,", ").concat(c,", ").concat(u,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===u&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=hxe(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(h," + col * ").concat(f," + depth * ").concat(l," +\n          depth2 * ").concat(c," + depth3 * ").concat(u," + depth4 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function xxe(e){var t=e.name,n=SY.sizeFromShape(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function wxe(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=axe(e.shapeInfo.logicalShape,t.logicalShape),c=Sxe(s),l=s-o,f=["x","y","z","w","u","v"];n=0===o?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(f[e+l]," = 0;")})).join("\n");var h="";h=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+l])})).join(", ");var p="return outputValue;",d=1===SY.sizeFromShape(e.shapeInfo.logicalShape),m=1===SY.sizeFromShape(t.logicalShape);if(1!==o||d||m){if(d&&!m)p=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var v=o-2,g=o-1;u.indexOf(v)>-1&&u.indexOf(g)>-1?p="return vec4(outputValue.x);":u.indexOf(v)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(h,");\n      ").concat(p,"\n    }\n  ")}function kxe(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&SY.arraysEqual(o,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var c,l=Sxe(u),f=axe(e.shapeInfo.logicalShape,t.logicalShape),h=u-s,p=["x","y","z","w","u","v"];c=0===s?"":u<2&&f.length>=1?"coords = 0;":f.map((function(e){return"coords.".concat(p[e+h]," = 0;")})).join("\n");var d="";return d=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(p[t+h])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(r,"(").concat(d,");\n    }\n  ")}function Sxe(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function _xe(e,t,n){var r=SY.squeezeShape(t),a=r.newShape,i=r.keptDims,o=t.length,s=e&&3===o&&1===t[0],u=s?t.slice(1):a,c=!e&&o>1&&!SY.arraysEqual(t,n)&&a.length<o||s;return{useSqueezeShape:c,uniformShape:c?u:t,keptDims:i}}function Txe(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Ixe(e,t){return t.map((function(t){return e[t]})).join(", ")}function Nxe(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=ixe(a,o,t),u=obe(e.gl,s),c=e.createProgram(u);return GG().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o},Cxe(e,t,c))}function Cxe(e,t,n){var r,a,i,o,s={},u={},c={},l=[],f=null;o=e.getUniformLocation(n,"NAN",!1),1===GG().getNumber("WEBGL_VERSION")&&(f=e.getUniformLocation(n,"INFINITY",!1));for(var h=!1,p=0;p<t.variableNames.length;p++){var d=t.variableNames[p];s[d]=e.getUniformLocation(n,d,h),s["offset".concat(d)]=e.getUniformLocation(n,"offset".concat(d),h),t.enableShapeUniforms&&(u["".concat(d,"Shape")]=e.getUniformLocation(n,"".concat(d,"Shape"),h),c["".concat(d,"TexShape")]=e.getUniformLocation(n,"".concat(d,"TexShape"),h))}return t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",h),i=e.getUniformLocation(n,"outShapeStrides",h),a=e.getUniformLocation(n,"outTexShape",h)),t.customUniforms&&t.customUniforms.forEach((function(t,r){l[r]=e.getUniformLocation(n,t.name,h)})),{uniformLocations:s,customUniformLocations:l,infLoc:f,nanLoc:o,inShapesLocations:u,inTexShapesLocations:c,outShapeLocation:r,outShapeStridesLocation:i,outTexShapeLocation:a}}function Exe(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but was executed with ").concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!SY.arraysEqual(r,i))throw Error("Binary was compiled with different shapes than the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!SY.arraysEqual(o,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape ".concat(o," and ").concat(s," must match"))}}))}function Axe(e,t,n,r,a){t.program.enableShapeUniforms||(Exe(t.inShapeInfos,n),Exe([t.outShapeInfo],[r]));var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),1===GG().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],i=t.uniformLocations[a],o=t.uniformLocations["offset".concat(a)],s=t.inShapesLocations["".concat(a,"Shape")],u=t.inTexShapesLocations["".concat(a,"TexShape")];if(s){var c=_xe(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(c.length){case 1:e.gl.uniform1iv(s,new Int32Array(c));break;case 2:e.gl.uniform2iv(s,new Int32Array(c));break;case 3:e.gl.uniform3iv(s,new Int32Array(c));break;case 4:e.gl.uniform4iv(s,new Int32Array(c))}}if(u&&e.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=i){if(n.isUniform){if(SY.sizeFromShape(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var l=n.uniformValues;l instanceof Float32Array||(l=new Float32Array(l)),e.gl.uniform1fv(i,l)}return}null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,i,r)}}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var u=SY.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var i=t.customUniformLocations[r],o=a[r];if("float"===n.type)e.gl.uniform1fv(i,o);else if("vec2"===n.type)e.gl.uniform2fv(i,o);else if("vec3"===n.type)e.gl.uniform3fv(i,o);else if("vec4"===n.type)e.gl.uniform4fv(i,o);else if("int"===n.type)e.gl.uniform1iv(i,o);else if("ivec2"===n.type)e.gl.uniform2iv(i,o);else if("ivec3"===n.type)e.gl.uniform3iv(i,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(i,o)}})),e.executeProgram()}function Rxe(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var i=t.texData.texShape,o=_xe(e.packedInputs,t.shape,i),s=o.useSqueezeShape,u=o.uniformShape,c=o.keptDims,l="",f="",h="";if(1===u.length&&e.packedInputs){var p=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];l="".concat(p[0]>1,"_").concat(p[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var d=SY.computeStrides(u);h="".concat(d[0]===i[1],"_").concat(d[d.length-1]===i[1])}}else f="".concat(u[0]>1,"_").concat(u[1]>1);var m=t.shape.length,v=2===u.length&&SY.arraysEqual(t.shape,i),g=1===SY.sizeFromShape(t.shape),y=i8.getBroadcastDims(t.shape,n.shape),b=!e.packedInputs&&m===n.shape.length&&SY.arraysEqual(i,n.texData.texShape),x=e.packedInputs||u.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(m,"_").concat(b,"_").concat(s?c:"","_").concat(u.length,"_").concat(g,"_").concat(y,"_").concat(v,"_").concat(l,"_").concat(f,"_").concat(h,"_").concat(x,"_").concat(a)}else{var w=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(w,"_").concat(a)}}));var a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a+"".concat(GG().getNumber("WEBGL_VERSION"))}function Oxe(e){return GG().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var Mxe=(0,C.Z)((function e(t){N(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Hye.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=Qbe();this.outputShape=t,this.enableShapeUniforms=Oxe(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?exe(["r","c","d"],t):Jbe(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),Dxe=(0,C.Z)((function e(t){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Hye.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=Qbe();this.outputShape=t,this.enableShapeUniforms=Oxe(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?exe(["r","c","d"],t):Jbe(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),Fxe=(0,C.Z)((function e(t){N(this,e),this.variableNames=["A"],this.outTexUsage=Zye.DOWNLOAD;var n=Qbe();this.outputShape=t,this.userCode="\n      ".concat(rxe,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),Pxe=(0,C.Z)((function e(t){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Zye.DOWNLOAD;var n=Qbe();this.outputShape=t,this.userCode="\n      ".concat(rxe,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),Lxe={R:0,G:1,B:2,A:3},zxe=(0,C.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";N(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var a=Qbe();this.outputShape=t,this.enableShapeUniforms=Oxe(this.outputShape.length);var i="result";n&&(i="floor(result * 255. + 0.5)");for(var o="",s=0;s<r.length;s++){var u=r[s];o+="\n          if(offset == ".concat(s,") {\n            result = values[").concat(Lxe[u],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":nxe(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(r.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(r.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(a.texture2D,"(A, uv);\n          ").concat(o,"\n        }\n        ").concat(a.output," = vec4(").concat(i,", 0., 0., 0.);\n      }\n    ")})),Bxe=(0,C.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];N(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=Qbe();this.outputShape=t,this.enableShapeUniforms=Oxe(this.outputShape.length);var a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var s=0;s<=1;s++){var u=2*o+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":nxe(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(i,";\n        }\n    ")})),Wxe={};function Vxe(e){var t=Qbe();return ibe(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function jxe(e){return dbe(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Uxe(e){return mbe(e,new Uint16Array([0,1,2,2,1,3]))}function Hxe(e,t,n,r,a,i){ybe(t,n);var o=gbe(e),s=e.TEXTURE_2D;return tbe(e,(function(){return e.bindTexture(s,o)})),tbe(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),tbe(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),tbe(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),tbe(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===GG().getNumber("WEBGL_VERSION")?tbe(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})):tbe(e,(function(){return e.texStorage2D(s,1,r,t,n)})),tbe(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:o,texShape:[n,t]}}function Zxe(e){return e.internalFormatFloat}function Gxe(e,t,n,r){var a=$ye(t,n),i=(0,T.Z)(a,2);return Hxe(e,i[0],i[1],Zxe(r),r.textureFormatFloat,e.FLOAT)}function qxe(e){return e.internalFormatHalfFloat}function Kxe(e,t,n,r){var a=$ye(t,n),i=(0,T.Z)(a,2);return Hxe(e,i[0],i[1],qxe(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function Xxe(e){return e.downloadTextureFormat}function Yxe(e,t,n,r){var a=$ye(t,n),i=(0,T.Z)(a,2);return Hxe(e,i[0],i[1],Xxe(r),e.RGBA,e.UNSIGNED_BYTE)}function $xe(e){return e.internalFormatPackedFloat}function Qxe(e,t,n,r){var a=Jye(t,n),i=(0,T.Z)(a,2);return Hxe(e,i[0],i[1],$xe(r),e.RGBA,e.FLOAT)}function Jxe(e){return e.internalFormatPackedHalfFloat}function ewe(e,t,n,r){var a=Jye(t,n),i=(0,T.Z)(a,2);return Hxe(e,i[0],i[1],Jxe(r),e.RGBA,r.textureTypeHalfFloat)}function twe(e,t,n){return tbe(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),xbe(e,t,"clipSpacePos",n,3,20,0)&&xbe(e,t,"uv",n,2,20,12)}function nwe(e,t,n,r,a,i){var o,s,u;tbe(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,u=i.internalFormatPackedFloat),o.set(a),2===GG().getNumber("WEBGL_VERSION")?tbe(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,o)})):tbe(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,o)})),tbe(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function rwe(e,t,n){tbe(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===GG().getNumber("WEBGL_VERSION")?tbe(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):tbe(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===GG().getNumber("WEBGL_VERSION")?tbe(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):tbe(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),tbe(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function awe(e,t,n,r){var a=e.createBuffer();tbe(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return tbe(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),tbe(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),tbe(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}function iwe(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function owe(e,t,n,r){var a=$ye(t,n),i=(0,T.Z)(a,2),o=i[0],s=i[1],u=new Uint8Array(function(e,t){return e*t}(t*n,4));return tbe(e,(function(){return e.readPixels(0,0,o,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}function swe(e,t,n,r,a,i,o,s){var u=e,c=new Float32Array(function(e,t){var n=Jye(e,t),r=(0,T.Z)(n,2);return r[0]*r[1]*4}(i,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function uwe(e,t,n){var r=new Float32Array(t*n*4);return tbe(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}kZ(Wxe,{bindVertexProgramAttributeStreams:function(){return twe},createBufferFromOutputTexture:function(){return awe},createFloat16MatrixTexture:function(){return Kxe},createFloat16PackedMatrixTexture:function(){return ewe},createFloat32MatrixTexture:function(){return Gxe},createIndexBuffer:function(){return Uxe},createPackedMatrixTexture:function(){return Qxe},createUnsignedBytesMatrixTexture:function(){return Yxe},createVertexBuffer:function(){return jxe},createVertexShader:function(){return Vxe},downloadByteEncodedFloatMatrixFromOutputTexture:function(){return owe},downloadFloat32MatrixFromBuffer:function(){return iwe},downloadMatrixFromPackedOutputTexture:function(){return uwe},downloadPackedMatrixFromBuffer:function(){return swe},getInternalFormatForFloat16MatrixTexture:function(){return qxe},getInternalFormatForFloat16PackedMatrixTexture:function(){return Jxe},getInternalFormatForFloat32MatrixTexture:function(){return Zxe},getInternalFormatForPackedMatrixTexture:function(){return $xe},getInternalFormatForUnsignedBytesMatrixTexture:function(){return Xxe},uploadDenseMatrixToTexture:function(){return nwe},uploadPixelDataToTexture:function(){return rwe}});var cwe=function(){function e(t){N(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=GG().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,Xye(n,t)):this.gl=Yye(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===GG().getNumber("WEBGL_VERSION")){var i="OES_texture_half_float";if(this.textureFloatExtension=abe(this.gl,"OES_texture_float"),Hbe(this.gl,i))this.textureHalfFloatExtension=abe(this.gl,i);else if(GG().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Hbe(this.gl,a))this.colorBufferHalfFloatExtension=abe(this.gl,a);else if(GG().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Hbe(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Hbe(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=jxe(this.gl),this.indexBuffer=Uxe(this.gl),this.framebuffer=bbe(this.gl),this.textureConfig=ebe(this.gl,this.textureHalfFloatExtension)}return(0,C.Z)(e,[{key:"debug",get:function(){return GG().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;tbe(t,(function(){return t.finish()})),tbe(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),tbe(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),tbe(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),tbe(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),tbe(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),Gxe(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),Kxe(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),Yxe(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),rwe(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),nwe(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),ewe(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),Qxe(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(Cbe(this.gl,this.framebuffer),this.outputTexture=null),tbe(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return owe(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return swe(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return iwe(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=awe(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(GG().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else GG().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,GG().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return uwe(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=Vxe(n));var r=fbe(n);return tbe(n,(function(){return n.attachShader(r,t.vertexShader)})),tbe(n,(function(){return n.attachShader(r,e)})),hbe(n,r),this.debug&&pbe(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=twe(n,this.program,this.vertexBuffer)),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&tbe(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&pbe(this.gl,this.program),tbe(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?Sbe(this.gl,e,t):_be(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),tbe(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Tbe(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=Jye(t,n),a=(0,T.Z)(r,2),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(e,i,o)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&pbe(this.gl,this.program),Ebe(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),tbe(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),tbe(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=abe(this.gl,2===GG().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===GG().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==GG().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=Tn(Sn().mark((function e(t){var n=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SY.repeatedTry((function(){return n.disposed||n.isQueryAvailable(t,GG().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,GG().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n,r=this;(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)||("setTimeoutCustom"in GG().platform&&(n=GG().platform.setTimeoutCustom.bind(GG().platform)),SY.repeatedTry((function(){return r.pollItems(),0===r.itemsToPoll.length}),(function(){return 0}),null,n))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),Nbe(this.gl,e,this.framebuffer),this.debug&&Ebe(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(Nbe(this.gl,this.outputTexture,this.framebuffer),this.debug&&Ebe(this.gl)):Cbe(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;Nbe(r,e,this.framebuffer),this.debug&&Ebe(r),this.outputTexture=e,tbe(r,(function(){return r.viewport(0,0,t,n)})),tbe(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),tbe(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var lwe=ghe.addImpl,fwe=ghe.bincountImpl,hwe=ghe.bincountReduceImpl,pwe=ghe.castImpl,dwe=ghe.ceilImpl,mwe=ghe.concatImpl,vwe=ghe.equalImpl,gwe=ghe.expImpl,ywe=ghe.expm1Impl,bwe=ghe.floorImpl,xwe=ghe.gatherNdImpl,wwe=ghe.gatherV2Impl,kwe=ghe.greaterImpl,Swe=ghe.greaterEqualImpl,_we=ghe.lessImpl,Twe=ghe.lessEqualImpl,Iwe=ghe.linSpaceImpl,Nwe=ghe.logImpl,Cwe=ghe.maxImpl,Ewe=ghe.maximumImpl,Awe=ghe.minimumImpl,Rwe=ghe.multiplyImpl,Owe=ghe.negImpl,Mwe=ghe.notEqualImpl,Dwe=ghe.prodImpl,Fwe=ghe.raggedGatherImpl,Pwe=ghe.raggedRangeImpl,Lwe=ghe.raggedTensorToTensorImpl,zwe=ghe.rangeImpl,Bwe=ghe.rsqrtImpl,Wwe=ghe.scatterImpl,Vwe=ghe.sigmoidImpl,jwe=ghe.simpleAbsImpl,Uwe=ghe.sliceImpl,Hwe=ghe.sparseFillEmptyRowsImpl,Zwe=ghe.sparseReshapeImpl,Gwe=ghe.sparseSegmentReductionImpl,qwe=ghe.sqrtImpl,Kwe=ghe.stridedSliceImpl,Xwe=ghe.stringNGramsImpl,Ywe=ghe.stringSplitImpl,$we=ghe.stringToHashBucketFastImpl,Qwe=ghe.subImpl,Jwe=ghe.tileImpl,eke=ghe.topKImpl,tke=ghe.transposeImpl,nke=ghe.uniqueImpl;function rke(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function ake(e,t){return 1===t?[e]:rke(e,t)}var ike=function(){function e(t){if(N(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=Oxe(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=ake("rc",this.rank),r=Sxe(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}return(0,C.Z)(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),i=2;i<this.rank;i++)a="".concat(e[e.length-1-i],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);return 1===this.rank?"getA(rc), (rc + 1 >= ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]," ? 0. : getA(rc + 1)), 0, 0"):"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),oke=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=Oxe(this.outputShape.length);for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=txe(e.map((function(e,t){return t})),t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(r[a]),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(r[a]):"index -= ".concat(e[a]," * ").concat(r[a]);return"".concat(i,"; ").concat(o,";")})).join("")}(["r","c","d"],"inputShape"):Jbe(["r","c","d"],e),"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":nxe(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var ske=function(){function e(t){N(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return(0,C.Z)(e,[{key:"acquireTexture",value:function(e,t,n){var r=cke(t,n),a=lke(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=uke(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===Gye.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===Gye.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===Gye.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===Gye.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===Gye.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=cke(n,r),i=lke(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=uke(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=GG().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var u=this.usedTextures[i],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function uke(e,t,n,r,a){var i,o=function(e,t){switch(e){case Gye.PACKED_2X2_FLOAT32:return $xe(t);case Gye.PACKED_2X2_FLOAT16:return Jxe(t);case Gye.UNPACKED_FLOAT32:return Zxe(t);case Gye.UNPACKED_FLOAT16:return qxe(t);case Gye.PACKED_4X1_UNSIGNED_BYTE:return Xxe(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=Jye(e[0],e[1]),u=(0,T.Z)(s,2);i=u[0]*u[1]}else{var c=$ye(e[0],e[1]),l=(0,T.Z)(c,2);i=l[0]*l[1]}var f=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F||t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*f}function cke(e,t){if(e===Zye.UPLOAD)return Gye.PACKED_2X2_FLOAT32;if(e===Zye.RENDER||null==e)return function(e){return GG().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Gye.PACKED_2X2_FLOAT32:Gye.UNPACKED_FLOAT32:e?Gye.PACKED_2X2_FLOAT16:Gye.UNPACKED_FLOAT16}(t);if(e===Zye.DOWNLOAD||e===Zye.PIXELS)return Gye.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function lke(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var fke=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=Oxe(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),hke="if (isnan(x)) return x;",pke="return x;",dke="return abs(x);",mke="return (x >= 0.0) ? x : (exp(x) - 1.0);",vke=hke+"\n  return (x < 0.0) ? 0.0 : x;\n",gke=hke+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",yke="return x;",bke="return 1.0 / (1.0 + exp(-1.0 * x));",xke="return x;",wke="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",kke="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Ske="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",_ke="return 1.0 / (1.0 + exp(-1.0 * x));",Tke=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=Oxe(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),Ike=(0,C.Z)((function e(t){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=Oxe(this.outputShape.length);var n=t.length,r=ake("rc",n),a=Sxe(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),Nke=c7.whereImpl,Cke={};var Eke=GG().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var Ake=function(e){A(n,e);var t=L(n);function n(e){var r,a;if(N(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!GG().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof cwe)a=e;else{var i=Yye(GG().getNumber("WEBGL_VERSION"),e);a=new cwe(i)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var o=Yye(GG().getNumber("WEBGL_VERSION"));a=new cwe(o),r.binaryCache=function(e){return e in Cke||(Cke[e]={}),Cke[e]}(GG().getNumber("WEBGL_VERSION")),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new ske(r.gpgpu),r.numMBBeforeWarning=null==GG().global.screen?1024:GG().global.screen.height*GG().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new ZZ((0,F.Z)(r),PJ()),P(r)}return(0,C.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"writeTexture",value:function(e,t,n,r,a,i){var o=this.makeTensorInfo(t,n),s=this.texData.get(o.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[r,a]},s.texShape=[r,a];var u=Fbe(t),c=new zxe(u,!1,i),l=this.runWebGLProgram(c,[o],n,[[r,a]]);return l.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(o),l.dataId}},{key:"write",value:function(e,t,n){if((GG().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||GG().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:Zye.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(GG().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:Zye.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var u;u=s?new Tke(o,yke):new fke(o,yke);var c=this.runWebGLProgram(u,[{dataId:e,shape:o,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var f,h,p=null!=this.activeTimers;if(p&&(f=SY.now()),"complex64"===r){var d=this.readSync(a.real.dataId),m=this.readSync(a.imag.dataId);h=i8.mergeRealAndImagArrays(d,m)}else h=this.getValuesFromTexture(e);return p&&(this.downloadWaitMs+=SY.now()-f),this.convertAndCacheOnCPU(e,h)}},{key:"read",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i,o,s,u,c,l,f,h,p,d,m,v,g,y,b,x,w,k,S;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,i=r.shape,o=r.slice,s=r.dtype,u=r.complexTensorInfos,c=r.isPacked,null==o){e.next=8;break}return n=c?new Tke(i,yke):new fke(i,yke),l=this.runWebGLProgram(n,[{dataId:t,shape:i,dtype:s}],s),f=this.read(l.dataId),e.abrupt("return",(this.disposeIntermediateTensorInfo(l),f));case 8:if(null==a){e.next=10;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 10:if(!GG().getBool("DEBUG")||GG().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==GG().getNumber("WEBGL_VERSION")){e.next=12;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 12:if(h=null,"complex64"!==s&&GG().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(t),m=this.texData.get(p.dataId),h=(d=this.gpgpu).createBufferFromTexture.apply(d,[m.texture.texture].concat((0,I.Z)(Qye(i))))),this.pendingRead.set(t,[]),e.t0="complex64"!==s,!e.t0){e.next=19;break}return e.next=19,this.gpgpu.createAndWaitForFence();case 19:if("complex64"!==s){e.next=28;break}return e.next=22,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 22:g=e.sent,y=g[0],b=g[1],v=i8.mergeRealAndImagArrays(y,b),e.next=29;break;case 28:null==h?v=this.getValuesFromTexture(t):(x=SY.sizeFromShape(i),v=this.gpgpu.downloadFloat32MatrixFromBuffer(h,x));case 29:return null!=p&&this.disposeIntermediateTensorInfo(p),null!=h&&tbe(w=this.gpgpu.gl,(function(){return w.deleteBuffer(h)})),k=this.convertAndCacheOnCPU(t,v),S=this.pendingRead.get(t),e.abrupt("return",(this.pendingRead.delete(t),S.forEach((function(e){return e(k)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&PJ().removeDataId(t,this),this.pendingDeletes--),k));case 32:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.isPacked,u=n.texture;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var c;c=s?new Tke(a,yke):new fke(a,yke);var l=this.runWebGLProgram(c,[{dataId:e,shape:a,dtype:o}],o),f=this.readToGPU(l,t);return this.disposeIntermediateTensorInfo(l),f}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var h=this.decode(e,t.customTexShape),p=PJ().makeTensorFromTensorInfo(h),d=this.texData.get(h.dataId);return Object.assign({tensorRef:p},d.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return SY.decodeString(e)}));return eJ(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return eJ(e.shape,e.dtype,t)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!nbe(n))throw GG().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value ".concat(n," cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'")):Error("The value ".concat(n," cannot be represented on this device."))}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,i=SY.sizeFromShape(n);if(GG().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,s=this.decode(e),u=this.texData.get(s.dataId),c=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[u.texture.texture].concat((0,I.Z)(Qye(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(s),c}var l=GG().getBool("WEBGL_PACK")&&!0===a,f=l?Fbe(n):n,h=l?new Pxe(f):new Fxe(f),p=this.runWebGLProgram(h,[{shape:f,dtype:r,dataId:e}],"float32"),d=this.texData.get(p.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(p),m}},{key:"timerAvailable",value:function(){return GG().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var i=SY.flatten(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=SY.flatten(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return Tn(Sn().mark((function e(){var n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(GG().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=7;break}return e.next=3,Promise.all(i);case 3:n=e.sent,s.kernelMs=SY.sum(n),s.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=8;break;case 7:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 8:return e.abrupt("return",(t.uploadWaitMs=0,t.downloadWaitMs=0,s));case 9:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return GG().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:SY.now(),endMs:null}}},{key:"endTimer",value:function(e){return GG().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=SY.now(),e)}},{key:"getQueryTime",value:function(){var e=Tn(Sn().mark((function e(t){var n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(GG().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Eke;return GG().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&SY.sizeFromShape(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){i8.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Nke(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new Tke(e.shape,t),a=this.compileAndRun(r,[e],n);return PJ().makeTensorFromTensorInfo(a)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=jwe(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(GG().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,dke,e.dtype);var n=new fke(e.shape,dke),r=this.compileAndRun(n,[e]);return PJ().makeTensorFromTensorInfo(r)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&SY.isString(n[0])){var a=n.map((function(e){return SY.encodeString(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){return PJ().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}},{key:"unpackTensor",value:function(e){var t=new Ike(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new ike(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[Mbe(e.shape)].concat((0,I.Z)(Dbe(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[Mbe(t)].concat((0,I.Z)(Dbe(t))),i=new oke(a,n),o=[n],s=this.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype;if(null!=t){var o=SY.sizeFromShape(a),s=t[0]*t[1]*4;SY.assert(o<=s,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}))}var u,c=Fbe(a);u=r?new Dxe(c):new Mxe(c);var l=[null!=t?t:Qye(c)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(u,[{shape:c,dtype:i,dataId:e}],i,l,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===Hye.DENSE){var c=null!=o?o:Qye(e.outputShape);u.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===SY.sizeFromShape(s.shape))return u.values=SY.getTypedArrayFromDType(s.dtype,0),s;var l=[],f=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&SY.sizeFromShape(t.shape)<=GG().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!=!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),l.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!zbe(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),l.push(t),n=a.texData.get(t.dataId),r.shape=i}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var h,p={shape:s.shape,texData:u,isUniform:!1},d=Rxe(e,f,p),m=this.getAndSaveBinary(d,(function(){return Nxe(a.gpgpu,e,f,p)})),v=null!=this.activeTimers;v&&(h=this.startTimer()),GG().get("ENGINE_COMPILE_ONLY")||Axe(this.gpgpu,m,f,p,r),l.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),v&&(h=this.endTimer(h),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(h)}));var g=GG().get("WEBGL_FLUSH_THRESHOLD");if(g>0){var y=SY.now();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!GG().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===i){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,r,a)}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;this.disposed||(GG().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=BJ((function(){if(!GG().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=GG().getBool("DEBUG");GG().set("DEBUG",!1);var n=e.abs(Z2(1e-8)).dataSync()[0];if(GG().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,i=t.texture,o=t.usage,s=t.isPacked;if(null==i){var u,c=null!=this.activeTimers;c&&(u=SY.now());var l=t.texShape;if(null==l&&(l=Pbe(n,s),t.texShape=l),null!=a){var f,h,p,d=Fbe(n),m=l[1],v=l[0],g=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(s||!g)&&(f=Jye(l[0],l[1]),m=(h=(0,T.Z)(f,2))[0],v=h[1]),p=s?new Bxe(d,g):new zxe(d,g);var y=g?[v,m]:l,b=this.makeTensorInfo(y,r),x=this.texData.get(b.dataId);x.usage=g?Zye.PIXELS:Zye.UPLOAD,x.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),m,v,a);var w=[[v,m]],k=this.runWebGLProgram(p,[b],r,w,!0),S=this.texData.get(k.dataId);t.texShape=S.texShape,t.isPacked=S.isPacked,t.usage=S.usage,GG().get("ENGINE_COMPILE_ONLY")?this.disposeData(k.dataId):(t.texture=S.texture,t.values=null,this.texData.delete(k.dataId)),this.disposeIntermediateTensorInfo(b),c&&(this.uploadWaitMs+=SY.now()-u)}else{var _=this.acquireTexture(l,o,r,s);t.texture=_}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, most likely due to a memory leak"))}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*SY.bytesPerElement(t)}},{key:"checkCompileCompletion",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,T.Z)(t[e],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r,a,i,o,s,u,c=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.gpgpu.parallelCompilationExtension){e.next=6;break}for(n=0,r=Object.entries(this.binaryCache);n<r.length;n++)a=(0,T.Z)(r[n],2),i=a[1],t.push(this.checkCompletionAsync_(i));return e.abrupt("return",Promise.all(t));case 6:for(o=function(){var e=(0,T.Z)(u[s],2)[1],n=new Promise((function(t){try{c.checkCompletion_(e),t(!0)}catch(n){throw n}}));t.push(n)},s=0,u=Object.entries(this.binaryCache);s<u.length;s++)o();return e.abrupt("return",Promise.all(t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkCompletionAsync_",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){e.next=4;break}e.t0=this.checkCompletion_(t),e.next=7;break;case 4:return e.next=6,r8();case 6:e.t0=this.checkCompletionAsync_(t);case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCompletion_",value:function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS))throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)?(lbe(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}},{key:"getUniformLocations",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,T.Z)(t[e],2)[1],r=Cxe(this.gpgpu,n.program,n.webGLProgram),a=r.uniformLocations,i=r.customUniformLocations,o=r.infLoc,s=r.nanLoc,u=r.inShapesLocations,c=r.inTexShapesLocations,l=r.outShapeLocation,f=r.outShapeStridesLocation,h=r.outTexShapeLocation;n.uniformLocations=a,n.customUniformLocations=i,n.infLoc=o,n.nanLoc=s,n.inShapesLocations=u,n.inTexShapesLocations=c,n.outShapeLocation=l,n.outShapeStridesLocation=f,n.outTexShapeLocation=h}}},{key:"createTensorFromTexture",value:function(e,t,n){var r=e.texture,a=e.height,i=e.width,o=e.channels,s=PJ().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");var u=s.writeTexture(r,t,n,a,i,o);return PJ().makeTensorFromDataId(u,t,n,s)}}]),n}(GZ);Ake.nextDataId=0;var Rke="4.0.0";function Oke(){GG().set("WEBGL_FORCE_F16_TEXTURES",!0)}A$.isBrowser()&&XJ("webgl",(function(){return new Ake}),2);var Mke={forceHalfFloat:Oke},Dke=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["A","B"],this.outputShape=i8.assertAndGetBroadcastShape(n,r),this.enableShapeUniforms=Oxe(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),Fke=(0,C.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];N(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i8.assertAndGetBroadcastShape(n,r);var i=this.outputShape.length;this.enableShapeUniforms=Oxe(i);var o="";if(a)if(0===i||1===SY.sizeFromShape(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(o="\n          ".concat(Sxe(i)," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var s=ake("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(s[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(s[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(s[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(s[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}));function Pke(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var Lke={kernelName:fK,backendName:"webgl",kernelFunc:Pke};function zke(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=Pke({inputs:{x:r},backend:n}),u=Pke({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var Bke={kernelName:Sq,backendName:"webgl",kernelFunc:zke},Wke="return (a < 0.) ? b * a : a;",Vke="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var jke={kernelName:gK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",SY.createScalarValue(i,"float32")),s=GG().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Fke(Vke,a.shape,o.shape):new Dke(Wke,a.shape,o.shape),u=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),u}},Uke="return (a < 0.) ? b * a : a;",Hke="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var Zke={kernelName:nX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=GG().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Fke(Hke,r.shape,a.shape):new Dke(Uke,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}};function Gke(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,u=o.x,c=s,l=a||u.dtype;if(c.shouldExecuteOnCPU([u])&&null!=r){var f=c.texData.get(u.dataId),h=r(f.values,l);return c.makeTensorInfo(u.shape,l,h)}return i=GG().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new Tke(u.shape,n):new fke(u.shape,t),c.runWebGLProgram(i,[u],l)}}function qke(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,s=e.cpuKernelImpl,u=e.dtype;return function(e){var r=e.inputs,i=e.backend,c=r.a,l=r.b,f=i;if(o&&"complex64"===c.dtype){var h=f.texData.get(c.dataId),p=f.texData.get(l.dataId),d=[[h.complexTensorInfos.real,p.complexTensorInfos.real],[h.complexTensorInfos.imag,p.complexTensorInfos.imag]].map((function(e){var n=(0,T.Z)(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:c.shape},o={dataId:a.dataId,dtype:a.dtype,shape:l.shape},s=new Dke(t,c.shape,l.shape);return f.runWebGLProgram(s,[i,o],m$(r.dtype,a.dtype))})),m=(0,T.Z)(d,2),v=m[0],g=m[1],y=zke({inputs:{real:v,imag:g},backend:f});return f.disposeIntermediateTensorInfo(v),f.disposeIntermediateTensorInfo(g),y}var b,x=u||m$(c.dtype,l.dtype);if(("string"===c.dtype||"string"===l.dtype||f.shouldExecuteOnCPU([c,l]))&&null!=s){var w=f.texData.get(c.dataId).values,k=f.texData.get(l.dataId).values,S="string"===c.dtype?i8.fromUint8ToStringArray(w):w,_="string"===c.dtype?i8.fromUint8ToStringArray(k):k,I=s(c.shape,l.shape,S,_,x),N=(0,T.Z)(I,2),C=N[0],E=N[1],A=f.makeTensorInfo(E,x);return f.texData.get(A.dataId).values=C,A}return b=GG().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new Fke(n,c.shape,l.shape,a):new Dke(t,c.shape,l.shape),f.runWebGLProgram(b,[c,l],x)}}function Kke(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?xke:pke;if("relu"===e)return t?kke:vke;if("elu"===e)return t?wke:mke;if("relu6"===e)return t?Ske:gke;if("prelu"===e)return t?Hke:Uke;if("leakyrelu"===e)return t?Vke:Wke;if("sigmoid"===e)return t?_ke:bke;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var Xke=(0,C.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];N(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Oxe(this.outputShape.length);var l=a?t[1]:t[2],f=Math.ceil(l/2),h=a?"i * 2, rc.y":"rc.y, i * 2",p=i?"rc.z, i * 2":"i * 2, rc.z",d=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],v="",g="";s&&(v=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),g="result = activation(result);");var y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var b="rc.x",x="rc.x";t[0]<n[0]?b="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(x="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(v,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(f,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(f,"; i++) {\n          int batchA = ").concat(b,";\n          int batchB = ").concat(x,";\n          vec4 a = getMatrixA(batchA, ").concat(h,");\n          vec4 b = getMatrixB(batchB, ").concat(p,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(d[0]," * ").concat(m[0],");\n          result += (").concat(d[1]," * ").concat(m[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")})),Yke="return areal * breal - aimag * bimag;",$ke="return areal * bimag + aimag * breal;",Qke=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=i8.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),Jke="return a * b;";function eSe(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=i8.upcastType(a.dtype,i.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),u=r.texData.get(i.dataId),c=new Qke(Yke,a.shape,i.shape),l=new Qke($ke,a.shape,i.shape),f=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],h=r.runWebGLProgram(c,f,"float32"),p=r.runWebGLProgram(l,f,"float32"),d=zke({inputs:{real:h,imag:p},backend:r});return r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(p),d}if(r.shouldExecuteOnCPU([a,i])){var m=r.texData.get(a.dataId),v=r.texData.get(i.dataId),g=Rwe(a.shape,i.shape,m.values,v.values,o),y=(0,T.Z)(g,2),b=y[0],x=y[1],w=r.makeTensorInfo(x,o);return r.texData.get(w.dataId).values=b,w}return t=GG().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Fke(Jke,a.shape,i.shape):new Dke(Jke,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var tSe={kernelName:HK,backendName:"webgl",kernelFunc:eSe};function nSe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,s=SY.sizeFromShape(a.shape),u=SY.inferFromImplicitShape(i,s),c=SY.sizeFromShape(u);SY.assert(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old shape (").concat(a.shape,") has ").concat(s," elements. The new shape and old shape must have the same number of elements.")}));var l=o.texData.get(a.dataId);return!l.isPacked||zbe(a.shape,u)||null!==l.texture&&zbe(l.shape,u)?(o.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[Mbe(e.shape)].concat((0,I.Z)(Dbe(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[Mbe(t)].concat((0,I.Z)(Dbe(t))),o=new oke(i,r),s=[r],u=n.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,u,o)}var rSe={kernelName:fX,backendName:"webgl",kernelFunc:nSe},aSe=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s=4*Math.floor(r/4),u=r%4,c="sumValue += dot(values, ones);";if(null!=n){var l=1/n;c="sumValue += dot(values * ".concat(SY.isInt(l)?l.toPrecision(2):l,", ones);")}var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),iSe=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),f=r%4,h="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),p="vec4";"all"===n?(s="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===n&&(s="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(h,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===f,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(2===f,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(3===f,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(h,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}));function oSe(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=i8.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var s,u=a[o],c=u.inSize,l=u.windowSize,f=u.outSize,h=void 0;h="mean"===n?0===o?new aSe({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:f},c):new aSe({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:f}):new iSe({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:f},n),s=i,i=r.runWebGLProgram(h,[i],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return i}var sSe=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=Sxe(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}));var uSe=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=Sxe(this.rank),o=rke("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=o[u];var c="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),f="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(f,";\n      if(").concat(l,") {\n        result[1] = ").concat(f,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(f,";\n        if(").concat(l,") {\n          result[3] = ").concat(f,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function cSe(e,t,n){var r=GG().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new uSe(e.shape,t):new sSe(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function lSe(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,i=e.shape.length,o=SY.parseAxisParam(a,e.shape),s=o,u=i8.getAxesPermutation(s,i),c=null!=u,l=e;c&&(l=cSe(e,u,r),s=i8.getInnerMostAxes(s.length,i)),i8.assertAxesAreInnerMostDims("sum",s,i);var f=i8.computeOutAndReduceShapes(l.shape,s),h=(0,T.Z)(f,2),p=h[0],d=h[1],m=p;n&&(m=i8.expandShapeToKeepDim(p,o));var v=SY.sizeFromShape(d),g=nSe({inputs:{x:l},attrs:{shape:[SY.sizeFromShape(e.shape)/v,v]},backend:r}),y=oSe(g,v$(e.dtype),"sum",r),b=nSe({inputs:{x:y},attrs:{shape:m},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(y),c&&r.disposeIntermediateTensorInfo(l),b}(t.x,r.axis,r.keepDims,n)}var fSe={kernelName:RX,backendName:"webgl",kernelFunc:lSe};function hSe(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,s=r,u=i.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=i.shape[o[l]];if(s.shouldExecuteOnCPU([i])){var f=s.texData.get(i.dataId).values,h=tke(f,i.shape,i.dtype,o,c);t=s.makeTensorInfo(c,i.dtype),s.texData.get(t.dataId).values=h}else t=cSe(i,o,s);return t}var pSe={kernelName:QX,backendName:"webgl",kernelFunc:hSe};function dSe(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,f=void 0===l?0:l,h=e.activation,p=void 0===h?null:h,d=t.shape.length,m=n.shape.length,v=r?t.shape[d-2]:t.shape[d-1],g=a?n.shape[m-1]:n.shape[m-2],y=r?t.shape[d-1]:t.shape[d-2],b=a?n.shape[m-2]:n.shape[m-1],x=t.shape.slice(0,-2),w=n.shape.slice(0,-2),k=SY.sizeFromShape(x),S=SY.sizeFromShape(w),_=r0.assertAndGetBroadcastShape(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);SY.assert(v===g,(function(){return"Error in matMul: inner shapes (".concat(v,") and (").concat(g,") of Tensors with shapes ").concat(t.shape," and ").concat(n.shape," and transposeA=").concat(r," and transposeB=").concat(a," must match.")}));var T,I=r?[k,v,y]:[k,y,v],N=a?[S,b,g]:[S,g,b],C=nSe({inputs:{x:t},backend:i,attrs:{shape:I}}),E=nSe({inputs:{x:n},backend:i,attrs:{shape:N}}),A=[C,E],R=Math.max(k,S),O=r?C.shape[1]:C.shape[2],M=null!=s,D=null!=c,F="leakyrelu"===p,P=null!=p?Kke(p,!0):null;if((1===y||1===b)&&O>1e3&&!1===(M||D||F||null!=P)){var L=C,z=E;r&&(L=hSe({inputs:{x:C},backend:i,attrs:{perm:[0,2,1]}}),A.push(L)),a&&(z=hSe({inputs:{x:E},backend:i,attrs:{perm:[0,2,1]}}),A.push(z));var B=1===b,W=L;1!==b&&(W=nSe({inputs:{x:L},backend:i,attrs:{shape:[R,O,1]}}),A.push(W));var V=1===b?2:1,j=z;B&&(j=nSe({inputs:{x:z},backend:i,attrs:{shape:[R,1,O]}}),A.push(j));var U=eSe({inputs:{a:W,b:j},backend:i});T=lSe({inputs:{x:U},backend:i,attrs:{axis:V,keepDims:!0}}),A.push(U)}else{var H=m$(t.dtype,n.dtype),Z=new Xke(I,N,[R,y,b],r,a,M,P,D,F),G=[C,E];if(null!=s&&G.push(s),D&&G.push(c),F){var q=i.makeTensorInfo([],"float32",SY.createScalarValue(f,"float32"));G.push(q),A.push(q)}T=i.runWebGLProgram(Z,G,H)}var K=nSe({inputs:{x:T},backend:i,attrs:{shape:_}});A.push(T);for(var X=0,Y=A;X<Y.length;X++){var $=Y[X];i.disposeIntermediateTensorInfo($)}return K}var mSe={kernelName:sY,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return dSe({a:a,b:i,transposeA:u,transposeB:c,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},vSe="return abs(x);";var gSe={kernelName:$G,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=jwe(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=GG().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Tke(a.shape,vSe):new fke(a.shape,vSe),r.runWebGLProgram(t,[a],a.dtype)}},ySe=Gke({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),bSe={kernelName:QG,backendName:"webgl",kernelFunc:ySe},xSe=Gke({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),wSe={kernelName:JG,backendName:"webgl",kernelFunc:xSe},kSe="return a + b;",SSe=qke({opSnippet:kSe,packedOpSnippet:kSe,supportsComplex:!0,cpuKernelImpl:lwe}),_Se={kernelName:eq,backendName:"webgl",kernelFunc:SSe},TSe=(0,C.Z)((function e(t,n){N(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),ISe=(0,C.Z)((function e(t,n){N(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var NSe={kernelName:tq,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return Pke({inputs:{x:a[0]},backend:r});if(a.length>GG().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),s=e({inputs:a.slice(i),backend:r});return e({inputs:[o,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return m$(e,t)})),c=a.map((function(e){return e.shape})),l=GG().getBool("WEBGL_PACK")?new ISe(a[0].shape,c):new TSe(a[0].shape,c);return r.runWebGLProgram(l,a,u)}};var CSe={kernelName:nq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=SY.parseAxisParam(i,a.shape),c=u,l=i8.getAxesPermutation(c,s),f=a;null!=l&&(f=hSe({inputs:{x:a},backend:n,attrs:{perm:l}}),c=i8.getInnerMostAxes(c.length,s)),i8.assertAxesAreInnerMostDims("all",c,s);var h,p=i8.computeOutAndReduceShapes(f.shape,c),d=(0,T.Z)(p,2),m=d[0],v=d[1],g=nSe({inputs:{x:f},backend:n,attrs:{shape:[-1,SY.sizeFromShape(v)]}}),y=oSe(g,g.dtype,"all",n);return h=nSe(o?{inputs:{x:y},backend:n,attrs:{shape:i8.expandShapeToKeepDim(m,u)}}:{inputs:{x:y},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),null!=l&&n.disposeIntermediateTensorInfo(f),h}};var ESe={kernelName:rq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=SY.parseAxisParam(i,a.shape),c=u,l=i8.getAxesPermutation(c,s),f=a;null!=l&&(f=hSe({inputs:{x:a},backend:n,attrs:{perm:l}}),c=i8.getInnerMostAxes(c.length,s)),i8.assertAxesAreInnerMostDims("any",c,s);var h,p=i8.computeOutAndReduceShapes(f.shape,c),d=(0,T.Z)(p,2),m=d[0],v=d[1],g=nSe({inputs:{x:f},backend:n,attrs:{shape:[-1,SY.sizeFromShape(v)]}}),y=oSe(g,g.dtype,"any",n);return h=nSe(o?{inputs:{x:y},backend:n,attrs:{shape:i8.expandShapeToKeepDim(m,u)}}:{inputs:{x:y},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),null!=l&&n.disposeIntermediateTensorInfo(f),h}},ASe=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),RSe=(0,C.Z)((function e(t,n,r,a){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,SY.assert(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");var s,u,c=this.outputShape,l=c.length,f=Sxe(l),h=ake("coords",l);if(1===o){var p=Sxe(u=l+1);s="\n        ".concat(p," sourceLocR = ").concat(p,"(").concat(h.join(),", 0);\n        ++").concat(h[l-1],";\n        ").concat(p," sourceLocG = ").concat(p,"(").concat(h.join(),", 0);\n        ++").concat(h[l-2],";\n        ").concat(p," sourceLocA = ").concat(p,"(").concat(h.join(),", 0);\n        --").concat(h[l-1],";\n        ").concat(p," sourceLocB = ").concat(p,"(").concat(h.join(),", 0);\n        --").concat(h[l-2],";")}else u=l,s="\n        ".concat(f," sourceLocR = coords;\n        ++").concat(h[l-1],";\n        ").concat(f," sourceLocG = coords;\n        ++").concat(h[l-2],";\n        ").concat(f," sourceLocA = coords;\n        --").concat(h[l-1],";\n        ").concat(f," sourceLocB = coords;\n        --").concat(h[l-2],";");var d=["x","y","z","w","u","v"].slice(0,u),m="."+d[u-1],v=d.map((function(e){return"int "+e})),g=ake("sourceLocR",u-1).concat("inIdx.r"),y=ake("sourceLocG",u-1).concat("inIdx.g"),b=ake("sourceLocB",u-1).concat("inIdx.b"),x=ake("sourceLocA",u-1).concat("inIdx.a"),w="max"===r?"greaterThan":"lessThan",k=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),S="vec4(\n            getAChannel(".concat(g.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),_=a?"":"\n      float getBestIndicesAChannel(".concat(v.join(),") {\n        return getChannel(getBestIndicesA(").concat(d.join(),"),\n                                          vec2(").concat(d.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(v.join(),") {\n        return getChannel(getA(").concat(d.join(),"),\n                               vec2(").concat(d.slice(-2).join(),"));\n      }\n      ").concat(_,"\n      void main() {\n        ").concat(f," coords = getOutputCoords();\n        bool hasNextCol = ").concat(h[l-1]," < ").concat(c[l-1]-1,";\n        bool hasNextRow = ").concat(h[l-2]," < ").concat(c[l-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(m,", sourceLocG").concat(m,",\n          sourceLocB").concat(m,", sourceLocA").concat(m,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(S,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(k,"\n          vec4 candidate = ").concat(S,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(w,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function OSe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);var o=i8.computeOptimalWindowSize(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},u=new ASe(s,n,null==r),c=[t];null!=r&&c.push(r);var l=e.runWebGLProgram(u,c,"int32");if(1===l.shape[1])return l;var f=OSe(e,t,n,l);return e.disposeIntermediateTensorInfo(l),f}function MSe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,i=a[a.length-1],o=i8.computeOptimalWindowSize(i),s=new RSe(a,o,n,null==r),u=null==r?[t]:[t,r],c=e.runWebGLProgram(s,u,"int32");if(c.shape.length===t.shape.length){var l=MSe(e,t,n,c);return e.disposeIntermediateTensorInfo(c),l}return c}function DSe(e,t,n,r){var a=[n];if(i8.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!GG().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=e.texData.get(t.dataId),s=t;null!==o&&o.isPacked&&(s=e.unpackTensor(t),i.push(s));var u=i8.computeOutAndReduceShapes(s.shape,a),c=(0,T.Z)(u,2),l=c[0],f=c[1],h=SY.sizeFromShape(f),p=nSe({inputs:{x:s},backend:e,attrs:{shape:[-1,h]}});i.push(p);var d=OSe(e,p,r);i.push(d);var m=nSe({inputs:{x:d},backend:e,attrs:{shape:l}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),m}return MSe(e,t,r)}var FSe={kernelName:aq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=SY.parseAxisParam(i,a.shape),s=i8.getAxesPermutation(o,a.shape.length),u=a,c=[];null!=s&&(u=hSe({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),o=i8.getInnerMostAxes(o.length,u.shape.length)),i8.assertAxesAreInnerMostDims("argMax",[o[0]],u.shape.length);var l=DSe(n,u,o[0],"max");return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}};var PSe={kernelName:iq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=SY.parseAxisParam(i,a.shape),s=i8.getAxesPermutation(o,a.shape.length),u=a,c=[];null!=s&&(u=hSe({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),o=i8.getInnerMostAxes(o.length,u.shape.length)),i8.assertAxesAreInnerMostDims("argMin",[o[0]],u.shape.length);var l=DSe(n,u,o[0],"min");return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}},LSe=Gke({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),zSe={kernelName:oq,backendName:"webgl",kernelFunc:LSe},BSe=Gke({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),WSe={kernelName:sq,backendName:"webgl",kernelFunc:BSe},VSe=Gke({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),jSe={kernelName:uq,backendName:"webgl",kernelFunc:VSe},USe=qke({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),HSe={kernelName:lq,backendName:"webgl",kernelFunc:USe},ZSe=Gke({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),GSe={kernelName:cq,backendName:"webgl",kernelFunc:ZSe},qSe=(0,C.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(N(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,p=t.padInfo.top,d=t.padInfo.left;this.outputShape=t.outShape;var m="avg"===n,v="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),g="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(m||(y="-1.0 / 1e-20"),r){var b=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(p,", ").concat(d,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(b," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?v:g:"wR * ".concat(h," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var x="max",w="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"avg"===n&&(w="avgValue / count");var k=4*Math.floor(o/4),S=o%4,_="\n      if (".concat(m,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(x,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(p,", ").concat(d,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(f,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(k,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(_,"\n          }\n\n          int xC = xCCorner + ").concat(k,";\n          if (").concat(1===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(_,"\n          } else if (").concat(2===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(_,"\n          } else if (").concat(3===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(_,"\n          }\n        }\n        setOutput(").concat(w,");\n      }\n    ")}})),KSe=(0,C.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(N(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,u=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,f=t.dilationHeight,h=t.dilationWidth,p=t.effectiveFilterDepth,d=t.effectiveFilterHeight,m=t.effectiveFilterWidth,v=t.padInfo.front,g=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,x="0.0";if(b||(x="-1.0 / 1e-20"),r){var w=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(v,", ").concat(g,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(p,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(d,";\n                wR += ").concat(f,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(m,";\n                  wC += ").concat(h,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(w," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(d," * ").concat(m," +\n                      wR * ").concat(m," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var k="max",S="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"avg"===n&&(S="avgValue / count");var _=4*Math.floor(o/4),T=o%4,I="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(k,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(v,", ").concat(g,", ").concat(y,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(p,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,";\n            wR += ").concat(f,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(_,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(h,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(h,", ch)\n              );\n\n              ").concat(I,"\n            }\n\n            int xC = xCCorner + ").concat(_,";\n            if (").concat(1===T,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(I,"\n            } else if (").concat(2===T,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(I,"\n            } else if (").concat(3===T,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                initializationValue\n              );\n\n              ").concat(I,"\n            }\n          }\n          setOutput(").concat(S,");\n        }\n      }\n    ")}}));var XSe={kernelName:fq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;Ybe(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;SY.assert(i8.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=i8.computePool2DInfo(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&SY.arraysEqual(c.inShape,c.outShape))return Pke({inputs:{x:a},backend:n});var l=new qSe(c,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}};var YSe={kernelName:pq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat,l=i8.computePool3DInfo(a.shape,i,o,[1,1,1],s,u,c),f=new KSe(l,"avg",!1);return n.runWebGLProgram(f,[a],"float32")}},$Se=(0,C.Z)((function e(t){N(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=u-1-t.padInfo.top,f=c-1-t.padInfo.left,h=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(f,");\n      const float avgMultiplier = float(").concat(h,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),QSe=(0,C.Z)((function e(t){N(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,f=t.effectiveFilterDepth,h=t.effectiveFilterHeight,p=t.effectiveFilterWidth,d=f-1-t.padInfo.front,m=h-1-t.padInfo.top,v=p-1-t.padInfo.left,g=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(d,", ").concat(m,", ").concat(v,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(f,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(h,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var JSe={kernelName:dq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=i8.computePool3DInfo(i.shape,o,s,[1,1,1],u,c),f=new QSe(l);return n.runWebGLProgram(f,[a],i.dtype)}};var e_e={kernelName:hq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;Ybe([a,i],"avgPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=i8.computePool2DInfo(o.shape,s,u,1,c),f=new $Se(l);return n.runWebGLProgram(f,[a],o.dtype)}};var t_e={kernelName:mq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return dSe({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},n_e=(0,C.Z)((function e(t,n,r,a,i,o){N(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],i8.assertAndGetBroadcastShape(t,n),i8.assertAndGetBroadcastShape(t,r);var s="0.0";null!=a&&(i8.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=i&&(i8.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),r_e=(0,C.Z)((function e(t,n,r,a,i,o){N(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],i8.assertAndGetBroadcastShape(t,n),i8.assertAndGetBroadcastShape(t,r);var s="vec4(0.0)";null!=a&&(i8.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=i&&(i8.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),a_e={kernelName:oK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,s=t.offset,u=t.scale;SY.assert(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),SY.assert(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),SY.assert(null==u||i.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c=r.varianceEpsilon;null==c&&(c=.001);var l=[a,i,o],f=null;null!=s&&(f=s.shape,l.push(s));var h=null;null!=u&&(h=u.shape,l.push(u));var p=GG().getBool("WEBGL_PACK_NORMALIZATION")?new r_e(a.shape,i.shape,o.shape,f,h,c):new n_e(a.shape,i.shape,o.shape,f,h,c);return n.runWebGLProgram(p,l,l[0].dtype)}},i_e=(0,C.Z)((function e(t){N(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=Sxe(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return o_e.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),i=t.map((function(e,t){return"sourceLoc.".concat(o_e[t]," = start[").concat(t,"] + coords.").concat(o_e[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),o_e=["x","y","z","w","u","v"];var s_e=(0,C.Z)((function e(t){N(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=Sxe(this.rank),r=ake("coords",this.rank),a=ake("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function u_e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size,s=S0.parseSliceParams(a,i,o),u=(0,T.Z)(s,2),c=u[0],l=u[1];if(S0.assertParamsValid(a,c,l),0===SY.sizeFromShape(l))return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var f=n.texData.get(a.dataId),h=Uwe(f.values,c,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,h)}var p=n.texData.get(a.dataId).isPacked,d=S0.isSliceContinous(a.shape,c,l);if(p||!d){f=GG().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new s_e(l):new i_e(l),h=[c];return n.runWebGLProgram(f,[a],a.dtype,h)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;var s=S0.computeFlatOffset(t,SY.computeStrides(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),i}(a,c,l,n)}var c_e={kernelName:_X,backendName:"webgl",kernelFunc:u_e},l_e={kernelName:vq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;SY.assert(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=i8.getReshaped(a.shape,i,s),c=i8.getPermuted(u.length,i.length),l=i8.getReshapedPermuted(a.shape,i,s),f=i8.getSliceBeginCoords(o,i.length),h=i8.getSliceSize(l,o,i.length),p=[],d=nSe({inputs:{x:a},backend:n,attrs:{shape:u}}),m=hSe({inputs:{x:d},backend:n,attrs:{perm:c}}),v=nSe({inputs:{x:m},backend:n,attrs:{shape:l}}),g=u_e({inputs:{x:v},backend:n,attrs:{begin:f,size:h}});return p.push(d),p.push(m),p.push(v),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var f_e={kernelName:gq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=fwe(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}};var h_e={kernelName:bq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=i8.assertAndGetBroadcastShape(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},p_e=qke({opSnippet:"return float(a != b);",cpuKernelImpl:Mwe,dtype:"bool"}),d_e={kernelName:GK,backendName:"webgl",kernelFunc:p_e};function m_e(e){var t=e.inputs,n=e.backend,r=t.input;return Pke({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var v_e={kernelName:uX,backendName:"webgl",kernelFunc:m_e};var g_e={kernelName:xq,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return Pke({inputs:{x:i},backend:r});var s=V3(i.shape),u=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),c=zke({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),c}if("complex64"===i.dtype){var l=m_e({inputs:{input:i},backend:r}),f=e({inputs:{x:l},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(l),f}if(!SY.hasEncodingLoss(i.dtype,o)){var h=Pke({inputs:{x:i},backend:r});return{dataId:h.dataId,shape:h.shape,dtype:o}}if(r.shouldExecuteOnCPU([i])){var p=r.texData.get(i.dataId).values,d=pwe(p,i.shape,i.dtype,o),m=(0,T.Z)(d,3),v=m[0],g=m[1],y=m[2];return r.makeTensorInfo(v,g,y)}if("int32"===o)return function(e,t){var n=new fke(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var b=r.makeTensorInfo([],"bool",SY.getTypedArrayFromDType("bool",1)),x=p_e({inputs:{a:i,b:b},backend:r});return r.disposeIntermediateTensorInfo(b),x}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},y_e="return ceil(x);",b_e=Gke({opSnippet:y_e,packedOpSnippet:y_e,cpuKernelImpl:dwe}),x_e={kernelName:wq,backendName:"webgl",kernelFunc:b_e},w_e=(0,C.Z)((function e(t){N(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),k_e=(0,C.Z)((function e(t){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var S_e={kernelName:kq,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,s=a.clipValueMax;t=GG().getBool("WEBGL_PACK_CLIP")?new k_e(i.shape):new w_e(i.shape);var u=[[o],[s]];return r.runWebGLProgram(t,[i],i.dtype,u)}},__e=(0,C.Z)((function e(t){N(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function T_e(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var I_e={kernelName:_q,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new __e(r.shape),o=[T_e(r,a.complexTensorInfos.real),T_e(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},N_e=(0,C.Z)((function e(t){N(this,e),this.outputShape=[],this.outputShape=i8.computeOutShape(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var o=n[i-1];a.push("else if (yC < ".concat(n[i],") setOutput(getT").concat(i,"(yR, yC-").concat(o,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),C_e=(0,C.Z)((function e(t,n){N(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=i8.computeOutShape(t,n);var r=this.outputShape,a=r.length,i=Sxe(a),o=ake("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var c=1;c<u.length;c++)u[c]=u[c-1]+t[c][n];for(var l=s[n],f=s.slice(-2),h=s.join(),p="if (".concat(l," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(h,"), vec2(").concat(f.join(),"));\n        }"),d=1;d<u.length;d++){var m=u[d-1];p+="\n        if (".concat(l," < ").concat(u[d],"  && ").concat(l," >= ").concat(u[d-1],") {\n          return getChannel(\n            getT").concat(d,"(").concat(E_e(s,l,m),"),\n            vec2(").concat(E_e(f,l,m),"));\n        }")}var v=u.length,g=u[u.length-1];p+="\n        return getChannel(\n          getT".concat(v,"(").concat(E_e(s,l,g),"),\n          vec2(").concat(E_e(f,l,g),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(p,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}));function E_e(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function A_e(e){var t=e.inputs,n=e.backend,r=t.input;return Pke({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var R_e={kernelName:pK,backendName:"webgl",kernelFunc:A_e};function O_e(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return m_e({inputs:{input:e},backend:n})})),i=e.map((function(e){return A_e({inputs:{input:e},backend:n})})),o=O_e(a,t,n),s=O_e(i,t,n),u=zke({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}var c=n.shouldExecuteOnCPU(e);if("string"===r&&(c=!0),c){var l=e.map((function(e){var r=SY.sizeFromShape(e.shape.slice(t));return nSe({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),f=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),h=i8.computeOutShape(l.map((function(e){return e.shape})),1),p=1===l[0].shape[0],d=mwe(f,h,r,p),m=i8.computeOutShape(e.map((function(e){return e.shape})),t),v=n.makeTensorInfo(m,r,d);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}var g=GG().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(e.length>g){for(var y=[],b=0;b<e.length;b+=g){var x=e.slice(b,b+g);y.push(O_e(x,t,n))}for(var w=O_e(y,t,n),k=0,S=y;k<S.length;k++){var _=S[k];n.disposeIntermediateTensorInfo(_)}return w}if(GG().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var T=new C_e(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(T,e,r)}var I=function(e,t,n){var r=i8.computeOutShape(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return nSe({inputs:{x:e},attrs:{shape:[-1,SY.sizeFromShape(e.shape.slice(t))]},backend:n})})),outShape:r}}(e,t,n),N=I.tensors2D,C=I.outShape,E=new N_e(N.map((function(e){return e.shape}))),A=n.runWebGLProgram(E,N,r);N.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var R=nSe({inputs:{x:A},attrs:{shape:C},backend:n});return n.disposeIntermediateTensorInfo(A),R}function M_e(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,a=SY.parseAxisParam(r,t[0].shape)[0],i=t.map((function(e){return e.shape}));i8.assertParamsConsistent(i,a);var o=i8.computeOutShape(t.map((function(e){return e.shape})),a);if(0===SY.sizeFromShape(o))return n.makeTensorInfo(o,t[0].dtype,[]);var s=t.filter((function(e){return SY.sizeFromShape(e.shape)>0}));return 1===s.length?Pke({inputs:{x:s[0]},backend:n}):O_e(s,a,n)}var D_e={kernelName:Tq,backendName:"webgl",kernelFunc:M_e},F_e=(0,C.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];N(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,f=t.dilationWidth,h=t.filterHeight,p=t.filterWidth,d=4*Math.floor(t.inChannels/4),m=t.inChannels%4,v="channelsLast"===t.dataFormat,g=v?1:2,y=v?2:3,b=v?3:1,x="",w="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),w="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(p,"; wC++) {\n            int xC = xCCorner + wC * ").concat(f,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(d,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(v,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===m,") {\n\n              if (").concat(v,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(d,") *\n                    getW(wR, wC, ").concat(d,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(d,", xR, xC) *\n                    getW(wR, wC, ").concat(d,", d2);\n              }\n\n            } else if (").concat(2===m,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(d,", d2),\n                getW(wR, wC, ").concat(d," + 1, d2)\n              );\n\n              if (").concat(v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(d,"),\n                  getX(batch, xR, xC, ").concat(d," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(d,", xR, xC),\n                  getX(batch, ").concat(d," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===m,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(d,", d2),\n                getW(wR, wC, ").concat(d," + 1, d2),\n                getW(wR, wC, ").concat(d," + 2, d2)\n              );\n\n              if (").concat(v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(d,"),\n                  getX(batch, xR, xC, ").concat(d," + 1),\n                  getX(batch, xR, xC, ").concat(d," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(d,", xR, xC),\n                  getX(batch, ").concat(d," + 1, xR, xC),\n                  getX(batch, ").concat(d," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(k,"\n        ").concat(w,"\n        setOutput(result);\n      }\n    ")})),P_e=(0,C.Z)((function e(t){N(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,f=t.filterDepth,h=t.filterHeight,p=t.filterWidth,d=4*Math.floor(t.inChannels/4),m=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(f,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(d,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===m,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(d,") *\n                  getW(wF, wR, wC, ").concat(d,", d2);\n              } else if (").concat(2===m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(d,"),\n                  getX(batch, xF, xR, xC, ").concat(d," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(d,", d2),\n                  getW(wF, wR, wC, ").concat(d," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(d,"),\n                  getX(batch, xF, xR, xC, ").concat(d," + 1),\n                  getX(batch, xF, xR, xC, ").concat(d," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(d,", d2),\n                  getW(wF, wR, wC, ").concat(d," + 1, d2),\n                  getW(wF, wR, wC, ").concat(d," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),L_e=(0,C.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];N(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Oxe(this.outputShape.length);for(var o=t.padInfo.left,s=t.strideWidth,u=t.dilationWidth,c=t.filterHeight,l=t.filterWidth,f=l,h="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;",p=0;p<l;p++)h+="\n           vec4 xTexelC".concat(2*p,";\n           int xTexelC").concat(2*p,"Ready;\n           vec4 xTexelC").concat(2*p+1,";\n           int xTexelC").concat(2*p+1,"Ready;\n           vec4 xC").concat(p,";");h+="\n     for (int r = 0; r < ".concat(c,"; r++) {\n      for (int d1 = 0; d1 < ").concat(t.inChannels,"; d1 += 2) {\n       ");for(var d=0;d<l;d++)h+="\n           xTexelC".concat(2*d," = vec4(0.0);\n           xTexelC").concat(2*d,"Ready = 0;\n           xTexelC").concat(2*d+1," = vec4(0.0);\n           xTexelC").concat(2*d+1,"Ready = 0;\n           xC").concat(d," = vec4(0.0);");h+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(var m=0;m<(f+1)/2;m++){var v=2*m;if(h+="\n           xC = xCCorner + ".concat(v*u,";\n           "),1===s){if(v<l&&(o%2===1?(h+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                   xTexelC").concat(v," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(v,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(v,"Ready = 1;\n                 }\n               "),h+=1===u&&v>0?"\n                 xC".concat(v," = vec4(xTexelC").concat(v-2,".zw, xTexelC").concat(v,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(v," = vec4(previous.zw, xTexelC").concat(v,".xy);\n                   } else {\n                     xC").concat(v," = vec4(0.0, 0.0, xTexelC").concat(v,".xy);\n                   }\n                   ")):h+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                   xTexelC").concat(v," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(v,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(v,"Ready = 1;\n                 }\n\n                 xC").concat(v," = xTexelC").concat(v,";\n                 "),v+1<l)){var g=o%2===0?SY.nearestLargerEven(u):u;u%2===0&&o%2===1||u%2!==0&&o%2!==1?(h+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(g,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                     xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(v+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(v+1,"Ready = 1;\n                   }\n                   "),h+=u>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(v+1," = vec4(previous.zw, xTexelC").concat(v+1,".xy);\n                     } else {\n                      xC").concat(v+1," = vec4(0.0, 0.0, xTexelC").concat(v+1,".xy);\n                     }\n                     "):"\n                     xC".concat(v+1," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".xy);\n                     ")):h+=1===g?"\n                     xC".concat(v+1," = xTexelC").concat(v,";\n                     "):"\n                     xCOffset = xC + ".concat(g,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                       xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(v+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(v+1,"Ready = 1;\n                     }\n\n                     xC").concat(v+1," = xTexelC").concat(v+1,";\n                     ")}}else v<l&&(o%2===1?(h+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                   xTexelC").concat(v," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(v,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(v,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                   xTexelC").concat(v+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(v+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(v+1,"Ready = 1;\n                 }\n\n                 xC").concat(v," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".zw);\n               "),v+1<l&&(h+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(v+1," = vec4(xTexelC").concat(v+1,".xy, final.xy);\n                 "))):(h+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                   xTexelC").concat(v," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(v,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(v,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                   xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(v+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(v+1,"Ready = 1;\n                 }\n\n                 xC").concat(v," = vec4(\n                   xTexelC").concat(v,".xy, xTexelC").concat(v+1,".xy);\n               "),v+1<l&&(h+="\n                   xC".concat(v+1," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".zw);\n                 "))));v<l&&(h+="\n             wTexel = getW(r, ".concat(v,", d1, d2);\n             dotProd += xC").concat(v,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(t.inChannels,") {\n               dotProd += xC").concat(v,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),v+1<l&&(h+="\n               wTexel = getW(r, ".concat(v+1,", d1, d2);\n               dotProd += xC").concat(v+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(t.inChannels,") {\n                 dotProd += xC").concat(v+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}h+="\n     }\n   ",h+="\n     }\n   ",h+="\n     }\n   ";var y="",b="";r&&(y=a?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(r,"\n         }"):i?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(r,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(r,"\n         }"),b="result = activation(result);");var x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(y,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(h,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(x,"\n         ").concat(b,"\n         setOutput(result);\n       }\n     ")})),z_e=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=Oxe(this.outputShape.length);for(var r=n.dataFormat,a=Qbe(),i="channelsLast"===r,o=i?1:2,s=i?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(t[2]," && pos < ").concat(t[1],") {"),c="",l=0;l<=1;l++)for(var f=0;f<=1;f++)c+="\n          blockIndex = rc.z + ".concat(f,";\n          pos = rc.y + ").concat(l,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+f,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+f,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function B_e(e,t){var n=e.length;return n>=3?[].concat((0,I.Z)(e.slice(0,-3)),t?[e[n-3]*e[n-2],e[n-1]]:[e[n-3],e[n-2]*e[n-1]]):!t&&1===n&&e[0]>1?[e[0],1]:null}function W_e(e){var t,n=e.x,r=e.filter,a=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,f=void 0===l?0:l,h=e.activation,p=void 0===h?null:h,d=n.shape,m=i.texData.get(n.dataId),v=a.inChannels,g=d[0]*d[1]*d[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[];if(null!=c){var w=B_e(c.shape,b);null!=w&&(c=nSe({inputs:{x:c},backend:i,attrs:{shape:w}}),x.push(c))}if(null!=s){var k=B_e(s.shape,b);null!=k&&(s=nSe({inputs:{x:s},backend:i,attrs:{shape:k}}),x.push(s))}if((1!==g&&1!==y||!(v>1e3))&&m.isPacked&&b&&null!=m.texture&&d[2]%2!==0&&SY.arraysEqual(m.shape.slice(-3),d.slice(-3))){var S=d[0]*d[1]*(d[2]+1),_={dataId:n.dataId,shape:[1,S,a.inChannels],dtype:n.dtype},T=m.shape;m.shape=m.shape.slice(),m.shape[m.shape.length-2]++,SY.assert(zbe(m.shape,_.shape),(function(){return"packed reshape ".concat(m.shape," to ").concat(_.shape," isn't free")}));var I=nSe({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(I);var N=dSe({a:_,b:I,backend:i,transposeA:!1,transposeB:false,bias:s,activation:p,preluActivationWeights:c,leakyreluAlpha:f}),C=i.texData.get(N.dataId);SY.assert(C.isPacked,(function(){return"batchMatMul result is expected to be packed"})),m.shape=T,C.shape=a.outShape,(t=Pke({inputs:{x:N},backend:i})).shape=a.outShape,x.push(N)}else{var E=a.outHeight*a.outWidth,A=nSe({inputs:{x:n},backend:i,attrs:{shape:b?[a.batchSize,E,a.inChannels]:[a.batchSize,a.inChannels,E]}}),R=nSe({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),O=dSe({a:b?A:R,b:b?R:A,transposeA:!b,transposeB:false,backend:i,bias:s,activation:p,preluActivationWeights:c,leakyreluAlpha:f});t=nSe({inputs:{x:O},backend:i,attrs:{shape:a.outShape}}),x.push(A),x.push(R),x.push(O)}for(var M=0,D=x;M<D.length;M++){var F=D[M];i.disposeIntermediateTensorInfo(F)}return t}function V_e(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,u=void 0===s?null:s,c=e.leakyreluAlpha,l=void 0===c?0:c,f=e.activation,h=void 0===f?null:f,p=r.filterWidth,d=r.filterHeight,m=r.inChannels,v=r.outWidth,g=r.outHeight,y="channelsLast"===r.dataFormat,b=p*d*m,x=g*v,w=[r.batchSize,b,x],k=[];if(null!=u){var S=B_e(u.shape,y);null!=S&&(u=nSe({inputs:{x:u},backend:a,attrs:{shape:S}}),k.push(u))}if(null!=o){var _=B_e(o.shape,y);null!=_&&(o=nSe({inputs:{x:o},backend:a,attrs:{shape:_}}),k.push(o))}var T=nSe({inputs:{x:n},backend:a,attrs:{shape:[1,b,SY.sizeFromShape(n.shape)/b]}});k.push(T);var I=new z_e(w,r),N=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],C=a.runWebGLProgram(I,[t],"float32",N),E=nSe({inputs:{x:C},backend:a,attrs:{shape:w}});k.push(C),k.push(E);var A=null!=o,R=null!=u,O="leakyrelu"===h,M=h?Kke(h,!0):null,D=new Xke(y?E.shape:T.shape,y?T.shape:E.shape,y?[r.batchSize,x,r.outChannels]:[r.batchSize,r.outChannels,x],!0,!1,A,M,R,O),F=y?[E,T]:[T,E];if(o&&F.push(o),R&&F.push(u),O){var P=a.makeTensorInfo([],"float32",SY.createScalarValue(l,"float32"));F.push(P),k.push(P)}var L=a.runWebGLProgram(D,F,"float32"),z=nSe({inputs:{x:L},backend:a,attrs:{shape:r.outShape}});k.push(L);for(var B=0,W=k;B<W.length;B++){var V=W[B];a.disposeIntermediateTensorInfo(V)}return z}var j_e={kernelName:Iq,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dataFormat,l=a.dilations,f=a.dimRoundingMode,h=i8.convertConv2DDataFormat(c),p=i8.computeConv2DInfo(i.shape,o.shape,s,l,u,f,!1,h);if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(p.strideWidth<=2&&"channelsLast"===h&&GG().getBool("WEBGL_EXP_CONV")){var d=new L_e(p),m=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];t=r.runWebGLProgram(d,[i,o],"float32",m)}else if(GG().getBool("WEBGL_CONV_IM2COL"))t=V_e({x:i,filter:o,convInfo:p,backend:r});else{var v=new F_e(p);t=r.runWebGLProgram(v,[i,o],"float32")}else t=W_e({x:i,filter:o,convInfo:p,backend:r});var g=nSe({inputs:{x:t},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(t),g}},U_e=(0,C.Z)((function e(t){N(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(o,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),H_e=(0,C.Z)((function e(t){N(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=o?1:2,l=o?2:3,f=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(f,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),Z_e=(0,C.Z)((function e(t){N(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),G_e=(0,C.Z)((function e(t){N(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var q_e={kernelName:Nq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape,f=i8.convertConv2DDataFormat(u),h=i8.computeConv2DInfo(a.shape,l,o,1,s,c,!1,f),p=new U_e(h);return n.runWebGLProgram(p,[a,i],"float32")}};var K_e={kernelName:Cq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode,f=i8.convertConv2DDataFormat(c),h=i8.computeConv2DInfo(o,i.shape,s,1,u,l,!1,f),p=new H_e(h);return n.runWebGLProgram(p,[a,i],"float32")}};var X_e={kernelName:Eq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=i8.computeConv3DInfo(a.shape,i.shape,o,u,s),l=new P_e(c);return n.runWebGLProgram(l,[a,i],"float32")}};var Y_e={kernelName:Aq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape,c=i8.computeConv3DInfo(a.shape,u,o,1,s),l=new Z_e(c);return n.runWebGLProgram(l,[a,i],"float32")}};var $_e,Q_e={kernelName:Rq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=r.inputShape,c=i8.computeConv3DInfo(u,i.shape,s,1,o),l=new G_e(c);return n.runWebGLProgram(l,[a,i],"float32")}},J_e=Gke({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),eTe={kernelName:Oq,backendName:"webgl",kernelFunc:J_e},tTe=Gke({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),nTe={kernelName:Mq,backendName:"webgl",kernelFunc:tTe},rTe=(0,C.Z)((function e(t,n,r,a,i){N(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=(0,T.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3],f=(0,T.Z)(n,1)[0],h=(0,T.Z)(r,2),p=h[0],d=h[1];this.outputShape=[f,p,d,l];var m="bilinear"===a?1:0,v="".concat(u-1,".0"),g="".concat(c-1,".0"),y=p>1?["".concat((u-1)/(p-1)),"(y2-y1) * height_ratio","y1*".concat(v," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(v)],b=(0,T.Z)(y,3),x=b[0],w=b[1],k=b[2],S=d>1?["".concat((c-1)/(d-1)),"(x2-x1) * width_ratio","x1*".concat(g," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(g)],_=(0,T.Z)(S,3),I=_[0],C=_[1],E=_[2];this.userCode="\n      const float height_ratio = float(".concat(x,");\n      const float width_ratio = float(").concat(I,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(w,";\n        float width_scale = ").concat(C,";\n\n        float in_y = ").concat(k,";\n        if( in_y < 0.0 || in_y > ").concat(v," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(E,";\n        if( in_x < 0.0 || in_x > ").concat(g," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(m," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),aTe={kernelName:Pq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new rTe(a.shape,i.shape,s,u,c);return n.runWebGLProgram(l,[a,i,o],"float32")}};!function(e){e.Prod="*",e.Sum="+"}($_e||($_e={}));var iTe=(0,C.Z)((function e(t,n,r,a){N(this,e),this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];var i=this.outputShape.length,o=this.op===$_e.Prod?"1.0":"0.0",s=r?o:"getX(".concat(oTe(i,"coords",this.op),")"),u=this.outputShape[this.outputShape.length-1],c="",l="";r?(c=a?"end != ".concat(u-1):"end != 0",l=a?"end + 1":"end - 1"):(c=a?"end + pow2 < ".concat(u):"end >= pow2",l=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(Sxe(i)," coords = getOutputCoords();\n        int end = ").concat(sTe(i,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(c,") {\n          int idx = ").concat(l,";\n          ").concat(sTe(i,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(oTe(i,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}));function oTe(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function sTe(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function uTe(e,t,n,r,a,i){var o=t.shape.length,s=i8.getAxesPermutation([r],o),u=t;null!=s&&(u=hSe({inputs:{x:t},backend:n,attrs:{perm:s}}));var c=i8.getInnerMostAxes(1,o)[0];if(c!==o-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," but got axis=").concat(r));for(var l=u.shape[c],f=Pke({inputs:{x:u},backend:n}),h=0;h<=Math.ceil(Math.log2(l))-1;h++){var p=new iTe(e,u.shape,!1,i),d=[[h]],m=f;f=n.runWebGLProgram(p,[f],f.dtype,d),n.disposeIntermediateTensorInfo(m)}if(a){var v=new iTe(e,u.shape,a,i),g=f;f=n.runWebGLProgram(v,[f],f.dtype),n.disposeIntermediateTensorInfo(g)}if(null!=s){var y=hSe({inputs:{x:f},backend:n,attrs:{perm:i8.getUndoAxesPermutation(s)}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(u),y}return f}var cTe={kernelName:Dq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return uTe($_e.Prod,a,n,i,o,s)}};var lTe={kernelName:Fq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return uTe($_e.Sum,a,n,i,o,s)}};var fTe={kernelName:Lq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=fwe(u,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}if(2===a.shape.length){var f=n.bufferSync(a),h=n.bufferSync(i),p=hwe(f,h,o,s);return n.makeTensorInfo(p.shape,i.dtype,p.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}},hTe=function(){function e(t,n,r){N(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return(0,C.Z)(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var pTe={kernelName:zq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,c=("NHWC"===o?a.shape[2]:a.shape[3])*i,l=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),f=new hTe("NHWC"===o?[s,u,c,l]:[s,l,u,c],i,o);return n.runWebGLProgram(f,[a],a.dtype)}},dTe=(0,C.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];N(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Oxe(this.outputShape.length);var o=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,c="",l="";r&&(c=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),l="result = activation(result);");var f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(f,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")})),mTe=(0,C.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];N(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Oxe(this.outputShape.length);for(var o=t.outChannels/t.inChannels,s=t.padInfo.left,u=t.strideWidth,c=t.dilationWidth,l=t.filterHeight,f=t.filterWidth,h=f,p="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",d=0;d<f;d++)p+="\n          vec4 xTexelC".concat(2*d,";\n          int xTexelC").concat(2*d,"Ready;\n          vec4 xTexelC").concat(2*d+1,";\n          int xTexelC").concat(2*d+1,"Ready;\n          vec4 xC").concat(d,";");p+="\n    for (int r = 0; r < ".concat(l,"; r++) {\n      ");for(var m=0;m<f;m++)p+="\n          xTexelC".concat(2*m," = vec4(0.0);\n          xTexelC").concat(2*m,"Ready = 0;\n          xTexelC").concat(2*m+1," = vec4(0.0);\n          xTexelC").concat(2*m+1,"Ready = 0;\n          xC").concat(m," = vec4(0.0);");p+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var v=0;v<(h+1)/2;v++){var g=2*v;if(p+="\n          xC = xCCorner + ".concat(g*c,";\n          "),1===u){if(g<f&&(s%2===1?(p+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n              "),p+=1===c&&g>0?"\n                xC".concat(g," = vec4(xTexelC").concat(g-2,".zw, xTexelC").concat(g,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(g," = vec4(previous.zw, xTexelC").concat(g,".xy);\n                  } else {\n                    xC").concat(g," = vec4(0.0, 0.0, xTexelC").concat(g,".xy);\n                  }\n                  ")):p+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                xC").concat(g," = xTexelC").concat(g,";\n                "),g+1<f)){var y=s%2===0?SY.nearestLargerEven(c):c;c%2===0&&s%2===1||c%2!==0&&s%2!==1?(p+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                    xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(g+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(g+1,"Ready = 1;\n                  }\n                  "),p+=c>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(g+1," = vec4(previous.zw, xTexelC").concat(g+1,".xy);\n                    } else {\n                     xC").concat(g+1," = vec4(0.0, 0.0, xTexelC").concat(g+1,".xy);\n                    }\n                    "):"\n                    xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".xy);\n                    ")):p+=1===y?"\n                    xC".concat(g+1," = xTexelC").concat(g,";\n                    "):"\n                    xCOffset = xC + ".concat(y,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                      xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(g+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(g+1,"Ready = 1;\n                    }\n\n                    xC").concat(g+1," = xTexelC").concat(g+1,";\n                    ")}}else g<f&&(s%2===1?(p+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                  xTexelC").concat(g+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(g+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g+1,"Ready = 1;\n                }\n\n                xC").concat(g," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n              "),g+1<f&&(p+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(g+1," = vec4(xTexelC").concat(g+1,".xy, final.xy);\n                "))):(p+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                  xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(g+1,"Ready = 1;\n                }\n\n                xC").concat(g," = vec4(\n                  xTexelC").concat(g,".xy, xTexelC").concat(g+1,".xy);\n              "),g+1<f&&(p+="\n                  xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n                "))));g<f&&(p+="\n            wTexel = getW(r, ".concat(g,", d1, q);\n            dotProd += xC").concat(g," * vec4(wTexel.xz, wTexel.xz);\n          "),g+1<f&&(p+="\n              wTexel = getW(r, ".concat(g+1,", d1, q);\n              dotProd += xC").concat(g+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}p+="\n    }\n  ",p+="\n      }\n    ";var b="",x="";r&&(b=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),x="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(p,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(w,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}));var vTe={kernelName:Bq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode,l=u;null==l&&(l=[1,1]),SY.assert(i8.eitherStridesOrDilationsAreOne(o,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(l,"'")}));var f,h=i8.computeConv2DInfo(a.shape,i.shape,o,l,s,c,!0);f=GG().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?new mTe(h):new dTe(h);var p=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(f,[a,i],"float32",p)}},gTe=(0,C.Z)((function e(t){N(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),yTe=(0,C.Z)((function e(t){N(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var bTe={kernelName:Wq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape,f=i8.computeConv2DInfo(a.shape,l,o,s,u,c,!0),h=new gTe(f);return n.runWebGLProgram(h,[a,i],"float32")}};var xTe={kernelName:Vq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.inputShape,f=i8.computeConv2DInfo(l,i.shape,o,s,u,c,!0),h=new yTe(f);return n.runWebGLProgram(h,[a,i],"float32")}},wTe=(0,C.Z)((function e(t){N(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var kTe={kernelName:jq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat((0,I.Z)(r.shape),(0,I.Z)(r.shape)),i=SY.sizeFromShape(r.shape),o=nSe({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new wTe(i),u=n.runWebGLProgram(s,[o],o.dtype),c=nSe({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),c}},STe=(0,C.Z)((function e(t){N(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,f=a.top,h=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(f,", ").concat(h,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var _Te={kernelName:Uq,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dilations,l=i8.computeDilation2DInfo(i.shape,o.shape,s,u,"NHWC",c),f=new STe(l),h=nSe({inputs:{x:t=r.runWebGLProgram(f,[i,o],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),h}};var TTe={kernelName:qq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,a=t,i=i8.decodeEinsumEquation(r,a.length),o=i.allDims,s=i.summedDims,u=i.idDims;i8.checkEinsumDimSizes(o.length,u,a);for(var c=i8.getEinsumComputePath(s,u),l=c.path,f=c.steps,h=f.length,p=null,d=o.length,m=[],v=0;v<h;++v){var g,y=Oo(f[v]);try{for(y.s();!(g=y.n()).done;){var b=g.value,x=i8.getEinsumPermutation(d,u[b]),w=x.permutationIndices,k=x.expandDims,S=void 0;i8.isIdentityPermutation(w)?S=a[b]:(S=hSe({inputs:{x:a[b]},backend:n,attrs:{perm:w}}),m.push(S));for(var _=S.shape.slice(),T=0;T<k.length;++T)_.splice(k[T],0,1);SY.arraysEqual(S.shape,_)||(S=nSe({inputs:{x:S},backend:n,attrs:{shape:_}}),m.push(S)),null===p?p=S:(p=eSe({inputs:{a:S,b:p},backend:n}),m.push(p))}}catch(cBe){y.e(cBe)}finally{y.f()}v<h-1&&(l[v]>=0&&(p=lSe({inputs:{x:p},backend:n,attrs:{axis:l[v]-(o.length-d),keepDims:!1}}),m.push(p)),d--)}for(var I=0,N=m;I<N.length;I++){var C=N[I];C!==p&&n.disposeIntermediateTensorInfo(C)}return p}},ITe=Gke({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),NTe={kernelName:Kq,backendName:"webgl",kernelFunc:ITe},CTe={kernelName:Xq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=GG().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Fke("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new Dke("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},ETe=qke({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:vwe}),ATe={kernelName:$q,backendName:"webgl",kernelFunc:ETe},RTe=Gke({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(i8.ERF_P,";\n  float a1 = ").concat(i8.ERF_A1,";\n  float a2 = ").concat(i8.ERF_A2,";\n  float a3 = ").concat(i8.ERF_A3,";\n  float a4 = ").concat(i8.ERF_A4,";\n  float a5 = ").concat(i8.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),OTe={kernelName:Yq,backendName:"webgl",kernelFunc:RTe},MTe=Gke({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:gwe,dtype:"float32"}),DTe={kernelName:Qq,backendName:"webgl",kernelFunc:MTe};function FTe(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),u=a;return a<0&&(SY.assert(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+a+1),s.splice(u,0,1),nSe({inputs:{x:i},backend:r,attrs:{shape:s}})}var PTe={kernelName:Jq,backendName:"webgl",kernelFunc:FTe},LTe="return exp(x) - 1.0;",zTe=Gke({opSnippet:LTe,packedOpSnippet:LTe,cpuKernelImpl:ywe}),BTe={kernelName:eK,backendName:"webgl",kernelFunc:zTe},WTe=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function VTe(e,t,n){var r=n.texData.get(e.dataId),a=SY.sizeFromShape(e.shape),i=e.shape[e.shape.length-1],o=nSe({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),s=o.shape,u=new WTe("real",s,t),c=new WTe("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],f=n.runWebGLProgram(u,l,"float32"),h=n.runWebGLProgram(c,l,"float32"),p=zke({inputs:{real:f,imag:h},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h);var d=nSe({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(p),d}var jTe={kernelName:tK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return VTe(t.input,!1,n)}},UTe=(0,C.Z)((function e(t,n){N(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function HTe(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||SY.inferDtype(a))){var o=SY.getArrayFromDType(i,SY.sizeFromShape(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new UTe(r,a),u=[[a]];return t.runWebGLProgram(s,[],i,u)}var ZTe,GTe={kernelName:nK,backendName:"webgl",kernelFunc:HTe},qTe=(0,C.Z)((function e(t){N(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),KTe={kernelName:rK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new qTe(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},XTe="return floor(x);",YTe=Gke({opSnippet:XTe,packedOpSnippet:XTe,cpuKernelImpl:bwe}),$Te={kernelName:aK,backendName:"webgl",kernelFunc:YTe},QTe=qke({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),JTe={kernelName:iK,backendName:"webgl",kernelFunc:QTe},eIe=(0,C.Z)((function e(t){N(this,e),this.variableNames=["A"];var n=Qbe(),r=(0,T.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),tIe=(0,C.Z)((function e(t){N(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=Qbe(),r=(0,T.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),nIe={kernelName:iY,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,u=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=(0,T.Z)(u,2),l=c[0],f=c[1],h=[f,l],p=[f,l,i];if(s||o){var d=GG().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(null==ZTe||d!==rIe)&&(rIe=d,ZTe=document.createElement("canvas").getContext("2d",{willReadFrequently:rIe})),ZTe.canvas.width=l,ZTe.canvas.height=f,ZTe.drawImage(a,0,0,l,f),a=ZTe.canvas}var m=n.makeTensorInfo(h,"int32");n.texData.get(m.dataId).usage=Zye.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(m.dataId),a);var v=GG().getBool("WEBGL_PACK")?new tIe(p):new eIe(p),g=n.runWebGLProgram(v,[m],"int32");return n.disposeData(m.dataId),g}},rIe=GG().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");var aIe={kernelName:uY,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=n.bias,u=n.preluActivationWeights,c=a.strides,l=a.pad,f=a.dataFormat,h=a.dilations,p=a.dimRoundingMode,d=a.activation,m=a.leakyreluAlpha,v=i8.convertConv2DDataFormat(f),g=i8.computeConv2DInfo(i.shape,o.shape,c,h,l,p,!1,v),y=[],b=null!=s,x=null!=u,w="leakyrelu"===d,k=function(){var e=[i,o],t=function(e,t){if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){var n=nSe({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return y.push(n),n}return e};if(b&&e.push(t(s,f)),x&&e.push(t(u,f)),w){var n=r.makeTensorInfo([],"float32",SY.createScalarValue(m,"float32"));e.push(n),y.push(n)}return e};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===v&&GG().getBool("WEBGL_EXP_CONV")){var S=d?Kke(d,!0):null,_=new L_e(g,b,S,x,w),T=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],I=k();t=r.runWebGLProgram(_,I,"float32",T)}else if(GG().getBool("WEBGL_CONV_IM2COL"))t=V_e({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:d,preluActivationWeights:u,leakyreluAlpha:m});else{var N=d?Kke(d,!1):null,C=new F_e(g,b,N,x,w),E=k();t=r.runWebGLProgram(C,E,"float32")}else t=W_e({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:d,preluActivationWeights:u,leakyreluAlpha:m});var A=nSe({inputs:{x:t},backend:r,attrs:{shape:g.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),A}};var iIe={kernelName:cY,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dilations,f=r.dimRoundingMode,h=r.activation,p=r.leakyreluAlpha,d=[],m=l;null==m&&(m=[1,1]),SY.assert(i8.eitherStridesOrDilationsAreOne(u,m),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(u," and dilations '").concat(m,"'")}));var v,g=i8.computeConv2DInfo(a.shape,i.shape,u,m,c,f,!0),y=GG().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=h?Kke(h,y):null,x=[a,i],w=null!=o,k=null!=s,S="leakyrelu"===h;if(w&&x.push(o),k&&x.push(s),S){var _=n.makeTensorInfo([],"float32",SY.createScalarValue(p,"float32"));x.push(_),d.push(_)}v=y?new mTe(g,w,b,k,S):new dTe(g,w,b,k,S);var T=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],I=n.runWebGLProgram(v,x,"float32",T);return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),I}},oIe=(0,C.Z)((function e(t,n,r,a){N(this,e),this.sliceDim=t,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;for(var i=Sxe(r.length),o="\n    int index;",s=0;s<this.sliceDim;s++)o+="\n          index = round(getIndices(coords[0], ".concat(s,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[s],";\n          flattenIndex += index * ").concat(this.strides[s],";");this.userCode="\n         void main() {\n          ".concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(o,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}));var sIe={kernelName:uK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=SY.sizeFromShape(r.shape),u=i8.prepareAndValidate(r,a),c=(0,T.Z)(u,4),l=c[0],f=c[1],h=c[2],p=c[3],d=nSe({inputs:{x:a},backend:n,attrs:{shape:[f,o]}}),m=nSe({inputs:{x:r},backend:n,attrs:{shape:[SY.sizeFromShape(r.shape)/h,h]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var v=n.readSync(a.dataId),g=n.bufferSync(r),y=xwe(v,g,r.dtype,f,o,h,p,r.shape,s);return n.makeTensorInfo(l,r.dtype,y.values)}var b=new oIe(o,p,[f,h],r.shape),x=n.runWebGLProgram(b,[m,d],m.dtype),w=nSe({inputs:{x:x},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(x),w}},uIe=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=Sxe(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function cIe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,u=SY.parseAxisParam(o,a.shape)[0];GG().get("DEBUG")&&function(){for(var e=n.readSync(i.dataId),t=a.shape[u],r=function(n){var r=e[n];SY.assert(r<=t-1&&r>=0,(function(){return"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")}))},o=0;o<e.length;++o)r(o)}();var c=i8.segment_util.collectGatherOpShapeInfo(a,i,u,s),l=SY.sizeFromShape(i.shape),f=[],h=nSe({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=nSe({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,l/c.batchSize]}});f.push(h),f.push(p);var d=[c.batchSize,c.outerSize,l/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var m=n.bufferSync(p),v=n.bufferSync(h),g=wwe(v,m,d);return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(c.outputShape,g.dtype,g.values)}var y=new uIe(h.shape,d),b=n.runWebGLProgram(y,[h,p],h.dtype);f.push(b);var x=nSe({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}var lIe={kernelName:sK,backendName:"webgl",kernelFunc:cIe},fIe=qke({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:kwe,dtype:"bool"}),hIe={kernelName:cK,backendName:"webgl",kernelFunc:fIe},pIe=qke({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:Swe}),dIe={kernelName:lK,backendName:"webgl",kernelFunc:pIe};var mIe={kernelName:hK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return VTe(t.input,!0,n)}},vIe=Gke({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),gIe={kernelName:dK,backendName:"webgl",kernelFunc:vIe},yIe=Gke({opSnippet:"return float(isinf(x));",dtype:"bool"}),bIe={kernelName:mK,backendName:"webgl",kernelFunc:yIe},xIe=Gke({opSnippet:"return float(isnan(x));",dtype:"bool"}),wIe={kernelName:vK,backendName:"webgl",kernelFunc:xIe},kIe=qke({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:_we,dtype:"bool"}),SIe={kernelName:yK,backendName:"webgl",kernelFunc:kIe},_Ie=qke({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:Twe,dtype:"bool"}),TIe={kernelName:bK,backendName:"webgl",kernelFunc:_Ie};var IIe={kernelName:xK,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=Iwe(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},NIe=Gke({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:Nwe}),CIe={kernelName:wK,backendName:"webgl",kernelFunc:NIe},EIe=Gke({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),AIe={kernelName:kK,backendName:"webgl",kernelFunc:EIe},RIe=qke({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),OIe={kernelName:SK,backendName:"webgl",kernelFunc:RIe},MIe=Gke({opSnippet:"return float(!(x >= 1.0));"}),DIe={kernelName:_K,backendName:"webgl",kernelFunc:MIe},FIe=qke({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),PIe={kernelName:TK,backendName:"webgl",kernelFunc:FIe},LIe=(0,C.Z)((function e(t,n,r,a,i){N(this,e),this.variableNames=["x"],this.outputShape=[];var o=n,s=t[3]-1;this.outputShape=t;var u,c="float(".concat(r,") + float(").concat(a,") * sum");u=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(o,"; j <= ").concat(o,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(s,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(u,";\n        setOutput(val);\n      }\n    ")})),zIe=(0,C.Z)((function e(t,n,r,a,i){N(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o=n,s=t[3]-1;this.outputShape=t;var u,c="float(".concat(r,") + float(").concat(a,") * sum");u=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(o,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(o,"; j <= ").concat(o,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(s,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(u,";\n        setOutput(result);\n      }\n    ")})),BIe={kernelName:EK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta,c=GG().getBool("WEBGL_PACK_NORMALIZATION")?new zIe(a.shape,i,o,s,u):new LIe(a.shape,i,o,s,u);return n.runWebGLProgram(c,[a],a.dtype)}},WIe=(0,C.Z)((function e(t,n,r,a,i){N(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),VIe={kernelName:AK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta,f=new WIe(a.shape,s,u,c,l);return n.runWebGLProgram(f,[a,i,o],a.dtype)}};function jIe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=a.shape.length,u=SY.parseAxisParam(i,a.shape),c=u,l=i8.getAxesPermutation(c,s),f=null!=l,h=n.shouldExecuteOnCPU([a]),p=a;if(f){if(h){for(var d=n.texData.get(p.dataId).values,m=new Array(s),v=0;v<m.length;v++)m[v]=a.shape[l[v]];var g=tke(d,a.shape,a.dtype,l,m);p=n.makeTensorInfo(m,a.dtype),n.texData.get(p.dataId).values=g}else p=cSe(a,l,n);c=i8.getInnerMostAxes(c.length,s)}i8.assertAxesAreInnerMostDims("max",c,s);var y,b=i8.computeOutAndReduceShapes(p.shape,c),x=(0,T.Z)(b,2),w=x[0],k=x[1],S=w;if(o&&(S=i8.expandShapeToKeepDim(w,u)),h){d=n.texData.get(p.dataId).values,m=Cwe(d,SY.sizeFromShape(k),S,a.dtype);y=n.makeTensorInfo(S,a.dtype),(g=n.texData.get(y.dataId)).values=m}else y=function(e,t,n,r){var a=SY.sizeFromShape(t),i=nSe({inputs:{x:e},attrs:{shape:[SY.sizeFromShape(e.shape)/a,a]},backend:r}),o=oSe(i,e.dtype,"max",r),s=nSe({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(p,k,S,n);return f&&n.disposeIntermediateTensorInfo(p),y}var UIe={kernelName:RK,backendName:"webgl",kernelFunc:jIe},HIe=qke({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:Ewe}),ZIe={kernelName:OK,backendName:"webgl",kernelFunc:HIe};var GIe={kernelName:MK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;Ybe(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;SY.assert(i8.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=i8.computePool2DInfo(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&SY.arraysEqual(c.inShape,c.outShape))return Pke({inputs:{x:a},backend:n});var l=new qSe(c,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}};var qIe={kernelName:FK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=i8.computePool3DInfo(a.shape,i,o,[1,1,1],s,c,u),f=new KSe(l,"max",!1);return n.runWebGLProgram(f,[a],a.dtype)}},KIe=(0,C.Z)((function e(t){N(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,u=o-1-t.padInfo.left,c=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),XIe=(0,C.Z)((function e(t){N(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,f=u-1-t.padInfo.front,h=c-1-t.padInfo.top,p=l-1-t.padInfo.left,d=u*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(f,", ").concat(h,", ").concat(p,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(d," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var YIe={kernelName:PK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=i8.computePool3DInfo(i.shape,o,s,[1,1,1],u,c),f=new KSe(l,"max",!0),h=n.runWebGLProgram(f,[i],i.dtype),p=new XIe(l),d=n.runWebGLProgram(p,[a,h],i.dtype);return n.disposeIntermediateTensorInfo(h),d}};var $Ie={kernelName:DK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;Ybe([i,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,f=i8.computePool2DInfo(o.shape,s,u,1,c,l),h=new qSe(f,"max",!0),p=n.runWebGLProgram(h,[o],o.dtype),d=new KIe(f),m=n.runWebGLProgram(d,[a,p],o.dtype);return n.disposeIntermediateTensorInfo(p),m}};var QIe={kernelName:LK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;SY.assert(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var l=[1,1];SY.assert(i8.eitherStridesOrDilationsAreOne(o,l),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(l,"'")}));var f=i8.computePool2DInfo(a.shape,i,o,l,s),h=function(e,t,n,r){var a=new qSe(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new qSe(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,u,f,c),p=(0,T.Z)(h,2);return[p[0],p[1]]}};var JIe={kernelName:zK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.keepDims,o=n.axis,s=r,u=a.shape.length,c=SY.parseAxisParam(o,a.shape),l=c,f=i8.getAxesPermutation(l,u),h=null!=f,p=s.shouldExecuteOnCPU([a]),d=[],m=a;if(h){if(p){for(var v=s.texData.get(m.dataId).values,g=new Array(u),y=0;y<g.length;y++)g[y]=a.shape[f[y]];var b=tke(v,a.shape,a.dtype,f,g);m=s.makeTensorInfo(g,a.dtype),s.texData.get(m.dataId).values=b}else m=cSe(a,f,s);d.push(m),l=i8.getInnerMostAxes(l.length,u)}i8.assertAxesAreInnerMostDims("sum",l,u);var x=i8.computeOutAndReduceShapes(m.shape,l),w=(0,T.Z)(x,2),k=w[0],S=w[1],_=k;i&&(_=i8.expandShapeToKeepDim(k,c));for(var I=function(e,t,n,r){var a=SY.sizeFromShape(t),i=nSe({inputs:{x:e},attrs:{shape:[SY.sizeFromShape(e.shape)/a,a]},backend:r}),o=oSe(i,"float32","mean",r),s=nSe({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(m,S,_,s),N=0,C=d;N<C.length;N++){v=C[N];s.disposeIntermediateTensorInfo(v)}return I}};var eNe={kernelName:BK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=SY.parseAxisParam(i,a.shape),c=u,l=i8.getAxesPermutation(c,s),f=a;null!=l&&(f=hSe({inputs:{x:a},backend:n,attrs:{perm:l}}),c=i8.getInnerMostAxes(c.length,a.shape.length)),i8.assertAxesAreInnerMostDims("min",c,s);var h,p=i8.computeOutAndReduceShapes(f.shape,c),d=(0,T.Z)(p,2),m=d[0],v=d[1],g=nSe({inputs:{x:f},backend:n,attrs:{shape:[-1,SY.sizeFromShape(v)]}}),y=oSe(g,g.dtype,"min",n);return h=nSe(o?{inputs:{x:y},backend:n,attrs:{shape:i8.expandShapeToKeepDim(m,u)}}:{inputs:{x:y},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),null!=l&&n.disposeIntermediateTensorInfo(f),h}},tNe=qke({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:Awe}),nNe={kernelName:WK,backendName:"webgl",kernelFunc:tNe},rNe=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=Sxe(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),aNe=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=Sxe(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=ake("rc",a),c=ake("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),f=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),h="reflect"===r?0:1,p="";if(1===a){var d="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(h,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(h,";\n        }\n        source -= start;\n      ");p="\n        ".concat(i," rc = outputLoc;\n        ").concat(d,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(d,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        }\n      ")}else{var m="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(h,") +\n                gte * ((end - 1) * 2 - source + ").concat(h,");\n        source -= start;\n      ");p="\n        ".concat(i," rc = outputLoc;\n        ").concat(m,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(m,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(m,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(m,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),iNe={kernelName:VK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=GG().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new aNe(a.shape,i,o):new rNe(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},oNe=qke({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),sNe={kernelName:jK,backendName:"webgl",kernelFunc:oNe},uNe=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),cNe=qke({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),lNe={kernelName:Gq,backendName:"webgl",kernelFunc:cNe},fNe="return a - b;",hNe=qke({opSnippet:fNe,packedOpSnippet:fNe,supportsComplex:!0,cpuKernelImpl:Qwe}),pNe={kernelName:GX,backendName:"webgl",kernelFunc:hNe};function dNe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=SY.parseAxisParam([i],a.shape),s=jIe({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),u=i8.expandShapeToKeepDim(s.shape,o),c=nSe({inputs:{x:s},backend:n,attrs:{shape:u}}),l=hNe({inputs:{a:a,b:c},backend:n}),f=MTe({inputs:{x:l},backend:n}),h=lSe({inputs:{x:f},backend:n,attrs:{axis:o,keepDims:!1}}),p=nSe({inputs:{x:h},backend:n,attrs:{shape:u}}),d=cNe({inputs:{a:f,b:p},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),d}var mNe={kernelName:DX,backendName:"webgl",kernelFunc:dNe};var vNe={kernelName:UK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,u=s?a:dNe({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],l=u.shape[1],f=new uNe(c,l,i),h=[[o]],p=n.runWebGLProgram(f,[u],"int32",h);return s||n.disposeIntermediateTensorInfo(u),p}};var gNe={kernelName:ZK,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=Owe(i.values,a.shape,a.dtype),s=(0,T.Z)(o,2),u=s[0],c=s[1];return r.makeTensorInfo(c,a.dtype,u)}return t=GG().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Tke(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new fke(a.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[a],a.dtype)}},yNe=c7.nonMaxSuppressionV3Impl;var bNe={kernelName:qK,backendName:"webgl",kernelFunc:function(e){i8.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(i.dataId),f=yNe(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}},xNe=c7.nonMaxSuppressionV4Impl;var wNe={kernelName:KK,backendName:"webgl",kernelFunc:function(e){i8.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize,l=n.readSync(a.dataId),f=n.readSync(i.dataId),h=xNe(l,f,o,s,u,c),p=h.selectedIndices,d=h.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}},kNe=c7.nonMaxSuppressionV5Impl;var SNe={kernelName:XK,backendName:"webgl",kernelFunc:function(e){i8.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),f=n.readSync(i.dataId),h=kNe(l,f,o,s,u,c),p=h.selectedIndices,d=h.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([d.length],"float32",new Float32Array(d))]}},_Ne=(0,C.Z)((function e(t,n,r,a){N(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),TNe={kernelName:$K,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.dtype,o=r.depth,s=r.onValue,u=r.offValue,c=SY.sizeFromShape(a.shape),l=new _Ne(c,o,s,u),f=nSe({inputs:{x:a},backend:n,attrs:{shape:[c]}}),h=n.runWebGLProgram(l,[f],i);n.disposeIntermediateTensorInfo(f);var p=nSe({inputs:{x:h},backend:n,attrs:{shape:[].concat((0,I.Z)(a.shape),[o])}});return n.disposeIntermediateTensorInfo(h),p}};function INe(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=m_e({inputs:{input:r},backend:n}),i=INe({inputs:{x:a},backend:n}),o=A_e({inputs:{input:r},backend:n}),s=INe({inputs:{x:o},backend:n}),u=zke({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return HTe({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var NNe={kernelName:rY,backendName:"webgl",kernelFunc:INe};var CNe={kernelName:YK,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=m_e({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=A_e({inputs:{input:a},backend:r}),u=INe({inputs:{x:s},backend:r}),c=zke({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return HTe({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var ENe={kernelName:QK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return FTe({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){SY.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),SY.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=M_e({inputs:t.map((function(e){var t=FTe({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},ANe=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=Sxe(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),RNe=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=Sxe(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=ake("rc",a),c=ake("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),f=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),h=["".concat(i," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(l,") {")],p=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",d="",m=0,v=1===a?2:4;m<v;m++)d+="\n        ".concat(h[m],"\n        if (").concat(p,") {\n          result[").concat(m,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(m,"] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        }\n      ");d+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(d,"\n        setOutput(result);\n      }\n    ")})),ONe=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(0===SY.sizeFromShape(a.shape))return HTe({backend:n,attrs:{shape:i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),value:o,dtype:a.dtype}});var s=GG().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new RNe(a.shape,i,o):new ANe(a.shape,i,o),u=[[o]];return n.runWebGLProgram(s,[a],a.dtype,u)},MNe={kernelName:JK,backendName:"webgl",kernelFunc:ONe},DNe=qke({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),FNe={kernelName:tX,backendName:"webgl",kernelFunc:DNe};var PNe={kernelName:rX,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims,u=i.shape.length,c=[],l=SY.parseAxisParam(o,i.shape),f=l,h=i8.getAxesPermutation(f,u),p=i;if(null!=h&&(p=hSe({inputs:{x:i},backend:r,attrs:{perm:h}}),f=i8.getInnerMostAxes(f.length,u),c.push(p)),i8.assertAxesAreInnerMostDims("prod",f,u),r.shouldExecuteOnCPU([p])){var d=r.texData.get(p.dataId).values,m=Dwe(p.shape,p.dtype,d,f),v=m.outVals,g=m.outShape,y=m.outDtype;t=r.makeTensorInfo(g,y,v)}else{var b=i8.computeOutAndReduceShapes(p.shape,f),x=(0,T.Z)(b,2),w=x[0],k=x[1],S=SY.sizeFromShape(k),_=nSe({inputs:{x:p},backend:r,attrs:{shape:[-1,S]}}),I=oSe(_,v$(i.dtype),"prod",r);t=nSe({inputs:{x:I},backend:r,attrs:{shape:w}}),c.push(_),c.push(I)}if(s){c.push(t);var N=i8.expandShapeToKeepDim(t.shape,l);t=nSe({inputs:{x:t},backend:r,attrs:{shape:N}})}return c.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}};var LNe={kernelName:aX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.paramsNestedSplits,i=t.paramsDenseValues,o=t.indices,s=r.outputRaggedRank,u=a.map((function(e){return n.readSync(e.dataId)})),c=a.map((function(e){return e.shape})),l=n.readSync(i.dataId),f=n.readSync(o.dataId),h=Fwe(u,c,l,i.shape,i.dtype,f,o.shape,s),p=(0,T.Z)(h,3),d=p[0],m=p[1],v=p[2],g=d.map((function(e){return n.makeTensorInfo([e.length],"int32",e)})),y=n.makeTensorInfo(v,i.dtype,m);return g.concat([y])}};var zNe={kernelName:iX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.starts,a=t.limits,i=t.deltas,o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=Pwe(o,r.shape,r.dtype,s,a.shape,u,i.shape),l=(0,T.Z)(c,2),f=l[0],h=l[1];return[n.makeTensorInfo([f.length],"int32",f),n.makeTensorInfo([h.length],r.dtype,h)]}};var BNe={kernelName:oX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.shape,i=t.values,o=t.defaultValue,s=t.rowPartitionTensors,u=r.rowPartitionTypes,c=n.readSync(a.dataId),l=n.readSync(i.dataId),f=n.readSync(o.dataId),h=s.map((function(e){return n.readSync(e.dataId)})),p=s.map((function(e){return e.shape})),d=Lwe(c,a.shape,l,i.shape,i.dtype,f,o.shape,h,p,u),m=(0,T.Z)(d,2),v=m[0],g=m[1];return n.makeTensorInfo(v,i.dtype,g)}},WNe=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=zwe(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},VNe={kernelName:sX,backendName:"webgl",kernelFunc:WNe},jNe=Gke({opSnippet:"return 1.0 / x;"}),UNe={kernelName:cX,backendName:"webgl",kernelFunc:jNe},HNe=Gke({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),ZNe={kernelName:lX,backendName:"webgl",kernelFunc:HNe},GNe=Gke({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),qNe={kernelName:vX,backendName:"webgl",kernelFunc:GNe},KNe=(0,C.Z)((function e(t,n,r,a,i){N(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,T.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var f,h=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),XNe=(0,C.Z)((function e(t,n,r,a,i){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,T.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var f,h=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],",\n          ").concat(h[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var YNe={kernelName:dX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,u=(0,T.Z)(s,2),c=u[0],l=u[1],f=GG().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new XNe(a.shape,c,l,i,o):new KNe(a.shape,c,l,i,o);return n.runWebGLProgram(f,[a],"float32")}},$Ne=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,T.Z)(n,3),i=a[1],o=a[2],s=(0,T.Z)(t,3),u=s[1],c=s[2],l=[r&&u>1?i-1:i,r&&c>1?o-1:o],f=[r&&u>1?u-1:u,r&&c>1?c-1:c],h=l[0]/f[0],p=l[1]/f[1],d=1/h,m=1/p,v=2*Math.ceil(d)+2,g=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(d,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var QNe={kernelName:mX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new $Ne(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},JNe=(0,C.Z)((function e(t,n,r,a,i){N(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,T.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var f,h=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],d=a?"0.5":"0.0";f=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),eCe=(0,C.Z)((function e(t,n,r,a,i){N(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,T.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var f,h=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],d=a?"0.5":"0.0";f=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],",\n          ").concat(h[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var tCe={kernelName:hX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,u=(0,T.Z)(s,2),c=u[0],l=u[1],f=GG().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new eCe(a.shape,c,l,i,o):new JNe(a.shape,c,l,i,o);return n.runWebGLProgram(f,[a],a.dtype)}},nCe=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,T.Z)(n,3),i=a[1],o=a[2],s=(0,T.Z)(t,3),u=s[1],c=s[2],l=[r&&u>1?i-1:i,r&&c>1?o-1:o],f=[r&&u>1?u-1:u,r&&c>1?c-1:c],h=l[0]/f[0],p=l[1]/f[1],d=1/h,m=1/p,v=2*Math.ceil(d)+2,g=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(d,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(l[0],") *\n                (float(dyR) / float(").concat(f[0],"));\n\n            float sourceFracCol =\n                float(").concat(l[1],") *\n                  (float(dyC) / float(").concat(f[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var rCe={kernelName:pX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new nCe(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},aCe=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=Sxe(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),iCe=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a,i=ake("rc",r),o="".concat(i[r-1]," + 1 < ").concat(this.outputShape[r-1]),s="".concat(i[r-2]," + 1 < ").concat(this.outputShape[r-2]),u=Sxe(r);function c(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(o,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(u," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat((a=i.slice(),c(a)),";\n          if(").concat(o,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",c(e)}(i.slice()),";\n          }\n          if(").concat(s,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",c(e)}(i.slice()),";\n            if(").concat(o,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",c(e)}(i.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var oCe={kernelName:gX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,s=SY.parseAxisParam(i,a.shape);if(0===o)return Pke({inputs:{x:a},backend:n});var u=GG().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new iCe(a.shape,s):new aCe(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},sCe=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var i="";i="number"==typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),uCe={kernelName:oY,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,c=new sCe(a.shape,o),l=i8.getImageCenter(s,a.shape[1],a.shape[2]),f=(0,T.Z)(l,2),h=[[f[0],f[1],Math.sin(i),Math.cos(i)]];return u.runWebGLProgram(c,[a],a.dtype,h)}},cCe=Gke({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),lCe={kernelName:yX,backendName:"webgl",kernelFunc:cCe},fCe=Gke({opSnippet:"return inversesqrt(x);",cpuKernelImpl:Bwe}),hCe={kernelName:bX,backendName:"webgl",kernelFunc:fCe},pCe=(0,C.Z)((function e(t,n,r,a,i,o){N(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=Sxe(i.length),u=Sxe(o.length),c="";1===r?c="i":2===r&&(c="i, j");var l="getIndices(".concat(c,")"),f="";1===a?f="i":2===a&&(f="i, coords[1]");var h="getUpdates(".concat(f,")"),p=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(p,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(h,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}));var dCe={kernelName:xX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=i8.calculateShapes(i,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,f=s.strides,h=s.outputSize,p=[h/l,l];if(0===h)return n.makeTensorInfo(o,a.dtype);var d=nSe({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),m=nSe({inputs:{x:i},backend:n,attrs:{shape:[c,l]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new pCe(c,u,d.shape.length,m.shape.length,f,p),y=n.runWebGLProgram(g,[m,d,v],m.dtype),b=nSe({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),b}},mCe=(0,C.Z)((function e(t,n,r,a){N(this,e),this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];var i="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),o=2===GG().getNumber("WEBGL_VERSION")?"while (left < right) {":i,s="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(o,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}));var vCe={kernelName:wX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=new mCe(a.shape[0],a.shape[1],i.shape[1],o),u=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",u)}},gCe=(0,C.Z)((function e(t,n,r){var a,i;if(N(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(o[c])),c<t&&s.push("".concat(o[c]));a=s.join(),i=u.join()}var l=Sxe(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}));var yCe={kernelName:kX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new gCe(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],m$(a.dtype,i.dtype))}},bCe=Gke({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(i8.SELU_SCALEALPHA,";\n  float scale = ").concat(i8.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),xCe={kernelName:SX,backendName:"webgl",kernelFunc:bCe},wCe=Gke({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:Vwe}),kCe={kernelName:CX,backendName:"webgl",kernelFunc:wCe},SCe=Gke({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),_Ce={kernelName:NX,backendName:"webgl",kernelFunc:SCe},TCe=Gke({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),ICe={kernelName:TX,backendName:"webgl",kernelFunc:TCe},NCe=Gke({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),CCe={kernelName:IX,backendName:"webgl",kernelFunc:NCe},ECe=Gke({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),ACe={kernelName:EX,backendName:"webgl",kernelFunc:ECe},RCe={kernelName:OX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;SY.assert(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,(0,I.Z)(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=[],f=ONe({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),h=i8.getReshaped(f.shape,i,s,!1),p=i8.getPermuted(h.length,i.length,!1),d=i8.getReshapedPermuted(f.shape,i,s,!1),m=nSe({inputs:{x:f},backend:n,attrs:{shape:h}}),v=hSe({inputs:{x:m},backend:n,attrs:{perm:p}}),g=nSe({inputs:{x:v},backend:n,attrs:{shape:d}});return l.push(f),l.push(m),l.push(v),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var OCe={kernelName:FX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.readSync(r.dataId),u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],f=Hwe(s,r.shape,r.dtype,u,a.dtype,c,l),h=(0,T.Z)(f,5),p=h[0],d=h[1],m=h[2],v=h[3],g=h[4];return[n.makeTensorInfo(d,r.dtype,p),n.makeTensorInfo([d[0]],a.dtype,m),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};var MCe={kernelName:PX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),u=Array.from(n.readSync(i.dataId)),c=Zwe(s,r.shape,r.dtype,o,u),l=(0,T.Z)(c,3),f=l[0],h=l[1],p=l[2];return[n.makeTensorInfo(h,r.dtype,f),n.makeTensorInfo([p.length],i.dtype,new Int32Array(p))]}};var DCe={kernelName:LX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=Gwe(o,r.shape,r.dtype,s,u,!0),l=(0,T.Z)(c,2),f=l[0],h=l[1];return n.makeTensorInfo(h,r.dtype,f)}};var FCe={kernelName:zX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=Gwe(o,r.shape,r.dtype,s,u),l=(0,T.Z)(c,2),f=l[0],h=l[1];return n.makeTensorInfo(h,r.dtype,f)}};var PCe={kernelName:BX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=i8.calculateShapes(i,a,s),c=u.sliceRank,l=u.numUpdates,f=u.sliceSize,h=u.strides,p=u.outputSize;if("string"===i.dtype){var d=n.bufferSync(a),m=n.bufferSync(i),v=SY.decodeString(n.readSync(o.dataId)[0]),g=Wwe(d,m,s,p,f,l,c,h,v,false);return n.makeTensorInfo(s,g.dtype,g.values)}var y=new pCe(l,c,a.shape.length,i.shape.length,h,[p,1],false),b=n.runWebGLProgram(y,[i,a,o],i.dtype),x=nSe({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(b),x}};var LCe={kernelName:MX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=r.axis,s=SY.parseAxisParam(o,a.shape)[0],u=i8.prepareSplitSize(a,i,s),c=a.shape.length,l=new Array(c).fill(0),f=a.shape.slice();return u.map((function(e){var t=(0,I.Z)(f);t[s]=e;var r=u_e({inputs:{x:a},backend:n,attrs:{begin:l,size:t}});return l[s]+=e,r}))}},zCe="return sqrt(x);",BCe=Gke({opSnippet:zCe,packedOpSnippet:zCe,cpuKernelImpl:qwe}),WCe={kernelName:AX,backendName:"webgl",kernelFunc:BCe},VCe=Gke({opSnippet:"return x * x;"}),jCe={kernelName:VX,backendName:"webgl",kernelFunc:VCe},UCe="return (a - b) * (a - b);",HCe=qke({opSnippet:UCe,packedOpSnippet:UCe}),ZCe={kernelName:WX,backendName:"webgl",kernelFunc:HCe};var GCe={kernelName:aY,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=hke+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new fke(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},qCe=(0,C.Z)((function e(t,n,r){N(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=Sxe(r.length),o=Sxe(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var KCe={kernelName:jX,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,f=a.ellipsisMask,h=a.newAxisMask,p=a.shrinkAxisMask,d=S0.sliceInfo(i.shape,o,s,u,c,l,f,h,p),m=d.finalShapeSparse,v=d.finalShape,g=d.isIdentity,y=d.sliceDim0,b=d.isSimpleSlice,x=d.begin,w=d.end,k=d.strides;if(g)t=nSe({inputs:{x:i},backend:r,attrs:{shape:v}});else if(y||b){SY.assert(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var S=S0.computeOutShape(x,w,k),_=u_e({inputs:{x:i},backend:r,attrs:{begin:x,size:S}});t=nSe({inputs:{x:_},backend:r,attrs:{shape:v}}),r.disposeIntermediateTensorInfo(_)}else if(r.shouldExecuteOnCPU([i])){var T=r.readSync(i.dataId),I=eJ(i.shape,i.dtype,T),N=Kwe(m,I,k,x);t=r.makeTensorInfo(v,i.dtype,N.values)}else{var C=new qCe(x,k,m);t=r.runWebGLProgram(C,[i],i.dtype)}var E=nSe({inputs:{x:t},backend:r,attrs:{shape:v}});return r.disposeIntermediateTensorInfo(t),E}};var XCe={kernelName:UX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,f=t.dataSplits,h=n.readSync(l.dataId),p=n.readSync(f.dataId),d=Xwe(h,p,a,i,o,s,u,c),m=(0,T.Z)(d,2),v=m[0],g=m[1];return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(f.shape,"int32",g)]}};var YCe={kernelName:HX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=n.readSync(a.dataId),s=n.readSync(i.dataId)[0],u=Ywe(o,s,r),c=(0,T.Z)(u,3),l=c[0],f=c[1],h=c[2],p=f.length;return[n.makeTensorInfo([p,2],"int32",l),n.makeTensorInfo([p],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};var $Ce={kernelName:ZX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=n.readSync(a.dataId),o=$we(i,r);return n.makeTensorInfo(a.shape,"int32",o)}},QCe=Gke({opSnippet:"return tan(x);"}),JCe={kernelName:qX,backendName:"webgl",kernelFunc:QCe},eEe=Gke({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),tEe={kernelName:KX,backendName:"webgl",kernelFunc:eEe},nEe=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=Sxe(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}));function rEe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if("string"===a.dtype||a.shape.length>5){var o=n.readSync(a.dataId),s="string"===a.dtype?o.map((function(e){return SY.decodeString(e)})):o,u=eJ(a.shape,a.dtype,s),c=Jwe(u,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var l=new nEe(a.shape,i);return n.runWebGLProgram(l,[a],a.dtype)}var aEe={kernelName:XX,backendName:"webgl",kernelFunc:rEe},iEe=(0,C.Z)((function e(t){N(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),oEe=(0,C.Z)((function e(t){N(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function sEe(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function uEe(e){for(var t=1;t<e;)t*=2;return t}var cEe={kernelName:YX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=GG().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=GG().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=a.shape,l=c[c.length-1];if(n.shouldExecuteOnCPU([a])||l<s||i>u){var f=n.readSync(a.dataId),h=eke(f,c,a.dtype,i,o),p=(0,T.Z)(h,2),d=p[0],m=p[1];return[n.makeTensorInfo(d.shape,d.dtype,d.values),n.makeTensorInfo(m.shape,m.dtype,m.values)]}if(0===i)return c[c.length-1]=0,[n.makeTensorInfo(c,a.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===l)return[a,HTe({attrs:{shape:c,dtype:"int32",value:0},backend:n})];var v=n.texData.get(a.dataId),g=null!==v&&v.isPacked,y=g?n.unpackTensor(a):a,b=SY.sizeFromShape(c)/l,x=nSe({inputs:{x:y},attrs:{shape:[b,l]},backend:n});g&&sEe(n,y);for(var w=uEe(i),k=uEe(l),S=null,_=function(){return null===S?[x,x]:[x,S]},I=function(e,t,r){var a=_(),i=new iEe(r),o=[[l],[null===S?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=S;S=n.runWebGLProgram(i,a,"int32",o),sEe(n,s)},N=1;N<w;N*=2)for(var C=2*N,E=N;E>=1;E/=2)I(C,E,[b,k]);for(var A=k;A>w;A/=2){var R=_(),O=new oEe([b,A/2]),M=[[l],[null===S?1:0],[w]],D=S;S=n.runWebGLProgram(O,R,"int32",M),sEe(n,D);for(var F=w/2,P=2*F,L=F;L>=1;L/=2)I(P,L,S.shape)}var z=S;S=u_e({inputs:{x:S},backend:n,attrs:{begin:0,size:[b,i]}}),sEe(n,z);var B=cIe({inputs:{x:x,indices:S},backend:n,attrs:{axis:1,batchDims:1}});sEe(n,x);var W=c.slice(0,-1);W.push(i),z=S,S=nSe({inputs:{x:S},attrs:{shape:W},backend:n}),sEe(n,z);var V=B;return B=nSe({inputs:{x:B},attrs:{shape:W},backend:n}),sEe(n,V),[B,S]}},lEe=(0,C.Z)((function e(t,n,r,a,i,o){N(this,e),this.variableNames=["Image","Transforms"],this.outputShape=o;var s,u="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var fEe={kernelName:$X,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.transforms,o=r.interpolation,s=r.fillMode,u=r.fillValue,c=r.outputShape,l=(0,T.Z)(a.shape,4),f=l[0],h=l[1],p=l[2],d=l[3],m=null!=c?c:[h,p],v=(0,T.Z)(m,2),g=v[0],y=v[1],b=new lEe(h,p,o,s,u,[f,g,y,d]);return n.runWebGLProgram(b,[a,i],"float32")}};var hEe={kernelName:JX,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;Ybe(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=nke(o,a,i.shape,i.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,i.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}};var pEe={kernelName:eY,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],c=new Array(s-1),l=0,f=0;f<s;f++)f!==i&&(c[l++]=o.shape[f]);var h=[],p=new Array(s).fill(0),d=o.shape.slice();d[i]=1;for(var m=new Array(u),v=0;v<m.length;v++){p[i]=v;var g=u_e({inputs:{x:o},backend:n,attrs:{begin:p,size:d}}),y=nSe({inputs:{x:g},backend:n,attrs:{shape:c}});m[v]=y,h.push(g)}return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},dEe=(0,C.Z)((function e(t,n){N(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var h="";i%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(h,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var mEe,vEe,gEe,yEe={kernelName:tY,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,s=a.shape.length,u=[],c=0,l=i8.getAxesPermutation([c],s),f=a;null!=l&&(f=hSe({inputs:{x:a},backend:n,attrs:{perm:l}}),u.push(f),c=i8.getInnerMostAxes(1,s)[0]);var h=i8.segment_util.computeOutShape(f.shape,c,o),p=SY.sizeFromShape([f.shape[c]]),d=nSe({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}});u.push(d);var m=function e(t,r,a,i,o){var s=t.shape[0],c=t.shape[1],l=i8.segment_util.segOpComputeOptimalWindowSize(c,o),f=new dEe({windowSize:l,inSize:c,batchSize:s,numSegments:o},r),h=n.compileAndRun(f,[t,a],i);if(u.push(h),h.shape[1]===o)return h;var p=WNe({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),d=rEe({inputs:{x:p},backend:n,attrs:{reps:[c/l]}});return u.push(p),u.push(d),e(h,r,d,i,o)}(d,"unsortedSegmentSum",i,v$(a.dtype),o),v=nSe({inputs:{x:m},backend:n,attrs:{shape:h}}),g=v;if(null!=l){u.push(v);var y=i8.getUndoAxesPermutation(l);g=hSe({inputs:{x:g},backend:n,attrs:{perm:y}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},bEe=0,xEe=[mSe,gSe,bSe,wSe,_Se,NSe,CSe,ESe,FSe,PSe,zSe,WSe,jSe,HSe,GSe,XSe,YSe,JSe,e_e,t_e,a_e,l_e,f_e,h_e,g_e,x_e,S_e,Bke,I_e,D_e,j_e,q_e,K_e,X_e,Y_e,Q_e,eTe,nTe,aTe,cTe,lTe,fTe,pTe,vTe,bTe,xTe,kTe,_Te,TTe,NTe,CTe,ATe,OTe,DTe,PTe,BTe,jTe,GTe,KTe,$Te,JTe,nIe,aIe,iIe,sIe,lIe,hIe,dIe,Lke,mIe,R_e,gIe,bIe,wIe,jke,SIe,TIe,IIe,CIe,AIe,OIe,DIe,PIe,BIe,VIe,UIe,ZIe,GIe,qIe,YIe,$Ie,QIe,JIe,eNe,nNe,iNe,sNe,vNe,tSe,gNe,bNe,wNe,SNe,d_e,TNe,CNe,ENe,MNe,FNe,Zke,PNe,LNe,zNe,BNe,VNe,v_e,lNe,UNe,ZNe,qNe,rSe,YNe,QNe,tCe,rCe,oCe,uCe,lCe,hCe,dCe,vCe,yCe,xCe,kCe,_Ce,ICe,CCe,c_e,mNe,ACe,RCe,OCe,MCe,DCe,FCe,PCe,LCe,WCe,jCe,ZCe,GCe,KCe,XCe,YCe,$Ce,pNe,fSe,JCe,tEe,aEe,cEe,fEe,pSe,hEe,pEe,yEe,NNe];bEe<xEe.length;bEe++){gY(xEe[bEe])}!function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(mEe||(mEe={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"}(vEe||(vEe={}));var wEe={kernelName:sY,backendName:"wasm",setupFunc:function(e){gEe=e.wasm.cwrap(sY,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights;if("float32"!==a.dtype||"float32"!==i.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");var u=r.transposeA,c=r.transposeB,l=r.activation,f=r.leakyreluAlpha,h=n.dataIdMap.get(a.dataId).id,p=n.dataIdMap.get(i.dataId).id,d=0;if(null!=o){var m=n.dataIdMap.get(o.dataId);if(1!==m.shape.length)throw new Error("_FusedMatMul only supports rank-1 bias but got rank ".concat(m.shape.length,"."));d=m.id}var v=null==s?0:n.dataIdMap.get(s.dataId).id,g=vEe[l];if(null==g)throw new Error("".concat(l," activation not yet supported for FusedConv2D in the wasm backend."));var y=u?a.shape[2]:a.shape[1],b=c?i.shape[1]:i.shape[2],x=r0.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)),w=n.makeOutput([].concat((0,I.Z)(x),[y,b]),a.dtype),k=n.dataIdMap.get(w.dataId).id,S=new Uint8Array(new Int32Array(a.shape).buffer),_=new Uint8Array(new Int32Array(i.shape).buffer);return gEe(h,S,a.shape.length,p,_,i.shape.length,u,c,g,d,v,f||0,k),w}};function kEe(e,t){var n;return{kernelName:e,backendName:"wasm",setupFunc:function(t){n=t.wasm.cwrap(e,null,["number","number","number"])},kernelFunc:function(e){var r=e.backend,a=e.inputs.x,i=r.dataIdMap.get(a.dataId).id,o=r.makeOutput(a.shape,t||a.dtype),s=r.dataIdMap.get(o.dataId).id;return 0===SY.sizeFromShape(o.shape)||n(i,mEe[a.dtype],s),o}}}var SEe=kEe($G);function _Ee(e,t,n){var r;return{kernelName:e,backendName:"wasm",setupFunc:function(t){r=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs,i=a.a,o=a.b,s=t.dataIdMap.get(i.dataId).id,u=t.dataIdMap.get(o.dataId).id,c=null!=n?n:i.dtype,l=i8.assertAndGetBroadcastShape(i.shape,o.shape),f=t.makeOutput(l,c);if(0===SY.sizeFromShape(l))return f;var h=new Uint8Array(new Int32Array(i.shape).buffer),p=new Uint8Array(new Int32Array(o.shape).buffer),d=t.dataIdMap.get(f.dataId).id;return r(s,h,i.shape.length,u,p,o.shape.length,mEe[i.dtype],d),f}}}var TEe,IEe=_Ee(eq);var NEe={kernelName:tq,backendName:"wasm",setupFunc:function(e){TEe=e.wasm.cwrap(tq,null,["array","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=n.makeOutput(t[0].shape,t[0].dtype);if(0===SY.sizeFromShape(r.shape))return r;var a=t.map((function(e){return n.dataIdMap.get(e.dataId).id})),i=new Uint8Array(new Int32Array(a).buffer),o=n.dataIdMap.get(r.dataId).id;return TEe(i,a.length,mEe[r.dtype],o),r}};function CEe(e){var t=e.inputs.x,n=e.backend;if("string"===t.dtype)return H$(n.readSync(t.dataId),t.shape,t.dtype);var r=n.makeOutput(t.shape,t.dtype),a=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(r).set(a),r}var EEe,AEe={kernelName:fK,backendName:"wasm",kernelFunc:CEe};function REe(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=function(e,t){for(var n=[],r=[],a=0;a<e.length;++a)1!==e[a]&&n.push(e[a]),1!==e[t[a]]&&r.push(t[a]);for(var i=0;i<r.length;++i){for(var o=-1,s=0;s<r.length;++s)r[s]>=i&&(-1===o||r[o]>r[s])&&(o=s);r[o]=i}return[n,r]}(t.x.shape,r.perm),i=(0,T.Z)(a,2),o=i[0],s=i[1],u=!0,c=0;c<s.length;c++)s[c]!==c&&(u=!1);var l=function(e,t){for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];return n}(t.x.shape,r.perm),f={dataId:t.x.dataId,shape:o,dtype:t.x.dtype};if(u){var h=CEe({inputs:t,backend:n});return h.shape=l,h}var p=n.makeOutput(l,f.dtype),d=n.dataIdMap.get(f.dataId).id,m=n.dataIdMap.get(p.dataId).id,v=new Uint8Array(new Int32Array(s).buffer),g=new Uint8Array(new Int32Array(f.shape).buffer);return EEe(d,g,f.shape.length,mEe[f.dtype],m,v,s.length),p}var OEe,MEe={kernelName:QX,backendName:"wasm",kernelFunc:REe,setupFunc:function(e){EEe=e.wasm.cwrap(QX,null,["number","array","number","number","number","array","number"])}};function DEe(e,t,n){var r=e.shape,a=e.shape.length,i=SY.parseAxisParam(t,r),o=i,s=i8.getAxesPermutation(o,a),u=null,c=!1;if(null!=s){for(var l=new Array(a),f=0;f<l.length;f++)l[f]=r[s[f]];o=i8.getInnerMostAxes(o.length,a),u=REe({inputs:{x:e},attrs:{perm:s},backend:n});var h=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(u.dataId).id!==h&&(c=!0)}return{transposed:u,originalAxes:i,axes:o,inputWasTransposed:c}}var FEe,PEe={kernelName:nq,backendName:"wasm",setupFunc:function(e){OEe=e.wasm.cwrap(nq,null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,u=o,c=DEe(o,a,t),l=c.transposed,f=c.axes,h=c.originalAxes,p=c.inputWasTransposed;p&&(u=l,s=w=t.dataIdMap.get(l.dataId).id);var d=u.shape.length;i8.assertAxesAreInnerMostDims("all",f,d);var m=i8.computeOutAndReduceShapes(u.shape,f),v=(0,T.Z)(m,2),g=v[0],y=v[1],b=SY.sizeFromShape(y),x=t.makeOutput(g,o.dtype);if(0!==SY.sizeFromShape(u.shape)){var w=t.dataIdMap.get(x.dataId).id;OEe(s,b,w)}if(p&&t.disposeData(l.dataId),i){var k=i8.expandShapeToKeepDim(x.shape,h);x.shape=k}return x}};var LEe,zEe={kernelName:rq,backendName:"wasm",setupFunc:function(e){FEe=e.wasm.cwrap(rq,null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,u=o,c=DEe(o,a,t),l=c.transposed,f=c.axes,h=c.originalAxes,p=c.inputWasTransposed;p&&(u=l,s=w=t.dataIdMap.get(l.dataId).id);var d=u.shape.length;i8.assertAxesAreInnerMostDims("any",f,d);var m=i8.computeOutAndReduceShapes(u.shape,f),v=(0,T.Z)(m,2),g=v[0],y=v[1],b=SY.sizeFromShape(y),x=t.makeOutput(g,o.dtype);if(0!==SY.sizeFromShape(u.shape)){var w=t.dataIdMap.get(x.dataId).id;FEe(s,b,w)}if(p&&t.disposeData(l.dataId),i){var k=i8.expandShapeToKeepDim(x.shape,h);x.shape=k}return x}};var BEe,WEe={kernelName:aq,backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.axis,a=n.x,i=t.dataIdMap.get(a.dataId).id,o=i,s=a,u=DEe(a,r,t),c=u.transposed,l=u.axes,f=u.inputWasTransposed;if(f){var h=t.dataIdMap.get(c.dataId).id;h!==i&&(s=c,o=h)}var p=s.shape.slice(0,-1),d=t.makeOutput(p,"int32"),m=t.dataIdMap.get(d.dataId).id,v=SY.sizeFromShape(d.shape),g=s.shape[l[0]];return LEe(o,mEe[s.dtype],v,g,m),f&&t.disposeData(c.dataId),d},setupFunc:function(e){LEe=e.wasm.cwrap(aq,null,["number","number","number","number","number"])}};var VEe={kernelName:fq,backendName:"wasm",setupFunc:function(e){BEe=e.wasm.cwrap(fq,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=r.dataIdMap.get(a.dataId).id,o=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode,l=i8.computePool2DInfo(a.shape,o,s,1,u,c),f=l.filterHeight,h=l.filterWidth,p=l.padInfo.top,d=l.padInfo.right,m=l.padInfo.bottom,v=l.padInfo.left,g=l.strideHeight,y=l.strideWidth,b=l.inChannels;if("channelsLast"!==l.dataFormat)throw new Error("wasm backend does not support dataFormat:'".concat(l.dataFormat,"'. Please use 'channelsLast'."));if(1!==l.dilationWidth||1!==l.dilationHeight)throw new Error("was backend only supports average pooling with dilation = [1, 1], got [".concat(l.dilationHeight,", ").concat(l.dilationWidth,"]."));var x=r.makeOutput(l.outShape,"float32"),w=r.dataIdMap.get(x.dataId).id;return BEe(i,a.shape[0],a.shape[1],a.shape[2],f,h,p,d,m,v,g,y,b,w),x}};function jEe(e){var t=e.inputs,n=e.attrs,r=t.x,a=n.shape,i=SY.sizeFromShape(r.shape),o=SY.inferFromImplicitShape(a,i);return SY.assert(i===SY.sizeFromShape(o),(function(){return"new shape: ".concat(o,", old shape: ").concat(r.shape,". New shape and old shape must have the same number of elements.")})),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:o,dtype:r.dtype}}var UEe,HEe={kernelName:fX,backendName:"wasm",kernelFunc:jEe};var ZEe={kernelName:mq,backendName:"wasm",setupFunc:function(e){UEe=e.wasm.cwrap(mq,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;if("float32"!==a.dtype||"float32"!==i.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");var u=a.shape.length,c=i.shape.length,l=o?a.shape[u-2]:a.shape[u-1],f=s?i.shape[c-1]:i.shape[c-2],h=o?a.shape[u-1]:a.shape[u-2],p=s?i.shape[c-2]:i.shape[c-1],d=a.shape.slice(0,-2),m=i.shape.slice(0,-2),v=SY.sizeFromShape(d),g=SY.sizeFromShape(m),y=r0.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([h,p]);SY.assert(l===f,(function(){return"Error in matMul: inner shapes (".concat(l,") and (").concat(f,") of Tensors with shapes ").concat(a.shape," and ").concat(i.shape," and transposeA=").concat(o," and transposeB=").concat(s," must match.")}));var b=s?[g,p,f]:[g,f,p],x=jEe({inputs:{x:a},backend:n,attrs:{shape:o?[v,l,h]:[v,h,l]}}),w=jEe({inputs:{x:i},backend:n,attrs:{shape:b}}),k=n.dataIdMap.get(x.dataId).id,S=n.dataIdMap.get(w.dataId).id,_=o?x.shape[2]:x.shape[1],T=s?w.shape[1]:w.shape[2],I=Math.max(v,g),N=n.makeOutput([I,_,T],x.dtype),C=n.dataIdMap.get(N.dataId).id,E=new Uint8Array(new Int32Array(x.shape).buffer),A=new Uint8Array(new Int32Array(w.shape).buffer);return UEe(k,E,x.shape.length,S,A,w.shape.length,o,s,C),n.disposeData(x.dataId),n.disposeData(w.dataId),N.shape=y,N}};function GEe(e){var t=e.inputs.x,n=e.attrs,r=n.begin,a=n.size,i=e.backend,o=S0.parseSliceParams(t,r,a),s=(0,T.Z)(o,2),u=s[0],c=s[1],l=S0.isSliceContinous(t.shape,u,c),f=i.readSync(t.dataId),h=i.makeOutput(c,t.dtype),p=SY.computeStrides(t.shape),d=i.dataIdMap.get(h.dataId);if(l){var m=S0.computeFlatOffset(u,p);return"string"===t.dtype?d.stringBytes=f.slice(m,m+SY.sizeFromShape(c)):i.typedArrayFromHeap(h).set(f.subarray(m,m+SY.sizeFromShape(c))),h}if("string"===t.dtype){var v=ude(f,u,c,t.shape,t.dtype);return d.stringBytes=v,h}var g=i.typedArrayFromHeap(h),y=t.shape.length;if(2===y)!function(e,t,n,r,a){for(var i=0,o=r[0],s=r[1],u=o+a[0],c=o;c<u;c++){var l=c*t+s;n.set(e.subarray(l,l+a[1]),i),i+=a[1]}}(f,p[0],g,u,c);else if(3===y)!function(e,t,n,r,a,i){for(var o=0,s=a[0],u=a[1],c=a[2],l=s+i[0],f=u+i[1],h=s;h<l;h++)for(var p=u;p<f;p++){var d=h*t+p*n+c;r.set(e.subarray(d,d+i[2]),o),o+=i[2]}}(f,p[0],p[1],g,u,c);else if(4===y)!function(e,t,n,r,a,i,o){for(var s=0,u=i[0],c=i[1],l=i[2],f=u+o[0],h=c+o[1],p=l+o[2],d=i[3],m=u;m<f;m++)for(var v=c;v<h;v++)for(var g=l;g<p;g++){var y=m*t+v*n+g*r+d;a.set(e.subarray(y,y+o[3]),s),s+=o[3]}}(f,p[0],p[1],p[2],g,u,c);else{var b=ude(f,u,c,t.shape,t.dtype);g.set(b)}return h}var qEe={kernelName:_X,backendName:"wasm",kernelFunc:GEe};var KEe={kernelName:vq,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops,s=i.reduce((function(e,t){return e*t})),u=i8.getReshaped(a.shape,i,s),c=i8.getPermuted(u.length,i.length),l=i8.getReshapedPermuted(a.shape,i,s),f=i8.getSliceBeginCoords(o,i.length),h=i8.getSliceSize(l,o,i.length),p=jEe({inputs:{x:a},backend:n,attrs:{shape:u}}),d=REe({inputs:{x:p},backend:n,attrs:{perm:c}}),m=GEe({inputs:{x:jEe({inputs:{x:d},backend:n,attrs:{shape:l}})},backend:n,attrs:{begin:f,size:h}});return n.disposeData(p.dataId),n.disposeData(d.dataId),n.disposeData(p.dataId),m}};function XEe(e){var t=e.inputs.x,n=e.attrs.dtype,r=e.backend,a=r.makeOutput(t.shape,n),i=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(a).set(i),a}var YEe,$Ee={kernelName:xq,backendName:"wasm",kernelFunc:XEe},QEe=kEe(wq);var JEe={kernelName:kq,backendName:"wasm",setupFunc:function(e){YEe=e.wasm.cwrap(kq,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.clipValueMin,o=r.clipValueMax,s=n.dataIdMap.get(a.dataId).id,u=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(u.dataId).id;return YEe(s,i,o,c),u}};function eAe(e){var t=e.inputs,n=e.backend,r=SY.parseAxisParam(e.attrs.axis,t[0].shape)[0],a=t.map((function(e){return e.shape}));i8.assertParamsConsistent(a,r);var i=i8.computeOutShape(t.map((function(e){return e.shape})),r),o=t.filter((function(e){return SY.sizeFromShape(e.shape)>0}));if(1===o.length)return CEe({inputs:{x:o[0]},backend:n});var s=n.makeOutput(i,t[0].dtype);if(0===SY.sizeFromShape(i))return s;if("string"===o[0].dtype){var u=o.map((function(e){var t=SY.sizeFromShape(e.shape.slice(r));return jEe({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),c=u.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}}));i=i8.computeOutShape(u.map((function(e){return e.shape})),1);var l=1===u[0].shape[0],f=Zhe(c,i,t[0].dtype,l),h=i8.computeOutShape(o.map((function(e){return e.shape})),r);return s.shape=h,n.dataIdMap.get(s.dataId).stringBytes=i8.fromStringArrayToUint8(f),u.forEach((function(e){return n.disposeData(e.dataId)})),s}for(var p=SY.sizeFromShape(o[0].shape.slice(0,r)),d=0,m=o.map((function(e){var t=SY.sizeFromShape(e.shape.slice(r));return d+=t,t})),v=o.map((function(e){return n.typedArrayFromHeap(e)})),g=n.typedArrayFromHeap(s),y=0;y<p;y++)for(var b=y*d,x=0;x<v.length;x++){var w=m[x],k=y*w,S=v[x].subarray(k,k+w);g.set(S,b),b+=w}return s}var tAe,nAe={kernelName:Tq,backendName:"wasm",kernelFunc:eAe};var rAe,aAe={kernelName:Iq,backendName:"wasm",setupFunc:function(e){tAe=e.wasm.cwrap(Iq,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(i.dataId).id,u=n.strides,c=n.dilations,l=n.pad,f=n.dimRoundingMode,h=n.dataFormat,p=i8.convertConv2DDataFormat(h),d=i8.computeConv2DInfo(a.shape,i.shape,u,c,l,f,!1,p),m=d.filterHeight,v=d.filterWidth,g=d.padInfo.top,y=d.padInfo.right,b=d.padInfo.bottom,x=d.padInfo.left,w=d.dilationHeight,k=d.dilationWidth,S=d.strideHeight,_=d.strideWidth,T=d.inChannels,I=d.outChannels,N="SAME"===d.padInfo.type?1:0;if("channelsLast"!==d.dataFormat)throw new Error("wasm backend Conv2D does not support dataFormat:'".concat(d.dataFormat,"'. Please use 'channelsLast'."));var C=r.makeOutput(d.outShape,"float32"),E=r.dataIdMap.get(C.dataId).id;return tAe(o,a.shape[0],a.shape[1],a.shape[2],s,m,v,g,y,b,x,N,w,k,S,_,T,I,E),C}};var iAe,oAe,sAe={kernelName:Cq,backendName:"wasm",setupFunc:function(e){rAe=e.wasm.cwrap(Cq,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.dy,i=n.filter,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.inputShape,f=i8.convertConv2DDataFormat(u),h=i8.computeConv2DInfo(l,i.shape,o,1,s,c,!1,f),p=h.batchSize,d=h.filterHeight,m=h.filterWidth,v=h.inChannels,g=h.inHeight,y=h.inWidth,b=h.outChannels,x=h.outHeight,w=h.outWidth,k=h.strideHeight,S=h.strideWidth,_=d-1-h.padInfo.top,I=m-1-h.padInfo.left,N="channelsLast"===h.dataFormat,C=SY.computeStrides(h.inShape),E=SY.computeStrides(a.shape),A=SY.computeStrides(i.shape),R=(0,T.Z)(A,3),O=R[0],M=R[1],D=R[2],F=C[0],P=N?C[1]:C[2],L=N?C[2]:1,z=N?1:C[1],B=E[0],W=N?E[1]:E[2],V=N?E[2]:1,j=N?1:E[1],U=t.makeOutput(h.inShape,"float32"),H=t.dataIdMap.get(U.dataId).id,Z=t.dataIdMap.get(a.dataId).id,G=t.dataIdMap.get(i.dataId).id;return rAe(Z,G,p,d,m,g,y,v,x,w,b,k,S,_,I,O,M,D,F,P,L,z,B,W,V,j,H),U}},uAe=kEe(Oq),cAe=kEe(Mq);!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(iAe||(iAe={}));var lAe,fAe={kernelName:Pq,backendName:"wasm",setupFunc:function(e){oAe=e.wasm.cwrap(Pq,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=a.method,o=a.extrapolationValue,s=a.cropSize,u=r.image,c=r.boxes,l=r.boxInd,f=c.shape[0],h=(0,T.Z)(s,2),p=h[0],d=h[1],m=[f,p,d,u.shape[3]],v=n.dataIdMap.get(u.dataId);"float32"!==u.dtype&&(t=XEe({backend:n,inputs:{x:u},attrs:{dtype:"float32"}}),v=n.dataIdMap.get(t.dataId));var g=v.id,y=n.dataIdMap.get(c.dataId).id,b=n.dataIdMap.get(l.dataId).id,x=n.makeOutput(m,"float32"),w=n.dataIdMap.get(x.dataId).id,k=new Uint8Array(new Int32Array(u.shape).buffer);return oAe(g,y,b,f,k,p,d,iAe[i],o,w),null!=t&&n.disposeData(t.dataId),x}};var hAe,pAe={kernelName:Dq,backendName:"wasm",setupFunc:function(e){lAe=e.wasm.cwrap(Dq,null,["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse,u=a.shape.length;SY.assert("float32"===a.dtype||"int32"===a.dtype,(function(){return"cumprod does not support ".concat(a.dtype," tensors in the WASM backend")}));var c=i8.getAxesPermutation([i],u),l=a;null!==c&&(l=REe({inputs:{x:a},attrs:{perm:c},backend:n}));var f=i8.getInnerMostAxes(1,u)[0];i8.assertAxesAreInnerMostDims("cumprod",[f],u);var h=n.makeOutput(l.shape,l.dtype),p=l.shape[f],d=n.dataIdMap.get(l.dataId).id,m=n.dataIdMap.get(h.dataId).id;lAe(d,o?1:0,s?1:0,p,m,mEe[a.dtype]);var v=h;return null!==c&&(v=REe({inputs:{x:h},attrs:{perm:i8.getUndoAxesPermutation(c)},backend:n}),n.disposeData(l.dataId),n.disposeData(h.dataId)),v}};var dAe,mAe={kernelName:Fq,backendName:"wasm",setupFunc:function(e){hAe=e.wasm.cwrap(Fq,null,["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse,u=a.shape.length;SY.assert("float32"===a.dtype||"int32"===a.dtype,(function(){return"cumsum does not support ".concat(a.dtype," tensors in the WASM backend")}));var c=i8.getAxesPermutation([i],u),l=a;null!==c&&(l=REe({inputs:{x:a},attrs:{perm:c},backend:n}));var f=i8.getInnerMostAxes(1,u)[0];i8.assertAxesAreInnerMostDims("cumsum",[f],u);var h=n.makeOutput(l.shape,l.dtype),p=l.shape[f],d=n.dataIdMap.get(l.dataId).id,m=n.dataIdMap.get(h.dataId).id;hAe(d,o?1:0,s?1:0,p,m,mEe[a.dtype]);var v=h;return null!==c&&(v=REe({inputs:{x:h},attrs:{perm:i8.getUndoAxesPermutation(c)},backend:n}),n.disposeData(l.dataId),n.disposeData(h.dataId)),v}};var vAe,gAe={kernelName:zq,backendName:"wasm",setupFunc:function(e){dAe=e.wasm.cwrap(zq,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,c=("NHWC"===o?a.shape[2]:a.shape[3])*i,l=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),f="NHWC"===o?[s,u,c,l]:[s,l,u,c],h=t.makeOutput(f,"float32"),p=t.dataIdMap.get(a.dataId).id,d=new Uint8Array(new Int32Array(SY.computeStrides(a.shape)).buffer),m=new Uint8Array(new Int32Array(f).buffer),v=new Uint8Array(new Int32Array(SY.computeStrides(f)).buffer),g=t.dataIdMap.get(h.dataId).id;return dAe(p,i,"NHWC"===o?1:0,d,a.shape.length-1,m,v,f.length,g),h}};var yAe={kernelName:Bq,backendName:"wasm",setupFunc:function(e){vAe=e.wasm.cwrap(Bq,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(i.dataId).id,u=n.strides,c=n.dilations,l=n.pad,f=n.dimRoundingMode,h=null==c?[1,1]:c,p=i8.computeConv2DInfo(a.shape,i.shape,u,h,l,f,!0),d=p.filterHeight,m=p.filterWidth,v=p.padInfo.top,g=p.padInfo.right,y=p.padInfo.bottom,b=p.padInfo.left,x=p.dilationHeight,w=p.dilationWidth,k=p.strideHeight,S=p.strideWidth,_=p.inChannels,T=p.outChannels,I="SAME"===p.padInfo.type?1:0;if("channelsLast"!==p.dataFormat)throw new Error("wasm backend DepthwiseConv2dNative does not support dataFormat:'".concat(p.dataFormat,"'. Please use 'channelsLast'."));var N=r.makeOutput(p.outShape,"float32"),C=r.dataIdMap.get(N.dataId).id;return vAe(o,a.shape[0],a.shape[1],a.shape[2],s,d,m,v,g,y,b,I,x,w,k,S,_,T,C),N}},bAe=kEe(Kq),xAe=_Ee($q,0,"bool"),wAe=kEe(Qq,"float32");function kAe(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.input,i=n.dim,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(SY.assert(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+i+1),s.splice(u,0,1),jEe({inputs:{x:a},backend:r,attrs:{shape:s}})}var SAe={kernelName:Jq,backendName:"wasm",kernelFunc:kAe};function _Ae(e){var t=e.attrs,n=t.shape,r=t.value,a=t.dtype,i=e.backend,o=i.makeOutput(n,a);return i.typedArrayFromHeap(o).fill(r),o}var TAe,IAe={kernelName:nK,backendName:"wasm",kernelFunc:_Ae};var NAe,CAe={kernelName:rK,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n.makeOutput(r.shape,r.dtype),i=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(a.dataId).id,s=(0,T.Z)(r.shape,4),u=s[0],c=s[1],l=s[2],f=s[3];return TAe(i,u,c,l,f,o),a},setupFunc:function(e){TAe=e.wasm.cwrap(rK,null,["number","number","number","number","number","number"])}},EAe=kEe(aK),AAe=_Ee(iK);var RAe,OAe={kernelName:oK,backendName:"wasm",setupFunc:function(e){NAe=e.wasm.cwrap(oK,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.varianceEpsilon,a=n.x,i=n.mean,o=n.variance,s=n.offset,u=n.scale,c=t.dataIdMap.get(a.dataId).id,l=t.dataIdMap.get(i.dataId).id,f=t.dataIdMap.get(o.dataId).id,h=null!=s?t.dataIdMap.get(s.dataId).id:0,p=null!=u?t.dataIdMap.get(u.dataId).id:0,d=t.makeOutput(a.shape,a.dtype);if(0===SY.sizeFromShape(a.shape))return d;var m=t.dataIdMap.get(d.dataId).id;return NAe(c,l,f,h,p,r,m),d}};var MAe,DAe={kernelName:uY,backendName:"wasm",setupFunc:function(e){RAe=e.wasm.cwrap(uY,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=n.strides,c=n.pad,l=n.dilations,f=n.dataFormat,h=n.dimRoundingMode,p=n.activation,d=n.leakyreluAlpha,m=i8.computeConv2DInfo(a.shape,i.shape,u,l,c,h),v=vEe[p];if(null==v)throw new Error("".concat(p," activation not yet supported for FusedConv2D in the wasm backend."));var g=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(i.dataId).id,b=m.outChannels,x=0;if(null!=o){var w=r.dataIdMap.get(o.dataId);if(1!==w.shape.length)throw new Error("FusedConv2D only supports rank-1 bias but got rank ".concat(w.shape.length,"."));if(w.shape[0]!==b)throw new Error("FusedConv2D bias shape (".concat(w.shape,") does not match the number of output channels (").concat(b,")"));x=w.id}var k=m.filterHeight,S=m.filterWidth,_=m.padInfo.top,T=m.padInfo.right,I=m.padInfo.bottom,N=m.padInfo.left,C=m.dilationHeight,E=m.dilationWidth,A=m.strideHeight,R=m.strideWidth,O=m.inChannels,M="SAME"===m.padInfo.type?1:0,D=m.batchSize,F=m.inHeight,P=m.inWidth;if("NHWC"!==f)throw new Error("wasm backend FusedConv2D does not support dataFormat:'".concat(f,"'. Please use 'NHWC'."));var L=r.makeOutput(m.outShape,"float32"),z=r.dataIdMap.get(L.dataId).id,B=null==s?0:r.dataIdMap.get(s.dataId).id;return RAe(g,D,F,P,y,k,S,x,_,T,I,N,M,C,E,A,R,O,b,v,B,d||0,z),L}};var FAe,PAe={kernelName:cY,backendName:"wasm",setupFunc:function(e){MAe=e.wasm.cwrap(cY,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=n.strides,c=n.pad,l=n.dilations,f=n.dataFormat,h=n.dimRoundingMode,p=n.activation,d=n.leakyreluAlpha,m=i8.computeConv2DInfo(a.shape,i.shape,u,l,c,h,!0),v=vEe[p];if(null==v)throw new Error("".concat(p," activation not yet supported for FusedDepthwiseConv2D in the wasm backend."));var g=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(i.dataId).id,b=m.outChannels,x=0;if(null!=o){var w=r.dataIdMap.get(o.dataId);if(1!==w.shape.length)throw new Error("FusedDepthwiseConv2D only supports rank-1 bias but got rank ".concat(w.shape.length,"."));if(w.shape[0]!==b)throw new Error("FusedDepthwiseConv2D bias shape (".concat(w.shape,") does not match the number of output channels (").concat(b,")"));x=w.id}var k=m.filterHeight,S=m.filterWidth,_=m.padInfo.top,T=m.padInfo.right,I=m.padInfo.bottom,N=m.padInfo.left,C=m.dilationHeight,E=m.dilationWidth,A=m.strideHeight,R=m.strideWidth,O=m.inChannels,M="SAME"===m.padInfo.type?1:0,D=m.batchSize,F=m.inHeight,P=m.inWidth;if("NHWC"!==f)throw new Error("wasm backend FusedDepthwiseConv2D does not support dataFormat:'".concat(f,"'. Please use 'NHWC'."));var L=r.makeOutput(m.outShape,"float32"),z=r.dataIdMap.get(L.dataId).id,B=null==s?0:r.dataIdMap.get(s.dataId).id;return MAe(g,D,F,P,y,k,S,x,_,T,I,N,M,C,E,A,R,O,b,v,B,d||0,z),L}};var LAe,zAe={kernelName:uK,backendName:"wasm",setupFunc:function(e){FAe=e.wasm.cwrap(uK,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=n.params,a=n.indices,i=g0.prepareAndValidate(r,a),o=(0,T.Z)(i,4),s=o[0],u=o[1],c=o[2],l=o[3],f=t.makeOutput(s,r.dtype);if(0===u)return f;var h=a.shape,p=h[h.length-1],d=t.dataIdMap.get(r.dataId).id,m=t.dataIdMap.get(a.dataId).id,v=new Uint8Array(new Int32Array(l).buffer),g=t.dataIdMap.get(f.dataId).id;return FAe(d,mEe[r.dtype],m,u,p,c,v,g),f}};var BAe,WAe={kernelName:sK,backendName:"wasm",setupFunc:function(e){LAe=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){for(var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,i=n.indices,o=r.axis,s=r.batchDims,u=SY.parseAxisParam(o,a.shape)[0],c=t.readSync(i.dataId),l=a.shape[u],f=function(e){var t=c[e];SY.assert(t<=l-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(l-1,"]")}))},h=0;h<c.length;++h)f(h);var p=i8.segment_util.collectGatherOpShapeInfo(a,i,u,s),d=jEe({inputs:{x:a},attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]},backend:t}),m=SY.sizeFromShape(i.shape),v=jEe({inputs:{x:i},attrs:{shape:[p.batchSize,m/p.batchSize]},backend:t}),g=[p.batchSize,p.outerSize,m/p.batchSize,p.sliceSize],y=t.makeOutput(g,a.dtype);if(0===SY.sizeFromShape(a.shape))return y;var b=d.shape.length-1,x=t.dataIdMap.get(d.dataId).id,w=t.dataIdMap.get(v.dataId).id,k=t.dataIdMap.get(y.dataId).id,S=new Uint8Array(new Int32Array(SY.computeStrides(d.shape)).buffer),_=new Uint8Array(new Int32Array(SY.computeStrides(g)).buffer);return LAe(x,mEe[a.dtype],S,b,w,p.batchSize,_,k),t.disposeData(d.dataId),t.disposeData(v.dataId),y.shape=p.outputShape,y}},VAe=_Ee(cK,0,"bool"),jAe=_Ee(lK,0,"bool");var UAe,HAe={kernelName:gK,backendName:"wasm",setupFunc:function(e){BAe=e.wasm.cwrap(gK,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.inputs.x,n=e.attrs.alpha,r=e.backend,a=r.dataIdMap.get(t.dataId).id,i=r.makeOutput(t.shape,"float32");if(0!==SY.sizeFromShape(t.shape)){var o=r.dataIdMap.get(i.dataId).id;BAe(a,mEe[t.dtype],n,o)}return i}},ZAe=_Ee(yK,0,"bool"),GAe=_Ee(bK,0,"bool"),qAe=kEe(wK),KAe=_Ee(SK,0,"bool"),XAe=kEe(_K),YAe=_Ee(TK,0,"bool"),$Ae=_Ee(IK,0,"bool");var QAe,JAe={kernelName:RK,backendName:"wasm",setupFunc:function(e){UAe=e.wasm.cwrap(RK,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.reductionIndices,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,u=o,c=DEe(o,a,t),l=c.transposed,f=c.axes,h=c.originalAxes,p=c.inputWasTransposed;p&&(u=l,s=w=t.dataIdMap.get(l.dataId).id);var d=u.shape.length;i8.assertAxesAreInnerMostDims("max",f,d);var m=i8.computeOutAndReduceShapes(u.shape,f),v=(0,T.Z)(m,2),g=v[0],y=v[1],b=SY.sizeFromShape(y),x=t.makeOutput(g,o.dtype);if(0!==SY.sizeFromShape(u.shape)){var w=t.dataIdMap.get(x.dataId).id;UAe(s,mEe[o.dtype],b,w)}if(p&&t.disposeData(l.dataId),i){var k=i8.expandShapeToKeepDim(x.shape,h);x.shape=k}return x}},eRe=_Ee(OK);var tRe,nRe={kernelName:MK,backendName:"wasm",setupFunc:function(e){QAe=e.wasm.cwrap(MK,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=r.dataIdMap.get(a.dataId).id;SY.assert("float32"===a.dtype,(function(){return"Error in MaxPool: only float32 input is supported. Got ".concat(a.dtype,".")}));var o=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode,l=i8.computePool2DInfo(a.shape,o,s,1,u,c),f=l.filterHeight,h=l.filterWidth,p=l.padInfo.top,d=l.padInfo.right,m=l.padInfo.bottom,v=l.padInfo.left,g=l.dilationHeight,y=l.dilationWidth,b=l.strideHeight,x=l.strideWidth,w=l.inChannels,k=l.outChannels;if("channelsLast"!==l.dataFormat)throw new Error("wasm backend does not support dataFormat:'".concat(l.dataFormat,"'. Please use 'channelsLast'."));var S=r.makeOutput(l.outShape,"float32"),_=r.dataIdMap.get(S.dataId).id;return QAe(i,a.shape[0],a.shape[1],a.shape[2],f,h,p,d,m,v,g,y,b,x,w,k,_),S}};var rRe,aRe={kernelName:zK,backendName:"wasm",setupFunc:function(e){tRe=e.wasm.cwrap(zK,null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,u=s,c=o,l=DEe(o,a,t),f=l.transposed,h=l.axes,p=l.originalAxes,d=l.inputWasTransposed,m=h;d&&(S=t.dataIdMap.get(f.dataId).id)!==s&&(c=f,u=S,m=i8.getInnerMostAxes(m.length,c.shape.length)),i8.assertAxesAreInnerMostDims("mean",m,c.shape.length);var v=i8.computeOutAndReduceShapes(c.shape,m),g=(0,T.Z)(v,2),y=g[0],b=g[1],x=SY.sizeFromShape(b),w=c;"float32"!==c.dtype&&(w=XEe({backend:t,inputs:{x:c},attrs:{dtype:"float32"}}),u=t.dataIdMap.get(w.dataId).id);var k=t.makeOutput(y,"float32");if(0!==SY.sizeFromShape(c.shape)){var S=t.dataIdMap.get(k.dataId).id;tRe(u,x,S)}if(d&&t.disposeData(f.dataId),i){var _=i8.expandShapeToKeepDim(k.shape,p);k.shape=_}return"float32"!==c.dtype&&t.disposeData(w.dataId),k}};var iRe,oRe,sRe={kernelName:BK,backendName:"wasm",setupFunc:function(e){rRe=e.wasm.cwrap(BK,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,u=s,c=o,l=DEe(o,a,t),f=l.transposed,h=l.axes,p=l.originalAxes,d=l.inputWasTransposed;d&&(k=t.dataIdMap.get(f.dataId).id)!==s&&(c=f,u=k);var m=c.shape.length;i8.assertAxesAreInnerMostDims("min",h,m);var v=i8.computeOutAndReduceShapes(c.shape,h),g=(0,T.Z)(v,2),y=g[0],b=g[1],x=SY.sizeFromShape(b),w=t.makeOutput(y,c.dtype);if(0!==SY.sizeFromShape(c.shape)){var k=t.dataIdMap.get(w.dataId).id;rRe(u,mEe[o.dtype],x,k)}if(d&&t.disposeData(f.dataId),i){var S=i8.expandShapeToKeepDim(w.shape,p);w.shape=S}return w}},uRe=_Ee(WK);!function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"}(iRe||(iRe={}));var cRe,lRe={kernelName:VK,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=e.attrs,a=r.paddings,i=r.mode,o=a.map((function(e,n){return e[0]+t.shape[n]+e[1]})),s=n.dataIdMap.get(t.dataId).id,u=n.makeOutput(o,t.dtype),c=n.dataIdMap.get(u.dataId).id,l=new Uint8Array(new Int32Array(t.shape).buffer),f=a.map((function(e){return e[0]})),h=a.map((function(e){return e[1]})),p=new Uint8Array(new Int32Array(f).buffer),d=new Uint8Array(new Int32Array(h).buffer);return oRe(s,l,t.shape.length,mEe[t.dtype],p,d,iRe[i],c),u},setupFunc:function(e){oRe=e.wasm.cwrap(VK,null,["number","array","number","number","array","array","number","number"])}},fRe=_Ee(HK),hRe=kEe(ZK);function pRe(e,t){var n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),r=n[0],a=n[1],i=n[2],o=n[3];return e.wasm._free(t),{pSelectedIndices:r,selectedSize:a,pSelectedScores:i,pValidOutputs:o}}var dRe,mRe={kernelName:qK,backendName:"wasm",setupFunc:function(e){cRe=e.wasm.cwrap(qK,"number",["number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,i=r.maxOutputSize,o=r.scoreThreshold,s=n.boxes,u=n.scores,c=t.dataIdMap.get(s.dataId).id,l=t.dataIdMap.get(u.dataId).id,f=pRe(t,cRe(c,l,i,a,o)),h=f.pSelectedIndices,p=f.selectedSize,d=f.pSelectedScores,m=f.pValidOutputs;return t.wasm._free(d),t.wasm._free(m),t.makeOutput([p],"int32",h)}};var vRe,gRe={kernelName:KK,backendName:"wasm",setupFunc:function(e){dRe=e.wasm.cwrap(KK,"number",["number","number","number","number","number","bool"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,i=r.maxOutputSize,o=r.scoreThreshold,s=r.padToMaxOutputSize,u=n.boxes,c=n.scores,l=t.dataIdMap.get(u.dataId).id,f=t.dataIdMap.get(c.dataId).id,h=pRe(t,dRe(l,f,i,a,o,s)),p=h.pSelectedIndices,d=h.selectedSize,m=h.pSelectedScores,v=h.pValidOutputs;return t.wasm._free(m),[t.makeOutput([d],"int32",p),t.makeOutput([],"int32",v)]}};var yRe,bRe={kernelName:XK,backendName:"wasm",setupFunc:function(e){vRe=e.wasm.cwrap(XK,"number",["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,i=r.maxOutputSize,o=r.scoreThreshold,s=r.softNmsSigma,u=n.boxes,c=n.scores,l=t.dataIdMap.get(u.dataId).id,f=t.dataIdMap.get(c.dataId).id,h=pRe(t,vRe(l,f,i,a,o,s)),p=h.pSelectedIndices,d=h.selectedSize,m=h.pSelectedScores,v=h.pValidOutputs;return t.wasm._free(v),[t.makeOutput([d],"int32",p),t.makeOutput([d],"float32",m)]}},xRe=_Ee(GK,0,"bool");var wRe={kernelName:$K,backendName:"wasm",setupFunc:function(e){yRe=e.wasm.cwrap($K,null,["number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.dtype,o=r.depth,s=r.onValue,u=r.offValue,c=n.makeOutput([].concat((0,I.Z)(a.shape),[o]),i),l=n.dataIdMap.get(c.dataId).id,f=n.dataIdMap.get(a.dataId).id;return yRe(f,o,s,u,l),c}};var kRe={kernelName:YK,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(1),r}};var SRe,_Re={kernelName:QK,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return kAe({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){SY.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),SY.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=eAe({inputs:t.map((function(e){var t=kAe({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeData(e.dataId)})),s}};var TRe,IRe={kernelName:JK,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=e.attrs,a=r.paddings,i=r.constantValue,o=a.map((function(e,n){return e[0]+t.shape[n]+e[1]}));if(0===SY.sizeFromShape(t.shape))return _Ae({backend:n,attrs:{shape:o,value:i,dtype:t.dtype}});var s=n.dataIdMap.get(t.dataId).id,u=n.makeOutput(o,t.dtype),c=n.dataIdMap.get(u.dataId).id,l=new Uint8Array(new Int32Array(t.shape).buffer),f=a.map((function(e){return e[0]})),h=a.map((function(e){return e[1]})),p=new Uint8Array(new Int32Array(f).buffer),d=new Uint8Array(new Int32Array(h).buffer);return SRe(s,l,t.shape.length,mEe[t.dtype],p,d,i,c),u},setupFunc:function(e){SRe=e.wasm.cwrap(JK,null,["number","array","number","number","array","array","number","number"])}},NRe=_Ee(tX);var CRe,ERe={kernelName:nX,backendName:"wasm",setupFunc:function(e){TRe=e.wasm.cwrap(nX,null,["number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(a.dataId).id,s=i,u=r,c=u;"float32"!==u.dtype&&(c=XEe({backend:n,inputs:{x:r},attrs:{dtype:"float32"}}),s=n.dataIdMap.get(c.dataId).id);var l=n.makeOutput(r.shape,"float32"),f=n.dataIdMap.get(l.dataId).id;return TRe(s,o,f),"float32"!==u.dtype&&n.disposeData(c.dataId),l}};var ARe,RRe={kernelName:rX,backendName:"wasm",setupFunc:function(e){CRe=e.wasm.cwrap(rX,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,u=s,c=o,l=DEe(o,a,t),f=l.transposed,h=l.axes,p=l.originalAxes,d=l.inputWasTransposed,m=h;d&&(k=t.dataIdMap.get(f.dataId).id)!==s&&(c=f,u=k,m=i8.getInnerMostAxes(m.length,c.shape.length)),i8.assertAxesAreInnerMostDims("prod",m,c.shape.length);var v=i8.computeOutAndReduceShapes(c.shape,m),g=(0,T.Z)(v,2),y=g[0],b=g[1],x=SY.sizeFromShape(b),w=t.makeOutput(y,c.dtype);if(0!==SY.sizeFromShape(c.shape)){var k=t.dataIdMap.get(w.dataId).id;CRe(u,x,mEe[w.dtype],k)}if(d&&t.disposeData(f.dataId),i){var S=i8.expandShapeToKeepDim(w.shape,p);w.shape=S}return w}},ORe={kernelName:sX,backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=ede(r,a,i,o),u=t.makeOutput([s.length],o);return t.typedArrayFromHeap(u).set(s),u}},MRe=_Ee(Gq),DRe=kEe(lX),FRe=kEe(vX);var PRe,LRe={kernelName:dX,backendName:"wasm",setupFunc:function(e){ARe=e.wasm.cwrap(dX,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=r.images,o=a.alignCorners,s=a.halfPixelCenters,u=a.size,c=(0,T.Z)(u,2),l=c[0],f=c[1],h=(0,T.Z)(i.shape,4),p=h[0],d=h[1],m=h[2],v=h[3],g=[p,l,f,v],y=n.dataIdMap.get(i.dataId);"float32"!==y.dtype&&(t=XEe({backend:n,inputs:{x:i},attrs:{dtype:"float32"}}),y=n.dataIdMap.get(t.dataId));var b=y.id,x=n.makeOutput(g,"float32");if(0===SY.sizeFromShape(i.shape))return x;var w=n.dataIdMap.get(x.dataId).id;return ARe(b,p,d,m,v,l,f,o?1:0,s?1:0,w),null!=t&&n.disposeData(t.dataId),x}};var zRe,BRe={kernelName:hX,backendName:"wasm",setupFunc:function(e){PRe=e.wasm.cwrap(hX,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,u=(0,T.Z)(s,2),c=u[0],l=u[1],f=(0,T.Z)(a.shape,4),h=f[0],p=f[1],d=f[2],m=f[3],v=[h,c,l,m],g=t.makeOutput(v,"float32");if(0===SY.sizeFromShape(a.shape))return g;var y,b=t.dataIdMap.get(a.dataId);"float32"!==b.dtype&&(y=XEe({backend:t,inputs:{x:a},attrs:{dtype:"float32"}}),b=t.dataIdMap.get(y.dataId));var x=b.id,w=t.dataIdMap.get(g.dataId).id;return PRe(x,h,p,d,m,c,l,i?1:0,o?1:0,w),null!=y&&t.disposeData(y.dataId),g}};var WRe,VRe={kernelName:gX,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=SY.parseAxisParam(i,a.shape);if(0===a.shape.length)return CEe({inputs:{x:a},backend:n});var s=n.makeOutput(a.shape,a.dtype),u=n.dataIdMap.get(a.dataId).id,c=n.dataIdMap.get(s.dataId).id,l=new Uint8Array(new Int32Array(o).buffer),f=new Uint8Array(new Int32Array(a.shape).buffer);zRe(u,l,o.length,f,a.shape.length,c);var h=jEe({inputs:{x:s},attrs:{shape:a.shape},backend:n});return n.disposeData(s.dataId),h},setupFunc:function(e){zRe=e.wasm.cwrap(gX,null,["number","array","number","array","number","number"])}};var jRe,URe={kernelName:oY,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=r.radians,o=r.fillValue,s=r.center,u=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(a.dataId).id,l=n.dataIdMap.get(u.dataId).id,f=(0,T.Z)(a.shape,4),h=f[0],p=f[1],d=f[2],m=f[3],v=i8.getImageCenter(s,p,d),g=(0,T.Z)(v,2),y=g[0],b=g[1],x="number"==typeof o?[o,o,o,0===o?0:255]:[].concat((0,I.Z)(o),[255]),w=new Uint8Array(new Int32Array(x).buffer);return WRe(c,h,p,d,m,i,y,b,w,x.length,l),u},setupFunc:function(e){WRe=e.wasm.cwrap(oY,null,["number","number","number","number","number","number","number","number","array","number","number"])}},HRe=kEe(yX),ZRe=kEe(bX);var GRe,qRe={kernelName:xX,backendName:"wasm",setupFunc:function(e){jRe=e.wasm.cwrap(xX,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.indices,i=n.updates,o=r.shape,s=t.makeOutput(o,i.dtype);if(0===SY.sizeFromShape(o))return s;var u=b0.calculateShapes(i,a,o),c=u.sliceRank,l=u.numUpdates,f=u.sliceSize,h=u.strides,p=u.outputSize,d=t.dataIdMap.get(a.dataId).id,m=t.dataIdMap.get(i.dataId).id,v=new Uint8Array(new Int32Array(h).buffer),g=t.dataIdMap.get(s.dataId).id;return jRe(d,m,mEe[i.dtype],c,l,f,v,p,g),s}};var KRe,XRe={kernelName:kX,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=n.dataIdMap.get(r.dataId).id,s=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(i.dataId).id,c=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(c.dataId).id,f=r.shape.length,h=a.shape.length,p=0===f||f>1||1===h?1:SY.sizeFromShape(a.shape.slice(1));return GRe(o,s,u,p,l),c},setupFunc:function(e){GRe=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}};var YRe,$Re={kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){KRe=e.wasm.cwrap(CX,null,["number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.x,r=t.dataIdMap.get(n.dataId).id,a=t.makeOutput(n.shape,n.dtype),i=t.dataIdMap.get(a.dataId).id;return 0===SY.sizeFromShape(a.shape)||KRe(r,i),a}},QRe=kEe(TX);var JRe={kernelName:DX,backendName:"wasm",setupFunc:function(e){YRe=e.wasm.cwrap(DX,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.logits,r=e.attrs.dim,a=t.dataIdMap.get(n.dataId).id,i=t.makeOutput(n.shape,n.dtype),o=t.dataIdMap.get(i.dataId).id,s=n.shape[r],u=SY.sizeFromShape(n.shape)/s;return 0===SY.sizeFromShape(i.shape)||YRe(a,o,s,u),i}};var eOe,tOe={kernelName:OX,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings,s=SY.sizeFromShape(i),u=[[0,0]];u.push.apply(u,(0,I.Z)(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=IRe.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),f=i8.getReshaped(l.shape,i,s,!1),h=i8.getPermuted(f.length,i.length,!1),p=i8.getReshapedPermuted(l.shape,i,s,!1),d=jEe({inputs:{x:l},backend:n,attrs:{shape:f}}),m=REe({inputs:{x:d},backend:n,attrs:{perm:h}}),v=jEe({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeData(l.dataId),n.disposeData(d.dataId),n.disposeData(m.dataId),v}};var nOe,rOe={kernelName:FX,backendName:"wasm",setupFunc:function(e){eOe=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=r.indices,i=r.values,o=r.denseShape,s=r.defaultValue,u=a.shape[0],c=a.shape[1],l=n.readSync(o.dataId)[0],f=[u+l,c],h=n.dataIdMap.get(a.dataId).id,p=n.dataIdMap.get(i.dataId).id,d=n.dataIdMap.get(s.dataId).id,m=n.makeOutput(f,a.dtype),v=n.dataIdMap.get(m.dataId).id,g=n.makeOutput(f.slice(0,1),i.dtype),y=n.dataIdMap.get(g.dataId).id,b=n.makeOutput([l],"bool"),x=n.dataIdMap.get(b.dataId).id,w=n.makeOutput([u],a.dtype),k=n.dataIdMap.get(w.dataId).id,S=n.makeOutput([4],"int32"),_=n.dataIdMap.get(S.dataId).id,T=eOe(h,p,mEe[i.dtype],u,l,c,d,v,y,x,k,_),I=n.readSync(S.dataId);switch(I[0]){case 1:t=i8.getSparseFillEmptyRowsIndicesDenseShapeMismatch(I[1]);break;case 2:t=i8.getSparseFillEmptyRowsNegativeIndexErrorMessage(I[1],I[2]);break;case 3:t=i8.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(I[1],I[2],I[3]);break;default:t=""}if(n.disposeData(S.dataId),t)throw n.disposeData(m.dataId),n.disposeData(g.dataId),n.disposeData(b.dataId),n.disposeData(w.dataId),new Error(t);var N=m,C=g;return T!==f[0]&&(N=GEe({inputs:{x:m},attrs:{begin:0,size:[T,c]},backend:n}),C=GEe({inputs:{x:g},attrs:{begin:0,size:T},backend:n}),n.disposeData(m.dataId),n.disposeData(g.dataId)),[N,C,b,w]}};var aOe,iOe={kernelName:PX,backendName:"wasm",setupFunc:function(e){nOe=e.wasm.cwrap(PX,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=n.inputIndices,a=n.inputShape,i=n.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=t.dataIdMap.get(r.dataId).id,s=t.dataIdMap.get(a.dataId).id,u=t.dataIdMap.get(i.dataId).id,c=r.shape[0],l=SY.sizeFromShape(i.shape),f=t.makeOutput([c,l],r.dtype),h=t.dataIdMap.get(f.dataId).id,p=t.makeOutput([l],i.dtype),d=t.dataIdMap.get(p.dataId).id,m=t.makeOutput([3],"int32"),v=t.dataIdMap.get(m.dataId).id;nOe(o,s,u,c,h,d,v);var g,y=t.readSync(m.dataId);switch(y[0]){case 0:g=i8.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(y[1],y[2]);break;case 1:g=i8.getSparseReshapeNegativeOutputDimErrorMessage(y[1],y[2]);break;case 2:g=i8.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage();break;case 3:var b=Array.from(t.readSync(a.dataId)),x=Array.from(t.readSync(p.dataId));g=i8.getSparseReshapeInputOutputMultipleErrorMessage(b,x);break;case 4:var w=Array.from(t.readSync(a.dataId)),k=Array.from(t.readSync(p.dataId));g=i8.getSparseReshapeInputOutputMismatchErrorMessage(w,k);break;default:g=""}if(t.disposeData(m.dataId),g)throw t.disposeData(f.dataId),t.disposeData(p.dataId),new Error(g);return[f,p]}};function oOe(e){aOe=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function sOe(e,t){var n=e.backend,r=e.inputs,a=r.data,i=r.indices,o=r.segmentIds,s=i.shape[0],u=n.readSync(o.dataId,s-1,s)[0],c=s>0?u+1:0;if(c<0)throw new Error(i8.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());var l=a.shape.slice();l[0]=c;var f=n.dataIdMap.get(a.dataId).id,h=n.dataIdMap.get(i.dataId).id,p=n.dataIdMap.get(o.dataId).id,d=n.makeOutput(l,a.dtype),m=n.dataIdMap.get(d.dataId).id,v=n.makeOutput([4],"int32"),g=n.dataIdMap.get(v.dataId).id;aOe(f,mEe[a.dtype],a.shape[0],h,p,m,g,t,0);var y,b=n.readSync(v.dataId);switch(b[0]){case 0:y=i8.getSparseSegmentReductionNegativeSegmentIdsErrorMessage();break;case 1:y=i8.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage();break;case 2:y=i8.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(b[1],b[2]);break;case 3:y=i8.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(b[1],b[2],b[3]);break;default:y=""}if(n.disposeData(v.dataId),y)throw n.disposeData(d.dataId),new Error(y);return d}var uOe={kernelName:LX,backendName:"wasm",setupFunc:oOe,kernelFunc:function(e){return sOe(e,!0)}};var cOe={kernelName:zX,backendName:"wasm",setupFunc:oOe,kernelFunc:function(e){return sOe(e,!1)}};var lOe,fOe={kernelName:MX,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.numOrSizeSplits,o=n.axis,s=SY.parseAxisParam(o,a.shape)[0],u=i8.prepareSplitSize(a,i,s),c=new Array(a.shape.length).fill(0),l=a.shape.slice();return u.map((function(e){var t=(0,I.Z)(l);t[s]=e;var n=GEe({inputs:{x:a},attrs:{begin:c,size:t},backend:r});return c[s]+=e,n}))}},hOe=kEe(AX),pOe=kEe(VX),dOe=_Ee(WX);var mOe,vOe={kernelName:aY,backendName:"wasm",setupFunc:function(e){lOe=e.wasm.cwrap(aY,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.alpha,a=n.x,i=t.dataIdMap.get(a.dataId).id,o=t.makeOutput(a.shape,a.dtype),s=t.dataIdMap.get(o.dataId).id;return lOe(i,r,mEe[a.dtype],s),o}};var gOe={kernelName:jX,backendName:"wasm",setupFunc:function(e){mOe=e.wasm.cwrap(jX,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=r.x,o=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,f=a.ellipsisMask,h=a.newAxisMask,p=a.shrinkAxisMask,d=S0.sliceInfo(i.shape,o,s,u,c,l,f,h,p),m=d.finalShapeSparse,v=d.finalShape,g=d.isIdentity,y=d.sliceDim0,b=d.isSimpleSlice,x=d.begin,w=d.end,k=d.strides;if(g)t=jEe({inputs:{x:i},backend:n,attrs:{shape:v}});else if(y||b){SY.assert(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var S=S0.computeOutShape(x,w,k),_=GEe({inputs:{x:i},backend:n,attrs:{begin:x,size:S}});t=jEe({inputs:{x:_},backend:n,attrs:{shape:v}}),n.disposeData(_.dataId)}else{var T=n.makeOutput(m,"float32"),I=n.dataIdMap.get(i.dataId).id,N=new Uint8Array(new Int32Array(SY.computeStrides(i.shape)).buffer),C=new Uint8Array(new Int32Array(x).buffer),E=new Uint8Array(new Int32Array(w).buffer),A=new Uint8Array(new Int32Array(k).buffer),R=new Uint8Array(new Int32Array(m).buffer),O=new Uint8Array(new Int32Array(SY.computeStrides(m)).buffer),M=n.dataIdMap.get(T.dataId).id;mOe(I,N,i.shape.length,C,E,A,R,O,m.length,M),t=jEe({inputs:{x:T},backend:n,attrs:{shape:v}}),n.disposeData(T.dataId)}return t}};var yOe={kernelName:UX,backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.data,i=n.dataSplits,o=r.separator,s=r.nGramWidths,u=r.leftPad,c=r.rightPad,l=r.padWidth,f=r.preserveShortSequences,h=kde(t.readSync(a.dataId),t.readSync(i.dataId),o,s,u,c,l,f),p=(0,T.Z)(h,2),d=p[0],m=p[1],v=t.makeOutput([d.length],"string");t.dataIdMap.get(v.dataId).stringBytes=d;var g=t.makeOutput(i.shape,"int32");return t.typedArrayFromHeap(g).set(m),[v,g]}};var bOe={kernelName:HX,backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.input,i=n.delimiter,o=r.skipEmpty,s=_de(t.readSync(a.dataId),t.readSync(i.dataId)[0],o),u=(0,T.Z)(s,3),c=u[0],l=u[1],f=u[2],h=l.length,p=t.makeOutput([h,2],"int32");t.typedArrayFromHeap(p).set(c);var d=t.makeOutput([h],"string");t.dataIdMap.get(d.dataId).stringBytes=l;var m=t.makeOutput([2],"int32");return t.typedArrayFromHeap(m).set(f),[p,d,m]}};var xOe,wOe={kernelName:ZX,backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.input,i=r.numBuckets,o=Tde(t.readSync(a.dataId),i),s=t.makeOutput(a.shape,"int32");return t.typedArrayFromHeap(s).set(o),s}},kOe=_Ee(GX);var SOe,_Oe={kernelName:RX,backendName:"wasm",setupFunc:function(e){xOe=e.wasm.cwrap(RX,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,u=s,c=o,l=DEe(o,a,t),f=l.transposed,h=l.axes,p=l.originalAxes,d=l.inputWasTransposed,m=h;d&&(k=t.dataIdMap.get(f.dataId).id)!==s&&(c=f,u=k,m=i8.getInnerMostAxes(m.length,c.shape.length)),i8.assertAxesAreInnerMostDims("sum",m,c.shape.length);var v=i8.computeOutAndReduceShapes(c.shape,m),g=(0,T.Z)(v,2),y=g[0],b=g[1],x=SY.sizeFromShape(b),w=t.makeOutput(y,c.dtype);if(0!==SY.sizeFromShape(c.shape)){var k=t.dataIdMap.get(w.dataId).id;xOe(u,x,mEe[w.dtype],k)}if(d&&t.disposeData(f.dataId),i){var S=i8.expandShapeToKeepDim(w.shape,p);w.shape=S}return w}},TOe=kEe(qX),IOe=kEe(KX);var NOe,COe={kernelName:XX,backendName:"wasm",setupFunc:function(e){SOe=e.wasm.cwrap(XX,null,["number","array","number","array","number","number"])},kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=n.dataIdMap.get(a.dataId).id,o=r.reps,s=new Array(a.shape.length),u=0;u<s.length;u++)s[u]=a.shape[u]*o[u];var c=new Uint8Array(new Int32Array(a.shape).buffer),l=new Uint8Array(new Int32Array(s).buffer),f=n.makeOutput(s,a.dtype),h=n.dataIdMap.get(f.dataId).id;return SOe(i,c,a.shape.length,l,s.length,mEe[f.dtype],h),f}};var EOe,AOe={kernelName:YX,backendName:"wasm",setupFunc:function(e){NOe=e.wasm.cwrap(YX,null,["number","array","number","number","number","bool","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=n.dataIdMap.get(a.dataId).id,u=new Uint8Array(new Int32Array(a.shape).buffer),c=a.shape.slice();c[c.length-1]=i;var l=n.makeOutput(c,a.dtype),f=n.dataIdMap.get(l.dataId).id,h=n.makeOutput(c,"int32"),p=n.dataIdMap.get(h.dataId).id;return NOe(s,u,a.shape.length,mEe[a.dtype],i,o,f,p),[l,h]}};var ROe={kernelName:$X,backendName:"wasm",setupFunc:function(e){EOe=e.wasm.cwrap($X,null,["number","number","bool","number","number","number","number","number","number","array","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=r.image,o=r.transforms,s=a.interpolation,u=a.fillMode,c=a.fillValue,l=a.outputShape,f=(0,T.Z)(i.shape,4),h=f[0],p=f[1],d=f[2],m=f[3],v=null!=l?l:[p,d],g=(0,T.Z)(v,2),y=g[0],b=g[1],x=[h,y,b,m],w=new Uint8Array(new Int32Array(SY.computeStrides(i.shape)).buffer),k=new Uint8Array(new Int32Array(SY.computeStrides(x)).buffer),S=n.makeOutput(x,i.dtype),_=n.dataIdMap.get(S.dataId).id,I=n.dataIdMap.get(i.dataId).id,N=n.dataIdMap.get(o.dataId).id,C="nearest"===s?1:2;switch(u){case"constant":default:t=1;break;case"reflect":t=2;break;case"wrap":t=3;break;case"nearest":t=4}return EOe(I,N,o.shape[0]>1,h,y,b,m,d,p,w,i.shape.length-1,k,x.length-1,C,t,c,_),S}};var OOe={kernelName:eY,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape[i],s=a.shape.length,u=new Array(s-1),c=0,l=0;l<s;l++)l!==i&&(u[c++]=a.shape[l]);var f=new Array(o),h=new Array(s).fill(0),p=a.shape.slice();p[i]=1;for(var d=0;d<f.length;d++)h[i]=d,f[d]=GEe({inputs:{x:a},attrs:{begin:h,size:p},backend:n});return f.map((function(e){return{dataId:e.dataId,dtype:e.dtype,shape:u}}))}};for(var MOe={kernelName:rY,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(0),r}},DOe=0,FOe=[wEe,SEe,IEe,NEe,PEe,zEe,WEe,VEe,ZEe,KEe,$Ee,QEe,JEe,nAe,aAe,sAe,uAe,cAe,fAe,pAe,mAe,gAe,yAe,bAe,xAe,wAe,SAe,IAe,CAe,EAe,AAe,OAe,DAe,PAe,zAe,WAe,VAe,jAe,AEe,HAe,ZAe,GAe,qAe,KAe,XAe,YAe,$Ae,JAe,eRe,nRe,aRe,sRe,uRe,lRe,fRe,hRe,mRe,gRe,bRe,xRe,wRe,kRe,_Re,IRe,NRe,ERe,RRe,ORe,MRe,DRe,FRe,HEe,LRe,BRe,VRe,URe,HRe,ZRe,qRe,XRe,$Re,QRe,qEe,JRe,tOe,rOe,iOe,uOe,cOe,fOe,hOe,pOe,dOe,vOe,gOe,yOe,bOe,wOe,kOe,_Oe,TOe,IOe,COe,AOe,ROe,MEe,OOe,MOe];DOe<FOe.length;DOe++){gY(FOe[DOe])}var POe=GG();POe.registerFlag("WASM_HAS_SIMD_SUPPORT",Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11])));case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})))),POe.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!POe.get("IS_NODE")){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.abrupt("return",((new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))));case 6:return e.prev=6,e.t0=e.catch(2),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[2,6]])}))));var LOe=SZ(jZ()),zOe=SZ(UZ()),BOe=SZ(HZ()),WOe=LOe.default||LOe,VOe=BOe.default||BOe,jOe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this)).wasm=e,r.dataIdNextNumber=1,r.wasm.tfjs.initWithThreadsCount(tMe),nMe=r.wasm.tfjs.getThreadsCount(),r.dataIdMap=new ZZ((0,F.Z)(r),PJ()),r}return(0,C.Z)(n,[{key:"write",value:function(e,t,n){var r={id:this.dataIdNextNumber++};return this.move(r,e,t,n,1),r}},{key:"numDataIds",value:function(){return this.dataIdMap.numDataIds()}},{key:"time",value:function(){var e=Tn(Sn().mark((function e(t){var n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=SY.now(),e.abrupt("return",(t(),{kernelMs:SY.now()-n}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"move",value:function(e,t,n,r,a){var i=this.dataIdNextNumber++;if("string"!==r){var o=SY.sizeFromShape(n),s=o*SY.bytesPerElement(r),u=this.wasm._malloc(s);this.dataIdMap.set(e,{id:i,memoryOffset:u,shape:n,dtype:r,refCount:a}),this.wasm.tfjs.registerTensor(i,o,u),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,s),u)}else{var c=t;this.dataIdMap.set(e,{id:i,stringBytes:c,shape:n,dtype:r,memoryOffset:null,refCount:a})}}},{key:"read",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e,t,n){var r=this.dataIdMap.get(e),a=r.memoryOffset,i=r.dtype,o=r.shape,s=r.stringBytes;if("string"===i)return null!=t&&0!==t||!(null==n||n>=s.length)?s.slice(t,n):s;t=t||0,n=n||SY.sizeFromShape(o);var u=SY.bytesPerElement(i);return function(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype ".concat(t))}}(this.wasm.HEAPU8.slice(a+t*u,a+n*u).buffer,i)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.dataIdMap.has(e)){var n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}},{key:"refCount",value:function(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}},{key:"incRef",value:function(e){var t=this.dataIdMap.get(e);null!=t&&t.refCount++}},{key:"floatPrecision",value:function(){return 32}},{key:"getMemoryOffset",value:function(e){return this.dataIdMap.get(e).memoryOffset}},{key:"dispose",value:function(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}},{key:"memory",value:function(){return{unreliable:!1}}},{key:"makeOutput",value:function(e,t,n){var r;if(null==n)r=this.write(null,e,t);else{var a=this.dataIdNextNumber++;r={id:a},this.dataIdMap.set(r,{id:a,memoryOffset:n,shape:e,dtype:t,refCount:1});var i=SY.sizeFromShape(e);this.wasm.tfjs.registerTensor(a,i,n)}return{dataId:r,shape:e,dtype:t}}},{key:"typedArrayFromHeap",value:function(e){var t=e.shape,n=e.dtype,r=e.dataId,a=this.wasm.HEAPU8.buffer,i=this.dataIdMap.get(r).memoryOffset,o=SY.sizeFromShape(t);switch(n){case"float32":return new Float32Array(a,i,o);case"int32":return new Int32Array(a,i,o);case"bool":return new Uint8Array(a,i,o);default:throw new Error("Unknown dtype ".concat(n))}}}]),n}(GZ);function UOe(e){return function(t,n){return SY.fetch(e,{credentials:"same-origin"}).then((function(r){r.ok||t.env.a("failed to load wasm binary file at '".concat(e,"'")),r.arrayBuffer().then((function(e){WebAssembly.instantiate(e,t).then((function(e){n(e.instance,e.module)}))}))})),{}}}function HOe(e,t,n){if(null!=KOe)return KOe;var r="tfjs-backend-wasm.wasm";return e&&t?r="tfjs-backend-wasm-threaded-simd.wasm":e&&(r="tfjs-backend-wasm-simd.wasm"),null!=YOe&&null!=YOe[r]?YOe[r]:n+r}function ZOe(){return GOe.apply(this,arguments)}function GOe(){return GOe=Tn(Sn().mark((function e(){var t,n,r,a;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([GG().getAsync("WASM_HAS_SIMD_SUPPORT"),GG().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);case 2:return t=e.sent,n=(0,T.Z)(t,2),r=n[0],a=n[1],e.abrupt("return",new Promise((function(e,t){var n={locateFile:function(e,t){if(e.endsWith(".worker.js")){var n=zOe.wasmWorkerContents.replace(/\n/g,"\\n"),i=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(i)}return e.endsWith(".wasm")?HOe(r,a,null!=XOe?XOe:t):t+e}};QOe&&(n.instantiateWasm=UOe(HOe(r,a,null!=XOe?XOe:"")));var i,o=!1;n.onAbort=function(){o||$Oe||($Oe=!0,t({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},a&&r&&null==KOe?(n.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+WOe.toString()],{type:"text/javascript"}),i=WOe(n)):i=VOe(n),i.then((function(t){o=!0,$Oe=!1;t.tfjs={init:t.cwrap("init",null,[]),initWithThreadsCount:t.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:t.cwrap("get_threads_count","number",[]),registerTensor:t.cwrap("register_tensor",null,["number","number","number"]),disposeData:t.cwrap("dispose_data",null,["number"]),dispose:t.cwrap("dispose",null,[])},e({wasm:t})})).catch(t)})));case 7:case"end":return e.stop()}}),e)}))),GOe.apply(this,arguments)}var qOe=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],KOe=null,XOe=null,YOe={},$Oe=!1,QOe=!1;function JOe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(DJ("setWasmPath has been deprecated in favor of setWasmPaths and will be removed in a future release."),$Oe)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`");KOe=e,QOe=t}function eMe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if($Oe)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)XOe=e;else{YOe=e;var n=qOe.filter((function(e){return null==YOe[e]}));if(n.length>0)throw new Error("There were no entries found for the following binaries: ".concat(n.join(","),". Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found."))}QOe=t}var tMe=-1,nMe=-1;function rMe(e){tMe=e}function aMe(){if(-1===nMe)throw new Error("WASM backend not initialized.");return nMe}var iMe="4.0.0";XJ("wasm",Tn(Sn().mark((function e(){var t,n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZOe();case 2:return t=e.sent,n=t.wasm,e.abrupt("return",new jOe(n));case 5:case"end":return e.stop()}}),e)}))),2);var oMe="4.0.0",sMe={tfjs:oMe,"tfjs-core":oMe,"tfjs-converter":"4.0.0","tfjs-backend-cpu":"4.0.0","tfjs-backend-webgl":"4.0.0","tfjs-backend-wasm":"4.0.0"},uMe={};function cMe(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.beginPath(),t.slice(1).forEach((function(n,r){var a=n.x,i=n.y,o=t[r];e.moveTo(o.x,o.y),e.lineTo(a,i)})),n){var r=t[t.length-1],a=t[0];if(!r||!a)return;e.moveTo(r.x,r.y),e.lineTo(a.x,a.y)}e.stroke()}pZ(uMe,{AnchorPosition:function(){return $Me},DrawBox:function(){return tDe},DrawBoxOptions:function(){return eDe},DrawFaceLandmarks:function(){return nFe},DrawFaceLandmarksOptions:function(){return tFe},DrawTextField:function(){return JMe},DrawTextFieldOptions:function(){return QMe},drawContour:function(){return cMe},drawDetections:function(){return nDe},drawFaceExpressions:function(){return QDe},drawFaceLandmarks:function(){return rFe}});pZ({},{computeReshapedDimensions:function(){return xMe},getCenterPoint:function(){return wMe},isDimensions:function(){return bMe},isEven:function(){return gMe},isFloat:function(){return vMe},isTensor:function(){return fMe},isTensor1D:function(){return hMe},isTensor2D:function(){return pMe},isTensor3D:function(){return dMe},isTensor4D:function(){return mMe},isValidNumber:function(){return SMe},isValidProbablitiy:function(){return _Me},range:function(){return kMe},round:function(){return yMe}});var lMe=function(){function e(t,n){if(N(this,e),!SMe(t)||!SMe(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have ".concat(JSON.stringify({width:t,height:n})));this._width=t,this._height=n}return(0,C.Z)(e,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"reverse",value:function(){return new e(1/this.width,1/this.height)}}]),e}();function fMe(e,t){return e instanceof i$&&e.shape.length===t}function hMe(e){return fMe(e,1)}function pMe(e){return fMe(e,2)}function dMe(e){return fMe(e,3)}function mMe(e){return fMe(e,4)}function vMe(e){return e%1!==0}function gMe(e){return e%2===0}function yMe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=Math.pow(10,t);return Math.floor(e*n)/n}function bMe(e){return e&&e.width&&e.height}function xMe(e,t){var n=e.width,r=e.height,a=t/Math.max(r,n);return new lMe(Math.round(n*a),Math.round(r*a))}function wMe(e){return e.reduce((function(e,t){return e.add(t)}),new TMe(0,0)).div(new TMe(e.length,e.length))}function kMe(e,t,n){return Array(e).fill(0).map((function(e,r){return t+r*n}))}function SMe(e){return!!e&&e!==1/0&&e!==-1/0&&!Number.isNaN(e)||0===e}function _Me(e){return SMe(e)&&e>=0&&e<=1}var TMe=function(){function e(t,n){N(this,e),this._x=t,this._y=n}return(0,C.Z)(e,[{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"sub",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"mul",value:function(t){return new e(this.x*t.x,this.y*t.y)}},{key:"div",value:function(t){return new e(this.x/t.x,this.y/t.y)}},{key:"abs",value:function(){return new e(Math.abs(this.x),Math.abs(this.y))}},{key:"magnitude",value:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"floor",value:function(){return new e(Math.floor(this.x),Math.floor(this.y))}}]),e}(),IMe=function(){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];N(this,e);var r=t||{},a=[r.left,r.top,r.right,r.bottom].every(SMe),i=[r.x,r.y,r.width,r.height].every(SMe);if(!i&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have ".concat(JSON.stringify(r)));var o=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=(0,T.Z)(o,4),u=s[0],c=s[1],l=s[2],f=s[3];e.assertIsValidBox({x:u,y:c,width:l,height:f},"Box.constructor",n),this._x=u,this._y=c,this._width=l,this._height=f}return(0,C.Z)(e,[{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"left",get:function(){return this.x}},{key:"top",get:function(){return this.y}},{key:"right",get:function(){return this.x+this.width}},{key:"bottom",get:function(){return this.y+this.height}},{key:"area",get:function(){return this.width*this.height}},{key:"topLeft",get:function(){return new TMe(this.left,this.top)}},{key:"topRight",get:function(){return new TMe(this.right,this.top)}},{key:"bottomLeft",get:function(){return new TMe(this.left,this.bottom)}},{key:"bottomRight",get:function(){return new TMe(this.right,this.bottom)}},{key:"round",value:function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.round(e)})),n=(0,T.Z)(t,4);return new e({x:n[0],y:n[1],width:n[2],height:n[3]})}},{key:"floor",value:function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.floor(e)})),n=(0,T.Z)(t,4);return new e({x:n[0],y:n[1],width:n[2],height:n[3]})}},{key:"toSquare",value:function(){var t=this.x,n=this.y,r=this.width,a=this.height,i=Math.abs(r-a);return r<a&&(t-=i/2,r+=i),a<r&&(n-=i/2,a+=i),new e({x:t,y:n,width:r,height:a})}},{key:"rescale",value:function(t){var n=bMe(t)?t.width:t,r=bMe(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})}},{key:"pad",value:function(t,n){return new e({x:this.x-t/2,y:this.y-n/2,width:this.width+t,height:this.height+n})}},{key:"clipAtImageBorders",value:function(t,n){var r=this.x,a=this.y,i=this.right,o=this.bottom,s=Math.max(r,0),u=Math.max(a,0),c=i-s,l=o-u;return new e({x:s,y:u,width:Math.min(c,t-s),height:Math.min(l,n-u)}).floor()}},{key:"shift",value:function(t,n){var r=this.width,a=this.height;return new e({x:this.x+t,y:this.y+n,width:r,height:a})}},{key:"padAtBorders",value:function(e,t){var n=this.width+1,r=this.height+1,a=n,i=r,o=this.left,s=this.top,u=this.right,c=this.bottom;return u>t&&(a=-u+t+n,u=t),c>e&&(i=-c+e+r,c=e),o<1&&(i=2-o,o=1),s<1&&(i=2-s,s=1),{dy:1,edy:i,dx:1,edx:a,y:s,ey:c,x:o,ex:u,w:n,h:r}}},{key:"calibrate",value:function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()}}],[{key:"isRect",value:function(e){return!!e&&[e.x,e.y,e.width,e.height].every(SMe)}},{key:"assertIsValidBox",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e.isRect(t))throw new Error("".concat(n," - invalid box: ").concat(JSON.stringify(t),", expected object with properties x, y, width, height"));if(!r&&(t.width<0||t.height<0))throw new Error("".concat(n," - width (").concat(t.width,") and height (").concat(t.height,") must be positive numbers"))}}]),e}(),NMe=function(e){A(n,e);var t=L(n);function n(e,r,a,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return N(this,n),t.call(this,{left:e,top:r,right:a,bottom:i},o)}return(0,C.Z)(n)}(IMe),CMe=function(){function e(t,n,r,a,i){N(this,e),this._imageDims=new lMe(i.width,i.height),this._score=t,this._classScore=n,this._className=r,this._box=new IMe(a).rescale(this._imageDims)}return(0,C.Z)(e,[{key:"score",get:function(){return this._score}},{key:"classScore",get:function(){return this._classScore}},{key:"className",get:function(){return this._className}},{key:"box",get:function(){return this._box}},{key:"imageDims",get:function(){return this._imageDims}},{key:"imageWidth",get:function(){return this.imageDims.width}},{key:"imageHeight",get:function(){return this.imageDims.height}},{key:"relativeBox",get:function(){return new IMe(this._box).rescale(this.imageDims.reverse())}},{key:"forSize",value:function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})}}]),e}(),EMe=function(e){A(n,e);var t=L(n);function n(e,r,a){return N(this,n),t.call(this,e,e,"",r,a)}return(0,C.Z)(n,[{key:"forSize",value:function(e,t){var r=bf(R(n.prototype),"forSize",this).call(this,e,t);return new n(r.score,r.relativeBox,r.imageDims)}}]),n}(CMe);function AMe(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),a=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),i=r*a;return n?i/(e.area+t.area-i):i/Math.min(e.area,t.area)}function RMe(e,t,n){for(var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=t.map((function(e,t){return{score:e,boxIndex:t}})).sort((function(e,t){return e.score-t.score})).map((function(e){return e.boxIndex})),i=[],o=function(){var t=a.pop();i.push(t);for(var o=a,s=[],u=0;u<o.length;u++){var c=o[u],l=e[t],f=e[c];s.push(AMe(l,f,r))}a=a.filter((function(e,t){return s[t]<=n}))};a.length>0;)o();return i}function OMe(e,t){return BJ((function(){var n=(0,T.Z)(t,3),r=n[0],a=n[1],i=n[2],o=a2([].concat((0,I.Z)(e.shape.slice(0,3)),[1]),r,"float32"),s=a2([].concat((0,I.Z)(e.shape.slice(0,3)),[1]),a,"float32"),u=a2([].concat((0,I.Z)(e.shape.slice(0,3)),[1]),i,"float32"),c=U1([o,s,u],3);return I3(e,c)}))}function MMe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return BJ((function(){var n=e.shape.slice(1),r=(0,T.Z)(n,2),a=r[0],i=r[1];if(a===i)return e;var o=Math.abs(a-i),s=Math.round(o*(t?.5:1)),u=a>i?2:1,c=function(t){var n=e.shape.slice();return n[u]=t,a2(n,0,"float32")},l=c(s),f=o-l.shape[u],h=[t&&f?c(f):null,e,l].filter((function(e){return!!e})).map((function(e){return tJ(e,"float32")}));return U1(h,u)}))}function DMe(e){return 1/(1+Math.exp(-e))}var FMe,PMe=function(e){A(n,e);var t=L(n);function n(e,r,a,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return N(this,n),t.call(this,{x:e,y:r,width:a,height:i},o)}return(0,C.Z)(n)}(IMe),LMe=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new TMe(0,0);N(this,e);var a=n.width,i=n.height;this._imgDims=new lMe(a,i),this._shift=r,this._positions=t.map((function(e){return e.mul(new TMe(a,i)).add(r)}))}return(0,C.Z)(e,[{key:"shift",get:function(){return new TMe(this._shift.x,this._shift.y)}},{key:"imageWidth",get:function(){return this._imgDims.width}},{key:"imageHeight",get:function(){return this._imgDims.height}},{key:"positions",get:function(){return this._positions}},{key:"relativePositions",get:function(){var e=this;return this._positions.map((function(t){return t.sub(e._shift).div(new TMe(e.imageWidth,e.imageHeight))}))}},{key:"forSize",value:function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})}},{key:"shiftBy",value:function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new TMe(e,t))}},{key:"shiftByPoint",value:function(e){return this.shiftBy(e.x,e.y)}},{key:"align",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n=e instanceof EMe?e.box.floor():new IMe(e);return this.shiftBy(n.x,n.y).align(null,t)}var r=Lt({useDlibAlignment:!1,minBoxPadding:.2},t),a=r.useDlibAlignment,i=r.minBoxPadding;return a?this.alignDlib():this.alignMinBbox(i)}},{key:"alignDlib",value:function(){var e=this.getRefPointsForAlignment(),t=(0,T.Z)(e,3),n=t[0],r=t[1],a=t[2],i=function(e){return a.sub(e).magnitude()},o=(i(n)+i(r))/2,s=Math.floor(o/.45),u=wMe(e),c=Math.floor(Math.max(0,u.x-.5*s)),l=Math.floor(Math.max(0,u.y-.43*s));return new PMe(c,l,Math.min(s,this.imageWidth+c),Math.min(s,this.imageHeight+l))}},{key:"alignMinBbox",value:function(e){var t=function(e){var t=e.map((function(e){return e.x})),n=e.map((function(e){return e.y})),r=t.reduce((function(e,t){return t<e?t:e}),1/0),a=n.reduce((function(e,t){return t<e?t:e}),1/0),i=t.reduce((function(e,t){return e<t?t:e}),0),o=n.reduce((function(e,t){return e<t?t:e}),0);return new NMe(r,a,i,o)}(this.positions);return t.pad(t.width*e,t.height*e)}},{key:"getRefPointsForAlignment",value:function(){throw new Error("getRefPointsForAlignment not implemented by base class")}}]),e}(),zMe=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"getJawOutline",value:function(){return this.positions.slice(0,17)}},{key:"getLeftEyeBrow",value:function(){return this.positions.slice(17,22)}},{key:"getRightEyeBrow",value:function(){return this.positions.slice(22,27)}},{key:"getNose",value:function(){return this.positions.slice(27,36)}},{key:"getLeftEye",value:function(){return this.positions.slice(36,42)}},{key:"getRightEye",value:function(){return this.positions.slice(42,48)}},{key:"getMouth",value:function(){return this.positions.slice(48,68)}},{key:"getRefPointsForAlignment",value:function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(wMe)}}]),n}(LMe);function BMe(e){return e.detection instanceof EMe}function WMe(e,t){return Lt(Lt({},e),{detection:t})}function VMe(){var e=window.fetch;if(!e)throw new Error("fetch - missing fetch implementation for browser environment");return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},createVideoElement:function(){return document.createElement("video")},fetch:e,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}function jMe(){return"object"==typeof n.g&&"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node}function UMe(e){var t="";if(!e&&jMe())try{e=hZ("fs")}catch(n){t=n.toString()}return{readFile:e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){return e?r(e):n(t)}))}))}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: ".concat(t))}}}function HMe(){var e=n.g.Canvas||n.g.HTMLCanvasElement,t=n.g.Image||n.g.HTMLImageElement,r=n.g.Video||n.g.HTMLVideoElement,a=n.g.fetch,i=UMe();return Lt({Canvas:e||function(){return(0,C.Z)((function e(){N(this,e)}))}(),CanvasRenderingContext2D:n.g.CanvasRenderingContext2D||function(){return(0,C.Z)((function e(){N(this,e)}))}(),Image:t||function(){return(0,C.Z)((function e(){N(this,e)}))}(),ImageData:n.g.ImageData||function(){return(0,C.Z)((function e(){N(this,e)}))}(),Video:n.g.HTMLVideoElement||function(){return(0,C.Z)((function e(){N(this,e)}))}(),createCanvasElement:function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},createVideoElement:function(){if(r)return new r;throw new Error("createVideoElement - missing Video implementation for nodejs environment")},fetch:a},i)}function ZMe(){return"object"==typeof window&&"undefined"!=typeof document&&"undefined"!=typeof HTMLImageElement&&"undefined"!=typeof HTMLCanvasElement&&"undefined"!=typeof HTMLVideoElement&&"undefined"!=typeof ImageData&&"undefined"!=typeof CanvasRenderingContext2D}function GMe(e){FMe=e}function qMe(){return ZMe()?GMe(VMe()):jMe()?GMe(HMe()):null}var KMe={getEnv:function(){if(!FMe)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return FMe},setEnv:GMe,initialize:qMe,createBrowserEnv:VMe,createFileSystem:UMe,createNodejsEnv:HMe,monkeyPatch:function(e){if(FMe||qMe(),!FMe)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=void 0===t?FMe.Canvas:t,r=e.Image,a=void 0===r?FMe.Image:r;FMe.Canvas=n,FMe.Image=a,FMe.createCanvasElement=e.createCanvasElement||function(){return new n},FMe.createImageElement=e.createImageElement||function(){return new a},FMe.ImageData=e.ImageData||FMe.ImageData,FMe.Video=e.Video||FMe.Video,FMe.fetch=e.fetch||FMe.fetch,FMe.readFile=e.readFile||FMe.readFile},isBrowser:ZMe,isNodejs:jMe};function XMe(e){return KMe.isNodejs()||"string"!=typeof e?e:document.getElementById(e)}function YMe(e){var t=KMe.getEnv(),n=t.Canvas;if(e instanceof t.CanvasRenderingContext2D)return e;var r=XMe(e);if(!(r instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var a=r.getContext("2d");if(!a)throw new Error("resolveContext2d - canvas 2d context is null");return a}qMe();var $Me=function(e){return e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT",e}($Me||{}),QMe=(0,C.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};N(this,e);var n=t.anchorPosition,r=t.backgroundColor,a=t.fontColor,i=t.fontSize,o=t.fontStyle,s=t.padding;this.anchorPosition=n||"TOP_LEFT",this.backgroundColor=r||"rgba(0, 0, 0, 0.5)",this.fontColor=a||"rgba(255, 255, 255, 1)",this.fontSize=i||14,this.fontStyle=o||"Georgia",this.padding=s||4})),JMe=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};N(this,e),this.text="string"==typeof t?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new QMe(r)}return(0,C.Z)(e,[{key:"measureWidth",value:function(e){var t=this.options.padding;return this.text.map((function(t){return e.measureText(t).width})).reduce((function(e,t){return e<t?t:e}),0)+2*t}},{key:"measureHeight",value:function(){var e=this.options,t=e.fontSize,n=e.padding;return this.text.length*t+2*n}},{key:"getUpperLeft",value:function(e,t){var n=this.options.anchorPosition,r="BOTTOM_RIGHT"===n||"TOP_RIGHT"===n,a="BOTTOM_LEFT"===n||"BOTTOM_RIGHT"===n,i=this.measureWidth(e),o=this.measureHeight(),s=r?this.anchor.x-i:this.anchor.x,u=a?this.anchor.y-o:this.anchor.y;if(t){var c=t.width,l=t.height;return{x:Math.max(Math.min(s,c-i),0),y:Math.max(Math.min(u,l-o),0)}}return{x:s,y:u}}},{key:"draw",value:function(e){var t=XMe(e),n=YMe(t),r=this.options,a=r.backgroundColor,i=r.fontColor,o=r.fontSize,s=r.fontStyle,u=r.padding;n.font="".concat(o,"px ").concat(s);var c=this.measureWidth(n),l=this.measureHeight();n.fillStyle=a;var f=this.getUpperLeft(n,t);n.fillRect(f.x,f.y,c,l),n.fillStyle=i,this.text.forEach((function(e,t){var r=u+f.x,a=u+f.y+(t+1)*o;n.fillText(e,r,a)}))}}]),e}(),eDe=(0,C.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};N(this,e);var n=t.boxColor,r=t.lineWidth,a=t.label,i=t.drawLabelOptions;this.boxColor=n||"rgba(0, 0, 255, 1)",this.lineWidth=r||2,this.label=a;var o={anchorPosition:"BOTTOM_LEFT",backgroundColor:this.boxColor};this.drawLabelOptions=new QMe(Lt(Lt({},o),i))})),tDe=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};N(this,e),this.box=new IMe(t),this.options=new eDe(n)}return(0,C.Z)(e,[{key:"draw",value:function(e){var t=YMe(e),n=this.options,r=n.boxColor,a=n.lineWidth,i=this.box,o=i.x,s=i.y,u=i.width,c=i.height;t.strokeStyle=r,t.lineWidth=a,t.strokeRect(o,s,u,c);var l=this.options.label;l&&new JMe([l],{x:o-a/2,y:s},this.options.drawLabelOptions).draw(e)}}]),e}();function nDe(e,t){(Array.isArray(t)?t:[t]).forEach((function(t){var n=t instanceof EMe?t.score:BMe(t)?t.detection.score:void 0,r=t instanceof EMe?t.box:BMe(t)?t.detection.box:new IMe(t),a=n?"".concat(yMe(n)):void 0;new tDe(r,{label:a}).draw(e)}))}function rDe(e){var t=KMe.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function aDe(e){return new Promise((function(t,n){function r(e){!e.currentTarget||(e.currentTarget.removeEventListener("load",a),e.currentTarget.removeEventListener("error",r),n(e))}function a(e){!e.currentTarget||(e.currentTarget.removeEventListener("load",a),e.currentTarget.removeEventListener("error",r),t(e))}(e instanceof KMe.getEnv().Canvas||rDe(e))&&t(null),e.addEventListener("load",a),e.addEventListener("error",r)}))}function iDe(e){var t=KMe.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new lMe(e.naturalWidth,e.naturalHeight):e instanceof r?new lMe(e.videoWidth,e.videoHeight):new lMe(e.width,e.height)}function oDe(e){var t=e.width,n=e.height,r=(0,KMe.getEnv().createCanvasElement)();return r.width=t,r.height=n,r}function sDe(e,t){var n=KMe.getEnv().ImageData;if(!(e instanceof n)&&!rDe(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||iDe(e),a=r.width,i=r.height,o=oDe({width:a,height:i});return e instanceof n?YMe(o).putImageData(e,0,0):YMe(o).drawImage(e,0,0,a,i),o}function uDe(e,t){return cDe.apply(this,arguments)}function cDe(){return cDe=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u,c;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n||KMe.getEnv().createCanvasElement(),a=t.shape.slice(mMe(t)?1:0),i=(0,T.Z)(a,3),o=i[0],s=i[1],u=i[2],c=BJ((function(){return t.as3D(o,s,u).toInt()})),e.next=3,u0.toPixels(c,r);case 3:return c.dispose(),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),cDe.apply(this,arguments)}function lDe(e){var t=KMe.getEnv(),n=t.Image,r=t.Canvas,a=t.Video;return e instanceof n||e instanceof r||e instanceof a}function fDe(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=KMe.getEnv(),a=r.Image,i=r.Canvas;if(!(e instanceof a||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");if(t<=0)return oDe({width:1,height:1});var o=iDe(e),s=t/Math.max(o.height,o.width),u=s*o.width,c=s*o.height,l=oDe({width:t,height:t}),f=e instanceof i?e:sDe(e),h=Math.abs(u-c)/2,p=n&&u<c?h:0,d=n&&c<u?h:0;return f.width>0&&f.height>0&&YMe(l).drawImage(f,p,d,u,c),l}var hDe=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(N(this,e),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],this._inputSize=0,!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have ".concat(t));this._treatAsBatchInput=r,this._batchSize=t.length,t.forEach((function(e,t){if(dMe(e))return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape);if(mMe(e)){var r=e.shape[0];if(1!==r)throw new Error("NetInput - tf.Tensor4D with batchSize ".concat(r," passed, but not supported in input array"));return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape.slice(1))}var a=e instanceof KMe.getEnv().Canvas?e:sDe(e);n._canvases[t]=a,n._inputDimensions[t]=[a.height,a.width,3]}))}return(0,C.Z)(e,[{key:"imageTensors",get:function(){return this._imageTensors}},{key:"canvases",get:function(){return this._canvases}},{key:"isBatchInput",get:function(){return this.batchSize>1||this._treatAsBatchInput}},{key:"batchSize",get:function(){return this._batchSize}},{key:"inputDimensions",get:function(){return this._inputDimensions}},{key:"inputSize",get:function(){return this._inputSize}},{key:"reshapedInputDimensions",get:function(){var e=this;return kMe(this.batchSize,0,1).map((function(t,n){return e.getReshapedInputDimensions(n)}))}},{key:"getInput",value:function(e){return this.canvases[e]||this.imageTensors[e]}},{key:"getInputDimensions",value:function(e){return this._inputDimensions[e]}},{key:"getInputHeight",value:function(e){return this._inputDimensions[e][0]}},{key:"getInputWidth",value:function(e){return this._inputDimensions[e][1]}},{key:"getReshapedInputDimensions",value:function(e){if("number"!=typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return xMe({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)}},{key:"toBatchTensor",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._inputSize=e,BJ((function(){var r=kMe(t.batchSize,0,1).map((function(r){var a=t.getInput(r);if(a instanceof i$){var i=mMe(a)?a:J2(a);return((i=MMe(i,n)).shape[1]!==e||i.shape[2]!==e)&&(i=V6.resizeBilinear(i,[e,e],!1,!1)),i.as3D(e,e,3)}if(a instanceof KMe.getEnv().Canvas)return u0.fromPixels(fDe(a,e,n));throw new Error("toBatchTensor - at batchIdx ".concat(r,", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have ").concat(a))}));return Y4(r.map((function(e){return tJ(e,"float32")}))).as4D(t.batchSize,e,e,3)}))}}]),e}();function pDe(e){return dDe.apply(this,arguments)}function dDe(){return dDe=Tn(Sn().mark((function e(t){var n,r,a;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof hDe)){e.next=2;break}return e.abrupt("return",t);case 2:if((n=Array.isArray(t)?t:[t]).length){e.next=5;break}throw new Error("toNetInput - empty array passed as input");case 5:return r=function(e){return Array.isArray(t)?" at input index ".concat(e,":"):""},(a=n.map(XMe)).forEach((function(e,t){if(!lDe(e)&&!dMe(e)&&!mMe(e))throw"string"==typeof n[t]?new Error("toNetInput -".concat(r(t)," string passed, but could not resolve HTMLElement for element id ").concat(n[t])):new Error("toNetInput -".concat(r(t)," expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id"));if(mMe(e)){var a=e.shape[0];if(1!==a)throw new Error("toNetInput -".concat(r(t)," tf.Tensor4D with batchSize ").concat(a," passed, but not supported in input array"))}})),e.next=9,Promise.all(a.map((function(e){return lDe(e)&&aDe(e)})));case 9:return e.abrupt("return",new hDe(a,Array.isArray(t)));case 10:case"end":return e.stop()}}),e)}))),dDe.apply(this,arguments)}function mDe(e,t){return vDe.apply(this,arguments)}function vDe(){return vDe=Tn(Sn().mark((function e(t,n){var r,a,i,o,s,u;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=KMe.getEnv(),a=r.Canvas,i=t,t instanceof a){e.next=16;break}return e.next=4,pDe(t);case 4:if(!((o=e.sent).batchSize>1)){e.next=7;break}throw new Error("extractFaces - batchSize > 1 not supported");case 7:if(!((s=o.getInput(0))instanceof a)){e.next=12;break}e.t0=s,e.next=15;break;case 12:return e.next=14,uDe(s);case 14:e.t0=e.sent;case 15:i=e.t0;case 16:return u=YMe(i),e.abrupt("return",n.map((function(e){return e instanceof EMe?e.forSize(i.width,i.height).box.floor():e})).map((function(e){return e.clipAtImageBorders(i.width,i.height)})).map((function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=oDe({width:r,height:a});return r>0&&a>0&&YMe(i).putImageData(u.getImageData(t,n,r,a),0,0),i})));case 18:case"end":return e.stop()}}),e)}))),vDe.apply(this,arguments)}function gDe(e,t){return yDe.apply(this,arguments)}function yDe(){return yDe=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dMe(t)||mMe(t)){e.next=2;break}throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");case 2:if(!(mMe(t)&&t.shape[0]>1)){e.next=4;break}throw new Error("extractFaceTensors - batchSize > 1 not supported");case 4:return e.abrupt("return",BJ((function(){var e=t.shape.slice(mMe(t)?1:0),r=(0,T.Z)(e,3),a=r[0],i=r[1],o=r[2];return n.map((function(e){return e instanceof EMe?e.forSize(i,a).box:e})).map((function(e){return e.clipAtImageBorders(i,a)})).filter((function(e){return e.width>0&&e.height>0})).map((function(e){var n=e.x,r=e.y,s=e.width,u=e.height;return W4(t.as3D(a,i,o),[r,n,0],[u,s,o])}))})));case 5:case"end":return e.stop()}}),e)}))),yDe.apply(this,arguments)}function bDe(e,t){return xDe.apply(this,arguments)}function xDe(){return xDe=Tn(Sn().mark((function e(t,n){var r,a,i;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=KMe.getEnv(),a=r.fetch,e.next=4,a(t,n);case 4:if((i=e.sent).status<400){e.next=7;break}throw new Error("failed to fetch: (".concat(i.status,") ").concat(i.statusText,", from url: ").concat(i.url));case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)}))),xDe.apply(this,arguments)}function wDe(e){return kDe.apply(this,arguments)}function kDe(){return kDe=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bDe(t);case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}}),e)}))),kDe.apply(this,arguments)}function SDe(e,t){var n="".concat(t,"-weights_manifest.json");if(!e)return{modelBaseUri:"",manifestUri:n};if("/"===e)return{modelBaseUri:"/",manifestUri:"/".concat(n)};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",a=(e=e.replace(r,"")).split("/").filter((function(e){return e})),i=e.endsWith(".json")?a[a.length-1]:n,o=r+(e.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return{modelBaseUri:o=e.startsWith("/")?"/".concat(o):o,manifestUri:"/"===o?"/".concat(i):"".concat(o,"/").concat(i)}}function _De(e,t){return TDe.apply(this,arguments)}function TDe(){return TDe=Tn(Sn().mark((function e(t,n){var r,a,i,o;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=SDe(t,n),a=r.manifestUri,i=r.modelBaseUri,e.next=5,wDe(a);case 5:return o=e.sent,e.abrupt("return",aJ.loadWeights(o,i));case 7:case"end":return e.stop()}}),e)}))),TDe.apply(this,arguments)}function IDe(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n?iDe(t):t,a=r.width,i=r.height;return e.width=a,e.height=i,{width:a,height:i}}var NDe=function(){function e(t){N(this,e),this._params=void 0,this._paramMappings=[],this._name=t}return(0,C.Z)(e,[{key:"params",get:function(){return this._params}},{key:"paramMappings",get:function(){return this._paramMappings}},{key:"isLoaded",get:function(){return!!this.params}},{key:"getParamFromPath",value:function(e){var t=this.traversePropertyPath(e);return t.obj[t.objProp]}},{key:"reassignParamFromPath",value:function(e,t){var n=this.traversePropertyPath(e),r=n.obj,a=n.objProp;r[a].dispose(),r[a]=t}},{key:"getParamList",value:function(){var e=this;return this._paramMappings.map((function(t){var n=t.paramPath;return{path:n,tensor:e.getParamFromPath(n)}}))}},{key:"getTrainableParams",value:function(){return this.getParamList().filter((function(e){return e.tensor instanceof s$}))}},{key:"getFrozenParams",value:function(){return this.getParamList().filter((function(e){return!(e.tensor instanceof s$)}))}},{key:"variable",value:function(){var e=this;this.getFrozenParams().forEach((function(t){var n=t.path,r=t.tensor;e.reassignParamFromPath(n,r.variable())}))}},{key:"freeze",value:function(){var e=this;this.getTrainableParams().forEach((function(t){var n=t.path,r=t.tensor,a=H$(r.dataSync());r.dispose(),e.reassignParamFromPath(n,a)}))}},{key:"dispose",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.getParamList().forEach((function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path ".concat(t.path));t.tensor.dispose()})),this._params=void 0}},{key:"serializeParams",value:function(){return new Float32Array(this.getParamList().map((function(e){var t=e.tensor;return Array.from(t.dataSync())})).reduce((function(e,t){return e.concat(t)})))}},{key:"load",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof Float32Array)){e.next=3;break}return this.extractWeights(t),e.abrupt("return");case 3:return e.next=5,this.loadFromUri(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadFromUri",value:function(){var e=Tn(Sn().mark((function e(t){var n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||"string"==typeof t){e.next=2;break}throw new Error("".concat(this._name,".loadFromUri - expected model uri"));case 2:return e.next=4,_De(t,this.getDefaultModelName());case 4:n=e.sent,this.loadFromWeightMap(n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadFromDisk",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i,o,s,u,c,l;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||"string"==typeof t){e.next=2;break}throw new Error("".concat(this._name,".loadFromDisk - expected model file path"));case 2:return n=KMe.getEnv(),r=n.readFile,a=SDe(t,this.getDefaultModelName()),i=a.manifestUri,o=a.modelBaseUri,s=function(e){return Promise.all(e.map((function(e){return r(e).then((function(e){return e.buffer}))})))},u=aJ.weightsLoaderFactory(s),e.t0=JSON,e.next=12,r(i);case 12:return e.t1=e.sent.toString(),c=e.t0.parse.call(e.t0,e.t1),e.next=16,u(c,o);case 16:l=e.sent,this.loadFromWeightMap(l);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadFromWeightMap",value:function(e){var t=this.extractParamsFromWeightMap(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r}},{key:"extractWeights",value:function(e){var t=this.extractParams(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r}},{key:"traversePropertyPath",value:function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce((function(t,n){if(!t.nextObj.hasOwnProperty(n))throw new Error("traversePropertyPath - object does not have property ".concat(n,", for path ").concat(e));return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}}),{nextObj:this.params}),n=t.obj,r=t.objProp;if(!n||!r||!(n[r]instanceof i$))throw new Error("traversePropertyPath - parameter is not a tensor, for path ".concat(e));return{obj:n,objProp:r}}}]),e}();function CDe(e,t,n){return BJ((function(){var r=O4(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=s1(r,t.bias)}))}function EDe(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return BJ((function(){var r=k4(n?s1(l2(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):CDe(e,t.conv0,[2,2])),a=CDe(r,t.conv1,[1,1]),i=CDe(k4(s1(r,a)),t.conv2,[1,1]);return k4(s1(r,s1(a,i)))}))}function ADe(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return BJ((function(){var a=k4(n?s1(l2(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):CDe(e,t.conv0,r?[2,2]:[1,1])),i=CDe(a,t.conv1,[1,1]),o=CDe(k4(s1(a,i)),t.conv2,[1,1]),s=CDe(k4(s1(a,s1(i,o))),t.conv3,[1,1]);return k4(s1(a,s1(i,s1(o,s))))}))}function RDe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"same",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return BJ((function(){var a=s1(l2(e,t.filters,[1,1],n),t.bias);return r?k4(a):a}))}function ODe(e,t){Object.keys(e).forEach((function(n){t.some((function(e){return e.originalPath===n}))||e[n].dispose()}))}function MDe(e,t){return function(n,r,a,i){var o=n5(e(n*r*a*a),[a,a,n,r]),s=e5(e(r));return t.push({paramPath:"".concat(i,"/filters")},{paramPath:"".concat(i,"/bias")}),{filters:o,bias:s}}}function DDe(e,t){return function(n,r,a){var i=t5(e(n*r),[n,r]),o=e5(e(r));return t.push({paramPath:"".concat(a,"/weights")},{paramPath:"".concat(a,"/bias")}),{weights:i,bias:o}}}var FDe=(0,C.Z)((function e(t,n,r){N(this,e),this.depthwise_filter=t,this.pointwise_filter=n,this.bias=r}));function PDe(e,t){return function(n,r,a){var i=n5(e(9*n),[3,3,n,1]),o=n5(e(n*r),[1,1,n,r]),s=e5(e(r));return t.push({paramPath:"".concat(a,"/depthwise_filter")},{paramPath:"".concat(a,"/pointwise_filter")},{paramPath:"".concat(a,"/bias")}),new FDe(i,o,s)}}function LDe(e){return function(t){var n=e("".concat(t,"/depthwise_filter"),4),r=e("".concat(t,"/pointwise_filter"),4),a=e("".concat(t,"/bias"),1);return new FDe(n,r,a)}}function zDe(e,t){return function(n,r,a){var i=e[n];if(!fMe(i,r))throw new Error("expected weightMap[".concat(n,"] to be a Tensor").concat(r,"D, instead have ").concat(i));return t.push({originalPath:n,paramPath:a||n}),i}}function BDe(e){var t=e;return{extractWeights:function(e){var n=t.slice(0,e);return t=t.slice(e),n},getRemainingWeights:function(){return t}}}function WDe(e,t){var n=MDe(e,t),r=PDe(e,t);function a(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=i?n(e,t,3,"".concat(a,"/conv0")):r(e,t,"".concat(a,"/conv0")),s=r(t,t,"".concat(a,"/conv1")),u=r(t,t,"".concat(a,"/conv2"));return{conv0:o,conv1:s,conv2:u}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=a(e,t,n,i),s=o.conv0,u=o.conv1,c=o.conv2,l=r(t,t,"".concat(n,"/conv3"));return{conv0:s,conv1:u,conv2:c,conv3:l}}}}function VDe(e){return function(t){return{filters:e("".concat(t,"/filters"),4),bias:e("".concat(t,"/bias"),1)}}}function jDe(e,t){var n=zDe(e,t),r=VDe(n),a=LDe(n);return{extractDenseBlock3Params:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?r("".concat(e,"/conv0")):a("".concat(e,"/conv0")),i=a("".concat(e,"/conv1")),o=a("".concat(e,"/conv2"));return{conv0:n,conv1:i,conv2:o}},extractDenseBlock4Params:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?r("".concat(e,"/conv0")):a("".concat(e,"/conv0")),i=a("".concat(e,"/conv1")),o=a("".concat(e,"/conv2")),s=a("".concat(e,"/conv3"));return{conv0:n,conv1:i,conv2:o,conv3:s}}}}var UDe=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.call(this,"FaceFeatureExtractor")}return(0,C.Z)(n,[{key:"forwardInput",value:function(e){var t=this.params;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return BJ((function(){var n=ADe(OMe(tJ(e.toBatchTensor(112,!0),"float32"),[122.782,117.001,104.298]).div(255),t.dense0,!0);return n=ADe(n,t.dense1),n=ADe(n,t.dense2),n=ADe(n,t.dense3),n=V1(n,[7,7],[2,2],"valid")}))}},{key:"forward",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,pDe(t);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.forwardInput.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDefaultModelName",value:function(){return"face_feature_extractor_model"}},{key:"extractParamsFromWeightMap",value:function(e){return function(e){var t=[],n=jDe(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return ODe(e,t),{params:r,paramMappings:t}}(e)}},{key:"extractParams",value:function(e){return function(e){var t=[],n=BDe(e),r=n.extractWeights,a=n.getRemainingWeights,i=WDe(r,t).extractDenseBlock4Params,o=i(3,32,"dense0",!0),s=i(32,64,"dense1"),u=i(64,128,"dense2"),c=i(128,256,"dense3");if(0!==a().length)throw new Error("weights remaing after extract: ".concat(a().length));return{paramMappings:t,params:{dense0:o,dense1:s,dense2:u,dense3:c}}}(e)}}]),n}(NDe);function HDe(e,t){return BJ((function(){return s1(EJ(e,t.weights),t.bias)}))}function ZDe(e){var t={},n={};return Object.keys(e).forEach((function(r){(r.startsWith("fc")?n:t)[r]=e[r]})),{featureExtractorMap:t,classifierMap:n}}var GDe=function(e){A(n,e);var t=L(n);function n(e,r){var a;return N(this,n),(a=t.call(this,e))._faceFeatureExtractor=r,a}return(0,C.Z)(n,[{key:"faceFeatureExtractor",get:function(){return this._faceFeatureExtractor}},{key:"runNet",value:function(e){var t=this,n=this.params;if(!n)throw new Error("".concat(this._name," - load model before inference"));return BJ((function(){var r=e instanceof hDe?t.faceFeatureExtractor.forwardInput(e):e;return HDe(r.as2D(r.shape[0],-1),n.fc)}))}},{key:"dispose",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.faceFeatureExtractor.dispose(e),bf(R(n.prototype),"dispose",this).call(this,e)}},{key:"loadClassifierParams",value:function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r}},{key:"extractClassifierParams",value:function(e){return function(e,t,n){var r=[],a=BDe(e),i=a.extractWeights,o=a.getRemainingWeights,s=DDe(i,r)(t,n,"fc");if(0!==o().length)throw new Error("weights remaing after extract: ".concat(o().length));return{paramMappings:r,params:{fc:s}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())}},{key:"extractParamsFromWeightMap",value:function(e){var t=ZDe(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=zDe(e,t),r={fc:function(e){return{weights:n("".concat(e,"/weights"),2),bias:n("".concat(e,"/bias"),1)}}("fc")};return ODe(e,t),{params:r,paramMappings:t}}(r)}},{key:"extractParams",value:function(e){var t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,a=e.slice(0,e.length-r),i=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(i)}}]),n}(NDe),qDe=["neutral","happy","sad","angry","fearful","disgusted","surprised"],KDe=function(){function e(t){var n=this;if(N(this,e),this.neutral=0,this.happy=0,this.sad=0,this.angry=0,this.fearful=0,this.disgusted=0,this.surprised=0,7!==t.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: ".concat(t.length));qDe.forEach((function(e,r){n[e]=t[r]}))}return(0,C.Z)(e,[{key:"asSortedArray",value:function(){var e=this;return qDe.map((function(t){return{expression:t,probability:e[t]}})).sort((function(e,t){return t.probability-e.probability}))}}]),e}(),XDe=function(e){A(n,e);var t=L(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new UDe;return N(this,n),t.call(this,"FaceExpressionNet",e)}return(0,C.Z)(n,[{key:"forwardInput",value:function(e){var t=this;return BJ((function(){return j4(t.runNet(e))}))}},{key:"forward",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,pDe(t);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.forwardInput.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"predictExpressions",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pDe(t);case 2:return n=e.sent,e.next=5,this.forwardInput(n);case 5:return r=e.sent,e.next=8,Promise.all(c5(r).map(function(){var e=Tn(Sn().mark((function e(t){var n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dataSync(),e.abrupt("return",(t.dispose(),n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return a=e.sent,r.dispose(),i=a.map((function(e){return new KDe(e)})),e.abrupt("return",n.isBatchInput?i:i[0]);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDefaultModelName",value:function(){return"face_expression_model"}},{key:"getClassifierChannelsIn",value:function(){return 256}},{key:"getClassifierChannelsOut",value:function(){return 7}}]),n}(GDe);function YDe(e){return e.expressions instanceof KDe}function $De(e,t){return Lt(Lt({},e),{expressions:t})}function QDe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3?arguments[3]:void 0;(Array.isArray(t)?t:[t]).forEach((function(t){var a=t instanceof KDe?t:YDe(t)?t.expressions:void 0;if(!a)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");var i=a.asSortedArray().filter((function(e){return e.probability>n})),o=BMe(t)?t.detection.box.bottomLeft:r||new TMe(0,0);new JMe(i.map((function(e){return"".concat(e.expression," (").concat(yMe(e.probability),")")})),o).draw(e)}))}function JDe(e){return BMe(e)&&e.landmarks instanceof LMe&&e.unshiftedLandmarks instanceof LMe&&e.alignedRect instanceof EMe}function eFe(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),a=r.align(),i=e.detection.imageDims,o=new EMe(e.detection.score,a.rescale(i.reverse()),i),s=function(e){var t=function(e){return 180*e/Math.PI},n=function(e,t){return Math.sqrt(Math.pow(e._x-t._x,2)+Math.pow(e._y-t._y,2))},r={roll:void 0,pitch:void 0,yaw:void 0};if(!e||!e._positions||68!==e._positions.length)return r;var a,i,o,s=e._positions;return r.roll=function(e,n){var r=Math.hypot(n._x-e._x,n._y-e._y),a=n._y-e._y,i=Math.asin(a/r),o=t(i);return Math.floor(90-o)*(n._x-e._x<0?-1:1)}(s[27],s[66]),r.pitch=function(e,r,a){var i=n(e,a),o={_x:(e._x+a._x)/2,_y:(e._y+a._y)/2},s=n(r,o),u=Math.atan(s/i);return Math.floor(t(u))*(o._y-r._y<0?-1:1)}(s[14],s[30],s[2]),r.yaw=(a=s[14],i=s[33],o=s[2],Math.floor(a._x-i._x)-Math.floor(i._x-o._x)),r}(t);return Lt(Lt({},e),{landmarks:r,unshiftedLandmarks:t,alignedRect:o,angle:s})}var tFe=(0,C.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};N(this,e);var n=t.drawLines,r=void 0===n||n,a=t.drawPoints,i=void 0===a||a,o=t.lineWidth,s=t.lineColor,u=t.pointSize,c=t.pointColor;this.drawLines=r,this.drawPoints=i,this.lineWidth=o||1,this.pointSize=u||2,this.lineColor=s||"rgba(0, 255, 255, 1)",this.pointColor=c||"rgba(255, 0, 255, 1)"})),nFe=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};N(this,e),this.faceLandmarks=t,this.options=new tFe(n)}return(0,C.Z)(e,[{key:"draw",value:function(e){var t=YMe(e),n=this.options,r=n.drawLines,a=n.drawPoints,i=n.lineWidth,o=n.lineColor,s=n.pointSize,u=n.pointColor;if(r&&this.faceLandmarks instanceof zMe&&(t.strokeStyle=o,t.lineWidth=i,cMe(t,this.faceLandmarks.getJawOutline()),cMe(t,this.faceLandmarks.getLeftEyeBrow()),cMe(t,this.faceLandmarks.getRightEyeBrow()),cMe(t,this.faceLandmarks.getNose()),cMe(t,this.faceLandmarks.getLeftEye(),!0),cMe(t,this.faceLandmarks.getRightEye(),!0),cMe(t,this.faceLandmarks.getMouth(),!0)),a){t.strokeStyle=u,t.fillStyle=u;this.faceLandmarks.positions.forEach((function(e){t.beginPath(),t.arc(e.x,e.y,s,0,2*Math.PI),t.fill()}))}}}]),e}();function rFe(e,t){(Array.isArray(t)?t:[t]).forEach((function(t){var n=t instanceof LMe?t:JDe(t)?t.landmarks:void 0;if(!n)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new nFe(n).draw(e)}))}function aFe(e,t){var n=[],r=BDe(e),a=r.extractWeights,i=r.getRemainingWeights,o=function(e,t){var n=MDe(e,t),r=PDe(e,t);return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(e,t,a){return{separable_conv0:r(e,t,"".concat(a,"/separable_conv0")),separable_conv1:r(t,t,"".concat(a,"/separable_conv1")),expansion_conv:n(e,t,1,"".concat(a,"/expansion_conv"))}},extractMainBlockParams:function(e,t){return{separable_conv0:r(e,e,"".concat(t,"/separable_conv0")),separable_conv1:r(e,e,"".concat(t,"/separable_conv1")),separable_conv2:r(e,e,"".concat(t,"/separable_conv2"))}}}}(a,n),s=o.extractConvParams,u=o.extractSeparableConvParams,c=o.extractReductionBlockParams,l=o.extractMainBlockParams,f={conv_in:s(3,32,3,"entry_flow/conv_in"),reduction_block_0:c(32,64,"entry_flow/reduction_block_0"),reduction_block_1:c(64,128,"entry_flow/reduction_block_1")},h={};kMe(t,0,1).forEach((function(e){h["main_block_".concat(e)]=l(128,"middle_flow/main_block_".concat(e))}));var p={reduction_block:c(128,256,"exit_flow/reduction_block"),separable_conv:u(256,512,"exit_flow/separable_conv")};if(0!==i().length)throw new Error("weights remaing after extract: ".concat(i().length));return{paramMappings:n,params:{entry_flow:f,middle_flow:h,exit_flow:p}}}function iFe(e,t){var n=[],r=function(e,t){var n=zDe(e,t),r=VDe(n),a=LDe(n);return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:function(e){return{separable_conv0:a("".concat(e,"/separable_conv0")),separable_conv1:a("".concat(e,"/separable_conv1")),expansion_conv:r("".concat(e,"/expansion_conv"))}},extractMainBlockParams:function(e){return{separable_conv0:a("".concat(e,"/separable_conv0")),separable_conv1:a("".concat(e,"/separable_conv1")),separable_conv2:a("".concat(e,"/separable_conv2"))}}}}(e,n),a=r.extractConvParams,i=r.extractSeparableConvParams,o=r.extractReductionBlockParams,s=r.extractMainBlockParams,u={conv_in:a("entry_flow/conv_in"),reduction_block_0:o("entry_flow/reduction_block_0"),reduction_block_1:o("entry_flow/reduction_block_1")},c={};kMe(t,0,1).forEach((function(e){c["main_block_".concat(e)]=s("middle_flow/main_block_".concat(e))}));var l={reduction_block:o("exit_flow/reduction_block"),separable_conv:i("exit_flow/separable_conv")};return ODe(e,n),{params:{entry_flow:u,middle_flow:c,exit_flow:l},paramMappings:n}}function oFe(e,t,n){return s1(l2(e,t.filters,n,"same"),t.bias)}function sFe(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=n?k4(e):e;return r=CDe(r,t.separable_conv0,[1,1]),r=CDe(k4(r),t.separable_conv1,[1,1]),r=P3(r,[3,3],[2,2],"same"),r=s1(r,oFe(e,t.expansion_conv,[2,2]))}var uFe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),(r=t.call(this,"TinyXception"))._numMainBlocks=e,r}return(0,C.Z)(n,[{key:"forwardInput",value:function(e){var t=this,n=this.params;if(!n)throw new Error("TinyXception - load model before inference");return BJ((function(){var r=OMe(tJ(e.toBatchTensor(112,!0),"float32"),[122.782,117.001,104.298]).div(255),a=k4(oFe(r,n.entry_flow.conv_in,[2,2]));return a=sFe(a,n.entry_flow.reduction_block_0,!1),a=sFe(a,n.entry_flow.reduction_block_1),kMe(t._numMainBlocks,0,1).forEach((function(e){a=function(e,t){var n=CDe(k4(e),t.separable_conv0,[1,1]);return n=CDe(k4(n),t.separable_conv1,[1,1]),n=CDe(k4(n),t.separable_conv2,[1,1]),s1(n,e)}(a,n.middle_flow["main_block_".concat(e)])})),a=sFe(a,n.exit_flow.reduction_block),a=k4(CDe(a,n.exit_flow.separable_conv,[1,1]))}))}},{key:"forward",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,pDe(t);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.forwardInput.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDefaultModelName",value:function(){return"tiny_xception_model"}},{key:"extractParamsFromWeightMap",value:function(e){return iFe(e,this._numMainBlocks)}},{key:"extractParams",value:function(e){return aFe(e,this._numMainBlocks)}}]),n}(NDe);var cFe,lFe=((cFe=lFe||{}).FEMALE="female",cFe.MALE="male",cFe),fFe=function(e){A(n,e);var t=L(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new uFe(2);return N(this,n),(e=t.call(this,"AgeGenderNet"))._faceFeatureExtractor=r,e}return(0,C.Z)(n,[{key:"faceFeatureExtractor",get:function(){return this._faceFeatureExtractor}},{key:"runNet",value:function(e){var t=this,n=this.params;if(!n)throw new Error("".concat(this._name," - load model before inference"));return BJ((function(){var r=e instanceof hDe?t.faceFeatureExtractor.forwardInput(e):e,a=V1(r,[7,7],[2,2],"valid").as2D(r.shape[0],-1);return{age:HDe(a,n.fc.age).as1D(),gender:HDe(a,n.fc.gender)}}))}},{key:"forwardInput",value:function(e){var t=this;return BJ((function(){var n=t.runNet(e),r=n.age,a=n.gender;return{age:r,gender:j4(a)}}))}},{key:"forward",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,pDe(t);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.forwardInput.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"predictAgeAndGender",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i,o,s;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pDe(t);case 2:return n=e.sent,e.next=5,this.forwardInput(n);case 5:return r=e.sent,a=c5(r.age),i=c5(r.gender),o=a.map((function(e,t){return{ageTensor:e,genderTensor:i[t]}})),e.next=11,Promise.all(o.map(function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i,o,s,u;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ageTensor,r=t.genderTensor,a=n.dataSync()[0],i=r.dataSync()[0],s=(o=i>.5)?"male":"female",u=o?i:1-i,e.abrupt("return",(n.dispose(),r.dispose(),{age:a,gender:s,genderProbability:u}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:return s=e.sent,e.abrupt("return",(r.age.dispose(),r.gender.dispose(),n.isBatchInput?s:s[0]));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDefaultModelName",value:function(){return"age_gender_model"}},{key:"dispose",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.faceFeatureExtractor.dispose(e),bf(R(n.prototype),"dispose",this).call(this,e)}},{key:"loadClassifierParams",value:function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r}},{key:"extractClassifierParams",value:function(e){return function(e){var t=[],n=BDe(e),r=n.extractWeights,a=n.getRemainingWeights,i=DDe(r,t),o=i(512,1,"fc/age"),s=i(512,2,"fc/gender");if(0!==a().length)throw new Error("weights remaing after extract: ".concat(a().length));return{paramMappings:t,params:{fc:{age:o,gender:s}}}}(e)}},{key:"extractParamsFromWeightMap",value:function(e){var t=ZDe(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=zDe(e,t);function r(e){return{weights:n("".concat(e,"/weights"),2),bias:n("".concat(e,"/bias"),1)}}var a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return ODe(e,t),{params:a,paramMappings:t}}(r)}},{key:"extractParams",value:function(e){var t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)}}]),n}(NDe),hFe=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"postProcess",value:function(e,t,n){var r=n.map((function(e){var n=e.width,r=e.height,a=t/Math.max(r,n);return{width:n*a,height:r*a}})),a=r.length;return BJ((function(){var n=function(e,t){return Y4([a2([68],e,"float32"),a2([68],t,"float32")],1).as2D(1,136).as1D()},i=function(e,t){var n=r[e],a=n.width,i=n.height;return t(a,i)?Math.abs(a-i)/2:0};return e.mul(a2([a,136],t,"float32")).sub(Y4(Array.from(Array(a),(function(e,t){return n(function(e){return i(e,(function(e,t){return e<t}))}(t),function(e){return i(e,(function(e,t){return t<e}))}(t))})))).div(Y4(Array.from(Array(a),(function(e,t){return n(r[t].width,r[t].height)}))))}))}},{key:"forwardInput",value:function(e){var t=this;return BJ((function(){var n=t.runNet(e);return t.postProcess(n,e.inputSize,e.inputDimensions.map((function(e){var t=(0,T.Z)(e,2);return{height:t[0],width:t[1]}})))}))}},{key:"forward",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,pDe(t);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.forwardInput.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"detectLandmarks",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pDe(t);case 2:return n=e.sent,r=BJ((function(){return c5(i.forwardInput(n))})),e.next=6,Promise.all(r.map(function(){var e=Tn(Sn().mark((function e(t,r){var a,i,o;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Array.from(t.dataSync()),i=a.filter((function(e,t){return gMe(t)})),o=a.filter((function(e,t){return!gMe(t)})),e.abrupt("return",new zMe(Array(68).fill(0).map((function(e,t){return new TMe(i[t],o[t])})),{height:n.getInputHeight(r),width:n.getInputWidth(r)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:return a=e.sent,e.abrupt("return",(r.forEach((function(e){return e.dispose()})),n.isBatchInput?a:a[0]));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getClassifierChannelsOut",value:function(){return 136}}]),n}(GDe),pFe=function(e){A(n,e);var t=L(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new UDe;return N(this,n),t.call(this,"FaceLandmark68Net",e)}return(0,C.Z)(n,[{key:"getDefaultModelName",value:function(){return"face_landmark_68_model"}},{key:"getClassifierChannelsIn",value:function(){return 256}}]),n}(hFe);var dFe=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.call(this,"TinyFaceFeatureExtractor")}return(0,C.Z)(n,[{key:"forwardInput",value:function(e){var t=this.params;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return BJ((function(){var n=EDe(OMe(tJ(e.toBatchTensor(112,!0),"float32"),[122.782,117.001,104.298]).div(255),t.dense0,!0);return n=EDe(n,t.dense1),n=EDe(n,t.dense2),n=V1(n,[14,14],[2,2],"valid")}))}},{key:"forward",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,pDe(t);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.forwardInput.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDefaultModelName",value:function(){return"face_feature_extractor_tiny_model"}},{key:"extractParamsFromWeightMap",value:function(e){return function(e){var t=[],n=jDe(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return ODe(e,t),{params:r,paramMappings:t}}(e)}},{key:"extractParams",value:function(e){return function(e){var t=[],n=BDe(e),r=n.extractWeights,a=n.getRemainingWeights,i=WDe(r,t).extractDenseBlock3Params,o=i(3,32,"dense0",!0),s=i(32,64,"dense1"),u=i(64,128,"dense2");if(0!==a().length)throw new Error("weights remaing after extract: ".concat(a().length));return{paramMappings:t,params:{dense0:o,dense1:s,dense2:u}}}(e)}}]),n}(NDe),mFe=function(e){A(n,e);var t=L(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new dFe;return N(this,n),t.call(this,"FaceLandmark68TinyNet",e)}return(0,C.Z)(n,[{key:"getDefaultModelName",value:function(){return"face_landmark_68_tiny_model"}},{key:"getClassifierChannelsIn",value:function(){return 128}}]),n}(hFe);function vFe(e,t){return s1(l1(e,t.weights),t.biases)}function gFe(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"same",i=t.conv,o=i.filters,s=i.bias,u=l2(e,o,n,a);return u=vFe(u=s1(u,s),t.scale),r?k4(u):u}function yFe(e,t){return gFe(e,t,[1,1],!1)}function bFe(e,t){return gFe(e,t,[2,2],!0,"valid")}function xFe(e,t){function n(n,r,a,i){var o=function(t,n,r){var a=e(t),i=a.length/(n*r*r);if(vMe(i))throw new Error("depth has to be an integer: ".concat(i,", weights.length: ").concat(a.length,", numFilters: ").concat(n,", filterSize: ").concat(r));return BJ((function(){return t0(n5(a,[n,i,r,r]),[2,3,1,0])}))}(n,r,a),s=e5(e(r));return t.push({paramPath:"".concat(i,"/filters")},{paramPath:"".concat(i,"/bias")}),{filters:o,bias:s}}function r(r,a,i,o){var s=n(r,a,i,"".concat(o,"/conv")),u=function(n,r){var a=e5(e(n)),i=e5(e(n));return t.push({paramPath:"".concat(r,"/weights")},{paramPath:"".concat(r,"/biases")}),{weights:a,biases:i}}(a,"".concat(o,"/scale"));return{conv:s,scale:u}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=r((i?.5:1)*e,t,n,"".concat(a,"/conv1")),s=r(e,t,n,"".concat(a,"/conv2"));return{conv1:o,conv2:s}}}}function wFe(e,t){var n=zDe(e,t);function r(e){var t=n("".concat(e,"/conv/filters"),4),r=n("".concat(e,"/conv/bias"),1),a=function(e){return{weights:n("".concat(e,"/scale/weights"),1),biases:n("".concat(e,"/scale/biases"),1)}}(e);return{conv:{filters:t,bias:r},scale:a}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e){return{conv1:r("".concat(e,"/conv1")),conv2:r("".concat(e,"/conv2"))}}}}function kFe(e,t){var n=function(e,t){return gFe(e,t,[1,1],!0)}(e,t.conv1);return n=yFe(n,t.conv2),n=s1(n,e),n=k4(n)}function SFe(e,t){var n=bFe(e,t.conv1);n=yFe(n,t.conv2);var r=V1(e,2,2,"valid"),a=V3(r.shape),i=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){var o=(0,I.Z)(n.shape);o[1]=1;var s=V3(o);n=U1([n,s],1);var u=(0,I.Z)(n.shape);u[2]=1;var c=V3(u);n=U1([n,c],2)}return r=i?U1([r,a],3):r,n=s1(r,n),n=k4(n)}var _Fe=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.call(this,"FaceRecognitionNet")}return(0,C.Z)(n,[{key:"forwardInput",value:function(e){var t=this.params;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return BJ((function(){var n=bFe(OMe(tJ(e.toBatchTensor(150,!0),"float32"),[122.782,117.001,104.298]).div(255),t.conv32_down);n=kFe(n=P3(n,3,2,"valid"),t.conv32_1),n=kFe(n,t.conv32_2),n=kFe(n,t.conv32_3),n=kFe(n=SFe(n,t.conv64_down),t.conv64_1),n=kFe(n,t.conv64_2),n=kFe(n,t.conv64_3),n=kFe(n=SFe(n,t.conv128_down),t.conv128_1),n=kFe(n,t.conv128_2),n=kFe(n=SFe(n,t.conv256_down),t.conv256_1);var r=(n=SFe(n=kFe(n,t.conv256_2),t.conv256_down_out)).mean([1,2]);return EJ(r,t.fc)}))}},{key:"forward",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,pDe(t);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.forwardInput.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"computeFaceDescriptor",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i,o=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(n=null==t?void 0:t.shape)||!n.some((function(e){return e<=0}))){e.next=2;break}return e.abrupt("return",new Float32Array(128));case 2:return e.next=4,pDe(t);case 4:return r=e.sent,a=BJ((function(){return c5(o.forwardInput(r))})),e.next=8,Promise.all(a.map((function(e){return e.data()})));case 8:return i=e.sent,e.abrupt("return",(a.forEach((function(e){return e.dispose()})),r.isBatchInput?i:i[0]));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDefaultModelName",value:function(){return"face_recognition_model"}},{key:"extractParamsFromWeightMap",value:function(e){return function(e){var t=[],n=wFe(e,t),r=n.extractConvLayerParams,a=n.extractResidualLayerParams,i=r("conv32_down"),o=a("conv32_1"),s=a("conv32_2"),u=a("conv32_3"),c=a("conv64_down"),l=a("conv64_1"),f=a("conv64_2"),h=a("conv64_3"),p=a("conv128_down"),d=a("conv128_1"),m=a("conv128_2"),v=a("conv256_down"),g=a("conv256_1"),y=a("conv256_2"),b=a("conv256_down_out"),x=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!pMe(x))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have ".concat(x));var w={conv32_down:i,conv32_1:o,conv32_2:s,conv32_3:u,conv64_down:c,conv64_1:l,conv64_2:f,conv64_3:h,conv128_down:p,conv128_1:d,conv128_2:m,conv256_down:v,conv256_1:g,conv256_2:y,conv256_down_out:b,fc:x};return ODe(e,t),{params:w,paramMappings:t}}(e)}},{key:"extractParams",value:function(e){return function(e){var t=BDe(e),n=t.extractWeights,r=t.getRemainingWeights,a=[],i=xFe(n,a),o=i.extractConvLayerParams,s=i.extractResidualLayerParams,u=o(4704,32,7,"conv32_down"),c=s(9216,32,3,"conv32_1"),l=s(9216,32,3,"conv32_2"),f=s(9216,32,3,"conv32_3"),h=s(36864,64,3,"conv64_down",!0),p=s(36864,64,3,"conv64_1"),d=s(36864,64,3,"conv64_2"),m=s(36864,64,3,"conv64_3"),v=s(147456,128,3,"conv128_down",!0),g=s(147456,128,3,"conv128_1"),y=s(147456,128,3,"conv128_2"),b=s(589824,256,3,"conv256_down",!0),x=s(589824,256,3,"conv256_1"),w=s(589824,256,3,"conv256_2"),k=s(589824,256,3,"conv256_down_out"),S=BJ((function(){return t0(t5(n(32768),[128,256]),[1,0])}));if(a.push({paramPath:"fc"}),0!==r().length)throw new Error("weights remaing after extract: ".concat(r().length));return{params:{conv32_down:u,conv32_1:c,conv32_2:l,conv32_3:f,conv64_down:h,conv64_1:p,conv64_2:d,conv64_3:m,conv128_down:v,conv128_1:g,conv128_2:y,conv256_down:b,conv256_1:x,conv256_2:w,conv256_down_out:k,fc:S},paramMappings:a}}(e)}}]),n}(NDe);function TFe(e,t){return Lt(Lt({},e),{descriptor:t})}function IFe(e,t){return Lt(Lt({},e),{age:t})}function NFe(e,t,n){return Lt(Lt({},e),{gender:t,genderProbability:n})}function CFe(e,t){function n(n,r,a,i,o){var s=n5(e(n*r*a*a),[a,a,n,r]),u=e5(e(r));return t.push({paramPath:"".concat(i,"/filters")},{paramPath:"".concat(i,"/").concat(o?"batch_norm_offset":"bias")}),{filters:s,bias:u}}function r(e,t,r,a){var i=n(e,t,r,a,!0);return{filters:i.filters,batch_norm_offset:i.bias}}function a(n,a,i){var o=function(n,r){var a=n5(e(9*n),[3,3,n,1]),i=e5(e(n)),o=e5(e(n)),s=e5(e(n)),u=e5(e(n));return t.push({paramPath:"".concat(r,"/filters")},{paramPath:"".concat(r,"/batch_norm_scale")},{paramPath:"".concat(r,"/batch_norm_offset")},{paramPath:"".concat(r,"/batch_norm_mean")},{paramPath:"".concat(r,"/batch_norm_variance")}),{filters:a,batch_norm_scale:i,batch_norm_offset:o,batch_norm_mean:s,batch_norm_variance:u}}(n,"".concat(i,"/depthwise_conv"));return{depthwise_conv:o,pointwise_conv:r(n,a,1,"".concat(i,"/pointwise_conv"))}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:a(32,64,"mobilenetv1/conv_1"),conv_2:a(64,128,"mobilenetv1/conv_2"),conv_3:a(128,128,"mobilenetv1/conv_3"),conv_4:a(128,256,"mobilenetv1/conv_4"),conv_5:a(256,256,"mobilenetv1/conv_5"),conv_6:a(256,512,"mobilenetv1/conv_6"),conv_7:a(512,512,"mobilenetv1/conv_7"),conv_8:a(512,512,"mobilenetv1/conv_8"),conv_9:a(512,512,"mobilenetv1/conv_9"),conv_10:a(512,512,"mobilenetv1/conv_10"),conv_11:a(512,512,"mobilenetv1/conv_11"),conv_12:a(512,1024,"mobilenetv1/conv_12"),conv_13:a(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}function EFe(e){var t=[],n=function(e,t){var n=zDe(e,t);function r(e,t,r){return{filters:n("".concat(e,"/Conv2d_").concat(t,"_pointwise/weights"),4,"".concat(r,"/filters")),batch_norm_offset:n("".concat(e,"/Conv2d_").concat(t,"_pointwise/convolution_bn_offset"),1,"".concat(r,"/batch_norm_offset"))}}function a(e){var t="mobilenetv1/conv_".concat(e),a="MobilenetV1/Conv2d_".concat(e,"_depthwise"),i="".concat(t,"/depthwise_conv"),o="".concat(t,"/pointwise_conv");return{depthwise_conv:{filters:n("".concat(a,"/depthwise_weights"),4,"".concat(i,"/filters")),batch_norm_scale:n("".concat(a,"/BatchNorm/gamma"),1,"".concat(i,"/batch_norm_scale")),batch_norm_offset:n("".concat(a,"/BatchNorm/beta"),1,"".concat(i,"/batch_norm_offset")),batch_norm_mean:n("".concat(a,"/BatchNorm/moving_mean"),1,"".concat(i,"/batch_norm_mean")),batch_norm_variance:n("".concat(a,"/BatchNorm/moving_variance"),1,"".concat(i,"/batch_norm_variance"))},pointwise_conv:r("MobilenetV1",e,o)}}function i(e,t){return{filters:n("".concat(e,"/weights"),4,"".concat(t,"/filters")),bias:n("".concat(e,"/biases"),1,"".concat(t,"/bias"))}}function o(e){return{box_encoding_predictor:i("Prediction/BoxPredictor_".concat(e,"/BoxEncodingPredictor"),"prediction_layer/box_predictor_".concat(e,"/box_encoding_predictor")),class_predictor:i("Prediction/BoxPredictor_".concat(e,"/ClassPredictor"),"prediction_layer/box_predictor_".concat(e,"/class_predictor"))}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:o(0),box_predictor_1:o(1),box_predictor_2:o(2),box_predictor_3:o(3),box_predictor_4:o(4),box_predictor_5:o(5)}}}}(e,t),r=n.extractMobilenetV1Params,a=n.extractPredictionLayerParams,i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!dMe(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have ".concat(i));var o={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:i}};return ODe(e,t),{params:o,paramMappings:t}}function AFe(e,t,n){return BJ((function(){var r=l2(e,t.filters,n,"same");return r=s1(r,t.batch_norm_offset),i2(r,0,6)}))}function RFe(e,t){return BJ((function(){var n,r=AFe(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach((function(e,t){var a=t+1,i=function(e){return[2,4,6,12].some((function(t){return t===e}))?[2,2]:[1,1]}(a);r=function(e,t,n){return BJ((function(){var r=S2(e,t.filters,n,"same");return r=Y1(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,.0010000000474974513),i2(r,0,6)}))}(r,e.depthwise_conv,i),r=AFe(r,e.pointwise_conv,[1,1]),11===a&&(n=r)})),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}}))}function OFe(e,t,n){var r=e.arraySync(),a=Math.min(r[t][0],r[t][2]),i=Math.min(r[t][1],r[t][3]),o=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),u=Math.min(r[n][0],r[n][2]),c=Math.min(r[n][1],r[n][3]),l=Math.max(r[n][0],r[n][2]),f=Math.max(r[n][1],r[n][3]),h=(o-a)*(s-i),p=(l-u)*(f-c);if(h<=0||p<=0)return 0;var d=Math.max(a,u),m=Math.max(i,c),v=Math.min(o,l),g=Math.min(s,f),y=Math.max(v-d,0)*Math.max(g-m,0);return y/(h+p-y)}function MFe(e,t,n,r,a){var i=e.shape[0],o=Math.min(n,i),s=t.map((function(e,t){return{score:e,boxIndex:t}})).filter((function(e){return e.score>a})).sort((function(e,t){return t.score-e.score})),u=function(e){return e<=r?1:0},c=[];return s.forEach((function(t){if(!(c.length>=o)){for(var n=t.score,r=c.length-1;r>=0;--r){var i=OFe(e,t.boxIndex,c[r]);if(0!==i&&(t.score*=u(i),t.score<=a))break}n===t.score&&c.push(t.boxIndex)}})),c}function DFe(e,t){var n=function(e){var t=c5(t0(e,[1,0])),n=[I3(t[2],t[0]),I3(t[3],t[1])];return{sizes:n,centers:[s1(t[0],c1(n[0],2)),s1(t[1],c1(n[1],2))]}}(e),r=n.sizes,a=n.centers,i=c5(t0(t,[1,0])),o=c1(l1(Q2(c1(i[2],5)),r[0]),2),s=s1(l1(c1(i[0],10),r[0]),a[0]),u=c1(l1(Q2(c1(i[3],5)),r[1]),2),c=s1(l1(c1(i[1],10),r[1]),a[1]);return t0(Y4([I3(s,o),I3(c,u),s1(s,o),s1(c,u)]),[1,0])}function FFe(e,t){return BJ((function(){var n=e.shape[0];return{boxPredictionEncoding:W1(RDe(e,t.box_encoding_predictor),[n,-1,1,4]),classPrediction:W1(RDe(e,t.class_predictor),[n,-1,3])}}))}var PFe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.minConfidence,r=t.maxResults;if(N(this,e),this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,"number"!=typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error("".concat(this._name," - expected minConfidence to be a number between 0 and 1"));if("number"!=typeof this._maxResults)throw new Error("".concat(this._name," - expected maxResults to be a number"))}return(0,C.Z)(e,[{key:"minConfidence",get:function(){return this._minConfidence}},{key:"maxResults",get:function(){return this._maxResults}}]),e}(),LFe=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.call(this,"SsdMobilenetv1")}return(0,C.Z)(n,[{key:"forwardInput",value:function(e){var t=this.params;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return BJ((function(){var n=tJ(e.toBatchTensor(512,!1),"float32"),r=RFe(I3(c1(n,127.5),1),t.mobilenetv1),a=function(e,t,n){return BJ((function(){var r=AFe(e,n.conv_0,[1,1]),a=AFe(r,n.conv_1,[2,2]),i=AFe(a,n.conv_2,[1,1]),o=AFe(i,n.conv_3,[2,2]),s=AFe(o,n.conv_4,[1,1]),u=AFe(s,n.conv_5,[2,2]),c=AFe(u,n.conv_6,[1,1]),l=AFe(c,n.conv_7,[2,2]),f=FFe(t,n.box_predictor_0),h=FFe(e,n.box_predictor_1),p=FFe(a,n.box_predictor_2),d=FFe(o,n.box_predictor_3),m=FFe(u,n.box_predictor_4),v=FFe(l,n.box_predictor_5);return{boxPredictions:U1([f.boxPredictionEncoding,h.boxPredictionEncoding,p.boxPredictionEncoding,d.boxPredictionEncoding,m.boxPredictionEncoding,v.boxPredictionEncoding],1),classPredictions:U1([f.classPrediction,h.classPrediction,p.classPrediction,d.classPrediction,m.classPrediction,v.classPrediction],1)}}))}(r.out,r.conv11,t.prediction_layer);return function(e,t,n){return BJ((function(){var r=e.shape[0],a=DFe(W1(t3(n.extra_dim,[r,1,1]),[-1,4]),W1(e,[-1,4]));a=W1(a,[r,a.shape[0]/r,4]);var i=H1(Z1(t,[0,0,1],[-1,-1,-1])),o=Z1(i,[0,0,0],[-1,-1,1]);return o=W1(o,[r,o.shape[1]]),{boxes:c5(a),scores:c5(o)}}))}(a.boxPredictions,a.classPredictions,t.output_layer)}))}},{key:"forward",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,pDe(t);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.forwardInput.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"locateFaces",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i,o,s,u,c,l,f,h,p,d,m,v,g,y,b,x,w=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.length>1&&void 0!==w[1]?w[1]:{},r=new PFe(n),a=r.maxResults,i=r.minConfidence,e.next=6,pDe(t);case 6:for(o=e.sent,s=this.forwardInput(o),u=s.boxes,c=s.scores,l=u[0],f=c[0],h=1;h<u.length;h++)u[h].dispose(),c[h].dispose();return p=Array.from(f.dataSync()),d=MFe(l,p,a,.5,i),m=o.getReshapedInputDimensions(0),v=o.inputSize,g=v/m.width,y=v/m.height,b=l.arraySync(),x=d.map((function(e){var t=[Math.max(0,b[e][0]),Math.min(1,b[e][2])].map((function(e){return e*y})),n=(0,T.Z)(t,2),r=n[0],a=n[1],i=[Math.max(0,b[e][1]),Math.min(1,b[e][3])].map((function(e){return e*g})),s=(0,T.Z)(i,2),u=s[0],c=s[1];return new EMe(p[e],new PMe(u,r,c-u,a-r),{height:o.getInputHeight(0),width:o.getInputWidth(0)})})),e.abrupt("return",(l.dispose(),f.dispose(),x));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDefaultModelName",value:function(){return"ssd_mobilenetv1_model"}},{key:"extractParamsFromWeightMap",value:function(e){return EFe(e)}},{key:"extractParams",value:function(e){return function(e){var t=[],n=BDe(e),r=n.extractWeights,a=n.getRemainingWeights,i=CFe(r,t),o=i.extractMobilenetV1Params,s=i.extractPredictionLayerParams,u=o(),c=s(),l={extra_dim:c0(r(20472),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),0!==a().length)throw new Error("weights remaing after extract: ".concat(a().length));return{params:{mobilenetv1:u,prediction_layer:c,output_layer:l},paramMappings:t}}(e)}}]),n}(NDe);var zFe=[new TMe(.738768,.874946),new TMe(2.42204,2.65704),new TMe(4.30971,7.04493),new TMe(10.246,4.59428),new TMe(12.6868,11.8741)],BFe=[new TMe(1.603231,2.094468),new TMe(6.041143,7.080126),new TMe(2.882459,3.518061),new TMe(4.266906,5.178857),new TMe(9.041765,10.66308)],WFe=[117.001,114.697,97.404],VFe=function(e){return"number"==typeof e};function jFe(e){return BJ((function(){var t=l1(e,Z2(.10000000149011612));return s1(k4(I3(e,t)),t)}))}function UFe(e,t){return BJ((function(){var n=J3(e,[[0,0],[1,1],[1,1],[0,0]]);return n=l2(n,t.conv.filters,[1,1],"valid"),n=I3(n,t.bn.sub),n=l1(n,t.bn.truediv),jFe(n=s1(n,t.conv.bias))}))}function HFe(e,t){return BJ((function(){var n=J3(e,[[0,0],[1,1],[1,1],[0,0]]);return n=O4(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),jFe(n=s1(n,t.bias))}))}function ZFe(e,t){var n=MDe(e,t);var r=PDe(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:function(r,a,i){var o=n(r,a,3,"".concat(i,"/conv")),s=function(n,r){var a=e5(e(n)),i=e5(e(n));return t.push({paramPath:"".concat(r,"/sub")},{paramPath:"".concat(r,"/truediv")}),{sub:a,truediv:i}}(a,"".concat(i,"/bn"));return{conv:o,bn:s}},extractSeparableConvParams:r}}function GFe(e,t){var n=zDe(e,t);function r(e){return{filters:n("".concat(e,"/filters"),4),bias:n("".concat(e,"/bias"),1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(e){var t=r("".concat(e,"/conv")),a=function(e){return{sub:n("".concat(e,"/sub"),1),truediv:n("".concat(e,"/truediv"),1)}}("".concat(e,"/bn"));return{conv:t,bn:a}},extractSeparableConvParams:LDe(n)}}var qFe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.inputSize,r=t.scoreThreshold;if(N(this,e),this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,"number"!=typeof this._inputSize||this._inputSize%32!==0)throw new Error("".concat(this._name," - expected inputSize to be a number divisible by 32"));if("number"!=typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error("".concat(this._name," - expected scoreThreshold to be a number between 0 and 1"))}return(0,C.Z)(e,[{key:"inputSize",get:function(){return this._inputSize}},{key:"scoreThreshold",get:function(){return this._scoreThreshold}}]),e}(),KFe=function(e){A(n,e);var t=L(n);function n(e){var r;return N(this,n),r=t.call(this,"TinyYolov2"),function(e){if(!e)throw new Error("invalid config: ".concat(e));if("boolean"!=typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: ".concat(e.withSeparableConvs));if(!VFe(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: ".concat(e.iouThreshold));if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every((function(e){return"string"==typeof e})))throw new Error("config.classes has to be an array class names: string[], have: ".concat(JSON.stringify(e.classes)));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map((function(e){return e||{}})).every((function(e){return VFe(e.x)&&VFe(e.y)})))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: ".concat(JSON.stringify(e.anchors)));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(VFe)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: ".concat(JSON.stringify(e.meanRgb)))}(e),r._config=e,r}return(0,C.Z)(n,[{key:"config",get:function(){return this._config}},{key:"withClassScores",get:function(){return this.config.withClassScores||this.config.classes.length>1}},{key:"boxEncodingSize",get:function(){return 5+(this.withClassScores?this.config.classes.length:0)}},{key:"runTinyYolov2",value:function(e,t){var n=UFe(e,t.conv0);return n=UFe(n=P3(n,[2,2],[2,2],"same"),t.conv1),n=UFe(n=P3(n,[2,2],[2,2],"same"),t.conv2),n=UFe(n=P3(n,[2,2],[2,2],"same"),t.conv3),n=UFe(n=P3(n,[2,2],[2,2],"same"),t.conv4),n=UFe(n=P3(n,[2,2],[2,2],"same"),t.conv5),n=UFe(n=P3(n,[2,2],[1,1],"same"),t.conv6),RDe(n=UFe(n,t.conv7),t.conv8,"valid",!1)}},{key:"runMobilenet",value:function(e,t){var n=this.config.isFirstLayerConv2d?jFe(RDe(e,t.conv0,"valid",!1)):HFe(e,t.conv0);return n=HFe(n=P3(n,[2,2],[2,2],"same"),t.conv1),n=HFe(n=P3(n,[2,2],[2,2],"same"),t.conv2),n=HFe(n=P3(n,[2,2],[2,2],"same"),t.conv3),n=HFe(n=P3(n,[2,2],[2,2],"same"),t.conv4),n=HFe(n=P3(n,[2,2],[2,2],"same"),t.conv5),n=P3(n,[2,2],[1,1],"same"),n=t.conv6?HFe(n,t.conv6):n,RDe(n=t.conv7?HFe(n,t.conv7):n,t.conv8,"valid",!1)}},{key:"forwardInput",value:function(e,t){var n=this,r=this.params;if(!r)throw new Error("TinyYolov2 - load model before inference");return BJ((function(){var a=tJ(e.toBatchTensor(t,!1),"float32");return a=(a=n.config.meanRgb?OMe(a,n.config.meanRgb):a).div(255),n.config.withSeparableConvs?n.runMobilenet(a,r):n.runTinyYolov2(a,r)}))}},{key:"forward",value:function(){var e=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,pDe(t);case 3:return e.t1=e.sent,e.t2=n,e.abrupt("return",e.t0.forwardInput.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"detect",value:function(){var e=Tn(Sn().mark((function e(t){var n,r,a,i,o,s,u,c,l,f,h,p,d,m=this,v=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.length>1&&void 0!==v[1]?v[1]:{},r=new qFe(n),a=r.inputSize,i=r.scoreThreshold,e.next=6,pDe(t);case 6:return o=e.sent,e.next=9,this.forwardInput(o,a);case 9:return s=e.sent,u=BJ((function(){return c5(s)[0].expandDims()})),c={width:o.getInputWidth(0),height:o.getInputHeight(0)},e.next=14,this.extractBoxes(u,o.getReshapedInputDimensions(0),i);case 14:return l=e.sent,s.dispose(),u.dispose(),f=l.map((function(e){return e.box})),h=l.map((function(e){return e.score})),p=l.map((function(e){return e.classScore})),d=l.map((function(e){return m.config.classes[e.label]})),e.abrupt("return",RMe(f.map((function(e){return e.rescale(a)})),h,this.config.iouThreshold,!0).map((function(e){return new CMe(h[e],p[e],d[e],f[e],c)})));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDefaultModelName",value:function(){return""}},{key:"extractParamsFromWeightMap",value:function(e){return function(e,t){var n,r=[],a=GFe(e,r),i=a.extractConvParams,o=a.extractConvWithBatchNormParams,s=a.extractSeparableConvParams;if(t.withSeparableConvs){var u=t.filterSizes&&t.filterSizes.length||9;n={conv0:t.isFirstLayerConv2d?i("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:u>7?s("conv6"):void 0,conv7:u>8?s("conv7"):void 0,conv8:i("conv8")}}else n={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:i("conv8")};return ODe(e,r),{params:n,paramMappings:r}}(e,this.config)}},{key:"extractParams",value:function(e){var t=this.config.filterSizes||n.DEFAULT_FILTER_SIZES,r=t?t.length:void 0;if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found ".concat(r," filterSizes in config"));return function(e,t,n,r){var a,i=BDe(e),o=i.extractWeights,s=i.getRemainingWeights,u=[],c=ZFe(o,u),l=c.extractConvParams,f=c.extractConvWithBatchNormParams,h=c.extractSeparableConvParams;if(t.withSeparableConvs){var p=(0,T.Z)(r,9),d=p[0],m=p[1],v=p[2],g=p[3],y=p[4],b=p[5],x=p[6],w=p[7],k=p[8];a={conv0:t.isFirstLayerConv2d?l(d,m,3,"conv0"):h(d,m,"conv0"),conv1:h(m,v,"conv1"),conv2:h(v,g,"conv2"),conv3:h(g,y,"conv3"),conv4:h(y,b,"conv4"),conv5:h(b,x,"conv5"),conv6:w?h(x,w,"conv6"):void 0,conv7:k?h(w,k,"conv7"):void 0,conv8:l(k||w||x,5*n,1,"conv8")}}else{var S=(0,T.Z)(r,9),_=S[0],I=S[1],N=S[2],C=S[3],E=S[4],A=S[5],R=S[6],O=S[7],M=S[8];a={conv0:f(_,I,"conv0"),conv1:f(I,N,"conv1"),conv2:f(N,C,"conv2"),conv3:f(C,E,"conv3"),conv4:f(E,A,"conv4"),conv5:f(A,R,"conv5"),conv6:f(R,O,"conv6"),conv7:f(O,M,"conv7"),conv8:l(M,5*n,1,"conv8")}}if(0!==s().length)throw new Error("weights remaing after extract: ".concat(s().length));return{params:a,paramMappings:u}}(e,this.config,this.boxEncodingSize,t)}},{key:"extractBoxes",value:function(){var e=Tn(Sn().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,p,d,m,v,g,y,b,x,w,k,S,_,I,N,C,E,A,R,O,M,D=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.width,i=n.height,o=Math.max(a,i),s=o/a,u=o/i,c=t.shape[1],l=this.config.anchors.length,f=BJ((function(){var e=t.reshape([c,c,l,D.boxEncodingSize]);return[e.slice([0,0,0,0],[c,c,l,4]),e.slice([0,0,0,4],[c,c,l,1]),D.withClassScores?j4(e.slice([0,0,0,5],[c,c,l,D.config.classes.length]),3):Z2(0)]})),h=(0,T.Z)(f,3),p=h[0],d=h[1],m=h[2],v=[],e.next=15,d.array();case 15:return g=e.sent,e.next=18,p.array();case 18:y=e.sent,b=0;case 20:if(!(b<c)){e.next=54;break}x=0;case 22:if(!(x<c)){e.next=51;break}w=0;case 24:if(!(w<l)){e.next=48;break}if(k=DMe(g[b][x][w][0]),r&&!(k>r)){e.next=45;break}if(S=(x+DMe(y[b][x][w][0]))/c*s,_=(b+DMe(y[b][x][w][1]))/c*u,I=Math.exp(y[b][x][w][2])*this.config.anchors[w].x/c*s,N=Math.exp(y[b][x][w][3])*this.config.anchors[w].y/c*u,C=S-I/2,E=_-N/2,A={row:b,col:x,anchor:w},!this.withClassScores){e.next=40;break}return e.next=37,this.extractPredictedClass(m,A);case 37:e.t0=e.sent,e.next=41;break;case 40:e.t0={classScore:1,label:0};case 41:R=e.t0,O=R.classScore,M=R.label,v.push(Lt({box:new NMe(C,E,C+I,E+N),score:k,classScore:k*O,label:M},A));case 45:w++,e.next=24;break;case 48:x++,e.next=22;break;case 51:b++,e.next=20;break;case 54:return e.abrupt("return",(p.dispose(),d.dispose(),m.dispose(),v));case 55:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"extractPredictedClass",value:function(){var e=Tn(Sn().mark((function e(t,n){var r,a,i,o;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.row,a=n.col,i=n.anchor,e.next=5,t.array();case 5:return o=e.sent,e.abrupt("return",Array(this.config.classes.length).fill(0).map((function(e,t){return o[r][a][i][t]})).map((function(e,t){return{classScore:e,label:t}})).reduce((function(e,t){return e.classScore>t.classScore?e:t})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(NDe),XFe=KFe;XFe.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024];var YFe=function(e){A(n,e);var t=L(n);function n(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];N(this,n);var r=Lt({withSeparableConvs:e,iouThreshold:.4,classes:["face"]},e?{anchors:BFe,meanRgb:WFe}:{anchors:zFe,withClassScores:!0});return t.call(this,r)}return(0,C.Z)(n,[{key:"withSeparableConvs",get:function(){return this.config.withSeparableConvs}},{key:"anchors",get:function(){return this.config.anchors}},{key:"locateFaces",value:function(){var e=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.detect(t,n);case 2:return e.abrupt("return",e.sent.map((function(e){return new EMe(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDefaultModelName",value:function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"}},{key:"extractParamsFromWeightMap",value:function(e){return bf(R(n.prototype),"extractParamsFromWeightMap",this).call(this,e)}}]),n}(XFe);var $Fe=function(e){A(n,e);var t=L(n);function n(){var e;return N(this,n),(e=t.apply(this,arguments))._name="TinyFaceDetectorOptions",e}return(0,C.Z)(n)}(qFe),QFe=function(){function e(){N(this,e)}return(0,C.Z)(e,[{key:"then",value:function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,this.run();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"run",value:function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("ComposableTask - run is not implemented");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function JFe(e,t,n,r){return ePe.apply(this,arguments)}function ePe(){return ePe=Tn(Sn().mark((function e(t,n,r,a){var i,o,s,u,c=arguments;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=c.length>4&&void 0!==c[4]?c[4]:function(e){return e.alignedRect},o=t.map((function(e){return JDe(e)?i(e):e.detection})),e.t0=a,e.t0){e.next=14;break}if(!(n instanceof i$)){e.next=10;break}return e.next=7,gDe(n,o);case 7:e.t1=e.sent,e.next=13;break;case 10:return e.next=12,mDe(n,o);case 12:e.t1=e.sent;case 13:e.t0=e.t1;case 14:return s=e.t0,e.next=17,r(s);case 17:return u=e.sent,e.abrupt("return",(s.forEach((function(e){return e instanceof i$&&e.dispose()})),u));case 19:case"end":return e.stop()}}),e)}))),ePe.apply(this,arguments)}var tPe=[new TMe(1.603231,2.094468),new TMe(6.041143,7.080126),new TMe(2.882459,3.518061),new TMe(4.266906,5.178857),new TMe(9.041765,10.66308)],nPe=[117.001,114.697,97.404],rPe=function(e){A(n,e);var t=L(n);function n(){N(this,n);var e={withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:tPe,meanRgb:nPe,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return t.call(this,e)}return(0,C.Z)(n,[{key:"anchors",get:function(){return this.config.anchors}},{key:"locateFaces",value:function(){var e=Tn(Sn().mark((function e(t,n){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.detect(t,n);case 2:return e.abrupt("return",e.sent.map((function(e){return new EMe(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDefaultModelName",value:function(){return"tiny_face_detector_model"}},{key:"extractParamsFromWeightMap",value:function(e){return bf(R(n.prototype),"extractParamsFromWeightMap",this).call(this,e)}}]),n}(XFe),aPe={ssdMobilenetv1:new LFe,tinyFaceDetector:new rPe,tinyYolov2:new YFe,faceLandmark68Net:new pFe,faceLandmark68TinyNet:new mFe,faceRecognitionNet:new _Fe,faceExpressionNet:new XDe,ageGenderNet:new fFe},iPe=function(e){A(n,e);var t=L(n);function n(e,r,a){var i;return N(this,n),(i=t.call(this)).parentTask=e,i.input=r,i.extractedFaces=a,i}return(0,C.Z)(n)}(QFe),oPe=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"run",value:function(){var e=Tn(Sn().mark((function e(){var t,n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.parentTask;case 2:return t=e.sent,e.next=5,JFe(t,this.input,function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map((function(e){return aPe.faceExpressionNet.predictExpressions(e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.extractedFaces);case 5:return n=e.sent,e.abrupt("return",t.map((function(e,t){return $De(e,n[t])})));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withAgeAndGender",value:function(){return new cPe(this,this.input)}}]),n}(iPe),sPe=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"withAgeAndGender",value:function(){return new lPe(this,this.input)}},{key:"withFaceDescriptors",value:function(){return new hPe(this,this.input)}}]),n}(oPe),uPe=function(e){A(n,e);var t=L(n);function n(e,r,a){var i;return N(this,n),(i=t.call(this)).parentTask=e,i.input=r,i.extractedFaces=a,i}return(0,C.Z)(n)}(QFe),cPe=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"run",value:function(){var e=Tn(Sn().mark((function e(){var t,n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.parentTask;case 2:return t=e.sent,e.next=5,JFe(t,this.input,function(){var e=Tn(Sn().mark((function e(t){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map((function(e){return aPe.ageGenderNet.predictAgeAndGender(e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.extractedFaces);case 5:return n=e.sent,e.abrupt("return",t.map((function(e,t){var r=n[t],a=r.age;return IFe(NFe(e,r.gender,r.genderProbability),a)})));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withFaceExpressions",value:function(){return new oPe(this,this.input)}}]),n}(uPe),lPe=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"withFaceExpressions",value:function(){return new sPe(this,this.input)}},{key:"withFaceDescriptors",value:function(){return new hPe(this,this.input)}}]),n}(cPe),fPe=function(e){A(n,e);var t=L(n);function n(e,r){var a;return N(this,n),(a=t.call(this)).parentTask=e,a.input=r,a}return(0,C.Z)(n)}(QFe),hPe=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"run",value:function(){var e=Tn(Sn().mark((function e(){var t;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.parentTask;case 2:return t=e.sent,e.next=5,JFe(t,this.input,(function(e){return Promise.all(e.map((function(e){return aPe.faceRecognitionNet.computeFaceDescriptor(e)})))}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}));case 5:return e.abrupt("return",e.sent.map((function(e,n){return TFe(t[n],e)})));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withFaceExpressions",value:function(){return new sPe(this,this.input)}},{key:"withAgeAndGender",value:function(){return new lPe(this,this.input)}}]),n}(fPe),pPe=function(e){A(n,e);var t=L(n);function n(e,r,a){var i;return N(this,n),(i=t.call(this)).parentTask=e,i.input=r,i.useTinyLandmarkNet=a,i}return(0,C.Z)(n,[{key:"landmarkNet",get:function(){return this.useTinyLandmarkNet?aPe.faceLandmark68TinyNet:aPe.faceLandmark68Net}}]),n}(QFe),dPe=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"run",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r,a,i=this;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.parentTask;case 2:if(t=e.sent,n=t.map((function(e){return e.detection})),!(this.input instanceof i$)){e.next=10;break}return e.next=7,gDe(this.input,n);case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,mDe(this.input,n);case 12:e.t0=e.sent;case 13:return r=e.t0,e.next=16,Promise.all(r.map((function(e){return i.landmarkNet.detectLandmarks(e)})));case 16:return a=e.sent,e.abrupt("return",(r.forEach((function(e){return e instanceof i$&&e.dispose()})),t.filter((function(e,t){return a[t]})).map((function(e,t){return eFe(e,a[t])}))));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withFaceExpressions",value:function(){return new sPe(this,this.input)}},{key:"withAgeAndGender",value:function(){return new lPe(this,this.input)}},{key:"withFaceDescriptors",value:function(){return new hPe(this,this.input)}}]),n}(pPe),mPe=function(e){A(n,e);var t=L(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new PFe;return N(this,n),(r=t.call(this)).input=e,r.options=a,r}return(0,C.Z)(n)}(QFe),vPe=function(e){A(n,e);var t=L(n);function n(){return N(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"run",value:function(){var e=Tn(Sn().mark((function e(){var t,n,r;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.input,!((n=this.options)instanceof $Fe)){e.next=5;break}r=aPe.tinyFaceDetector.locateFaces(t,n),e.next=14;break;case 5:if(!(n instanceof PFe)){e.next=9;break}r=aPe.ssdMobilenetv1.locateFaces(t,n),e.next=14;break;case 9:if(!(n instanceof qFe)){e.next=13;break}r=aPe.tinyYolov2.locateFaces(t,n),e.next=14;break;case 13:throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | TinyYolov2Options");case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"runAndExtendWithFaceDetections",value:function(){var e=this;return new Promise((function(t,n){e.run().then((function(e){return t(e.map((function(e){return WMe({},e)})))})).catch((function(e){return n(e)}))}))}},{key:"withFaceLandmarks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new dPe(this.runAndExtendWithFaceDetections(),this.input,e)}},{key:"withFaceExpressions",value:function(){return new oPe(this.runAndExtendWithFaceDetections(),this.input)}},{key:"withAgeAndGender",value:function(){return new cPe(this.runAndExtendWithFaceDetections(),this.input)}}]),n}(mPe);function gPe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new PFe;return new vPe(e,t)}function yPe(e,t){var n=new lMe(t.width,t.height),r=n.width,a=n.height;if(r<=0||a<=0)throw new Error("resizeResults - invalid dimensions: ".concat(JSON.stringify({width:r,height:a})));if(Array.isArray(e))return e.map((function(e){return yPe(e,{width:r,height:a})}));if(JDe(e)){var i=e.detection.forSize(r,a),o=e.unshiftedLandmarks.forSize(i.box.width,i.box.height);return eFe(WMe(e,i),o)}return BMe(e)?WMe(e,e.detection.forSize(r,a)):e instanceof LMe||e instanceof EMe?e.forSize(r,a):e}var bPe,xPe,wPe,kPe,SPe,_Pe,TPe,IPe=n(9759),NPe=[],CPe={},EPe=[],APe=[],RPe=0,OPe=0,MPe=0,DPe=0,FPe=0,PPe=0,LPe=0,zPe=0,BPe=null,WPe=null,VPe=null,jPe=null,UPe=function(){var e=tn((function(e){return e.User.name})),t=tn((function(e){return e.User.id})),n=Me(),r=n.state.question,a=n.state.category,i=De(),o=(0,S.useState)(!0),s=(0,T.Z)(o,2),u=s[0],c=s[1],l=(0,S.useState)(void 0),f=(0,T.Z)(l,2),h=f[0],p=f[1],d=(0,S.useRef)(null),m=(0,S.useRef)(null),v=(0,S.useRef)(null),g=(0,S.useState)(),y=(0,T.Z)(g,2),b=y[0],x=y[1],w=(0,S.useState)(),k=(0,T.Z)(w,2),_=k[0],I=k[1],N=(0,S.useState)(!0),C=(0,T.Z)(N,2),E=(C[0],C[1]),A=(0,S.useState)(),R=(0,T.Z)(A,2),O=R[0],M=R[1],D=(0,S.useState)(),F=(0,T.Z)(D,2),P=F[0],L=F[1],z=(0,S.useState)(),B=(0,T.Z)(z,2),W=(B[0],B[1]),V=(0,S.useState)([]),j=(0,T.Z)(V,1)[0],U=(0,S.useState)([]),H=(0,T.Z)(U,1)[0],Z=(0,S.useState)(0),G=(0,T.Z)(Z,2),q=G[0],K=G[1],X=(0,S.useState)(0),Y=(0,S.useState)(0),$=(0,T.Z)(Y,2),Q=$[0],J=$[1],ee=(0,S.useState)(),te=(0,S.useState)(),ne=(0,lb.x6)(),re=ne.transcript,ae=ne.listening,ie=re.split(" "),oe=(0,S.useState)(),se=(0,T.Z)(oe,2),ue=(se[0],se[1],{Video:{width:"300",height:"350",background:"rgba(245, 240, 215, 0.5)"},Canvas:{width:"30vw",background:"rgba(0,0,0,0)",border:"1px solid green"},None:{display:"none"}}),ce=function(e){d&&le();try{navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(e)}catch(cBe){return void console.log(cBe)}},le=function(){Promise.all([aPe.tinyFaceDetector.loadFromUri("./models"),aPe.faceLandmark68Net.loadFromUri("./models"),aPe.faceRecognitionNet.loadFromUri("./models"),aPe.faceExpressionNet.loadFromUri("./models")]).then((function(){}))};S.useEffect((function(){var e=function(){var e=Tn(Sn().mark((function e(){return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t="webgl",YS.setBackend(t);case 2:return e.next=4,MH();case 4:CPe.model=e.sent,ce((function(e){d.current.srcObject=e,BPe=e})),fe();case 7:case"end":return e.stop()}var t}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var fe=function(){var e=Tn(Sn().mark((function e(){var t,n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JH.MediaPipeFaceDetector,n={runtime:"tfjs"},e.next=4,cZ(t,n);case 4:TPe=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Tn(Sn().mark((function e(){var t,n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=m.current.getContext("2d"),m.current.width=d.current.videoWidth,m.current.height=d.current.videoHeight,!t||null===t){e.next=11;break}return d.current&&(t.translate(m.current.width,0),t.scale(-1,1),t.drawImage(d.current,0,0,m.current.width,m.current.height),t.setTransform(1,0,0,1,0,0)),e.next=8,TPe.estimateFaces(m.current);case 8:n=e.sent,EPe.push(n[0].keypoints[0]),APe.push(n[0].keypoints[1]);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Tn(Sn().mark((function e(){var t,n;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gPe(d.current,new $Fe).withFaceLandmarks().withFaceExpressions();case 2:t=e.sent,console.log(t[0].expressions),RPe+=t[0].expressions.angry,OPe+=t[0].expressions.disgusted,MPe+=t[0].expressions.fearful,DPe+=t[0].expressions.happy,FPe+=t[0].expressions.neutral,PPe+=t[0].expressions.sad,LPe+=t[0].expressions.surprised,m.current.innerHtml=sDe(d.current),IDe(m.current,{width:d.current.videoWidth,height:d.current.videoHeight}),n=yPe(t,{width:d.current.videoWidth,height:d.current.videoHeight}),uMe.drawDetections(m.current,n),uMe.drawFaceExpressions(m.current,n);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){if(h)clearInterval(h),p(void 0);else{var e=setInterval((function(){return he(),void pe()}),200);p(e)}},me=function(){var e=Tn(Sn().mark((function e(){var t,n,r,a;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){var t=n.createMediaStreamSource(e);M(t),t.connect(r),r.connect(n.destination)},t=new Date,K(3600*t.getHours()+60*t.getMinutes()+t.getSeconds()),n=new(window.AudioContext||window.webkitAudioContext),r=n.createScriptProcessor(0,1,1),L(r),e.next=8,navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){var t=new MediaRecorder(e);t.start(),x(e),I(t),a(e),lb.ZP.startListening({continuous:!0,language:"ko"}),r.onaudioprocess=function(a){for(var i=[],o=a.inputBuffer.getChannelData(0),s=Math.floor(480),u=0,c=s,l=0;l<s;l++)u+=Math.abs(o[c+l]);i.push(u/s);for(var f=0;f<i.length;f++)i[f]*=10,j.push(i[f]);for(var h=[],p=a.inputBuffer.getChannelData(0),d=Math.floor(48),m=0,v=d,g=0;g<d;g++)m+=Math.abs(p[v+g]);h.push(m/d);for(var y=0;y<h.length;y++)H.push(h[y]);a.playbackTime>180?(e.getAudioTracks().forEach((function(e){e.stop()})),t.stop(),r.disconnect(),n.createMediaStreamSource(e).disconnect(),t.ondataavailable=function(e){W(e.data),E(!0)}):E(!1)}}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(t){if(console.log("sendAvi"),null!=t){var n=(kPe="".concat(ye(),"_").concat(e))+".webm",r=new File([t],n),a=new FormData;a.append("fname",n),a.append("file",r),xn().post("http://localhost:5001/video/uploadfiles",a,{header:{"content-type":"multipart/form-data"}}).then((function(e){if(e.data.success){bPe=e.data.url;for(var t=document.getElementById("thumbnailCanvas").toDataURL("image/jpeg","image/octet-stream"),n=atob(t.split(",")[1]),r=[],a=0;a<n.length;a++)r.push(n.charCodeAt(a));var i=new Blob([new Uint8Array(r),{type:"image/jpeg"}]),o=kPe+".jpeg",s=new FormData;s.append("file",i,o),xn().post("http://localhost:5001/video/thumbnail",s).then((function(e){e.data.success?(xPe=e.data.url,ge()):console.log("\uc2e4\ud328")}))}else console.log("\uc2e4\ud328")}))}},ge=function(){var e={user:t,title:"".concat(kPe,"_").concat(r),filePath:bPe,question:r,category:a,duration:wPe,thumbnail:xPe};xn().post("http://localhost:5001/video/uploaddb",e).then((function(e){e.data.success?SPe=e.data.objectid:alert("\ube44\ub514\uc624 \uc5c5\ub85c\ub4dc\uc5d0 \uc2e4\ud328 \ud588\uc2b5\ub2c8\ub2e4. ")}))},ye=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1>9?e.getMonth()+1:"0"+(e.getMonth()+1),r=e.getDate()>9?e.getDate():"0"+e.getDate(),a=e.getHours()>9?e.getHours():"0"+e.getHours(),i=e.getMinutes()>9?e.getMinutes():"0"+e.getMinutes(),o=e.getSeconds()>9?e.getSeconds():"0"+e.getSeconds();return String(t)+String(n)+String(r)+"_"+a+i+o};return(0,fn.jsx)("div",{className:"background",style:{backgroundImage:"url(./bgimg5.png)",backgroundSize:"cover",width:"100%",height:"auto",backgroundRepeat:"repeat-y"},children:(0,fn.jsxs)("div",{id:"recordArea",children:[(0,fn.jsxs)("div",{id:"videoArea",children:[(0,fn.jsxs)("div",{id:"recordTitle",children:[" ",(0,fn.jsxs)("h1",{children:[" ",r," "]})]}),(0,fn.jsx)("video",{ref:d,autoPlay:!0,style:ue.Video,id:"videoScreen",muted:!0})]}),(0,fn.jsxs)("div",{id:"btnArea",children:[ae?(0,fn.jsx)("button",{id:"audioRecBtn_stop",onClick:function(){lb.ZP.stopListening(),de(),WPe&&(WPe.stop(),WPe=null),function(){var e=new Date;X=3600*e.getHours()+60*e.getMinutes()+e.getSeconds(),J(parseInt(X)-parseInt(q)),_.ondataavailable=function(e){W(e.data),E(!0)},b.getAudioTracks().forEach((function(e){e.stop()})),_.stop(),P.disconnect(),O.disconnect(),lb.ZP.stopListening()}()},children:"\ub179\uc74c \uc885\ub8cc"}):(0,fn.jsx)("button",{id:"audioRecBtn_start",onClick:function(){lb.ZP.startListening({continuous:!0,language:"ko"}),de(),function(){if(navigator.mediaDevices.getUserMedia){console.log("video capture start");var e=[];(WPe=new MediaRecorder(BPe,{mimeType:"video/webm; codecs=vp9"})).ondataavailable=function(t){var n;(null===(n=t.data)||void 0===n?void 0:n.size)>0&&e.push(t.data)},WPe.onstop=function(){jPe=new Blob(e,{type:"video/webm"}),VPe=window.URL.createObjectURL(jPe),(0,IPe.Z)(VPe).then((function(e){wPe=e,URL.revokeObjectURL(jPe),ve(jPe),console.log("video capture end")}))},WPe.start()}}(),function(){console.log("thumnail capture");var e=v.current.getContext("2d");v.current.width=d.current.videoWidth,v.current.height=d.current.videoHeight,e&&null!==e&&d.current&&(e.translate(v.current.width,0),e.scale(-1,1),e.drawImage(d.current,0,0,v.current.width,v.current.height),e.setTransform(1,0,0,1,0,0))}(),me()},children:"\ub179\uc74c \uc2dc\uc791"}),(0,fn.jsx)("button",{id:"checkResultBtn",onClick:function(){!function(){ee=Math.max.apply(Math,j),te=Math.max.apply(Math,H),RPe=RPe/(zPe=RPe+DPe+OPe+FPe+PPe+LPe+MPe)*100,DPe=DPe/zPe*100,OPe=OPe/zPe*100,FPe=FPe/zPe*100,PPe=PPe/zPe*100,LPe=LPe/zPe*100,MPe=MPe/zPe*100;for(var e=function(e){-1!==NPe.findIndex((function(t){return t.text===ie[e]}))?NPe[NPe.findIndex((function(t){return t.text===ie[e]}))].value++:NPe.push({text:ie[e],value:1})},t=0;t<ie.length;t++)e(t);u&&d.current.srcObject.getTracks().forEach((function(e){c(!1),e.stop()})),_Pe=kPe.split("_"),i("/result",{state:{word:NPe,left_eye:EPe,right_eye:APe,angryvalue:RPe,happyvalue:DPe,disgustedvalue:OPe,neutralvalue:FPe,sadvalue:PPe,surprisedvalue:LPe,fearfulvalue:MPe,question:r,category:a,fileurl:"http://localhost:5001/"+bPe,date:_Pe[0],audioResult1:j,audioResult2:H,max1:ee,max2:te,duration:Q,script:re}})}(),function(){var e={user:t,video:SPe,word:NPe,left_eye:EPe,right_eye:APe,angryvalue:RPe,happyvalue:DPe,disgustedvalue:OPe,neutralvalue:FPe,sadvalue:PPe,surprisedvalue:LPe,fearfulvalue:MPe,question:r,category:a,fileurl:"http://localhost:5001/"+bPe,date:_Pe[0],audioResult1:j,audioResult2:H,max1:ee,max2:te,duration:Q,script:re};xn().post("http://localhost:5001/result/post",e).then((function(e){e.data.success?console.log(e.data):console.log(e.err)}))}()},children:"\uacb0\uacfc \ud655\uc778"})]}),(0,fn.jsxs)("div",{style:{display:"none"},children:[" ",(0,fn.jsx)("canvas",{ref:m,style:ue.Canvas})]}),(0,fn.jsxs)("div",{style:{display:"none"},children:[" ",(0,fn.jsx)("canvas",{id:"thumbnailCanvas",ref:v,style:ue.Canvas})]})]})})};function HPe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ZPe=n(9613),GPe=n.n(ZPe);var qPe=function(e){function t(e,r,u,c,h){for(var p,d,m,v,x,k=0,S=0,_=0,T=0,I=0,O=0,D=m=p=0,P=0,L=0,z=0,B=0,W=u.length,V=W-1,j="",U="",H="",Z="";P<W;){if(d=u.charCodeAt(P),P===V&&0!==S+T+_+k&&(0!==S&&(d=47===S?10:47),T=_=k=0,W++,V++),0===S+T+_+k){if(P===V&&(0<L&&(j=j.replace(f,"")),0<j.trim().length)){switch(d){case 32:case 9:case 59:case 13:case 10:break;default:j+=u.charAt(P)}d=59}switch(d){case 123:for(p=(j=j.trim()).charCodeAt(0),m=1,B=++P;P<W;){switch(d=u.charCodeAt(P)){case 123:m++;break;case 125:m--;break;case 47:switch(d=u.charCodeAt(P+1)){case 42:case 47:e:{for(D=P+1;D<V;++D)switch(u.charCodeAt(D)){case 47:if(42===d&&42===u.charCodeAt(D-1)&&P+2!==D){P=D+1;break e}break;case 10:if(47===d){P=D+1;break e}}P=D}}break;case 91:d++;case 40:d++;case 34:case 39:for(;P++<V&&u.charCodeAt(P)!==d;);}if(0===m)break;P++}if(m=u.substring(B,P),0===p&&(p=(j=j.replace(l,"").trim()).charCodeAt(0)),64===p){switch(0<L&&(j=j.replace(f,"")),d=j.charCodeAt(1)){case 100:case 109:case 115:case 45:L=r;break;default:L=R}if(B=(m=t(r,L,m,d,h+1)).length,0<M&&(x=s(3,m,L=n(R,j,z),r,C,N,B,d,h,c),j=L.join(""),void 0!==x&&0===(B=(m=x.trim()).length)&&(d=0,m="")),0<B)switch(d){case 115:j=j.replace(w,o);case 100:case 109:case 45:m=j+"{"+m+"}";break;case 107:m=(j=j.replace(g,"$1 $2"))+"{"+m+"}",m=1===A||2===A&&i("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=j+m,112===c&&(U+=m,m="")}else m=""}else m=t(r,n(r,j,z),m,c,h+1);H+=m,m=z=L=D=p=0,j="",d=u.charCodeAt(++P);break;case 125:case 59:if(1<(B=(j=(0<L?j.replace(f,""):j).trim()).length))switch(0===D&&(p=j.charCodeAt(0),45===p||96<p&&123>p)&&(B=(j=j.replace(" ",":")).length),0<M&&void 0!==(x=s(1,j,r,e,C,N,U.length,c,h,c))&&0===(B=(j=x.trim()).length)&&(j="\0\0"),p=j.charCodeAt(0),d=j.charCodeAt(1),p){case 0:break;case 64:if(105===d||99===d){Z+=j+u.charAt(P);break}default:58!==j.charCodeAt(B-1)&&(U+=a(j,p,d,j.charCodeAt(2)))}z=L=D=p=0,j="",d=u.charCodeAt(++P)}}switch(d){case 13:case 10:47===S?S=0:0===1+p&&107!==c&&0<j.length&&(L=1,j+="\0"),0<M*F&&s(0,j,r,e,C,N,U.length,c,h,c),N=1,C++;break;case 59:case 125:if(0===S+T+_+k){N++;break}default:switch(N++,v=u.charAt(P),d){case 9:case 32:if(0===T+k+S)switch(I){case 44:case 58:case 9:case 32:v="";break;default:32!==d&&(v=" ")}break;case 0:v="\\0";break;case 12:v="\\f";break;case 11:v="\\v";break;case 38:0===T+S+k&&(L=z=1,v="\f"+v);break;case 108:if(0===T+S+k+E&&0<D)switch(P-D){case 2:112===I&&58===u.charCodeAt(P-3)&&(E=I);case 8:111===O&&(E=O)}break;case 58:0===T+S+k&&(D=P);break;case 44:0===S+_+T+k&&(L=1,v+="\r");break;case 34:case 39:0===S&&(T=T===d?0:0===T?d:T);break;case 91:0===T+S+_&&k++;break;case 93:0===T+S+_&&k--;break;case 41:0===T+S+k&&_--;break;case 40:if(0===T+S+k){if(0===p)if(2*I+3*O===533);else p=1;_++}break;case 64:0===S+_+T+k+D+m&&(m=1);break;case 42:case 47:if(!(0<T+k+_))switch(S){case 0:switch(2*d+3*u.charCodeAt(P+1)){case 235:S=47;break;case 220:B=P,S=42}break;case 42:47===d&&42===I&&B+2!==P&&(33===u.charCodeAt(B+2)&&(U+=u.substring(B,P+1)),v="",S=0)}}0===S&&(j+=v)}O=I,I=d,P++}if(0<(B=U.length)){if(L=r,0<M&&(void 0!==(x=s(2,U,L,e,C,N,B,c,h,c))&&0===(U=x).length))return Z+U+H;if(U=L.join(",")+"{"+U+"}",0!==A*E){switch(2!==A||i(U,2)||(E=0),E){case 111:U=U.replace(b,":-moz-$1")+U;break;case 112:U=U.replace(y,"::-webkit-input-$1")+U.replace(y,"::-moz-$1")+U.replace(y,":-ms-input-$1")+U}E=0}}return Z+U+H}function n(e,t,n){var a=t.trim().split(m);t=a;var i=a.length,o=e.length;switch(o){case 0:case 1:var s=0;for(e=0===o?"":e[0]+" ";s<i;++s)t[s]=r(e,t[s],n).trim();break;default:var u=s=0;for(t=[];s<i;++s)for(var c=0;c<o;++c)t[u++]=r(e[c]+" ",a[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(v,"$1"+e.trim());case 58:return e.trim()+t.replace(v,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(v,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function a(e,t,n,r){var o=e+";",s=2*t+3*n+4*r;if(944===s){e=o.indexOf(":",9)+1;var u=o.substring(e,o.length-1).trim();return u=o.substring(0,e).trim()+u+";",1===A||2===A&&i(u,1)?"-webkit-"+u+u:u}if(0===A||2===A&&!i(o,1))return o;switch(s){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(I,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(u=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+u+o;case 1005:return p.test(o)?o.replace(h,":-webkit-")+o.replace(h,":-moz-")+o:o;case 1e3:switch(t=(u=o.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(t)){case 226:u=o.replace(x,"tb");break;case 232:u=o.replace(x,"tb-rl");break;case 220:u=o.replace(x,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+u+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,s=(u=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:o=o.replace(u,"-webkit-"+u)+";"+o;break;case 207:case 102:o=o.replace(u,"-webkit-"+(102<s?"inline-":"")+"box")+";"+o.replace(u,"-webkit-"+u)+";"+o.replace(u,"-ms-"+u+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return u=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+u+"-ms-flex-"+u+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(S,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(S,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===T.test(e))return 115===(u=e.substring(e.indexOf(":")+1)).charCodeAt(0)?a(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(u,"-webkit-"+u)+o.replace(u,"-moz-"+u.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(d,"$1-webkit-$2")+o}return o}function i(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),D(2!==t?r:r.replace(_,"$1"),n,t)}function o(e,t){var n=a(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(k," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,a,i,o,s,u,l){for(var f,h=0,p=t;h<M;++h)switch(f=O[h].call(c,e,p,n,r,a,i,o,s,u,l)){case void 0:case!1:case!0:case null:break;default:p=f}if(p!==t)return p}function u(e){return void 0!==(e=e.prefix)&&(D=null,e?"function"!==typeof e?A=1:(A=2,D=e):A=0),u}function c(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<M){var a=s(-1,n,r,r,C,N,0,0,0,0);void 0!==a&&"string"===typeof a&&(n=a)}var i=t(R,r,n,0,0);return 0<M&&(void 0!==(a=s(-2,i,r,r,C,N,i.length,0,0,0))&&(i=a)),"",E=0,N=C=1,i}var l=/^\0+/g,f=/[\0\r\f]/g,h=/: */g,p=/zoo|gra/,d=/([,: ])(transform)/g,m=/,\r+?/g,v=/([\t\r\n ])*\f?&/g,g=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,b=/:(read-only)/g,x=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,k=/([\s\S]*?);/g,S=/-self|flex-/g,_=/[^]*?(:[rp][el]a[\w-]+)[^]*/,T=/stretch|:\s*\w+\-(?:conte|avail)/,I=/([^-])(image-set\()/,N=1,C=1,E=0,A=1,R=[],O=[],M=0,D=null,F=0;return c.use=function e(t){switch(t){case void 0:case null:M=O.length=0;break;default:if("function"===typeof t)O[M++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else F=0|!!t}return e},c.set=u,void 0!==e&&u(e),c},KPe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var XPe=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},YPe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,$Pe=XPe((function(e){return YPe.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));function QPe(){return(QPe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var JPe=function(e,t){for(var n=[e[0]],r=0,a=t.length;r<a;r+=1)n.push(t[r],e[r+1]);return n},eLe=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,an.typeOf)(e)},tLe=Object.freeze([]),nLe=Object.freeze({});function rLe(e){return"function"==typeof e}function aLe(e){return e.displayName||e.name||"Component"}function iLe(e){return e&&"string"==typeof e.styledComponentId}var oLe="undefined"!=typeof process&&({NODE_ENV:"production",PUBLIC_URL:"/Inpporter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/Inpporter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",sLe="undefined"!=typeof window&&"HTMLElement"in window,uLe=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Inpporter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/Inpporter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/Inpporter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/Inpporter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Inpporter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/Inpporter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/Inpporter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/Inpporter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY));function cLe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var lLe=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,a=r;e>=a;)(a<<=1)<0&&cLe(16,""+e);this.groupSizes=new Uint32Array(a),this.groupSizes.set(n),this.length=a;for(var i=r;i<a;i++)this.groupSizes[i]=0}for(var o=this.indexOfGroup(e+1),s=0,u=t.length;s<u;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var a=n;a<r;a++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),a=r+n,i=r;i<a;i++)t+=this.tag.getRule(i)+"/*!sc*/\n";return t},e}(),fLe=new Map,hLe=new Map,pLe=1,dLe=function(e){if(fLe.has(e))return fLe.get(e);for(;hLe.has(pLe);)pLe++;var t=pLe++;return fLe.set(e,t),hLe.set(t,e),t},mLe=function(e){return hLe.get(e)},vLe=function(e,t){t>=pLe&&(pLe=t+1),fLe.set(e,t),hLe.set(t,e)},gLe="style["+oLe+'][data-styled-version="5.3.6"]',yLe=new RegExp("^"+oLe+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),bLe=function(e,t,n){for(var r,a=n.split(","),i=0,o=a.length;i<o;i++)(r=a[i])&&e.registerName(t,r)},xLe=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],a=0,i=n.length;a<i;a++){var o=n[a].trim();if(o){var s=o.match(yLe);if(s){var u=0|parseInt(s[1],10),c=s[2];0!==u&&(vLe(c,u),bLe(e,c,s[3]),e.getTag().insertRules(u,r)),r.length=0}else r.push(o)}}},wLe=function(){return n.nc},kLe=function(e){var t=document.head,n=e||t,r=document.createElement("style"),a=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(oLe))return r}}(n),i=void 0!==a?a.nextSibling:null;r.setAttribute(oLe,"active"),r.setAttribute("data-styled-version","5.3.6");var o=wLe();return o&&r.setAttribute("nonce",o),n.insertBefore(r,i),r},SLe=function(){function e(e){var t=this.element=kLe(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var a=t[n];if(a.ownerNode===e)return a}cLe(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),_Le=function(){function e(e){var t=this.element=kLe(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),TLe=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),ILe=sLe,NLe={isServer:!sLe,useCSSOMInjection:!uLe},CLe=function(){function e(e,t,n){void 0===e&&(e=nLe),void 0===t&&(t={}),this.options=QPe({},NLe,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&sLe&&ILe&&(ILe=!1,function(e){for(var t=document.querySelectorAll(gLe),n=0,r=t.length;n<r;n++){var a=t[n];a&&"active"!==a.getAttribute(oLe)&&(xLe(e,a),a.parentNode&&a.parentNode.removeChild(a))}}(this))}e.registerId=function(e){return dLe(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(QPe({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,a=t.target,e=n?new TLe(a):r?new SLe(a):new _Le(a),new lLe(e)));var e,t,n,r,a},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(dLe(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(dLe(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(dLe(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",a=0;a<n;a++){var i=mLe(a);if(void 0!==i){var o=e.names.get(i),s=t.getGroup(a);if(o&&s&&o.size){var u=oLe+".g"+a+'[id="'+i+'"]',c="";void 0!==o&&o.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+s+u+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),ELe=/(a)(d)/gi,ALe=function(e){return String.fromCharCode(e+(e>25?39:97))};function RLe(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=ALe(t%52)+n;return(ALe(t%52)+n).replace(ELe,"$1-$2")}var OLe=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},MLe=function(e){return OLe(5381,e)};function DLe(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(rLe(n)&&!iLe(n))return!1}return!0}var FLe=MLe("5.3.6"),PLe=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&DLe(e),this.componentId=t,this.baseHash=OLe(FLe,t),this.baseStyle=n,CLe.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))a.push(this.staticRulesId);else{var i=eze(this.rules,e,t,n).join(""),o=RLe(OLe(this.baseHash,i)>>>0);if(!t.hasNameForId(r,o)){var s=n(i,"."+o,void 0,r);t.insertRules(r,o,s)}a.push(o),this.staticRulesId=o}else{for(var u=this.rules.length,c=OLe(this.baseHash,n.hash),l="",f=0;f<u;f++){var h=this.rules[f];if("string"==typeof h)l+=h;else if(h){var p=eze(h,e,t,n),d=Array.isArray(p)?p.join(""):p;c=OLe(c,d+f),l+=d}}if(l){var m=RLe(c>>>0);if(!t.hasNameForId(r,m)){var v=n(l,"."+m,void 0,r);t.insertRules(r,m,v)}a.push(m)}}return a.join(" ")},e}(),LLe=/^\s*\/\/.*$/gm,zLe=[":","[",".","#"];function BLe(e){var t,n,r,a,i=void 0===e?nLe:e,o=i.options,s=void 0===o?nLe:o,u=i.plugins,c=void 0===u?tLe:u,l=new qPe(s),f=[],h=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,a,i,o,s,u,c,l,f){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(a[0]+r),"";default:return r+(0===f?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){f.push(e)})),p=function(e,r,i){return 0===r&&-1!==zLe.indexOf(i[n.length])||i.match(a)?e:"."+t};function d(e,i,o,s){void 0===s&&(s="&");var u=e.replace(LLe,""),c=i&&o?o+" "+i+" { "+u+" }":u;return t=s,n=i,r=new RegExp("\\"+n+"\\b","g"),a=new RegExp("(\\"+n+"\\b){2,}"),l(o||!i?"":i,c)}return l.use([].concat(c,[function(e,t,a){2===e&&a.length&&a[0].lastIndexOf(n)>0&&(a[0]=a[0].replace(r,p))},h,function(e){if(-2===e){var t=f;return f=[],t}}])),d.hash=c.length?c.reduce((function(e,t){return t.name||cLe(15),OLe(e,t.name)}),5381).toString():"",d}var WLe=S.createContext(),VLe=(WLe.Consumer,S.createContext()),jLe=(VLe.Consumer,new CLe),ULe=BLe();function HLe(){return(0,S.useContext)(WLe)||jLe}function ZLe(){return(0,S.useContext)(VLe)||ULe}function GLe(e){var t=(0,S.useState)(e.stylisPlugins),n=t[0],r=t[1],a=HLe(),i=(0,S.useMemo)((function(){var t=a;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),o=(0,S.useMemo)((function(){return BLe({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return(0,S.useEffect)((function(){GPe()(n,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]),S.createElement(WLe.Provider,{value:i},S.createElement(VLe.Provider,{value:o},e.children))}var qLe=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=ULe);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return cLe(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=ULe),this.name+e.hash},e}(),KLe=/([A-Z])/,XLe=/([A-Z])/g,YLe=/^ms-/,$Le=function(e){return"-"+e.toLowerCase()};function QLe(e){return KLe.test(e)?e.replace(XLe,$Le).replace(YLe,"-ms-"):e}var JLe=function(e){return null==e||!1===e||""===e};function eze(e,t,n,r){if(Array.isArray(e)){for(var a,i=[],o=0,s=e.length;o<s;o+=1)""!==(a=eze(e[o],t,n,r))&&(Array.isArray(a)?i.push.apply(i,a):i.push(a));return i}return JLe(e)?"":iLe(e)?"."+e.styledComponentId:rLe(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!t?e:eze(e(t),t,n,r):e instanceof qLe?n?(e.inject(n,r),e.getName(r)):e:eLe(e)?function e(t,n){var r,a,i=[];for(var o in t)t.hasOwnProperty(o)&&!JLe(t[o])&&(Array.isArray(t[o])&&t[o].isCss||rLe(t[o])?i.push(QLe(o)+":",t[o],";"):eLe(t[o])?i.push.apply(i,e(t[o],o)):i.push(QLe(o)+": "+(r=o,(null==(a=t[o])||"boolean"==typeof a||""===a?"":"number"!=typeof a||0===a||r in KPe?String(a).trim():a+"px")+";")));return n?[n+" {"].concat(i,["}"]):i}(e):e.toString();var u}var tze=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function nze(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return rLe(e)||eLe(e)?tze(eze(JPe(tLe,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:tze(eze(JPe(e,n)))}new Set;var rze=function(e,t,n){return void 0===n&&(n=nLe),e.theme!==n.theme&&e.theme||t||n.theme},aze=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,ize=/(^-|-$)/g;function oze(e){return e.replace(aze,"-").replace(ize,"")}var sze=function(e){return RLe(MLe(e)>>>0)};function uze(e){return"string"==typeof e&&!0}var cze=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},lze=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function fze(e,t,n){var r=e[n];cze(t)&&cze(r)?hze(r,t):e[n]=t}function hze(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];if(cze(o))for(var s in o)lze(s)&&fze(e,o[s],s)}return e}var pze=S.createContext();pze.Consumer;var dze={};function mze(e,t,n){var r=iLe(e),a=!uze(e),i=t.attrs,o=void 0===i?tLe:i,s=t.componentId,u=void 0===s?function(e,t){var n="string"!=typeof e?"sc":oze(e);dze[n]=(dze[n]||0)+1;var r=n+"-"+sze("5.3.6"+n+dze[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):s,c=t.displayName,l=void 0===c?function(e){return uze(e)?"styled."+e:"Styled("+aLe(e)+")"}(e):c,f=t.displayName&&t.componentId?oze(t.displayName)+"-"+t.componentId:t.componentId||u,h=r&&e.attrs?Array.prototype.concat(e.attrs,o).filter(Boolean):o,p=t.shouldForwardProp;r&&e.shouldForwardProp&&(p=t.shouldForwardProp?function(n,r,a){return e.shouldForwardProp(n,r,a)&&t.shouldForwardProp(n,r,a)}:e.shouldForwardProp);var d,m=new PLe(n,f,r?e.componentStyle:void 0),v=m.isStatic&&0===o.length,g=function(e,t){return function(e,t,n,r){var a=e.attrs,i=e.componentStyle,o=e.defaultProps,s=e.foldedComponentIds,u=e.shouldForwardProp,c=e.styledComponentId,l=e.target,f=function(e,t,n){void 0===e&&(e=nLe);var r=QPe({},t,{theme:e}),a={};return n.forEach((function(e){var t,n,i,o=e;for(t in rLe(o)&&(o=o(r)),o)r[t]=a[t]="className"===t?(n=a[t],i=o[t],n&&i?n+" "+i:n||i):o[t]})),[r,a]}(rze(t,(0,S.useContext)(pze),o)||nLe,t,a),h=f[0],p=f[1],d=function(e,t,n,r){var a=HLe(),i=ZLe();return t?e.generateAndInjectStyles(nLe,a,i):e.generateAndInjectStyles(n,a,i)}(i,r,h),m=n,v=p.$as||t.$as||p.as||t.as||l,g=uze(v),y=p!==t?QPe({},t,{},p):t,b={};for(var x in y)"$"!==x[0]&&"as"!==x&&("forwardedAs"===x?b.as=y[x]:(u?u(x,$Pe,v):!g||$Pe(x))&&(b[x]=y[x]));return t.style&&p.style!==t.style&&(b.style=QPe({},t.style,{},p.style)),b.className=Array.prototype.concat(s,c,d!==c?d:null,t.className,p.className).filter(Boolean).join(" "),b.ref=m,(0,S.createElement)(v,b)}(d,e,t,v)};return g.displayName=l,(d=S.forwardRef(g)).attrs=h,d.componentStyle=m,d.displayName=l,d.shouldForwardProp=p,d.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):tLe,d.styledComponentId=f,d.target=r?e.target:e,d.withComponent=function(e){var r=t.componentId,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["componentId"]),i=r&&r+"-"+(uze(e)?e:oze(aLe(e)));return mze(e,QPe({},a,{attrs:h,componentId:i}),n)},Object.defineProperty(d,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?hze({},e.defaultProps,t):t}}),d.toString=function(){return"."+d.styledComponentId},a&&rn()(d,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),d}var vze=function(e){return function e(t,n,r){if(void 0===r&&(r=nLe),!(0,an.isValidElementType)(n))return cLe(1,String(n));var a=function(){return t(n,r,nze.apply(void 0,arguments))};return a.withConfig=function(a){return e(t,n,QPe({},r,{},a))},a.attrs=function(a){return e(t,n,QPe({},r,{attrs:Array.prototype.concat(r.attrs,a).filter(Boolean)}))},a}(mze,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){vze[e]=vze(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=DLe(e),CLe.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var a=r(eze(this.rules,t,n,r).join(""),""),i=this.componentId+e;n.insertRules(i,i,a)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&CLe.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=wLe();return"<style "+[n&&'nonce="'+n+'"',oLe+'="true"','data-styled-version="5.3.6"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?cLe(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return cLe(2);var n=((t={})[oLe]="",t["data-styled-version"]="5.3.6",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),r=wLe();return r&&(n.nonce=r),[S.createElement("style",QPe({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new CLe({isServer:!0}),this.sealed=!1}var t=e.prototype;t.collectStyles=function(e){return this.sealed?cLe(2):S.createElement(GLe,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return cLe(3)}}();var gze,yze,bze,xze=vze,wze=function(e){var t=e.open_popup,n=e.close_popup,r=e.header_popup,a=e.cate_popup;return(0,fn.jsx)("div",{className:t?"openpopup popup":"popup",children:t?(0,fn.jsxs)("section",{children:[(0,fn.jsxs)("header",{children:[r,(0,fn.jsx)("button",{className:"close",onClick:n,children:"\xd7"})]}),(0,fn.jsx)("main",{children:e.children}),(0,fn.jsx)("footer",{children:"Error"===r?(0,fn.jsx)("button",{className:"close",onClick:n,children:"close"}):(0,fn.jsx)(Je,{to:"/voicerecord",state:{question:r,category:a},children:(0,fn.jsx)("button",{className:"close",children:"\uc5f0\uc2b5\ud558\uae30"})})})]}):null})},kze=function(e){var t=tn((function(e){return e.User.id})),n=(0,S.useState)("1"),r=(0,T.Z)(n,2),a=r[0],i=r[1],o=(0,S.useState)("\uc5ed\ub7c9"),s=(0,T.Z)(o,2),u=s[0],c=s[1],l=e.open,f=e.close,h=e.header,p=(0,S.useState)([]),d=(0,T.Z)(p,2),m=d[0],v=d[1],g=(0,S.useState)([]),y=(0,T.Z)(g,2),b=y[0],x=y[1],w=(0,S.useState)(!1),k=(0,T.Z)(w,2),_=k[0],N=k[1],C=function(){N(!1)},E=(0,S.useState)(!1),A=(0,T.Z)(E,2),R=A[0],O=A[1];return(0,S.useEffect)((function(){var e=function(){var e=Tn(Sn().mark((function e(){var r,a;return Sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("\uc804\uccb4"!==u){e.next=7;break}return e.next=3,xn().get("http://localhost:5001/question/".concat(t),t);case 3:r=e.sent,n(r.data.list),e.next=11;break;case 7:return e.next=9,xn().get("http://localhost:5001/question/".concat(t,"/").concat(u),t,u);case 9:a=e.sent,n(a.data.list);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(e){v(e)};e()}),[u]),(0,S.useEffect)((function(){"1"===a?c("\uc5ed\ub7c9"):"2"===a?c("\uc9c0\uc6d0\ub3d9\uae30"):"3"===a?c("\uc9c1\ubb34"):"4"===a&&c("\uae30\ucd08\uc778\uc131")}),[a]),(0,fn.jsxs)("div",{className:l?"openModal modal":"modal",children:[l?(0,fn.jsxs)("section",{children:[(0,fn.jsxs)("header",{children:[h,(0,fn.jsx)("button",{className:"close",onClick:f,children:"\xd7"})]}),(0,fn.jsxs)("main",{children:[(0,fn.jsxs)("div",{className:"left",children:[(0,fn.jsx)("button",{className:"leftbutton"+("1"===a?"active":""),onClick:function(){return i("1")},children:"\uc5ed\ub7c9"}),(0,fn.jsx)("button",{className:"leftbutton"+("2"===a?"active":""),onClick:function(){return i("2")},children:"\uc9c0\uc6d0\ub3d9\uae30"}),(0,fn.jsx)("button",{className:"leftbutton"+("3"===a?"active":""),onClick:function(){return i("3")},children:"\uc9c1\ubb34"}),(0,fn.jsx)("button",{className:"leftbutton"+("4"===a?"active":""),onClick:function(){return i("4")},children:"\uae30\ucd08 \uc778\uc131"})]}),(0,fn.jsx)("div",{className:"right",children:m.map((function(e){return(0,fn.jsx)("div",{className:"question_content",children:(0,fn.jsxs)(_ze,{children:[(0,fn.jsx)(Sze,{type:"checkbox",value:e.text,onChange:function(e){!function(e,t){e?0==b.length?x([].concat((0,I.Z)(b),[t])):O(!0):e||x(b.filter((function(e){return e!==t})))}(e.target.checked,e.target.value)},checked:!!b.includes(e.text)}),(0,fn.jsx)(Tze,{children:e.text})]},e._id)},e._id)}))})]}),(0,fn.jsx)("footer",{children:(0,fn.jsx)("button",{className:"close",onClick:function(){N(!0)},children:"\ub2e4\uc74c"})})]}):null,0==b.length?(0,fn.jsx)(wze,{open_popup:_,close_popup:C,header_popup:"Error",cate_popup:"",children:"\uc120\ud0dd\ub41c \uc9c8\ubb38\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. \uc9c8\ubb38\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694."}):(0,fn.jsxs)(wze,{open_popup:_,close_popup:C,header_popup:b[0],cate_popup:u,children:['"',b[0],'" \uc5d0 \ub300\ud55c \uc5f0\uc2b5 \uba74\uc811\uc744 \uc9c4\ud589\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?']}),(0,fn.jsxs)(wze,{open_popup:R,close_popup:function(){O(!1)},header_popup:"Error",cate_popup:"",children:['"',b[0],'" \uc774 \uc120\ud0dd\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. \ud574\ub2f9 \uc9c8\ubb38 \uc120\ud0dd \ud574\uc81c \ud6c4 \ub2e4\ub978 \uc9c8\ubb38\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.']})]})},Sze=xze.input(gze||(gze=HPe(["\n  appearance: none;\n  border: 1.5px solid gainsboro;\n  border-radius: 0.35rem;\n  width: 1.5rem;\n  height: 1.5rem;\n\n  &:checked {\n    border-color: transparent;\n    background-image: url(\"data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M5.707 7.293a1 1 0 0 0-1.414 1.414l2 2a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0-1.414-1.414L7 8.586 5.707 7.293z'/%3e%3c/svg%3e\");\n    background-size: 100% 100%;\n    background-position: 50%;\n    background-repeat: no-repeat;\n    background-color: limegreen;\n  }\n"]))),_ze=xze.label(yze||(yze=HPe(["\n  display: flex;\n  align-items: center;\n  user-select: none;\n"]))),Tze=xze.p(bze||(bze=HPe(["\n  margin-left: 0.25rem;\n"]))),Ize=function(){var e=(0,S.useState)(!0),t=(0,T.Z)(e,2),n=t[0],r=t[1],a=De();return(0,fn.jsx)("div",{className:"background",style:{backgroundImage:"url(./bgimg5.png)",backgroundSize:"cover",width:"100%",height:"auto",backgroundRepeat:"repeat-y"},children:(0,fn.jsx)("div",{className:"home",children:(0,fn.jsx)(kze,{open:n,close:function(){r(!1),a("/")},header:"\uc5f0\uc2b5\ud560 \uc9c8\ubb38\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694"})})})},Nze=n(7462),Cze=n(1694),Eze=n.n(Cze),Aze=S.createContext({getPrefixCls:function(e,t){return t||(e?"ant-".concat(e):"ant")}});Aze.Consumer;var Rze=(0,S.createContext)({}),Oze=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};var Mze=["xs","sm","md","lg","xl","xxl"],Dze=S.forwardRef((function(e,t){var n,r=S.useContext(Aze),a=r.getPrefixCls,i=r.direction,o=S.useContext(Rze),s=o.gutter,u=o.wrap,c=o.supportFlexGap,l=e.prefixCls,f=e.span,h=e.order,p=e.offset,d=e.push,m=e.pull,v=e.className,g=e.children,y=e.flex,b=e.style,x=Oze(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),w=a("col",l),k={};Mze.forEach((function(t){var n,r={},a=e[t];"number"===typeof a?r.span=a:"object"===(0,D.Z)(a)&&(r=a||{}),delete x[t],k=(0,Nze.Z)((0,Nze.Z)({},k),(n={},(0,Ft.Z)(n,"".concat(w,"-").concat(t,"-").concat(r.span),void 0!==r.span),(0,Ft.Z)(n,"".concat(w,"-").concat(t,"-order-").concat(r.order),r.order||0===r.order),(0,Ft.Z)(n,"".concat(w,"-").concat(t,"-offset-").concat(r.offset),r.offset||0===r.offset),(0,Ft.Z)(n,"".concat(w,"-").concat(t,"-push-").concat(r.push),r.push||0===r.push),(0,Ft.Z)(n,"".concat(w,"-").concat(t,"-pull-").concat(r.pull),r.pull||0===r.pull),(0,Ft.Z)(n,"".concat(w,"-rtl"),"rtl"===i),n))}));var _=Eze()(w,(n={},(0,Ft.Z)(n,"".concat(w,"-").concat(f),void 0!==f),(0,Ft.Z)(n,"".concat(w,"-order-").concat(h),h),(0,Ft.Z)(n,"".concat(w,"-offset-").concat(p),p),(0,Ft.Z)(n,"".concat(w,"-push-").concat(d),d),(0,Ft.Z)(n,"".concat(w,"-pull-").concat(m),m),n),v,k),T={};if(s&&s[0]>0){var I=s[0]/2;T.paddingLeft=I,T.paddingRight=I}if(s&&s[1]>0&&!c){var N=s[1]/2;T.paddingTop=N,T.paddingBottom=N}return y&&(T.flex=function(e){return"number"===typeof e?"".concat(e," ").concat(e," auto"):/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?"0 0 ".concat(e):e}(y),!1!==u||T.minWidth||(T.minWidth=0)),S.createElement("div",(0,Nze.Z)({},x,{style:(0,Nze.Z)((0,Nze.Z)({},T),b),className:_,ref:t}),g)}));var Fze=Dze;var Pze,Lze=function(){return!("undefined"===typeof window||!window.document||!window.document.createElement)&&window.document.documentElement},zze=function(){var e=S.useState(!1),t=(0,T.Z)(e,2),n=t[0],r=t[1];return S.useEffect((function(){r(function(){if(!Lze())return!1;if(void 0!==Pze)return Pze;var e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),Pze=1===e.scrollHeight,document.body.removeChild(e),Pze}())}),[]),n},Bze=["xxl","xl","lg","md","sm","xs"],Wze={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},Vze=new Map,jze=-1,Uze={},Hze={matchHandlers:{},dispatch:function(e){return Uze=e,Vze.forEach((function(e){return e(Uze)})),Vze.size>=1},subscribe:function(e){return Vze.size||this.register(),jze+=1,Vze.set(jze,e),e(Uze),jze},unsubscribe:function(e){Vze.delete(e),Vze.size||this.unregister()},unregister:function(){var e=this;Object.keys(Wze).forEach((function(t){var n=Wze[t],r=e.matchHandlers[n];null===r||void 0===r||r.mql.removeListener(null===r||void 0===r?void 0:r.listener)})),Vze.clear()},register:function(){var e=this;Object.keys(Wze).forEach((function(t){var n=Wze[t],r=function(n){var r=n.matches;e.dispatch((0,Nze.Z)((0,Nze.Z)({},Uze),(0,Ft.Z)({},t,r)))},a=window.matchMedia(n);a.addListener(r),e.matchHandlers[n]={mql:a,listener:r},r(a)}))}},Zze=Hze,Gze=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},qze=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};Gze("top","middle","bottom","stretch"),Gze("start","end","center","space-around","space-between","space-evenly");function Kze(e,t){var n=S.useState("string"===typeof e?e:""),r=(0,T.Z)(n,2),a=r[0],i=r[1];return S.useEffect((function(){!function(){if("object"===(0,D.Z)(e))for(var n=0;n<Bze.length;n++){var r=Bze[n];if(t[r]){var a=e[r];if(void 0!==a)return void i(a)}}}()}),[JSON.stringify(e),t]),a}var Xze=S.forwardRef((function(e,t){var n,r=e.prefixCls,a=e.justify,i=e.align,o=e.className,s=e.style,u=e.children,c=e.gutter,l=void 0===c?0:c,f=e.wrap,h=qze(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),p=S.useContext(Aze),d=p.getPrefixCls,m=p.direction,v=S.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),g=(0,T.Z)(v,2),y=g[0],b=g[1],x=S.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),w=(0,T.Z)(x,2),k=w[0],_=w[1],I=Kze(i,k),N=Kze(a,k),C=zze(),E=S.useRef(l);S.useEffect((function(){var e=Zze.subscribe((function(e){_(e);var t=E.current||0;(!Array.isArray(t)&&"object"===(0,D.Z)(t)||Array.isArray(t)&&("object"===(0,D.Z)(t[0])||"object"===(0,D.Z)(t[1])))&&b(e)}));return function(){return Zze.unsubscribe(e)}}),[]);var A=d("row",r),R=function(){var e=[void 0,void 0];return(Array.isArray(l)?l:[l,void 0]).forEach((function(t,n){if("object"===(0,D.Z)(t))for(var r=0;r<Bze.length;r++){var a=Bze[r];if(y[a]&&void 0!==t[a]){e[n]=t[a];break}}else e[n]=t})),e}(),O=Eze()(A,(n={},(0,Ft.Z)(n,"".concat(A,"-no-wrap"),!1===f),(0,Ft.Z)(n,"".concat(A,"-").concat(N),N),(0,Ft.Z)(n,"".concat(A,"-").concat(I),I),(0,Ft.Z)(n,"".concat(A,"-rtl"),"rtl"===m),n),o),M={},F=null!=R[0]&&R[0]>0?R[0]/-2:void 0,P=null!=R[1]&&R[1]>0?R[1]/-2:void 0;if(F&&(M.marginLeft=F,M.marginRight=F),C){var L=(0,T.Z)(R,2);M.rowGap=L[1]}else P&&(M.marginTop=P,M.marginBottom=P);var z=(0,T.Z)(R,2),B=z[0],W=z[1],V=S.useMemo((function(){return{gutter:[B,W],wrap:f,supportFlexGap:C}}),[B,W,f,C]);return S.createElement(Rze.Provider,{value:V},S.createElement("div",(0,Nze.Z)({},h,{className:O,style:(0,Nze.Z)((0,Nze.Z)({},M),s),ref:t}),u))}));var Yze=Xze;var $ze=function(){var e=(0,S.useState)([]),t=(0,T.Z)(e,2),n=t[0],r=t[1],a=tn((function(e){return e.User.id})),i=De();(0,S.useEffect)((function(){xn().get("http://localhost:5001/video/getvideo/".concat(a),a).then((function(e){e.data.success?r(e.data.videos):alert("\ube44\ub514\uc624 \uac00\uc838\uc624\uae30\ub97c \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[]);var o=n.map((function(e,t){var n=Math.floor(e.duration/60),r=Math.floor(e.duration-60*n),o=e.title.split("_"),s=o[0].substring(0,4),u=o[0].substring(4,6),c=o[0].substring(6),l=o[1].substring(0,2),f=o[1].substring(2,4);o[1].substring(4);return(0,fn.jsxs)(Fze,{lg:6,xs:12,className:"col",children:[(0,fn.jsxs)("div",{style:{position:"relative"},className:"thumbnail-image",onClick:function(){return function(e){xn().get("http://localhost:5001/result/get/".concat(e),e,a).then((function(e){e.data.success?(console.log("\uc131\uacf5"),console.log(e.data.result[0].fileurl),i("/result",{state:{word:e.data.result[0].word,left_eye:e.data.result[0].left_eye,right_eye:e.data.result[0].right_eye,angryvalue:e.data.result[0].angryvalue,happyvalue:e.data.result[0].happyvalue,disgustedvalue:e.data.result[0].disgustedvalue,neutralvalue:e.data.result[0].neutralvalue,sadvalue:e.data.result[0].sadvalue,surprisedvalue:e.data.result[0].surprisedvalue,fearfulvalue:e.data.result[0].fearfulvalue,question:e.data.result[0].question,category:e.data.result[0].category,fileurl:e.data.result[0].fileurl,date:e.data.result[0].date,audioResult1:e.data.result[0].audioResult1,audioResult2:e.data.result[0].audioResult2,max1:e.data.result[0].max1,max2:e.data.result[0].max2,duration:e.data.result[0].duration,script:e.data.result[0].script}})):alert("\uacb0\uacfc \uac00\uc838\uc624\uae30\ub97c \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}(e._id)},children:[(0,fn.jsx)("img",{style:{width:"100%"},src:"http://localhost:5001/".concat(e.thumbnail)}),(0,fn.jsx)("div",{className:"duration",children:(0,fn.jsxs)("span",{children:[n<10?"0"+n:n,":",r<10?"0"+r:r]})})]}),(0,fn.jsxs)("div",{className:"profile",children:[(0,fn.jsx)("div",{className:"category",children:(0,fn.jsx)("span",{children:e.category})}),(0,fn.jsx)("div",{className:"date",children:(0,fn.jsxs)("span",{children:[s,"\ub144 ",u,"\uc6d4 ",c,"\uc77c ",l,"\uc2dc ",f,"\ubd84"]})})]}),(0,fn.jsx)("div",{className:"question",children:(0,fn.jsx)("span",{children:e.question})})]})}));return(0,fn.jsx)("div",{className:"background",style:{backgroundImage:"url(./bgimg5.png)",backgroundSize:"contain",width:"100%",height:"auto",backgroundRepeat:"repeat-y"},children:(0,fn.jsxs)("div",{className:"resultListPage",children:[(0,fn.jsx)("div",{id:"resultListPage_title",children:(0,fn.jsx)("h1",{children:"\uba74\uc811 \ubd84\uc11d \uacb0\uacfc \ub9ac\uc2a4\ud2b8"})}),(0,fn.jsx)(Yze,{gutter:32,children:o})]})})};var Qze=function(){return(0,fn.jsx)("div",{className:"App",children:(0,fn.jsxs)(Qe,{basename:"/Inpporter",children:[(0,fn.jsx)(hn,{}),(0,fn.jsxs)(Ge,{children:[(0,fn.jsx)(He,{exact:!0,path:"/",element:(0,fn.jsx)(yn,{})}),(0,fn.jsx)(He,{path:"/signin",element:(0,fn.jsx)(wn,{})}),(0,fn.jsx)(He,{path:"/signup",element:(0,fn.jsx)(kn,{})}),(0,fn.jsx)(He,{path:"/question",element:(0,fn.jsx)(qn,{})}),(0,fn.jsx)(He,{path:"/result",element:(0,fn.jsx)(cb,{})}),(0,fn.jsx)(He,{path:"/voicerecord",element:(0,fn.jsx)(UPe,{})}),(0,fn.jsx)(He,{path:"/selectquestion",element:(0,fn.jsx)(Ize,{})}),(0,fn.jsx)(He,{path:"/resultList",element:(0,fn.jsx)($ze,{})})]}),(0,fn.jsx)(gn,{})]})})},Jze=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))};function eBe(e){return eBe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eBe(e)}function tBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nBe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rBe(e,t){return!t||"object"!==eBe(t)&&"function"!==typeof t?iBe(e):t}function aBe(e){return aBe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},aBe(e)}function iBe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oBe(e,t){return oBe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},oBe(e,t)}function sBe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uBe=function(e){function t(){var e,n;tBe(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return sBe(iBe(n=rBe(this,(e=aBe(t)).call.apply(e,[this].concat(a)))),"state",{bootstrapped:!1}),sBe(iBe(n),"_unsubscribe",void 0),sBe(iBe(n),"handlePersistorState",(function(){n.props.persistor.getState().bootstrapped&&(n.props.onBeforeLift?Promise.resolve(n.props.onBeforeLift()).finally((function(){return n.setState({bootstrapped:!0})})):n.setState({bootstrapped:!0}),n._unsubscribe&&n._unsubscribe())})),n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oBe(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return"function"===typeof this.props.children?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}])&&nBe(n.prototype,r),a&&nBe(n,a),t}(S.PureComponent);sBe(uBe,"defaultProps",{children:null,loading:null}),_.render((0,fn.jsx)(cn,{store:Ut,children:(0,fn.jsx)(uBe,{persistor:Ht,children:(0,fn.jsx)(S.StrictMode,{children:(0,fn.jsx)(Qze,{})})})}),document.getElementById("root")),Jze()}()}();
//# sourceMappingURL=main.f3c5278f.js.map